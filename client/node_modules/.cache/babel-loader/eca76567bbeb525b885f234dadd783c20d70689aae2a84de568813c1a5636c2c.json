{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as e } from \"../../../../core/maybe.js\";\nimport { vtlBrushes as t } from \"../vtlBrushes.js\";\nimport r from \"./shaders/VTLMaterialManager.js\";\nimport { Visibility as s, StyleLayerType as a } from \"./style/StyleDefinition.js\";\nimport { CompareFunction as i, BlendFactor as n } from \"../../../webgl/enums.js\";\nconst l = 1e-6;\nclass o {\n  constructor(e, t) {\n    this.spriteMosaic = e, this.glyphMosaic = t, this._brushCache = new Map(), this._vtlMaterialManager = new r();\n  }\n  dispose() {\n    this._brushCache && (this._brushCache.forEach(e => e.dispose()), this._brushCache = null), this._vtlMaterialManager = e(this._vtlMaterialManager), this.spriteMosaic.dispose(), this.glyphMosaic.dispose();\n  }\n  get vectorTilesMaterialManager() {\n    return this._vtlMaterialManager;\n  }\n  drawTile(e, t, r) {\n    const {\n        context: s\n      } = e,\n      a = r.layers;\n    r.backgroundBucketIds.length > 0 && (e.renderPass = \"background\", r.backgroundBucketIds.forEach(s => this._renderStyleLayer(r.getLayerById(s), e, t, !0))), s.setBlendingEnabled(!1), s.setDepthTestEnabled(!0), s.setDepthWriteEnabled(!0), s.setDepthFunction(i.LEQUAL), e.renderPass = \"opaque\";\n    for (let i = a.length - 1; i >= 0; i--) this._renderStyleLayer(a[i], e, t, !1);\n    s.setDepthWriteEnabled(!1), s.setBlendingEnabled(!0), s.setBlendFunctionSeparate(n.ONE, n.ONE_MINUS_SRC_ALPHA, n.ONE, n.ONE_MINUS_SRC_ALPHA), e.renderPass = \"translucent\";\n    for (let i = 0; i < a.length; i++) this._renderStyleLayer(a[i], e, t, !1);\n    s.setDepthTestEnabled(!1), s.bindVAO();\n  }\n  _renderStyleLayer(e, t, r) {\n    let i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n    if (!(i || e && r.layerData.has(e.uid))) return;\n    const n = e.getLayoutProperty(\"visibility\");\n    if (n && n.getValue() === s.NONE) return;\n    const {\n      renderPass: o\n    } = t;\n    let h;\n    switch (e.type) {\n      case a.BACKGROUND:\n        if (\"background\" !== o) return;\n        h = \"vtlBackground\";\n        break;\n      case a.FILL:\n        if (\"opaque\" !== o && \"translucent\" !== t.renderPass) return;\n        h = \"vtlFill\";\n        break;\n      case a.LINE:\n        if (\"translucent\" !== o) return;\n        h = \"vtlLine\";\n        break;\n      case a.CIRCLE:\n        if (\"translucent\" !== o) return;\n        h = \"vtlCircle\";\n        break;\n      case a.SYMBOL:\n        if (\"translucent\" !== o) return;\n        h = \"vtlSymbol\";\n    }\n    const c = t.displayLevel;\n    void 0 !== e.minzoom && e.minzoom > c + l || void 0 !== e.maxzoom && e.maxzoom <= c - l || (t.styleLayerUID = e.uid, t.styleLayer = e, this._drawWithBrush(t, r, h));\n  }\n  _drawWithBrush(e, r, s) {\n    if (!this._brushCache.has(s)) {\n      const e = t[s];\n      this._brushCache.set(s, new e());\n    }\n    this._brushCache.get(s).drawMany(e, [r]);\n  }\n}\nexport { o as default };","map":{"version":3,"names":["disposeMaybe","e","vtlBrushes","t","r","Visibility","s","StyleLayerType","a","CompareFunction","i","BlendFactor","n","l","o","constructor","spriteMosaic","glyphMosaic","_brushCache","Map","_vtlMaterialManager","dispose","forEach","vectorTilesMaterialManager","drawTile","context","layers","backgroundBucketIds","length","renderPass","_renderStyleLayer","getLayerById","setBlendingEnabled","setDepthTestEnabled","setDepthWriteEnabled","setDepthFunction","LEQUAL","setBlendFunctionSeparate","ONE","ONE_MINUS_SRC_ALPHA","bindVAO","arguments","undefined","layerData","has","uid","getLayoutProperty","getValue","NONE","h","type","BACKGROUND","FILL","LINE","CIRCLE","SYMBOL","c","displayLevel","minzoom","maxzoom","styleLayerUID","styleLayer","_drawWithBrush","set","get","drawMany","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/2d/engine/vectorTiles/VTLPainter3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as e}from\"../../../../core/maybe.js\";import{vtlBrushes as t}from\"../vtlBrushes.js\";import r from\"./shaders/VTLMaterialManager.js\";import{Visibility as s,StyleLayerType as a}from\"./style/StyleDefinition.js\";import{CompareFunction as i,BlendFactor as n}from\"../../../webgl/enums.js\";const l=1e-6;class o{constructor(e,t){this.spriteMosaic=e,this.glyphMosaic=t,this._brushCache=new Map,this._vtlMaterialManager=new r}dispose(){this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache=null),this._vtlMaterialManager=e(this._vtlMaterialManager),this.spriteMosaic.dispose(),this.glyphMosaic.dispose()}get vectorTilesMaterialManager(){return this._vtlMaterialManager}drawTile(e,t,r){const{context:s}=e,a=r.layers;r.backgroundBucketIds.length>0&&(e.renderPass=\"background\",r.backgroundBucketIds.forEach((s=>this._renderStyleLayer(r.getLayerById(s),e,t,!0)))),s.setBlendingEnabled(!1),s.setDepthTestEnabled(!0),s.setDepthWriteEnabled(!0),s.setDepthFunction(i.LEQUAL),e.renderPass=\"opaque\";for(let i=a.length-1;i>=0;i--)this._renderStyleLayer(a[i],e,t,!1);s.setDepthWriteEnabled(!1),s.setBlendingEnabled(!0),s.setBlendFunctionSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),e.renderPass=\"translucent\";for(let i=0;i<a.length;i++)this._renderStyleLayer(a[i],e,t,!1);s.setDepthTestEnabled(!1),s.bindVAO()}_renderStyleLayer(e,t,r,i=!1){if(!(i||e&&r.layerData.has(e.uid)))return;const n=e.getLayoutProperty(\"visibility\");if(n&&n.getValue()===s.NONE)return;const{renderPass:o}=t;let h;switch(e.type){case a.BACKGROUND:if(\"background\"!==o)return;h=\"vtlBackground\";break;case a.FILL:if(\"opaque\"!==o&&\"translucent\"!==t.renderPass)return;h=\"vtlFill\";break;case a.LINE:if(\"translucent\"!==o)return;h=\"vtlLine\";break;case a.CIRCLE:if(\"translucent\"!==o)return;h=\"vtlCircle\";break;case a.SYMBOL:if(\"translucent\"!==o)return;h=\"vtlSymbol\"}const c=t.displayLevel;void 0!==e.minzoom&&e.minzoom>c+l||void 0!==e.maxzoom&&e.maxzoom<=c-l||(t.styleLayerUID=e.uid,t.styleLayer=e,this._drawWithBrush(t,r,h))}_drawWithBrush(e,r,s){if(!this._brushCache.has(s)){const e=t[s];this._brushCache.set(s,new e)}this._brushCache.get(s).drawMany(e,[r])}}export{o as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}