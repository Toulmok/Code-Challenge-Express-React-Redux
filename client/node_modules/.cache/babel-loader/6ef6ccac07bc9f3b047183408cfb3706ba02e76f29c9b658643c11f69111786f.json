{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../../chunks/tslib.es6.js\";\nimport { HandleOwner as t } from \"../../../../../../core/HandleOwner.js\";\nimport { isSome as r, isNone as i } from \"../../../../../../core/maybe.js\";\nimport { watch as s, initial as o } from \"../../../../../../core/reactiveUtils.js\";\nimport { property as n } from \"../../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../../core/arrayUtils.js\";\nimport { subclass as l } from \"../../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { TileKey as p } from \"../../../../../../layers/support/TileKey.js\";\nimport { Visibility as a } from \"../../../../layers/support/FeatureTileDescriptor3D.js\";\nimport { distanceToTile as c } from \"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";\nlet u = class extends t {\n  get tiles() {\n    const e = this.tilesCoveringView,\n      t = this._effectivePointOfInterest;\n    if (r(t)) {\n      const r = e.map(e => c(t, e));\n      for (let i = 1; i < r.length; i++) if (r[i - 1] > r[i]) return e.sort((e, r) => c(t, e) - c(t, r)), e.slice();\n    }\n    return e;\n  }\n  get tilesCoveringView() {\n    return this._filterTiles(this.view.featureTiles?.tiles?.toArray()).map(f);\n  }\n  get tileInfo() {\n    return this.view.featureTiles?.tilingScheme.toTileInfo() ?? null;\n  }\n  get tileSize() {\n    return this.view.featureTiles?.tileSize ?? 256;\n  }\n  get _effectivePointOfInterest() {\n    const e = this.pointOfInterest;\n    return r(e) ? e : this.view.pointsOfInterest?.focus.location;\n  }\n  constructor(e) {\n    super(e), this.pointOfInterest = null;\n  }\n  initialize() {\n    this.handles.add(s(() => this.view.featureTiles, e => {\n      this.handles.remove(v), e && this.handles.add(e.addClient(), v);\n    }, o));\n  }\n  _filterTiles(e) {\n    if (i(e)) return [];\n    return e.filter(e => Math.abs(e.measures.screenRect[3] - e.measures.screenRect[1]) > m && e.measures.visibility === a.VISIBLE_ON_SURFACE);\n  }\n};\nfunction f(_ref) {\n  let {\n    lij: [e, t, r],\n    extent: i\n  } = _ref;\n  return new p(`${e}/${t}/${r}`, e, t, r, i);\n}\ne([n({\n  readOnly: !0\n})], u.prototype, \"tiles\", null), e([n({\n  readOnly: !0\n})], u.prototype, \"tilesCoveringView\", null), e([n({\n  readOnly: !0\n})], u.prototype, \"tileInfo\", null), e([n({\n  readOnly: !0\n})], u.prototype, \"tileSize\", null), e([n({\n  constructOnly: !0\n})], u.prototype, \"view\", void 0), e([n()], u.prototype, \"pointOfInterest\", void 0), e([n()], u.prototype, \"_effectivePointOfInterest\", null), u = e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D\")], u);\nconst m = 50,\n  v = \"feature-tiles\";\nexport { u as FeatureServiceTiles3D };","map":{"version":3,"names":["_","e","HandleOwner","t","isSome","r","isNone","i","watch","s","initial","o","property","n","subclass","l","TileKey","p","Visibility","a","distanceToTile","c","u","tiles","tilesCoveringView","_effectivePointOfInterest","map","length","sort","slice","_filterTiles","view","featureTiles","toArray","f","tileInfo","tilingScheme","toTileInfo","tileSize","pointOfInterest","pointsOfInterest","focus","location","constructor","initialize","handles","add","remove","v","addClient","filter","Math","abs","measures","screenRect","m","visibility","VISIBLE_ON_SURFACE","_ref","lij","extent","readOnly","prototype","constructOnly","FeatureServiceTiles3D"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../../core/HandleOwner.js\";import{isSome as r,isNone as i}from\"../../../../../../core/maybe.js\";import{watch as s,initial as o}from\"../../../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../../core/arrayUtils.js\";import{subclass as l}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{TileKey as p}from\"../../../../../../layers/support/TileKey.js\";import{Visibility as a}from\"../../../../layers/support/FeatureTileDescriptor3D.js\";import{distanceToTile as c}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let u=class extends t{get tiles(){const e=this.tilesCoveringView,t=this._effectivePointOfInterest;if(r(t)){const r=e.map((e=>c(t,e)));for(let i=1;i<r.length;i++)if(r[i-1]>r[i])return e.sort(((e,r)=>c(t,e)-c(t,r))),e.slice()}return e}get tilesCoveringView(){return this._filterTiles(this.view.featureTiles?.tiles?.toArray()).map(f)}get tileInfo(){return this.view.featureTiles?.tilingScheme.toTileInfo()??null}get tileSize(){return this.view.featureTiles?.tileSize??256}get _effectivePointOfInterest(){const e=this.pointOfInterest;return r(e)?e:this.view.pointsOfInterest?.focus.location}constructor(e){super(e),this.pointOfInterest=null}initialize(){this.handles.add(s((()=>this.view.featureTiles),(e=>{this.handles.remove(v),e&&this.handles.add(e.addClient(),v)}),o))}_filterTiles(e){if(i(e))return[];return e.filter((e=>Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>m&&e.measures.visibility===a.VISIBLE_ON_SURFACE))}};function f({lij:[e,t,r],extent:i}){return new p(`${e}/${t}/${r}`,e,t,r,i)}e([n({readOnly:!0})],u.prototype,\"tiles\",null),e([n({readOnly:!0})],u.prototype,\"tilesCoveringView\",null),e([n({readOnly:!0})],u.prototype,\"tileInfo\",null),e([n({readOnly:!0})],u.prototype,\"tileSize\",null),e([n({constructOnly:!0})],u.prototype,\"view\",void 0),e([n()],u.prototype,\"pointOfInterest\",void 0),e([n()],u.prototype,\"_effectivePointOfInterest\",null),u=e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D\")],u);const m=50,v=\"feature-tiles\";export{u as FeatureServiceTiles3D};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}