{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { Float3PassUniform as e } from \"../../shaderModules/Float3PassUniform.js\";\nimport { Float4sPassUniform as o } from \"../../shaderModules/Float4sPassUniform.js\";\nimport { FloatsPassUniform as r } from \"../../shaderModules/FloatsPassUniform.js\";\nimport { glsl as v } from \"../../shaderModules/interfaces.js\";\nimport { Matrix3PassUniform as t } from \"../../shaderModules/Matrix3PassUniform.js\";\nimport { VertexAttribute as a } from \"../../../lib/VertexAttribute.js\";\nimport { vvColorNumber as i } from \"../../../materials/VisualVariablePassParameters.js\";\nfunction s(s, n) {\n  n.hasVvInstancing && (n.vvSize || n.vvColor) && s.attributes.add(a.INSTANCEFEATUREATTRIBUTE, \"vec4\");\n  const l = s.vertex;\n  n.vvSize ? (l.uniforms.add(new e(\"vvSizeMinSize\", e => e.vvSizeMinSize)), l.uniforms.add(new e(\"vvSizeMaxSize\", e => e.vvSizeMaxSize)), l.uniforms.add(new e(\"vvSizeOffset\", e => e.vvSizeOffset)), l.uniforms.add(new e(\"vvSizeFactor\", e => e.vvSizeFactor)), l.uniforms.add(new t(\"vvSymbolRotationMatrix\", e => e.vvSymbolRotationMatrix)), l.uniforms.add(new e(\"vvSymbolAnchor\", e => e.vvSymbolAnchor)), l.code.add(v`vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}`), l.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${n.hasVvInstancing ? v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }` : \"\"}\n    `)) : l.code.add(v`vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`), n.vvColor ? (l.constants.add(\"vvColorNumber\", \"int\", i), n.hasVvInstancing && l.uniforms.add([new r(\"vvColorValues\", e => e.vvColorValues, i), new o(\"vvColorColors\", e => e.vvColorColors, i)]), l.code.add(v`\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ${n.hasVvInstancing ? v`\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }` : \"\"}\n    `)) : l.code.add(v`vec4 vvColor() { return vec4(1.0); }`);\n}\nexport { s as VisualVariables };","map":{"version":3,"names":["Float3PassUniform","e","Float4sPassUniform","o","FloatsPassUniform","r","glsl","v","Matrix3PassUniform","t","VertexAttribute","a","vvColorNumber","i","s","n","hasVvInstancing","vvSize","vvColor","attributes","add","INSTANCEFEATUREATTRIBUTE","l","vertex","uniforms","vvSizeMinSize","vvSizeMaxSize","vvSizeOffset","vvSizeFactor","vvSymbolRotationMatrix","vvSymbolAnchor","code","constants","vvColorValues","vvColorColors","VisualVariables"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{Float3PassUniform as e}from\"../../shaderModules/Float3PassUniform.js\";import{Float4sPassUniform as o}from\"../../shaderModules/Float4sPassUniform.js\";import{FloatsPassUniform as r}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as v}from\"../../shaderModules/interfaces.js\";import{Matrix3PassUniform as t}from\"../../shaderModules/Matrix3PassUniform.js\";import{VertexAttribute as a}from\"../../../lib/VertexAttribute.js\";import{vvColorNumber as i}from\"../../../materials/VisualVariablePassParameters.js\";function s(s,n){n.hasVvInstancing&&(n.vvSize||n.vvColor)&&s.attributes.add(a.INSTANCEFEATUREATTRIBUTE,\"vec4\");const l=s.vertex;n.vvSize?(l.uniforms.add(new e(\"vvSizeMinSize\",(e=>e.vvSizeMinSize))),l.uniforms.add(new e(\"vvSizeMaxSize\",(e=>e.vvSizeMaxSize))),l.uniforms.add(new e(\"vvSizeOffset\",(e=>e.vvSizeOffset))),l.uniforms.add(new e(\"vvSizeFactor\",(e=>e.vvSizeFactor))),l.uniforms.add(new t(\"vvSymbolRotationMatrix\",(e=>e.vvSymbolRotationMatrix))),l.uniforms.add(new e(\"vvSymbolAnchor\",(e=>e.vvSymbolAnchor))),l.code.add(v`vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}`),l.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${n.hasVvInstancing?v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }`:\"\"}\n    `)):l.code.add(v`vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),n.vvColor?(l.constants.add(\"vvColorNumber\",\"int\",i),n.hasVvInstancing&&l.uniforms.add([new r(\"vvColorValues\",(e=>e.vvColorValues),i),new o(\"vvColorColors\",(e=>e.vvColorColors),i)]),l.code.add(v`\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ${n.hasVvInstancing?v`\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }`:\"\"}\n    `)):l.code.add(v`vec4 vvColor() { return vec4(1.0); }`)}export{s as VisualVariables};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,iBAAiB,IAAIC,CAAC,QAAK,0CAA0C;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,2CAA2C;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,0CAA0C;AAAC,SAAOC,IAAI,IAAIC,CAAC,QAAK,mCAAmC;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,2CAA2C;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,iCAAiC;AAAC,SAAOC,aAAa,IAAIC,CAAC,QAAK,oDAAoD;AAAC,SAASC,CAACA,CAACA,CAAC,EAACC,CAAC,EAAC;EAACA,CAAC,CAACC,eAAe,KAAGD,CAAC,CAACE,MAAM,IAAEF,CAAC,CAACG,OAAO,CAAC,IAAEJ,CAAC,CAACK,UAAU,CAACC,GAAG,CAACT,CAAC,CAACU,wBAAwB,EAAC,MAAM,CAAC;EAAC,MAAMC,CAAC,GAACR,CAAC,CAACS,MAAM;EAACR,CAAC,CAACE,MAAM,IAAEK,CAAC,CAACE,QAAQ,CAACJ,GAAG,CAAC,IAAInB,CAAC,CAAC,eAAe,EAAEA,CAAC,IAAEA,CAAC,CAACwB,aAAa,CAAE,CAAC,EAACH,CAAC,CAACE,QAAQ,CAACJ,GAAG,CAAC,IAAInB,CAAC,CAAC,eAAe,EAAEA,CAAC,IAAEA,CAAC,CAACyB,aAAa,CAAE,CAAC,EAACJ,CAAC,CAACE,QAAQ,CAACJ,GAAG,CAAC,IAAInB,CAAC,CAAC,cAAc,EAAEA,CAAC,IAAEA,CAAC,CAAC0B,YAAY,CAAE,CAAC,EAACL,CAAC,CAACE,QAAQ,CAACJ,GAAG,CAAC,IAAInB,CAAC,CAAC,cAAc,EAAEA,CAAC,IAAEA,CAAC,CAAC2B,YAAY,CAAE,CAAC,EAACN,CAAC,CAACE,QAAQ,CAACJ,GAAG,CAAC,IAAIX,CAAC,CAAC,wBAAwB,EAAER,CAAC,IAAEA,CAAC,CAAC4B,sBAAsB,CAAE,CAAC,EAACP,CAAC,CAACE,QAAQ,CAACJ,GAAG,CAAC,IAAInB,CAAC,CAAC,gBAAgB,EAAEA,CAAC,IAAEA,CAAC,CAAC6B,cAAc,CAAE,CAAC,EAACR,CAAC,CAACS,IAAI,CAACX,GAAG,CAACb,CAAE;AACphC;AACA;AACA;AACA;AACA,EAAE,CAAC,EAACe,CAAC,CAACS,IAAI,CAACX,GAAG,CAACb,CAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQQ,CAAC,CAACC,eAAe,GAACT,CAAE;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAC,EAAG;AACZ,KAAK,CAAC,IAAEe,CAAC,CAACS,IAAI,CAACX,GAAG,CAACb,CAAE;AACrB,gEAAgE,CAAC,EAACQ,CAAC,CAACG,OAAO,IAAEI,CAAC,CAACU,SAAS,CAACZ,GAAG,CAAC,eAAe,EAAC,KAAK,EAACP,CAAC,CAAC,EAACE,CAAC,CAACC,eAAe,IAAEM,CAAC,CAACE,QAAQ,CAACJ,GAAG,CAAC,CAAC,IAAIf,CAAC,CAAC,eAAe,EAAEJ,CAAC,IAAEA,CAAC,CAACgC,aAAa,EAAEpB,CAAC,CAAC,EAAC,IAAIV,CAAC,CAAC,eAAe,EAAEF,CAAC,IAAEA,CAAC,CAACiC,aAAa,EAAErB,CAAC,CAAC,CAAC,CAAC,EAACS,CAAC,CAACS,IAAI,CAACX,GAAG,CAACb,CAAE;AACpQ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQQ,CAAC,CAACC,eAAe,GAACT,CAAE;AAC5B;AACA;AACA,QAAQ,GAAC,EAAG;AACZ,KAAK,CAAC,IAAEe,CAAC,CAACS,IAAI,CAACX,GAAG,CAACb,CAAE,sCAAqC,CAAC;AAAA;AAAC,SAAOO,CAAC,IAAIqB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}