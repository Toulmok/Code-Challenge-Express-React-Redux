{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _slicedToArray from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { isSome as t } from \"../../core/maybe.js\";\nimport { getReferenceEllipsoidFromWKID as n } from \"../../geometry/ellipsoidUtils.js\";\nimport i from \"../../geometry/Extent.js\";\nimport r from \"../../geometry/Point.js\";\nimport o from \"../../geometry/support/WKIDUnitConversion.js\";\nimport { isAxesOrderReversedForWkid as l } from \"../ogc/crsUtils.js\";\nimport { visitXML as s } from \"../ogc/xmlUtils.js\";\nimport a from \"./LOD.js\";\nimport c from \"./TileInfo.js\";\nvar u = 90.71428571428571;\nfunction p(t) {\n  var n = t.replace(/ows:/gi, \"\");\n  if (!g(\"Contents\", new DOMParser().parseFromString(n, \"text/xml\").documentElement)) throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\", \"the wmts get capabilities response is not compliant\", {\n    text: t\n  });\n}\nfunction f(t, n) {\n  var _g, _n$url;\n  t = t.replace(/ows:/gi, \"\");\n  var i = new DOMParser().parseFromString(t, \"text/xml\").documentElement,\n    r = new Map(),\n    o = new Map(),\n    l = g(\"Contents\", i);\n  if (!l) throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");\n  var s = (_g = g(\"OperationsMetadata\", i)) === null || _g === void 0 ? void 0 : _g.querySelector(\"[name='GetTile']\"),\n    a = s === null || s === void 0 ? void 0 : s.getElementsByTagName(\"Get\"),\n    c = a && Array.prototype.slice.call(a),\n    u = (_n$url = n.url) === null || _n$url === void 0 ? void 0 : _n$url.indexOf(\"https\"),\n    p = void 0 !== u && u > -1;\n  var f,\n    d,\n    m = n.serviceMode,\n    h = n === null || n === void 0 ? void 0 : n.url;\n  if (c && c.length && c.some(function (e) {\n    var t = g(\"Constraint\", e);\n    return !t || C(\"AllowedValues\", \"Value\", m, t) ? (h = e.attributes[0].nodeValue, !0) : (!t || C(\"AllowedValues\", \"Value\", \"RESTful\", t) || C(\"AllowedValues\", \"Value\", \"REST\", t) ? d = e.attributes[0].nodeValue : t && !C(\"AllowedValues\", \"Value\", \"KVP\", t) || (f = e.attributes[0].nodeValue), !1);\n  }), !h) if (d) h = d, m = \"RESTful\";else if (f) h = f, m = \"KVP\";else {\n    var _e = g(\"ServiceMetadataURL\", i);\n    h = _e === null || _e === void 0 ? void 0 : _e.getAttribute(\"xlink:href\");\n  }\n  var T = h.indexOf(\"1.0.0/\");\n  -1 === T && \"RESTful\" === m ? h += \"/\" : T > -1 && (h = h.substring(0, T)), \"KVP\" === m && (h += T > -1 ? \"\" : \"?\"), p && (h = h.replace(/^http:/i, \"https:\"));\n  var y = w(\"ServiceIdentification>ServiceTypeVersion\", i),\n    R = w(\"ServiceIdentification>AccessConstraints\", i),\n    S = R && /^none$/i.test(R) ? null : R,\n    V = x(\"Layer\", l),\n    b = x(\"TileMatrixSet\", l),\n    E = V.map(function (e) {\n      var t = w(\"Identifier\", e);\n      return r.set(t, e), M(t, e, b, p, y);\n    });\n  return {\n    copyright: S,\n    dimensionMap: o,\n    layerMap: r,\n    layers: E,\n    serviceMode: m,\n    tileUrl: h\n  };\n}\nfunction d(e) {\n  return e.layers.forEach(function (e) {\n    var _e$tileMatrixSets;\n    (_e$tileMatrixSets = e.tileMatrixSets) === null || _e$tileMatrixSets === void 0 ? void 0 : _e$tileMatrixSets.forEach(function (e) {\n      var _t$lods;\n      var t = e.tileInfo;\n      t && 96 !== t.dpi && ((_t$lods = t.lods) !== null && _t$lods !== void 0 && _t$lods.forEach(function (n) {\n        var _t$spatialReference;\n        n.scale = 96 * n.scale / t.dpi, n.resolution = j((_t$spatialReference = t.spatialReference) === null || _t$spatialReference === void 0 ? void 0 : _t$spatialReference.wkid, n.scale * u / 96, e.id);\n      }), t.dpi = 96);\n    });\n  }), e;\n}\nfunction m(e) {\n  return e.nodeType === Node.ELEMENT_NODE;\n}\nfunction g(e, t) {\n  for (var _n = 0; _n < t.childNodes.length; _n++) {\n    var _i = t.childNodes[_n];\n    if (m(_i) && _i.nodeName === e) return _i;\n  }\n  return null;\n}\nfunction x(e, t) {\n  var n = [];\n  for (var _i2 = 0; _i2 < t.childNodes.length; _i2++) {\n    var _r = t.childNodes[_i2];\n    m(_r) && _r.nodeName === e && n.push(_r);\n  }\n  return n;\n}\nfunction h(e, n) {\n  var i = [];\n  for (var _t = 0; _t < n.childNodes.length; _t++) {\n    var _r2 = n.childNodes[_t];\n    m(_r2) && _r2.nodeName === e && i.push(_r2);\n  }\n  return i.map(function (e) {\n    return e.textContent;\n  }).filter(t);\n}\nfunction w(e, t) {\n  return e.split(\">\").forEach(function (e) {\n    t && (t = g(e, t));\n  }), t && t.textContent;\n}\nfunction C(e, t, n, i) {\n  var r;\n  return Array.prototype.slice.call(i.childNodes).some(function (i) {\n    if (i.nodeName.includes(e)) {\n      var _e2 = g(t, i),\n        _o = _e2 && _e2.textContent;\n      if (_o === n || n.split(\":\") && n.split(\":\")[1] === _o) return r = i, !0;\n    }\n    return !1;\n  }), r;\n}\nfunction M(e, t, n, i, r) {\n  var o = w(\"Abstract\", t),\n    l = h(\"Format\", t);\n  return {\n    id: e,\n    fullExtent: V(t),\n    fullExtents: b(t),\n    description: o,\n    formats: l,\n    styles: E(t, i),\n    title: w(\"Title\", t),\n    tileMatrixSets: L(r, t, n)\n  };\n}\nfunction T(e, t) {\n  var _e$layerMap;\n  var n = [],\n    i = (_e$layerMap = e.layerMap) === null || _e$layerMap === void 0 ? void 0 : _e$layerMap.get(t);\n  if (!i) return null;\n  var r = x(\"ResourceURL\", i),\n    o = x(\"Dimension\", i);\n  var l, s, a, c;\n  return o.length && (l = w(\"Identifier\", o[0]), s = h(\"Default\", o[0]) || h(\"Value\", o[0])), o.length > 1 && (a = w(\"Identifier\", o[1]), c = h(\"Default\", o[1]) || h(\"Value\", o[1])), e.dimensionMap.set(t, {\n    dimensions: s,\n    dimensions2: c\n  }), r.forEach(function (e) {\n    var t = e.getAttribute(\"template\");\n    if (\"tile\" === e.getAttribute(\"resourceType\")) {\n      if (l && s.length) if (t.includes(\"{\" + l + \"}\")) t = t.replace(\"{\" + l + \"}\", \"{dimensionValue}\");else {\n        var _e3 = t.toLowerCase().indexOf(\"{\" + l.toLowerCase() + \"}\");\n        _e3 > -1 && (t = t.substring(0, _e3) + \"{dimensionValue}\" + t.substring(_e3 + l.length + 2));\n      }\n      if (a && c.length) if (t.includes(\"{\" + a + \"}\")) t = t.replace(\"{\" + a + \"}\", \"{dimensionValue2}\");else {\n        var _e4 = t.toLowerCase().indexOf(\"{\" + a.toLowerCase() + \"}\");\n        _e4 > -1 && (t = t.substring(0, _e4) + \"{dimensionValue2}\" + t.substring(_e4 + a.length + 2));\n      }\n      n.push({\n        template: t,\n        format: e.getAttribute(\"format\"),\n        resourceType: \"tile\"\n      });\n    }\n  }), n;\n}\nfunction y(e, t, n, i, r, o, l, s) {\n  var _c$get$dimensions, _c$get$dimensions2;\n  var a = R(e, t, i);\n  if (!((a === null || a === void 0 ? void 0 : a.length) > 0)) return \"\";\n  var c = e.dimensionMap,\n    u = (_c$get$dimensions = c.get(t).dimensions) === null || _c$get$dimensions === void 0 ? void 0 : _c$get$dimensions[0],\n    p = (_c$get$dimensions2 = c.get(t).dimensions2) === null || _c$get$dimensions2 === void 0 ? void 0 : _c$get$dimensions2[0];\n  return a[l % a.length].template.replace(/\\{Style\\}/gi, r !== null && r !== void 0 ? r : \"\").replace(/\\{TileMatrixSet\\}/gi, n !== null && n !== void 0 ? n : \"\").replace(/\\{TileMatrix\\}/gi, o).replace(/\\{TileRow\\}/gi, \"\" + l).replace(/\\{TileCol\\}/gi, \"\" + s).replace(/\\{dimensionValue\\}/gi, u).replace(/\\{dimensionValue2\\}/gi, p);\n}\nfunction R(e, t, n) {\n  var _ref;\n  var i = T(e, t),\n    r = i === null || i === void 0 ? void 0 : i.filter(function (e) {\n      return e.format === n;\n    });\n  return (_ref = r !== null && r !== void 0 && r.length ? r : i) !== null && _ref !== void 0 ? _ref : [];\n}\nfunction S(e, t, n, i) {\n  var r = e.dimensionMap,\n    o = T(e, t);\n  var l = \"\";\n  if (o && o.length > 0) {\n    var _e5 = r.get(t).dimensions && r.get(t).dimensions[0],\n      _s = r.get(t).dimensions2 && r.get(t).dimensions2[0];\n    l = o[0].template, l.indexOf(\".xxx\") === l.length - 4 && (l = l.slice(0, l.length - 4)), l = l.replace(/\\{Style\\}/gi, i), l = l.replace(/\\{TileMatrixSet\\}/gi, n), l = l.replace(/\\{TileMatrix\\}/gi, \"{level}\"), l = l.replace(/\\{TileRow\\}/gi, \"{row}\"), l = l.replace(/\\{TileCol\\}/gi, \"{col}\"), l = l.replace(/\\{dimensionValue\\}/gi, _e5), l = l.replace(/\\{dimensionValue2\\}/gi, _s);\n  }\n  return l;\n}\nfunction V(e) {\n  var t = g(\"WGS84BoundingBox\", e),\n    n = t ? w(\"LowerCorner\", t).split(\" \") : [\"-180\", \"-90\"],\n    i = t ? w(\"UpperCorner\", t).split(\" \") : [\"180\", \"90\"];\n  return {\n    xmin: parseFloat(n[0]),\n    ymin: parseFloat(n[1]),\n    xmax: parseFloat(i[0]),\n    ymax: parseFloat(i[1]),\n    spatialReference: {\n      wkid: 4326\n    }\n  };\n}\nfunction b(e) {\n  var t = [];\n  return s(e, {\n    BoundingBox: function BoundingBox(e) {\n      if (!e.getAttribute(\"crs\")) return;\n      var n = e.getAttribute(\"crs\").toLowerCase(),\n        i = N(n),\n        r = n.includes(\"epsg\") && l(i.wkid);\n      var o, a, c, u;\n      s(e, {\n        LowerCorner: function LowerCorner(e) {\n          var _e$textContent$split$, _e$textContent$split$2, _ref2;\n          (_e$textContent$split$ = e.textContent.split(\" \").map(function (e) {\n            return Number.parseFloat(e);\n          }), _e$textContent$split$2 = _slicedToArray(_e$textContent$split$, 2), o = _e$textContent$split$2[0], a = _e$textContent$split$2[1]), r && (_ref2 = [a, o], o = _ref2[0], a = _ref2[1], _ref2);\n        },\n        UpperCorner: function UpperCorner(e) {\n          var _e$textContent$split$3, _e$textContent$split$4, _ref3;\n          (_e$textContent$split$3 = e.textContent.split(\" \").map(function (e) {\n            return Number.parseFloat(e);\n          }), _e$textContent$split$4 = _slicedToArray(_e$textContent$split$3, 2), c = _e$textContent$split$4[0], u = _e$textContent$split$4[1]), r && (_ref3 = [u, c], c = _ref3[0], u = _ref3[1], _ref3);\n        }\n      }), t.push({\n        xmin: o,\n        ymin: a,\n        xmax: c,\n        ymax: u,\n        spatialReference: i\n      });\n    }\n  }), t;\n}\nfunction E(e, t) {\n  return x(\"Style\", e).map(function (e) {\n    var n = g(\"LegendURL\", e),\n      i = g(\"Keywords\", e),\n      r = i ? h(\"Keyword\", i) : [];\n    var o = n && n.getAttribute(\"xlink:href\");\n    t && (o = o && o.replace(/^http:/i, \"https:\"));\n    return {\n      abstract: w(\"Abstract\", e),\n      id: w(\"Identifier\", e),\n      isDefault: \"true\" === e.getAttribute(\"isDefault\"),\n      keywords: r,\n      legendUrl: o,\n      title: w(\"Title\", e)\n    };\n  });\n}\nfunction L(e, t, n) {\n  return x(\"TileMatrixSetLink\", t).map(function (t) {\n    return I(e, t, n);\n  });\n}\nfunction I(e, t, n) {\n  var i = g(\"TileMatrixSet\", t).textContent,\n    r = h(\"TileMatrix\", t),\n    o = n.find(function (e) {\n      var t = g(\"Identifier\", e),\n        n = t && t.textContent;\n      return !!(n === i || i.split(\":\") && i.split(\":\")[1] === n);\n    }),\n    l = g(\"TileMatrixSetLimits\", t),\n    s = l && x(\"TileMatrixLimits\", l),\n    a = new Map();\n  if (s !== null && s !== void 0 && s.length) {\n    var _iterator = _createForOfIteratorHelper(s),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _c = _step.value;\n        var _e6 = g(\"TileMatrix\", _c).textContent,\n          _t2 = +g(\"MinTileRow\", _c).textContent,\n          _n2 = +g(\"MaxTileRow\", _c).textContent,\n          _i3 = +g(\"MinTileCol\", _c).textContent,\n          _r3 = +g(\"MaxTileCol\", _c).textContent;\n        a.set(_e6, {\n          minCol: _i3,\n          maxCol: _r3,\n          minRow: _t2,\n          maxRow: _n2\n        });\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  var u = w(\"SupportedCRS\", o).toLowerCase(),\n    p = A(o, u),\n    f = p.spatialReference,\n    d = g(\"TileMatrix\", o),\n    m = [parseInt(w(\"TileWidth\", d), 10), parseInt(w(\"TileHeight\", d), 10)],\n    M = [];\n  if (r.length) r.forEach(function (e, t) {\n    var n = C(\"TileMatrix\", \"Identifier\", e, o);\n    M.push(k(n, u, t, i, a));\n  });else {\n    x(\"TileMatrix\", o).forEach(function (e, t) {\n      M.push(k(e, u, t, i, a));\n    });\n  }\n  var T = F(e, o, p, m, M[0]).toJSON(),\n    y = new c({\n      dpi: 96,\n      spatialReference: f,\n      size: m,\n      origin: p,\n      lods: M\n    }).toJSON();\n  return {\n    id: i,\n    fullExtent: T,\n    tileInfo: y\n  };\n}\nfunction N(e) {\n  e = e.toLowerCase();\n  var n = parseInt(e.split(\":\").pop(), 10);\n  900913 !== n && 3857 !== n || (n = 102100);\n  var i = U(e);\n  return t(i) && (n = i), {\n    wkid: n\n  };\n}\nfunction A(e, t) {\n  return v(g(\"TileMatrix\", e), t);\n}\nfunction v(e, t) {\n  var n = N(t),\n    _w$split$map = w(\"TopLeftCorner\", e).split(\" \").map(function (e) {\n      return parseFloat(e);\n    }),\n    _w$split$map2 = _slicedToArray(_w$split$map, 2),\n    i = _w$split$map2[0],\n    o = _w$split$map2[1],\n    s = t.includes(\"epsg\") && l(n.wkid);\n  return new r(s ? {\n    x: o,\n    y: i,\n    spatialReference: n\n  } : {\n    x: i,\n    y: o,\n    spatialReference: n\n  });\n}\nfunction F(e, t, n, r, o) {\n  var l = g(\"BoundingBox\", t);\n  var s, a, c, u, p, f;\n  if (l && (s = w(\"LowerCorner\", l).split(\" \"), a = w(\"UpperCorner\", l).split(\" \")), s && s.length > 1 && a && a.length > 1) c = parseFloat(s[0]), p = parseFloat(s[1]), u = parseFloat(a[0]), f = parseFloat(a[1]);else {\n    var _e7 = g(\"TileMatrix\", t),\n      _i4 = parseInt(w(\"MatrixWidth\", _e7), 10),\n      _l = parseInt(w(\"MatrixHeight\", _e7), 10);\n    c = n.x, f = n.y, u = c + _i4 * r[0] * o.resolution, p = f - _l * r[1] * o.resolution;\n  }\n  return O(e, n.spatialReference, n) ? new i(p, c, f, u, n.spatialReference) : new i(c, p, u, f, n.spatialReference);\n}\nfunction O(e, t, n) {\n  return \"1.0.0\" === e && l(t.wkid) && !(n.spatialReference.isGeographic && n.x < -90 && n.y >= -90);\n}\nvar D;\nfunction U(e) {\n  return e.includes(\"crs84\") || e.includes(\"crs:84\") ? D.CRS84 : e.includes(\"crs83\") || e.includes(\"crs:83\") ? D.CRS83 : e.includes(\"crs27\") || e.includes(\"crs:27\") ? D.CRS27 : null;\n}\nfunction k(e, t, n, i, r) {\n  var _r$get;\n  var o = N(t),\n    l = w(\"Identifier\", e);\n  var s = parseFloat(w(\"ScaleDenominator\", e));\n  var c = j(o.wkid, s, i);\n  s *= 96 / u;\n  var p = +w(\"MatrixWidth\", e),\n    f = +w(\"MatrixHeight\", e),\n    _ref4 = (_r$get = r.get(l)) !== null && _r$get !== void 0 ? _r$get : {},\n    _ref4$maxCol = _ref4.maxCol,\n    d = _ref4$maxCol === void 0 ? p - 1 : _ref4$maxCol,\n    _ref4$maxRow = _ref4.maxRow,\n    m = _ref4$maxRow === void 0 ? f - 1 : _ref4$maxRow,\n    _ref4$minCol = _ref4.minCol,\n    g = _ref4$minCol === void 0 ? 0 : _ref4$minCol,\n    _ref4$minRow = _ref4.minRow,\n    x = _ref4$minRow === void 0 ? 0 : _ref4$minRow,\n    _v = v(e, t),\n    h = _v.x,\n    C = _v.y;\n  return new a({\n    cols: [g, d],\n    level: n,\n    levelValue: l,\n    origin: [h, C],\n    scale: s,\n    resolution: c,\n    rows: [x, m]\n  });\n}\nfunction j(e, t, i) {\n  var r;\n  return r = o.hasOwnProperty(\"\" + e) ? o.values[o[e]] : \"default028mm\" === i ? 6370997 * Math.PI / 180 : n(e).metersPerDegree, 7 * t / 25e3 / r;\n}\n!function (e) {\n  e[e.CRS84 = 4326] = \"CRS84\", e[e.CRS83 = 4269] = \"CRS83\", e[e.CRS27 = 4267] = \"CRS27\";\n}(D || (D = {}));\nexport { y as getTileUrlFromResourceUrls, S as getTileUrlTemplateFromResourceUrls, R as getTileUrlTemplates, f as parseCapabilities, d as parseResourceInfo, p as validateCapabilities };","map":{"version":3,"names":["e","isSome","t","getReferenceEllipsoidFromWKID","n","i","r","o","isAxesOrderReversedForWkid","l","visitXML","s","a","c","u","p","replace","g","DOMParser","parseFromString","documentElement","text","f","_g","_n$url","Map","querySelector","getElementsByTagName","Array","prototype","slice","call","url","indexOf","d","m","serviceMode","h","length","some","C","attributes","nodeValue","getAttribute","T","substring","y","w","R","S","test","V","x","b","E","map","set","M","copyright","dimensionMap","layerMap","layers","tileUrl","forEach","_e$tileMatrixSets","tileMatrixSets","_t$lods","tileInfo","dpi","lods","_t$spatialReference","scale","resolution","j","spatialReference","wkid","id","nodeType","Node","ELEMENT_NODE","childNodes","nodeName","push","textContent","filter","split","includes","fullExtent","fullExtents","description","formats","styles","title","L","_e$layerMap","get","dimensions","dimensions2","toLowerCase","template","format","resourceType","_c$get$dimensions","_c$get$dimensions2","_ref","xmin","parseFloat","ymin","xmax","ymax","BoundingBox","N","LowerCorner","_e$textContent$split$","_e$textContent$split$2","_ref2","Number","_slicedToArray","UpperCorner","_e$textContent$split$3","_e$textContent$split$4","_ref3","abstract","isDefault","keywords","legendUrl","I","find","_iterator","_createForOfIteratorHelper","_step","done","value","minCol","maxCol","minRow","maxRow","err","A","parseInt","k","F","toJSON","size","origin","pop","U","v","_w$split$map","_w$split$map2","O","isGeographic","D","CRS84","CRS83","CRS27","_r$get","_ref4","_ref4$maxCol","_ref4$maxRow","_ref4$minCol","_ref4$minRow","_v","cols","level","levelValue","rows","hasOwnProperty","values","Math","PI","metersPerDegree","getTileUrlFromResourceUrls","getTileUrlTemplateFromResourceUrls","getTileUrlTemplates","parseCapabilities","parseResourceInfo","validateCapabilities"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/support/wmtsUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{getReferenceEllipsoidFromWKID as n}from\"../../geometry/ellipsoidUtils.js\";import i from\"../../geometry/Extent.js\";import r from\"../../geometry/Point.js\";import o from\"../../geometry/support/WKIDUnitConversion.js\";import{isAxesOrderReversedForWkid as l}from\"../ogc/crsUtils.js\";import{visitXML as s}from\"../ogc/xmlUtils.js\";import a from\"./LOD.js\";import c from\"./TileInfo.js\";const u=90.71428571428571;function p(t){const n=t.replace(/ows:/gi,\"\");if(!g(\"Contents\",(new DOMParser).parseFromString(n,\"text/xml\").documentElement))throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\",\"the wmts get capabilities response is not compliant\",{text:t})}function f(t,n){t=t.replace(/ows:/gi,\"\");const i=(new DOMParser).parseFromString(t,\"text/xml\").documentElement,r=new Map,o=new Map,l=g(\"Contents\",i);if(!l)throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");const s=g(\"OperationsMetadata\",i)?.querySelector(\"[name='GetTile']\"),a=s?.getElementsByTagName(\"Get\"),c=a&&Array.prototype.slice.call(a),u=n.url?.indexOf(\"https\"),p=void 0!==u&&u>-1;let f,d,m=n.serviceMode,h=n?.url;if(c&&c.length&&c.some((e=>{const t=g(\"Constraint\",e);return!t||C(\"AllowedValues\",\"Value\",m,t)?(h=e.attributes[0].nodeValue,!0):(!t||C(\"AllowedValues\",\"Value\",\"RESTful\",t)||C(\"AllowedValues\",\"Value\",\"REST\",t)?d=e.attributes[0].nodeValue:t&&!C(\"AllowedValues\",\"Value\",\"KVP\",t)||(f=e.attributes[0].nodeValue),!1)})),!h)if(d)h=d,m=\"RESTful\";else if(f)h=f,m=\"KVP\";else{const e=g(\"ServiceMetadataURL\",i);h=e?.getAttribute(\"xlink:href\")}const T=h.indexOf(\"1.0.0/\");-1===T&&\"RESTful\"===m?h+=\"/\":T>-1&&(h=h.substring(0,T)),\"KVP\"===m&&(h+=T>-1?\"\":\"?\"),p&&(h=h.replace(/^http:/i,\"https:\"));const y=w(\"ServiceIdentification>ServiceTypeVersion\",i),R=w(\"ServiceIdentification>AccessConstraints\",i),S=R&&/^none$/i.test(R)?null:R,V=x(\"Layer\",l),b=x(\"TileMatrixSet\",l),E=V.map((e=>{const t=w(\"Identifier\",e);return r.set(t,e),M(t,e,b,p,y)}));return{copyright:S,dimensionMap:o,layerMap:r,layers:E,serviceMode:m,tileUrl:h}}function d(e){return e.layers.forEach((e=>{e.tileMatrixSets?.forEach((e=>{const t=e.tileInfo;t&&96!==t.dpi&&(t.lods?.forEach((n=>{n.scale=96*n.scale/t.dpi,n.resolution=j(t.spatialReference?.wkid,n.scale*u/96,e.id)})),t.dpi=96)}))})),e}function m(e){return e.nodeType===Node.ELEMENT_NODE}function g(e,t){for(let n=0;n<t.childNodes.length;n++){const i=t.childNodes[n];if(m(i)&&i.nodeName===e)return i}return null}function x(e,t){const n=[];for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i];m(r)&&r.nodeName===e&&n.push(r)}return n}function h(e,n){const i=[];for(let t=0;t<n.childNodes.length;t++){const r=n.childNodes[t];m(r)&&r.nodeName===e&&i.push(r)}return i.map((e=>e.textContent)).filter(t)}function w(e,t){return e.split(\">\").forEach((e=>{t&&(t=g(e,t))})),t&&t.textContent}function C(e,t,n,i){let r;return Array.prototype.slice.call(i.childNodes).some((i=>{if(i.nodeName.includes(e)){const e=g(t,i),o=e&&e.textContent;if(o===n||n.split(\":\")&&n.split(\":\")[1]===o)return r=i,!0}return!1})),r}function M(e,t,n,i,r){const o=w(\"Abstract\",t),l=h(\"Format\",t);return{id:e,fullExtent:V(t),fullExtents:b(t),description:o,formats:l,styles:E(t,i),title:w(\"Title\",t),tileMatrixSets:L(r,t,n)}}function T(e,t){const n=[],i=e.layerMap?.get(t);if(!i)return null;const r=x(\"ResourceURL\",i),o=x(\"Dimension\",i);let l,s,a,c;return o.length&&(l=w(\"Identifier\",o[0]),s=h(\"Default\",o[0])||h(\"Value\",o[0])),o.length>1&&(a=w(\"Identifier\",o[1]),c=h(\"Default\",o[1])||h(\"Value\",o[1])),e.dimensionMap.set(t,{dimensions:s,dimensions2:c}),r.forEach((e=>{let t=e.getAttribute(\"template\");if(\"tile\"===e.getAttribute(\"resourceType\")){if(l&&s.length)if(t.includes(\"{\"+l+\"}\"))t=t.replace(\"{\"+l+\"}\",\"{dimensionValue}\");else{const e=t.toLowerCase().indexOf(\"{\"+l.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue}\"+t.substring(e+l.length+2))}if(a&&c.length)if(t.includes(\"{\"+a+\"}\"))t=t.replace(\"{\"+a+\"}\",\"{dimensionValue2}\");else{const e=t.toLowerCase().indexOf(\"{\"+a.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue2}\"+t.substring(e+a.length+2))}n.push({template:t,format:e.getAttribute(\"format\"),resourceType:\"tile\"})}})),n}function y(e,t,n,i,r,o,l,s){const a=R(e,t,i);if(!(a?.length>0))return\"\";const{dimensionMap:c}=e,u=c.get(t).dimensions?.[0],p=c.get(t).dimensions2?.[0];return a[l%a.length].template.replace(/\\{Style\\}/gi,r??\"\").replace(/\\{TileMatrixSet\\}/gi,n??\"\").replace(/\\{TileMatrix\\}/gi,o).replace(/\\{TileRow\\}/gi,\"\"+l).replace(/\\{TileCol\\}/gi,\"\"+s).replace(/\\{dimensionValue\\}/gi,u).replace(/\\{dimensionValue2\\}/gi,p)}function R(e,t,n){const i=T(e,t),r=i?.filter((e=>e.format===n));return(r?.length?r:i)??[]}function S(e,t,n,i){const{dimensionMap:r}=e,o=T(e,t);let l=\"\";if(o&&o.length>0){const e=r.get(t).dimensions&&r.get(t).dimensions[0],s=r.get(t).dimensions2&&r.get(t).dimensions2[0];l=o[0].template,l.indexOf(\".xxx\")===l.length-4&&(l=l.slice(0,l.length-4)),l=l.replace(/\\{Style\\}/gi,i),l=l.replace(/\\{TileMatrixSet\\}/gi,n),l=l.replace(/\\{TileMatrix\\}/gi,\"{level}\"),l=l.replace(/\\{TileRow\\}/gi,\"{row}\"),l=l.replace(/\\{TileCol\\}/gi,\"{col}\"),l=l.replace(/\\{dimensionValue\\}/gi,e),l=l.replace(/\\{dimensionValue2\\}/gi,s)}return l}function V(e){const t=g(\"WGS84BoundingBox\",e),n=t?w(\"LowerCorner\",t).split(\" \"):[\"-180\",\"-90\"],i=t?w(\"UpperCorner\",t).split(\" \"):[\"180\",\"90\"];return{xmin:parseFloat(n[0]),ymin:parseFloat(n[1]),xmax:parseFloat(i[0]),ymax:parseFloat(i[1]),spatialReference:{wkid:4326}}}function b(e){const t=[];return s(e,{BoundingBox:e=>{if(!e.getAttribute(\"crs\"))return;const n=e.getAttribute(\"crs\").toLowerCase(),i=N(n),r=n.includes(\"epsg\")&&l(i.wkid);let o,a,c,u;s(e,{LowerCorner:e=>{[o,a]=e.textContent.split(\" \").map((e=>Number.parseFloat(e))),r&&([o,a]=[a,o])},UpperCorner:e=>{[c,u]=e.textContent.split(\" \").map((e=>Number.parseFloat(e))),r&&([c,u]=[u,c])}}),t.push({xmin:o,ymin:a,xmax:c,ymax:u,spatialReference:i})}}),t}function E(e,t){return x(\"Style\",e).map((e=>{const n=g(\"LegendURL\",e),i=g(\"Keywords\",e),r=i?h(\"Keyword\",i):[];let o=n&&n.getAttribute(\"xlink:href\");t&&(o=o&&o.replace(/^http:/i,\"https:\"));return{abstract:w(\"Abstract\",e),id:w(\"Identifier\",e),isDefault:\"true\"===e.getAttribute(\"isDefault\"),keywords:r,legendUrl:o,title:w(\"Title\",e)}}))}function L(e,t,n){return x(\"TileMatrixSetLink\",t).map((t=>I(e,t,n)))}function I(e,t,n){const i=g(\"TileMatrixSet\",t).textContent,r=h(\"TileMatrix\",t),o=n.find((e=>{const t=g(\"Identifier\",e),n=t&&t.textContent;return!!(n===i||i.split(\":\")&&i.split(\":\")[1]===n)})),l=g(\"TileMatrixSetLimits\",t),s=l&&x(\"TileMatrixLimits\",l),a=new Map;if(s?.length)for(const c of s){const e=g(\"TileMatrix\",c).textContent,t=+g(\"MinTileRow\",c).textContent,n=+g(\"MaxTileRow\",c).textContent,i=+g(\"MinTileCol\",c).textContent,r=+g(\"MaxTileCol\",c).textContent;a.set(e,{minCol:i,maxCol:r,minRow:t,maxRow:n})}const u=w(\"SupportedCRS\",o).toLowerCase(),p=A(o,u),f=p.spatialReference,d=g(\"TileMatrix\",o),m=[parseInt(w(\"TileWidth\",d),10),parseInt(w(\"TileHeight\",d),10)],M=[];if(r.length)r.forEach(((e,t)=>{const n=C(\"TileMatrix\",\"Identifier\",e,o);M.push(k(n,u,t,i,a))}));else{x(\"TileMatrix\",o).forEach(((e,t)=>{M.push(k(e,u,t,i,a))}))}const T=F(e,o,p,m,M[0]).toJSON(),y=new c({dpi:96,spatialReference:f,size:m,origin:p,lods:M}).toJSON();return{id:i,fullExtent:T,tileInfo:y}}function N(e){e=e.toLowerCase();let n=parseInt(e.split(\":\").pop(),10);900913!==n&&3857!==n||(n=102100);const i=U(e);return t(i)&&(n=i),{wkid:n}}function A(e,t){return v(g(\"TileMatrix\",e),t)}function v(e,t){const n=N(t),[i,o]=w(\"TopLeftCorner\",e).split(\" \").map((e=>parseFloat(e))),s=t.includes(\"epsg\")&&l(n.wkid);return new r(s?{x:o,y:i,spatialReference:n}:{x:i,y:o,spatialReference:n})}function F(e,t,n,r,o){const l=g(\"BoundingBox\",t);let s,a,c,u,p,f;if(l&&(s=w(\"LowerCorner\",l).split(\" \"),a=w(\"UpperCorner\",l).split(\" \")),s&&s.length>1&&a&&a.length>1)c=parseFloat(s[0]),p=parseFloat(s[1]),u=parseFloat(a[0]),f=parseFloat(a[1]);else{const e=g(\"TileMatrix\",t),i=parseInt(w(\"MatrixWidth\",e),10),l=parseInt(w(\"MatrixHeight\",e),10);c=n.x,f=n.y,u=c+i*r[0]*o.resolution,p=f-l*r[1]*o.resolution}return O(e,n.spatialReference,n)?new i(p,c,f,u,n.spatialReference):new i(c,p,u,f,n.spatialReference)}function O(e,t,n){return\"1.0.0\"===e&&l(t.wkid)&&!(n.spatialReference.isGeographic&&n.x<-90&&n.y>=-90)}var D;function U(e){return e.includes(\"crs84\")||e.includes(\"crs:84\")?D.CRS84:e.includes(\"crs83\")||e.includes(\"crs:83\")?D.CRS83:e.includes(\"crs27\")||e.includes(\"crs:27\")?D.CRS27:null}function k(e,t,n,i,r){const o=N(t),l=w(\"Identifier\",e);let s=parseFloat(w(\"ScaleDenominator\",e));const c=j(o.wkid,s,i);s*=96/u;const p=+w(\"MatrixWidth\",e),f=+w(\"MatrixHeight\",e),{maxCol:d=p-1,maxRow:m=f-1,minCol:g=0,minRow:x=0}=r.get(l)??{},{x:h,y:C}=v(e,t);return new a({cols:[g,d],level:n,levelValue:l,origin:[h,C],scale:s,resolution:c,rows:[x,m]})}function j(e,t,i){let r;return r=o.hasOwnProperty(\"\"+e)?o.values[o[e]]:\"default028mm\"===i?6370997*Math.PI/180:n(e).metersPerDegree,7*t/25e3/r}!function(e){e[e.CRS84=4326]=\"CRS84\",e[e.CRS83=4269]=\"CRS83\",e[e.CRS27=4267]=\"CRS27\"}(D||(D={}));export{y as getTileUrlFromResourceUrls,S as getTileUrlTemplateFromResourceUrls,R as getTileUrlTemplates,f as parseCapabilities,d as parseResourceInfo,p as validateCapabilities};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}