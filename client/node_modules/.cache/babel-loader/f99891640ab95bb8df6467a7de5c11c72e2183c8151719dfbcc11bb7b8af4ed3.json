{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _slicedToArray from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../../../core/has.js\";\nimport t from \"../../../../../core/Logger.js\";\nimport { isSome as e, unwrapOrThrow as s, isNone as r } from \"../../../../../core/maybe.js\";\nimport { throwIfAborted as o, after as a } from \"../../../../../core/promiseUtils.js\";\nimport n from \"../../../../../core/RandomLCG.js\";\nimport { BaseFeatureSource as i } from \"./BaseFeatureSource.js\";\nimport { FeatureSetReaderIndirect as d } from \"../support/FeatureSetReaderPBFIndirect.js\";\nimport { UpdateToken as u } from \"../support/UpdateToken.js\";\nfunction h(t, e, s) {\n  var r = t.getXHydrated(),\n    o = t.getYHydrated(),\n    a = e.getColumnForX(r),\n    n = Math.floor(e.normalizeCol(a));\n  return \"\".concat(s, \"/\").concat(Math.floor(e.getRowForY(o)), \"/\").concat(n);\n}\nfunction l(t, e) {\n  if (r(t)) return null;\n  var s = e.transform,\n    o = t.getQuantizationTransform();\n  if (r(o)) {\n    var _s$scale = _slicedToArray(s.scale, 2),\n      _e = _s$scale[0],\n      _r = _s$scale[1],\n      _s$translate = _slicedToArray(s.translate, 2),\n      _o = _s$translate[0],\n      _a = _s$translate[1],\n      _n = -_o / _e,\n      _i = 1 / _e,\n      _d = _a / _r,\n      _u = 1 / -_r;\n    return t.transform(_n, _d, _i, _u);\n  }\n  var _o$scale = _slicedToArray(o.scale, 2),\n    a = _o$scale[0],\n    n = _o$scale[1],\n    _o$translate = _slicedToArray(o.translate, 2),\n    i = _o$translate[0],\n    d = _o$translate[1],\n    _s$scale2 = _slicedToArray(s.scale, 2),\n    u = _s$scale2[0],\n    h = _s$scale2[1],\n    _s$translate2 = _slicedToArray(s.translate, 2),\n    l = _s$translate2[0],\n    c = _s$translate2[1],\n    g = a / u,\n    _ = (i - l) / u,\n    p = n / h,\n    f = (-d + c) / h;\n  return t.transform(_, f, g, p);\n}\nvar c = /*#__PURE__*/function (_i2) {\n  _inherits(c, _i2);\n  var _super = _createSuper(c);\n  function c(t) {\n    var _this;\n    _classCallCheck(this, c);\n    _this = _super.call(this, t), _this.mode = \"snapshot\", _this._loading = !0, _this._controller = new AbortController(), _this._downloadPromise = null, _this._didSendEnd = !1, _this._queries = new Array(), _this._invalidated = !1, _this._hasAggregates = !1, _this._random = new n(1e3), _this._store = t.store, _this._markedIdsBufId = _this._store.storage.createBitset();\n    return _this;\n  }\n  _createClass(c, [{\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(c.prototype), \"destroy\", this).call(this), this._controller.abort();\n    }\n  }, {\n    key: \"loading\",\n    get: function get() {\n      return this._loading;\n    }\n  }, {\n    key: \"_signal\",\n    get: function get() {\n      return this._controller.signal;\n    }\n  }, {\n    key: \"update\",\n    value: function update(t, s) {\n      var _t$targets;\n      _get(_getPrototypeOf(c.prototype), \"update\", this).call(this, t, s), null == this._featureCount && (this._featureCount = s.initialFeatureCount), e(s.changedFeatureCount) && (this._featureCount = s.changedFeatureCount), this._hasAggregates = !!((_t$targets = t.targets) !== null && _t$targets !== void 0 && _t$targets.aggregate);\n    }\n  }, {\n    key: \"resend\",\n    value: function () {\n      var _resend = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this2 = this;\n        var t,\n          _t,\n          e,\n          _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              t = _args.length > 0 && _args[0] !== undefined ? _args[0] : !1;\n              _context.next = 3;\n              return this._downloadPromise;\n            case 3:\n              if (!(this._invalidated || t)) {\n                _context.next = 11;\n                break;\n              }\n              _t = s(this._featureCount, \"Expected featureCount to be defined\");\n              this._invalidated = !1;\n              this._subscriptions.forEach(function (t) {\n                return t.clear();\n              });\n              this._downloadPromise = this._download(_t);\n              _context.next = 10;\n              return this._downloadPromise;\n            case 10:\n              return _context.abrupt(\"return\", void _context.sent);\n            case 11:\n              e = this._queries.map(function (_ref) {\n                var t = _ref.query,\n                  e = _ref.reader;\n                return _this2._sendPatchQuery(t, e);\n              });\n              _context.next = 14;\n              return Promise.all(e);\n            case 14:\n              this._subscriptions.forEach(function (t) {\n                t.requests.done.forEach(function (t) {\n                  return _this2._onMessage(t.message);\n                });\n              });\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function resend() {\n        return _resend.apply(this, arguments);\n      }\n      return resend;\n    }()\n  }, {\n    key: \"refresh\",\n    value: function () {\n      var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(t, e) {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              e && (this._featureCount = e.featureCount);\n              _context2.next = 3;\n              return this.resend(!0);\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function refresh(_x, _x2) {\n        return _refresh.apply(this, arguments);\n      }\n      return refresh;\n    }()\n  }, {\n    key: \"_sendPatchQuery\",\n    value: function () {\n      var _sendPatchQuery2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(t, s) {\n        var r, a, n, i, d, u;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              r = e(t.outFields) ? t.outFields : [], a = this._queryInfo.outFields, n = a.filter(function (t) {\n                return !r.includes(t);\n              });\n              if (n.length) {\n                _context3.next = 3;\n                break;\n              }\n              return _context3.abrupt(\"return\");\n            case 3:\n              i = t.clone(), d = this._signal;\n              i.returnGeometry = !1, i.returnCentroid = !1, i.outFields = n, t.outFields = a;\n              _context3.next = 7;\n              return this._queue.push({\n                query: i,\n                depth: 0,\n                signal: d\n              });\n            case 7:\n              u = _context3.sent;\n              o({\n                signal: d\n              }), s.joinAttributes(u);\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function _sendPatchQuery(_x3, _x4) {\n        return _sendPatchQuery2.apply(this, arguments);\n      }\n      return _sendPatchQuery;\n    }()\n  }, {\n    key: \"_fetchDataTile\",\n    value: function () {\n      var _fetchDataTile2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(t) {\n        var _t2, e, r, o, _s, _o2, _n2, n, i, d;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!this._downloadPromise) {\n                _t2 = s(this._featureCount, \"Expected featureCount to be defined\");\n                this._downloadPromise = this._download(_t2);\n              }\n              e = this._store.search(t), r = this._subscriptions.get(t.key.id), o = e.length - 1;\n              _s = 0;\n            case 3:\n              if (!(_s < o)) {\n                _context4.next = 14;\n                break;\n              }\n              _o2 = l(e[_s], t), _n2 = {\n                type: \"append\",\n                id: t.id,\n                addOrUpdate: _o2,\n                end: !1,\n                status: u.empty()\n              };\n              r.add({\n                query: null,\n                message: _n2\n              });\n              _context4.t0 = this._hasAggregates;\n              if (_context4.t0) {\n                _context4.next = 10;\n                break;\n              }\n              _context4.next = 10;\n              return a(1);\n            case 10:\n              this._onMessage(_n2);\n            case 11:\n              _s++;\n              _context4.next = 3;\n              break;\n            case 14:\n              n = l(o >= 0 ? e[o] : null, t), i = this._didSendEnd, d = {\n                type: \"append\",\n                id: t.id,\n                addOrUpdate: n,\n                end: i,\n                status: u.empty()\n              };\n              r.add({\n                query: null,\n                message: d\n              }), this._onMessage(d);\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function _fetchDataTile(_x5) {\n        return _fetchDataTile2.apply(this, arguments);\n      }\n      return _fetchDataTile;\n    }()\n  }, {\n    key: \"_download\",\n    value: function () {\n      var _download2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(e) {\n        var _this3 = this;\n        var _t3, _s2, _r2, _o3;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _context5.next = 3;\n              return this.whenInitialized();\n            case 3:\n              _t3 = this._store.storage.getBitset(this._markedIdsBufId), _s2 = new Set();\n              _t3.clear();\n              _r2 = Math.ceil(e / this.pageSize), _o3 = Array.from({\n                length: _r2\n              }, function (t, e) {\n                return e;\n              }).sort(function (t, e) {\n                return _this3._random.getInt() - _this3._random.getInt();\n              }).map(function (e) {\n                return _this3._downloadPage(e, _t3, _s2);\n              });\n              _context5.next = 8;\n              return Promise.all(_o3);\n            case 8:\n              this._store.sweepFeatures(_t3, this._store.storage);\n              this._store.sweepFeatureSets(_s2);\n              _context5.next = 15;\n              break;\n            case 12:\n              _context5.prev = 12;\n              _context5.t0 = _context5[\"catch\"](0);\n              t.getLogger(\"esri.views.2d.layers.features.sources.SnapshotFeatureSource\").error(\"mapview-snapshot-source\", \"Encountered and error when downloading feature snapshot\", _context5.t0);\n            case 15:\n              this._sendEnd(), this._loading = !1;\n            case 16:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this, [[0, 12]]);\n      }));\n      function _download(_x6) {\n        return _download2.apply(this, arguments);\n      }\n      return _download;\n    }()\n  }, {\n    key: \"_downloadPage\",\n    value: function () {\n      var _downloadPage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(t, s, r) {\n        var a, n, i, d, u, h;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              a = this.pageSize, n = {\n                start: t * a,\n                num: a,\n                cacheHint: !0\n              };\n              e(this.maxRecordCountFactor) && (n.maxRecordCountFactor = this.maxRecordCountFactor);\n              i = this.createQuery(n);\n              d = this._signal;\n              _context6.next = 6;\n              return this._queue.push({\n                query: i,\n                depth: t,\n                signal: d\n              });\n            case 6:\n              u = _context6.sent;\n              o({\n                signal: d\n              }), this._queries.push({\n                query: i,\n                reader: u\n              }), this._store.insert(u), r.add(u.instance);\n              h = u.getCursor();\n              for (; h.next();) s.set(h.getDisplayId());\n              this._send(u);\n            case 11:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function _downloadPage(_x7, _x8, _x9) {\n        return _downloadPage2.apply(this, arguments);\n      }\n      return _downloadPage;\n    }()\n  }, {\n    key: \"_send\",\n    value: function _send(t) {\n      var _this4 = this;\n      if (!this._subscriptions.size) return;\n      var s = null;\n      var o = new Map(),\n        a = new Set(),\n        n = new Map();\n      this._subscriptions.forEach(function (t) {\n        var _n$get;\n        var e = t.tile;\n        o.set(e.key.id, null), s = e.tileInfoView, a.add(e.level);\n        var _e$key = e.key,\n          r = _e$key.row,\n          i = _e$key.col,\n          d = \"\".concat(e.level, \"/\").concat(r, \"/\").concat(i),\n          u = (_n$get = n.get(d)) !== null && _n$get !== void 0 ? _n$get : [];\n        u.push(t), n.set(d, u);\n      });\n      var _iterator = _createForOfIteratorHelper(a),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _e3 = _step.value;\n          var _a2 = s.getLODInfoAt(_e3),\n            _i3 = t.getCursor();\n          for (; _i3.next();) {\n            var _t4 = h(_i3, _a2, _e3),\n              _s3 = _i3.getIndex();\n            if (n.has(_t4)) {\n              var _iterator2 = _createForOfIteratorHelper(n.get(_t4)),\n                _step2;\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  var _e4 = _step2.value;\n                  var _t5 = _e4.tile.id;\n                  var _a3 = o.get(_t5);\n                  r(_a3) && (_a3 = [], o.set(_t5, _a3)), _a3.push(_s3);\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      o.forEach(function (s, r) {\n        if (e(s)) {\n          var _e2 = _this4._subscriptions.get(r),\n            _o4 = {\n              type: \"append\",\n              id: r,\n              addOrUpdate: l(d.from(t, s), _e2.tile),\n              end: !1,\n              status: u.empty()\n            };\n          _e2.add({\n            query: null,\n            message: _o4\n          }), _this4._onMessage(_o4);\n        }\n      });\n    }\n  }, {\n    key: \"_sendEnd\",\n    value: function _sendEnd() {\n      var _this5 = this;\n      this._subscriptions.forEach(function (t) {\n        var e = {\n          type: \"append\",\n          id: t.tile.id,\n          addOrUpdate: null,\n          end: !0,\n          status: u.empty()\n        };\n        t.add({\n          query: null,\n          message: e\n        }), _this5._onMessage(e);\n      }), this._didSendEnd = !0;\n    }\n  }]);\n  return c;\n}(i);\nexport { c as SnapshotFeatureSource };","map":{"version":3,"names":["t","isSome","e","unwrapOrThrow","s","isNone","r","throwIfAborted","o","after","a","n","BaseFeatureSource","i","FeatureSetReaderIndirect","d","UpdateToken","u","h","getXHydrated","getYHydrated","getColumnForX","Math","floor","normalizeCol","concat","getRowForY","l","transform","getQuantizationTransform","_s$scale","_slicedToArray","scale","_s$translate","translate","_o$scale","_o$translate","_s$scale2","_s$translate2","c","g","_","p","f","_i2","_inherits","_super","_createSuper","_this","_classCallCheck","call","mode","_loading","_controller","AbortController","_downloadPromise","_didSendEnd","_queries","Array","_invalidated","_hasAggregates","_random","_store","store","_markedIdsBufId","storage","createBitset","_createClass","key","value","destroy","_get","_getPrototypeOf","prototype","abort","get","signal","update","_t$targets","_featureCount","initialFeatureCount","changedFeatureCount","targets","aggregate","_resend","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this2","_t","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","_subscriptions","forEach","clear","_download","abrupt","sent","map","_ref","query","reader","_sendPatchQuery","Promise","all","requests","done","_onMessage","message","stop","resend","apply","_refresh","_callee2","_callee2$","_context2","featureCount","refresh","_x","_x2","_sendPatchQuery2","_callee3","_callee3$","_context3","outFields","_queryInfo","filter","includes","clone","_signal","returnGeometry","returnCentroid","_queue","push","depth","joinAttributes","_x3","_x4","_fetchDataTile2","_callee4","_t2","_s","_o2","_n2","_callee4$","_context4","search","id","type","addOrUpdate","end","status","empty","add","t0","_fetchDataTile","_x5","_download2","_callee5","_this3","_t3","_s2","_r2","_o3","_callee5$","_context5","whenInitialized","getBitset","Set","ceil","pageSize","from","sort","getInt","_downloadPage","sweepFeatures","sweepFeatureSets","getLogger","error","_sendEnd","_x6","_downloadPage2","_callee6","_callee6$","_context6","start","num","cacheHint","maxRecordCountFactor","createQuery","insert","instance","getCursor","set","getDisplayId","_send","_x7","_x8","_x9","_this4","size","Map","_n$get","tile","tileInfoView","level","_e$key","row","col","_iterator","_createForOfIteratorHelper","_step","getLODInfoAt","getIndex","has","_iterator2","_step2","err","_this5","SnapshotFeatureSource"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/views/2d/layers/features/sources/SnapshotFeatureSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import t from\"../../../../../core/Logger.js\";import{isSome as e,unwrapOrThrow as s,isNone as r}from\"../../../../../core/maybe.js\";import{throwIfAborted as o,after as a}from\"../../../../../core/promiseUtils.js\";import n from\"../../../../../core/RandomLCG.js\";import{BaseFeatureSource as i}from\"./BaseFeatureSource.js\";import{FeatureSetReaderIndirect as d}from\"../support/FeatureSetReaderPBFIndirect.js\";import{UpdateToken as u}from\"../support/UpdateToken.js\";function h(t,e,s){const r=t.getXHydrated(),o=t.getYHydrated(),a=e.getColumnForX(r),n=Math.floor(e.normalizeCol(a));return`${s}/${Math.floor(e.getRowForY(o))}/${n}`}function l(t,e){if(r(t))return null;const s=e.transform,o=t.getQuantizationTransform();if(r(o)){const[e,r]=s.scale,[o,a]=s.translate,n=-o/e,i=1/e,d=a/r,u=1/-r;return t.transform(n,d,i,u)}const[a,n]=o.scale,[i,d]=o.translate,[u,h]=s.scale,[l,c]=s.translate,g=a/u,_=(i-l)/u,p=n/h,f=(-d+c)/h;return t.transform(_,f,g,p)}class c extends i{constructor(t){super(t),this.mode=\"snapshot\",this._loading=!0,this._controller=new AbortController,this._downloadPromise=null,this._didSendEnd=!1,this._queries=new Array,this._invalidated=!1,this._hasAggregates=!1,this._random=new n(1e3),this._store=t.store,this._markedIdsBufId=this._store.storage.createBitset()}destroy(){super.destroy(),this._controller.abort()}get loading(){return this._loading}get _signal(){return this._controller.signal}update(t,s){super.update(t,s),null==this._featureCount&&(this._featureCount=s.initialFeatureCount),e(s.changedFeatureCount)&&(this._featureCount=s.changedFeatureCount),this._hasAggregates=!!t.targets?.aggregate}async resend(t=!1){if(await this._downloadPromise,this._invalidated||t){const t=s(this._featureCount,\"Expected featureCount to be defined\");return this._invalidated=!1,this._subscriptions.forEach((t=>t.clear())),this._downloadPromise=this._download(t),void await this._downloadPromise}const e=this._queries.map((({query:t,reader:e})=>this._sendPatchQuery(t,e)));await Promise.all(e),this._subscriptions.forEach((t=>{t.requests.done.forEach((t=>this._onMessage(t.message)))}))}async refresh(t,e){e&&(this._featureCount=e.featureCount),await this.resend(!0)}async _sendPatchQuery(t,s){const r=e(t.outFields)?t.outFields:[],a=this._queryInfo.outFields,n=a.filter((t=>!r.includes(t)));if(!n.length)return;const i=t.clone(),d=this._signal;i.returnGeometry=!1,i.returnCentroid=!1,i.outFields=n,t.outFields=a;const u=await this._queue.push({query:i,depth:0,signal:d});o({signal:d}),s.joinAttributes(u)}async _fetchDataTile(t){if(!this._downloadPromise){const t=s(this._featureCount,\"Expected featureCount to be defined\");this._downloadPromise=this._download(t)}const e=this._store.search(t),r=this._subscriptions.get(t.key.id),o=e.length-1;for(let s=0;s<o;s++){const o=l(e[s],t),n={type:\"append\",id:t.id,addOrUpdate:o,end:!1,status:u.empty()};r.add({query:null,message:n}),this._hasAggregates||await a(1),this._onMessage(n)}const n=l(o>=0?e[o]:null,t),i=this._didSendEnd,d={type:\"append\",id:t.id,addOrUpdate:n,end:i,status:u.empty()};r.add({query:null,message:d}),this._onMessage(d)}async _download(e){try{await this.whenInitialized();const t=this._store.storage.getBitset(this._markedIdsBufId),s=new Set;t.clear();const r=Math.ceil(e/this.pageSize),o=Array.from({length:r},((t,e)=>e)).sort(((t,e)=>this._random.getInt()-this._random.getInt())).map((e=>this._downloadPage(e,t,s)));await Promise.all(o),this._store.sweepFeatures(t,this._store.storage),this._store.sweepFeatureSets(s)}catch(s){t.getLogger(\"esri.views.2d.layers.features.sources.SnapshotFeatureSource\").error(\"mapview-snapshot-source\",\"Encountered and error when downloading feature snapshot\",s)}this._sendEnd(),this._loading=!1}async _downloadPage(t,s,r){const a=this.pageSize,n={start:t*a,num:a,cacheHint:!0};e(this.maxRecordCountFactor)&&(n.maxRecordCountFactor=this.maxRecordCountFactor);const i=this.createQuery(n),d=this._signal,u=await this._queue.push({query:i,depth:t,signal:d});o({signal:d}),this._queries.push({query:i,reader:u}),this._store.insert(u),r.add(u.instance);const h=u.getCursor();for(;h.next();)s.set(h.getDisplayId());this._send(u)}_send(t){if(!this._subscriptions.size)return;let s=null;const o=new Map,a=new Set,n=new Map;this._subscriptions.forEach((t=>{const e=t.tile;o.set(e.key.id,null),s=e.tileInfoView,a.add(e.level);const{row:r,col:i}=e.key,d=`${e.level}/${r}/${i}`,u=n.get(d)??[];u.push(t),n.set(d,u)}));for(const e of a){const a=s.getLODInfoAt(e),i=t.getCursor();for(;i.next();){const t=h(i,a,e),s=i.getIndex();if(n.has(t))for(const e of n.get(t)){const t=e.tile.id;let a=o.get(t);r(a)&&(a=[],o.set(t,a)),a.push(s)}}}o.forEach(((s,r)=>{if(e(s)){const e=this._subscriptions.get(r),o={type:\"append\",id:r,addOrUpdate:l(d.from(t,s),e.tile),end:!1,status:u.empty()};e.add({query:null,message:o}),this._onMessage(o)}}))}_sendEnd(){this._subscriptions.forEach((t=>{const e={type:\"append\",id:t.tile.id,addOrUpdate:null,end:!0,status:u.empty()};t.add({query:null,message:e}),this._onMessage(e)})),this._didSendEnd=!0}}export{c as SnapshotFeatureSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}