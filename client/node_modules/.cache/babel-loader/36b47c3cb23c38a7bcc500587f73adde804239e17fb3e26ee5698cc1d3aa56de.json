{"ast":null,"code":"import _classCallCheck from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { isNone as e } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as s } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { convolutionKernel as r } from \"../rasterFunctionConstants.js\";\nimport { getPixelValueRange as n } from \"../rasterFormats/pixelRangeUtils.js\";\nimport i from \"./BaseRasterFunction.js\";\nimport u from \"./ConvolutionFunctionArguments.js\";\nimport { convolute as c } from \"./convolutionUtils.js\";\nvar p = 25;\nvar l = /*#__PURE__*/function (_i) {\n  _inherits(l, _i);\n  var _super = _createSuper(l);\n  function l() {\n    var _this;\n    _classCallCheck(this, l);\n    _this = _super.apply(this, arguments), _this.functionName = \"Convolution\", _this.rasterArgumentNames = [\"raster\"];\n    return _this;\n  }\n  _createClass(l, [{\n    key: \"_bindSourceRasters\",\n    value: function _bindSourceRasters() {\n      var _this$functionArgumen = this.functionArguments,\n        t = _this$functionArgumen.convolutionType,\n        e = _this$functionArgumen.rows,\n        o = _this$functionArgumen.cols,\n        s = _this$functionArgumen.kernel;\n      if (!Object.values(r).includes(t)) return {\n        success: !1,\n        supportsGPU: !1,\n        error: \"convolution-function: the specified kernel type is not supported \".concat(t)\n      };\n      if (t !== r.none && e * o !== s.length) return {\n        success: !1,\n        supportsGPU: !1,\n        error: \"convolution-function: the specified rows and cols do not match the length of the kernel\"\n      };\n      var n = this.sourceRasterInfos[0];\n      this.outputPixelType = this._getOutputPixelType(n.pixelType);\n      var i = n.clone();\n      i.pixelType = this.outputPixelType;\n      var u = [r.none, r.sharpen, r.sharpen2, r.sharpening3x3, r.sharpening5x5];\n      \"u8\" === this.outputPixelType || u.includes(t) || (i.statistics = null, i.histograms = null), i.colormap = null, i.attributeTable = null, this.rasterInfo = i;\n      return {\n        success: !0,\n        supportsGPU: s.length <= p\n      };\n    }\n  }, {\n    key: \"_processPixels\",\n    value: function _processPixels(t) {\n      var _t$pixelBlocks;\n      var o = (_t$pixelBlocks = t.pixelBlocks) === null || _t$pixelBlocks === void 0 ? void 0 : _t$pixelBlocks[0];\n      if (e(o) || this.functionArguments.convolutionType === r.none) return o;\n      var _this$functionArgumen2 = this.functionArguments,\n        s = _this$functionArgumen2.kernel,\n        n = _this$functionArgumen2.rows,\n        i = _this$functionArgumen2.cols;\n      var u = s.reduce(function (t, e) {\n        return t + e;\n      });\n      return 0 !== u && 1 !== u && (s = s.map(function (t) {\n        return t / u;\n      })), c(o, {\n        kernel: s,\n        rows: n,\n        cols: i,\n        outputPixelType: this.outputPixelType\n      });\n    }\n  }, {\n    key: \"_getWebGLParameters\",\n    value: function _getWebGLParameters() {\n      var t = this.functionArguments.kernel;\n      var e = t.reduce(function (t, e) {\n        return t + e;\n      });\n      0 !== e && 1 !== e && (t = t.map(function (t) {\n        return t / e;\n      }));\n      var o = new Float32Array(p);\n      return o.set(t), {\n        kernelRows: this.functionArguments.rows,\n        kernelCols: this.functionArguments.cols,\n        kernel: o,\n        clampRange: n(this.outputPixelType)\n      };\n    }\n  }]);\n  return l;\n}(i);\nt([o({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], l.prototype, \"functionName\", void 0), t([o({\n  type: u,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], l.prototype, \"functionArguments\", void 0), t([o()], l.prototype, \"rasterArgumentNames\", void 0), l = t([s(\"esri.layers.support.rasterFunctions.ConvolutionFunction\")], l);\nvar a = l;\nexport { a as default };","map":{"version":3,"names":["_","t","isNone","e","property","o","subclass","s","convolutionKernel","r","getPixelValueRange","n","i","u","convolute","c","p","l","_i","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","functionName","rasterArgumentNames","_createClass","key","value","_bindSourceRasters","_this$functionArgumen","functionArguments","convolutionType","rows","cols","kernel","Object","values","includes","success","supportsGPU","error","concat","none","length","sourceRasterInfos","outputPixelType","_getOutputPixelType","pixelType","clone","sharpen","sharpen2","sharpening3x3","sharpening5x5","statistics","histograms","colormap","attributeTable","rasterInfo","_processPixels","_t$pixelBlocks","pixelBlocks","_this$functionArgumen2","reduce","map","_getWebGLParameters","Float32Array","set","kernelRows","kernelCols","clampRange","json","write","name","prototype","type","a","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/support/rasterFunctions/ConvolutionFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{isNone as e}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{convolutionKernel as r}from\"../rasterFunctionConstants.js\";import{getPixelValueRange as n}from\"../rasterFormats/pixelRangeUtils.js\";import i from\"./BaseRasterFunction.js\";import u from\"./ConvolutionFunctionArguments.js\";import{convolute as c}from\"./convolutionUtils.js\";const p=25;let l=class extends i{constructor(){super(...arguments),this.functionName=\"Convolution\",this.rasterArgumentNames=[\"raster\"]}_bindSourceRasters(){const{convolutionType:t,rows:e,cols:o,kernel:s}=this.functionArguments;if(!Object.values(r).includes(t))return{success:!1,supportsGPU:!1,error:`convolution-function: the specified kernel type is not supported ${t}`};if(t!==r.none&&e*o!==s.length)return{success:!1,supportsGPU:!1,error:\"convolution-function: the specified rows and cols do not match the length of the kernel\"};const n=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(n.pixelType);const i=n.clone();i.pixelType=this.outputPixelType;const u=[r.none,r.sharpen,r.sharpen2,r.sharpening3x3,r.sharpening5x5];\"u8\"===this.outputPixelType||u.includes(t)||(i.statistics=null,i.histograms=null),i.colormap=null,i.attributeTable=null,this.rasterInfo=i;return{success:!0,supportsGPU:s.length<=p}}_processPixels(t){const o=t.pixelBlocks?.[0];if(e(o)||this.functionArguments.convolutionType===r.none)return o;let{kernel:s,rows:n,cols:i}=this.functionArguments;const u=s.reduce(((t,e)=>t+e));return 0!==u&&1!==u&&(s=s.map((t=>t/u))),c(o,{kernel:s,rows:n,cols:i,outputPixelType:this.outputPixelType})}_getWebGLParameters(){let{kernel:t}=this.functionArguments;const e=t.reduce(((t,e)=>t+e));0!==e&&1!==e&&(t=t.map((t=>t/e)));const o=new Float32Array(p);return o.set(t),{kernelRows:this.functionArguments.rows,kernelCols:this.functionArguments.cols,kernel:o,clampRange:n(this.outputPixelType)}}};t([o({json:{write:!0,name:\"rasterFunction\"}})],l.prototype,\"functionName\",void 0),t([o({type:u,json:{write:!0,name:\"rasterFunctionArguments\"}})],l.prototype,\"functionArguments\",void 0),t([o()],l.prototype,\"rasterArgumentNames\",void 0),l=t([s(\"esri.layers.support.rasterFunctions.ConvolutionFunction\")],l);const a=l;export{a as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}