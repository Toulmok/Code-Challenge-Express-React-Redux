{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport t from \"../../../../core/Error.js\";\nimport { acosClamped as e, reciprocalClamped as i } from \"../../../../core/mathUtils.js\";\nimport { isSome as r, get as s } from \"../../../../core/maybe.js\";\nimport { s as a } from \"../../../../chunks/mat2.js\";\nimport { s as o, b as n } from \"../../../../chunks/vec2.js\";\nimport { f as l, b as h } from \"../../../../chunks/vec2f64.js\";\nimport { s as c, c as p, a as m, e as f, f as d, g as u, n as g, o as y, b as _ } from \"../../../../chunks/vec3.js\";\nimport { d as b, c as v } from \"../../../../chunks/vec3f64.js\";\nimport { projectBuffer as x } from \"../../../../geometry/projection.js\";\nimport { create as w, empty as S, expandWithBuffer as P, intersectsClippingArea as R } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { makeDehydratedPoint as j } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport { needsElevationUpdates3D as C, evaluateElevationAlignmentAtPoint as D, SampleElevationInfo as U } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as L } from \"./ElevationContext.js\";\nimport { Graphics3DObject3DGraphicLayer as A } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { PATH_NUM_CIRCLE_PROFILE_SUBDIVISIONS as V, PATH_NUM_ROUND_JOIN_SUBDIVISIONS as E, PATH_NUM_ROUND_CAP_EXTRUSION_SUBDIVISIONS as z } from \"./Graphics3DPathSymbolLayerConstants.js\";\nimport { Graphics3DSymbolLayer as M, getAttributeValue as k } from \"./Graphics3DSymbolLayer.js\";\nimport { isValidSize as I } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as F } from \"./interfaces.js\";\nimport { initFastSymbolUpdatesState as G, updateFastSymbolUpdatesState as B } from \"../support/FastSymbolUpdates.js\";\nimport { CullFaceOptions as O } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { newDoubleArray as H } from \"../../webgl-engine/lib/DoubleArray.js\";\nimport { Object3D as q } from \"../../webgl-engine/lib/Object3D.js\";\nimport { UpVectorAlignment as W, PathGeometry as T, isPathGeometry as N } from \"../../webgl-engine/lib/PathGeometry.js\";\nimport { creatQuadProfile as Z, createCircleProfile as J, SimpleExtruder as K, MiterExtruder as Q, RoundCapBuilder as X, TriangulationCapBuilder as Y, NoCapBuilder as $, PathVertex as tt, Path as et, Builder as it, FastUpdatePathGeometry as rt, StaticPathGeometry as st, computeMinimumRotationTangentFrame as at, vertexSpaceToProfileSpace as ot } from \"../../webgl-engine/lib/pathGeometryUtils.js\";\nimport { DefaultMaterial as nt } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { PathMaterial as lt } from \"../../webgl-engine/materials/PathMaterial.js\";\nconst ht = [\"polyline\"];\nclass ct extends M {\n  constructor(t, e, i, r) {\n    super(t, e, i, r), this._intrinsicSize = l(1, 1), this._upVectorAlignment = W.Path, this._stencilWidth = .1, this.ensureDrapedStatus(!1);\n  }\n  async doLoad() {\n    const e = r(this.symbolLayer.width) ? this.symbolLayer.width : this.symbolLayer.height,\n      i = r(this.symbolLayer.height) ? this.symbolLayer.height : e;\n    this._vvConvertOptions = {\n      modelSize: [1, 1, 1],\n      symbolSize: [e, 1, i],\n      unitInMeters: this._context.renderCoordsHelper.unitInMeters,\n      transformation: {\n        anchor: [0, 0, 0],\n        scale: [1, 1, 1],\n        rotation: [0, 0, 0]\n      },\n      supportedTypes: {\n        size: !0,\n        color: !0,\n        opacity: !0,\n        rotation: !1\n      }\n    }, this._context.renderer && this._context.renderer.visualVariables && this._context.renderer.visualVariables.length > 0 ? this._fastUpdates = G(this._context.renderer, this._vvConvertOptions) : this._fastUpdates = {\n      enabled: !1\n    };\n    const a = this.symbolLayer.anchor || \"center\";\n    this._upVectorAlignment = \"heading\" === this.symbolLayer.profileRotation ? W.World : W.Path;\n    const l = this.symbolLayer.profile || \"circle\";\n    switch (l) {\n      default:\n      case \"circle\":\n        this._profile = J(V);\n        break;\n      case \"quad\":\n        this._profile = Z();\n    }\n    let c = [0, 0];\n    switch (\"center\" !== a && (c = {\n      left: [.5, 0],\n      right: [-.5, 0],\n      top: [0, -.5],\n      bottom: [0, .5]\n    }[a], this._profile.translate(c[0], c[1])), this.symbolLayer.join) {\n      case \"round\":\n        this._extruder = new Q(0, E);\n        break;\n      case \"bevel\":\n        this._extruder = new Q(0, 1);\n        break;\n      case \"miter\":\n        this._extruder = new Q(.8 * Math.PI, 1);\n        break;\n      default:\n        this._extruder = new K();\n    }\n    const p = this.symbolLayer.cap || \"butt\";\n    switch (p) {\n      case \"none\":\n        this._startCap = new $(), this._endCap = new $();\n        break;\n      case \"butt\":\n      default:\n        this._startCap = new Y(this._profile, 0), this._endCap = new Y(this._profile, 0, !0);\n        break;\n      case \"square\":\n        this._startCap = new Y(this._profile, -.5), this._endCap = new Y(this._profile, .5, !0);\n        break;\n      case \"round\":\n        {\n          const t = \"quad\" === l;\n          this._startCap = new X({\n            profile: this._profile,\n            flip: !1,\n            breakNormals: t,\n            subdivisions: z\n          }), this._endCap = new X({\n            profile: this._profile,\n            flip: !0,\n            breakNormals: t,\n            subdivisions: z\n          });\n          break;\n        }\n    }\n    const m = s(this.symbolLayer, \"material\", \"color\"),\n      f = this._getCombinedOpacityAndColor(m),\n      d = b(f),\n      u = f[3],\n      g = u < 1 || this.needsDrivenTransparentPass,\n      y = {\n        diffuse: d,\n        ambient: d,\n        opacity: u,\n        transparent: g,\n        hasVertexColors: !1,\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        castShadows: this.symbolLayer.castShadows,\n        cullFace: g || \"none\" === p ? O.None : O.Back,\n        offsetTransparentBackfaces: !0\n      };\n    if (!this._drivenProperties.size && (o(this._intrinsicSize, e, i), !I(this._intrinsicSize[0]) || !I(this._intrinsicSize[1]))) throw new t(\"graphics3dpathsymbollayer:invalid-size\", \"Symbol sizes may not be negative values\");\n    if (this._fastUpdates.enabled && this._fastUpdates.visualVariables.size || n(this._intrinsicSize, this._intrinsicSize, 1 / this._context.renderCoordsHelper.unitInMeters), this._fastUpdates.enabled) {\n      const t = {\n        ...y,\n        ...this._fastUpdates.materialParameters,\n        size: h(this._intrinsicSize)\n      };\n      this._material = new lt(t);\n    } else y.hasVertexColors = this._drivenProperties.color || this._drivenProperties.opacity, this._material = new nt(y);\n    this._material.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }), this._context.stage.add(this._material);\n  }\n  destroy() {\n    super.destroy(), this._context.stage.remove(this._material), this._material = null;\n  }\n  createGraphics3DGraphic(t) {\n    const e = t.graphic;\n    if (!this._validateGeometry(e.geometry, ht, this.symbolLayer.type)) return null;\n    const i = this.setGraphicElevationContext(e, new L()),\n      r = t.renderingInfo;\n    return this._createAs3DShape(e, r, i, e.uid);\n  }\n  layerOpacityChanged() {\n    const t = s(this.symbolLayer, \"material\", \"color\"),\n      e = this._getCombinedOpacity(t),\n      i = e < 1 || this.needsDrivenTransparentPass;\n    this._material.setParameters({\n      opacity: e,\n      transparent: i\n    });\n  }\n  layerElevationInfoChanged(t, e) {\n    return this.updateGraphics3DGraphicElevationInfo(t, e, C);\n  }\n  slicePlaneEnabledChanged() {\n    return this._material.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return this._material.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }), !0;\n  }\n  pixelRatioChanged() {\n    return !0;\n  }\n  skipHighSymbolLodsChanged() {\n    return !0;\n  }\n  applyRendererDiff(t, e) {\n    for (const i in t.diff) {\n      if (\"visualVariables\" !== i) return F.Recreate_Symbol;\n      if (!B(this._fastUpdates, e, this._vvConvertOptions)) return F.Recreate_Symbol;\n      this._material.setParameters(this._fastUpdates.materialParameters);\n    }\n    return F.Fast_Update;\n  }\n  _getVertexData(t) {\n    let e = 0;\n    const i = t.paths,\n      s = [],\n      a = t.spatialReference,\n      o = this._context.elevationProvider.spatialReference,\n      n = this._context.renderCoordsHelper.spatialReference;\n    for (const r of i) e += r.length;\n    const l = H(3 * e),\n      h = H(3 * e);\n    let c = 0;\n    for (const r of i) {\n      s.push({\n        index: c,\n        numVertices: r.length\n      });\n      for (const e of r) l[c++] = e[0], l[c++] = e[1], l[c++] = t.hasZ ? e[2] : 0;\n    }\n    let p = !0;\n    return r(o) && !a.equals(o) && (p = x(l, a, 0, l, o, 0, e)), r(o) && !o.equals(n) ? x(l, o, 0, h, n, 0, e) : this._copyVertices(l, 0, h, 0, e), {\n      pathVertexDataInfos: s,\n      vertexDataES: l,\n      vertexDataRS: h,\n      projectionSuccess: p,\n      terrainElevation: 0\n    };\n  }\n  _copyVertices(t, e, i, r, s) {\n    e *= 3, r *= 3;\n    for (let a = 0; a < s; ++a) i[r++] = t[e++], i[r++] = t[e++], i[r++] = t[e++];\n  }\n  _createAs3DShape(t, e, i, s) {\n    const a = t.geometry,\n      o = new Array(),\n      n = a.spatialReference,\n      l = w(),\n      h = this._context.renderCoordsHelper;\n    gt.spatialReference = n;\n    const m = this._getVertexData(a);\n    if (!m.projectionSuccess) return this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)\"), null;\n    if (0 === m.pathVertexDataInfos.length) return 0 !== a.paths.length && a.paths.some(t => t.length > 0) || this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (no paths were defined)\"), null;\n    for (const g of m.pathVertexDataInfos) {\n      const a = g.index,\n        f = g.numVertices;\n      if (f < 2) continue;\n      if (r(this._context.clippingExtent) && (S(l), P(l, m.vertexDataES, 3 * a, f), !R(l, this._context.clippingExtent))) continue;\n      const d = [];\n      for (let t = a; t < a + 3 * f;) {\n        const e = t++,\n          r = t++,\n          s = t++,\n          a = new tt();\n        c(a.posES, m.vertexDataES[e], m.vertexDataES[r], m.vertexDataES[s]);\n        const o = D(a.posES, this._context.elevationProvider, i, h);\n        c(yt, m.vertexDataRS[e], m.vertexDataRS[r], m.vertexDataRS[s]), h.setAltitude(yt, o), p(a.pos, yt), d.push(a);\n      }\n      const u = new et(d);\n      pt(u, this._upVectorAlignment, this._context.renderCoordsHelper);\n      const y = new it(u, this._profile, this._extruder, this._startCap, this._endCap);\n      let _ = null;\n      if (this._fastUpdates.enabled) {\n        const e = this._fastUpdates.visualVariables,\n          i = e.size ? k(e.size.field, t) : 0,\n          r = e.color ? k(e.color.field, t) : 0,\n          s = e.opacity ? k(e.opacity.field, t) : 0;\n        _ = new rt(y, i, r, s);\n      } else {\n        const t = [this._intrinsicSize[0], this._intrinsicSize[1]];\n        if (this._drivenProperties.size) {\n          const i = e.size;\n          t[0] *= mt(i[0], \"symbol-value\" === i[2] ? this.symbolLayer.height || 0 : i[2], this.symbolLayer.width || 0), t[1] *= mt(i[2], \"symbol-value\" === i[0] ? this.symbolLayer.width || 0 : i[0], this.symbolLayer.height || 0);\n        }\n        let i;\n        this._drivenProperties.color && (i = e.color), this._drivenProperties.opacity && null != e.opacity && (i = i ? [i[0], i[1], i[2], e.opacity] : [1, 1, 1, e.opacity]);\n        const r = new st(y);\n        r.bake(t), i && r.bakeVertexColors(i), _ = r;\n      }\n      const {\n          vertexAttributes: b,\n          indices: v\n        } = _.createGeometryData(),\n        x = this._context.stage.renderView.getObjectAndLayerIdColor({\n          graphicUid: s,\n          layerUid: this._context.layer.uid\n        }),\n        w = new T(this._material, b, v, _, n, this._upVectorAlignment, this._stencilWidth, x);\n      w.transformation = _.xform, o.push(w);\n    }\n    if (0 === o.length) return null;\n    const f = {\n        layerUid: this._context.layer.uid,\n        graphicUid: s\n      },\n      d = new q({\n        geometries: o,\n        metadata: f\n      }),\n      u = new A(this, d, o, null, null, dt, i);\n    return u.alignedSampledElevation = m.terrainElevation, u.needsElevationUpdates = C(i.mode), u;\n  }\n}\nfunction pt(t, r, s) {\n  switch (r) {\n    default:\n    case W.World:\n      for (const r of t.vertices) {\n        m(yt, r.pos, t.offset), s.worldUpAtPosition(yt, yt), r.setFrameFromUpVector(yt), r.rotationFrameUp = r.frame.up, o(r.rotationRight, 1, 0), u(yt, r.frame.up, f(r.frame.up, r.vLeft)), _(yt, r.vLeft, yt), y(yt, yt), g(yt, yt), u(_t, r.frame.up, f(r.frame.up, r.vRight)), _(_t, r.vRight, _t), g(_t, _t), d(bt, r.rotationFrameUp, r.vLeft);\n        const n = Math.sign(f(bt, r.vRight));\n        if (r.rotationAngle = n * (Math.PI - e(f(yt, _t))), Math.abs(r.rotationAngle) > 0) {\n          const t = i(Math.cos(.5 * r.rotationAngle));\n          a(r.miterStretch, t - 1 + 1, 0, 0, 1);\n        }\n        const l = Math.PI - r.rotationAngle;\n        r.maxStretchDistance = Math.abs(r.vMinSiblingLength / Math.cos(.5 * l));\n      }\n      break;\n    case W.Path:\n      m(yt, t.vertices[0].pos, t.offset), s.worldUpAtPosition(yt, yt), at(t, yt);\n      for (const r of t.vertices) {\n        const t = Math.sign(f(r.frame.right, r.vRight));\n        d(r.rotationFrameUp, r.vRight, r.vLeft), u(r.rotationFrameUp, r.rotationFrameUp, t), g(r.rotationFrameUp, r.rotationFrameUp);\n        const s = f(r.rotationFrameUp, r.frame.up),\n          o = f(r.rotationFrameUp, r.frame.right);\n        if (u(yt, r.frame.up, -o), u(_t, r.frame.right, s), m(yt, yt, _t), g(yt, yt), ot(r.rotationRight, r.frame, yt), y(yt, r.vLeft), r.rotationAngle = -t * (Math.PI - e(f(yt, r.vRight))), Math.abs(r.rotationAngle) > 0) {\n          const t = i(Math.cos(.5 * r.rotationAngle));\n          a(r.miterStretch, 1 + (t - 1) * r.rotationRight[0] * r.rotationRight[0], (t - 1) * r.rotationRight[0] * r.rotationRight[1], (t - 1) * r.rotationRight[0] * r.rotationRight[1], 1 + (t - 1) * r.rotationRight[1] * r.rotationRight[1]);\n        }\n        const n = Math.PI - r.rotationAngle;\n        r.maxStretchDistance = Math.abs(r.vMinSiblingLength * i(Math.cos(.5 * n)));\n      }\n  }\n}\nfunction mt(t, e, i) {\n  switch (t) {\n    case \"symbol-value\":\n      return i;\n    case \"proportional\":\n      return e;\n    default:\n      return t;\n  }\n}\nfunction ft(t, e, i, r) {\n  let s = 0;\n  for (const a of t.vertices) i(a.posES, vt), s += vt.sampledElevation, m(yt, a.pos, t.offset), r.setAltitude(yt, vt.z), _(a.pos, yt, t.offset);\n  return t.updatePathVertexInformation(), s / t.vertices.length;\n}\nfunction dt(t, e, i, r, s) {\n  const a = t.stageObject,\n    o = a.geometries;\n  let n = 0;\n  ut.spatialReference = s.spatialReference;\n  for (const l of o) {\n    if (!N(l)) continue;\n    const t = l.path,\n      i = t.builder.path,\n      o = l.geometrySR;\n    gt.spatialReference = o, n += ft(i, e, r, s), l.upVectorAlignment !== W.World && pt(i, l.upVectorAlignment, s), t.onPathChanged(), l.invalidateBoundingInfo(), a.geometryVertexAttrsUpdated(l);\n  }\n  return n / o.length;\n}\nconst ut = j(0, 0, 0, null),\n  gt = j(0, 0, 0, null),\n  yt = v(),\n  _t = v(),\n  bt = v(),\n  vt = new U();\nexport { ct as Graphics3DPathSymbolLayer };","map":{"version":3,"names":["t","acosClamped","e","reciprocalClamped","i","isSome","r","get","s","a","o","b","n","f","l","h","c","p","m","d","g","u","y","_","v","projectBuffer","x","create","w","empty","S","expandWithBuffer","P","intersectsClippingArea","R","makeDehydratedPoint","j","needsElevationUpdates3D","C","evaluateElevationAlignmentAtPoint","D","SampleElevationInfo","U","ElevationContext","L","Graphics3DObject3DGraphicLayer","A","PATH_NUM_CIRCLE_PROFILE_SUBDIVISIONS","V","PATH_NUM_ROUND_JOIN_SUBDIVISIONS","E","PATH_NUM_ROUND_CAP_EXTRUSION_SUBDIVISIONS","z","Graphics3DSymbolLayer","M","getAttributeValue","k","isValidSize","I","ApplyRendererDiffResult","F","initFastSymbolUpdatesState","G","updateFastSymbolUpdatesState","B","CullFaceOptions","O","newDoubleArray","H","Object3D","q","UpVectorAlignment","W","PathGeometry","T","isPathGeometry","N","creatQuadProfile","Z","createCircleProfile","J","SimpleExtruder","K","MiterExtruder","Q","RoundCapBuilder","X","TriangulationCapBuilder","Y","NoCapBuilder","$","PathVertex","tt","Path","et","Builder","it","FastUpdatePathGeometry","rt","StaticPathGeometry","st","computeMinimumRotationTangentFrame","at","vertexSpaceToProfileSpace","ot","DefaultMaterial","nt","PathMaterial","lt","ht","ct","constructor","_intrinsicSize","_upVectorAlignment","_stencilWidth","ensureDrapedStatus","doLoad","symbolLayer","width","height","_vvConvertOptions","modelSize","symbolSize","unitInMeters","_context","renderCoordsHelper","transformation","anchor","scale","rotation","supportedTypes","size","color","opacity","renderer","visualVariables","length","_fastUpdates","enabled","profileRotation","World","profile","_profile","left","right","top","bottom","translate","join","_extruder","Math","PI","cap","_startCap","_endCap","flip","breakNormals","subdivisions","_getCombinedOpacityAndColor","needsDrivenTransparentPass","diffuse","ambient","transparent","hasVertexColors","hasSlicePlane","slicePlaneEnabled","castShadows","cullFace","None","Back","offsetTransparentBackfaces","_drivenProperties","materialParameters","_material","setParameters","usePBR","physicalBasedRenderingEnabled","isSchematic","stage","add","destroy","remove","createGraphics3DGraphic","graphic","_validateGeometry","geometry","type","setGraphicElevationContext","renderingInfo","_createAs3DShape","uid","layerOpacityChanged","_getCombinedOpacity","layerElevationInfoChanged","updateGraphics3DGraphicElevationInfo","slicePlaneEnabledChanged","physicalBasedRenderingChanged","pixelRatioChanged","skipHighSymbolLodsChanged","applyRendererDiff","diff","Recreate_Symbol","Fast_Update","_getVertexData","paths","spatialReference","elevationProvider","push","index","numVertices","hasZ","equals","_copyVertices","pathVertexDataInfos","vertexDataES","vertexDataRS","projectionSuccess","terrainElevation","Array","gt","logger","warn","some","clippingExtent","posES","yt","setAltitude","pos","pt","field","mt","bake","bakeVertexColors","vertexAttributes","indices","createGeometryData","renderView","getObjectAndLayerIdColor","graphicUid","layerUid","layer","xform","geometries","metadata","dt","alignedSampledElevation","needsElevationUpdates","mode","vertices","offset","worldUpAtPosition","setFrameFromUpVector","rotationFrameUp","frame","up","rotationRight","vLeft","_t","vRight","bt","sign","rotationAngle","abs","cos","miterStretch","maxStretchDistance","vMinSiblingLength","ft","vt","sampledElevation","updatePathVertexInformation","stageObject","ut","path","builder","geometrySR","upVectorAlignment","onPathChanged","invalidateBoundingInfo","geometryVertexAttrsUpdated","Graphics3DPathSymbolLayer"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPathSymbolLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import t from\"../../../../core/Error.js\";import{acosClamped as e,reciprocalClamped as i}from\"../../../../core/mathUtils.js\";import{isSome as r,get as s}from\"../../../../core/maybe.js\";import{s as a}from\"../../../../chunks/mat2.js\";import{s as o,b as n}from\"../../../../chunks/vec2.js\";import{f as l,b as h}from\"../../../../chunks/vec2f64.js\";import{s as c,c as p,a as m,e as f,f as d,g as u,n as g,o as y,b as _}from\"../../../../chunks/vec3.js\";import{d as b,c as v}from\"../../../../chunks/vec3f64.js\";import{projectBuffer as x}from\"../../../../geometry/projection.js\";import{create as w,empty as S,expandWithBuffer as P,intersectsClippingArea as R}from\"../../../../geometry/support/aaBoundingBox.js\";import{makeDehydratedPoint as j}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{needsElevationUpdates3D as C,evaluateElevationAlignmentAtPoint as D,SampleElevationInfo as U}from\"./elevationAlignmentUtils.js\";import{ElevationContext as L}from\"./ElevationContext.js\";import{Graphics3DObject3DGraphicLayer as A}from\"./Graphics3DObject3DGraphicLayer.js\";import{PATH_NUM_CIRCLE_PROFILE_SUBDIVISIONS as V,PATH_NUM_ROUND_JOIN_SUBDIVISIONS as E,PATH_NUM_ROUND_CAP_EXTRUSION_SUBDIVISIONS as z}from\"./Graphics3DPathSymbolLayerConstants.js\";import{Graphics3DSymbolLayer as M,getAttributeValue as k}from\"./Graphics3DSymbolLayer.js\";import{isValidSize as I}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as F}from\"./interfaces.js\";import{initFastSymbolUpdatesState as G,updateFastSymbolUpdatesState as B}from\"../support/FastSymbolUpdates.js\";import{CullFaceOptions as O}from\"../../webgl-engine/lib/basicInterfaces.js\";import{newDoubleArray as H}from\"../../webgl-engine/lib/DoubleArray.js\";import{Object3D as q}from\"../../webgl-engine/lib/Object3D.js\";import{UpVectorAlignment as W,PathGeometry as T,isPathGeometry as N}from\"../../webgl-engine/lib/PathGeometry.js\";import{creatQuadProfile as Z,createCircleProfile as J,SimpleExtruder as K,MiterExtruder as Q,RoundCapBuilder as X,TriangulationCapBuilder as Y,NoCapBuilder as $,PathVertex as tt,Path as et,Builder as it,FastUpdatePathGeometry as rt,StaticPathGeometry as st,computeMinimumRotationTangentFrame as at,vertexSpaceToProfileSpace as ot}from\"../../webgl-engine/lib/pathGeometryUtils.js\";import{DefaultMaterial as nt}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{PathMaterial as lt}from\"../../webgl-engine/materials/PathMaterial.js\";const ht=[\"polyline\"];class ct extends M{constructor(t,e,i,r){super(t,e,i,r),this._intrinsicSize=l(1,1),this._upVectorAlignment=W.Path,this._stencilWidth=.1,this.ensureDrapedStatus(!1)}async doLoad(){const e=r(this.symbolLayer.width)?this.symbolLayer.width:this.symbolLayer.height,i=r(this.symbolLayer.height)?this.symbolLayer.height:e;this._vvConvertOptions={modelSize:[1,1,1],symbolSize:[e,1,i],unitInMeters:this._context.renderCoordsHelper.unitInMeters,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,rotation:!1}},this._context.renderer&&this._context.renderer.visualVariables&&this._context.renderer.visualVariables.length>0?this._fastUpdates=G(this._context.renderer,this._vvConvertOptions):this._fastUpdates={enabled:!1};const a=this.symbolLayer.anchor||\"center\";this._upVectorAlignment=\"heading\"===this.symbolLayer.profileRotation?W.World:W.Path;const l=this.symbolLayer.profile||\"circle\";switch(l){default:case\"circle\":this._profile=J(V);break;case\"quad\":this._profile=Z()}let c=[0,0];switch(\"center\"!==a&&(c={left:[.5,0],right:[-.5,0],top:[0,-.5],bottom:[0,.5]}[a],this._profile.translate(c[0],c[1])),this.symbolLayer.join){case\"round\":this._extruder=new Q(0,E);break;case\"bevel\":this._extruder=new Q(0,1);break;case\"miter\":this._extruder=new Q(.8*Math.PI,1);break;default:this._extruder=new K}const p=this.symbolLayer.cap||\"butt\";switch(p){case\"none\":this._startCap=new $,this._endCap=new $;break;case\"butt\":default:this._startCap=new Y(this._profile,0),this._endCap=new Y(this._profile,0,!0);break;case\"square\":this._startCap=new Y(this._profile,-.5),this._endCap=new Y(this._profile,.5,!0);break;case\"round\":{const t=\"quad\"===l;this._startCap=new X({profile:this._profile,flip:!1,breakNormals:t,subdivisions:z}),this._endCap=new X({profile:this._profile,flip:!0,breakNormals:t,subdivisions:z});break}}const m=s(this.symbolLayer,\"material\",\"color\"),f=this._getCombinedOpacityAndColor(m),d=b(f),u=f[3],g=u<1||this.needsDrivenTransparentPass,y={diffuse:d,ambient:d,opacity:u,transparent:g,hasVertexColors:!1,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,cullFace:g||\"none\"===p?O.None:O.Back,offsetTransparentBackfaces:!0};if(!this._drivenProperties.size&&(o(this._intrinsicSize,e,i),!I(this._intrinsicSize[0])||!I(this._intrinsicSize[1])))throw new t(\"graphics3dpathsymbollayer:invalid-size\",\"Symbol sizes may not be negative values\");if(this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size||n(this._intrinsicSize,this._intrinsicSize,1/this._context.renderCoordsHelper.unitInMeters),this._fastUpdates.enabled){const t={...y,...this._fastUpdates.materialParameters,size:h(this._intrinsicSize)};this._material=new lt(t)}else y.hasVertexColors=this._drivenProperties.color||this._drivenProperties.opacity,this._material=new nt(y);this._material.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),this._context.stage.add(this._material)}destroy(){super.destroy(),this._context.stage.remove(this._material),this._material=null}createGraphics3DGraphic(t){const e=t.graphic;if(!this._validateGeometry(e.geometry,ht,this.symbolLayer.type))return null;const i=this.setGraphicElevationContext(e,new L),r=t.renderingInfo;return this._createAs3DShape(e,r,i,e.uid)}layerOpacityChanged(){const t=s(this.symbolLayer,\"material\",\"color\"),e=this._getCombinedOpacity(t),i=e<1||this.needsDrivenTransparentPass;this._material.setParameters({opacity:e,transparent:i})}layerElevationInfoChanged(t,e){return this.updateGraphics3DGraphicElevationInfo(t,e,C)}slicePlaneEnabledChanged(){return this._material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return this._material.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),!0}pixelRatioChanged(){return!0}skipHighSymbolLodsChanged(){return!0}applyRendererDiff(t,e){for(const i in t.diff){if(\"visualVariables\"!==i)return F.Recreate_Symbol;if(!B(this._fastUpdates,e,this._vvConvertOptions))return F.Recreate_Symbol;this._material.setParameters(this._fastUpdates.materialParameters)}return F.Fast_Update}_getVertexData(t){let e=0;const i=t.paths,s=[],a=t.spatialReference,o=this._context.elevationProvider.spatialReference,n=this._context.renderCoordsHelper.spatialReference;for(const r of i)e+=r.length;const l=H(3*e),h=H(3*e);let c=0;for(const r of i){s.push({index:c,numVertices:r.length});for(const e of r)l[c++]=e[0],l[c++]=e[1],l[c++]=t.hasZ?e[2]:0}let p=!0;return r(o)&&!a.equals(o)&&(p=x(l,a,0,l,o,0,e)),r(o)&&!o.equals(n)?x(l,o,0,h,n,0,e):this._copyVertices(l,0,h,0,e),{pathVertexDataInfos:s,vertexDataES:l,vertexDataRS:h,projectionSuccess:p,terrainElevation:0}}_copyVertices(t,e,i,r,s){e*=3,r*=3;for(let a=0;a<s;++a)i[r++]=t[e++],i[r++]=t[e++],i[r++]=t[e++]}_createAs3DShape(t,e,i,s){const a=t.geometry,o=new Array,n=a.spatialReference,l=w(),h=this._context.renderCoordsHelper;gt.spatialReference=n;const m=this._getVertexData(a);if(!m.projectionSuccess)return this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)\"),null;if(0===m.pathVertexDataInfos.length)return 0!==a.paths.length&&a.paths.some((t=>t.length>0))||this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (no paths were defined)\"),null;for(const g of m.pathVertexDataInfos){const a=g.index,f=g.numVertices;if(f<2)continue;if(r(this._context.clippingExtent)&&(S(l),P(l,m.vertexDataES,3*a,f),!R(l,this._context.clippingExtent)))continue;const d=[];for(let t=a;t<a+3*f;){const e=t++,r=t++,s=t++,a=new tt;c(a.posES,m.vertexDataES[e],m.vertexDataES[r],m.vertexDataES[s]);const o=D(a.posES,this._context.elevationProvider,i,h);c(yt,m.vertexDataRS[e],m.vertexDataRS[r],m.vertexDataRS[s]),h.setAltitude(yt,o),p(a.pos,yt),d.push(a)}const u=new et(d);pt(u,this._upVectorAlignment,this._context.renderCoordsHelper);const y=new it(u,this._profile,this._extruder,this._startCap,this._endCap);let _=null;if(this._fastUpdates.enabled){const e=this._fastUpdates.visualVariables,i=e.size?k(e.size.field,t):0,r=e.color?k(e.color.field,t):0,s=e.opacity?k(e.opacity.field,t):0;_=new rt(y,i,r,s)}else{const t=[this._intrinsicSize[0],this._intrinsicSize[1]];if(this._drivenProperties.size){const i=e.size;t[0]*=mt(i[0],\"symbol-value\"===i[2]?this.symbolLayer.height||0:i[2],this.symbolLayer.width||0),t[1]*=mt(i[2],\"symbol-value\"===i[0]?this.symbolLayer.width||0:i[0],this.symbolLayer.height||0)}let i;this._drivenProperties.color&&(i=e.color),this._drivenProperties.opacity&&null!=e.opacity&&(i=i?[i[0],i[1],i[2],e.opacity]:[1,1,1,e.opacity]);const r=new st(y);r.bake(t),i&&r.bakeVertexColors(i),_=r}const{vertexAttributes:b,indices:v}=_.createGeometryData(),x=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:s,layerUid:this._context.layer.uid}),w=new T(this._material,b,v,_,n,this._upVectorAlignment,this._stencilWidth,x);w.transformation=_.xform,o.push(w)}if(0===o.length)return null;const f={layerUid:this._context.layer.uid,graphicUid:s},d=new q({geometries:o,metadata:f}),u=new A(this,d,o,null,null,dt,i);return u.alignedSampledElevation=m.terrainElevation,u.needsElevationUpdates=C(i.mode),u}}function pt(t,r,s){switch(r){default:case W.World:for(const r of t.vertices){m(yt,r.pos,t.offset),s.worldUpAtPosition(yt,yt),r.setFrameFromUpVector(yt),r.rotationFrameUp=r.frame.up,o(r.rotationRight,1,0),u(yt,r.frame.up,f(r.frame.up,r.vLeft)),_(yt,r.vLeft,yt),y(yt,yt),g(yt,yt),u(_t,r.frame.up,f(r.frame.up,r.vRight)),_(_t,r.vRight,_t),g(_t,_t),d(bt,r.rotationFrameUp,r.vLeft);const n=Math.sign(f(bt,r.vRight));if(r.rotationAngle=n*(Math.PI-e(f(yt,_t))),Math.abs(r.rotationAngle)>0){const t=i(Math.cos(.5*r.rotationAngle));a(r.miterStretch,t-1+1,0,0,1)}const l=Math.PI-r.rotationAngle;r.maxStretchDistance=Math.abs(r.vMinSiblingLength/Math.cos(.5*l))}break;case W.Path:m(yt,t.vertices[0].pos,t.offset),s.worldUpAtPosition(yt,yt),at(t,yt);for(const r of t.vertices){const t=Math.sign(f(r.frame.right,r.vRight));d(r.rotationFrameUp,r.vRight,r.vLeft),u(r.rotationFrameUp,r.rotationFrameUp,t),g(r.rotationFrameUp,r.rotationFrameUp);const s=f(r.rotationFrameUp,r.frame.up),o=f(r.rotationFrameUp,r.frame.right);if(u(yt,r.frame.up,-o),u(_t,r.frame.right,s),m(yt,yt,_t),g(yt,yt),ot(r.rotationRight,r.frame,yt),y(yt,r.vLeft),r.rotationAngle=-t*(Math.PI-e(f(yt,r.vRight))),Math.abs(r.rotationAngle)>0){const t=i(Math.cos(.5*r.rotationAngle));a(r.miterStretch,1+(t-1)*r.rotationRight[0]*r.rotationRight[0],(t-1)*r.rotationRight[0]*r.rotationRight[1],(t-1)*r.rotationRight[0]*r.rotationRight[1],1+(t-1)*r.rotationRight[1]*r.rotationRight[1])}const n=Math.PI-r.rotationAngle;r.maxStretchDistance=Math.abs(r.vMinSiblingLength*i(Math.cos(.5*n)))}}}function mt(t,e,i){switch(t){case\"symbol-value\":return i;case\"proportional\":return e;default:return t}}function ft(t,e,i,r){let s=0;for(const a of t.vertices)i(a.posES,vt),s+=vt.sampledElevation,m(yt,a.pos,t.offset),r.setAltitude(yt,vt.z),_(a.pos,yt,t.offset);return t.updatePathVertexInformation(),s/t.vertices.length}function dt(t,e,i,r,s){const a=t.stageObject,o=a.geometries;let n=0;ut.spatialReference=s.spatialReference;for(const l of o){if(!N(l))continue;const t=l.path,i=t.builder.path,o=l.geometrySR;gt.spatialReference=o,n+=ft(i,e,r,s),l.upVectorAlignment!==W.World&&pt(i,l.upVectorAlignment,s),t.onPathChanged(),l.invalidateBoundingInfo(),a.geometryVertexAttrsUpdated(l)}return n/o.length}const ut=j(0,0,0,null),gt=j(0,0,0,null),yt=v(),_t=v(),bt=v(),vt=new U;export{ct as Graphics3DPathSymbolLayer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}