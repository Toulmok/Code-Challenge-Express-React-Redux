{"ast":null,"code":"import{GET_IDENTITY,LOAD_PORTAL}from'../constants/action-types';/**\r\n * Middleware function with the signature\r\n *\r\n * storeInstance =>\r\n * functionToCallWithAnActionThatWillSendItToTheNextMiddleware =>\r\n * actionThatDispatchWasCalledWith =>\r\n * valueToUseAsTheReturnValueOfTheDispatchCall\r\n *\r\n * Typically written as\r\n *\r\n * store => next => action => result\r\n */var arcgisMiddleWare=function arcgisMiddleWare(store){return function(next){return function(action){switch(action.type){case GET_IDENTITY:next(action);return fetch('/refresh').then(function(res){return res.json();}).then(function(jsonRes){console.log(jsonRes);if(jsonRes.body.refresh){store.dispatch({type:LOAD_PORTAL});}});default:return next(action);}};};};export default arcgisMiddleWare;","map":{"version":3,"names":["GET_IDENTITY","LOAD_PORTAL","arcgisMiddleWare","store","next","action","type","fetch","then","res","json","jsonRes","console","log","body","refresh","dispatch"],"sources":["C:/code-challenge-react/client/src/middleware/arcgis-authentication.js"],"sourcesContent":["import {\r\n  GET_IDENTITY,\r\n  LOAD_PORTAL\r\n} from '../constants/action-types'\r\n\r\n/**\r\n * Middleware function with the signature\r\n *\r\n * storeInstance =>\r\n * functionToCallWithAnActionThatWillSendItToTheNextMiddleware =>\r\n * actionThatDispatchWasCalledWith =>\r\n * valueToUseAsTheReturnValueOfTheDispatchCall\r\n *\r\n * Typically written as\r\n *\r\n * store => next => action => result\r\n */\r\nconst arcgisMiddleWare = store => next => (action) => {\r\n  switch (action.type) {\r\n    case GET_IDENTITY:\r\n        next(action)\r\n        return fetch('/refresh')\r\n        .then(res => res.json())\r\n        .then(jsonRes => { console.log(jsonRes)\r\n            if(jsonRes.body.refresh){ store.dispatch({ type: LOAD_PORTAL })}\r\n        })\r\n        \r\n    default:\r\n      return next(action)\r\n  }\r\n}\r\n\r\nexport default arcgisMiddleWare"],"mappings":"AAAA,OACEA,YAAY,CACZC,WAAW,KACN,2BAA2B,CAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAGC,KAAK,QAAI,UAAAC,IAAI,QAAI,UAACC,MAAM,CAAK,CACpD,OAAQA,MAAM,CAACC,IAAI,EACjB,IAAK,CAAAN,YAAY,CACbI,IAAI,CAACC,MAAM,CAAC,CACZ,MAAO,CAAAE,KAAK,CAAC,UAAU,CAAC,CACvBC,IAAI,CAAC,SAAAC,GAAG,QAAI,CAAAA,GAAG,CAACC,IAAI,EAAE,GAAC,CACvBF,IAAI,CAAC,SAAAG,OAAO,CAAI,CAAEC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC,CACnC,GAAGA,OAAO,CAACG,IAAI,CAACC,OAAO,CAAC,CAAEZ,KAAK,CAACa,QAAQ,CAAC,CAAEV,IAAI,CAAEL,WAAY,CAAC,CAAC,EACnE,CAAC,CAAC,CAEN,QACE,MAAO,CAAAG,IAAI,CAACC,MAAM,CAAC,EAEzB,CAAC,KAED,cAAe,CAAAH,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}