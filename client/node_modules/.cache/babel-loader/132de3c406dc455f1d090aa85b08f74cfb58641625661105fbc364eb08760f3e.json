{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { isPowerOfTwo as r } from \"../../../../core/mathUtils.js\";\nimport { unwrapOrThrow as t } from \"../../../../core/maybe.js\";\nimport { TextureSamplingMode as o, CompressedTextureFormat as n } from \"../../../webgl/enums.js\";\nimport { Texture as a } from \"../../../webgl/Texture.js\";\nvar i = e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),\n  s = 542327876,\n  l = 131072,\n  m = 4;\nfunction u(e) {\n  return e.charCodeAt(0) + (e.charCodeAt(1) << 8) + (e.charCodeAt(2) << 16) + (e.charCodeAt(3) << 24);\n}\nfunction c(e) {\n  return String.fromCharCode(255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255);\n}\nvar h = u(\"DXT1\"),\n  p = u(\"DXT3\"),\n  d = u(\"DXT5\"),\n  g = 31,\n  f = 0,\n  C = 1,\n  w = 2,\n  D = 3,\n  T = 4,\n  _ = 7,\n  A = 20,\n  E = 21;\nfunction S(e, r, n) {\n  var _r$hasMipmap;\n  var _t = t(M(n, (_r$hasMipmap = r.hasMipmap) !== null && _r$hasMipmap !== void 0 ? _r$hasMipmap : !1)),\n    i = _t.textureData,\n    s = _t.internalFormat,\n    l = _t.width,\n    m = _t.height;\n  return r.samplingMode = i.levels.length > 1 ? o.LINEAR_MIPMAP_LINEAR : o.LINEAR, r.hasMipmap = i.levels.length > 1, r.internalFormat = s, r.width = l, r.height = m, new a(e, r, i);\n}\nfunction M(e, t) {\n  var o = new Int32Array(e, 0, g);\n  if (o[f] !== s) return i.error(\"Invalid magic number in DDS header\"), null;\n  if (!(o[A] & m)) return i.error(\"Unsupported format, must contain a FourCC code\"), null;\n  var a = o[E];\n  var u, S;\n  switch (a) {\n    case h:\n      u = 8, S = n.COMPRESSED_RGB_S3TC_DXT1_EXT;\n      break;\n    case p:\n      u = 16, S = n.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n      break;\n    case d:\n      u = 16, S = n.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n      break;\n    default:\n      return i.error(\"Unsupported FourCC code:\", c(a)), null;\n  }\n  var M = 1,\n    x = o[T],\n    R = o[D];\n  0 == (3 & x) && 0 == (3 & R) || (i.warn(\"Rounding up compressed texture size to nearest multiple of 4.\"), x = x + 3 & -4, R = R + 3 & -4);\n  var b = x,\n    X = R;\n  var I, j;\n  o[w] & l && !1 !== t && (M = Math.max(1, o[_])), 1 === M || r(x) && r(R) || (i.warn(\"Ignoring mipmaps of non power of two sized compressed texture.\"), M = 1);\n  var v = o[C] + 4;\n  var F = [];\n  for (var _r = 0; _r < M; ++_r) j = (x + 3 >> 2) * (R + 3 >> 2) * u, I = new Uint8Array(e, v, j), F.push(I), v += j, x = Math.max(1, x >> 1), R = Math.max(1, R >> 1);\n  return {\n    textureData: {\n      type: \"compressed\",\n      levels: F\n    },\n    internalFormat: S,\n    width: b,\n    height: X\n  };\n}\nexport { S as createDDSTexture, M as createDDSTextureData };","map":{"version":3,"names":["e","isPowerOfTwo","r","unwrapOrThrow","t","TextureSamplingMode","o","CompressedTextureFormat","n","Texture","a","i","getLogger","s","l","m","u","charCodeAt","c","String","fromCharCode","h","p","d","g","f","C","w","D","T","_","A","E","S","_r$hasMipmap","_t","M","hasMipmap","textureData","internalFormat","width","height","samplingMode","levels","length","LINEAR_MIPMAP_LINEAR","LINEAR","Int32Array","error","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","x","R","warn","b","X","I","j","Math","max","v","F","Uint8Array","push","type","createDDSTexture","createDDSTextureData"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{isPowerOfTwo as r}from\"../../../../core/mathUtils.js\";import{unwrapOrThrow as t}from\"../../../../core/maybe.js\";import{TextureSamplingMode as o,CompressedTextureFormat as n}from\"../../../webgl/enums.js\";import{Texture as a}from\"../../../webgl/Texture.js\";const i=e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),s=542327876,l=131072,m=4;function u(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function c(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}const h=u(\"DXT1\"),p=u(\"DXT3\"),d=u(\"DXT5\"),g=31,f=0,C=1,w=2,D=3,T=4,_=7,A=20,E=21;function S(e,r,n){const{textureData:i,internalFormat:s,width:l,height:m}=t(M(n,r.hasMipmap??!1));return r.samplingMode=i.levels.length>1?o.LINEAR_MIPMAP_LINEAR:o.LINEAR,r.hasMipmap=i.levels.length>1,r.internalFormat=s,r.width=l,r.height=m,new a(e,r,i)}function M(e,t){const o=new Int32Array(e,0,g);if(o[f]!==s)return i.error(\"Invalid magic number in DDS header\"),null;if(!(o[A]&m))return i.error(\"Unsupported format, must contain a FourCC code\"),null;const a=o[E];let u,S;switch(a){case h:u=8,S=n.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case p:u=16,S=n.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case d:u=16,S=n.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return i.error(\"Unsupported FourCC code:\",c(a)),null}let M=1,x=o[T],R=o[D];0==(3&x)&&0==(3&R)||(i.warn(\"Rounding up compressed texture size to nearest multiple of 4.\"),x=x+3&-4,R=R+3&-4);const b=x,X=R;let I,j;o[w]&l&&!1!==t&&(M=Math.max(1,o[_])),1===M||r(x)&&r(R)||(i.warn(\"Ignoring mipmaps of non power of two sized compressed texture.\"),M=1);let v=o[C]+4;const F=[];for(let r=0;r<M;++r)j=(x+3>>2)*(R+3>>2)*u,I=new Uint8Array(e,v,j),F.push(I),v+=j,x=Math.max(1,x>>1),R=Math.max(1,R>>1);return{textureData:{type:\"compressed\",levels:F},internalFormat:S,width:b,height:X}}export{S as createDDSTexture,M as createDDSTextureData};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}