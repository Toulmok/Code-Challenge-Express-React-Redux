{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isAbortError as e } from \"../../../../core/promiseUtils.js\";\nimport { StyleUpdateType as t } from \"./enums.js\";\nimport s from \"./WorkerTile.js\";\nimport r from \"./style/StyleRepository.js\";\nvar o = /*#__PURE__*/function () {\n  function o() {\n    _classCallCheck(this, o);\n    this._spriteInfo = {}, this._glyphInfo = {};\n  }\n  _createClass(o, [{\n    key: \"reset\",\n    value: function reset() {\n      return this._spriteInfo = {}, this._glyphInfo = {}, Promise.resolve();\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      var _this$_styleRepositor, _this$_styleRepositor2;\n      return (_this$_styleRepositor = (_this$_styleRepositor2 = this._styleRepository) === null || _this$_styleRepositor2 === void 0 ? void 0 : _this$_styleRepositor2.layers) !== null && _this$_styleRepositor !== void 0 ? _this$_styleRepositor : [];\n    }\n  }, {\n    key: \"createTileAndParse\",\n    value: function () {\n      var _createTileAndParse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(t, r) {\n        var _o, i, _i, _Object$keys, _e, _s, n;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _o = t.key, i = {};\n              for (_i = 0, _Object$keys = Object.keys(t.sourceName2DataAndRefKey); _i < _Object$keys.length; _i++) {\n                _e = _Object$keys[_i];\n                _s = t.sourceName2DataAndRefKey[_e];\n                i[_e] = _s.refKey;\n              }\n              n = new s(_o, i, this, this._styleRepository);\n              _context.prev = 3;\n              _context.next = 6;\n              return n.parse(t, r);\n            case 6:\n              return _context.abrupt(\"return\", _context.sent);\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](3);\n              if (!(n.setObsolete(), n.release(), !e(_context.t0))) {\n                _context.next = 13;\n                break;\n              }\n              throw _context.t0;\n            case 13:\n              return _context.abrupt(\"return\", null);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[3, 9]]);\n      }));\n      function createTileAndParse(_x, _x2) {\n        return _createTileAndParse.apply(this, arguments);\n      }\n      return createTileAndParse;\n    }()\n  }, {\n    key: \"updateStyle\",\n    value: function updateStyle(e) {\n      if (!e || 0 === e.length || !this._styleRepository) return;\n      var s = this._styleRepository;\n      var _iterator = _createForOfIteratorHelper(e),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _r = _step.value;\n          var _e2 = _r.type,\n            _o2 = _r.data;\n          switch (_e2) {\n            case t.PAINTER_CHANGED:\n              s.setPaintProperties(_o2.layer, _o2.paint);\n              break;\n            case t.LAYOUT_CHANGED:\n              s.setLayoutProperties(_o2.layer, _o2.layout);\n              break;\n            case t.LAYER_REMOVED:\n              s.deleteStyleLayer(_o2.layer);\n              break;\n            case t.LAYER_CHANGED:\n              s.setStyleLayer(_o2.layer, _o2.index);\n              break;\n            case t.SPRITES_CHANGED:\n              this._spriteInfo = {};\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"setStyle\",\n    value: function setStyle(e) {\n      this._styleRepository = new r(e), this._spriteInfo = {}, this._glyphInfo = {};\n    }\n  }, {\n    key: \"fetchSprites\",\n    value: function fetchSprites(e, t, s) {\n      var r = [],\n        _o3 = this._spriteInfo;\n      var _iterator2 = _createForOfIteratorHelper(e),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var i = _step2.value;\n          void 0 === _o3[i.name] && r.push(i);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return 0 === r.length ? Promise.resolve() : t.invoke(\"getSprites\", r, {\n        signal: s && s.signal\n      }).then(function (e) {\n        for (var _t in e) {\n          var _s2 = e[_t];\n          _o3[_t] = _s2;\n        }\n      });\n    }\n  }, {\n    key: \"getSpriteItems\",\n    value: function getSpriteItems() {\n      return this._spriteInfo;\n    }\n  }, {\n    key: \"fetchGlyphs\",\n    value: function fetchGlyphs(e, t, s, r, _o4) {\n      var i = [];\n      var n = this._glyphInfo[t];\n      return n ? s.forEach(function (e) {\n        n[e] || i.push(e);\n      }) : (n = this._glyphInfo[t] = [], s.forEach(function (e) {\n        return i.push(e);\n      })), 0 === i.length ? Promise.resolve() : r.invoke(\"getGlyphs\", {\n        tileID: e,\n        font: t,\n        codePoints: i\n      }, _o4).then(function (e) {\n        for (var _t2 = 0; _t2 < e.length; _t2++) e[_t2] && (n[_t2] = e[_t2]);\n      });\n    }\n  }, {\n    key: \"getGlyphItems\",\n    value: function getGlyphItems(e) {\n      return this._glyphInfo[e];\n    }\n  }]);\n  return o;\n}();\nexport { o as default };","map":{"version":3,"names":["isAbortError","e","StyleUpdateType","t","s","r","o","_classCallCheck","_spriteInfo","_glyphInfo","_createClass","key","value","reset","Promise","resolve","getLayers","_this$_styleRepositor","_this$_styleRepositor2","_styleRepository","layers","_createTileAndParse","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_o","i","_i","_Object$keys","_e","_s","n","wrap","_callee$","_context","prev","next","Object","keys","sourceName2DataAndRefKey","length","refKey","parse","abrupt","sent","t0","setObsolete","release","stop","createTileAndParse","_x","_x2","apply","arguments","updateStyle","_iterator","_createForOfIteratorHelper","_step","done","type","data","PAINTER_CHANGED","setPaintProperties","layer","paint","LAYOUT_CHANGED","setLayoutProperties","layout","LAYER_REMOVED","deleteStyleLayer","LAYER_CHANGED","setStyleLayer","index","SPRITES_CHANGED","err","f","setStyle","fetchSprites","_iterator2","_step2","name","push","invoke","signal","then","getSpriteItems","fetchGlyphs","forEach","tileID","font","codePoints","getGlyphItems","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/2d/engine/vectorTiles/WorkerTileHandler.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isAbortError as e}from\"../../../../core/promiseUtils.js\";import{StyleUpdateType as t}from\"./enums.js\";import s from\"./WorkerTile.js\";import r from\"./style/StyleRepository.js\";class o{constructor(){this._spriteInfo={},this._glyphInfo={}}reset(){return this._spriteInfo={},this._glyphInfo={},Promise.resolve()}getLayers(){return this._styleRepository?.layers??[]}async createTileAndParse(t,r){const{key:o}=t,i={};for(const e of Object.keys(t.sourceName2DataAndRefKey)){const s=t.sourceName2DataAndRefKey[e];i[e]=s.refKey}const n=new s(o,i,this,this._styleRepository);try{return await n.parse(t,r)}catch(l){if(n.setObsolete(),n.release(),!e(l))throw l;return null}}updateStyle(e){if(!e||0===e.length||!this._styleRepository)return;const s=this._styleRepository;for(const r of e){const e=r.type,o=r.data;switch(e){case t.PAINTER_CHANGED:s.setPaintProperties(o.layer,o.paint);break;case t.LAYOUT_CHANGED:s.setLayoutProperties(o.layer,o.layout);break;case t.LAYER_REMOVED:s.deleteStyleLayer(o.layer);break;case t.LAYER_CHANGED:s.setStyleLayer(o.layer,o.index);break;case t.SPRITES_CHANGED:this._spriteInfo={}}}}setStyle(e){this._styleRepository=new r(e),this._spriteInfo={},this._glyphInfo={}}fetchSprites(e,t,s){const r=[],o=this._spriteInfo;for(const i of e){void 0===o[i.name]&&r.push(i)}return 0===r.length?Promise.resolve():t.invoke(\"getSprites\",r,{signal:s&&s.signal}).then((e=>{for(const t in e){const s=e[t];o[t]=s}}))}getSpriteItems(){return this._spriteInfo}fetchGlyphs(e,t,s,r,o){const i=[];let n=this._glyphInfo[t];return n?s.forEach((e=>{n[e]||i.push(e)})):(n=this._glyphInfo[t]=[],s.forEach((e=>i.push(e)))),0===i.length?Promise.resolve():r.invoke(\"getGlyphs\",{tileID:e,font:t,codePoints:i},o).then((e=>{for(let t=0;t<e.length;t++)e[t]&&(n[t]=e[t])}))}getGlyphItems(e){return this._glyphInfo[e]}}export{o as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}