{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { bidiText as t } from \"../../core/BidiText.js\";\nimport { getFontFamily as e } from \"../../core/fontUtils.js\";\nimport { clone as r } from \"../../core/lang.js\";\nimport i from \"../../core/Logger.js\";\nimport { isNone as s, isSome as o } from \"../../core/maybe.js\";\nimport n from \"../../core/ObjectPool.js\";\nimport { px2pt as a, pt2px as l } from \"../../core/screenUtils.js\";\nimport { create as h, fromValues as c } from \"../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsXY as m } from \"../../geometry/support/boundsUtils.js\";\nimport { polygonCentroid as f } from \"../../geometry/support/centroid.js\";\nimport { isPoint as u, isPolygon as d, isPolyline as p, isExtent as _, isMultipoint as g } from \"../../geometry/support/jsonUtils.js\";\nimport { SimpleGeometryCursor as y } from \"./CIMEffects.js\";\nimport P from \"./CIMImageColorSubstitutionHelper.js\";\nimport { getEffectOperator as w, getPlacementOperator as x } from \"./CIMOperators.js\";\nimport { Placement as S } from \"./CIMPlacements.js\";\nimport { LineCapStyle as M, LineJoinStyle as b } from \"./enums.js\";\nimport { getFirstFrame as k } from \"./imageUtils.js\";\nimport C from \"./Rect.js\";\nimport I from \"./TextRasterizer.js\";\nimport { isSVGImage as T, fromCIMFontDecoration as R, fromCIMFontStyle as v, fromCIMHorizontalAlignment as z, fromCIMVerticalAlignment as F, getFillColor as L, getStrokeColor as A, getFontStyle as j, getFontWeight as U } from \"./utils.js\";\nimport { HAlign as H, VAlign as B } from \"../../views/2d/engine/webgl/alignmentUtils.js\";\nimport { GLYPH_SIZE as D, MAGIC_LABEL_LINE_HEIGHT as G } from \"../../views/2d/engine/webgl/definitions.js\";\nimport { shapeGlyphs as X } from \"../../views/2d/engine/webgl/mesh/templates/shapingUtils.js\";\nconst E = Math.PI / 180,\n  J = 10,\n  N = i.getLogger(\"esri.symbols.cim.CIMSymbolDrawHelper\");\nclass O {\n  constructor(t) {\n    this._t = t;\n  }\n  static createIdentity() {\n    return new O([1, 0, 0, 0, 1, 0]);\n  }\n  clone() {\n    const t = this._t;\n    return new O(t.slice());\n  }\n  transform(t) {\n    const e = this._t;\n    return [e[0] * t[0] + e[1] * t[1] + e[2], e[3] * t[0] + e[4] * t[1] + e[5]];\n  }\n  static createScale(t, e) {\n    return new O([t, 0, 0, 0, e, 0]);\n  }\n  scale(t, e) {\n    const r = this._t;\n    return r[0] *= t, r[1] *= t, r[2] *= t, r[3] *= e, r[4] *= e, r[5] *= e, this;\n  }\n  scaleRatio() {\n    return Math.sqrt(this._t[0] * this._t[0] + this._t[1] * this._t[1]);\n  }\n  static createTranslate(t, e) {\n    return new O([0, 0, t, 0, 0, e]);\n  }\n  translate(t, e) {\n    const r = this._t;\n    return r[2] += t, r[5] += e, this;\n  }\n  static createRotate(t) {\n    const e = Math.cos(t),\n      r = Math.sin(t);\n    return new O([e, -r, 0, r, e, 0]);\n  }\n  rotate(t) {\n    return O.multiply(this, O.createRotate(t), this);\n  }\n  angle() {\n    const t = this._t[0],\n      e = this._t[3],\n      r = Math.sqrt(t * t + e * e);\n    return [t / r, e / r];\n  }\n  static multiply(t, e, r) {\n    const i = t._t,\n      s = e._t,\n      o = i[0] * s[0] + i[3] * s[1],\n      n = i[1] * s[0] + i[4] * s[1],\n      a = i[2] * s[0] + i[5] * s[1] + s[2],\n      l = i[0] * s[3] + i[3] * s[4],\n      h = i[1] * s[3] + i[4] * s[4],\n      c = i[2] * s[3] + i[5] * s[4] + s[5],\n      m = r._t;\n    return m[0] = o, m[1] = n, m[2] = a, m[3] = l, m[4] = h, m[5] = c, r;\n  }\n  invert() {\n    const t = this._t;\n    let e = t[0] * t[4] - t[1] * t[3];\n    if (0 === e) return new O([0, 0, 0, 0, 0, 0]);\n    e = 1 / e;\n    const r = (t[1] * t[5] - t[2] * t[4]) * e,\n      i = (t[2] * t[3] - t[0] * t[5]) * e,\n      s = t[4] * e,\n      o = -t[1] * e,\n      n = -t[3] * e,\n      a = t[0] * e;\n    return new O([s, o, r, n, a, i]);\n  }\n}\nclass Y {\n  constructor(t, e) {\n    this._resourceManager = t, this._transfos = [], this._sizeTransfos = [], this._geomUnitsPerPoint = 1, this._placementPool = new n(S, void 0, void 0, 100), this._earlyReturn = !1, this._mapRotation = 0, this._transfos.push(e || O.createIdentity()), this._sizeTransfos.push(e ? e.scaleRatio() : 1);\n  }\n  setTransform(t, e) {\n    this._transfos = [t || O.createIdentity()], this._sizeTransfos = [e || (t ? t.scaleRatio() : 1)];\n  }\n  setGeomUnitsPerPoint(t) {\n    this._geomUnitsPerPoint = t;\n  }\n  transformPt(t) {\n    return this._transfos[this._transfos.length - 1].transform(t);\n  }\n  transformSize(t) {\n    return t * this._sizeTransfos[this._sizeTransfos.length - 1];\n  }\n  reverseTransformPt(t) {\n    return this._transfos[this._transfos.length - 1].invert().transform(t);\n  }\n  reverseTransformSize(t) {\n    return t / this._sizeTransfos[this._sizeTransfos.length - 1];\n  }\n  getTransformAngle() {\n    return this._transfos[this._transfos.length - 1].angle();\n  }\n  geomUnitsPerPoint() {\n    return this.isEmbedded() ? 1 : this._geomUnitsPerPoint;\n  }\n  isEmbedded() {\n    return this._transfos.length > 1;\n  }\n  back() {\n    return this._transfos[this._transfos.length - 1];\n  }\n  push(t, e) {\n    const r = e ? t.scaleRatio() : 1;\n    O.multiply(t, this.back(), t), this._transfos.push(t), this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length - 1] * r);\n  }\n  pop() {\n    this._transfos.splice(-1, 1), this._sizeTransfos.splice(-1, 1);\n  }\n  drawSymbol(t, e, r) {\n    if (t) switch (t.type) {\n      case \"CIMPointSymbol\":\n      case \"CIMLineSymbol\":\n      case \"CIMPolygonSymbol\":\n        this.drawMultiLayerSymbol(t, e);\n        break;\n      case \"CIMTextSymbol\":\n        this.drawTextSymbol(t, e, r);\n    }\n  }\n  drawMultiLayerSymbol(t, e) {\n    if (!t || !e) return;\n    const r = t.symbolLayers;\n    if (!r) return;\n    const i = t.effects;\n    if (i && i.length > 0) {\n      const t = this.executeEffects(i, e);\n      if (t) {\n        let e = t.next();\n        for (; e;) this.drawSymbolLayers(r, e), e = t.next();\n      }\n    } else this.drawSymbolLayers(r, e);\n  }\n  executeEffects(t, e) {\n    const r = this._resourceManager.geometryEngine;\n    let i = new y(e);\n    for (const s of t) {\n      const t = w(s);\n      t && (i = t.execute(i, s, this.geomUnitsPerPoint(), null, r));\n    }\n    return i;\n  }\n  drawSymbolLayers(t, e) {\n    let r = t.length;\n    for (; r--;) {\n      const i = t[r];\n      if (!i || !1 === i.enable) continue;\n      const s = i.effects;\n      if (s && s.length > 0) {\n        const t = this.executeEffects(s, e);\n        if (t) {\n          let e = null;\n          for (; (e = t.next()) && (this.drawSymbolLayer(i, e), !this._earlyReturn););\n        }\n      } else this.drawSymbolLayer(i, e);\n      if (this._earlyReturn) return;\n    }\n  }\n  drawSymbolLayer(t, e) {\n    switch (t.type) {\n      case \"CIMSolidFill\":\n        this.drawSolidFill(e, t.color);\n        break;\n      case \"CIMHatchFill\":\n        this.drawHatchFill(e, t);\n        break;\n      case \"CIMPictureFill\":\n        this.drawPictureFill(e, t);\n        break;\n      case \"CIMGradientFill\":\n        this.drawGradientFill(e, t);\n        break;\n      case \"CIMSolidStroke\":\n        this.drawSolidStroke(e, t.color, t.width, t.capStyle, t.joinStyle, t.miterLimit);\n        break;\n      case \"CIMPictureStroke\":\n        this.drawPictureStroke(e, t);\n        break;\n      case \"CIMGradientStroke\":\n        this.drawGradientStroke(e, t);\n        break;\n      case \"CIMCharacterMarker\":\n      case \"CIMPictureMarker\":\n      case \"CIMVectorMarker\":\n        this.drawMarkerLayer(t, e);\n    }\n  }\n  drawHatchFill(t, e) {\n    const r = this._buildHatchPolyline(e, t, this.geomUnitsPerPoint());\n    r && (this.pushClipPath(t), this.drawMultiLayerSymbol(e.lineSymbol, r), this.popClipPath());\n  }\n  drawPictureFill(t, e) {}\n  drawGradientFill(t, e) {}\n  drawPictureStroke(t, e) {}\n  drawGradientStroke(t, e) {}\n  drawMarkerLayer(t, e) {\n    const r = t.markerPlacement;\n    if (r) {\n      const i = x(r);\n      if (i) {\n        const s = \"CIMMarkerPlacementInsidePolygon\" === r.type || \"CIMMarkerPlacementPolygonCenter\" === r.type && r.clipAtBoundary;\n        s && this.pushClipPath(e);\n        const o = i.execute(e, r, this.geomUnitsPerPoint(), null, this._resourceManager.geometryEngine);\n        if (o) {\n          let e = null;\n          for (; (e = o.next()) && (this.drawMarker(t, e), !this._earlyReturn););\n        }\n        s && this.popClipPath();\n      }\n    } else {\n      const r = this._placementPool.acquire();\n      if (u(e)) r.tx = e.x, r.ty = e.y, this.drawMarker(t, r);else if (d(e)) {\n        const i = f(e);\n        i && ([r.tx, r.ty] = i, this.drawMarker(t, r));\n      } else for (const i of e.points) if (r.tx = i[0], r.ty = i[1], this.drawMarker(t, r), this._earlyReturn) break;\n      this._placementPool.release(r);\n    }\n  }\n  drawMarker(t, e) {\n    switch (t.type) {\n      case \"CIMCharacterMarker\":\n      case \"CIMPictureMarker\":\n        this.drawPictureMarker(t, e);\n        break;\n      case \"CIMVectorMarker\":\n        this.drawVectorMarker(t, e);\n    }\n  }\n  drawPictureMarker(t, e) {\n    if (!t) return;\n    const r = this._resourceManager.getResource(t.url),\n      i = t.size ?? 10;\n    if (s(r) || i <= 0) return;\n    const o = r.width,\n      n = r.height;\n    if (!o || !n) return;\n    const a = o / n,\n      l = t.scaleX ?? 1,\n      h = O.createIdentity(),\n      c = t.anchorPoint;\n    if (c) {\n      let e = c.x,\n        r = c.y;\n      \"Absolute\" !== t.anchorPointUnits && (e *= i * a * l, r *= i), h.translate(-e, -r);\n    }\n    let m = t.rotation ?? 0;\n    t.rotateClockwise && (m = -m), this._mapRotation && (m += this._mapRotation), m && h.rotate(m * E);\n    let f = t.offsetX ?? 0,\n      u = t.offsetY ?? 0;\n    if (f || u) {\n      if (this._mapRotation) {\n        const t = E * this._mapRotation,\n          e = Math.cos(t),\n          r = Math.sin(t),\n          i = f * r + u * e;\n        f = f * e - u * r, u = i;\n      }\n      h.translate(f, u);\n    }\n    const d = this.geomUnitsPerPoint();\n    1 !== d && h.scale(d, d);\n    const p = e.getAngle();\n    p && h.rotate(p), h.translate(e.tx, e.ty), this.push(h, !1), this.drawImage(t, i), this.pop();\n  }\n  drawVectorMarker(t, e) {\n    if (!t) return;\n    const r = t.markerGraphics;\n    if (!r) return;\n    const i = t.size ?? 10,\n      s = t.frame,\n      o = s ? s.ymax - s.ymin : 0,\n      n = i && o ? i / o : 1,\n      a = O.createIdentity();\n    s && a.translate(.5 * -(s.xmax + s.xmin), .5 * -(s.ymax + s.ymin));\n    const l = t.anchorPoint;\n    if (l) {\n      let e = l.x,\n        r = l.y;\n      \"Absolute\" !== t.anchorPointUnits ? s && (e *= s.xmax - s.xmin, r *= s.ymax - s.ymin) : (e /= n, r /= n), a.translate(-e, -r);\n    }\n    1 !== n && a.scale(n, n);\n    let h = t.rotation ?? 0;\n    t.rotateClockwise && (h = -h), this._mapRotation && (h += this._mapRotation), h && a.rotate(h * E);\n    let c = t.offsetX ?? 0,\n      m = t.offsetY ?? 0;\n    if (c || m) {\n      if (this._mapRotation) {\n        const t = E * this._mapRotation,\n          e = Math.cos(t),\n          r = Math.sin(t),\n          i = c * r + m * e;\n        c = c * e - m * r, m = i;\n      }\n      a.translate(c, m);\n    }\n    const f = this.geomUnitsPerPoint();\n    1 !== f && a.scale(f, f);\n    const u = e.getAngle();\n    u && a.rotate(u), a.translate(e.tx, e.ty), this.push(a, t.scaleSymbolsProportionally);\n    for (const d of r) if (d && d.symbol && d.geometry || N.error(\"Invalid marker graphic\", d), this.drawSymbol(d.symbol, d.geometry, d.textString), this._earlyReturn) break;\n    this.pop();\n  }\n  drawTextSymbol(t, e, r) {\n    if (!t) return;\n    if (!u(e)) return;\n    if ((t.height ?? 10) <= 0) return;\n    const i = O.createIdentity();\n    let s = t.angle ?? 0;\n    s = -s, s && i.rotate(s * E);\n    const o = t.offsetX ?? 0,\n      n = t.offsetY ?? 0;\n    (o || n) && i.translate(o, n);\n    const a = this.geomUnitsPerPoint();\n    1 !== a && i.scale(a, a), i.translate(e.x, e.y), this.push(i, !1), this.drawText(t, r), this.pop();\n  }\n  _buildHatchPolyline(t, e, r) {\n    let i = (void 0 !== t.separation ? t.separation : 4) * r,\n      s = void 0 !== t.rotation ? t.rotation : 0;\n    if (0 === i) return null;\n    i < 0 && (i = -i);\n    let o = 0;\n    const n = .5 * i;\n    for (; o > n;) o -= i;\n    for (; o < -n;) o += i;\n    const a = h();\n    m(a, e), a[0] -= n, a[1] -= n, a[2] += n, a[3] += n;\n    const l = [[a[0], a[1]], [a[0], a[3]], [a[2], a[3]], [a[2], a[1]]];\n    for (; s > 180;) s -= 180;\n    for (; s < 0;) s += 180;\n    const c = Math.cos(s * E),\n      f = Math.sin(s * E),\n      u = -i * f,\n      d = i * c;\n    let p, _, g, y;\n    o = (void 0 !== t.offsetX ? t.offsetX * r : 0) * f - (void 0 !== t.offsetY ? t.offsetY * r : 0) * c, p = g = Number.MAX_VALUE, _ = y = -Number.MAX_VALUE;\n    for (const h of l) {\n      const t = h[0],\n        e = h[1],\n        r = c * t + f * e,\n        i = -f * t + c * e;\n      p = Math.min(p, r), g = Math.min(g, i), _ = Math.max(_, r), y = Math.max(y, i);\n    }\n    g = Math.floor(g / i) * i;\n    let P = c * p - f * g - u * o / i,\n      w = f * p + c * g - d * o / i,\n      x = c * _ - f * g - u * o / i,\n      S = f * _ + c * g - d * o / i;\n    const M = 1 + Math.round((y - g) / i),\n      b = [];\n    for (let h = 0; h < M; h++) P += u, w += d, x += u, S += d, b.push([[P, w], [x, S]]);\n    return {\n      paths: b\n    };\n  }\n}\nclass q extends Y {\n  constructor(t, e) {\n    super(t, e), this.reset();\n  }\n  reset() {\n    this._xmin = this._ymin = 1 / 0, this._xmax = this._ymax = -1 / 0, this._clipCount = 0;\n  }\n  envelope() {\n    return new C(this._xmin, this._ymin, this._xmax - this._xmin, this._ymax - this._ymin);\n  }\n  bounds() {\n    return c(this._xmin, this._ymin, this._xmax, this._ymax);\n  }\n  drawSolidFill(t) {\n    if (t && !(this._clipCount > 0)) if (d(t)) this._processPath(t.rings, 0);else if (p(t)) this._processPath(t.paths, 0);else if (_(t)) {\n      const e = Q(t);\n      e && this._processPath(e.rings, 0);\n    } else console.error(\"drawSolidFill Unexpected geometry type!\");\n  }\n  drawSolidStroke(t, e, r) {\n    if (!t || this._clipCount > 0) return;\n    const i = .5 * this.transformSize(r ?? 0);\n    if (d(t)) this._processPath(t.rings, i);else if (p(t)) this._processPath(t.paths, i);else if (_(t)) {\n      const e = Q(t);\n      e && this._processPath(e.rings, i);\n    } else console.error(\"drawSolidStroke unexpected geometry type!\");\n  }\n  drawMarkerLayer(t, e) {\n    d(e) && t.markerPlacement && (\"CIMMarkerPlacementInsidePolygon\" === t.markerPlacement.type || \"CIMMarkerPlacementPolygonCenter\" === t.markerPlacement.type && t.markerPlacement.clipAtBoundary) ? this._processPath(e.rings, 0) : super.drawMarkerLayer(t, e);\n  }\n  drawHatchFill(t, e) {\n    this.drawSolidFill(t);\n  }\n  drawPictureFill(t, e) {\n    this.drawSolidFill(t);\n  }\n  drawGradientFill(t, e) {\n    this.drawSolidFill(t);\n  }\n  drawPictureStroke(t, e) {\n    this.drawSolidStroke(t, null, e.width);\n  }\n  drawGradientStroke(t, e) {\n    this.drawSolidStroke(t, null, e.width);\n  }\n  pushClipPath(t) {\n    this.drawSolidFill(t), this._clipCount++;\n  }\n  popClipPath() {\n    this._clipCount--;\n  }\n  drawImage(t, e) {\n    const {\n        url: r\n      } = t,\n      i = t.scaleX ?? 1;\n    let s = i * e,\n      n = e;\n    const a = this._resourceManager.getResource(r);\n    !e && o(a) && (s = i * a.width, n = a.height), this._merge(this.transformPt([-s / 2, -n / 2]), 0), this._merge(this.transformPt([-s / 2, n / 2]), 0), this._merge(this.transformPt([s / 2, -n / 2]), 0), this._merge(this.transformPt([s / 2, n / 2]), 0);\n  }\n  drawText(t, e) {\n    if (!e || 0 === e.length) return;\n    this._textRasterizer || (this._textRasterizer = new I());\n    const r = et(t),\n      [i, s] = this._textRasterizer.computeTextSize(e, r);\n    let o = 0;\n    switch (t.horizontalAlignment) {\n      case \"Left\":\n        o = i / 2;\n        break;\n      case \"Right\":\n        o = -i / 2;\n    }\n    let n = 0;\n    switch (t.verticalAlignment) {\n      case \"Bottom\":\n        n = s / 2;\n        break;\n      case \"Top\":\n        n = -s / 2;\n        break;\n      case \"Baseline\":\n        n = s / 6;\n    }\n    this._merge(this.transformPt([-i / 2 + o, -s / 2 + n]), 0), this._merge(this.transformPt([-i / 2 + o, s / 2 + n]), 0), this._merge(this.transformPt([i / 2 + o, -s / 2 + n]), 0), this._merge(this.transformPt([i / 2 + o, s / 2 + n]), 0);\n  }\n  _processPath(t, e) {\n    if (t) for (const r of t) {\n      const t = r ? r.length : 0;\n      if (t > 1) {\n        this._merge(this.transformPt(r[0]), e);\n        for (let i = 1; i < t; i++) this._merge(this.transformPt(r[i]), e);\n      }\n    }\n  }\n  _merge(t, e) {\n    t[0] - e < this._xmin && (this._xmin = t[0] - e), t[0] + e > this._xmax && (this._xmax = t[0] + e), t[1] - e < this._ymin && (this._ymin = t[1] - e), t[1] + e > this._ymax && (this._ymax = t[1] + e);\n  }\n}\nclass V extends Y {\n  constructor() {\n    super(...arguments), this._searchPoint = [0, 0], this._searchDistPoint = 0, this._textInfo = null;\n  }\n  hitTest(t, e, r, i, s, o) {\n    const n = o * l(1);\n    this.setTransform(), this.setGeomUnitsPerPoint(n), this._searchPoint = [(t[0] + t[2]) / 2, (t[1] + t[3]) / 2], this._searchDistPoint = (t[2] - t[0]) / 2 / n, this._textInfo = i;\n    const a = e && (\"CIMPointSymbol\" === e.type && \"Map\" !== e.angleAlignment || \"CIMTextSymbol\" === e.type);\n    return this._mapRotation = a ? s : 0, this._earlyReturn = !1, this.drawSymbol(e, r), this._earlyReturn;\n  }\n  drawSolidFill(t, e) {\n    this._hitTestFill(t);\n  }\n  drawHatchFill(t, e) {\n    this._hitTestFill(t);\n  }\n  drawPictureFill(t, e) {\n    this._hitTestFill(t);\n  }\n  drawGradientFill(t, e) {\n    this._hitTestFill(t);\n  }\n  drawSolidStroke(t, e, r, i, s, o) {\n    this._hitTestStroke(t, r);\n  }\n  drawPictureStroke(t, e) {\n    this._hitTestStroke(t, e.width);\n  }\n  drawGradientStroke(t, e) {\n    this._hitTestStroke(t, e.width);\n  }\n  drawMarkerLayer(t, e) {\n    t.markerPlacement && (\"CIMMarkerPlacementInsidePolygon\" === t.markerPlacement.type || \"CIMMarkerPlacementPolygonCenter\" === t.markerPlacement.type && t.markerPlacement.clipAtBoundary) ? this._hitTestFill(e) : super.drawMarkerLayer(t, e);\n  }\n  pushClipPath(t) {}\n  popClipPath() {}\n  drawImage(t, e) {\n    const {\n        url: r\n      } = t,\n      i = t.scaleX ?? 1,\n      o = this._resourceManager.getResource(r);\n    if (s(o) || 0 === o.height || 0 === e) return;\n    const n = e * this.geomUnitsPerPoint(),\n      a = n * i * (o.width / o.height),\n      l = this.reverseTransformPt(this._searchPoint),\n      h = this._searchDistPoint;\n    Math.abs(l[0]) < a / 2 + h && Math.abs(l[1]) < n / 2 + h && (this._earlyReturn = !0);\n  }\n  drawText(e, r) {\n    const i = this._textInfo;\n    if (!i) return;\n    const s = i.get(e);\n    if (!s) return;\n    const {\n      text: o,\n      mosaicItem: n\n    } = s;\n    if (!n?.glyphMosaicItems?.length) return;\n    const a = e.height ?? J,\n      {\n        lineGapType: l,\n        lineGap: h\n      } = e,\n      c = l ? tt(l, h ?? 0, a) : 0,\n      m = t(o)[1],\n      f = n.glyphMosaicItems,\n      u = \"CIMBackgroundCallout\" === e.callout?.type,\n      d = X(f, m, {\n        scale: a / D,\n        angle: 0,\n        xOffset: 0,\n        yOffset: 0,\n        hAlign: Z(e.horizontalAlignment),\n        vAlign: $(e.verticalAlignment),\n        maxLineWidth: 512,\n        lineHeight: G * Math.max(.25, Math.min(c || 1, 4)),\n        decoration: e.font.decoration || \"none\",\n        isCIM: !0,\n        hasBackground: u\n      }),\n      p = this.reverseTransformPt(this._searchPoint),\n      _ = p[0],\n      g = p[1];\n    for (const t of d.glyphs) if (_ > t.xTopLeft && _ < t.xBottomRight && g > -t.yBottomRight && g < -t.yTopLeft) {\n      this._earlyReturn = !0;\n      break;\n    }\n  }\n  _hitTestFill(t) {\n    let e = null;\n    if (_(t)) {\n      const r = t;\n      e = [[[r.xmin, r.ymin], [r.xmin, r.ymax], [r.xmax, r.ymax], [r.xmax, r.ymin], [r.xmin, r.ymin]]];\n    } else if (d(t)) e = t.rings;else {\n      if (!p(t)) return;\n      e = t.paths;\n    }\n    const r = this.reverseTransformPt(this._searchPoint);\n    if (this._pointInPolygon(r, e) && (this._earlyReturn = !0), !this._earlyReturn) {\n      const t = this.reverseTransformSize(this._searchDistPoint) * this.geomUnitsPerPoint();\n      this._nearLine(r, e, t) && (this._earlyReturn = !0);\n    }\n  }\n  _hitTestStroke(t, e) {\n    let r = null;\n    if (_(t)) {\n      const e = t;\n      r = [[[e.xmin, e.ymin], [e.xmin, e.ymax], [e.xmax, e.ymax], [e.xmax, e.ymin], [e.xmin, e.ymin]]];\n    } else if (d(t)) r = t.rings;else {\n      if (!p(t)) return;\n      r = t.paths;\n    }\n    const i = this.reverseTransformPt(this._searchPoint),\n      s = (e ?? 0) * this.geomUnitsPerPoint(),\n      o = this.reverseTransformSize(this._searchDistPoint) * this.geomUnitsPerPoint();\n    this._nearLine(i, r, s / 2 + o) && (this._earlyReturn = !0);\n  }\n  _pointInPolygon(t, e) {\n    let r = 0;\n    for (const i of e) {\n      const e = i.length;\n      for (let s = 1; s < e; s++) {\n        const e = i[s - 1],\n          o = i[s];\n        if (e[1] > t[1] == o[1] > t[1]) continue;\n        (o[0] - e[0]) * (t[1] - e[1]) - (o[1] - e[1]) * (t[0] - e[0]) > 0 ? r++ : r--;\n      }\n    }\n    return 0 !== r;\n  }\n  _nearLine(t, e, r) {\n    for (const i of e) {\n      const e = i.length;\n      for (let s = 1; s < e; s++) {\n        const e = i[s - 1],\n          o = i[s];\n        let n = (o[0] - e[0]) * (o[0] - e[0]) + (o[1] - e[1]) * (o[1] - e[1]);\n        if (0 === n) continue;\n        n = Math.sqrt(n);\n        const a = ((o[0] - e[0]) * (t[1] - e[1]) - (o[1] - e[1]) * (t[0] - e[0])) / n;\n        if (Math.abs(a) < r) {\n          const i = ((o[0] - e[0]) * (t[0] - e[0]) + (o[1] - e[1]) * (t[1] - e[1])) / n;\n          if (i > -r && i < n + r) return !0;\n        }\n      }\n    }\n    return !1;\n  }\n}\nclass W extends Y {\n  constructor(t, e, r, i) {\n    super(e, r), this._applyAdditionalRenderProps = i, this._colorSubstitutionHelper = new P(), this._ctx = t;\n  }\n  drawSolidFill(t, e) {\n    if (!t) return;\n    if (d(t)) this._buildPath(t.rings, !0);else if (p(t)) this._buildPath(t.paths, !0);else if (_(t)) this._buildPath(Q(t).rings, !0);else {\n      if (!g(t)) return;\n      console.log(\"CanvasDrawHelper.drawSolidFill - No implementation!\");\n    }\n    const r = this._ctx;\n    r.fillStyle = \"string\" == typeof e ? e : \"rgba(\" + Math.round(e[0]) + \",\" + Math.round(e[1]) + \",\" + Math.round(e[2]) + \",\" + (e[3] ?? 255) / 255 + \")\", r.fill(\"evenodd\");\n  }\n  drawSolidStroke(t, e, r, i, s, o) {\n    if (!t || !e || 0 === r) return;\n    if (d(t)) this._buildPath(t.rings, !0);else if (p(t)) this._buildPath(t.paths, !1);else {\n      if (!_(t)) return void console.log(\"CanvasDrawHelper.drawSolidStroke isn't implemented!\");\n      this._buildPath(Q(t).rings, !0);\n    }\n    const n = this._ctx;\n    n.strokeStyle = \"string\" == typeof e ? e : \"rgba(\" + Math.round(e[0]) + \",\" + Math.round(e[1]) + \",\" + Math.round(e[2]) + \",\" + (e[3] ?? 255) / 255 + \")\", n.lineWidth = Math.max(this.transformSize(r), .5), this._setCapStyle(i), this._setJoinStyle(s), n.miterLimit = o, n.stroke();\n  }\n  pushClipPath(t) {\n    if (this._ctx.save(), d(t)) this._buildPath(t.rings, !0);else if (p(t)) this._buildPath(t.paths, !0);else {\n      if (!_(t)) return;\n      this._buildPath(Q(t).rings, !0);\n    }\n    this._ctx.clip(\"evenodd\");\n  }\n  popClipPath() {\n    this._ctx.restore();\n  }\n  drawImage(t, e) {\n    const {\n        colorSubstitutions: r,\n        url: i,\n        tintColor: o\n      } = t,\n      n = t.scaleX ?? 1,\n      a = this._resourceManager.getResource(i);\n    if (s(a)) return;\n    let l = e * (a.width / a.height),\n      h = e;\n    e || (l = a.width, h = a.height);\n    const c = T(i) || \"src\" in a && T(a.src);\n    let m = \"getFrame\" in a ? k(a) : a;\n    r && (m = this._colorSubstitutionHelper.applyColorSubstituition(m, r)), this._applyAdditionalRenderProps && !c && o && (m = this._colorSubstitutionHelper.tintImageData(m, o));\n    const f = this.transformPt([0, 0]),\n      [u, d] = this.getTransformAngle(),\n      p = this.transformSize(1),\n      _ = this._ctx;\n    _.save(), _.setTransform({\n      m11: n * p * u,\n      m12: n * p * d,\n      m21: -p * d,\n      m22: p * u,\n      m41: f[0],\n      m42: f[1]\n    }), _.drawImage(m, -l / 2, -h / 2, l, h), _.restore();\n  }\n  drawText(t, e) {\n    if (!e || 0 === e.length) return;\n    this._textRasterizer || (this._textRasterizer = new I());\n    const r = et(t);\n    r.size *= this.transformSize(a(1));\n    const i = this._textRasterizer.rasterizeText(e, r);\n    if (!i) return;\n    const {\n        size: s,\n        anchorX: o,\n        anchorY: n,\n        canvas: l\n      } = i,\n      h = s[0] * (o + .5),\n      c = s[1] * (n - .5),\n      m = this._ctx,\n      f = this.transformPt([0, 0]),\n      [u, d] = this.getTransformAngle(),\n      p = 1;\n    m.save(), m.setTransform({\n      m11: p * u,\n      m12: p * d,\n      m21: -p * d,\n      m22: p * u,\n      m41: f[0] - p * h,\n      m42: f[1] + p * c\n    }), m.drawImage(l, 0, 0), m.restore();\n  }\n  drawPictureFill(t, e) {\n    if (!t) return;\n    let {\n      colorSubstitutions: r,\n      height: i,\n      offsetX: o,\n      offsetY: n,\n      rotation: a,\n      scaleX: l,\n      tintColor: h,\n      url: c\n    } = e;\n    const m = this._resourceManager.getResource(c);\n    if (s(m)) return;\n    if (d(t)) this._buildPath(t.rings, !0);else if (p(t)) this._buildPath(t.paths, !0);else if (_(t)) this._buildPath(Q(t).rings, !0);else {\n      if (!g(t)) return;\n      console.log(\"CanvasDrawHelper.drawPictureFill - No implementation!\");\n    }\n    const f = this._ctx,\n      u = T(c) || \"src\" in m && T(m.src);\n    let y,\n      P = \"getFrame\" in m ? k(m) : m;\n    if (r && (P = this._colorSubstitutionHelper.applyColorSubstituition(P, r)), this._applyAdditionalRenderProps) {\n      u || h && (P = this._colorSubstitutionHelper.tintImageData(P, h)), y = f.createPattern(P, \"repeat\");\n      const t = this.transformSize(1);\n      a || (a = 0), o ? o *= t : o = 0, n ? n *= t : n = 0, i && (i *= t);\n      const e = i ? i / m.height : 1,\n        r = l && i ? l * i / m.width : 1;\n      if (0 !== a || 1 !== e || 1 !== r || 0 !== o || 0 !== n) {\n        const t = new DOMMatrix();\n        t.rotateSelf(0, 0, -a).translateSelf(o, n).scaleSelf(r, e, 1), y.setTransform(t);\n      }\n    } else y = f.createPattern(P, \"repeat\");\n    f.save(), f.fillStyle = y, f.fill(\"evenodd\"), f.restore();\n  }\n  drawPictureStroke(t, e) {\n    if (!t) return;\n    let {\n      colorSubstitutions: i,\n      capStyle: o,\n      joinStyle: n,\n      miterLimit: a,\n      tintColor: h,\n      url: c,\n      width: m\n    } = e;\n    const f = this._resourceManager.getResource(c);\n    if (s(f)) return;\n    let u;\n    if (d(t)) u = t.rings;else if (p(t)) u = t.paths;else {\n      if (!_(t)) return g(t) ? void console.log(\"CanvasDrawHelper.drawPictureStroke - No implementation!\") : void 0;\n      u = Q(t).rings;\n    }\n    m || (m = f.width);\n    const y = T(c) || \"src\" in f && T(f.src);\n    let P = \"getFrame\" in f ? k(f) : f;\n    i && (P = this._colorSubstitutionHelper.applyColorSubstituition(P, i)), this._applyAdditionalRenderProps && (y || h && (P = this._colorSubstitutionHelper.tintImageData(P, h)));\n    const w = Math.max(this.transformSize(l(m)), .5),\n      x = w / P.width,\n      S = this._ctx,\n      M = S.createPattern(P, \"repeat-y\");\n    let b, C;\n    S.save(), this._setCapStyle(o), this._setJoinStyle(n), void 0 !== a && (S.miterLimit = a), S.lineWidth = w;\n    for (let s of u) if (s = r(s), it(s), s && !(s.length <= 1)) {\n      b = this.transformPt(s[0]);\n      for (let t = 1; t < s.length; t++) {\n        C = this.transformPt(s[t]);\n        const e = K(b, C),\n          r = new DOMMatrix();\n        r.translateSelf(0, b[1] - w / 2).scaleSelf(x, x, 1).rotateSelf(0, 0, 90 - e), M.setTransform(r), S.strokeStyle = M, S.beginPath(), S.moveTo(b[0], b[1]), S.lineTo(C[0], C[1]), S.stroke(), b = C;\n      }\n    }\n    S.restore();\n  }\n  _buildPath(t, e) {\n    const r = this._ctx;\n    if (r.beginPath(), t) for (const i of t) {\n      const t = i ? i.length : 0;\n      if (t > 1) {\n        let s = this.transformPt(i[0]);\n        r.moveTo(s[0], s[1]);\n        for (let e = 1; e < t; e++) s = this.transformPt(i[e]), r.lineTo(s[0], s[1]);\n        e && r.closePath();\n      }\n    }\n  }\n  _setCapStyle(t) {\n    switch (t) {\n      case M.Butt:\n        this._ctx.lineCap = \"butt\";\n        break;\n      case M.Round:\n        this._ctx.lineCap = \"round\";\n        break;\n      case M.Square:\n        this._ctx.lineCap = \"square\";\n    }\n  }\n  _setJoinStyle(t) {\n    switch (t) {\n      case b.Bevel:\n        this._ctx.lineJoin = \"bevel\";\n        break;\n      case b.Round:\n        this._ctx.lineJoin = \"round\";\n        break;\n      case b.Miter:\n        this._ctx.lineJoin = \"miter\";\n    }\n  }\n}\nfunction K(t, e) {\n  const r = e[0] - t[0],\n    i = e[1] - t[1];\n  return 180 / Math.PI * Math.atan2(i, r);\n}\nconst Q = t => t ? {\n    spatialReference: t.spatialReference,\n    rings: [[[t.xmin, t.ymin], [t.xmin, t.ymax], [t.xmax, t.ymax], [t.xmax, t.ymin], [t.xmin, t.ymin]]]\n  } : null,\n  Z = t => {\n    switch (t) {\n      case \"Left\":\n        return H.Left;\n      case \"Right\":\n        return H.Right;\n      case \"Center\":\n        return H.Center;\n      case \"Justify\":\n        return N.warnOnce(\"Horizontal alignment 'justify' is not implemented. Falling back to 'center'.\"), H.Center;\n    }\n  },\n  $ = t => {\n    switch (t) {\n      case \"Top\":\n        return B.Top;\n      case \"Center\":\n        return B.Center;\n      case \"Bottom\":\n        return B.Bottom;\n      case \"Baseline\":\n        return B.Baseline;\n    }\n  },\n  tt = (t, e, r) => {\n    switch (t) {\n      case \"ExtraLeading\":\n        return 1 + e / r;\n      case \"Multiple\":\n        return e;\n      case \"Exact\":\n        return e / r;\n    }\n  };\nfunction et(t) {\n  let r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  const i = R(t),\n    s = v(t.fontStyleName),\n    o = e(t.fontFamilyName),\n    {\n      weight: n,\n      style: a\n    } = s,\n    l = r * (t.height || 5),\n    h = z(t.horizontalAlignment),\n    c = F(t.verticalAlignment),\n    m = L(t),\n    f = A(t.haloSymbol),\n    u = f ? r * (0 | t.haloSize) : 0;\n  return {\n    color: m,\n    size: l,\n    horizontalAlignment: h,\n    verticalAlignment: c,\n    font: {\n      family: o,\n      style: j(a),\n      weight: U(n),\n      decoration: i\n    },\n    halo: {\n      size: u || 0,\n      color: f,\n      style: a\n    },\n    pixelRatio: 1,\n    premultiplyColors: !0\n  };\n}\nconst rt = 1e-4;\nfunction it(t) {\n  let e,\n    r,\n    i,\n    s,\n    o,\n    n = t[0],\n    a = 1;\n  for (; a < t.length;) e = t[a][0] - n[0], r = t[a][1] - n[1], s = 0 !== e ? r / e : Math.PI / 2, void 0 !== i && s - i <= rt ? (t.splice(a - 1, 1), n = o) : (o = n, n = t[a], a++), i = s;\n}\nexport { Y as CIMSymbolDrawHelper, E as C_DEG_TO_RAD, W as CanvasDrawHelper, q as EnvDrawHelper, V as HittestDrawHelper, O as Transformation, Z as horizontalAlignment2HAlign, tt as lineGapType2LineHeight, $ as verticalAlignment2VAlign };","map":{"version":3,"names":["bidiText","t","getFontFamily","e","clone","r","i","isNone","s","isSome","o","n","px2pt","a","pt2px","l","create","h","fromValues","c","getBoundsXY","m","polygonCentroid","f","isPoint","u","isPolygon","d","isPolyline","p","isExtent","_","isMultipoint","g","SimpleGeometryCursor","y","P","getEffectOperator","w","getPlacementOperator","x","Placement","S","LineCapStyle","M","LineJoinStyle","b","getFirstFrame","k","C","I","isSVGImage","T","fromCIMFontDecoration","R","fromCIMFontStyle","v","fromCIMHorizontalAlignment","z","fromCIMVerticalAlignment","F","getFillColor","L","getStrokeColor","A","getFontStyle","j","getFontWeight","U","HAlign","H","VAlign","B","GLYPH_SIZE","D","MAGIC_LABEL_LINE_HEIGHT","G","shapeGlyphs","X","E","Math","PI","J","N","getLogger","O","constructor","_t","createIdentity","slice","transform","createScale","scale","scaleRatio","sqrt","createTranslate","translate","createRotate","cos","sin","rotate","multiply","angle","invert","Y","_resourceManager","_transfos","_sizeTransfos","_geomUnitsPerPoint","_placementPool","_earlyReturn","_mapRotation","push","setTransform","setGeomUnitsPerPoint","transformPt","length","transformSize","reverseTransformPt","reverseTransformSize","getTransformAngle","geomUnitsPerPoint","isEmbedded","back","pop","splice","drawSymbol","type","drawMultiLayerSymbol","drawTextSymbol","symbolLayers","effects","executeEffects","next","drawSymbolLayers","geometryEngine","execute","enable","drawSymbolLayer","drawSolidFill","color","drawHatchFill","drawPictureFill","drawGradientFill","drawSolidStroke","width","capStyle","joinStyle","miterLimit","drawPictureStroke","drawGradientStroke","drawMarkerLayer","_buildHatchPolyline","pushClipPath","lineSymbol","popClipPath","markerPlacement","clipAtBoundary","drawMarker","acquire","tx","ty","points","release","drawPictureMarker","drawVectorMarker","getResource","url","size","height","scaleX","anchorPoint","anchorPointUnits","rotation","rotateClockwise","offsetX","offsetY","getAngle","drawImage","markerGraphics","frame","ymax","ymin","xmax","xmin","scaleSymbolsProportionally","symbol","geometry","error","textString","drawText","separation","Number","MAX_VALUE","min","max","floor","round","paths","q","reset","_xmin","_ymin","_xmax","_ymax","_clipCount","envelope","bounds","_processPath","rings","Q","console","_merge","_textRasterizer","et","computeTextSize","horizontalAlignment","verticalAlignment","V","arguments","_searchPoint","_searchDistPoint","_textInfo","hitTest","angleAlignment","_hitTestFill","_hitTestStroke","abs","get","text","mosaicItem","glyphMosaicItems","lineGapType","lineGap","tt","callout","xOffset","yOffset","hAlign","Z","vAlign","$","maxLineWidth","lineHeight","decoration","font","isCIM","hasBackground","glyphs","xTopLeft","xBottomRight","yBottomRight","yTopLeft","_pointInPolygon","_nearLine","W","_applyAdditionalRenderProps","_colorSubstitutionHelper","_ctx","_buildPath","log","fillStyle","fill","strokeStyle","lineWidth","_setCapStyle","_setJoinStyle","stroke","save","clip","restore","colorSubstitutions","tintColor","src","applyColorSubstituition","tintImageData","m11","m12","m21","m22","m41","m42","rasterizeText","anchorX","anchorY","canvas","createPattern","DOMMatrix","rotateSelf","translateSelf","scaleSelf","it","K","beginPath","moveTo","lineTo","closePath","Butt","lineCap","Round","Square","Bevel","lineJoin","Miter","atan2","spatialReference","Left","Right","Center","warnOnce","Top","Bottom","Baseline","undefined","fontStyleName","fontFamilyName","weight","style","haloSymbol","haloSize","family","halo","pixelRatio","premultiplyColors","rt","CIMSymbolDrawHelper","C_DEG_TO_RAD","CanvasDrawHelper","EnvDrawHelper","HittestDrawHelper","Transformation","horizontalAlignment2HAlign","lineGapType2LineHeight","verticalAlignment2VAlign"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/symbols/cim/CIMSymbolDrawHelper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{bidiText as t}from\"../../core/BidiText.js\";import{getFontFamily as e}from\"../../core/fontUtils.js\";import{clone as r}from\"../../core/lang.js\";import i from\"../../core/Logger.js\";import{isNone as s,isSome as o}from\"../../core/maybe.js\";import n from\"../../core/ObjectPool.js\";import{px2pt as a,pt2px as l}from\"../../core/screenUtils.js\";import{create as h,fromValues as c}from\"../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as m}from\"../../geometry/support/boundsUtils.js\";import{polygonCentroid as f}from\"../../geometry/support/centroid.js\";import{isPoint as u,isPolygon as d,isPolyline as p,isExtent as _,isMultipoint as g}from\"../../geometry/support/jsonUtils.js\";import{SimpleGeometryCursor as y}from\"./CIMEffects.js\";import P from\"./CIMImageColorSubstitutionHelper.js\";import{getEffectOperator as w,getPlacementOperator as x}from\"./CIMOperators.js\";import{Placement as S}from\"./CIMPlacements.js\";import{LineCapStyle as M,LineJoinStyle as b}from\"./enums.js\";import{getFirstFrame as k}from\"./imageUtils.js\";import C from\"./Rect.js\";import I from\"./TextRasterizer.js\";import{isSVGImage as T,fromCIMFontDecoration as R,fromCIMFontStyle as v,fromCIMHorizontalAlignment as z,fromCIMVerticalAlignment as F,getFillColor as L,getStrokeColor as A,getFontStyle as j,getFontWeight as U}from\"./utils.js\";import{HAlign as H,VAlign as B}from\"../../views/2d/engine/webgl/alignmentUtils.js\";import{GLYPH_SIZE as D,MAGIC_LABEL_LINE_HEIGHT as G}from\"../../views/2d/engine/webgl/definitions.js\";import{shapeGlyphs as X}from\"../../views/2d/engine/webgl/mesh/templates/shapingUtils.js\";const E=Math.PI/180,J=10,N=i.getLogger(\"esri.symbols.cim.CIMSymbolDrawHelper\");class O{constructor(t){this._t=t}static createIdentity(){return new O([1,0,0,0,1,0])}clone(){const t=this._t;return new O(t.slice())}transform(t){const e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}static createScale(t,e){return new O([t,0,0,0,e,0])}scale(t,e){const r=this._t;return r[0]*=t,r[1]*=t,r[2]*=t,r[3]*=e,r[4]*=e,r[5]*=e,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(t,e){return new O([0,0,t,0,0,e])}translate(t,e){const r=this._t;return r[2]+=t,r[5]+=e,this}static createRotate(t){const e=Math.cos(t),r=Math.sin(t);return new O([e,-r,0,r,e,0])}rotate(t){return O.multiply(this,O.createRotate(t),this)}angle(){const t=this._t[0],e=this._t[3],r=Math.sqrt(t*t+e*e);return[t/r,e/r]}static multiply(t,e,r){const i=t._t,s=e._t,o=i[0]*s[0]+i[3]*s[1],n=i[1]*s[0]+i[4]*s[1],a=i[2]*s[0]+i[5]*s[1]+s[2],l=i[0]*s[3]+i[3]*s[4],h=i[1]*s[3]+i[4]*s[4],c=i[2]*s[3]+i[5]*s[4]+s[5],m=r._t;return m[0]=o,m[1]=n,m[2]=a,m[3]=l,m[4]=h,m[5]=c,r}invert(){const t=this._t;let e=t[0]*t[4]-t[1]*t[3];if(0===e)return new O([0,0,0,0,0,0]);e=1/e;const r=(t[1]*t[5]-t[2]*t[4])*e,i=(t[2]*t[3]-t[0]*t[5])*e,s=t[4]*e,o=-t[1]*e,n=-t[3]*e,a=t[0]*e;return new O([s,o,r,n,a,i])}}class Y{constructor(t,e){this._resourceManager=t,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new n(S,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(e||O.createIdentity()),this._sizeTransfos.push(e?e.scaleRatio():1)}setTransform(t,e){this._transfos=[t||O.createIdentity()],this._sizeTransfos=[e||(t?t.scaleRatio():1)]}setGeomUnitsPerPoint(t){this._geomUnitsPerPoint=t}transformPt(t){return this._transfos[this._transfos.length-1].transform(t)}transformSize(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(t){return this._transfos[this._transfos.length-1].invert().transform(t)}reverseTransformSize(t){return t/this._sizeTransfos[this._sizeTransfos.length-1]}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(t,e){const r=e?t.scaleRatio():1;O.multiply(t,this.back(),t),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(t,e,r){if(t)switch(t.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":this.drawMultiLayerSymbol(t,e);break;case\"CIMTextSymbol\":this.drawTextSymbol(t,e,r)}}drawMultiLayerSymbol(t,e){if(!t||!e)return;const r=t.symbolLayers;if(!r)return;const i=t.effects;if(i&&i.length>0){const t=this.executeEffects(i,e);if(t){let e=t.next();for(;e;)this.drawSymbolLayers(r,e),e=t.next()}}else this.drawSymbolLayers(r,e)}executeEffects(t,e){const r=this._resourceManager.geometryEngine;let i=new y(e);for(const s of t){const t=w(s);t&&(i=t.execute(i,s,this.geomUnitsPerPoint(),null,r))}return i}drawSymbolLayers(t,e){let r=t.length;for(;r--;){const i=t[r];if(!i||!1===i.enable)continue;const s=i.effects;if(s&&s.length>0){const t=this.executeEffects(s,e);if(t){let e=null;for(;(e=t.next())&&(this.drawSymbolLayer(i,e),!this._earlyReturn););}}else this.drawSymbolLayer(i,e);if(this._earlyReturn)return}}drawSymbolLayer(t,e){switch(t.type){case\"CIMSolidFill\":this.drawSolidFill(e,t.color);break;case\"CIMHatchFill\":this.drawHatchFill(e,t);break;case\"CIMPictureFill\":this.drawPictureFill(e,t);break;case\"CIMGradientFill\":this.drawGradientFill(e,t);break;case\"CIMSolidStroke\":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case\"CIMPictureStroke\":this.drawPictureStroke(e,t);break;case\"CIMGradientStroke\":this.drawGradientStroke(e,t);break;case\"CIMCharacterMarker\":case\"CIMPictureMarker\":case\"CIMVectorMarker\":this.drawMarkerLayer(t,e)}}drawHatchFill(t,e){const r=this._buildHatchPolyline(e,t,this.geomUnitsPerPoint());r&&(this.pushClipPath(t),this.drawMultiLayerSymbol(e.lineSymbol,r),this.popClipPath())}drawPictureFill(t,e){}drawGradientFill(t,e){}drawPictureStroke(t,e){}drawGradientStroke(t,e){}drawMarkerLayer(t,e){const r=t.markerPlacement;if(r){const i=x(r);if(i){const s=\"CIMMarkerPlacementInsidePolygon\"===r.type||\"CIMMarkerPlacementPolygonCenter\"===r.type&&r.clipAtBoundary;s&&this.pushClipPath(e);const o=i.execute(e,r,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine);if(o){let e=null;for(;(e=o.next())&&(this.drawMarker(t,e),!this._earlyReturn););}s&&this.popClipPath()}}else{const r=this._placementPool.acquire();if(u(e))r.tx=e.x,r.ty=e.y,this.drawMarker(t,r);else if(d(e)){const i=f(e);i&&([r.tx,r.ty]=i,this.drawMarker(t,r))}else for(const i of e.points)if(r.tx=i[0],r.ty=i[1],this.drawMarker(t,r),this._earlyReturn)break;this._placementPool.release(r)}}drawMarker(t,e){switch(t.type){case\"CIMCharacterMarker\":case\"CIMPictureMarker\":this.drawPictureMarker(t,e);break;case\"CIMVectorMarker\":this.drawVectorMarker(t,e)}}drawPictureMarker(t,e){if(!t)return;const r=this._resourceManager.getResource(t.url),i=t.size??10;if(s(r)||i<=0)return;const o=r.width,n=r.height;if(!o||!n)return;const a=o/n,l=t.scaleX??1,h=O.createIdentity(),c=t.anchorPoint;if(c){let e=c.x,r=c.y;\"Absolute\"!==t.anchorPointUnits&&(e*=i*a*l,r*=i),h.translate(-e,-r)}let m=t.rotation??0;t.rotateClockwise&&(m=-m),this._mapRotation&&(m+=this._mapRotation),m&&h.rotate(m*E);let f=t.offsetX??0,u=t.offsetY??0;if(f||u){if(this._mapRotation){const t=E*this._mapRotation,e=Math.cos(t),r=Math.sin(t),i=f*r+u*e;f=f*e-u*r,u=i}h.translate(f,u)}const d=this.geomUnitsPerPoint();1!==d&&h.scale(d,d);const p=e.getAngle();p&&h.rotate(p),h.translate(e.tx,e.ty),this.push(h,!1),this.drawImage(t,i),this.pop()}drawVectorMarker(t,e){if(!t)return;const r=t.markerGraphics;if(!r)return;const i=t.size??10,s=t.frame,o=s?s.ymax-s.ymin:0,n=i&&o?i/o:1,a=O.createIdentity();s&&a.translate(.5*-(s.xmax+s.xmin),.5*-(s.ymax+s.ymin));const l=t.anchorPoint;if(l){let e=l.x,r=l.y;\"Absolute\"!==t.anchorPointUnits?s&&(e*=s.xmax-s.xmin,r*=s.ymax-s.ymin):(e/=n,r/=n),a.translate(-e,-r)}1!==n&&a.scale(n,n);let h=t.rotation??0;t.rotateClockwise&&(h=-h),this._mapRotation&&(h+=this._mapRotation),h&&a.rotate(h*E);let c=t.offsetX??0,m=t.offsetY??0;if(c||m){if(this._mapRotation){const t=E*this._mapRotation,e=Math.cos(t),r=Math.sin(t),i=c*r+m*e;c=c*e-m*r,m=i}a.translate(c,m)}const f=this.geomUnitsPerPoint();1!==f&&a.scale(f,f);const u=e.getAngle();u&&a.rotate(u),a.translate(e.tx,e.ty),this.push(a,t.scaleSymbolsProportionally);for(const d of r)if(d&&d.symbol&&d.geometry||N.error(\"Invalid marker graphic\",d),this.drawSymbol(d.symbol,d.geometry,d.textString),this._earlyReturn)break;this.pop()}drawTextSymbol(t,e,r){if(!t)return;if(!u(e))return;if((t.height??10)<=0)return;const i=O.createIdentity();let s=t.angle??0;s=-s,s&&i.rotate(s*E);const o=t.offsetX??0,n=t.offsetY??0;(o||n)&&i.translate(o,n);const a=this.geomUnitsPerPoint();1!==a&&i.scale(a,a),i.translate(e.x,e.y),this.push(i,!1),this.drawText(t,r),this.pop()}_buildHatchPolyline(t,e,r){let i=(void 0!==t.separation?t.separation:4)*r,s=void 0!==t.rotation?t.rotation:0;if(0===i)return null;i<0&&(i=-i);let o=0;const n=.5*i;for(;o>n;)o-=i;for(;o<-n;)o+=i;const a=h();m(a,e),a[0]-=n,a[1]-=n,a[2]+=n,a[3]+=n;const l=[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]]];for(;s>180;)s-=180;for(;s<0;)s+=180;const c=Math.cos(s*E),f=Math.sin(s*E),u=-i*f,d=i*c;let p,_,g,y;o=(void 0!==t.offsetX?t.offsetX*r:0)*f-(void 0!==t.offsetY?t.offsetY*r:0)*c,p=g=Number.MAX_VALUE,_=y=-Number.MAX_VALUE;for(const h of l){const t=h[0],e=h[1],r=c*t+f*e,i=-f*t+c*e;p=Math.min(p,r),g=Math.min(g,i),_=Math.max(_,r),y=Math.max(y,i)}g=Math.floor(g/i)*i;let P=c*p-f*g-u*o/i,w=f*p+c*g-d*o/i,x=c*_-f*g-u*o/i,S=f*_+c*g-d*o/i;const M=1+Math.round((y-g)/i),b=[];for(let h=0;h<M;h++)P+=u,w+=d,x+=u,S+=d,b.push([[P,w],[x,S]]);return{paths:b}}}class q extends Y{constructor(t,e){super(t,e),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new C(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return c(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(t){if(t&&!(this._clipCount>0))if(d(t))this._processPath(t.rings,0);else if(p(t))this._processPath(t.paths,0);else if(_(t)){const e=Q(t);e&&this._processPath(e.rings,0)}else console.error(\"drawSolidFill Unexpected geometry type!\")}drawSolidStroke(t,e,r){if(!t||this._clipCount>0)return;const i=.5*this.transformSize(r??0);if(d(t))this._processPath(t.rings,i);else if(p(t))this._processPath(t.paths,i);else if(_(t)){const e=Q(t);e&&this._processPath(e.rings,i)}else console.error(\"drawSolidStroke unexpected geometry type!\")}drawMarkerLayer(t,e){d(e)&&t.markerPlacement&&(\"CIMMarkerPlacementInsidePolygon\"===t.markerPlacement.type||\"CIMMarkerPlacementPolygonCenter\"===t.markerPlacement.type&&t.markerPlacement.clipAtBoundary)?this._processPath(e.rings,0):super.drawMarkerLayer(t,e)}drawHatchFill(t,e){this.drawSolidFill(t)}drawPictureFill(t,e){this.drawSolidFill(t)}drawGradientFill(t,e){this.drawSolidFill(t)}drawPictureStroke(t,e){this.drawSolidStroke(t,null,e.width)}drawGradientStroke(t,e){this.drawSolidStroke(t,null,e.width)}pushClipPath(t){this.drawSolidFill(t),this._clipCount++}popClipPath(){this._clipCount--}drawImage(t,e){const{url:r}=t,i=t.scaleX??1;let s=i*e,n=e;const a=this._resourceManager.getResource(r);!e&&o(a)&&(s=i*a.width,n=a.height),this._merge(this.transformPt([-s/2,-n/2]),0),this._merge(this.transformPt([-s/2,n/2]),0),this._merge(this.transformPt([s/2,-n/2]),0),this._merge(this.transformPt([s/2,n/2]),0)}drawText(t,e){if(!e||0===e.length)return;this._textRasterizer||(this._textRasterizer=new I);const r=et(t),[i,s]=this._textRasterizer.computeTextSize(e,r);let o=0;switch(t.horizontalAlignment){case\"Left\":o=i/2;break;case\"Right\":o=-i/2}let n=0;switch(t.verticalAlignment){case\"Bottom\":n=s/2;break;case\"Top\":n=-s/2;break;case\"Baseline\":n=s/6}this._merge(this.transformPt([-i/2+o,-s/2+n]),0),this._merge(this.transformPt([-i/2+o,s/2+n]),0),this._merge(this.transformPt([i/2+o,-s/2+n]),0),this._merge(this.transformPt([i/2+o,s/2+n]),0)}_processPath(t,e){if(t)for(const r of t){const t=r?r.length:0;if(t>1){this._merge(this.transformPt(r[0]),e);for(let i=1;i<t;i++)this._merge(this.transformPt(r[i]),e)}}}_merge(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}class V extends Y{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null}hitTest(t,e,r,i,s,o){const n=o*l(1);this.setTransform(),this.setGeomUnitsPerPoint(n),this._searchPoint=[(t[0]+t[2])/2,(t[1]+t[3])/2],this._searchDistPoint=(t[2]-t[0])/2/n,this._textInfo=i;const a=e&&(\"CIMPointSymbol\"===e.type&&\"Map\"!==e.angleAlignment||\"CIMTextSymbol\"===e.type);return this._mapRotation=a?s:0,this._earlyReturn=!1,this.drawSymbol(e,r),this._earlyReturn}drawSolidFill(t,e){this._hitTestFill(t)}drawHatchFill(t,e){this._hitTestFill(t)}drawPictureFill(t,e){this._hitTestFill(t)}drawGradientFill(t,e){this._hitTestFill(t)}drawSolidStroke(t,e,r,i,s,o){this._hitTestStroke(t,r)}drawPictureStroke(t,e){this._hitTestStroke(t,e.width)}drawGradientStroke(t,e){this._hitTestStroke(t,e.width)}drawMarkerLayer(t,e){t.markerPlacement&&(\"CIMMarkerPlacementInsidePolygon\"===t.markerPlacement.type||\"CIMMarkerPlacementPolygonCenter\"===t.markerPlacement.type&&t.markerPlacement.clipAtBoundary)?this._hitTestFill(e):super.drawMarkerLayer(t,e)}pushClipPath(t){}popClipPath(){}drawImage(t,e){const{url:r}=t,i=t.scaleX??1,o=this._resourceManager.getResource(r);if(s(o)||0===o.height||0===e)return;const n=e*this.geomUnitsPerPoint(),a=n*i*(o.width/o.height),l=this.reverseTransformPt(this._searchPoint),h=this._searchDistPoint;Math.abs(l[0])<a/2+h&&Math.abs(l[1])<n/2+h&&(this._earlyReturn=!0)}drawText(e,r){const i=this._textInfo;if(!i)return;const s=i.get(e);if(!s)return;const{text:o,mosaicItem:n}=s;if(!n?.glyphMosaicItems?.length)return;const a=e.height??J,{lineGapType:l,lineGap:h}=e,c=l?tt(l,h??0,a):0,m=t(o)[1],f=n.glyphMosaicItems,u=\"CIMBackgroundCallout\"===e.callout?.type,d=X(f,m,{scale:a/D,angle:0,xOffset:0,yOffset:0,hAlign:Z(e.horizontalAlignment),vAlign:$(e.verticalAlignment),maxLineWidth:512,lineHeight:G*Math.max(.25,Math.min(c||1,4)),decoration:e.font.decoration||\"none\",isCIM:!0,hasBackground:u}),p=this.reverseTransformPt(this._searchPoint),_=p[0],g=p[1];for(const t of d.glyphs)if(_>t.xTopLeft&&_<t.xBottomRight&&g>-t.yBottomRight&&g<-t.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(t){let e=null;if(_(t)){const r=t;e=[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]}else if(d(t))e=t.rings;else{if(!p(t))return;e=t.paths}const r=this.reverseTransformPt(this._searchPoint);if(this._pointInPolygon(r,e)&&(this._earlyReturn=!0),!this._earlyReturn){const t=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(r,e,t)&&(this._earlyReturn=!0)}}_hitTestStroke(t,e){let r=null;if(_(t)){const e=t;r=[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}else if(d(t))r=t.rings;else{if(!p(t))return;r=t.paths}const i=this.reverseTransformPt(this._searchPoint),s=(e??0)*this.geomUnitsPerPoint(),o=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(i,r,s/2+o)&&(this._earlyReturn=!0)}_pointInPolygon(t,e){let r=0;for(const i of e){const e=i.length;for(let s=1;s<e;s++){const e=i[s-1],o=i[s];if(e[1]>t[1]==o[1]>t[1])continue;(o[0]-e[0])*(t[1]-e[1])-(o[1]-e[1])*(t[0]-e[0])>0?r++:r--}}return 0!==r}_nearLine(t,e,r){for(const i of e){const e=i.length;for(let s=1;s<e;s++){const e=i[s-1],o=i[s];let n=(o[0]-e[0])*(o[0]-e[0])+(o[1]-e[1])*(o[1]-e[1]);if(0===n)continue;n=Math.sqrt(n);const a=((o[0]-e[0])*(t[1]-e[1])-(o[1]-e[1])*(t[0]-e[0]))/n;if(Math.abs(a)<r){const i=((o[0]-e[0])*(t[0]-e[0])+(o[1]-e[1])*(t[1]-e[1]))/n;if(i>-r&&i<n+r)return!0}}}return!1}}class W extends Y{constructor(t,e,r,i){super(e,r),this._applyAdditionalRenderProps=i,this._colorSubstitutionHelper=new P,this._ctx=t}drawSolidFill(t,e){if(!t)return;if(d(t))this._buildPath(t.rings,!0);else if(p(t))this._buildPath(t.paths,!0);else if(_(t))this._buildPath(Q(t).rings,!0);else{if(!g(t))return;console.log(\"CanvasDrawHelper.drawSolidFill - No implementation!\")}const r=this._ctx;r.fillStyle=\"string\"==typeof e?e:\"rgba(\"+Math.round(e[0])+\",\"+Math.round(e[1])+\",\"+Math.round(e[2])+\",\"+(e[3]??255)/255+\")\",r.fill(\"evenodd\")}drawSolidStroke(t,e,r,i,s,o){if(!t||!e||0===r)return;if(d(t))this._buildPath(t.rings,!0);else if(p(t))this._buildPath(t.paths,!1);else{if(!_(t))return void console.log(\"CanvasDrawHelper.drawSolidStroke isn't implemented!\");this._buildPath(Q(t).rings,!0)}const n=this._ctx;n.strokeStyle=\"string\"==typeof e?e:\"rgba(\"+Math.round(e[0])+\",\"+Math.round(e[1])+\",\"+Math.round(e[2])+\",\"+(e[3]??255)/255+\")\",n.lineWidth=Math.max(this.transformSize(r),.5),this._setCapStyle(i),this._setJoinStyle(s),n.miterLimit=o,n.stroke()}pushClipPath(t){if(this._ctx.save(),d(t))this._buildPath(t.rings,!0);else if(p(t))this._buildPath(t.paths,!0);else{if(!_(t))return;this._buildPath(Q(t).rings,!0)}this._ctx.clip(\"evenodd\")}popClipPath(){this._ctx.restore()}drawImage(t,e){const{colorSubstitutions:r,url:i,tintColor:o}=t,n=t.scaleX??1,a=this._resourceManager.getResource(i);if(s(a))return;let l=e*(a.width/a.height),h=e;e||(l=a.width,h=a.height);const c=T(i)||\"src\"in a&&T(a.src);let m=\"getFrame\"in a?k(a):a;r&&(m=this._colorSubstitutionHelper.applyColorSubstituition(m,r)),this._applyAdditionalRenderProps&&!c&&o&&(m=this._colorSubstitutionHelper.tintImageData(m,o));const f=this.transformPt([0,0]),[u,d]=this.getTransformAngle(),p=this.transformSize(1),_=this._ctx;_.save(),_.setTransform({m11:n*p*u,m12:n*p*d,m21:-p*d,m22:p*u,m41:f[0],m42:f[1]}),_.drawImage(m,-l/2,-h/2,l,h),_.restore()}drawText(t,e){if(!e||0===e.length)return;this._textRasterizer||(this._textRasterizer=new I);const r=et(t);r.size*=this.transformSize(a(1));const i=this._textRasterizer.rasterizeText(e,r);if(!i)return;const{size:s,anchorX:o,anchorY:n,canvas:l}=i,h=s[0]*(o+.5),c=s[1]*(n-.5),m=this._ctx,f=this.transformPt([0,0]),[u,d]=this.getTransformAngle(),p=1;m.save(),m.setTransform({m11:p*u,m12:p*d,m21:-p*d,m22:p*u,m41:f[0]-p*h,m42:f[1]+p*c}),m.drawImage(l,0,0),m.restore()}drawPictureFill(t,e){if(!t)return;let{colorSubstitutions:r,height:i,offsetX:o,offsetY:n,rotation:a,scaleX:l,tintColor:h,url:c}=e;const m=this._resourceManager.getResource(c);if(s(m))return;if(d(t))this._buildPath(t.rings,!0);else if(p(t))this._buildPath(t.paths,!0);else if(_(t))this._buildPath(Q(t).rings,!0);else{if(!g(t))return;console.log(\"CanvasDrawHelper.drawPictureFill - No implementation!\")}const f=this._ctx,u=T(c)||\"src\"in m&&T(m.src);let y,P=\"getFrame\"in m?k(m):m;if(r&&(P=this._colorSubstitutionHelper.applyColorSubstituition(P,r)),this._applyAdditionalRenderProps){u||h&&(P=this._colorSubstitutionHelper.tintImageData(P,h)),y=f.createPattern(P,\"repeat\");const t=this.transformSize(1);a||(a=0),o?o*=t:o=0,n?n*=t:n=0,i&&(i*=t);const e=i?i/m.height:1,r=l&&i?l*i/m.width:1;if(0!==a||1!==e||1!==r||0!==o||0!==n){const t=new DOMMatrix;t.rotateSelf(0,0,-a).translateSelf(o,n).scaleSelf(r,e,1),y.setTransform(t)}}else y=f.createPattern(P,\"repeat\");f.save(),f.fillStyle=y,f.fill(\"evenodd\"),f.restore()}drawPictureStroke(t,e){if(!t)return;let{colorSubstitutions:i,capStyle:o,joinStyle:n,miterLimit:a,tintColor:h,url:c,width:m}=e;const f=this._resourceManager.getResource(c);if(s(f))return;let u;if(d(t))u=t.rings;else if(p(t))u=t.paths;else{if(!_(t))return g(t)?void console.log(\"CanvasDrawHelper.drawPictureStroke - No implementation!\"):void 0;u=Q(t).rings}m||(m=f.width);const y=T(c)||\"src\"in f&&T(f.src);let P=\"getFrame\"in f?k(f):f;i&&(P=this._colorSubstitutionHelper.applyColorSubstituition(P,i)),this._applyAdditionalRenderProps&&(y||h&&(P=this._colorSubstitutionHelper.tintImageData(P,h)));const w=Math.max(this.transformSize(l(m)),.5),x=w/P.width,S=this._ctx,M=S.createPattern(P,\"repeat-y\");let b,C;S.save(),this._setCapStyle(o),this._setJoinStyle(n),void 0!==a&&(S.miterLimit=a),S.lineWidth=w;for(let s of u)if(s=r(s),it(s),s&&!(s.length<=1)){b=this.transformPt(s[0]);for(let t=1;t<s.length;t++){C=this.transformPt(s[t]);const e=K(b,C),r=new DOMMatrix;r.translateSelf(0,b[1]-w/2).scaleSelf(x,x,1).rotateSelf(0,0,90-e),M.setTransform(r),S.strokeStyle=M,S.beginPath(),S.moveTo(b[0],b[1]),S.lineTo(C[0],C[1]),S.stroke(),b=C}}S.restore()}_buildPath(t,e){const r=this._ctx;if(r.beginPath(),t)for(const i of t){const t=i?i.length:0;if(t>1){let s=this.transformPt(i[0]);r.moveTo(s[0],s[1]);for(let e=1;e<t;e++)s=this.transformPt(i[e]),r.lineTo(s[0],s[1]);e&&r.closePath()}}}_setCapStyle(t){switch(t){case M.Butt:this._ctx.lineCap=\"butt\";break;case M.Round:this._ctx.lineCap=\"round\";break;case M.Square:this._ctx.lineCap=\"square\"}}_setJoinStyle(t){switch(t){case b.Bevel:this._ctx.lineJoin=\"bevel\";break;case b.Round:this._ctx.lineJoin=\"round\";break;case b.Miter:this._ctx.lineJoin=\"miter\"}}}function K(t,e){const r=e[0]-t[0],i=e[1]-t[1];return 180/Math.PI*Math.atan2(i,r)}const Q=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,Z=t=>{switch(t){case\"Left\":return H.Left;case\"Right\":return H.Right;case\"Center\":return H.Center;case\"Justify\":return N.warnOnce(\"Horizontal alignment 'justify' is not implemented. Falling back to 'center'.\"),H.Center}},$=t=>{switch(t){case\"Top\":return B.Top;case\"Center\":return B.Center;case\"Bottom\":return B.Bottom;case\"Baseline\":return B.Baseline}},tt=(t,e,r)=>{switch(t){case\"ExtraLeading\":return 1+e/r;case\"Multiple\":return e;case\"Exact\":return e/r}};function et(t,r=1){const i=R(t),s=v(t.fontStyleName),o=e(t.fontFamilyName),{weight:n,style:a}=s,l=r*(t.height||5),h=z(t.horizontalAlignment),c=F(t.verticalAlignment),m=L(t),f=A(t.haloSymbol),u=f?r*(0|t.haloSize):0;return{color:m,size:l,horizontalAlignment:h,verticalAlignment:c,font:{family:o,style:j(a),weight:U(n),decoration:i},halo:{size:u||0,color:f,style:a},pixelRatio:1,premultiplyColors:!0}}const rt=1e-4;function it(t){let e,r,i,s,o,n=t[0],a=1;for(;a<t.length;)e=t[a][0]-n[0],r=t[a][1]-n[1],s=0!==e?r/e:Math.PI/2,void 0!==i&&s-i<=rt?(t.splice(a-1,1),n=o):(o=n,n=t[a],a++),i=s}export{Y as CIMSymbolDrawHelper,E as C_DEG_TO_RAD,W as CanvasDrawHelper,q as EnvDrawHelper,V as HittestDrawHelper,O as Transformation,Z as horizontalAlignment2HAlign,tt as lineGapType2LineHeight,$ as verticalAlignment2VAlign};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}