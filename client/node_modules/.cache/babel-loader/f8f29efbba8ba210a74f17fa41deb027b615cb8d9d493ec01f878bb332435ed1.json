{"ast":null,"code":"import _regeneratorRuntime from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _toConsumableArray from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { isAbortError as e } from \"../../../../core/promiseUtils.js\";\nimport { PlacementEngine as s } from \"./Placement.js\";\nimport r from \"./TileParser.js\";\nimport { TileStatus as i } from \"../../tiling/enums.js\";\nvar a = /*#__PURE__*/function () {\n  function a(t, e, r, _a) {\n    _classCallCheck(this, a);\n    this.status = i.INITIALIZED, this.placementEngine = new s(), this.tileKey = t, this.refKeys = e, this._workerTileHandler = r, this._styleRepository = _a;\n  }\n  _createClass(a, [{\n    key: \"release\",\n    value: function release() {\n      this.tileKey = \"\", this.refKeys = null, this.status = i.INITIALIZED, this._workerTileHandler = null;\n    }\n  }, {\n    key: \"parse\",\n    value: function () {\n      var _parse2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(s, r) {\n        var _this = this;\n        var _a2, _t, n, l, o, u, _iterator, _step, _t2, _e, h, c;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _a2 = r && r.signal;\n              if (t(_a2)) {\n                _t = function _t() {\n                  _a2.removeEventListener(\"abort\", _t), _this.status = i.INVALID;\n                };\n                _a2.addEventListener(\"abort\", _t);\n              }\n              l = {\n                bucketsWithData: [],\n                emptyBuckets: null\n              };\n              _context.prev = 3;\n              _context.next = 6;\n              return this._parse(s, r);\n            case 6:\n              n = _context.sent;\n              _context.next = 14;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](3);\n              if (!e(_context.t0)) {\n                _context.next = 13;\n                break;\n              }\n              throw _context.t0;\n            case 13:\n              return _context.abrupt(\"return\", {\n                result: l,\n                transferList: []\n              });\n            case 14:\n              this.status = i.READY;\n              o = l.bucketsWithData, u = [];\n              _iterator = _createForOfIteratorHelper(n);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  _t2 = _step.value;\n                  if (_t2.hasFeatures()) {\n                    _e = _t2.serialize();\n                    o.push(_e);\n                  } else u.push(_t2.layer.uid);\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              h = _toConsumableArray(o);\n              c = null;\n              return _context.abrupt(\"return\", (u.length > 0 && (c = Uint32Array.from(u), h.push(c.buffer)), l.emptyBuckets = c, {\n                result: l,\n                transferList: h\n              }));\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[3, 9]]);\n      }));\n      function parse(_x, _x2) {\n        return _parse2.apply(this, arguments);\n      }\n      return parse;\n    }()\n  }, {\n    key: \"setObsolete\",\n    value: function setObsolete() {\n      this.status = i.INVALID;\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      return this._workerTileHandler.getLayers();\n    }\n  }, {\n    key: \"getWorkerTileHandler\",\n    value: function getWorkerTileHandler() {\n      return this._workerTileHandler;\n    }\n  }, {\n    key: \"_parse\",\n    value: function () {\n      var _parse3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(t, e) {\n        var s;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              s = t.sourceName2DataAndRefKey;\n              if (!(0 === Object.keys(s).length)) {\n                _context2.next = 3;\n                break;\n              }\n              return _context2.abrupt(\"return\", []);\n            case 3:\n              this.status = i.MODIFIED;\n              return _context2.abrupt(\"return\", new r(s, this, e.client, this._styleRepository, t.styleLayerUIDs).parse(e));\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function _parse(_x3, _x4) {\n        return _parse3.apply(this, arguments);\n      }\n      return _parse;\n    }()\n  }]);\n  return a;\n}();\nexport { a as default };","map":{"version":3,"names":["isSome","t","isAbortError","e","PlacementEngine","s","r","TileStatus","i","a","_classCallCheck","status","INITIALIZED","placementEngine","tileKey","refKeys","_workerTileHandler","_styleRepository","_createClass","key","value","release","_parse2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this","_a2","_t","n","l","o","u","_iterator","_step","_t2","_e","h","c","wrap","_callee$","_context","prev","next","signal","removeEventListener","INVALID","addEventListener","bucketsWithData","emptyBuckets","_parse","sent","t0","abrupt","result","transferList","READY","_createForOfIteratorHelper","done","hasFeatures","serialize","push","layer","uid","err","f","_toConsumableArray","length","Uint32Array","from","buffer","stop","parse","_x","_x2","apply","arguments","setObsolete","getLayers","getWorkerTileHandler","_parse3","_callee2","_callee2$","_context2","sourceName2DataAndRefKey","Object","keys","MODIFIED","client","styleLayerUIDs","_x3","_x4","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/2d/engine/vectorTiles/WorkerTile.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{isAbortError as e}from\"../../../../core/promiseUtils.js\";import{PlacementEngine as s}from\"./Placement.js\";import r from\"./TileParser.js\";import{TileStatus as i}from\"../../tiling/enums.js\";class a{constructor(t,e,r,a){this.status=i.INITIALIZED,this.placementEngine=new s,this.tileKey=t,this.refKeys=e,this._workerTileHandler=r,this._styleRepository=a}release(){this.tileKey=\"\",this.refKeys=null,this.status=i.INITIALIZED,this._workerTileHandler=null}async parse(s,r){const a=r&&r.signal;if(t(a)){const t=()=>{a.removeEventListener(\"abort\",t),this.status=i.INVALID};a.addEventListener(\"abort\",t)}let n;const l={bucketsWithData:[],emptyBuckets:null};try{n=await this._parse(s,r)}catch(y){if(e(y))throw y;return{result:l,transferList:[]}}this.status=i.READY;const o=l.bucketsWithData,u=[];for(const t of n)if(t.hasFeatures()){const e=t.serialize();o.push(e)}else u.push(t.layer.uid);const h=[...o];let c=null;return u.length>0&&(c=Uint32Array.from(u),h.push(c.buffer)),l.emptyBuckets=c,{result:l,transferList:h}}setObsolete(){this.status=i.INVALID}getLayers(){return this._workerTileHandler.getLayers()}getWorkerTileHandler(){return this._workerTileHandler}async _parse(t,e){const s=t.sourceName2DataAndRefKey;if(0===Object.keys(s).length)return[];this.status=i.MODIFIED;return new r(s,this,e.client,this._styleRepository,t.styleLayerUIDs).parse(e)}}export{a as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}