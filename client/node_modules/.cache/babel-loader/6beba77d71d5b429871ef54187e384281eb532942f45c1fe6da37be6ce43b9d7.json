{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../../../../core/maybe.js\";\nimport { s as t } from \"../../../../chunks/vec3.js\";\nimport { c as r } from \"../../../../chunks/vec3f64.js\";\nimport { create as i, empty as o, expandWithRect as s, center as d, set as n, toRect as a } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { create as h } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { demResolutionForBoundingBox as c } from \"./graphicUtils.js\";\nimport { Object3DState as m } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { DirtyOperation as g, DirtyState as u } from \"../../webgl-engine/lib/ModelDirtyTypes.js\";\nclass l {\n  constructor(e, t, r, i) {\n    this.graphics3DSymbolLayer = e, this.renderGeometries = t, this.boundingBox = r, this._drapeSourceRenderer = i, this.type = \"draped\", this.stage = null, this._visible = !1, this._addedToStage = !1, this.isElevationSource = !1;\n  }\n  initialize(e) {\n    this.stage = e;\n  }\n  setVisibility(e) {\n    if (null != this.stage && this._visible !== e) {\n      if (this._visible = e, e && !this._addedToStage) return this._addedToStage = !0, void this._drapeSourceRenderer.addGeometries(this.renderGeometries, g.ADD);\n      if (e || this._addedToStage) {\n        for (const e of this.renderGeometries) e.visible = this._visible;\n        this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, u.VISIBILITY);\n      }\n    }\n  }\n  destroy() {\n    this.stage && this._addedToStage && this._drapeSourceRenderer.removeGeometries(this.renderGeometries, g.REMOVE), this._addedToStage = !1, this._visible = !1, this.stage = null;\n  }\n  getCenterObjectSpace() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : r();\n    return t(e, 0, 0, 0);\n  }\n  getBoundingBoxObjectSpace() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : i();\n    return o(e);\n  }\n  addObjectState(e, t) {\n    e === m.Highlight && (this.renderGeometries.forEach(e => {\n      const r = e.geometry.addHighlight();\n      t.addRenderGeometry(e, r, this);\n    }), this._addedToStage && this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, u.HIGHLIGHT));\n  }\n  removeObjectState(e) {\n    this.renderGeometries.forEach(t => {\n      e.removeRenderGeometry(t);\n    });\n  }\n  removeRenderGeometryObjectState(e, t) {\n    e.geometry.removeHighlight(t), this._addedToStage && this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, u.HIGHLIGHT);\n  }\n  computeAttachmentOrigin(e) {\n    for (const t of this.renderGeometries) t.geometry.computeAttachmentOrigin(G) && (e.draped.origin[0] += G[0], e.draped.origin[1] += G[1], e.draped.num++);\n  }\n  async getProjectedBoundingBox(t, r, i, n, a) {\n    o(a);\n    for (let e = 0; e < this.renderGeometries.length; e++) {\n      const r = this.renderGeometries[e];\n      this._getRenderGeometryProjectedBoundingRect(r, t, p, i), s(a, p);\n    }\n    if (r) {\n      let t;\n      d(a, G);\n      const i = c(a, r.service.spatialReference, r);\n      try {\n        t = await r.service.queryElevation(G[0], G[1], n, i, \"ground\");\n      } catch (h) {}\n      e(t) && (a[2] = Math.min(a[2], t), a[5] = Math.max(a[5], t));\n    }\n    return a;\n  }\n  _getRenderGeometryProjectedBoundingRect(e, t, r, i) {\n    if (this.boundingBox) n(f, this.boundingBox);else {\n      const t = e.boundingSphere,\n        r = t[3];\n      f[0] = t[0] - r, f[1] = t[1] - r, f[2] = t[2] - r, f[3] = t[0] + r, f[4] = t[1] + r, f[5] = t[2] + r;\n    }\n    return t(f, 0, 2), this.calculateRelativeScreenBounds && i.push({\n      location: d(f),\n      screenSpaceBoundingRect: this.calculateRelativeScreenBounds()\n    }), a(f, r);\n  }\n}\nconst p = h(),\n  f = i(),\n  G = r();\nexport { l as default };","map":{"version":3,"names":["isSome","e","s","t","c","r","create","i","empty","o","expandWithRect","center","d","set","n","toRect","a","h","demResolutionForBoundingBox","Object3DState","m","DirtyOperation","g","DirtyState","u","l","constructor","graphics3DSymbolLayer","renderGeometries","boundingBox","_drapeSourceRenderer","type","stage","_visible","_addedToStage","isElevationSource","initialize","setVisibility","addGeometries","ADD","visible","modifyGeometries","VISIBILITY","destroy","removeGeometries","REMOVE","getCenterObjectSpace","arguments","length","undefined","getBoundingBoxObjectSpace","addObjectState","Highlight","forEach","geometry","addHighlight","addRenderGeometry","HIGHLIGHT","removeObjectState","removeRenderGeometry","removeRenderGeometryObjectState","removeHighlight","computeAttachmentOrigin","G","draped","origin","num","getProjectedBoundingBox","_getRenderGeometryProjectedBoundingRect","p","service","spatialReference","queryElevation","Math","min","max","f","boundingSphere","calculateRelativeScreenBounds","push","location","screenSpaceBoundingRect","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DDrapedGraphicLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{s as t}from\"../../../../chunks/vec3.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{create as i,empty as o,expandWithRect as s,center as d,set as n,toRect as a}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as h}from\"../../../../geometry/support/aaBoundingRect.js\";import{demResolutionForBoundingBox as c}from\"./graphicUtils.js\";import{Object3DState as m}from\"../../webgl-engine/lib/basicInterfaces.js\";import{DirtyOperation as g,DirtyState as u}from\"../../webgl-engine/lib/ModelDirtyTypes.js\";class l{constructor(e,t,r,i){this.graphics3DSymbolLayer=e,this.renderGeometries=t,this.boundingBox=r,this._drapeSourceRenderer=i,this.type=\"draped\",this.stage=null,this._visible=!1,this._addedToStage=!1,this.isElevationSource=!1}initialize(e){this.stage=e}setVisibility(e){if(null!=this.stage&&this._visible!==e){if(this._visible=e,e&&!this._addedToStage)return this._addedToStage=!0,void this._drapeSourceRenderer.addGeometries(this.renderGeometries,g.ADD);if(e||this._addedToStage){for(const e of this.renderGeometries)e.visible=this._visible;this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,u.VISIBILITY)}}}destroy(){this.stage&&this._addedToStage&&this._drapeSourceRenderer.removeGeometries(this.renderGeometries,g.REMOVE),this._addedToStage=!1,this._visible=!1,this.stage=null}getCenterObjectSpace(e=r()){return t(e,0,0,0)}getBoundingBoxObjectSpace(e=i()){return o(e)}addObjectState(e,t){e===m.Highlight&&(this.renderGeometries.forEach((e=>{const r=e.geometry.addHighlight();t.addRenderGeometry(e,r,this)})),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,u.HIGHLIGHT))}removeObjectState(e){this.renderGeometries.forEach((t=>{e.removeRenderGeometry(t)}))}removeRenderGeometryObjectState(e,t){e.geometry.removeHighlight(t),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,u.HIGHLIGHT)}computeAttachmentOrigin(e){for(const t of this.renderGeometries)t.geometry.computeAttachmentOrigin(G)&&(e.draped.origin[0]+=G[0],e.draped.origin[1]+=G[1],e.draped.num++)}async getProjectedBoundingBox(t,r,i,n,a){o(a);for(let e=0;e<this.renderGeometries.length;e++){const r=this.renderGeometries[e];this._getRenderGeometryProjectedBoundingRect(r,t,p,i),s(a,p)}if(r){let t;d(a,G);const i=c(a,r.service.spatialReference,r);try{t=await r.service.queryElevation(G[0],G[1],n,i,\"ground\")}catch(h){}e(t)&&(a[2]=Math.min(a[2],t),a[5]=Math.max(a[5],t))}return a}_getRenderGeometryProjectedBoundingRect(e,t,r,i){if(this.boundingBox)n(f,this.boundingBox);else{const t=e.boundingSphere,r=t[3];f[0]=t[0]-r,f[1]=t[1]-r,f[2]=t[2]-r,f[3]=t[0]+r,f[4]=t[1]+r,f[5]=t[2]+r}return t(f,0,2),this.calculateRelativeScreenBounds&&i.push({location:d(f),screenSpaceBoundingRect:this.calculateRelativeScreenBounds()}),a(f,r)}}const p=h(),f=i(),G=r();export{l as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}