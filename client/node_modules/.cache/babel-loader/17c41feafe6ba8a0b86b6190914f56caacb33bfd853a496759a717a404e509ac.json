{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport \"../../../core/has.js\";\nimport { lerp as s } from \"../../../core/mathUtils.js\";\nimport { isSome as r, isNone as i, destroyMaybe as a } from \"../../../core/maybe.js\";\nimport { when as o, syncAndInitial as n, watch as h, initial as p, sync as m } from \"../../../core/reactiveUtils.js\";\nimport { property as d } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as l } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { l as _, c, h as u } from \"../../../chunks/vec3.js\";\nimport { f as g } from \"../../../chunks/vec3f64.js\";\nimport { getReferenceEllipsoid as w } from \"../../../geometry/ellipsoidUtils.js\";\nimport { isMoon as f, isEarth as y } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { ViewingMode as v } from \"../../ViewingMode.js\";\nimport { AtmosphereType as P } from \"./AtmosphereType.js\";\nimport { ChapmanAtmosphere as b } from \"./ChapmanAtmosphere.js\";\nimport { CloudsComposition as R } from \"./CloudsComposition.js\";\nimport { FadeInStages as x, FadeInOutStages as A } from \"./CloudsCompositionParameters.js\";\nimport { isReadyCloudsData as W, CloudsRenderingStages as z } from \"./CloudsData.js\";\nimport { CloudsGenerator as N } from \"./CloudsGenerator.js\";\nimport { cloudPresets as j } from \"./CloudsPresets.js\";\nimport { Fog as E, FogParameters as C } from \"./Fog.js\";\nimport { PanoramicAtmosphere as T } from \"./PanoramicAtmosphere.js\";\nimport { Precipitation as O } from \"./Precipitation.js\";\nimport F from \"./SimpleAtmosphere.js\";\nimport { SimpleHaze as S, HazeParameters as q } from \"./SimpleHaze.js\";\nimport { Stars as H } from \"./Stars.js\";\nimport { weatherHeightLimit as I } from \"./weather.js\";\nimport { updateWeatherFading as M, weatherFadingNeedsRender as L } from \"./weatherUtils.js\";\nimport { ShaderOutput as U } from \"../webgl-engine/core/shaderLibrary/ShaderOutput.js\";\nimport { RenderFeature as V } from \"../webgl-engine/lib/RenderFeature.js\";\nimport { RenderSlot as k } from \"../webgl-engine/lib/RenderSlot.js\";\nimport { Update as G } from \"../webgl-engine/lib/Update.js\";\nvar B;\nconst D = [k.POSTPROCESSING_ENVIRONMENT_OPAQUE, k.POSTPROCESSING_ENVIRONMENT_TRANSPARENT];\nlet Q = B = class extends t {\n  constructor(e) {\n    super(e), this._context = null, this._atmosphere = null, this._hqAtmosphere = null, this._oldWeatherParameters = new J(), this._newWeatherParameters = new J(), this._fadedWeatherParameters = new J(), this._weatherParameters = this._newWeatherParameters;\n  }\n  initialize() {\n    this.view._stage.addRenderPlugin(D, this);\n  }\n  destroy() {\n    this.removeHandles(), null != this.view?._stage && this.view._stage.removeRenderPlugin(this), this._set(\"view\", null);\n  }\n  get atmosphere() {\n    return r(this._hqAtmosphere) && this.view._stage.renderer.isFeatureEnabled(V.RealisticAtmosphere) ? this._hqAtmosphere : this._atmosphere;\n  }\n  get _atmosphereType() {\n    return r(this.atmosphere) ? this.atmosphere.type : P.None;\n  }\n  get canRender() {\n    return !!this.view.basemapTerrain?.renderer.canRender || \"global\" !== this.view.viewingMode;\n  }\n  get needsLinearDepth() {\n    return this._atmosphereType === P.Realistic;\n  }\n  updateAnimation(e) {\n    return !!r(this._precipitation) && this._precipitation.update(e);\n  }\n  get updating() {\n    return r(this._stars) && this._stars.updating || r(this._clouds) && this._clouds.running;\n  }\n  get weatherVisible() {\n    return _(this.view.state.camera.eye) - w(this.view.spatialReference).radius <= I;\n  }\n  get _stars() {\n    const e = this.view,\n      t = e.environment?.starsEnabled ?? !1,\n      s = this._get(\"_stars\");\n    return !t || i(this._context) ? (a(s), null) : r(s) ? s : new H({\n      view: e,\n      requestRender: () => this._setNeedsRender()\n    });\n  }\n  get _precipitation() {\n    const e = this._get(\"_precipitation\");\n    if (!this._precipitationEnabled || i(this._context)) return a(e), null;\n    const t = this.view,\n      s = this._context;\n    return r(e) && e.context === s ? e : (a(e), new O({\n      context: s,\n      view: t\n    }));\n  }\n  get _clouds() {\n    const e = this._get(\"_clouds\");\n    if (!this.weatherEnabled || i(this._context)) return a(e), null;\n    if (r(e)) return e;\n    const t = this.view,\n      s = this._context;\n    return a(e), new N({\n      context: s,\n      view: t,\n      requestRender: () => this._setNeedsRender()\n    });\n  }\n  get _cloudsComposition() {\n    const e = this._get(\"_cloudsComposition\");\n    if (!this.weatherEnabled || i(this._context)) return a(e), null;\n    const t = this.view.state.viewingMode,\n      s = this._context.renderContext.rctx,\n      o = w(this.view.spatialReference).radius;\n    return r(e) && e.viewingMode === t && e.planetRadius === o ? e : (a(e), new R({\n      rctx: s,\n      viewingMode: t,\n      planetRadius: o,\n      requestRender: () => this._setNeedsRender()\n    }));\n  }\n  get _fog() {\n    const e = this._get(\"_fog\");\n    if (!this.weatherEnabled || i(this._context)) return a(e), null;\n    if (r(e)) return e;\n    const t = this.view,\n      s = this._context;\n    return new E({\n      context: s,\n      view: t\n    });\n  }\n  get _simpleHaze() {\n    const e = this._get(\"_simpleHaze\");\n    if (!this.weatherEnabled || i(this._context)) return a(e), null;\n    if (r(e)) return e;\n    const t = this.view,\n      s = this._context;\n    return new S({\n      context: s,\n      view: t\n    });\n  }\n  get weatherEnabled() {\n    return !!this.view?.environmentManager?.weatherEnabled;\n  }\n  get _precipitationEnabled() {\n    return this.weatherEnabled && (\"rainy\" === this.view.environment.weather.type || \"snowy\" === this.view.environment.weather.type);\n  }\n  initializeRenderContext() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this._context = e;\n    const t = () => this._setNeedsRender();\n    this.addHandles([o(() => this.view?.basemapTerrain, () => this._updateBasemapTerrain(), n), h(() => ({\n      viewingMode: this.view.state.viewingMode,\n      enabled: this.view.environment.atmosphereEnabled,\n      quality: this.view.environment.atmosphere.quality\n    }), e => this._updateAtmosphere(e), n), h(() => this._stars, t), h(() => this._precipitation, t), h(() => this._clouds, () => this._updateWeather(), p), h(() => this._fog, () => this._updateFogHaze(), p), h(() => this._simpleHaze, () => this._updateFogHaze(), p), h(() => this.view.state.mode, () => {\n      this._setNeedsRender();\n    }, m), h(() => this._atmosphereType, () => this._updateBasemapTerrain(), n), h(() => this._weatherUpdateParameters, () => {\n      this._updateWeather(), this._updateFogHaze();\n    }, n)]);\n  }\n  uninitializeRenderContext() {\n    this._context = null, this._atmosphere = a(this._atmosphere), this._hqAtmosphere = a(this._hqAtmosphere), this._set(\"_stars\", a(this._stars)), this._set(\"_precipitation\", a(this._precipitation)), this._set(\"_clouds\", a(this._clouds)), this._set(\"_cloudsComposition\", a(this._cloudsComposition)), this._set(\"_fog\", a(this._fog)), this._set(\"_simpleHaze\", a(this._simpleHaze));\n  }\n  prepareRender(e) {\n    e.bindParameters.cloudsFade.data = W(this._clouds) ? this._clouds : null, \"local\" !== this.view.viewingMode && (M(e.bindParameters.cloudsFade, e.bindParameters.camera, this.view.state.mode, e.time, this.view.qualitySettings.fadeDuration), this._updateWeatherFading(e.bindParameters), e.bindParameters.cloudsFade.renderingStage === z.FINISHED && r(this._clouds) && 0 === this._clouds.coverage && !1 === this._clouds.running && (this._clouds.destroyFrameBufferCube(), e.bindParameters.cloudsFade.data = null));\n  }\n  render(e) {\n    if (e.output === U.Color) switch (e.bindParameters.slot) {\n      case k.POSTPROCESSING_ENVIRONMENT_OPAQUE:\n        r(this._stars) && this._stars.render(e), r(this.atmosphere) && (this.atmosphere.render(e), r(this._cloudsComposition) && r(e.bindParameters.cloudsFade.data) && (this.weatherVisible && r(this._clouds) && this._clouds.updateWeatherTile(), this._cloudsComposition.render(e)), L(e.bindParameters.cloudsFade) && r(this._context) && this._context.requestRender());\n        break;\n      case k.POSTPROCESSING_ENVIRONMENT_TRANSPARENT:\n        if (r(this.atmosphere) && (this.atmosphere.renderHaze(e, this._weatherParameters.haze.amount), this._weatherParameters.haze.amount > 0 && this._atmosphereType !== P.Realistic && r(this._simpleHaze) && this._simpleHaze.render(e, this._weatherParameters.haze), this._weatherParameters.fog.amount > 0 && r(this._fog) && this._fog.render(e, this._weatherParameters.fog), r(this._precipitation))) {\n          const t = this.view.environment.weather;\n          \"rainy\" !== t.type && \"snowy\" !== t.type || this._precipitation.render(e, t.precipitation, t.type);\n        }\n    }\n  }\n  updateLightSources(e, t, s, i) {\n    if (r(this._context)) {\n      const r = this._context.renderContext;\n      r.bindParameters.oldLighting.copyFrom(r.bindParameters.lighting), r.bindParameters.newLighting.noonFactor = t, r.bindParameters.newLighting.globalFactor = s, r.bindParameters.newLighting.set(e);\n      i === G.Faded || r.bindParameters.weatherFading ? r.bindParameters.fadeLighting(0) : r.bindParameters.fadeLighting(1), this._context.requestRender();\n    }\n  }\n  get _weatherUpdateParameters() {\n    const e = this.weatherEnabled ? this.view.environment.weather : null;\n    return i(e) ? null : \"rainy\" === e.type || \"snowy\" === e.type ? {\n      type: e.type,\n      weatherAdjustment: e.cloudCover,\n      effect: e.precipitation\n    } : {\n      type: e.type,\n      weatherAdjustment: \"foggy\" === e.type ? e.fogStrength : e.cloudCover\n    };\n  }\n  _updateWeatherFading(e) {\n    if (!e.weatherFading) return;\n    const t = e.cloudsFade;\n    return t.fadeIn.stage === x.FADE_IN ? (e.fadeLighting(t.fadeIn.factor), void this._fadeWeather(t.fadeIn.factor)) : t.fadeInOut.stage === A.FADE_IN ? (e.fadeLighting(t.fadeInOut.factor), void this._fadeWeather(t.fadeInOut.factor)) : t.crossFade.enabled ? (e.fadeLighting(t.crossFade.factor), void this._fadeWeather(t.crossFade.factor)) : (e.fadeLighting(0), void this._fadeWeather(0));\n  }\n  _fadeWeather(e) {\n    const {\n      _newWeatherParameters: t,\n      _oldWeatherParameters: s\n    } = this;\n    e >= 1 ? this._weatherParameters = t : (this._fadedWeatherParameters.lerp(s, t, e), this._weatherParameters = this._fadedWeatherParameters);\n  }\n  _updateWeather() {\n    const e = this._weatherUpdateParameters;\n    i(e) || i(this._clouds) || (this._clouds.applyPreset(j[e.type], e.weatherAdjustment), this._setNeedsRender());\n  }\n  _setNeedsRender() {\n    r(this._context) && this._context.requestRender();\n  }\n  _updateFogHaze() {\n    const e = this._weatherUpdateParameters;\n    if (i(this._fog) || i(this._simpleHaze) || i(e) || i(this._context)) return;\n    const t = this._context.renderContext.bindParameters;\n    switch (this._oldWeatherParameters.copyFrom(this._weatherParameters), e.type) {\n      case \"foggy\":\n        this._newWeatherParameters.fog.strength = s(3e-5, .005, e.weatherAdjustment ** 3), c(this._newWeatherParameters.fog.color, X), this._newWeatherParameters.fog.amount = 1, this._newWeatherParameters.haze.strength = 0, this._newWeatherParameters.haze.amount = this._atmosphereType === P.Realistic ? 1 : 0, this._setNeedsRender();\n        break;\n      case \"rainy\":\n        this._newWeatherParameters.fog.strength = s(4e-6, 2e-4, (e.effect ?? 0) ** 3), c(this._newWeatherParameters.fog.color, K), this._newWeatherParameters.fog.amount = 1, this._newWeatherParameters.haze.strength = 0, this._newWeatherParameters.haze.amount = 0, this._setNeedsRender();\n        break;\n      case \"snowy\":\n        this._newWeatherParameters.fog.strength = s(4e-6, 2e-4, (e.effect ?? 0) ** 3), c(this._newWeatherParameters.fog.color, X), this._newWeatherParameters.fog.amount = 1, this._newWeatherParameters.haze.strength = 0, this._newWeatherParameters.haze.amount = this._atmosphereType === P.Realistic ? 1 : 0, this._setNeedsRender();\n        break;\n      default:\n        this._newWeatherParameters.fog.strength = 0, this._newWeatherParameters.fog.amount = 0, this._newWeatherParameters.haze.strength = 4e-6, this._newWeatherParameters.haze.amount = 1, this._setNeedsRender();\n    }\n    t.weatherFading ? this._fadeWeather(0) : this._fadeWeather(1);\n  }\n  _updateAtmosphere(e) {\n    const t = this._selectAtmosphereType(e);\n    if (r(this._atmosphere) ? this._atmosphere.type === t : t === P.None) return;\n    this._atmosphere = a(this._atmosphere), this._hqAtmosphere = a(this._hqAtmosphere);\n    const s = this._getAtmosphereClass(t);\n    s && r(this._context) && (this._atmosphere = new s(this.view, this._context), t === P.Simple && (this._hqAtmosphere = new b(this.view, this._context))), this._setNeedsRender(), this._updateBasemapTerrain();\n  }\n  _getAtmosphereClass(e) {\n    switch (e) {\n      case P.Realistic:\n        return b;\n      case P.Panoramic:\n        return T;\n      case P.Simple:\n        return F;\n      default:\n      case P.None:\n        return null;\n    }\n  }\n  _selectAtmosphereType(e) {\n    const {\n      enabled: t,\n      quality: s,\n      viewingMode: i\n    } = e;\n    return !t || f(this.view.spatialReference) ? P.None : i === v.Local ? P.Panoramic : r(this._context) && \"high\" === s && b.isSupported(this._context) && y(this.view.spatialReference) ? P.Realistic : P.Simple;\n  }\n  _updateBasemapTerrain() {\n    this.view.basemapTerrain && (this.view.basemapTerrain.velvetOverground = this._atmosphereType === P.Simple);\n  }\n  get test() {\n    return {\n      atmosphere: this._atmosphere,\n      clouds: this._clouds,\n      selectAtmosphereType: () => this._selectAtmosphereType({\n        viewingMode: this.view.state.viewingMode,\n        enabled: this.view.environment.atmosphereEnabled,\n        quality: this.view.environment.atmosphere.quality\n      }),\n      stubGetAtmosphereClass: e => {\n        Y = B.prototype._getAtmosphereClass, B.prototype._getAtmosphereClass = e;\n      },\n      restoreGetAtmosphereClass: () => {\n        B.prototype._getAtmosphereClass = Y;\n      }\n    };\n  }\n};\ne([d({\n  constructOnly: !0\n})], Q.prototype, \"view\", void 0), e([d({\n  readOnly: !0\n})], Q.prototype, \"atmosphere\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"_atmosphereType\", null), e([d({\n  type: Boolean,\n  readOnly: !0\n})], Q.prototype, \"updating\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"weatherVisible\", null), e([d()], Q.prototype, \"_context\", void 0), e([d()], Q.prototype, \"_atmosphere\", void 0), e([d()], Q.prototype, \"_hqAtmosphere\", void 0), e([d({\n  readOnly: !0\n})], Q.prototype, \"_stars\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"_precipitation\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"_clouds\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"_cloudsComposition\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"_fog\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"_simpleHaze\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"weatherEnabled\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"_precipitationEnabled\", null), e([d({\n  readOnly: !0\n})], Q.prototype, \"_weatherUpdateParameters\", null), Q = B = e([l(\"esri.views.3d.environment.EnvironmentRenderer\")], Q);\nclass J {\n  constructor() {\n    this.fog = new C(), this.haze = new q();\n  }\n  copyFrom(e) {\n    this.fog.amount = e.fog.amount, this.haze.amount = e.haze.amount, this.fog.strength = e.fog.strength, this.haze.strength = e.haze.strength, c(this.fog.color, e.fog.color);\n  }\n  lerp(e, t, r) {\n    this.fog.amount = s(e.fog.amount, t.fog.amount, r), this.haze.amount = s(e.haze.amount, t.haze.amount, r), this.fog.strength = s(e.fog.strength, t.fog.strength, r), this.haze.strength = s(e.haze.strength, t.haze.strength, r), u(this.fog.color, e.fog.color, t.fog.color, r);\n  }\n}\nconst K = g(.5, .5, .5),\n  X = g(1.5, 1.5, 1.5);\nlet Y;\nexport { Q as EnvironmentRenderer, J as WeatherParameters };","map":{"version":3,"names":["_","e","t","lerp","s","isSome","r","isNone","i","destroyMaybe","a","when","o","syncAndInitial","n","watch","h","initial","p","sync","m","property","d","subclass","l","c","u","f","g","getReferenceEllipsoid","w","isMoon","isEarth","y","ViewingMode","v","AtmosphereType","P","ChapmanAtmosphere","b","CloudsComposition","R","FadeInStages","x","FadeInOutStages","A","isReadyCloudsData","W","CloudsRenderingStages","z","CloudsGenerator","N","cloudPresets","j","Fog","E","FogParameters","C","PanoramicAtmosphere","T","Precipitation","O","F","SimpleHaze","S","HazeParameters","q","Stars","H","weatherHeightLimit","I","updateWeatherFading","M","weatherFadingNeedsRender","L","ShaderOutput","U","RenderFeature","V","RenderSlot","k","Update","G","B","D","POSTPROCESSING_ENVIRONMENT_OPAQUE","POSTPROCESSING_ENVIRONMENT_TRANSPARENT","Q","constructor","_context","_atmosphere","_hqAtmosphere","_oldWeatherParameters","J","_newWeatherParameters","_fadedWeatherParameters","_weatherParameters","initialize","view","_stage","addRenderPlugin","destroy","removeHandles","removeRenderPlugin","_set","atmosphere","renderer","isFeatureEnabled","RealisticAtmosphere","_atmosphereType","type","None","canRender","basemapTerrain","viewingMode","needsLinearDepth","Realistic","updateAnimation","_precipitation","update","updating","_stars","_clouds","running","weatherVisible","state","camera","eye","spatialReference","radius","environment","starsEnabled","_get","requestRender","_setNeedsRender","_precipitationEnabled","context","weatherEnabled","_cloudsComposition","renderContext","rctx","planetRadius","_fog","_simpleHaze","environmentManager","weather","initializeRenderContext","arguments","length","undefined","addHandles","_updateBasemapTerrain","enabled","atmosphereEnabled","quality","_updateAtmosphere","_updateWeather","_updateFogHaze","mode","_weatherUpdateParameters","uninitializeRenderContext","prepareRender","bindParameters","cloudsFade","data","time","qualitySettings","fadeDuration","_updateWeatherFading","renderingStage","FINISHED","coverage","destroyFrameBufferCube","render","output","Color","slot","updateWeatherTile","renderHaze","haze","amount","fog","precipitation","updateLightSources","oldLighting","copyFrom","lighting","newLighting","noonFactor","globalFactor","set","Faded","weatherFading","fadeLighting","weatherAdjustment","cloudCover","effect","fogStrength","fadeIn","stage","FADE_IN","factor","_fadeWeather","fadeInOut","crossFade","applyPreset","strength","color","X","K","_selectAtmosphereType","_getAtmosphereClass","Simple","Panoramic","Local","isSupported","velvetOverground","test","clouds","selectAtmosphereType","stubGetAtmosphereClass","Y","prototype","restoreGetAtmosphereClass","constructOnly","readOnly","Boolean","EnvironmentRenderer","WeatherParameters"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/environment/EnvironmentRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import\"../../../core/has.js\";import{lerp as s}from\"../../../core/mathUtils.js\";import{isSome as r,isNone as i,destroyMaybe as a}from\"../../../core/maybe.js\";import{when as o,syncAndInitial as n,watch as h,initial as p,sync as m}from\"../../../core/reactiveUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{l as _,c,h as u}from\"../../../chunks/vec3.js\";import{f as g}from\"../../../chunks/vec3f64.js\";import{getReferenceEllipsoid as w}from\"../../../geometry/ellipsoidUtils.js\";import{isMoon as f,isEarth as y}from\"../../../geometry/support/spatialReferenceUtils.js\";import{ViewingMode as v}from\"../../ViewingMode.js\";import{AtmosphereType as P}from\"./AtmosphereType.js\";import{ChapmanAtmosphere as b}from\"./ChapmanAtmosphere.js\";import{CloudsComposition as R}from\"./CloudsComposition.js\";import{FadeInStages as x,FadeInOutStages as A}from\"./CloudsCompositionParameters.js\";import{isReadyCloudsData as W,CloudsRenderingStages as z}from\"./CloudsData.js\";import{CloudsGenerator as N}from\"./CloudsGenerator.js\";import{cloudPresets as j}from\"./CloudsPresets.js\";import{Fog as E,FogParameters as C}from\"./Fog.js\";import{PanoramicAtmosphere as T}from\"./PanoramicAtmosphere.js\";import{Precipitation as O}from\"./Precipitation.js\";import F from\"./SimpleAtmosphere.js\";import{SimpleHaze as S,HazeParameters as q}from\"./SimpleHaze.js\";import{Stars as H}from\"./Stars.js\";import{weatherHeightLimit as I}from\"./weather.js\";import{updateWeatherFading as M,weatherFadingNeedsRender as L}from\"./weatherUtils.js\";import{ShaderOutput as U}from\"../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{RenderFeature as V}from\"../webgl-engine/lib/RenderFeature.js\";import{RenderSlot as k}from\"../webgl-engine/lib/RenderSlot.js\";import{Update as G}from\"../webgl-engine/lib/Update.js\";var B;const D=[k.POSTPROCESSING_ENVIRONMENT_OPAQUE,k.POSTPROCESSING_ENVIRONMENT_TRANSPARENT];let Q=B=class extends t{constructor(e){super(e),this._context=null,this._atmosphere=null,this._hqAtmosphere=null,this._oldWeatherParameters=new J,this._newWeatherParameters=new J,this._fadedWeatherParameters=new J,this._weatherParameters=this._newWeatherParameters}initialize(){this.view._stage.addRenderPlugin(D,this)}destroy(){this.removeHandles(),null!=this.view?._stage&&this.view._stage.removeRenderPlugin(this),this._set(\"view\",null)}get atmosphere(){return r(this._hqAtmosphere)&&this.view._stage.renderer.isFeatureEnabled(V.RealisticAtmosphere)?this._hqAtmosphere:this._atmosphere}get _atmosphereType(){return r(this.atmosphere)?this.atmosphere.type:P.None}get canRender(){return!!this.view.basemapTerrain?.renderer.canRender||\"global\"!==this.view.viewingMode}get needsLinearDepth(){return this._atmosphereType===P.Realistic}updateAnimation(e){return!!r(this._precipitation)&&this._precipitation.update(e)}get updating(){return r(this._stars)&&this._stars.updating||r(this._clouds)&&this._clouds.running}get weatherVisible(){return _(this.view.state.camera.eye)-w(this.view.spatialReference).radius<=I}get _stars(){const e=this.view,t=e.environment?.starsEnabled??!1,s=this._get(\"_stars\");return!t||i(this._context)?(a(s),null):r(s)?s:new H({view:e,requestRender:()=>this._setNeedsRender()})}get _precipitation(){const e=this._get(\"_precipitation\");if(!this._precipitationEnabled||i(this._context))return a(e),null;const t=this.view,s=this._context;return r(e)&&e.context===s?e:(a(e),new O({context:s,view:t}))}get _clouds(){const e=this._get(\"_clouds\");if(!this.weatherEnabled||i(this._context))return a(e),null;if(r(e))return e;const t=this.view,s=this._context;return a(e),new N({context:s,view:t,requestRender:()=>this._setNeedsRender()})}get _cloudsComposition(){const e=this._get(\"_cloudsComposition\");if(!this.weatherEnabled||i(this._context))return a(e),null;const t=this.view.state.viewingMode,s=this._context.renderContext.rctx,o=w(this.view.spatialReference).radius;return r(e)&&e.viewingMode===t&&e.planetRadius===o?e:(a(e),new R({rctx:s,viewingMode:t,planetRadius:o,requestRender:()=>this._setNeedsRender()}))}get _fog(){const e=this._get(\"_fog\");if(!this.weatherEnabled||i(this._context))return a(e),null;if(r(e))return e;const t=this.view,s=this._context;return new E({context:s,view:t})}get _simpleHaze(){const e=this._get(\"_simpleHaze\");if(!this.weatherEnabled||i(this._context))return a(e),null;if(r(e))return e;const t=this.view,s=this._context;return new S({context:s,view:t})}get weatherEnabled(){return!!this.view?.environmentManager?.weatherEnabled}get _precipitationEnabled(){return this.weatherEnabled&&(\"rainy\"===this.view.environment.weather.type||\"snowy\"===this.view.environment.weather.type)}initializeRenderContext(e=null){this._context=e;const t=()=>this._setNeedsRender();this.addHandles([o((()=>this.view?.basemapTerrain),(()=>this._updateBasemapTerrain()),n),h((()=>({viewingMode:this.view.state.viewingMode,enabled:this.view.environment.atmosphereEnabled,quality:this.view.environment.atmosphere.quality})),(e=>this._updateAtmosphere(e)),n),h((()=>this._stars),t),h((()=>this._precipitation),t),h((()=>this._clouds),(()=>this._updateWeather()),p),h((()=>this._fog),(()=>this._updateFogHaze()),p),h((()=>this._simpleHaze),(()=>this._updateFogHaze()),p),h((()=>this.view.state.mode),(()=>{this._setNeedsRender()}),m),h((()=>this._atmosphereType),(()=>this._updateBasemapTerrain()),n),h((()=>this._weatherUpdateParameters),(()=>{this._updateWeather(),this._updateFogHaze()}),n)])}uninitializeRenderContext(){this._context=null,this._atmosphere=a(this._atmosphere),this._hqAtmosphere=a(this._hqAtmosphere),this._set(\"_stars\",a(this._stars)),this._set(\"_precipitation\",a(this._precipitation)),this._set(\"_clouds\",a(this._clouds)),this._set(\"_cloudsComposition\",a(this._cloudsComposition)),this._set(\"_fog\",a(this._fog)),this._set(\"_simpleHaze\",a(this._simpleHaze))}prepareRender(e){e.bindParameters.cloudsFade.data=W(this._clouds)?this._clouds:null,\"local\"!==this.view.viewingMode&&(M(e.bindParameters.cloudsFade,e.bindParameters.camera,this.view.state.mode,e.time,this.view.qualitySettings.fadeDuration),this._updateWeatherFading(e.bindParameters),e.bindParameters.cloudsFade.renderingStage===z.FINISHED&&r(this._clouds)&&0===this._clouds.coverage&&!1===this._clouds.running&&(this._clouds.destroyFrameBufferCube(),e.bindParameters.cloudsFade.data=null))}render(e){if(e.output===U.Color)switch(e.bindParameters.slot){case k.POSTPROCESSING_ENVIRONMENT_OPAQUE:r(this._stars)&&this._stars.render(e),r(this.atmosphere)&&(this.atmosphere.render(e),r(this._cloudsComposition)&&r(e.bindParameters.cloudsFade.data)&&(this.weatherVisible&&r(this._clouds)&&this._clouds.updateWeatherTile(),this._cloudsComposition.render(e)),L(e.bindParameters.cloudsFade)&&r(this._context)&&this._context.requestRender());break;case k.POSTPROCESSING_ENVIRONMENT_TRANSPARENT:if(r(this.atmosphere)&&(this.atmosphere.renderHaze(e,this._weatherParameters.haze.amount),this._weatherParameters.haze.amount>0&&this._atmosphereType!==P.Realistic&&r(this._simpleHaze)&&this._simpleHaze.render(e,this._weatherParameters.haze),this._weatherParameters.fog.amount>0&&r(this._fog)&&this._fog.render(e,this._weatherParameters.fog),r(this._precipitation))){const t=this.view.environment.weather;\"rainy\"!==t.type&&\"snowy\"!==t.type||this._precipitation.render(e,t.precipitation,t.type)}}}updateLightSources(e,t,s,i){if(r(this._context)){const r=this._context.renderContext;r.bindParameters.oldLighting.copyFrom(r.bindParameters.lighting),r.bindParameters.newLighting.noonFactor=t,r.bindParameters.newLighting.globalFactor=s,r.bindParameters.newLighting.set(e);i===G.Faded||r.bindParameters.weatherFading?r.bindParameters.fadeLighting(0):r.bindParameters.fadeLighting(1),this._context.requestRender()}}get _weatherUpdateParameters(){const e=this.weatherEnabled?this.view.environment.weather:null;return i(e)?null:\"rainy\"===e.type||\"snowy\"===e.type?{type:e.type,weatherAdjustment:e.cloudCover,effect:e.precipitation}:{type:e.type,weatherAdjustment:\"foggy\"===e.type?e.fogStrength:e.cloudCover}}_updateWeatherFading(e){if(!e.weatherFading)return;const t=e.cloudsFade;return t.fadeIn.stage===x.FADE_IN?(e.fadeLighting(t.fadeIn.factor),void this._fadeWeather(t.fadeIn.factor)):t.fadeInOut.stage===A.FADE_IN?(e.fadeLighting(t.fadeInOut.factor),void this._fadeWeather(t.fadeInOut.factor)):t.crossFade.enabled?(e.fadeLighting(t.crossFade.factor),void this._fadeWeather(t.crossFade.factor)):(e.fadeLighting(0),void this._fadeWeather(0))}_fadeWeather(e){const{_newWeatherParameters:t,_oldWeatherParameters:s}=this;e>=1?this._weatherParameters=t:(this._fadedWeatherParameters.lerp(s,t,e),this._weatherParameters=this._fadedWeatherParameters)}_updateWeather(){const e=this._weatherUpdateParameters;i(e)||i(this._clouds)||(this._clouds.applyPreset(j[e.type],e.weatherAdjustment),this._setNeedsRender())}_setNeedsRender(){r(this._context)&&this._context.requestRender()}_updateFogHaze(){const e=this._weatherUpdateParameters;if(i(this._fog)||i(this._simpleHaze)||i(e)||i(this._context))return;const t=this._context.renderContext.bindParameters;switch(this._oldWeatherParameters.copyFrom(this._weatherParameters),e.type){case\"foggy\":this._newWeatherParameters.fog.strength=s(3e-5,.005,e.weatherAdjustment**3),c(this._newWeatherParameters.fog.color,X),this._newWeatherParameters.fog.amount=1,this._newWeatherParameters.haze.strength=0,this._newWeatherParameters.haze.amount=this._atmosphereType===P.Realistic?1:0,this._setNeedsRender();break;case\"rainy\":this._newWeatherParameters.fog.strength=s(4e-6,2e-4,(e.effect??0)**3),c(this._newWeatherParameters.fog.color,K),this._newWeatherParameters.fog.amount=1,this._newWeatherParameters.haze.strength=0,this._newWeatherParameters.haze.amount=0,this._setNeedsRender();break;case\"snowy\":this._newWeatherParameters.fog.strength=s(4e-6,2e-4,(e.effect??0)**3),c(this._newWeatherParameters.fog.color,X),this._newWeatherParameters.fog.amount=1,this._newWeatherParameters.haze.strength=0,this._newWeatherParameters.haze.amount=this._atmosphereType===P.Realistic?1:0,this._setNeedsRender();break;default:this._newWeatherParameters.fog.strength=0,this._newWeatherParameters.fog.amount=0,this._newWeatherParameters.haze.strength=4e-6,this._newWeatherParameters.haze.amount=1,this._setNeedsRender()}t.weatherFading?this._fadeWeather(0):this._fadeWeather(1)}_updateAtmosphere(e){const t=this._selectAtmosphereType(e);if(r(this._atmosphere)?this._atmosphere.type===t:t===P.None)return;this._atmosphere=a(this._atmosphere),this._hqAtmosphere=a(this._hqAtmosphere);const s=this._getAtmosphereClass(t);s&&r(this._context)&&(this._atmosphere=new s(this.view,this._context),t===P.Simple&&(this._hqAtmosphere=new b(this.view,this._context))),this._setNeedsRender(),this._updateBasemapTerrain()}_getAtmosphereClass(e){switch(e){case P.Realistic:return b;case P.Panoramic:return T;case P.Simple:return F;default:case P.None:return null}}_selectAtmosphereType(e){const{enabled:t,quality:s,viewingMode:i}=e;return!t||f(this.view.spatialReference)?P.None:i===v.Local?P.Panoramic:r(this._context)&&\"high\"===s&&b.isSupported(this._context)&&y(this.view.spatialReference)?P.Realistic:P.Simple}_updateBasemapTerrain(){this.view.basemapTerrain&&(this.view.basemapTerrain.velvetOverground=this._atmosphereType===P.Simple)}get test(){return{atmosphere:this._atmosphere,clouds:this._clouds,selectAtmosphereType:()=>this._selectAtmosphereType({viewingMode:this.view.state.viewingMode,enabled:this.view.environment.atmosphereEnabled,quality:this.view.environment.atmosphere.quality}),stubGetAtmosphereClass:e=>{Y=B.prototype._getAtmosphereClass,B.prototype._getAtmosphereClass=e},restoreGetAtmosphereClass:()=>{B.prototype._getAtmosphereClass=Y}}}};e([d({constructOnly:!0})],Q.prototype,\"view\",void 0),e([d({readOnly:!0})],Q.prototype,\"atmosphere\",null),e([d({readOnly:!0})],Q.prototype,\"_atmosphereType\",null),e([d({type:Boolean,readOnly:!0})],Q.prototype,\"updating\",null),e([d({readOnly:!0})],Q.prototype,\"weatherVisible\",null),e([d()],Q.prototype,\"_context\",void 0),e([d()],Q.prototype,\"_atmosphere\",void 0),e([d()],Q.prototype,\"_hqAtmosphere\",void 0),e([d({readOnly:!0})],Q.prototype,\"_stars\",null),e([d({readOnly:!0})],Q.prototype,\"_precipitation\",null),e([d({readOnly:!0})],Q.prototype,\"_clouds\",null),e([d({readOnly:!0})],Q.prototype,\"_cloudsComposition\",null),e([d({readOnly:!0})],Q.prototype,\"_fog\",null),e([d({readOnly:!0})],Q.prototype,\"_simpleHaze\",null),e([d({readOnly:!0})],Q.prototype,\"weatherEnabled\",null),e([d({readOnly:!0})],Q.prototype,\"_precipitationEnabled\",null),e([d({readOnly:!0})],Q.prototype,\"_weatherUpdateParameters\",null),Q=B=e([l(\"esri.views.3d.environment.EnvironmentRenderer\")],Q);class J{constructor(){this.fog=new C,this.haze=new q}copyFrom(e){this.fog.amount=e.fog.amount,this.haze.amount=e.haze.amount,this.fog.strength=e.fog.strength,this.haze.strength=e.haze.strength,c(this.fog.color,e.fog.color)}lerp(e,t,r){this.fog.amount=s(e.fog.amount,t.fog.amount,r),this.haze.amount=s(e.haze.amount,t.haze.amount,r),this.fog.strength=s(e.fog.strength,t.fog.strength,r),this.haze.strength=s(e.haze.strength,t.haze.strength,r),u(this.fog.color,e.fog.color,t.fog.color,r)}}const K=g(.5,.5,.5),X=g(1.5,1.5,1.5);let Y;export{Q as EnvironmentRenderer,J as WeatherParameters};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}