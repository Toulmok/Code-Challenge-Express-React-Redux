{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { lerp as e, clamp as t } from \"../../../core/mathUtils.js\";\nimport { isSome as i } from \"../../../core/maybe.js\";\nimport { getMetersPerUnitForSR as r } from \"../../../core/unitUtils.js\";\nimport { b as s, n, e as a, l as m } from \"../../../chunks/vec3.js\";\nimport { c as o } from \"../../../chunks/vec3f64.js\";\nimport { getReferenceEllipsoid as h } from \"../../../geometry/ellipsoidUtils.js\";\nimport l from \"../../../geometry/Extent.js\";\nimport { ViewingMode as x } from \"../../ViewingMode.js\";\nimport { computeInnerAltitudeFade as c } from \"../environment/atmosphereUtils.js\";\nfunction u(e, t, i) {\n  return e === x.Global ? new f(i) : new M(t, i);\n}\nclass M {\n  constructor(e, t) {\n    this._elevationProvider = e, this._referenceEllipsoid = h(t), this._unitInMeters = r(t, this._referenceEllipsoid.metersPerDegree);\n  }\n  compute(r, m, o, h, x) {\n    x || (x = {\n      near: 0,\n      far: 0\n    });\n    let c = r[2] * this._unitInMeters;\n    const u = c,\n      M = c - h,\n      f = this._elevationProvider?.visibleElevationBounds;\n    f && (c = M >= 0 ? u - this._unitInMeters * f.min : this._unitInMeters * f.max - u);\n    const d = {\n        x: (o = i(o) ? o : new l({\n          xmin: 0,\n          ymin: 0,\n          zmin: 0,\n          xmax: 0,\n          ymax: 0,\n          zmax: 0\n        })).xmax - o.xmin,\n        y: o.ymax - o.ymin,\n        z: 4 * Math.max(o.xmax - o.xmin, o.ymax - o.ymin)\n      },\n      I = Math.max(d.x, d.y, d.z);\n    s(E, m, r), v[0] = E[0] > 0 ? o.xmax : o.xmin, v[1] = E[1] > 0 ? o.ymax : o.ymin, v[2] = E[2] > 0 ? I / 2 : -I / 2, s(v, v, r), n(E, E);\n    const b = 1.1 * a(v, E) * this._unitInMeters,\n      g = Math.sqrt(c * (c + 2 * this._referenceEllipsoid.radius)),\n      w = Math.max(o.xmax - o.xmin, o.ymax - o.ymin),\n      z = w * y * this._unitInMeters,\n      U = w * j * this._unitInMeters,\n      P = t((c - U) / (z - U), 0, 1) ** 3,\n      k = Math.min(e(g, b, P), g) * Math.max(Math.log(Math.abs(M)), 1);\n    return p(Math.min(k, Math.max(34064e4, I)) / this._unitInMeters, _, this._unitInMeters, x);\n  }\n}\nclass f {\n  constructor(e) {\n    this._referenceEllipsoid = h(e);\n  }\n  compute(i, r, s, n, a) {\n    a || (a = {\n      near: 0,\n      far: 0\n    });\n    const o = m(i),\n      h = o - this._referenceEllipsoid.radius,\n      l = this._referenceEllipsoid.radius + Math.min(0, n),\n      x = Math.abs(h - n),\n      u = Math.max(x, Math.abs(h)),\n      M = Math.sqrt(u * (u + 2 * l)),\n      f = o + this._referenceEllipsoid.radius;\n    return p(1.2 * e(M, f, c(u)), t(2e4 - (Math.log(u) - 7.983) / 9.011 * 19e3, 1e3, 2e4), 1, a);\n  }\n}\nfunction p(e, t, i, r) {\n  const s = d / i;\n  return e / t > s ? (r.far = e, r.near = r.far / t) : (r.near = s, r.far = r.near * t), r;\n}\nconst _ = 2e4,\n  d = 2,\n  y = .001,\n  j = 1e-4,\n  v = o(),\n  E = o();\nexport { u as createNearFarHeuristic };","map":{"version":3,"names":["lerp","e","clamp","t","isSome","i","getMetersPerUnitForSR","r","b","s","n","a","l","m","c","o","getReferenceEllipsoid","h","ViewingMode","x","computeInnerAltitudeFade","u","Global","f","M","constructor","_elevationProvider","_referenceEllipsoid","_unitInMeters","metersPerDegree","compute","near","far","visibleElevationBounds","min","max","d","xmin","ymin","zmin","xmax","ymax","zmax","y","z","Math","I","E","v","g","sqrt","radius","w","U","j","P","k","log","abs","p","_","createNearFarHeuristic"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/state/NearFarHeuristic.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{lerp as e,clamp as t}from\"../../../core/mathUtils.js\";import{isSome as i}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../../core/unitUtils.js\";import{b as s,n,e as a,l as m}from\"../../../chunks/vec3.js\";import{c as o}from\"../../../chunks/vec3f64.js\";import{getReferenceEllipsoid as h}from\"../../../geometry/ellipsoidUtils.js\";import l from\"../../../geometry/Extent.js\";import{ViewingMode as x}from\"../../ViewingMode.js\";import{computeInnerAltitudeFade as c}from\"../environment/atmosphereUtils.js\";function u(e,t,i){return e===x.Global?new f(i):new M(t,i)}class M{constructor(e,t){this._elevationProvider=e,this._referenceEllipsoid=h(t),this._unitInMeters=r(t,this._referenceEllipsoid.metersPerDegree)}compute(r,m,o,h,x){x||(x={near:0,far:0});let c=r[2]*this._unitInMeters;const u=c,M=c-h,f=this._elevationProvider?.visibleElevationBounds;f&&(c=M>=0?u-this._unitInMeters*f.min:this._unitInMeters*f.max-u);const d={x:(o=i(o)?o:new l({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0})).xmax-o.xmin,y:o.ymax-o.ymin,z:4*Math.max(o.xmax-o.xmin,o.ymax-o.ymin)},I=Math.max(d.x,d.y,d.z);s(E,m,r),v[0]=E[0]>0?o.xmax:o.xmin,v[1]=E[1]>0?o.ymax:o.ymin,v[2]=E[2]>0?I/2:-I/2,s(v,v,r),n(E,E);const b=1.1*a(v,E)*this._unitInMeters,g=Math.sqrt(c*(c+2*this._referenceEllipsoid.radius)),w=Math.max(o.xmax-o.xmin,o.ymax-o.ymin),z=w*y*this._unitInMeters,U=w*j*this._unitInMeters,P=t((c-U)/(z-U),0,1)**3,k=Math.min(e(g,b,P),g)*Math.max(Math.log(Math.abs(M)),1);return p(Math.min(k,Math.max(34064e4,I))/this._unitInMeters,_,this._unitInMeters,x)}}class f{constructor(e){this._referenceEllipsoid=h(e)}compute(i,r,s,n,a){a||(a={near:0,far:0});const o=m(i),h=o-this._referenceEllipsoid.radius,l=this._referenceEllipsoid.radius+Math.min(0,n),x=Math.abs(h-n),u=Math.max(x,Math.abs(h)),M=Math.sqrt(u*(u+2*l)),f=o+this._referenceEllipsoid.radius;return p(1.2*e(M,f,c(u)),t(2e4-(Math.log(u)-7.983)/9.011*19e3,1e3,2e4),1,a)}}function p(e,t,i,r){const s=d/i;return e/t>s?(r.far=e,r.near=r.far/t):(r.near=s,r.far=r.near*t),r}const _=2e4,d=2,y=.001,j=1e-4,v=o(),E=o();export{u as createNearFarHeuristic};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,IAAI,IAAIC,CAAC,EAACC,KAAK,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,CAAC,IAAIC,CAAC,EAACC,CAAC,EAACT,CAAC,IAAIU,CAAC,EAACC,CAAC,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,CAAC,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,QAAK,qCAAqC;AAAC,OAAOL,CAAC,MAAK,6BAA6B;AAAC,SAAOM,WAAW,IAAIC,CAAC,QAAK,sBAAsB;AAAC,SAAOC,wBAAwB,IAAIN,CAAC,QAAK,mCAAmC;AAAC,SAASO,CAACA,CAACpB,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;EAAC,OAAOJ,CAAC,KAAGkB,CAAC,CAACG,MAAM,GAAC,IAAIC,CAAC,CAAClB,CAAC,CAAC,GAAC,IAAImB,CAAC,CAACrB,CAAC,EAACE,CAAC,CAAC;AAAA;AAAC,MAAMmB,CAAC;EAACC,WAAWA,CAACxB,CAAC,EAACE,CAAC,EAAC;IAAC,IAAI,CAACuB,kBAAkB,GAACzB,CAAC,EAAC,IAAI,CAAC0B,mBAAmB,GAACV,CAAC,CAACd,CAAC,CAAC,EAAC,IAAI,CAACyB,aAAa,GAACrB,CAAC,CAACJ,CAAC,EAAC,IAAI,CAACwB,mBAAmB,CAACE,eAAe,CAAC;EAAA;EAACC,OAAOA,CAACvB,CAAC,EAACM,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAACA,CAAC,KAAGA,CAAC,GAAC;MAACY,IAAI,EAAC,CAAC;MAACC,GAAG,EAAC;IAAC,CAAC,CAAC;IAAC,IAAIlB,CAAC,GAACP,CAAC,CAAC,CAAC,CAAC,GAAC,IAAI,CAACqB,aAAa;IAAC,MAAMP,CAAC,GAACP,CAAC;MAACU,CAAC,GAACV,CAAC,GAACG,CAAC;MAACM,CAAC,GAAC,IAAI,CAACG,kBAAkB,EAAEO,sBAAsB;IAACV,CAAC,KAAGT,CAAC,GAACU,CAAC,IAAE,CAAC,GAACH,CAAC,GAAC,IAAI,CAACO,aAAa,GAACL,CAAC,CAACW,GAAG,GAAC,IAAI,CAACN,aAAa,GAACL,CAAC,CAACY,GAAG,GAACd,CAAC,CAAC;IAAC,MAAMe,CAAC,GAAC;QAACjB,CAAC,EAAC,CAACJ,CAAC,GAACV,CAAC,CAACU,CAAC,CAAC,GAACA,CAAC,GAAC,IAAIH,CAAC,CAAC;UAACyB,IAAI,EAAC,CAAC;UAACC,IAAI,EAAC,CAAC;UAACC,IAAI,EAAC,CAAC;UAACC,IAAI,EAAC,CAAC;UAACC,IAAI,EAAC,CAAC;UAACC,IAAI,EAAC;QAAC,CAAC,CAAC,EAAEF,IAAI,GAACzB,CAAC,CAACsB,IAAI;QAACM,CAAC,EAAC5B,CAAC,CAAC0B,IAAI,GAAC1B,CAAC,CAACuB,IAAI;QAACM,CAAC,EAAC,CAAC,GAACC,IAAI,CAACV,GAAG,CAACpB,CAAC,CAACyB,IAAI,GAACzB,CAAC,CAACsB,IAAI,EAACtB,CAAC,CAAC0B,IAAI,GAAC1B,CAAC,CAACuB,IAAI;MAAC,CAAC;MAACQ,CAAC,GAACD,IAAI,CAACV,GAAG,CAACC,CAAC,CAACjB,CAAC,EAACiB,CAAC,CAACO,CAAC,EAACP,CAAC,CAACQ,CAAC,CAAC;IAACnC,CAAC,CAACsC,CAAC,EAAClC,CAAC,EAACN,CAAC,CAAC,EAACyC,CAAC,CAAC,CAAC,CAAC,GAACD,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,GAAChC,CAAC,CAACyB,IAAI,GAACzB,CAAC,CAACsB,IAAI,EAACW,CAAC,CAAC,CAAC,CAAC,GAACD,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,GAAChC,CAAC,CAAC0B,IAAI,GAAC1B,CAAC,CAACuB,IAAI,EAACU,CAAC,CAAC,CAAC,CAAC,GAACD,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,GAACD,CAAC,GAAC,CAAC,GAAC,CAACA,CAAC,GAAC,CAAC,EAACrC,CAAC,CAACuC,CAAC,EAACA,CAAC,EAACzC,CAAC,CAAC,EAACG,CAAC,CAACqC,CAAC,EAACA,CAAC,CAAC;IAAC,MAAMvC,CAAC,GAAC,GAAG,GAACG,CAAC,CAACqC,CAAC,EAACD,CAAC,CAAC,GAAC,IAAI,CAACnB,aAAa;MAACqB,CAAC,GAACJ,IAAI,CAACK,IAAI,CAACpC,CAAC,IAAEA,CAAC,GAAC,CAAC,GAAC,IAAI,CAACa,mBAAmB,CAACwB,MAAM,CAAC,CAAC;MAACC,CAAC,GAACP,IAAI,CAACV,GAAG,CAACpB,CAAC,CAACyB,IAAI,GAACzB,CAAC,CAACsB,IAAI,EAACtB,CAAC,CAAC0B,IAAI,GAAC1B,CAAC,CAACuB,IAAI,CAAC;MAACM,CAAC,GAACQ,CAAC,GAACT,CAAC,GAAC,IAAI,CAACf,aAAa;MAACyB,CAAC,GAACD,CAAC,GAACE,CAAC,GAAC,IAAI,CAAC1B,aAAa;MAAC2B,CAAC,GAACpD,CAAC,CAAC,CAACW,CAAC,GAACuC,CAAC,KAAGT,CAAC,GAACS,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,IAAE,CAAC;MAACG,CAAC,GAACX,IAAI,CAACX,GAAG,CAACjC,CAAC,CAACgD,CAAC,EAACzC,CAAC,EAAC+C,CAAC,CAAC,EAACN,CAAC,CAAC,GAACJ,IAAI,CAACV,GAAG,CAACU,IAAI,CAACY,GAAG,CAACZ,IAAI,CAACa,GAAG,CAAClC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC;IAAC,OAAOmC,CAAC,CAACd,IAAI,CAACX,GAAG,CAACsB,CAAC,EAACX,IAAI,CAACV,GAAG,CAAC,OAAO,EAACW,CAAC,CAAC,CAAC,GAAC,IAAI,CAAClB,aAAa,EAACgC,CAAC,EAAC,IAAI,CAAChC,aAAa,EAACT,CAAC,CAAC;EAAA;AAAC;AAAC,MAAMI,CAAC;EAACE,WAAWA,CAACxB,CAAC,EAAC;IAAC,IAAI,CAAC0B,mBAAmB,GAACV,CAAC,CAAChB,CAAC,CAAC;EAAA;EAAC6B,OAAOA,CAACzB,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAACA,CAAC,KAAGA,CAAC,GAAC;MAACoB,IAAI,EAAC,CAAC;MAACC,GAAG,EAAC;IAAC,CAAC,CAAC;IAAC,MAAMjB,CAAC,GAACF,CAAC,CAACR,CAAC,CAAC;MAACY,CAAC,GAACF,CAAC,GAAC,IAAI,CAACY,mBAAmB,CAACwB,MAAM;MAACvC,CAAC,GAAC,IAAI,CAACe,mBAAmB,CAACwB,MAAM,GAACN,IAAI,CAACX,GAAG,CAAC,CAAC,EAACxB,CAAC,CAAC;MAACS,CAAC,GAAC0B,IAAI,CAACa,GAAG,CAACzC,CAAC,GAACP,CAAC,CAAC;MAACW,CAAC,GAACwB,IAAI,CAACV,GAAG,CAAChB,CAAC,EAAC0B,IAAI,CAACa,GAAG,CAACzC,CAAC,CAAC,CAAC;MAACO,CAAC,GAACqB,IAAI,CAACK,IAAI,CAAC7B,CAAC,IAAEA,CAAC,GAAC,CAAC,GAACT,CAAC,CAAC,CAAC;MAACW,CAAC,GAACR,CAAC,GAAC,IAAI,CAACY,mBAAmB,CAACwB,MAAM;IAAC,OAAOQ,CAAC,CAAC,GAAG,GAAC1D,CAAC,CAACuB,CAAC,EAACD,CAAC,EAACT,CAAC,CAACO,CAAC,CAAC,CAAC,EAAClB,CAAC,CAAC,GAAG,GAAC,CAAC0C,IAAI,CAACY,GAAG,CAACpC,CAAC,CAAC,GAAC,KAAK,IAAE,KAAK,GAAC,IAAI,EAAC,GAAG,EAAC,GAAG,CAAC,EAAC,CAAC,EAACV,CAAC,CAAC;EAAA;AAAC;AAAC,SAASgD,CAACA,CAAC1D,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;EAAC,MAAME,CAAC,GAAC2B,CAAC,GAAC/B,CAAC;EAAC,OAAOJ,CAAC,GAACE,CAAC,GAACM,CAAC,IAAEF,CAAC,CAACyB,GAAG,GAAC/B,CAAC,EAACM,CAAC,CAACwB,IAAI,GAACxB,CAAC,CAACyB,GAAG,GAAC7B,CAAC,KAAGI,CAAC,CAACwB,IAAI,GAACtB,CAAC,EAACF,CAAC,CAACyB,GAAG,GAACzB,CAAC,CAACwB,IAAI,GAAC5B,CAAC,CAAC,EAACI,CAAC;AAAA;AAAC,MAAMqD,CAAC,GAAC,GAAG;EAACxB,CAAC,GAAC,CAAC;EAACO,CAAC,GAAC,IAAI;EAACW,CAAC,GAAC,IAAI;EAACN,CAAC,GAACjC,CAAC,EAAE;EAACgC,CAAC,GAAChC,CAAC,EAAE;AAAC,SAAOM,CAAC,IAAIwC,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}