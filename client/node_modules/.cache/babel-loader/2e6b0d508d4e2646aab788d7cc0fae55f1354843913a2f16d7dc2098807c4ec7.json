{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _assertThisInitialized from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport \"../../../../../core/has.js\";\nimport { isSome as t } from \"../../../../../core/maybe.js\";\nimport { property as s } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport { subclass as r } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { r as i } from \"../../../../../chunks/rbush.js\";\nimport { convertFromFeature as o, quantizeOptimizedGeometry as n, quantizeX as a, quantizeY as c } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport d from \"../../../../../layers/graphics/OptimizedGeometry.js\";\nimport { StreamFeatureManager as h } from \"../../../../../layers/graphics/data/StreamFeatureManager.js\";\nimport { createConnection as u } from \"../../../../../layers/graphics/sources/connections/createConnection.js\";\nimport { DataTileSource as p } from \"./DataTileSource.js\";\nimport { FeatureSetReaderJSON as l } from \"../support/FeatureSetReaderJSON.js\";\nimport { UpdateToken as m } from \"../support/UpdateToken.js\";\nvar _ = 2500;\nfunction y(e, s) {\n  var r = e.weakClone();\n  if (t(e.geometry)) {\n    var _t = a(s, e.geometry.coords[0]),\n      _i = c(s, e.geometry.coords[1]);\n    r.geometry = new d([], [_t, _i]);\n  }\n  return r;\n}\nfunction g(e) {\n  return \"esriGeometryPoint\" === e ? y : function (t, s) {\n    var r = t.weakClone(),\n      i = new d(),\n      o = !1,\n      a = !1,\n      c = n(i, t.geometry, o, a, e, s, !1, !1);\n    return r.geometry = c, r;\n  };\n}\nfunction f(e) {\n  return \"esriGeometryPoint\" === e ? function (e) {\n    return t(e.geometry) ? {\n      minX: e.geometry.coords[0],\n      minY: e.geometry.coords[1],\n      maxX: e.geometry.coords[0],\n      maxY: e.geometry.coords[1]\n    } : {\n      minX: 1 / 0,\n      minY: 1 / 0,\n      maxX: -1 / 0,\n      maxY: -1 / 0\n    };\n  } : function (e) {\n    var s = 1 / 0,\n      r = 1 / 0,\n      i = -1 / 0,\n      o = -1 / 0;\n    return t(e.geometry) && e.geometry.forEachVertex(function (e, t) {\n      s = Math.min(s, e), r = Math.min(r, t), i = Math.max(i, e), o = Math.max(o, t);\n    }), {\n      minX: s,\n      minY: r,\n      maxX: i,\n      maxY: o\n    };\n  };\n}\nfunction b(e, t) {\n  var s = i(9, f(t));\n  return s.load(e), s;\n}\nfunction v(e, t) {\n  return e.search({\n    minX: t.bounds[0],\n    minY: t.bounds[1],\n    maxX: t.bounds[2],\n    maxY: t.bounds[3]\n  });\n}\nvar I = /*#__PURE__*/function () {\n  function I(e, t) {\n    _classCallCheck(this, I);\n    this.onUpdate = e, this._geometryType = t, this._objectIdToFeature = new Map(), this._index = null;\n  }\n  _createClass(I, [{\n    key: \"_features\",\n    get: function get() {\n      var e = [];\n      return this._objectIdToFeature.forEach(function (t) {\n        return e.push(t);\n      }), e;\n    }\n  }, {\n    key: \"add\",\n    value: function add(e) {\n      this._objectIdToFeature.set(e.objectId, e), this._index = null;\n    }\n  }, {\n    key: \"get\",\n    value: function get(e) {\n      return this._objectIdToFeature.has(e) ? this._objectIdToFeature.get(e) : null;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(e) {\n      this._objectIdToFeature.forEach(e);\n    }\n  }, {\n    key: \"search\",\n    value: function search(e) {\n      return this._index || (this._index = b(this._features, this._geometryType)), v(this._index, e);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this._index = null, this._objectIdToFeature.clear();\n    }\n  }, {\n    key: \"removeById\",\n    value: function removeById(e) {\n      var t = this._objectIdToFeature.get(e);\n      return t ? (this._objectIdToFeature.delete(e), this._index = null, t) : null;\n    }\n  }, {\n    key: \"update\",\n    value: function update(e, t) {\n      this.onUpdate(e, t);\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this._objectIdToFeature.size;\n    }\n  }]);\n  return I;\n}();\nvar T = /*#__PURE__*/function (_p) {\n  _inherits(T, _p);\n  var _super = _createSuper(T);\n  function T(e) {\n    var _this;\n    _classCallCheck(this, T);\n    _this = _super.call(this, e), _this.type = \"stream\", _this._updateIntervalId = 0, _this._level = 0, _this._updateInfo = {\n      websocket: 0,\n      client: 0\n    }, _this._isPaused = !1, _this._inUpdate = !1;\n    var t = e.outSR,\n      _e$serviceInfo = e.serviceInfo,\n      s = _e$serviceInfo.geometryType,\n      r = _e$serviceInfo.objectIdField,\n      i = _e$serviceInfo.timeInfo,\n      o = _e$serviceInfo.purgeOptions,\n      n = _e$serviceInfo.source,\n      a = _e$serviceInfo.spatialReference,\n      c = _e$serviceInfo.serviceFilter,\n      d = _e$serviceInfo.maxReconnectionAttempts,\n      p = _e$serviceInfo.maxReconnectionInterval,\n      l = _e$serviceInfo.updateInterval,\n      m = _e$serviceInfo.customParameters,\n      y = _e$serviceInfo.enabledEventTypes,\n      f = new I(_this._onUpdate.bind(_assertThisInitialized(_this)), s),\n      b = new h(f, r, i, o),\n      v = u(n, a, t, s, c, d, p, m !== null && m !== void 0 ? m : {});\n    _this._store = f, _this._manager = b, _this._connection = v, _this._quantize = g(s), _this._enabledEventTypes = new Set(y), _this._handles = [_this._connection.on(\"data-received\", function (e) {\n      return _this._onFeature(e);\n    }), _this._connection.on(\"message-received\", function (e) {\n      return _this._onWebSocketMessage(e);\n    })], _this._initUpdateInterval = function () {\n      var t = performance.now();\n      _this._updateIntervalId = setInterval(function () {\n        var s = performance.now(),\n          r = s - t;\n        if (r > _) {\n          t = s;\n          var _e = Math.round(_this._updateInfo.client / (r / 1e3)),\n            _i2 = Math.round(_this._updateInfo.websocket / (r / 1e3));\n          _this._updateInfo.client = 0, _this._updateInfo.websocket = 0, _this.events.emit(\"updateRate\", {\n            client: _e,\n            websocket: _i2\n          });\n        }\n        e.canAcceptRequest() && !_this._inUpdate && _this._manager.checkForUpdates();\n      }, l);\n    }, _this._initUpdateInterval();\n    return _this;\n  }\n  _createClass(T, [{\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(T.prototype), \"destroy\", this).call(this), this._clearUpdateInterval(), this._handles.forEach(function (e) {\n        return e.remove();\n      }), this._connection.destroy();\n    }\n  }, {\n    key: \"_fetchDataTile\",\n    value: function _fetchDataTile() {}\n  }, {\n    key: \"connectionStatus\",\n    get: function get() {\n      var _this$_connection;\n      return this._isPaused ? \"paused\" : (_this$_connection = this._connection) === null || _this$_connection === void 0 ? void 0 : _this$_connection.connectionStatus;\n    }\n  }, {\n    key: \"errorString\",\n    get: function get() {\n      var _this$_connection2;\n      return (_this$_connection2 = this._connection) === null || _this$_connection2 === void 0 ? void 0 : _this$_connection2.errorString;\n    }\n  }, {\n    key: \"updateCustomParameters\",\n    value: function updateCustomParameters(e) {\n      this._connection.updateCustomParameters(e);\n    }\n  }, {\n    key: \"pauseStream\",\n    value: function pauseStream() {\n      this._isPaused || (this._isPaused = !0, this._clearUpdateInterval());\n    }\n  }, {\n    key: \"resumeStream\",\n    value: function resumeStream() {\n      this._isPaused && (this._isPaused = !1, this._initUpdateInterval());\n    }\n  }, {\n    key: \"sendMessageToSocket\",\n    value: function sendMessageToSocket(e) {\n      this._connection.sendMessageToSocket(e);\n    }\n  }, {\n    key: \"sendMessageToClient\",\n    value: function sendMessageToClient(e) {\n      this._connection.sendMessageToClient(e);\n    }\n  }, {\n    key: \"enableEvent\",\n    value: function enableEvent(e, t) {\n      t ? this._enabledEventTypes.add(e) : this._enabledEventTypes.delete(e);\n    }\n  }, {\n    key: \"updating\",\n    get: function get() {\n      return !1;\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(e, t) {\n      _get(_getPrototypeOf(T.prototype), \"subscribe\", this).call(this, e, t);\n      var s = this._subscriptions.get(e.id);\n      this._level = e.level;\n      var r = this._getTileFeatures(e);\n      this._onMessage({\n        type: \"append\",\n        id: e.key.id,\n        addOrUpdate: r,\n        end: !0\n      }), s.didSend = !0;\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(e) {\n      _get(_getPrototypeOf(T.prototype), \"unsubscribe\", this).call(this, e);\n    }\n  }, {\n    key: \"readers\",\n    value: /*#__PURE__*/_regeneratorRuntime().mark(function readers(e) {\n      var t, s;\n      return _regeneratorRuntime().wrap(function readers$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            t = this._subscriptions.get(e), s = t.tile;\n            _context.next = 3;\n            return this._getTileFeatures(s);\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, readers, this);\n    })\n  }, {\n    key: \"createTileQuery\",\n    value: function createTileQuery(e) {\n      throw new Error(\"Service does not support tile  queries\");\n    }\n  }, {\n    key: \"resend\",\n    value: function () {\n      var _resend = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this2 = this;\n        return _regeneratorRuntime().wrap(function _callee$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              this._subscriptions.forEach(function (e) {\n                var t = e.tile,\n                  s = {\n                    type: \"append\",\n                    id: t.id,\n                    addOrUpdate: _this2._getTileFeatures(t),\n                    end: !0\n                  };\n                _this2._onMessage(s);\n              });\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee, this);\n      }));\n      function resend() {\n        return _resend.apply(this, arguments);\n      }\n      return resend;\n    }()\n  }, {\n    key: \"_getTileFeatures\",\n    value: function _getTileFeatures(e) {\n      var _this3 = this;\n      var t = this._store.search(e).map(function (t) {\n        return _this3._quantize(t, e.transform);\n      });\n      return l.fromOptimizedFeatures(t, this._serviceInfo, e.transform);\n    }\n  }, {\n    key: \"_onWebSocketMessage\",\n    value: function _onWebSocketMessage(e) {\n      var _this4 = this;\n      if (this._enabledEventTypes.has(\"message-received\") && this.events.emit(\"message-received\", e), \"type\" in e) switch (e.type) {\n        case \"delete\":\n          if (e.objectIds) {\n            var _iterator = _createForOfIteratorHelper(e.objectIds),\n              _step;\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var _t2 = _step.value;\n                this._manager.removeById(_t2);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n          }\n          if (e.trackIds) {\n            var _iterator2 = _createForOfIteratorHelper(e.trackIds),\n              _step2;\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var _t3 = _step2.value;\n                this._manager.removeByTrackId(_t3);\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n          }\n          break;\n        case \"clear\":\n          this._store.forEach(function (e) {\n            return _this4._manager.removeById(e.objectId);\n          });\n      }\n    }\n  }, {\n    key: \"_onFeature\",\n    value: function _onFeature(e) {\n      this._updateInfo.websocket++;\n      try {\n        this._enabledEventTypes.has(\"data-received\") && this.events.emit(\"data-received\", e);\n        var _t4 = o(e, this._serviceInfo.geometryType, !1, !1, this._serviceInfo.objectIdField);\n        this._manager.add(_t4);\n      } catch (t) {}\n    }\n  }, {\n    key: \"_clearUpdateInterval\",\n    value: function _clearUpdateInterval() {\n      clearInterval(this._updateIntervalId), this._updateIntervalId = 0;\n    }\n  }, {\n    key: \"_onUpdate\",\n    value: function () {\n      var _onUpdate2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e, s) {\n        var _this5 = this;\n        var _s;\n        return _regeneratorRuntime().wrap(function _callee2$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              this._inUpdate = !0;\n              _context3.prev = 1;\n              t(e) && (this._updateInfo.client += e.length), this._subscriptions.forEach(function (e, t) {\n                e.didSend && e.tile.level === _this5._level && _this5._onMessage({\n                  type: \"append\",\n                  id: t,\n                  addOrUpdate: null,\n                  clear: !0,\n                  end: !1\n                });\n              });\n              _s = [];\n              this._subscriptions.forEach(function (e, t) {\n                if (!e.didSend || e.tile.level !== _this5._level) return;\n                var r = e.tile,\n                  i = {\n                    type: \"append\",\n                    id: t,\n                    addOrUpdate: _this5._getTileFeatures(r),\n                    remove: [],\n                    end: !1,\n                    status: m.empty()\n                  };\n                e.requests.stream.enqueue(i), _s.push(_this5._onMessage(i));\n              });\n              _context3.next = 7;\n              return Promise.all(_s);\n            case 7:\n              this._subscriptions.forEach(function (e, t) {\n                e.didSend && e.tile.level === _this5._level && _this5._onMessage({\n                  type: \"append\",\n                  id: t,\n                  addOrUpdate: null,\n                  end: !0\n                });\n              });\n              _context3.next = 12;\n              break;\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](1);\n            case 12:\n              this._inUpdate = !1;\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee2, this, [[1, 10]]);\n      }));\n      function _onUpdate(_x, _x2) {\n        return _onUpdate2.apply(this, arguments);\n      }\n      return _onUpdate;\n    }()\n  }]);\n  return T;\n}(p);\ne([s()], T.prototype, \"_isPaused\", void 0), e([s()], T.prototype, \"connectionStatus\", null), e([s()], T.prototype, \"errorString\", null), T = e([r(\"esri.views.2d.layers.features.sources\")], T);\nexport { T as StreamSource };","map":{"version":3,"names":["_","e","isSome","t","property","s","subclass","r","i","convertFromFeature","o","quantizeOptimizedGeometry","n","quantizeX","a","quantizeY","c","d","StreamFeatureManager","h","createConnection","u","DataTileSource","p","FeatureSetReaderJSON","l","UpdateToken","m","y","weakClone","geometry","coords","g","f","minX","minY","maxX","maxY","forEachVertex","Math","min","max","b","load","v","search","bounds","I","_classCallCheck","onUpdate","_geometryType","_objectIdToFeature","Map","_index","_createClass","key","get","forEach","push","value","add","set","objectId","has","_features","clear","removeById","delete","update","size","T","_p","_inherits","_super","_createSuper","_this","call","type","_updateIntervalId","_level","_updateInfo","websocket","client","_isPaused","_inUpdate","outSR","_e$serviceInfo","serviceInfo","geometryType","objectIdField","timeInfo","purgeOptions","source","spatialReference","serviceFilter","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","customParameters","enabledEventTypes","_onUpdate","bind","_assertThisInitialized","_store","_manager","_connection","_quantize","_enabledEventTypes","Set","_handles","on","_onFeature","_onWebSocketMessage","_initUpdateInterval","performance","now","setInterval","round","events","emit","canAcceptRequest","checkForUpdates","destroy","_get","_getPrototypeOf","prototype","_clearUpdateInterval","remove","_fetchDataTile","_this$_connection","connectionStatus","_this$_connection2","errorString","updateCustomParameters","pauseStream","resumeStream","sendMessageToSocket","sendMessageToClient","enableEvent","subscribe","_subscriptions","id","level","_getTileFeatures","_onMessage","addOrUpdate","end","didSend","unsubscribe","_regeneratorRuntime","mark","readers","wrap","readers$","_context","prev","next","tile","stop","createTileQuery","Error","_resend","_asyncToGenerator","_callee","_this2","_callee$","_context2","resend","apply","arguments","_this3","map","transform","fromOptimizedFeatures","_serviceInfo","_this4","objectIds","_iterator","_createForOfIteratorHelper","_step","done","err","trackIds","_iterator2","_step2","removeByTrackId","clearInterval","_onUpdate2","_callee2","_this5","_s","_callee2$","_context3","length","status","empty","requests","stream","enqueue","Promise","all","t0","_x","_x2","StreamSource"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/views/2d/layers/features/sources/StreamSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t}from\"../../../../../core/maybe.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{r as i}from\"../../../../../chunks/rbush.js\";import{convertFromFeature as o,quantizeOptimizedGeometry as n,quantizeX as a,quantizeY as c}from\"../../../../../layers/graphics/featureConversionUtils.js\";import d from\"../../../../../layers/graphics/OptimizedGeometry.js\";import{StreamFeatureManager as h}from\"../../../../../layers/graphics/data/StreamFeatureManager.js\";import{createConnection as u}from\"../../../../../layers/graphics/sources/connections/createConnection.js\";import{DataTileSource as p}from\"./DataTileSource.js\";import{FeatureSetReaderJSON as l}from\"../support/FeatureSetReaderJSON.js\";import{UpdateToken as m}from\"../support/UpdateToken.js\";const _=2500;function y(e,s){const r=e.weakClone();if(t(e.geometry)){const t=a(s,e.geometry.coords[0]),i=c(s,e.geometry.coords[1]);r.geometry=new d([],[t,i])}return r}function g(e){return\"esriGeometryPoint\"===e?y:(t,s)=>{const r=t.weakClone(),i=new d,o=!1,a=!1,c=n(i,t.geometry,o,a,e,s,!1,!1);return r.geometry=c,r}}function f(e){return\"esriGeometryPoint\"===e?e=>t(e.geometry)?{minX:e.geometry.coords[0],minY:e.geometry.coords[1],maxX:e.geometry.coords[0],maxY:e.geometry.coords[1]}:{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}:e=>{let s=1/0,r=1/0,i=-1/0,o=-1/0;return t(e.geometry)&&e.geometry.forEachVertex(((e,t)=>{s=Math.min(s,e),r=Math.min(r,t),i=Math.max(i,e),o=Math.max(o,t)})),{minX:s,minY:r,maxX:i,maxY:o}}}function b(e,t){const s=i(9,f(t));return s.load(e),s}function v(e,t){return e.search({minX:t.bounds[0],minY:t.bounds[1],maxX:t.bounds[2],maxY:t.bounds[3]})}class I{constructor(e,t){this.onUpdate=e,this._geometryType=t,this._objectIdToFeature=new Map,this._index=null}get _features(){const e=[];return this._objectIdToFeature.forEach((t=>e.push(t))),e}add(e){this._objectIdToFeature.set(e.objectId,e),this._index=null}get(e){return this._objectIdToFeature.has(e)?this._objectIdToFeature.get(e):null}forEach(e){this._objectIdToFeature.forEach(e)}search(e){return this._index||(this._index=b(this._features,this._geometryType)),v(this._index,e)}clear(){this._index=null,this._objectIdToFeature.clear()}removeById(e){const t=this._objectIdToFeature.get(e);return t?(this._objectIdToFeature.delete(e),this._index=null,t):null}update(e,t){this.onUpdate(e,t)}get size(){return this._objectIdToFeature.size}}let T=class extends p{constructor(e){super(e),this.type=\"stream\",this._updateIntervalId=0,this._level=0,this._updateInfo={websocket:0,client:0},this._isPaused=!1,this._inUpdate=!1;const{outSR:t}=e,{geometryType:s,objectIdField:r,timeInfo:i,purgeOptions:o,source:n,spatialReference:a,serviceFilter:c,maxReconnectionAttempts:d,maxReconnectionInterval:p,updateInterval:l,customParameters:m,enabledEventTypes:y}=e.serviceInfo,f=new I(this._onUpdate.bind(this),s),b=new h(f,r,i,o),v=u(n,a,t,s,c,d,p,m??{});this._store=f,this._manager=b,this._connection=v,this._quantize=g(s),this._enabledEventTypes=new Set(y),this._handles=[this._connection.on(\"data-received\",(e=>this._onFeature(e))),this._connection.on(\"message-received\",(e=>this._onWebSocketMessage(e)))],this._initUpdateInterval=()=>{let t=performance.now();this._updateIntervalId=setInterval((()=>{const s=performance.now(),r=s-t;if(r>_){t=s;const e=Math.round(this._updateInfo.client/(r/1e3)),i=Math.round(this._updateInfo.websocket/(r/1e3));this._updateInfo.client=0,this._updateInfo.websocket=0,this.events.emit(\"updateRate\",{client:e,websocket:i})}e.canAcceptRequest()&&!this._inUpdate&&this._manager.checkForUpdates()}),l)},this._initUpdateInterval()}destroy(){super.destroy(),this._clearUpdateInterval(),this._handles.forEach((e=>e.remove())),this._connection.destroy()}_fetchDataTile(){}get connectionStatus(){return this._isPaused?\"paused\":this._connection?.connectionStatus}get errorString(){return this._connection?.errorString}updateCustomParameters(e){this._connection.updateCustomParameters(e)}pauseStream(){this._isPaused||(this._isPaused=!0,this._clearUpdateInterval())}resumeStream(){this._isPaused&&(this._isPaused=!1,this._initUpdateInterval())}sendMessageToSocket(e){this._connection.sendMessageToSocket(e)}sendMessageToClient(e){this._connection.sendMessageToClient(e)}enableEvent(e,t){t?this._enabledEventTypes.add(e):this._enabledEventTypes.delete(e)}get updating(){return!1}subscribe(e,t){super.subscribe(e,t);const s=this._subscriptions.get(e.id);this._level=e.level;const r=this._getTileFeatures(e);this._onMessage({type:\"append\",id:e.key.id,addOrUpdate:r,end:!0}),s.didSend=!0}unsubscribe(e){super.unsubscribe(e)}*readers(e){const t=this._subscriptions.get(e),{tile:s}=t;yield this._getTileFeatures(s)}createTileQuery(e){throw new Error(\"Service does not support tile  queries\")}async resend(){this._subscriptions.forEach((e=>{const{tile:t}=e,s={type:\"append\",id:t.id,addOrUpdate:this._getTileFeatures(t),end:!0};this._onMessage(s)}))}_getTileFeatures(e){const t=this._store.search(e).map((t=>this._quantize(t,e.transform)));return l.fromOptimizedFeatures(t,this._serviceInfo,e.transform)}_onWebSocketMessage(e){if(this._enabledEventTypes.has(\"message-received\")&&this.events.emit(\"message-received\",e),\"type\"in e)switch(e.type){case\"delete\":if(e.objectIds)for(const t of e.objectIds)this._manager.removeById(t);if(e.trackIds)for(const t of e.trackIds)this._manager.removeByTrackId(t);break;case\"clear\":this._store.forEach((e=>this._manager.removeById(e.objectId)))}}_onFeature(e){this._updateInfo.websocket++;try{this._enabledEventTypes.has(\"data-received\")&&this.events.emit(\"data-received\",e);const t=o(e,this._serviceInfo.geometryType,!1,!1,this._serviceInfo.objectIdField);this._manager.add(t)}catch(t){}}_clearUpdateInterval(){clearInterval(this._updateIntervalId),this._updateIntervalId=0}async _onUpdate(e,s){this._inUpdate=!0;try{t(e)&&(this._updateInfo.client+=e.length),this._subscriptions.forEach(((e,t)=>{e.didSend&&e.tile.level===this._level&&this._onMessage({type:\"append\",id:t,addOrUpdate:null,clear:!0,end:!1})}));const s=[];this._subscriptions.forEach(((e,t)=>{if(!e.didSend||e.tile.level!==this._level)return;const r=e.tile,i={type:\"append\",id:t,addOrUpdate:this._getTileFeatures(r),remove:[],end:!1,status:m.empty()};e.requests.stream.enqueue(i),s.push(this._onMessage(i))})),await Promise.all(s),this._subscriptions.forEach(((e,t)=>{e.didSend&&e.tile.level===this._level&&this._onMessage({type:\"append\",id:t,addOrUpdate:null,end:!0})}))}catch{}this._inUpdate=!1}};e([s()],T.prototype,\"_isPaused\",void 0),e([s()],T.prototype,\"connectionStatus\",null),e([s()],T.prototype,\"errorString\",null),T=e([r(\"esri.views.2d.layers.features.sources\")],T);export{T as StreamSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}