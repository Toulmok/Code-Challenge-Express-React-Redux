{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { a as e, w as a } from \"./mat4.js\";\nimport { c as r } from \"./mat4f64.js\";\nimport { ScreenSpacePass as o } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";\nimport { ReadLinearDepth as s } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";\nimport { ReadShadowMapBindParameters as i, ReadShadowMapPass as t } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";\nimport { CameraSpace as d } from \"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";\nimport { RgbaFloatEncoding as l } from \"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";\nimport { Float2PassUniform as n } from \"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";\nimport { glsl as c } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { Matrix4PassUniform as p } from \"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";\nimport { ShaderBuilder as h } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as m } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nclass w extends i {}\nconst u = 255,\n  g = 1 / u;\nfunction f(r) {\n  const i = new h(),\n    w = i.fragment;\n  return w.include(l), w.include(s), i.include(d), i.include(o), i.include(t, r), w.uniforms.add([new m(\"depthMap\", e => e.linearDepthTexture), new p(\"inverseViewMatrix\", (r, o) => e(v, a(v, o.camera.viewMatrix, o.camera.center))), new n(\"nearFar\", (e, a) => a.camera.nearFar)]), w.constants.add(\"sampleValue\", \"float\", g), w.code.add(c`void main(void) {\nfloat depth = rgba2float(texture2D(depthMap, uv));\nif (depth == 0.0) {\ndiscard;\n}\nfloat currentPixelDepth = linearDepthFromFloat(depth, nearFar);\nif (-currentPixelDepth > nearFar.y || -currentPixelDepth < nearFar.x) {\ndiscard;\n}\nvec4 currentPixelPos = vec4(reconstructPosition(gl_FragCoord.xy, currentPixelDepth), 1.0);\nvec4 worldSpacePos = inverseViewMatrix * currentPixelPos;\nmat4 shadowMatrix;\nfloat linearDepth = -currentPixelDepth;\nint i = chooseCascade(linearDepth, shadowMatrix);\nif (i >= numCascades) {\ndiscard;\n}\nvec3 lvpos = lightSpacePosition(worldSpacePos.xyz, shadowMatrix);\nif (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) {\ndiscard;\n}\nvec2 uvShadow = cascadeCoordinates(i, lvpos);\nfloat depthShadow = readShadowMapDepth(uvShadow, shadowMapTex);\nbool shadow = depthShadow < lvpos.z;\nif (!shadow) {\ndiscard;\n}\ngl_FragColor = vec4(sampleValue);\n}`), i;\n}\nconst v = r(),\n  x = Object.freeze(Object.defineProperty({\n    __proto__: null,\n    ShadowCastAccumulatePassParameters: w,\n    ShadowCastMaxSamples: u,\n    build: f\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nexport { w as S, u as a, x as b, f as c };","map":{"version":3,"names":["a","e","w","c","r","ScreenSpacePass","o","ReadLinearDepth","s","ReadShadowMapBindParameters","i","ReadShadowMapPass","t","CameraSpace","d","RgbaFloatEncoding","l","Float2PassUniform","n","glsl","Matrix4PassUniform","p","ShaderBuilder","h","Texture2DPassUniform","m","u","g","f","fragment","include","uniforms","add","linearDepthTexture","v","camera","viewMatrix","center","nearFar","constants","code","x","Object","freeze","defineProperty","__proto__","ShadowCastAccumulatePassParameters","ShadowCastMaxSamples","build","Symbol","toStringTag","value","S","b"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/chunks/ShadowCastAccumulate.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{a as e,w as a}from\"./mat4.js\";import{c as r}from\"./mat4f64.js\";import{ScreenSpacePass as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadLinearDepth as s}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{ReadShadowMapBindParameters as i,ReadShadowMapPass as t}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{CameraSpace as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";import{RgbaFloatEncoding as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float2PassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{glsl as c}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Matrix4PassUniform as p}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{ShaderBuilder as h}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";class w extends i{}const u=255,g=1/u;function f(r){const i=new h,w=i.fragment;return w.include(l),w.include(s),i.include(d),i.include(o),i.include(t,r),w.uniforms.add([new m(\"depthMap\",(e=>e.linearDepthTexture)),new p(\"inverseViewMatrix\",((r,o)=>e(v,a(v,o.camera.viewMatrix,o.camera.center)))),new n(\"nearFar\",((e,a)=>a.camera.nearFar))]),w.constants.add(\"sampleValue\",\"float\",g),w.code.add(c`void main(void) {\nfloat depth = rgba2float(texture2D(depthMap, uv));\nif (depth == 0.0) {\ndiscard;\n}\nfloat currentPixelDepth = linearDepthFromFloat(depth, nearFar);\nif (-currentPixelDepth > nearFar.y || -currentPixelDepth < nearFar.x) {\ndiscard;\n}\nvec4 currentPixelPos = vec4(reconstructPosition(gl_FragCoord.xy, currentPixelDepth), 1.0);\nvec4 worldSpacePos = inverseViewMatrix * currentPixelPos;\nmat4 shadowMatrix;\nfloat linearDepth = -currentPixelDepth;\nint i = chooseCascade(linearDepth, shadowMatrix);\nif (i >= numCascades) {\ndiscard;\n}\nvec3 lvpos = lightSpacePosition(worldSpacePos.xyz, shadowMatrix);\nif (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) {\ndiscard;\n}\nvec2 uvShadow = cascadeCoordinates(i, lvpos);\nfloat depthShadow = readShadowMapDepth(uvShadow, shadowMapTex);\nbool shadow = depthShadow < lvpos.z;\nif (!shadow) {\ndiscard;\n}\ngl_FragColor = vec4(sampleValue);\n}`),i}const v=r(),x=Object.freeze(Object.defineProperty({__proto__:null,ShadowCastAccumulatePassParameters:w,ShadowCastMaxSamples:u,build:f},Symbol.toStringTag,{value:\"Module\"}));export{w as S,u as a,x as b,f as c};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,EAACC,CAAC,IAAIF,CAAC,QAAK,WAAW;AAAC,SAAOG,CAAC,IAAIC,CAAC,QAAK,cAAc;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,qEAAqE;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,4EAA4E;AAAC,SAAOC,2BAA2B,IAAIC,CAAC,EAACC,iBAAiB,IAAIC,CAAC,QAAK,2EAA2E;AAAC,SAAOC,WAAW,IAAIC,CAAC,QAAK,sEAAsE;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,4EAA4E;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,kEAAkE;AAAC,SAAOC,IAAI,IAAIhB,CAAC,QAAK,2DAA2D;AAAC,SAAOiB,kBAAkB,IAAIC,CAAC,QAAK,mEAAmE;AAAC,SAAOC,aAAa,IAAIC,CAAC,QAAK,8DAA8D;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,qEAAqE;AAAC,MAAMvB,CAAC,SAASQ,CAAC;AAAE,MAAMgB,CAAC,GAAC,GAAG;EAACC,CAAC,GAAC,CAAC,GAACD,CAAC;AAAC,SAASE,CAACA,CAACxB,CAAC,EAAC;EAAC,MAAMM,CAAC,GAAC,IAAIa,CAAC;IAACrB,CAAC,GAACQ,CAAC,CAACmB,QAAQ;EAAC,OAAO3B,CAAC,CAAC4B,OAAO,CAACd,CAAC,CAAC,EAACd,CAAC,CAAC4B,OAAO,CAACtB,CAAC,CAAC,EAACE,CAAC,CAACoB,OAAO,CAAChB,CAAC,CAAC,EAACJ,CAAC,CAACoB,OAAO,CAACxB,CAAC,CAAC,EAACI,CAAC,CAACoB,OAAO,CAAClB,CAAC,EAACR,CAAC,CAAC,EAACF,CAAC,CAAC6B,QAAQ,CAACC,GAAG,CAAC,CAAC,IAAIP,CAAC,CAAC,UAAU,EAAExB,CAAC,IAAEA,CAAC,CAACgC,kBAAkB,CAAE,EAAC,IAAIZ,CAAC,CAAC,mBAAmB,EAAE,CAACjB,CAAC,EAACE,CAAC,KAAGL,CAAC,CAACiC,CAAC,EAAClC,CAAC,CAACkC,CAAC,EAAC5B,CAAC,CAAC6B,MAAM,CAACC,UAAU,EAAC9B,CAAC,CAAC6B,MAAM,CAACE,MAAM,CAAC,CAAC,CAAE,EAAC,IAAInB,CAAC,CAAC,SAAS,EAAE,CAACjB,CAAC,EAACD,CAAC,KAAGA,CAAC,CAACmC,MAAM,CAACG,OAAO,CAAE,CAAC,CAAC,EAACpC,CAAC,CAACqC,SAAS,CAACP,GAAG,CAAC,aAAa,EAAC,OAAO,EAACL,CAAC,CAAC,EAACzB,CAAC,CAACsC,IAAI,CAACR,GAAG,CAAC7B,CAAE;AACx+C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,EAACO,CAAC;AAAA;AAAC,MAAMwB,CAAC,GAAC9B,CAAC,EAAE;EAACqC,CAAC,GAACC,MAAM,CAACC,MAAM,CAACD,MAAM,CAACE,cAAc,CAAC;IAACC,SAAS,EAAC,IAAI;IAACC,kCAAkC,EAAC5C,CAAC;IAAC6C,oBAAoB,EAACrB,CAAC;IAACsB,KAAK,EAACpB;EAAC,CAAC,EAACqB,MAAM,CAACC,WAAW,EAAC;IAACC,KAAK,EAAC;EAAQ,CAAC,CAAC,CAAC;AAAC,SAAOjD,CAAC,IAAIkD,CAAC,EAAC1B,CAAC,IAAI1B,CAAC,EAACyC,CAAC,IAAIY,CAAC,EAACzB,CAAC,IAAIzB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}