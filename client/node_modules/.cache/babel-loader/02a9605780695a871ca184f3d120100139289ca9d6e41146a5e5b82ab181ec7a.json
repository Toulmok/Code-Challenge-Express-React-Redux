{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { a as e } from \"./vec2f64.js\";\nimport { c as o } from \"./vec3f64.js\";\nimport { SimpleAtmosphereGeometry as i } from \"../views/3d/environment/SimpleAtmosphereTechniqueConfiguration.js\";\nimport { Transform as r } from \"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";\nimport { addMainLightDirection as t } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";\nimport { Float2PassUniform as n } from \"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";\nimport { Float3PassUniform as s } from \"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";\nimport { FloatPassUniform as a } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { NoParameters as l, glsl as d } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { Matrix4PassUniform as c } from \"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";\nimport { ShaderBuilder as m } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as f } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nimport { VertexAttribute as g } from \"../views/3d/webgl-engine/lib/VertexAttribute.js\";\nclass p extends l {\n  constructor() {\n    super(...arguments), this.texV = e(), this.altitudeFade = 0, this.innerScale = 0, this.undergroundFadeAlpha = 0, this.silhouette = new u();\n  }\n}\nclass u {\n  constructor() {\n    this.center = o(), this.v1 = o(), this.v2 = o();\n  }\n}\nfunction v(e) {\n  const o = new m(),\n    {\n      vertex: l,\n      fragment: p\n    } = o;\n  if (t(l), e.geometry === i.Underground) o.attributes.add(g.POSITION, \"vec2\"), o.varyings.add(\"color\", \"vec4\"), l.uniforms.add([new s(\"cameraPosition\", (e, o) => o.camera.eye), new a(\"undergroundFadeAlpha\", e => e.undergroundFadeAlpha)]), l.code.add(d`void main(void) {\nfloat ndotl = dot(normalize(cameraPosition), mainLightDirection);\nfloat lighting = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\ncolor = vec4(vec3(lighting), undergroundFadeAlpha);\ngl_Position = vec4(position.xy, 1.0, 1.0);\n}`), p.code.add(d`void main() {\ngl_FragColor = color;\n}`);else {\n    o.include(r, e), o.attributes.add(g.POSITION, \"vec3\"), o.varyings.add(\"vtc\", \"vec2\"), o.varyings.add(\"falloff\", \"float\");\n    const t = e.geometry === i.Cylinder;\n    l.uniforms.add([new c(\"proj\", (e, o) => o.camera.projectionMatrix), new c(\"view\", (e, o) => o.camera.viewMatrix)]), t || (o.varyings.add(\"innerFactor\", \"float\"), l.uniforms.add(new s(\"silCircleCenter\", e => e.silhouette.center)), l.uniforms.add(new s(\"silCircleV1\", e => e.silhouette.v1)), l.uniforms.add(new s(\"silCircleV2\", e => e.silhouette.v2)), l.uniforms.add(new n(\"texV\", e => e.texV)), l.uniforms.add(new a(\"innerScale\", e => e.innerScale)));\n    const m = 6.2831853,\n      u = 1 / 128;\n    l.code.add(d`\n\t\tvoid main(void) {\n      ${t ? d`\n      vec3 pos = position;\n      float ndotl = mainLightDirection.z;\n      vtc = vec2(0.0, position.z + 0.05);` : d`\n      innerFactor = clamp(-position.z, 0.0, 1.0);\n      float scale = position.y * (1.0 + innerFactor * innerScale);\n      float phi = position.x * ${d.float(m * u)} + 1.0;\n      vec3 pos =  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;\n      float ndotl = dot(normalize(position.y > 0.0 ? pos: silCircleCenter), mainLightDirection);\n      vtc.x = position.x  * ${d.float(u)};\n      vtc.y = texV.x * (1.0 - position.z) + texV.y * position.z;\n      `}\n      falloff = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n\n\t\t  gl_Position = transformPosition(proj, view, pos);\n\t\t  gl_Position.z = gl_Position.w; // project atmosphere onto the far plane\n    }\n\t  `), p.uniforms.add(new f(\"tex\", e => e.texture)), t || p.uniforms.add(new a(\"altitudeFade\", e => e.altitudeFade)), p.code.add(d`\n\t\tvoid main() {\n\t\t\tvec4 atmosphereColor = texture2D(tex, vtc) * falloff;\n      ${t ? d`gl_FragColor = atmosphereColor;` : d`\n\t\t\tvec4 innerColor = vec4(atmosphereColor.rgb, 1.0 - altitudeFade);\n\t\t\tgl_FragColor = mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));\n      `}\n    }`);\n  }\n  return o;\n}\nconst h = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  SilhouetteCircle: u,\n  SimpleAtmospherePassParameters: p,\n  build: v\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { p as S, h as a, u as b, v as c };","map":{"version":3,"names":["a","e","c","o","SimpleAtmosphereGeometry","i","Transform","r","addMainLightDirection","t","Float2PassUniform","n","Float3PassUniform","s","FloatPassUniform","NoParameters","l","glsl","d","Matrix4PassUniform","ShaderBuilder","m","Texture2DPassUniform","f","VertexAttribute","g","p","constructor","arguments","texV","altitudeFade","innerScale","undergroundFadeAlpha","silhouette","u","center","v1","v2","v","vertex","fragment","geometry","Underground","attributes","add","POSITION","varyings","uniforms","camera","eye","code","include","Cylinder","projectionMatrix","viewMatrix","float","texture","h","Object","freeze","defineProperty","__proto__","SilhouetteCircle","SimpleAtmospherePassParameters","build","Symbol","toStringTag","value","S","b"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/chunks/SimpleAtmosphere.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{a as e}from\"./vec2f64.js\";import{c as o}from\"./vec3f64.js\";import{SimpleAtmosphereGeometry as i}from\"../views/3d/environment/SimpleAtmosphereTechniqueConfiguration.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{addMainLightDirection as t}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";import{Float2PassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float3PassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{FloatPassUniform as a}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{NoParameters as l,glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Matrix4PassUniform as c}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{ShaderBuilder as m}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as g}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";class p extends l{constructor(){super(...arguments),this.texV=e(),this.altitudeFade=0,this.innerScale=0,this.undergroundFadeAlpha=0,this.silhouette=new u}}class u{constructor(){this.center=o(),this.v1=o(),this.v2=o()}}function v(e){const o=new m,{vertex:l,fragment:p}=o;if(t(l),e.geometry===i.Underground)o.attributes.add(g.POSITION,\"vec2\"),o.varyings.add(\"color\",\"vec4\"),l.uniforms.add([new s(\"cameraPosition\",((e,o)=>o.camera.eye)),new a(\"undergroundFadeAlpha\",(e=>e.undergroundFadeAlpha))]),l.code.add(d`void main(void) {\nfloat ndotl = dot(normalize(cameraPosition), mainLightDirection);\nfloat lighting = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\ncolor = vec4(vec3(lighting), undergroundFadeAlpha);\ngl_Position = vec4(position.xy, 1.0, 1.0);\n}`),p.code.add(d`void main() {\ngl_FragColor = color;\n}`);else{o.include(r,e),o.attributes.add(g.POSITION,\"vec3\"),o.varyings.add(\"vtc\",\"vec2\"),o.varyings.add(\"falloff\",\"float\");const t=e.geometry===i.Cylinder;l.uniforms.add([new c(\"proj\",((e,o)=>o.camera.projectionMatrix)),new c(\"view\",((e,o)=>o.camera.viewMatrix))]),t||(o.varyings.add(\"innerFactor\",\"float\"),l.uniforms.add(new s(\"silCircleCenter\",(e=>e.silhouette.center))),l.uniforms.add(new s(\"silCircleV1\",(e=>e.silhouette.v1))),l.uniforms.add(new s(\"silCircleV2\",(e=>e.silhouette.v2))),l.uniforms.add(new n(\"texV\",(e=>e.texV))),l.uniforms.add(new a(\"innerScale\",(e=>e.innerScale))));const m=6.2831853,u=1/128;l.code.add(d`\n\t\tvoid main(void) {\n      ${t?d`\n      vec3 pos = position;\n      float ndotl = mainLightDirection.z;\n      vtc = vec2(0.0, position.z + 0.05);`:d`\n      innerFactor = clamp(-position.z, 0.0, 1.0);\n      float scale = position.y * (1.0 + innerFactor * innerScale);\n      float phi = position.x * ${d.float(m*u)} + 1.0;\n      vec3 pos =  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;\n      float ndotl = dot(normalize(position.y > 0.0 ? pos: silCircleCenter), mainLightDirection);\n      vtc.x = position.x  * ${d.float(u)};\n      vtc.y = texV.x * (1.0 - position.z) + texV.y * position.z;\n      `}\n      falloff = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n\n\t\t  gl_Position = transformPosition(proj, view, pos);\n\t\t  gl_Position.z = gl_Position.w; // project atmosphere onto the far plane\n    }\n\t  `),p.uniforms.add(new f(\"tex\",(e=>e.texture))),t||p.uniforms.add(new a(\"altitudeFade\",(e=>e.altitudeFade))),p.code.add(d`\n\t\tvoid main() {\n\t\t\tvec4 atmosphereColor = texture2D(tex, vtc) * falloff;\n      ${t?d`gl_FragColor = atmosphereColor;`:d`\n\t\t\tvec4 innerColor = vec4(atmosphereColor.rgb, 1.0 - altitudeFade);\n\t\t\tgl_FragColor = mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));\n      `}\n    }`)}return o}const h=Object.freeze(Object.defineProperty({__proto__:null,SilhouetteCircle:u,SimpleAtmospherePassParameters:p,build:v},Symbol.toStringTag,{value:\"Module\"}));export{p as S,h as a,u as b,v as c};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}