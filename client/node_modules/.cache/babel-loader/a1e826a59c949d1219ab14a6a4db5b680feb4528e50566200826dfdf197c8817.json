{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport e from \"../../../core/Accessor.js\";\nimport { smoothstep as s } from \"../../../core/mathUtils.js\";\nimport { property as r } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { n as i, e as a, g as n, h as c, l as p } from \"../../../chunks/vec3.js\";\nimport { c as m } from \"../../../chunks/vec3f64.js\";\nimport { getReferenceEllipsoid as h } from \"../../../geometry/ellipsoidUtils.js\";\nimport { atmosphereHeight as u } from \"./atmosphereUtils.js\";\nimport { F as d } from \"../../../chunks/FogHaze.glsl.js\";\nimport { FogTechnique as l, FogHazeTechniqueConfiguration as g } from \"./FogTechnique.js\";\nimport { weatherHeightLimit as f } from \"./weather.js\";\nimport { Pos2Tex as _ } from \"../webgl-engine/lib/DefaultVertexBufferLayouts.js\";\nimport { createQuadVAO as j } from \"../webgl-engine/lib/glUtil3D.js\";\nimport { PrimitiveType as b } from \"../../webgl/enums.js\";\nconst x = .95,\n  y = 1;\nlet P = class extends e {\n  constructor(t) {\n    super(t), this._passParameters = new d();\n    const e = t.context.renderContext.rctx;\n    this._vao = j(e, _), this._technique = t.context.techniqueRepository.acquire(l, new g());\n    const s = h(t.view.spatialReference);\n    this._planetRadius = s.radius, this._atmosphereRadius = s.radius + u;\n  }\n  destroy() {\n    this._technique.release(), this._vao.dispose();\n  }\n  set strength(t) {\n    this._passParameters.fogStrength = t;\n  }\n  get strength() {\n    return this._passParameters.fogStrength;\n  }\n  render(t, e) {\n    if (this._update(t, e), this._passParameters.fogAmount <= 0) return;\n    const s = this._technique;\n    if (!s.compiled) return void this.context.requestRender();\n    const r = t.offscreenRenderingHelper;\n    r.renderDepthDetached(() => {\n      this._passParameters.depthTexture = r.depthTexture;\n      const e = t.rctx.bindTechnique(s, this._passParameters, t.bindParameters);\n      this._renderFog(e, t);\n    });\n  }\n  _renderFog(t, e) {\n    const s = e.rctx;\n    s.bindVAO(this._vao), t.assertCompatibleVertexAttributeLocations(this._vao), s.drawArrays(b.TRIANGLE_STRIP, 0, 4);\n  }\n  _update(t, e) {\n    const r = t.bindParameters.camera;\n    i(R, r.eye);\n    const o = Math.max(0, a(R, t.bindParameters.lighting.mainLight.direction)),\n      m = e.color;\n    n(w, m, .1), c(this._passParameters.fogColor, w, m, o);\n    const h = p(r.eye),\n      u = h * h;\n    this._passParameters.atmosphereC = u - this._atmosphereRadius * this._atmosphereRadius, this._passParameters.fogAmount = (1 - s(x * f, y * f, Math.abs(h - this._planetRadius))) * e.amount, this._passParameters.fogStrength = e.strength;\n  }\n  static isSupported(t) {\n    return t.capabilities.depthTexture;\n  }\n};\nt([r({\n  constructOnly: !0\n})], P.prototype, \"context\", void 0), t([r({\n  constructOnly: !0\n})], P.prototype, \"view\", void 0), P = t([o(\"esri.views.3d.environment.Fog\")], P);\nclass v {\n  constructor() {\n    this.color = m(), this.strength = 0, this.amount = 0;\n  }\n}\nconst R = m(),\n  w = m();\nexport { P as Fog, v as FogParameters };","map":{"version":3,"names":["_","t","e","smoothstep","s","property","r","subclass","o","n","i","a","g","h","c","l","p","m","getReferenceEllipsoid","atmosphereHeight","u","F","d","FogTechnique","FogHazeTechniqueConfiguration","weatherHeightLimit","f","Pos2Tex","createQuadVAO","j","PrimitiveType","b","x","y","P","constructor","_passParameters","context","renderContext","rctx","_vao","_technique","techniqueRepository","acquire","view","spatialReference","_planetRadius","radius","_atmosphereRadius","destroy","release","dispose","strength","fogStrength","render","_update","fogAmount","compiled","requestRender","offscreenRenderingHelper","renderDepthDetached","depthTexture","bindTechnique","bindParameters","_renderFog","bindVAO","assertCompatibleVertexAttributeLocations","drawArrays","TRIANGLE_STRIP","camera","R","eye","Math","max","lighting","mainLight","direction","color","w","fogColor","atmosphereC","abs","amount","isSupported","capabilities","constructOnly","prototype","v","Fog","FogParameters"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/environment/Fog.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Accessor.js\";import{smoothstep as s}from\"../../../core/mathUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{n as i,e as a,g as n,h as c,l as p}from\"../../../chunks/vec3.js\";import{c as m}from\"../../../chunks/vec3f64.js\";import{getReferenceEllipsoid as h}from\"../../../geometry/ellipsoidUtils.js\";import{atmosphereHeight as u}from\"./atmosphereUtils.js\";import{F as d}from\"../../../chunks/FogHaze.glsl.js\";import{FogTechnique as l,FogHazeTechniqueConfiguration as g}from\"./FogTechnique.js\";import{weatherHeightLimit as f}from\"./weather.js\";import{Pos2Tex as _}from\"../webgl-engine/lib/DefaultVertexBufferLayouts.js\";import{createQuadVAO as j}from\"../webgl-engine/lib/glUtil3D.js\";import{PrimitiveType as b}from\"../../webgl/enums.js\";const x=.95,y=1;let P=class extends e{constructor(t){super(t),this._passParameters=new d;const e=t.context.renderContext.rctx;this._vao=j(e,_),this._technique=t.context.techniqueRepository.acquire(l,new g);const s=h(t.view.spatialReference);this._planetRadius=s.radius,this._atmosphereRadius=s.radius+u}destroy(){this._technique.release(),this._vao.dispose()}set strength(t){this._passParameters.fogStrength=t}get strength(){return this._passParameters.fogStrength}render(t,e){if(this._update(t,e),this._passParameters.fogAmount<=0)return;const s=this._technique;if(!s.compiled)return void this.context.requestRender();const r=t.offscreenRenderingHelper;r.renderDepthDetached((()=>{this._passParameters.depthTexture=r.depthTexture;const e=t.rctx.bindTechnique(s,this._passParameters,t.bindParameters);this._renderFog(e,t)}))}_renderFog(t,e){const s=e.rctx;s.bindVAO(this._vao),t.assertCompatibleVertexAttributeLocations(this._vao),s.drawArrays(b.TRIANGLE_STRIP,0,4)}_update(t,e){const r=t.bindParameters.camera;i(R,r.eye);const o=Math.max(0,a(R,t.bindParameters.lighting.mainLight.direction)),m=e.color;n(w,m,.1),c(this._passParameters.fogColor,w,m,o);const h=p(r.eye),u=h*h;this._passParameters.atmosphereC=u-this._atmosphereRadius*this._atmosphereRadius,this._passParameters.fogAmount=(1-s(x*f,y*f,Math.abs(h-this._planetRadius)))*e.amount,this._passParameters.fogStrength=e.strength}static isSupported(t){return t.capabilities.depthTexture}};t([r({constructOnly:!0})],P.prototype,\"context\",void 0),t([r({constructOnly:!0})],P.prototype,\"view\",void 0),P=t([o(\"esri.views.3d.environment.Fog\")],P);class v{constructor(){this.color=m(),this.strength=0,this.amount=0}}const R=m(),w=m();export{P as Fog,v as FogParameters};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}