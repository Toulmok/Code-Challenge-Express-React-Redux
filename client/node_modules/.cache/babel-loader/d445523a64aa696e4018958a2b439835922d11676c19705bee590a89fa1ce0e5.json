{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { neverReached as t } from \"../../../../core/compilerUtils.js\";\nimport e from \"../../../../core/Error.js\";\nimport r from \"../../../../core/Evented.js\";\nimport { isPowerOfTwo as s, nextHighestPowerOfTwo as i } from \"../../../../core/mathUtils.js\";\nimport { isNone as a, isSome as o, removeMaybe as n } from \"../../../../core/maybe.js\";\nimport { throwIfAborted as h, onAbort as l, createAbortError as m } from \"../../../../core/promiseUtils.js\";\nimport { isArrayBuffer as p, isUint8Array as d } from \"../../../../core/typedArrayUtil.js\";\nimport { isBlobProtocol as _, isDataProtocol as c } from \"../../../../core/urlUtils.js\";\nimport { requestImage as u } from \"../../../../support/requestImageUtils.js\";\nimport { loadImageAsync as T } from \"../../../../support/requestUtils.js\";\nimport { T as g } from \"../../../../chunks/TextureOnly.glsl.js\";\nimport { PowerOfTwoResizeMode as f, TextureEncodingMimeType as w } from \"./basicInterfaces.js\";\nimport { estimateMemoryKTX2 as E, estimateMemoryBasis as A, createTextureKTX2 as x, createTextureBasis as D } from \"./BasisUtil.js\";\nimport { ContentObject as M } from \"./ContentObject.js\";\nimport { ContentObjectType as y } from \"./ContentObjectType.js\";\nimport { createDDSTexture as I } from \"./DDSUtil.js\";\nimport { createQuadVAO as F } from \"./glUtil3D.js\";\nimport { assert as O } from \"./Util.js\";\nimport { ContextType as R } from \"../../../webgl/context-util.js\";\nimport { TextureWrapMode as U, TextureType as P, PixelFormat as N, PixelType as b, TextureSamplingMode as C, TargetType as H, DepthStencilTargetType as V, PrimitiveType as v } from \"../../../webgl/enums.js\";\nimport { FramebufferObject as S } from \"../../../webgl/FramebufferObject.js\";\nimport { Texture as j } from \"../../../webgl/Texture.js\";\nimport { vertexCount as L } from \"../../../webgl/Util.js\";\nclass G extends M {\n  constructor(t, e) {\n    super(), this._data = t, this.type = y.Texture, this._glTexture = null, this._powerOfTwoStretchInfo = null, this._loadingPromise = null, this._loadingController = null, this.events = new r(), this._passParameters = new g(), this.params = e || {}, this.params.mipmap = !1 !== this.params.mipmap, this.params.noUnpackFlip = this.params.noUnpackFlip || !1, this.params.preMultiplyAlpha = this.params.preMultiplyAlpha || !1, this.params.wrap = this.params.wrap || {\n      s: U.REPEAT,\n      t: U.REPEAT\n    }, this.params.powerOfTwoResizeMode = this.params.powerOfTwoResizeMode || f.STRETCH, this.estimatedTexMemRequired = G._estimateTexMemRequired(this._data, this.params), this._startPreload();\n  }\n  _startPreload() {\n    const t = this._data;\n    a(t) || (t instanceof HTMLVideoElement ? this._startPreloadVideoElement(t) : t instanceof HTMLImageElement && this._startPreloadImageElement(t));\n  }\n  _startPreloadVideoElement(t) {\n    if (!(_(t.src) || \"auto\" === t.preload && t.crossOrigin)) {\n      t.preload = \"auto\", t.crossOrigin = \"anonymous\";\n      const e = !t.paused;\n      if (t.src = t.src, e && t.autoplay) {\n        const e = () => {\n          t.removeEventListener(\"canplay\", e), t.play();\n        };\n        t.addEventListener(\"canplay\", e);\n      }\n    }\n  }\n  _startPreloadImageElement(t) {\n    c(t.src) || _(t.src) || t.crossOrigin || (t.crossOrigin = \"anonymous\", t.src = t.src);\n  }\n  static _getDataDimensions(t) {\n    return t instanceof HTMLVideoElement ? {\n      width: t.videoWidth,\n      height: t.videoHeight\n    } : t;\n  }\n  static _estimateTexMemRequired(t, e) {\n    if (a(t)) return 0;\n    if (p(t) || d(t)) return e.encoding === w.KTX2_ENCODING ? E(t, !!e.mipmap) : e.encoding === w.BASIS_ENCODING ? A(t, !!e.mipmap) : t.byteLength;\n    const {\n      width: r,\n      height: s\n    } = t instanceof Image || t instanceof ImageData || t instanceof HTMLCanvasElement || t instanceof HTMLVideoElement ? G._getDataDimensions(t) : e;\n    return (e.mipmap ? 4 / 3 : 1) * r * s * (e.components || 4) || 0;\n  }\n  dispose() {\n    this._data = void 0;\n  }\n  get width() {\n    return this.params.width;\n  }\n  get height() {\n    return this.params.height;\n  }\n  _createDescriptor(t) {\n    return {\n      target: P.TEXTURE_2D,\n      pixelFormat: N.RGBA,\n      dataType: b.UNSIGNED_BYTE,\n      wrapMode: this.params.wrap,\n      flipped: !this.params.noUnpackFlip,\n      samplingMode: this.params.mipmap ? C.LINEAR_MIPMAP_LINEAR : C.LINEAR,\n      hasMipmap: this.params.mipmap,\n      preMultiplyAlpha: this.params.preMultiplyAlpha,\n      maxAnisotropy: this.params.maxAnisotropy ?? (this.params.mipmap ? t.parameters.maxMaxAnisotropy : 1)\n    };\n  }\n  get glTexture() {\n    return this._glTexture;\n  }\n  load(t, e) {\n    if (o(this._glTexture)) return this._glTexture;\n    if (o(this._loadingPromise)) return this._loadingPromise;\n    const r = this._data;\n    return a(r) ? (this._glTexture = new j(t, this._createDescriptor(t), null), this._glTexture) : \"string\" == typeof r ? this._loadFromURL(t, e, r) : r instanceof Image ? this._loadFromImageElement(t, e, r) : r instanceof HTMLVideoElement ? this._loadFromVideoElement(t, e, r) : r instanceof ImageData || r instanceof HTMLCanvasElement ? this._loadFromImage(t, r, e) : (p(r) || d(r)) && this.params.encoding === w.DDS_ENCODING ? (this._data = void 0, this._loadFromDDSData(t, r)) : (p(r) || d(r)) && this.params.encoding === w.KTX2_ENCODING ? (this._data = void 0, this._loadFromKTX2(t, r)) : (p(r) || d(r)) && this.params.encoding === w.BASIS_ENCODING ? (this._data = void 0, this._loadFromBasis(t, r)) : d(r) ? this._loadFromPixelData(t, r) : p(r) ? this._loadFromPixelData(t, new Uint8Array(r)) : null;\n  }\n  get requiresFrameUpdates() {\n    return this._data instanceof HTMLVideoElement;\n  }\n  frameUpdate(t, e, r) {\n    if (!(this._data instanceof HTMLVideoElement) || a(this._glTexture)) return r;\n    if (this._data.readyState < B.HAVE_CURRENT_DATA || r === this._data.currentTime) return r;\n    if (o(this._powerOfTwoStretchInfo)) {\n      const {\n        framebuffer: r,\n        vao: s,\n        sourceTexture: i\n      } = this._powerOfTwoStretchInfo;\n      i.setData(this._data), this._drawStretchedTexture(t, e, r, s, i, this._glTexture);\n    } else {\n      const {\n          videoWidth: t,\n          videoHeight: e\n        } = this._data,\n        {\n          width: r,\n          height: s\n        } = this._glTexture.descriptor;\n      t !== r || e !== s ? this._glTexture.updateData(0, 0, 0, Math.min(t, r), Math.min(e, s), this._data) : this._glTexture.setData(this._data);\n    }\n    return this._glTexture.descriptor.hasMipmap && this._glTexture.generateMipmap(), this.params.updateCallback && this.params.updateCallback(), this._data.currentTime;\n  }\n  _loadFromDDSData(t, e) {\n    return this._glTexture = I(t, this._createDescriptor(t), e), this._glTexture;\n  }\n  _loadFromKTX2(t, e) {\n    return this._loadAsync(() => x(t, this._createDescriptor(t), e).then(t => (this._glTexture = t, t)));\n  }\n  _loadFromBasis(t, e) {\n    return this._loadAsync(() => D(t, this._createDescriptor(t), e).then(t => (this._glTexture = t, t)));\n  }\n  _loadFromPixelData(t, e) {\n    O(this.params.width > 0 && this.params.height > 0);\n    const r = this._createDescriptor(t);\n    return r.pixelFormat = 1 === this.params.components ? N.LUMINANCE : 3 === this.params.components ? N.RGB : N.RGBA, r.width = this.params.width, r.height = this.params.height, this._glTexture = new j(t, r, e), this._glTexture;\n  }\n  _loadFromURL(t, e, r) {\n    return this._loadAsync(async s => {\n      const i = await u(r, {\n        signal: s\n      });\n      return h(s), this._loadFromImage(t, i, e);\n    });\n  }\n  _loadFromImageElement(t, e, r) {\n    return r.complete ? this._loadFromImage(t, r, e) : this._loadAsync(async s => {\n      const i = await T(r, r.src, !1, s);\n      return h(s), this._loadFromImage(t, i, e);\n    });\n  }\n  _loadFromVideoElement(t, e, r) {\n    return r.readyState >= B.HAVE_CURRENT_DATA ? this._loadFromImage(t, r, e) : this._loadFromVideoElementAsync(t, e, r);\n  }\n  _loadFromVideoElementAsync(t, r, s) {\n    return this._loadAsync(i => new Promise((a, o) => {\n      const h = () => {\n          s.removeEventListener(\"loadeddata\", p), s.removeEventListener(\"error\", d), n(_);\n        },\n        p = () => {\n          s.readyState >= B.HAVE_CURRENT_DATA && (h(), a(this._loadFromImage(t, s, r)));\n        },\n        d = t => {\n          h(), o(t || new e(\"Failed to load video\"));\n        };\n      s.addEventListener(\"loadeddata\", p), s.addEventListener(\"error\", d);\n      const _ = l(i, () => d(m()));\n    }));\n  }\n  _loadFromImage(t, e, r) {\n    const i = G._getDataDimensions(e);\n    this.params.width = i.width, this.params.height = i.height;\n    const a = this._createDescriptor(t);\n    return a.pixelFormat = 3 === this.params.components ? N.RGB : N.RGBA, !this._requiresPowerOfTwo(t, a) || s(i.width) && s(i.height) ? (a.width = i.width, a.height = i.height, this._glTexture = new j(t, a, e), this._glTexture) : (this._glTexture = this._makePowerOfTwoTexture(t, e, i, a, r), this._glTexture);\n  }\n  _loadAsync(t) {\n    const e = new AbortController();\n    this._loadingController = e;\n    const r = t(e.signal);\n    this._loadingPromise = r;\n    const s = () => {\n      this._loadingController === e && (this._loadingController = null), this._loadingPromise === r && (this._loadingPromise = null);\n    };\n    return r.then(s, s), r;\n  }\n  _requiresPowerOfTwo(t, e) {\n    const r = U.CLAMP_TO_EDGE,\n      s = \"number\" == typeof e.wrapMode ? e.wrapMode === r : e.wrapMode.s === r && e.wrapMode.t === r;\n    return t.type === R.WEBGL1 && (e.hasMipmap || !s);\n  }\n  _makePowerOfTwoTexture(e, r, s, a, o) {\n    const {\n        width: n,\n        height: h\n      } = s,\n      l = i(n),\n      m = i(h);\n    let p;\n    switch (a.width = l, a.height = m, this.params.powerOfTwoResizeMode) {\n      case f.PAD:\n        a.textureCoordinateScaleFactor = [n / l, h / m], p = new j(e, a), p.updateData(0, 0, 0, n, h, r);\n        break;\n      case f.STRETCH:\n      case null:\n      case void 0:\n        p = this._stretchToPowerOfTwo(e, r, a, o());\n        break;\n      default:\n        t(this.params.powerOfTwoResizeMode);\n    }\n    return a.hasMipmap && p.generateMipmap(), p;\n  }\n  _stretchToPowerOfTwo(t, e, r, s) {\n    const i = new j(t, r),\n      a = new S(t, {\n        colorTarget: H.TEXTURE,\n        depthStencilTarget: V.NONE\n      }, i),\n      o = new j(t, {\n        target: P.TEXTURE_2D,\n        pixelFormat: r.pixelFormat,\n        dataType: b.UNSIGNED_BYTE,\n        wrapMode: U.CLAMP_TO_EDGE,\n        samplingMode: C.LINEAR,\n        flipped: !!r.flipped,\n        maxAnisotropy: 8,\n        preMultiplyAlpha: r.preMultiplyAlpha\n      }, e),\n      n = F(t),\n      h = t.getBoundFramebufferObject();\n    return this._drawStretchedTexture(t, s, a, n, o, i), this.requiresFrameUpdates ? this._powerOfTwoStretchInfo = {\n      vao: n,\n      sourceTexture: o,\n      framebuffer: a\n    } : (n.dispose(!0), o.dispose(), a.detachColorTexture(), a.dispose()), t.bindFramebuffer(h), i;\n  }\n  _drawStretchedTexture(t, e, r, s, i, a) {\n    this._passParameters.texture = i, t.bindFramebuffer(r);\n    const o = t.getViewport();\n    t.setViewport(0, 0, a.descriptor.width, a.descriptor.height), t.bindTechnique(e, this._passParameters, null), t.bindVAO(s), t.drawArrays(v.TRIANGLE_STRIP, 0, L(s, \"geometry\")), t.bindFramebuffer(null), t.setViewport(o.x, o.y, o.width, o.height), this._passParameters.texture = null;\n  }\n  unload() {\n    if (o(this._powerOfTwoStretchInfo)) {\n      const {\n        framebuffer: t,\n        vao: e,\n        sourceTexture: r\n      } = this._powerOfTwoStretchInfo;\n      e.dispose(!0), r.dispose(), t.dispose(), this._glTexture = null, this._powerOfTwoStretchInfo = null;\n    }\n    if (o(this._glTexture) && (this._glTexture.dispose(), this._glTexture = null), o(this._loadingController)) {\n      const t = this._loadingController;\n      this._loadingController = null, this._loadingPromise = null, t.abort();\n    }\n    this.events.emit(\"unloaded\");\n  }\n}\nvar B;\n!function (t) {\n  t[t.HAVE_NOTHING = 0] = \"HAVE_NOTHING\", t[t.HAVE_METADATA = 1] = \"HAVE_METADATA\", t[t.HAVE_CURRENT_DATA = 2] = \"HAVE_CURRENT_DATA\", t[t.HAVE_FUTURE_DATA = 3] = \"HAVE_FUTURE_DATA\", t[t.HAVE_ENOUGH_DATA = 4] = \"HAVE_ENOUGH_DATA\";\n}(B || (B = {}));\nexport { G as Texture };","map":{"version":3,"names":["neverReached","t","e","r","isPowerOfTwo","s","nextHighestPowerOfTwo","i","isNone","a","isSome","o","removeMaybe","n","throwIfAborted","h","onAbort","l","createAbortError","m","isArrayBuffer","p","isUint8Array","d","isBlobProtocol","_","isDataProtocol","c","requestImage","u","loadImageAsync","T","g","PowerOfTwoResizeMode","f","TextureEncodingMimeType","w","estimateMemoryKTX2","E","estimateMemoryBasis","A","createTextureKTX2","x","createTextureBasis","D","ContentObject","M","ContentObjectType","y","createDDSTexture","I","createQuadVAO","F","assert","O","ContextType","R","TextureWrapMode","U","TextureType","P","PixelFormat","N","PixelType","b","TextureSamplingMode","C","TargetType","H","DepthStencilTargetType","V","PrimitiveType","v","FramebufferObject","S","Texture","j","vertexCount","L","G","constructor","_data","type","_glTexture","_powerOfTwoStretchInfo","_loadingPromise","_loadingController","events","_passParameters","params","mipmap","noUnpackFlip","preMultiplyAlpha","wrap","REPEAT","powerOfTwoResizeMode","STRETCH","estimatedTexMemRequired","_estimateTexMemRequired","_startPreload","HTMLVideoElement","_startPreloadVideoElement","HTMLImageElement","_startPreloadImageElement","src","preload","crossOrigin","paused","autoplay","removeEventListener","play","addEventListener","_getDataDimensions","width","videoWidth","height","videoHeight","encoding","KTX2_ENCODING","BASIS_ENCODING","byteLength","Image","ImageData","HTMLCanvasElement","components","dispose","_createDescriptor","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","wrapMode","flipped","samplingMode","LINEAR_MIPMAP_LINEAR","LINEAR","hasMipmap","maxAnisotropy","parameters","maxMaxAnisotropy","glTexture","load","_loadFromURL","_loadFromImageElement","_loadFromVideoElement","_loadFromImage","DDS_ENCODING","_loadFromDDSData","_loadFromKTX2","_loadFromBasis","_loadFromPixelData","Uint8Array","requiresFrameUpdates","frameUpdate","readyState","B","HAVE_CURRENT_DATA","currentTime","framebuffer","vao","sourceTexture","setData","_drawStretchedTexture","descriptor","updateData","Math","min","generateMipmap","updateCallback","_loadAsync","then","LUMINANCE","RGB","signal","complete","_loadFromVideoElementAsync","Promise","_requiresPowerOfTwo","_makePowerOfTwoTexture","AbortController","CLAMP_TO_EDGE","WEBGL1","PAD","textureCoordinateScaleFactor","_stretchToPowerOfTwo","colorTarget","TEXTURE","depthStencilTarget","NONE","getBoundFramebufferObject","detachColorTexture","bindFramebuffer","texture","getViewport","setViewport","bindTechnique","bindVAO","drawArrays","TRIANGLE_STRIP","unload","abort","emit","HAVE_NOTHING","HAVE_METADATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{neverReached as t}from\"../../../../core/compilerUtils.js\";import e from\"../../../../core/Error.js\";import r from\"../../../../core/Evented.js\";import{isPowerOfTwo as s,nextHighestPowerOfTwo as i}from\"../../../../core/mathUtils.js\";import{isNone as a,isSome as o,removeMaybe as n}from\"../../../../core/maybe.js\";import{throwIfAborted as h,onAbort as l,createAbortError as m}from\"../../../../core/promiseUtils.js\";import{isArrayBuffer as p,isUint8Array as d}from\"../../../../core/typedArrayUtil.js\";import{isBlobProtocol as _,isDataProtocol as c}from\"../../../../core/urlUtils.js\";import{requestImage as u}from\"../../../../support/requestImageUtils.js\";import{loadImageAsync as T}from\"../../../../support/requestUtils.js\";import{T as g}from\"../../../../chunks/TextureOnly.glsl.js\";import{PowerOfTwoResizeMode as f,TextureEncodingMimeType as w}from\"./basicInterfaces.js\";import{estimateMemoryKTX2 as E,estimateMemoryBasis as A,createTextureKTX2 as x,createTextureBasis as D}from\"./BasisUtil.js\";import{ContentObject as M}from\"./ContentObject.js\";import{ContentObjectType as y}from\"./ContentObjectType.js\";import{createDDSTexture as I}from\"./DDSUtil.js\";import{createQuadVAO as F}from\"./glUtil3D.js\";import{assert as O}from\"./Util.js\";import{ContextType as R}from\"../../../webgl/context-util.js\";import{TextureWrapMode as U,TextureType as P,PixelFormat as N,PixelType as b,TextureSamplingMode as C,TargetType as H,DepthStencilTargetType as V,PrimitiveType as v}from\"../../../webgl/enums.js\";import{FramebufferObject as S}from\"../../../webgl/FramebufferObject.js\";import{Texture as j}from\"../../../webgl/Texture.js\";import{vertexCount as L}from\"../../../webgl/Util.js\";class G extends M{constructor(t,e){super(),this._data=t,this.type=y.Texture,this._glTexture=null,this._powerOfTwoStretchInfo=null,this._loadingPromise=null,this._loadingController=null,this.events=new r,this._passParameters=new g,this.params=e||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:U.REPEAT,t:U.REPEAT},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||f.STRETCH,this.estimatedTexMemRequired=G._estimateTexMemRequired(this._data,this.params),this._startPreload()}_startPreload(){const t=this._data;a(t)||(t instanceof HTMLVideoElement?this._startPreloadVideoElement(t):t instanceof HTMLImageElement&&this._startPreloadImageElement(t))}_startPreloadVideoElement(t){if(!(_(t.src)||\"auto\"===t.preload&&t.crossOrigin)){t.preload=\"auto\",t.crossOrigin=\"anonymous\";const e=!t.paused;if(t.src=t.src,e&&t.autoplay){const e=()=>{t.removeEventListener(\"canplay\",e),t.play()};t.addEventListener(\"canplay\",e)}}}_startPreloadImageElement(t){c(t.src)||_(t.src)||t.crossOrigin||(t.crossOrigin=\"anonymous\",t.src=t.src)}static _getDataDimensions(t){return t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t}static _estimateTexMemRequired(t,e){if(a(t))return 0;if(p(t)||d(t))return e.encoding===w.KTX2_ENCODING?E(t,!!e.mipmap):e.encoding===w.BASIS_ENCODING?A(t,!!e.mipmap):t.byteLength;const{width:r,height:s}=t instanceof Image||t instanceof ImageData||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?G._getDataDimensions(t):e;return(e.mipmap?4/3:1)*r*s*(e.components||4)||0}dispose(){this._data=void 0}get width(){return this.params.width}get height(){return this.params.height}_createDescriptor(t){return{target:P.TEXTURE_2D,pixelFormat:N.RGBA,dataType:b.UNSIGNED_BYTE,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?C.LINEAR_MIPMAP_LINEAR:C.LINEAR,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:this.params.maxAnisotropy??(this.params.mipmap?t.parameters.maxMaxAnisotropy:1)}}get glTexture(){return this._glTexture}load(t,e){if(o(this._glTexture))return this._glTexture;if(o(this._loadingPromise))return this._loadingPromise;const r=this._data;return a(r)?(this._glTexture=new j(t,this._createDescriptor(t),null),this._glTexture):\"string\"==typeof r?this._loadFromURL(t,e,r):r instanceof Image?this._loadFromImageElement(t,e,r):r instanceof HTMLVideoElement?this._loadFromVideoElement(t,e,r):r instanceof ImageData||r instanceof HTMLCanvasElement?this._loadFromImage(t,r,e):(p(r)||d(r))&&this.params.encoding===w.DDS_ENCODING?(this._data=void 0,this._loadFromDDSData(t,r)):(p(r)||d(r))&&this.params.encoding===w.KTX2_ENCODING?(this._data=void 0,this._loadFromKTX2(t,r)):(p(r)||d(r))&&this.params.encoding===w.BASIS_ENCODING?(this._data=void 0,this._loadFromBasis(t,r)):d(r)?this._loadFromPixelData(t,r):p(r)?this._loadFromPixelData(t,new Uint8Array(r)):null}get requiresFrameUpdates(){return this._data instanceof HTMLVideoElement}frameUpdate(t,e,r){if(!(this._data instanceof HTMLVideoElement)||a(this._glTexture))return r;if(this._data.readyState<B.HAVE_CURRENT_DATA||r===this._data.currentTime)return r;if(o(this._powerOfTwoStretchInfo)){const{framebuffer:r,vao:s,sourceTexture:i}=this._powerOfTwoStretchInfo;i.setData(this._data),this._drawStretchedTexture(t,e,r,s,i,this._glTexture)}else{const{videoWidth:t,videoHeight:e}=this._data,{width:r,height:s}=this._glTexture.descriptor;t!==r||e!==s?this._glTexture.updateData(0,0,0,Math.min(t,r),Math.min(e,s),this._data):this._glTexture.setData(this._data)}return this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this.params.updateCallback&&this.params.updateCallback(),this._data.currentTime}_loadFromDDSData(t,e){return this._glTexture=I(t,this._createDescriptor(t),e),this._glTexture}_loadFromKTX2(t,e){return this._loadAsync((()=>x(t,this._createDescriptor(t),e).then((t=>(this._glTexture=t,t)))))}_loadFromBasis(t,e){return this._loadAsync((()=>D(t,this._createDescriptor(t),e).then((t=>(this._glTexture=t,t)))))}_loadFromPixelData(t,e){O(this.params.width>0&&this.params.height>0);const r=this._createDescriptor(t);return r.pixelFormat=1===this.params.components?N.LUMINANCE:3===this.params.components?N.RGB:N.RGBA,r.width=this.params.width,r.height=this.params.height,this._glTexture=new j(t,r,e),this._glTexture}_loadFromURL(t,e,r){return this._loadAsync((async s=>{const i=await u(r,{signal:s});return h(s),this._loadFromImage(t,i,e)}))}_loadFromImageElement(t,e,r){return r.complete?this._loadFromImage(t,r,e):this._loadAsync((async s=>{const i=await T(r,r.src,!1,s);return h(s),this._loadFromImage(t,i,e)}))}_loadFromVideoElement(t,e,r){return r.readyState>=B.HAVE_CURRENT_DATA?this._loadFromImage(t,r,e):this._loadFromVideoElementAsync(t,e,r)}_loadFromVideoElementAsync(t,r,s){return this._loadAsync((i=>new Promise(((a,o)=>{const h=()=>{s.removeEventListener(\"loadeddata\",p),s.removeEventListener(\"error\",d),n(_)},p=()=>{s.readyState>=B.HAVE_CURRENT_DATA&&(h(),a(this._loadFromImage(t,s,r)))},d=t=>{h(),o(t||new e(\"Failed to load video\"))};s.addEventListener(\"loadeddata\",p),s.addEventListener(\"error\",d);const _=l(i,(()=>d(m())))}))))}_loadFromImage(t,e,r){const i=G._getDataDimensions(e);this.params.width=i.width,this.params.height=i.height;const a=this._createDescriptor(t);return a.pixelFormat=3===this.params.components?N.RGB:N.RGBA,!this._requiresPowerOfTwo(t,a)||s(i.width)&&s(i.height)?(a.width=i.width,a.height=i.height,this._glTexture=new j(t,a,e),this._glTexture):(this._glTexture=this._makePowerOfTwoTexture(t,e,i,a,r),this._glTexture)}_loadAsync(t){const e=new AbortController;this._loadingController=e;const r=t(e.signal);this._loadingPromise=r;const s=()=>{this._loadingController===e&&(this._loadingController=null),this._loadingPromise===r&&(this._loadingPromise=null)};return r.then(s,s),r}_requiresPowerOfTwo(t,e){const r=U.CLAMP_TO_EDGE,s=\"number\"==typeof e.wrapMode?e.wrapMode===r:e.wrapMode.s===r&&e.wrapMode.t===r;return t.type===R.WEBGL1&&(e.hasMipmap||!s)}_makePowerOfTwoTexture(e,r,s,a,o){const{width:n,height:h}=s,l=i(n),m=i(h);let p;switch(a.width=l,a.height=m,this.params.powerOfTwoResizeMode){case f.PAD:a.textureCoordinateScaleFactor=[n/l,h/m],p=new j(e,a),p.updateData(0,0,0,n,h,r);break;case f.STRETCH:case null:case void 0:p=this._stretchToPowerOfTwo(e,r,a,o());break;default:t(this.params.powerOfTwoResizeMode)}return a.hasMipmap&&p.generateMipmap(),p}_stretchToPowerOfTwo(t,e,r,s){const i=new j(t,r),a=new S(t,{colorTarget:H.TEXTURE,depthStencilTarget:V.NONE},i),o=new j(t,{target:P.TEXTURE_2D,pixelFormat:r.pixelFormat,dataType:b.UNSIGNED_BYTE,wrapMode:U.CLAMP_TO_EDGE,samplingMode:C.LINEAR,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},e),n=F(t),h=t.getBoundFramebufferObject();return this._drawStretchedTexture(t,s,a,n,o,i),this.requiresFrameUpdates?this._powerOfTwoStretchInfo={vao:n,sourceTexture:o,framebuffer:a}:(n.dispose(!0),o.dispose(),a.detachColorTexture(),a.dispose()),t.bindFramebuffer(h),i}_drawStretchedTexture(t,e,r,s,i,a){this._passParameters.texture=i,t.bindFramebuffer(r);const o=t.getViewport();t.setViewport(0,0,a.descriptor.width,a.descriptor.height),t.bindTechnique(e,this._passParameters,null),t.bindVAO(s),t.drawArrays(v.TRIANGLE_STRIP,0,L(s,\"geometry\")),t.bindFramebuffer(null),t.setViewport(o.x,o.y,o.width,o.height),this._passParameters.texture=null}unload(){if(o(this._powerOfTwoStretchInfo)){const{framebuffer:t,vao:e,sourceTexture:r}=this._powerOfTwoStretchInfo;e.dispose(!0),r.dispose(),t.dispose(),this._glTexture=null,this._powerOfTwoStretchInfo=null}if(o(this._glTexture)&&(this._glTexture.dispose(),this._glTexture=null),o(this._loadingController)){const t=this._loadingController;this._loadingController=null,this._loadingPromise=null,t.abort()}this.events.emit(\"unloaded\")}}var B;!function(t){t[t.HAVE_NOTHING=0]=\"HAVE_NOTHING\",t[t.HAVE_METADATA=1]=\"HAVE_METADATA\",t[t.HAVE_CURRENT_DATA=2]=\"HAVE_CURRENT_DATA\",t[t.HAVE_FUTURE_DATA=3]=\"HAVE_FUTURE_DATA\",t[t.HAVE_ENOUGH_DATA=4]=\"HAVE_ENOUGH_DATA\"}(B||(B={}));export{G as Texture};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}