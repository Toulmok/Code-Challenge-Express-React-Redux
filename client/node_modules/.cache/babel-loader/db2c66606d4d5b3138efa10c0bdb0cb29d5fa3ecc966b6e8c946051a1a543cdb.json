{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { clone as s } from \"../../../core/lang.js\";\nimport { isPolygon as t, isPolyline as e, isExtent as i } from \"../../../geometry/support/jsonUtils.js\";\nimport { setId as n } from \"../CIMCursor.js\";\nclass o {\n  static local() {\n    return null === o.instance && (o.instance = new o()), o.instance;\n  }\n  execute(s, t, e, i, n) {\n    return new r(s, t, e);\n  }\n}\no.instance = null;\nclass r {\n  constructor(s, t, e) {\n    this._inputGeometries = s, this._angleTolerance = void 0 !== t.angleTolerance ? t.angleTolerance : 120, this._maxCosAngle = Math.cos((1 - Math.abs(this._angleTolerance) / 180) * Math.PI);\n  }\n  next() {\n    let n = this._inputGeometries.next();\n    for (; n;) {\n      if (t(n)) {\n        this._isClosed = !0;\n        const t = s(n);\n        return this._processMultipath(t.rings), t;\n      }\n      if (e(n)) {\n        this._isClosed = !1;\n        const t = s(n);\n        return this._processMultipath(t.paths), t;\n      }\n      if (i(n)) {\n        if (this._maxCosAngle) return n;\n        this._isClosed = !0;\n        const s = [[n.xmin, n.ymin], [n.xmin, n.ymax], [n.xmax, n.ymax], [n.xmax, n.ymin], [n.xmin, n.ymin]];\n        return this._processPath(s), {\n          rings: [s]\n        };\n      }\n      n = this._inputGeometries.next();\n    }\n    return null;\n  }\n  _processMultipath(s) {\n    if (s) for (const t of s) this._processPath(t);\n  }\n  _processPath(s) {\n    if (s) {\n      let t,\n        e,\n        i,\n        o,\n        r,\n        l,\n        a = s.length,\n        h = s[0];\n      this._isClosed && ++a;\n      for (let c = 1; c < a; ++c) {\n        let m;\n        m = this._isClosed && c === a - 1 ? s[0] : s[c];\n        const _ = m[0] - h[0],\n          u = m[1] - h[1],\n          p = Math.sqrt(_ * _ + u * u);\n        if (c > 1 && p > 0 && i > 0) {\n          (t * _ + e * u) / p / i <= this._maxCosAngle && n(h, 1);\n        }\n        1 === c && (o = _, r = u, l = p), p > 0 && (h = m, t = _, e = u, i = p);\n      }\n      if (this._isClosed && i > 0 && l > 0) {\n        (t * o + e * r) / l / i <= this._maxCosAngle && n(s[0], 1);\n      }\n    }\n  }\n}\nexport { o as EffectAddControlPoints };","map":{"version":3,"names":["clone","s","isPolygon","t","isPolyline","e","isExtent","i","setId","n","o","local","instance","execute","r","constructor","_inputGeometries","_angleTolerance","angleTolerance","_maxCosAngle","Math","cos","abs","PI","next","_isClosed","_processMultipath","rings","paths","xmin","ymin","ymax","xmax","_processPath","l","a","length","h","c","m","_","u","p","sqrt","EffectAddControlPoints"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/symbols/cim/effects/EffectAddControlPoints.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{clone as s}from\"../../../core/lang.js\";import{isPolygon as t,isPolyline as e,isExtent as i}from\"../../../geometry/support/jsonUtils.js\";import{setId as n}from\"../CIMCursor.js\";class o{static local(){return null===o.instance&&(o.instance=new o),o.instance}execute(s,t,e,i,n){return new r(s,t,e)}}o.instance=null;class r{constructor(s,t,e){this._inputGeometries=s,this._angleTolerance=void 0!==t.angleTolerance?t.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let n=this._inputGeometries.next();for(;n;){if(t(n)){this._isClosed=!0;const t=s(n);return this._processMultipath(t.rings),t}if(e(n)){this._isClosed=!1;const t=s(n);return this._processMultipath(t.paths),t}if(i(n)){if(this._maxCosAngle)return n;this._isClosed=!0;const s=[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]];return this._processPath(s),{rings:[s]}}n=this._inputGeometries.next()}return null}_processMultipath(s){if(s)for(const t of s)this._processPath(t)}_processPath(s){if(s){let t,e,i,o,r,l,a=s.length,h=s[0];this._isClosed&&++a;for(let c=1;c<a;++c){let m;m=this._isClosed&&c===a-1?s[0]:s[c];const _=m[0]-h[0],u=m[1]-h[1],p=Math.sqrt(_*_+u*u);if(c>1&&p>0&&i>0){(t*_+e*u)/p/i<=this._maxCosAngle&&n(h,1)}1===c&&(o=_,r=u,l=p),p>0&&(h=m,t=_,e=u,i=p)}if(this._isClosed&&i>0&&l>0){(t*o+e*r)/l/i<=this._maxCosAngle&&n(s[0],1)}}}}export{o as EffectAddControlPoints};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}