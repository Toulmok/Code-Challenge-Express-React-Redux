{"ast":null,"code":"import _classCallCheck from\"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _possibleConstructorReturn from\"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";import _inherits from\"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{connect}from'react-redux';import ManagerWithCustomRefresh from'./sessionManager';import{syncAuthToJsApi,updateDisplay}from'./sessionFunctions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Session=/*#__PURE__*/function(_React$Component){_inherits(Session,_React$Component);var _super=_createSuper(Session);function Session(){var _this;_classCallCheck(this,Session);// This is where the server inserts serialized session information\n_this.sessionOptions=JSON.parse(\"SESSION_JSON\");// Create a new session manually. In the future this will be simplified to `ManagerWithCustomRefresh.deserialize()`\n_this.session=new ManagerWithCustomRefresh({clientId:_this.sessionOptions.clientId,username:_this.sessionOptions.username,token:_this.sessionOptions.token,tokenExpires:_this.sessionOptions.tokenExpires?new Date(_this.sessionOptions.tokenExpires):undefined,portal:_this.sessionOptions.portal,ssl:_this.sessionOptions.ssl,tokenDuration:_this.sessionOptions.tokenDuration,redirectUri:_this.sessionOptions.redirectUri});return _possibleConstructorReturn(_this);}_createClass(Session,[{key:\"render\",value:function render(){var _this2=this;console.log(\"component: session\");syncAuthToJsApi();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{class:\"grid-container\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"grid-x grid-margin-x margin-bottom-2 margin-top-2\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"cell large-12\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"The App!\"}),/*#__PURE__*/_jsx(\"pre\",{id:\"sessionInfo\",class:\"bordered padding-2\",children:JSON.stringify(this.session.toJSON(),null,2)})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-x grid-margin-x\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"cell\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"expireToken\",type:\"button\",class:\"button\",onClick:function onClick(e){_this2.session.updateToken(_this2.session.token,new Date(Date.now()));_this2.session.signOut().then(function(){updateDisplay();});e.preventDefault();}// Bind a button to fake an early token expiration \n,children:\"Expire Token\"}),/*#__PURE__*/_jsx(\"button\",{id:\"refreshSession\",type:\"button\",class:\"button\",onClick:function onClick(e){_this2.session.refreshCredentials(_this2.session);e.preventDefault();}// Bind a button to test refreshing credentials from the server\n,children:\"Refresh Credentials\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/signOut\",class:\"button\",children:\"Sign Out\"})]})})]})});}}]);return Session;}(React.Component);var mapStateToProps=function mapStateToProps(){return{};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{};};export default connect(mapStateToProps,mapDispatchToProps)(Session);","map":{"version":3,"names":["React","connect","ManagerWithCustomRefresh","syncAuthToJsApi","updateDisplay","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Session","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","sessionOptions","JSON","parse","session","clientId","username","token","tokenExpires","Date","undefined","portal","ssl","tokenDuration","redirectUri","_possibleConstructorReturn","_createClass","key","value","render","_this2","console","log","children","class","id","stringify","toJSON","type","onClick","e","updateToken","now","signOut","then","preventDefault","refreshCredentials","href","Component","mapStateToProps","mapDispatchToProps","dispatch"],"sources":["C:/code-challenge-react/client/src/components/session/session.jsx"],"sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport ManagerWithCustomRefresh from './sessionManager'\r\nimport { syncAuthToJsApi, updateDisplay } from './sessionFunctions'\r\n\r\nexport class Session extends React.Component {\r\n  constructor() {\r\n    // This is where the server inserts serialized session information\r\n    this.sessionOptions = JSON.parse(`SESSION_JSON`)\r\n    // Create a new session manually. In the future this will be simplified to `ManagerWithCustomRefresh.deserialize()`\r\n    this.session = new ManagerWithCustomRefresh({\r\n      clientId: this.sessionOptions.clientId,\r\n      username: this.sessionOptions.username,\r\n      token: this.sessionOptions.token,\r\n      tokenExpires: this.sessionOptions.tokenExpires\r\n        ? new Date(this.sessionOptions.tokenExpires)\r\n        : undefined,\r\n      portal: this.sessionOptions.portal,\r\n      ssl: this.sessionOptions.ssl,\r\n      tokenDuration: this.sessionOptions.tokenDuration,\r\n      redirectUri: this.sessionOptions.redirectUri\r\n    })\r\n  }\r\n \r\n  render() { console.log(\"component: session\")\r\n    syncAuthToJsApi()\r\n    return (\r\n      <>\r\n        <div class=\"grid-container\">\r\n          <div class=\"grid-x grid-margin-x margin-bottom-2 margin-top-2\">\r\n            <div class=\"cell large-12\">\r\n              <h1>The App!</h1>\r\n              <pre id=\"sessionInfo\" class=\"bordered padding-2\">\r\n                { JSON.stringify(this.session.toJSON(), null, 2) }\r\n              </pre>\r\n            </div>\r\n          </div>\r\n          <div class=\"grid-x grid-margin-x\">\r\n            <div class=\"cell\">\r\n              <button id=\"expireToken\" type=\"button\" class=\"button\" onClick={\r\n                (e) => { \r\n                  this.session.updateToken(this.session.token, new Date(Date.now()))\r\n                  this.session.signOut()\r\n                  .then(()=>{ updateDisplay() })\r\n                  e.preventDefault() \r\n                } // Bind a button to fake an early token expiration \r\n              }>Expire Token</button>\r\n              <button id=\"refreshSession\" type=\"button\" class=\"button\" onClick={\r\n                (e) => { \r\n                  this.session.refreshCredentials(this.session)\r\n                  e.preventDefault() \r\n                }  // Bind a button to test refreshing credentials from the server\r\n              }>Refresh Credentials</button>\r\n              <a href=\"/signOut\" class=\"button\">Sign Out</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = () => ({ })\r\nconst mapDispatchToProps = (dispatch) => ({ })\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Session)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}