{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport t from \"../../../core/Evented.js\";\nimport s from \"../../../core/Logger.js\";\nimport { isSome as r, isNone as o } from \"../../../core/maybe.js\";\nimport { create as i, fromRect as a } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { create as d } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsOptimizedGeometry as n } from \"../featureConversionUtils.js\";\nimport { BoundsStore as h } from \"./BoundsStore.js\";\nimport { optimizedFeatureQueryEngineAdapter as u } from \"./optimizedFeatureQueryEngineAdapter.js\";\nimport { cleanFromGeometryEngine as m } from \"./utils.js\";\nconst f = i();\nclass g {\n  constructor(e) {\n    this.geometryInfo = e, this._boundsStore = new h(), this._featuresById = new Map(), this._markedIds = new Set(), this.events = new t(), this.featureAdapter = u;\n  }\n  get geometryType() {\n    return this.geometryInfo.geometryType;\n  }\n  get hasM() {\n    return this.geometryInfo.hasM;\n  }\n  get hasZ() {\n    return this.geometryInfo.hasZ;\n  }\n  get numFeatures() {\n    return this._featuresById.size;\n  }\n  get fullBounds() {\n    return this._boundsStore.fullBounds;\n  }\n  get storeStatistics() {\n    let e = 0;\n    return this._featuresById.forEach(t => {\n      r(t.geometry) && t.geometry.coords && (e += t.geometry.coords.length);\n    }), {\n      featureCount: this._featuresById.size,\n      vertexCount: e / (this.hasZ ? this.hasM ? 4 : 3 : this.hasM ? 3 : 2)\n    };\n  }\n  getFullExtent(e) {\n    if (o(this.fullBounds)) return null;\n    const [t, s, r, i] = this.fullBounds;\n    return {\n      xmin: t,\n      ymin: s,\n      xmax: r,\n      ymax: i,\n      spatialReference: m(e)\n    };\n  }\n  add(e) {\n    this._add(e), this._emitChanged();\n  }\n  addMany(e) {\n    for (const t of e) this._add(t);\n    this._emitChanged();\n  }\n  clear() {\n    this._featuresById.clear(), this._boundsStore.clear(), this._emitChanged();\n  }\n  removeById(e) {\n    const t = this._featuresById.get(e);\n    return t ? (this._remove(t), this._emitChanged(), t) : null;\n  }\n  removeManyById(e) {\n    this._boundsStore.invalidateIndex();\n    for (const t of e) {\n      const e = this._featuresById.get(t);\n      e && this._remove(e);\n    }\n    this._emitChanged();\n  }\n  forEachBounds(e, t) {\n    for (const s of e) {\n      const e = this._boundsStore.get(s.objectId);\n      e && t(a(f, e));\n    }\n  }\n  getFeature(e) {\n    return this._featuresById.get(e);\n  }\n  has(e) {\n    return this._featuresById.has(e);\n  }\n  forEach(e) {\n    this._featuresById.forEach(t => e(t));\n  }\n  forEachInBounds(e, t) {\n    this._boundsStore.forEachInBounds(e, e => {\n      t(this._featuresById.get(e));\n    });\n  }\n  startMarkingUsedFeatures() {\n    this._boundsStore.invalidateIndex(), this._markedIds.clear();\n  }\n  sweep() {\n    let e = !1;\n    this._featuresById.forEach((t, s) => {\n      this._markedIds.has(s) || (e = !0, this._remove(t));\n    }), this._markedIds.clear(), e && this._emitChanged();\n  }\n  _emitChanged() {\n    this.events.emit(\"changed\", void 0);\n  }\n  _add(t) {\n    if (!t) return;\n    const i = t.objectId;\n    if (null == i) return void s.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\", \"feature id is missing\", {\n      feature: t\n    }));\n    const a = this._featuresById.get(i);\n    let h;\n    if (this._markedIds.add(i), a ? (t.displayId = a.displayId, h = this._boundsStore.get(i), this._boundsStore.delete(i)) : r(this.onFeatureAdd) && this.onFeatureAdd(t), o(t.geometry) || !t.geometry.coords || !t.geometry.coords.length) return this._boundsStore.set(i, null), void this._featuresById.set(i, t);\n    h = n(r(h) ? h : d(), t.geometry, this.geometryInfo.hasZ, this.geometryInfo.hasM), r(h) && this._boundsStore.set(i, h), this._featuresById.set(i, t);\n  }\n  _remove(e) {\n    r(this.onFeatureRemove) && this.onFeatureRemove(e);\n    const t = e.objectId;\n    return this._markedIds.delete(t), this._boundsStore.delete(t), this._featuresById.delete(t), e;\n  }\n}\nexport { g as default };","map":{"version":3,"names":["e","t","s","isSome","r","isNone","o","create","i","fromRect","a","d","getBoundsOptimizedGeometry","n","BoundsStore","h","optimizedFeatureQueryEngineAdapter","u","cleanFromGeometryEngine","m","f","g","constructor","geometryInfo","_boundsStore","_featuresById","Map","_markedIds","Set","events","featureAdapter","geometryType","hasM","hasZ","numFeatures","size","fullBounds","storeStatistics","forEach","geometry","coords","length","featureCount","vertexCount","getFullExtent","xmin","ymin","xmax","ymax","spatialReference","add","_add","_emitChanged","addMany","clear","removeById","get","_remove","removeManyById","invalidateIndex","forEachBounds","objectId","getFeature","has","forEachInBounds","startMarkingUsedFeatures","sweep","emit","getLogger","error","feature","displayId","delete","onFeatureAdd","set","onFeatureRemove","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import s from\"../../../core/Logger.js\";import{isSome as r,isNone as o}from\"../../../core/maybe.js\";import{create as i,fromRect as a}from\"../../../geometry/support/aaBoundingBox.js\";import{create as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as n}from\"../featureConversionUtils.js\";import{BoundsStore as h}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as u}from\"./optimizedFeatureQueryEngineAdapter.js\";import{cleanFromGeometryEngine as m}from\"./utils.js\";const f=i();class g{constructor(e){this.geometryInfo=e,this._boundsStore=new h,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=u}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{r(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(o(this.fullBounds))return null;const[t,s,r,i]=this.fullBounds;return{xmin:t,ymin:s,xmax:r,ymax:i,spatialReference:m(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(a(f,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,s)=>{this._markedIds.has(s)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void s.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const a=this._featuresById.get(i);let h;if(this._markedIds.add(i),a?(t.displayId=a.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):r(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=n(r(h)?h:d(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),r(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){r(this.onFeatureRemove)&&this.onFeatureRemove(e);const t=e.objectId;return this._markedIds.delete(t),this._boundsStore.delete(t),this._featuresById.delete(t),e}}export{g as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}