{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { get as r, isSome as a, isNone as o } from \"../../core/maybe.js\";\nimport { join as s, getPathExtension as n } from \"../../core/urlUtils.js\";\nasync function c(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let a = arguments.length > 2 ? arguments[2] : undefined;\n  await e.load(a);\n  const o = s(e.itemUrl, \"resources\"),\n    {\n      start: n = 1,\n      num: c = 10,\n      sortOrder: u = \"asc\",\n      sortField: i = \"created\"\n    } = t,\n    l = {\n      query: {\n        start: n,\n        num: c,\n        sortOrder: u,\n        sortField: i,\n        token: e.apiKey\n      },\n      signal: r(a, \"signal\")\n    },\n    p = await e.portal.request(o, l);\n  return {\n    total: p.total,\n    nextStart: p.nextStart,\n    resources: p.resources.map(_ref => {\n      let {\n        created: t,\n        size: r,\n        resource: a\n      } = _ref;\n      return {\n        created: new Date(t),\n        size: r,\n        resource: e.resourceFromPath(a)\n      };\n    })\n  };\n}\nasync function u(e, o, n, c) {\n  if (!e.hasPath()) throw new t(`portal-item-resource-${o}:invalid-path`, \"Resource does not have a valid path\");\n  const u = e.portalItem;\n  await u.load(c);\n  const i = s(u.userItemUrl, \"add\" === o ? \"addResources\" : \"updateResources\"),\n    [l, d] = p(e.path),\n    m = await h(n),\n    f = new FormData();\n  return l && \".\" !== l && f.append(\"resourcesPrefix\", l), a(c) && c.compress && f.append(\"compress\", \"true\"), f.append(\"fileName\", d), f.append(\"file\", m, d), f.append(\"f\", \"json\"), a(c) && c.access && f.append(\"access\", c.access), await u.portal.request(i, {\n    method: \"post\",\n    body: f,\n    signal: r(c, \"signal\")\n  }), e;\n}\nasync function i(e, a, o) {\n  if (!a.hasPath()) throw new t(\"portal-item-resources-remove:invalid-path\", \"Resource does not have a valid path\");\n  await e.load(o);\n  const n = s(e.userItemUrl, \"removeResources\");\n  await e.portal.request(n, {\n    method: \"post\",\n    query: {\n      resource: a.path\n    },\n    signal: r(o, \"signal\")\n  }), a.portalItem = null;\n}\nasync function l(e, t) {\n  await e.load(t);\n  const a = s(e.userItemUrl, \"removeResources\");\n  return e.portal.request(a, {\n    method: \"post\",\n    query: {\n      deleteAll: !0\n    },\n    signal: r(t, \"signal\")\n  });\n}\nfunction p(e) {\n  const t = e.lastIndexOf(\"/\");\n  return -1 === t ? [\".\", e] : [e.slice(0, t), e.slice(t + 1)];\n}\nfunction d(e) {\n  const [t, r] = m(e),\n    [a, o] = p(t);\n  return [a, o, r];\n}\nfunction m(e) {\n  const t = n(e);\n  return o(t) ? [e, \"\"] : [e.slice(0, e.length - t.length - 1), `.${t}`];\n}\nasync function h(t) {\n  if (t instanceof Blob) return t;\n  return (await e(t.url, {\n    responseType: \"blob\"\n  })).data;\n}\nfunction f(e, t) {\n  if (!e.hasPath()) return null;\n  const [r,, a] = d(e.path);\n  return e.portalItem.resourceFromPath(s(r, t + a));\n}\nfunction w(e, t) {\n  if (!e.hasPath()) return null;\n  const [r,, a] = d(e.path);\n  return e.portalItem.resourceFromPath(s(r, t + a));\n}\nexport { u as addOrUpdateResource, h as contentToBlob, c as fetchResources, f as getSiblingOfSameType, w as getSiblingOfSameTypeI, l as removeAllResources, i as removeResource, d as splitPrefixFileNameAndExtension };","map":{"version":3,"names":["e","t","get","r","isSome","a","isNone","o","join","s","getPathExtension","n","c","arguments","length","undefined","load","itemUrl","start","num","sortOrder","u","sortField","i","l","query","token","apiKey","signal","p","portal","request","total","nextStart","resources","map","_ref","created","size","resource","Date","resourceFromPath","hasPath","portalItem","userItemUrl","d","path","m","h","f","FormData","append","compress","access","method","body","deleteAll","lastIndexOf","slice","Blob","url","responseType","data","w","addOrUpdateResource","contentToBlob","fetchResources","getSiblingOfSameType","getSiblingOfSameTypeI","removeAllResources","removeResource","splitPrefixFileNameAndExtension"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/portal/support/resourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";\nimport t from\"../../core/Error.js\";\nimport{get as r,isSome as a,isNone as o}from\"../../core/maybe.js\";\nimport{join as s,getPathExtension as n}from\"../../core/urlUtils.js\";\n\nasync function c(e,t={},a){\n    await e.load(a);\n    const o=s(e.itemUrl,\"resources\"),{\n        start:n=1,\n        num:c=10,\n        sortOrder:u=\"asc\",\n        sortField:i=\"created\"\n    }=t,\n    l={query:{start:n,num:c,sortOrder:u,sortField:i,token:e.apiKey},signal:r(a,\"signal\")},\n    p=await e.portal.request(o,l);\n    return{\n        total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))\n    }\n}\nasync function u(e,o,n,c){\n    if(!e.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");\n    const u=e.portalItem;\n    await u.load(c);\n    const i=s(u.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\"),[l,d]=p(e.path),m=await h(n),f=new FormData;\n    return l&&\".\"!==l&&f.append(\"resourcesPrefix\",l),a(c)&&c.compress&&f.append(\"compress\",\"true\"),f.append(\"fileName\",d),f.append(\"file\",m,d),f.append(\"f\",\"json\"),a(c)&&c.access&&f.append(\"access\",c.access),await u.portal.request(i,{method:\"post\",body:f,signal:r(c,\"signal\")}),e\n}\nasync function i(e,a,o){\n    if(!a.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");\n    await e.load(o);\n    const n=s(e.userItemUrl,\"removeResources\");\n    await e.portal.request(n,{method:\"post\",query:{resource:a.path},signal:r(o,\"signal\")}),a.portalItem=null\n}\nasync function l(e,t){\n    await e.load(t);\n    const a=s(e.userItemUrl,\"removeResources\");\n    return e.portal.request(a,{method:\"post\",query:{deleteAll:!0},signal:r(t,\"signal\")})\n}\nfunction p(e){\n    const t=e.lastIndexOf(\"/\");\nreturn-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]\n}\nfunction d(e){\n    const[t,r]=m(e),[a,o]=p(t);return[a,o,r]\n}\nfunction m(e){\n    const t=n(e);return o(t)?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]\n}\nasync function h(t){\n    if(t instanceof Blob)return t;\n    return(await e(t.url,{responseType:\"blob\"})).data\n}\nfunction f(e,t){\n    if(!e.hasPath())return null;const[r,,a]=d(e.path);\n    return e.portalItem.resourceFromPath(s(r,t+a))\n}\nfunction w(e,t){\n    if(!e.hasPath())return null;const[r,,a]=d(e.path);\n    return e.portalItem.resourceFromPath(s(r,t+a))\n}\n\nexport{u as addOrUpdateResource,h as contentToBlob,c as fetchResources,f as getSiblingOfSameType,w as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,d as splitPrefixFileNameAndExtension};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}