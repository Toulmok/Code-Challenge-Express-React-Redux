{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../../geometry.js\";\nimport e from \"../../../../core/Error.js\";\nimport { isSome as t, applySome as r, isNone as a, releaseMaybe as i, unwrapOr as s, get as o, unwrap as n } from \"../../../../core/maybe.js\";\nimport { px2pt as l, pt2px as h } from \"../../../../core/screenUtils.js\";\nimport { s as c } from \"../../../../chunks/vec4.js\";\nimport { f as p, d } from \"../../../../chunks/vec4f64.js\";\nimport { create as m, empty as _, expandWithBuffer as y, intersectsClippingArea as u, expandWithAABB as g } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { getDriverAxisSizeValueAny as f } from \"../../../../renderers/support/renderingInfoUtils.js\";\nimport { sharedGeometryElevationAligner as C } from \"./ElevationAligners.js\";\nimport { SymbolUpdateType as M, elevationModeChangeUpdateType as b, needsElevationUpdates2D as v } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as E } from \"./ElevationContext.js\";\nimport L from \"./Graphics3DDrapedGraphicLayer.js\";\nimport { Graphics3DObject3DGraphicLayer as P } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as w, getAttributeValue as x } from \"./Graphics3DSymbolLayer.js\";\nimport { ApplyRendererDiffResult as k } from \"./interfaces.js\";\nimport { parseLineMarkerStyle as D, parseCapType as S } from \"./lineUtils.js\";\nimport { initFastSymbolUpdatesState as U, updateFastSymbolUpdatesState as R } from \"../support/FastSymbolUpdates.js\";\nimport A from \"../../support/debugFlags.js\";\nimport { createGeometry as j } from \"../../support/engineContent/line.js\";\nimport { prepareMarkerResources as z } from \"../../support/engineContent/marker.js\";\nimport { geometryToRenderInfo as O, geometryToRenderInfoDraped as G } from \"../../support/renderInfoUtils/line.js\";\nimport { Object3D as V } from \"../../webgl-engine/lib/Object3D.js\";\nimport { RenderGeometry as I } from \"../../webgl-engine/lib/RenderGeometry.js\";\nimport { LineMarkerMaterial as T } from \"../../webgl-engine/materials/LineMarkerMaterial.js\";\nimport { getStipplePatternForLinePattern as F } from \"../../webgl-engine/materials/lineStippleUtils.js\";\nimport { RibbonLineMaterial as W } from \"../../webgl-engine/materials/RibbonLineMaterial.js\";\nimport H from \"../../../../geometry/Extent.js\";\nimport B from \"../../../../geometry/Polygon.js\";\nconst N = [\"polyline\", \"polygon\", \"extent\"];\nclass q extends w {\n  constructor(e, t, r, a) {\n    super(e, t, r, a);\n  }\n  async doLoad() {\n    if (this._vvConvertOptions = {\n      modelSize: [1, 1, 1],\n      symbolSize: [1, 1, 1],\n      unitInMeters: 1,\n      transformation: {\n        anchor: [0, 0, 0],\n        scale: [1, 1, 1],\n        rotation: [0, 0, 0]\n      },\n      supportedTypes: {\n        size: !0,\n        color: !0,\n        opacity: !0,\n        rotation: !1\n      }\n    }, this._context.renderer && this._context.renderer.visualVariables && this._context.renderer.visualVariables.length > 0 ? this._fastUpdates = U(this._context.renderer, this._vvConvertOptions) : this._fastUpdates = {\n      enabled: !1\n    }, !this._drivenProperties.size) {\n      if ((null != this.symbolLayer.size ? this.symbolLayer.size : l(1)) < 0) throw new e(\"graphics3dlinesymbollayer:invalid-size\", \"Symbol sizes may not be negative values\");\n    }\n    this._markerTexture = t(this.symbolLayer.marker) && t(this._context.sharedResources.textures) ? z(this._context.sharedResources.textures, D(this.symbolLayer.marker.style)) : null;\n  }\n  _getMaterialParameters(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const r = this._getCombinedOpacityAndColor(t && this._markerColor || this._materialColor);\n    this._patternHidesLine && !t && (r[3] = 0);\n    const a = {\n      width: this._computeMaterialWidth(this.symbolLayer?.size),\n      color: r,\n      hasPolygonOffset: !0,\n      join: this.symbolLayer.join || \"miter\",\n      cap: S(this.symbolLayer.cap || \"butt\"),\n      hasSlicePlane: this._context.slicePlaneEnabled,\n      isClosed: e,\n      stipplePattern: F(this.symbolLayer.pattern),\n      stippleScaleWithLineWidth: !0\n    };\n    return this._fastUpdates && this._fastUpdates.visualVariables ? {\n      ...a,\n      ...this._fastUpdates.materialParameters\n    } : a;\n  }\n  get _materialColor() {\n    return r(this.symbolLayer.material, e => e.color);\n  }\n  get _markerColor() {\n    return r(this.symbolLayer.marker, e => e.color);\n  }\n  get _lineMaterial() {\n    return a(this._lineMaterialCached) && (this._lineMaterialCached = new W(this._getMaterialParameters(!1)), this._context.stage.add(this._lineMaterialCached)), this._lineMaterialCached;\n  }\n  get _ringMaterial() {\n    return a(this._ringMaterialCached) && (this._ringMaterialCached = new W(this._getMaterialParameters(!0)), this._context.stage.add(this._ringMaterialCached)), this._ringMaterialCached;\n  }\n  get _wireframeLineMaterial() {\n    return a(this._wireframeLineMaterialCached) && (this._wireframeLineMaterialCached = new W({\n      ...this._getMaterialParameters(!1),\n      wireframe: !0\n    }), this._context.stage.add(this._wireframeLineMaterialCached)), this._wireframeLineMaterialCached;\n  }\n  get _wireframeRingMaterial() {\n    return a(this._wireframeRingMaterialCached) && (this._wireframeRingMaterialCached = new W({\n      ...this._getMaterialParameters(!0),\n      wireframe: !0\n    }), this._context.stage.add(this._wireframeRingMaterialCached)), this._wireframeRingMaterialCached;\n  }\n  get _markerMaterial() {\n    return a(this._markerMaterialCached) && t(this.symbolLayer.marker) && t(this._markerTexture) && (this._markerMaterialCached = new T({\n      ...this._getMaterialParameters(!1, !0),\n      placement: this.symbolLayer.marker.placement,\n      textureId: this._markerTexture.texture.id\n    }), this._context.stage.add(this._markerMaterialCached)), this._markerMaterialCached;\n  }\n  destroy() {\n    super.destroy(), this._forEachMaterial(e => this._context.stage.remove(e)), this._lineMaterialCached = null, this._ringMaterialCached = null, this._wireframeLineMaterialCached = null, this._wireframeRingMaterialCached = null, this._markerMaterialCached = null, this._markerTexture = i(this._markerTexture);\n  }\n  _getDrivenSize(e) {\n    return this._drivenProperties.size && e.size ? h(f(e.size)) : 1;\n  }\n  _getSizeFeatureAttributeData(e) {\n    return this._fastUpdates.enabled && this._fastUpdates.visualVariables.size ? x(this._fastUpdates.visualVariables.size.field, e) : null;\n  }\n  _getDrivenColor(e) {\n    const t = p(1, 1, 1, 1);\n    return this._drivenProperties.color && e.color && (t[0] = e.color[0], t[1] = e.color[1], t[2] = e.color[2], e.color.length > 0 && (t[3] = e.color[3])), this._drivenProperties.opacity && e.opacity && (t[3] = e.opacity), t;\n  }\n  _getColorFeatureAttributeData(e) {\n    return this._fastUpdates.enabled && this._fastUpdates.visualVariables.color ? x(this._fastUpdates.visualVariables.color.field, e) : null;\n  }\n  _getOpacityFeatureAttributeData(e) {\n    return this._fastUpdates.enabled && this._fastUpdates.visualVariables.opacity ? x(this._fastUpdates.visualVariables.opacity.field, e) : null;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry, N, this.symbolLayer.type)) return null;\n    const r = this.setGraphicElevationContext(t, new E());\n    return this.ensureDrapedStatus(\"on-the-ground\" === r.mode), this.draped ? this._createAsOverlay(e, this._context.layer.uid) : this._createAs3DShape(e, r, t.uid);\n  }\n  applyRendererDiff(e, t) {\n    for (const r in e.diff) {\n      if (\"visualVariables\" !== r) return k.Recreate_Symbol;\n      if (!R(this._fastUpdates, t, this._vvConvertOptions)) return k.Recreate_Symbol;\n      this._forEachMaterial(e => e.setParameters(this._fastUpdates.materialParameters));\n    }\n    return k.Fast_Update;\n  }\n  prepareSymbolLayerPatch(e) {\n    if (\"partial\" !== e.diff.type) return;\n    const t = e.diff.diff,\n      r = {};\n    \"complete\" === t.size?.type && (r.width = this._computeMaterialWidth(t.size.newValue), delete t.size), \"complete\" === t.cap?.type && (r.cap = S(s(t.cap.newValue, \"butt\")), delete t.cap);\n    const a = this._prepareMarkerPatch(e, t);\n    this._prepareMaterialPatch(e, t, a), e.symbolLayerStatePatches.push(() => this._forEachMaterial(e => e.setParameters(r)));\n  }\n  layerOpacityChanged() {\n    this._forEachMaterial((e, t) => this._updateMaterialLayerOpacity(e, t));\n  }\n  _forEachMaterial(e) {\n    t(this._lineMaterialCached) && e(this._lineMaterialCached), t(this._ringMaterialCached) && e(this._ringMaterialCached), t(this._wireframeLineMaterialCached) && e(this._wireframeLineMaterialCached), t(this._wireframeRingMaterialCached) && e(this._wireframeRingMaterialCached), t(this._markerMaterialCached) && e(this._markerMaterialCached, !0);\n  }\n  _updateMaterialLayerOpacity(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const r = e.parameters.color,\n      a = o(this.symbolLayer, \"material\", \"color\"),\n      i = this._patternHidesLine && !t ? 0 : this._getCombinedOpacity(a),\n      s = p(r[0], r[1], r[2], i);\n    e.setParameters({\n      color: s\n    });\n  }\n  layerElevationInfoChanged(e, t, r) {\n    const a = this._elevationContext.mode,\n      i = b(q.elevationModeChangeTypes, r, a);\n    if (i !== M.UPDATE) return i;\n    const s = v(a);\n    return this.updateGraphics3DGraphicElevationInfo(e, t, () => s);\n  }\n  slicePlaneEnabledChanged() {\n    const e = {\n      hasSlicePlane: this._context.slicePlaneEnabled\n    };\n    return this._forEachMaterial(t => t.setParameters(e)), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return !0;\n  }\n  pixelRatioChanged() {\n    return !0;\n  }\n  skipHighSymbolLodsChanged() {\n    return !0;\n  }\n  _getGeometryAsPolygonOrPolyline(e) {\n    switch (e.type) {\n      case \"extent\":\n        if (e instanceof H) return B.fromExtent(e);\n        break;\n      case \"polygon\":\n      case \"polyline\":\n        return e;\n    }\n    return null;\n  }\n  _createAs3DShape(e, r, a) {\n    const i = e.graphic,\n      s = this._getGeometryAsPolygonOrPolyline(i.geometry),\n      o = \"polygon\" === s.type ? s.rings : s.paths,\n      n = new Array(),\n      l = m(),\n      h = O(s, this._context.elevationProvider, this._context.renderCoordsHelper, r),\n      c = \"polygon\" === s.type ? \"rings\" : \"paths\";\n    this._logGeometryCreationWarnings(h, o, c, \"LineSymbol3DLayer\");\n    for (let m = 0; m < h.lines.length; m++) {\n      const r = h.lines[m],\n        i = r.position,\n        o = r.mapPositions;\n      if (t(this._context.clippingExtent) && (_(l), y(l, o), !u(l, this._context.clippingExtent))) continue;\n      const c = this._createGeometry(\"polygon\" === s.type ? this._ringMaterial : this._lineMaterial, e, i, o, s.type, J.ELEVATED, a);\n      n.push(c), A.LINE_WIREFRAMES && n.push(c.instantiate({\n        material: \"polygon\" === s.type ? this._wireframeRingMaterial : this._wireframeLineMaterial\n      })), t(this._markerMaterial) && n.push(c.instantiate({\n        material: this._markerMaterial\n      }));\n    }\n    if (0 === n.length) return null;\n    const p = new V({\n        geometries: n,\n        castShadow: !1,\n        metadata: {\n          layerUid: this._context.layer.uid,\n          graphicUid: a\n        }\n      }),\n      d = new P(this, p, n, null, null, C, r);\n    return d.alignedSampledElevation = h.sampledElevation, d.needsElevationUpdates = v(r.mode), d;\n  }\n  _createGeometry(e, t, r, a, i, s, o) {\n    const n = \"polygon\" === i,\n      l = this._fastUpdates.enabled && this._fastUpdates.visualVariables.color,\n      h = this._fastUpdates.enabled && this._fastUpdates.visualVariables.size,\n      c = this._context.stage.renderView.getObjectAndLayerIdColor({\n        graphicUid: o,\n        layerUid: this._context.layer.uid\n      });\n    return j(e, {\n      overlayInfo: s === J.DRAPED ? {\n        spatialReference: this._context.overlaySR,\n        renderCoordsHelper: this._context.renderCoordsHelper\n      } : null,\n      removeDuplicateStartEnd: n,\n      mapPositions: a,\n      attributeData: {\n        position: r,\n        size: h ? null : this._getDrivenSize(t.renderingInfo),\n        color: l ? null : this._getDrivenColor(t.renderingInfo),\n        sizeFeature: this._getSizeFeatureAttributeData(t.graphic),\n        colorFeature: this._getColorFeatureAttributeData(t.graphic),\n        opacityFeature: this._getOpacityFeatureAttributeData(t.graphic)\n      }\n    }, c);\n  }\n  _createAsOverlay(e, r) {\n    const a = e.graphic,\n      i = this._getGeometryAsPolygonOrPolyline(a.geometry),\n      s = \"polygon\" === i.type ? i.rings : i.paths,\n      o = \"polygon\" === i.type ? this._ringMaterial : this._lineMaterial;\n    o.renderPriority = this._renderPriority;\n    const l = A.LINE_WIREFRAMES ? \"polygon\" === i.type ? this._wireframeRingMaterial : this._wireframeLineMaterial : null,\n      h = this._markerMaterial;\n    t(l) && (l.renderPriority = this._renderPriority - .001), t(h) && (h.renderPriority = this._renderPriority - .002);\n    const c = new Array(),\n      p = m(),\n      d = _(),\n      f = G(i, this._context.overlaySR),\n      C = \"polygon\" === i.type ? \"rings\" : \"paths\";\n    this._logGeometryCreationWarnings(f, s, C, \"LineSymbol3DLayer\");\n    for (const m of f.lines) {\n      if (_(p), y(p, m.position), !u(p, this._context.clippingExtent)) continue;\n      g(d, p);\n      const s = t => {\n        const s = this._createGeometry(t, e, m.position, void 0, i.type, J.DRAPED, a.uid),\n          o = new I(s, {\n            layerUid: r,\n            graphicUid: a.uid\n          });\n        return c.push(o), o;\n      };\n      if (t(h)) {\n        const e = s(h),\n          t = n(this.symbolLayer.marker).placement;\n        \"begin\" !== t && \"begin-end\" !== t || y(p, m.position, 0, 1), \"end\" !== t && \"begin-end\" !== t || y(p, m.position, m.position.length - 3, 1), this._updateBoundingSphere(e, p);\n      }\n      const f = s(o);\n      if (this._updateBoundingSphere(f, p), A.LINE_WIREFRAMES) {\n        const e = s(l);\n        this._updateBoundingSphere(e, p);\n      }\n    }\n    return new L(this, c, d, this._context.drapeSourceRenderer);\n  }\n  _updateBoundingSphere(e, t) {\n    c(e.boundingSphere, .5 * (t[0] + t[3]), .5 * (t[1] + t[4]), 0, .5 * Math.sqrt((t[3] - t[0]) * (t[3] - t[0]) + (t[4] - t[1]) * (t[4] - t[1])));\n  }\n  get _patternHidesLine() {\n    const e = this.symbolLayer.pattern;\n    return t(e) && \"style\" === e.type && \"none\" === e.style;\n  }\n  _computeMaterialWidth(e) {\n    return e = s(e, l(1)), this._drivenProperties.size ? this._fastUpdates.enabled && this._fastUpdates.visualVariables.size ? h(1) : 1 : h(e);\n  }\n  _prepareMaterialPatch(e, t, i) {\n    const s = t.material;\n    if (a(s)) return void (i.changed && i.useMaterialColor && this._patchMaterialColor(this._getCombinedOpacityAndColor(this._materialColor), this._markerMaterialCached, e));\n    if (\"collection\" === s.type) return;\n    const o = \"complete\" === s.type ? r(s.newValue, e => e.color) : \"complete\" === s.diff.color?.type ? s.diff.color.newValue : null,\n      n = this._getCombinedOpacityAndColor(o);\n    i.useMaterialColor && this._patchMaterialColor(d(n), this._markerMaterialCached, e), this._patternHidesLine && (n[3] = 0), this._patchMaterialColor(n, this._lineMaterialCached, e), delete t.material;\n  }\n  _prepareMarkerPatch(e, r) {\n    const i = r.marker;\n    if (a(i) || \"partial\" !== i.type || t(i.diff.style) || t(i.diff.placement) || t(i.diff.color) && \"complete\" !== i.diff.color.type) return {\n      changed: !1,\n      useMaterialColor: a(this._markerColor)\n    };\n    const s = i.diff.color;\n    if (a(s)) return delete r.marker, {\n      changed: !1,\n      useMaterialColor: a(this._markerColor)\n    };\n    const o = n(s.newValue);\n    return a(o) ? (delete r.marker, {\n      changed: !0,\n      useMaterialColor: !0\n    }) : (this._patchMaterialColor(this._getCombinedOpacityAndColor(o), this._markerMaterialCached, e), delete r.marker, {\n      changed: !0,\n      useMaterialColor: !1\n    });\n  }\n  _patchMaterialColor(e, t, r) {\n    a(t) || r.symbolLayerStatePatches.push(() => t.setParameters({\n      color: e\n    }));\n  }\n}\nvar J;\nq.elevationModeChangeTypes = {\n  definedChanged: M.RECREATE,\n  staysOnTheGround: M.NONE,\n  onTheGroundChanged: M.RECREATE\n}, function (e) {\n  e[e.DRAPED = 0] = \"DRAPED\", e[e.ELEVATED = 1] = \"ELEVATED\";\n}(J || (J = {}));\nexport { q as Graphics3DLineSymbolLayer };","map":{"version":3,"names":["e","isSome","t","applySome","r","isNone","a","releaseMaybe","i","unwrapOr","s","get","o","unwrap","n","px2pt","l","pt2px","h","c","f","p","d","create","m","empty","_","expandWithBuffer","y","intersectsClippingArea","u","expandWithAABB","g","getDriverAxisSizeValueAny","sharedGeometryElevationAligner","C","SymbolUpdateType","M","elevationModeChangeUpdateType","b","needsElevationUpdates2D","v","ElevationContext","E","L","Graphics3DObject3DGraphicLayer","P","Graphics3DSymbolLayer","w","getAttributeValue","x","ApplyRendererDiffResult","k","parseLineMarkerStyle","D","parseCapType","S","initFastSymbolUpdatesState","U","updateFastSymbolUpdatesState","R","A","createGeometry","j","prepareMarkerResources","z","geometryToRenderInfo","O","geometryToRenderInfoDraped","G","Object3D","V","RenderGeometry","I","LineMarkerMaterial","T","getStipplePatternForLinePattern","F","RibbonLineMaterial","W","H","B","N","q","constructor","doLoad","_vvConvertOptions","modelSize","symbolSize","unitInMeters","transformation","anchor","scale","rotation","supportedTypes","size","color","opacity","_context","renderer","visualVariables","length","_fastUpdates","enabled","_drivenProperties","symbolLayer","_markerTexture","marker","sharedResources","textures","style","_getMaterialParameters","arguments","undefined","_getCombinedOpacityAndColor","_markerColor","_materialColor","_patternHidesLine","width","_computeMaterialWidth","hasPolygonOffset","join","cap","hasSlicePlane","slicePlaneEnabled","isClosed","stipplePattern","pattern","stippleScaleWithLineWidth","materialParameters","material","_lineMaterial","_lineMaterialCached","stage","add","_ringMaterial","_ringMaterialCached","_wireframeLineMaterial","_wireframeLineMaterialCached","wireframe","_wireframeRingMaterial","_wireframeRingMaterialCached","_markerMaterial","_markerMaterialCached","placement","textureId","texture","id","destroy","_forEachMaterial","remove","_getDrivenSize","_getSizeFeatureAttributeData","field","_getDrivenColor","_getColorFeatureAttributeData","_getOpacityFeatureAttributeData","createGraphics3DGraphic","graphic","_validateGeometry","geometry","type","setGraphicElevationContext","ensureDrapedStatus","mode","draped","_createAsOverlay","layer","uid","_createAs3DShape","applyRendererDiff","diff","Recreate_Symbol","setParameters","Fast_Update","prepareSymbolLayerPatch","newValue","_prepareMarkerPatch","_prepareMaterialPatch","symbolLayerStatePatches","push","layerOpacityChanged","_updateMaterialLayerOpacity","parameters","_getCombinedOpacity","layerElevationInfoChanged","_elevationContext","elevationModeChangeTypes","UPDATE","updateGraphics3DGraphicElevationInfo","slicePlaneEnabledChanged","physicalBasedRenderingChanged","pixelRatioChanged","skipHighSymbolLodsChanged","_getGeometryAsPolygonOrPolyline","fromExtent","rings","paths","Array","elevationProvider","renderCoordsHelper","_logGeometryCreationWarnings","lines","position","mapPositions","clippingExtent","_createGeometry","J","ELEVATED","LINE_WIREFRAMES","instantiate","geometries","castShadow","metadata","layerUid","graphicUid","alignedSampledElevation","sampledElevation","needsElevationUpdates","renderView","getObjectAndLayerIdColor","overlayInfo","DRAPED","spatialReference","overlaySR","removeDuplicateStartEnd","attributeData","renderingInfo","sizeFeature","colorFeature","opacityFeature","renderPriority","_renderPriority","_updateBoundingSphere","drapeSourceRenderer","boundingSphere","Math","sqrt","changed","useMaterialColor","_patchMaterialColor","definedChanged","RECREATE","staysOnTheGround","NONE","onTheGroundChanged","Graphics3DLineSymbolLayer"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLineSymbolLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import e from\"../../../../core/Error.js\";import{isSome as t,applySome as r,isNone as a,releaseMaybe as i,unwrapOr as s,get as o,unwrap as n}from\"../../../../core/maybe.js\";import{px2pt as l,pt2px as h}from\"../../../../core/screenUtils.js\";import{s as c}from\"../../../../chunks/vec4.js\";import{f as p,d}from\"../../../../chunks/vec4f64.js\";import{create as m,empty as _,expandWithBuffer as y,intersectsClippingArea as u,expandWithAABB as g}from\"../../../../geometry/support/aaBoundingBox.js\";import{getDriverAxisSizeValueAny as f}from\"../../../../renderers/support/renderingInfoUtils.js\";import{sharedGeometryElevationAligner as C}from\"./ElevationAligners.js\";import{SymbolUpdateType as M,elevationModeChangeUpdateType as b,needsElevationUpdates2D as v}from\"./elevationAlignmentUtils.js\";import{ElevationContext as E}from\"./ElevationContext.js\";import L from\"./Graphics3DDrapedGraphicLayer.js\";import{Graphics3DObject3DGraphicLayer as P}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as w,getAttributeValue as x}from\"./Graphics3DSymbolLayer.js\";import{ApplyRendererDiffResult as k}from\"./interfaces.js\";import{parseLineMarkerStyle as D,parseCapType as S}from\"./lineUtils.js\";import{initFastSymbolUpdatesState as U,updateFastSymbolUpdatesState as R}from\"../support/FastSymbolUpdates.js\";import A from\"../../support/debugFlags.js\";import{createGeometry as j}from\"../../support/engineContent/line.js\";import{prepareMarkerResources as z}from\"../../support/engineContent/marker.js\";import{geometryToRenderInfo as O,geometryToRenderInfoDraped as G}from\"../../support/renderInfoUtils/line.js\";import{Object3D as V}from\"../../webgl-engine/lib/Object3D.js\";import{RenderGeometry as I}from\"../../webgl-engine/lib/RenderGeometry.js\";import{LineMarkerMaterial as T}from\"../../webgl-engine/materials/LineMarkerMaterial.js\";import{getStipplePatternForLinePattern as F}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{RibbonLineMaterial as W}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import H from\"../../../../geometry/Extent.js\";import B from\"../../../../geometry/Polygon.js\";const N=[\"polyline\",\"polygon\",\"extent\"];class q extends w{constructor(e,t,r,a){super(e,t,r,a)}async doLoad(){if(this._vvConvertOptions={modelSize:[1,1,1],symbolSize:[1,1,1],unitInMeters:1,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,rotation:!1}},this._context.renderer&&this._context.renderer.visualVariables&&this._context.renderer.visualVariables.length>0?this._fastUpdates=U(this._context.renderer,this._vvConvertOptions):this._fastUpdates={enabled:!1},!this._drivenProperties.size){if((null!=this.symbolLayer.size?this.symbolLayer.size:l(1))<0)throw new e(\"graphics3dlinesymbollayer:invalid-size\",\"Symbol sizes may not be negative values\")}this._markerTexture=t(this.symbolLayer.marker)&&t(this._context.sharedResources.textures)?z(this._context.sharedResources.textures,D(this.symbolLayer.marker.style)):null}_getMaterialParameters(e,t=!1){const r=this._getCombinedOpacityAndColor(t&&this._markerColor||this._materialColor);this._patternHidesLine&&!t&&(r[3]=0);const a={width:this._computeMaterialWidth(this.symbolLayer?.size),color:r,hasPolygonOffset:!0,join:this.symbolLayer.join||\"miter\",cap:S(this.symbolLayer.cap||\"butt\"),hasSlicePlane:this._context.slicePlaneEnabled,isClosed:e,stipplePattern:F(this.symbolLayer.pattern),stippleScaleWithLineWidth:!0};return this._fastUpdates&&this._fastUpdates.visualVariables?{...a,...this._fastUpdates.materialParameters}:a}get _materialColor(){return r(this.symbolLayer.material,(e=>e.color))}get _markerColor(){return r(this.symbolLayer.marker,(e=>e.color))}get _lineMaterial(){return a(this._lineMaterialCached)&&(this._lineMaterialCached=new W(this._getMaterialParameters(!1)),this._context.stage.add(this._lineMaterialCached)),this._lineMaterialCached}get _ringMaterial(){return a(this._ringMaterialCached)&&(this._ringMaterialCached=new W(this._getMaterialParameters(!0)),this._context.stage.add(this._ringMaterialCached)),this._ringMaterialCached}get _wireframeLineMaterial(){return a(this._wireframeLineMaterialCached)&&(this._wireframeLineMaterialCached=new W({...this._getMaterialParameters(!1),wireframe:!0}),this._context.stage.add(this._wireframeLineMaterialCached)),this._wireframeLineMaterialCached}get _wireframeRingMaterial(){return a(this._wireframeRingMaterialCached)&&(this._wireframeRingMaterialCached=new W({...this._getMaterialParameters(!0),wireframe:!0}),this._context.stage.add(this._wireframeRingMaterialCached)),this._wireframeRingMaterialCached}get _markerMaterial(){return a(this._markerMaterialCached)&&t(this.symbolLayer.marker)&&t(this._markerTexture)&&(this._markerMaterialCached=new T({...this._getMaterialParameters(!1,!0),placement:this.symbolLayer.marker.placement,textureId:this._markerTexture.texture.id}),this._context.stage.add(this._markerMaterialCached)),this._markerMaterialCached}destroy(){super.destroy(),this._forEachMaterial((e=>this._context.stage.remove(e))),this._lineMaterialCached=null,this._ringMaterialCached=null,this._wireframeLineMaterialCached=null,this._wireframeRingMaterialCached=null,this._markerMaterialCached=null,this._markerTexture=i(this._markerTexture)}_getDrivenSize(e){return this._drivenProperties.size&&e.size?h(f(e.size)):1}_getSizeFeatureAttributeData(e){return this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size?x(this._fastUpdates.visualVariables.size.field,e):null}_getDrivenColor(e){const t=p(1,1,1,1);return this._drivenProperties.color&&e.color&&(t[0]=e.color[0],t[1]=e.color[1],t[2]=e.color[2],e.color.length>0&&(t[3]=e.color[3])),this._drivenProperties.opacity&&e.opacity&&(t[3]=e.opacity),t}_getColorFeatureAttributeData(e){return this._fastUpdates.enabled&&this._fastUpdates.visualVariables.color?x(this._fastUpdates.visualVariables.color.field,e):null}_getOpacityFeatureAttributeData(e){return this._fastUpdates.enabled&&this._fastUpdates.visualVariables.opacity?x(this._fastUpdates.visualVariables.opacity.field,e):null}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,N,this.symbolLayer.type))return null;const r=this.setGraphicElevationContext(t,new E);return this.ensureDrapedStatus(\"on-the-ground\"===r.mode),this.draped?this._createAsOverlay(e,this._context.layer.uid):this._createAs3DShape(e,r,t.uid)}applyRendererDiff(e,t){for(const r in e.diff){if(\"visualVariables\"!==r)return k.Recreate_Symbol;if(!R(this._fastUpdates,t,this._vvConvertOptions))return k.Recreate_Symbol;this._forEachMaterial((e=>e.setParameters(this._fastUpdates.materialParameters)))}return k.Fast_Update}prepareSymbolLayerPatch(e){if(\"partial\"!==e.diff.type)return;const t=e.diff.diff,r={};\"complete\"===t.size?.type&&(r.width=this._computeMaterialWidth(t.size.newValue),delete t.size),\"complete\"===t.cap?.type&&(r.cap=S(s(t.cap.newValue,\"butt\")),delete t.cap);const a=this._prepareMarkerPatch(e,t);this._prepareMaterialPatch(e,t,a),e.symbolLayerStatePatches.push((()=>this._forEachMaterial((e=>e.setParameters(r)))))}layerOpacityChanged(){this._forEachMaterial(((e,t)=>this._updateMaterialLayerOpacity(e,t)))}_forEachMaterial(e){t(this._lineMaterialCached)&&e(this._lineMaterialCached),t(this._ringMaterialCached)&&e(this._ringMaterialCached),t(this._wireframeLineMaterialCached)&&e(this._wireframeLineMaterialCached),t(this._wireframeRingMaterialCached)&&e(this._wireframeRingMaterialCached),t(this._markerMaterialCached)&&e(this._markerMaterialCached,!0)}_updateMaterialLayerOpacity(e,t=!1){const r=e.parameters.color,a=o(this.symbolLayer,\"material\",\"color\"),i=this._patternHidesLine&&!t?0:this._getCombinedOpacity(a),s=p(r[0],r[1],r[2],i);e.setParameters({color:s})}layerElevationInfoChanged(e,t,r){const a=this._elevationContext.mode,i=b(q.elevationModeChangeTypes,r,a);if(i!==M.UPDATE)return i;const s=v(a);return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>s))}slicePlaneEnabledChanged(){const e={hasSlicePlane:this._context.slicePlaneEnabled};return this._forEachMaterial((t=>t.setParameters(e))),!0}physicalBasedRenderingChanged(){return!0}pixelRatioChanged(){return!0}skipHighSymbolLodsChanged(){return!0}_getGeometryAsPolygonOrPolyline(e){switch(e.type){case\"extent\":if(e instanceof H)return B.fromExtent(e);break;case\"polygon\":case\"polyline\":return e}return null}_createAs3DShape(e,r,a){const i=e.graphic,s=this._getGeometryAsPolygonOrPolyline(i.geometry),o=\"polygon\"===s.type?s.rings:s.paths,n=new Array,l=m(),h=O(s,this._context.elevationProvider,this._context.renderCoordsHelper,r),c=\"polygon\"===s.type?\"rings\":\"paths\";this._logGeometryCreationWarnings(h,o,c,\"LineSymbol3DLayer\");for(let m=0;m<h.lines.length;m++){const r=h.lines[m],i=r.position,o=r.mapPositions;if(t(this._context.clippingExtent)&&(_(l),y(l,o),!u(l,this._context.clippingExtent)))continue;const c=this._createGeometry(\"polygon\"===s.type?this._ringMaterial:this._lineMaterial,e,i,o,s.type,J.ELEVATED,a);n.push(c),A.LINE_WIREFRAMES&&n.push(c.instantiate({material:\"polygon\"===s.type?this._wireframeRingMaterial:this._wireframeLineMaterial})),t(this._markerMaterial)&&n.push(c.instantiate({material:this._markerMaterial}))}if(0===n.length)return null;const p=new V({geometries:n,castShadow:!1,metadata:{layerUid:this._context.layer.uid,graphicUid:a}}),d=new P(this,p,n,null,null,C,r);return d.alignedSampledElevation=h.sampledElevation,d.needsElevationUpdates=v(r.mode),d}_createGeometry(e,t,r,a,i,s,o){const n=\"polygon\"===i,l=this._fastUpdates.enabled&&this._fastUpdates.visualVariables.color,h=this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size,c=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:o,layerUid:this._context.layer.uid});return j(e,{overlayInfo:s===J.DRAPED?{spatialReference:this._context.overlaySR,renderCoordsHelper:this._context.renderCoordsHelper}:null,removeDuplicateStartEnd:n,mapPositions:a,attributeData:{position:r,size:h?null:this._getDrivenSize(t.renderingInfo),color:l?null:this._getDrivenColor(t.renderingInfo),sizeFeature:this._getSizeFeatureAttributeData(t.graphic),colorFeature:this._getColorFeatureAttributeData(t.graphic),opacityFeature:this._getOpacityFeatureAttributeData(t.graphic)}},c)}_createAsOverlay(e,r){const a=e.graphic,i=this._getGeometryAsPolygonOrPolyline(a.geometry),s=\"polygon\"===i.type?i.rings:i.paths,o=\"polygon\"===i.type?this._ringMaterial:this._lineMaterial;o.renderPriority=this._renderPriority;const l=A.LINE_WIREFRAMES?\"polygon\"===i.type?this._wireframeRingMaterial:this._wireframeLineMaterial:null,h=this._markerMaterial;t(l)&&(l.renderPriority=this._renderPriority-.001),t(h)&&(h.renderPriority=this._renderPriority-.002);const c=new Array,p=m(),d=_(),f=G(i,this._context.overlaySR),C=\"polygon\"===i.type?\"rings\":\"paths\";this._logGeometryCreationWarnings(f,s,C,\"LineSymbol3DLayer\");for(const m of f.lines){if(_(p),y(p,m.position),!u(p,this._context.clippingExtent))continue;g(d,p);const s=t=>{const s=this._createGeometry(t,e,m.position,void 0,i.type,J.DRAPED,a.uid),o=new I(s,{layerUid:r,graphicUid:a.uid});return c.push(o),o};if(t(h)){const e=s(h),t=n(this.symbolLayer.marker).placement;\"begin\"!==t&&\"begin-end\"!==t||y(p,m.position,0,1),\"end\"!==t&&\"begin-end\"!==t||y(p,m.position,m.position.length-3,1),this._updateBoundingSphere(e,p)}const f=s(o);if(this._updateBoundingSphere(f,p),A.LINE_WIREFRAMES){const e=s(l);this._updateBoundingSphere(e,p)}}return new L(this,c,d,this._context.drapeSourceRenderer)}_updateBoundingSphere(e,t){c(e.boundingSphere,.5*(t[0]+t[3]),.5*(t[1]+t[4]),0,.5*Math.sqrt((t[3]-t[0])*(t[3]-t[0])+(t[4]-t[1])*(t[4]-t[1])))}get _patternHidesLine(){const e=this.symbolLayer.pattern;return t(e)&&\"style\"===e.type&&\"none\"===e.style}_computeMaterialWidth(e){return e=s(e,l(1)),this._drivenProperties.size?this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size?h(1):1:h(e)}_prepareMaterialPatch(e,t,i){const s=t.material;if(a(s))return void(i.changed&&i.useMaterialColor&&this._patchMaterialColor(this._getCombinedOpacityAndColor(this._materialColor),this._markerMaterialCached,e));if(\"collection\"===s.type)return;const o=\"complete\"===s.type?r(s.newValue,(e=>e.color)):\"complete\"===s.diff.color?.type?s.diff.color.newValue:null,n=this._getCombinedOpacityAndColor(o);i.useMaterialColor&&this._patchMaterialColor(d(n),this._markerMaterialCached,e),this._patternHidesLine&&(n[3]=0),this._patchMaterialColor(n,this._lineMaterialCached,e),delete t.material}_prepareMarkerPatch(e,r){const i=r.marker;if(a(i)||\"partial\"!==i.type||t(i.diff.style)||t(i.diff.placement)||t(i.diff.color)&&\"complete\"!==i.diff.color.type)return{changed:!1,useMaterialColor:a(this._markerColor)};const s=i.diff.color;if(a(s))return delete r.marker,{changed:!1,useMaterialColor:a(this._markerColor)};const o=n(s.newValue);return a(o)?(delete r.marker,{changed:!0,useMaterialColor:!0}):(this._patchMaterialColor(this._getCombinedOpacityAndColor(o),this._markerMaterialCached,e),delete r.marker,{changed:!0,useMaterialColor:!1})}_patchMaterialColor(e,t,r){a(t)||r.symbolLayerStatePatches.push((()=>t.setParameters({color:e})))}}var J;q.elevationModeChangeTypes={definedChanged:M.RECREATE,staysOnTheGround:M.NONE,onTheGroundChanged:M.RECREATE},function(e){e[e.DRAPED=0]=\"DRAPED\",e[e.ELEVATED=1]=\"ELEVATED\"}(J||(J={}));export{q as Graphics3DLineSymbolLayer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}