{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { PositionHint as e, indexOf as t } from \"../../../core/arrayUtils.js\";\nimport i from \"../../../core/Error.js\";\nimport { clone as s } from \"../../../core/lang.js\";\nimport { removeMaybe as r, destroyMaybe as a, isNone as n, isSome as o } from \"../../../core/maybe.js\";\nimport { MemCacheStorage as u, MemCache as c } from \"../../../core/MemCache.js\";\nimport { throwIfAborted as l } from \"../../../core/promiseUtils.js\";\nimport { getMetersPerUnitForSR as h } from \"../../../core/unitUtils.js\";\nimport { set as m, NEGATIVE_INFINITY as p, create as f, expandWithAABB as d } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { fromValues as y, create as g } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsXY as _ } from \"../../../geometry/support/boundsUtils.js\";\nimport { fromJSON as x, isExtent as w, isPolygon as S } from \"../../../geometry/support/jsonUtils.js\";\nimport { normalizeCentralMeridian as F } from \"../../../geometry/support/normalizeUtils.js\";\nimport { equals as R, isValid as Q } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { convertFromGeometry as I } from \"../featureConversionUtils.js\";\nimport { getWhereClause as j, validateFields as E, validateWhere as A, validateHaving as b, hasInvalidFieldType as P } from \"./attributeSupport.js\";\nimport { checkProjectionSupport as T, project as B, projectMany as C } from \"./projectionSupport.js\";\nimport { queryCapabilities as k } from \"./QueryEngineCapabilities.js\";\nimport { QueryEngineResult as v, SnappingTypes as q } from \"./QueryEngineResult.js\";\nimport { getSpatialQueryOperator as z, canQueryWithRBush as O, checkSpatialQuerySupport as G } from \"./spatialQuerySupport.js\";\nimport { getTimeExtent as M, getTimeOperator as U } from \"./timeSupport.js\";\nimport { QUERY_ENGINE_EMPTY_RESULT as Z, cleanFromGeometryEngine as N, normalizeQuery as H, getGeometry as D } from \"./utils.js\";\nimport L from \"../../support/FieldsIndex.js\";\nimport { loadArcade as J } from \"../../../support/arcadeOnDemand.js\";\nimport { noBudget as V } from \"../../../views/support/Scheduler.js\";\nfunction W(e) {\n  return null != e && e.every(e => \"exceedslimit\" !== e.statisticType);\n}\nconst $ = \"feature-store:unsupported-query\";\nclass K {\n  constructor(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let i = arguments.length > 2 ? arguments[2] : undefined;\n    let s = arguments.length > 3 ? arguments[3] : undefined;\n    let r = arguments.length > 4 ? arguments[4] : undefined;\n    this.attributes = e, this.geometry = i, this.centroid = s, this.filterFlags = r, this.groupId = -1, this.displayId = t;\n  }\n}\nconst X = new u(2e6);\nlet Y = 0;\nclass ee {\n  constructor(e) {\n    this._geometryQueryCache = null, this._changeHandle = null, this.capabilities = {\n      query: k\n    }, this.geometryType = e.geometryType, this.hasM = !!e.hasM, this.hasZ = !!e.hasZ, this.objectIdField = e.objectIdField, this.spatialReference = e.spatialReference, this.definitionExpression = e.definitionExpression, this.featureStore = e.featureStore, this.aggregateAdapter = e.aggregateAdapter, this._changeHandle = this.featureStore.events.on(\"changed\", () => this.clearCache()), this.timeInfo = e.timeInfo, e.cacheSpatialQueries && (this._geometryQueryCache = new c(Y++ + \"$$\", X)), this.fieldsIndex = new L(e.fields), e.scheduler && e.priority && (this._frameTask = e.scheduler.registerTask(e.priority));\n  }\n  destroy() {\n    this._frameTask = r(this._frameTask), this.clearCache(), a(this._geometryQueryCache), this._changeHandle = r(this._changeHandle), a(this.fieldsIndex);\n  }\n  get featureAdapter() {\n    return this.featureStore.featureAdapter;\n  }\n  clearCache() {\n    this._geometryQueryCache?.clear(), this._allFeaturesPromise = null, this._timeExtentPromise = null;\n  }\n  async executeQuery(e, t) {\n    try {\n      return (await this._executeQuery(e, {}, t)).createQueryResponse();\n    } catch (i) {\n      if (i !== Z) throw i;\n      return new v([], e, this).createQueryResponse();\n    }\n  }\n  async executeQueryForCount() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let t = arguments.length > 1 ? arguments[1] : undefined;\n    try {\n      return (await this._executeQuery(e, {\n        returnGeometry: !1,\n        returnCentroid: !1,\n        outSR: null\n      }, t)).createQueryResponseForCount();\n    } catch (i) {\n      if (i !== Z) throw i;\n      return 0;\n    }\n  }\n  async executeQueryForExtent(e, t) {\n    const i = e.outSR;\n    try {\n      const s = await this._executeQuery(e, {\n          returnGeometry: !0,\n          returnCentroid: !1,\n          outSR: null\n        }, t),\n        r = s.size;\n      if (!r) return {\n        count: 0,\n        extent: null\n      };\n      return {\n        count: r,\n        extent: await this._getBounds(s.items, s.spatialReference, i || this.spatialReference)\n      };\n    } catch (s) {\n      if (s === Z) return {\n        count: 0,\n        extent: null\n      };\n      throw s;\n    }\n  }\n  async executeQueryForIds(e, t) {\n    return this.executeQueryForIdSet(e, t).then(e => Array.from(e));\n  }\n  async executeQueryForIdSet(e, t) {\n    try {\n      const i = await this._executeQuery(e, {\n          returnGeometry: !0,\n          returnCentroid: !1,\n          outSR: null\n        }, t),\n        s = i.items,\n        r = new Set();\n      return await this._reschedule(() => {\n        for (const e of s) r.add(i.featureAdapter.getObjectId(e));\n      }, t), r;\n    } catch (i) {\n      if (i === Z) return new Set();\n      throw i;\n    }\n  }\n  async executeQueryForSnapping(e, t) {\n    const {\n      point: i,\n      distance: s,\n      types: r\n    } = e;\n    if (r === q.NONE) return {\n      candidates: []\n    };\n    const a = await this._reschedule(() => this._checkQuerySupport(e.query), t),\n      o = !R(i.spatialReference, this.spatialReference);\n    o && (await T(i.spatialReference, this.spatialReference));\n    const u = \"number\" == typeof s ? s : s.x,\n      c = \"number\" == typeof s ? s : s.y,\n      l = {\n        xmin: i.x - u,\n        xmax: i.x + u,\n        ymin: i.y - c,\n        ymax: i.y + c,\n        spatialReference: i.spatialReference\n      },\n      h = o ? B(l, this.spatialReference) : l;\n    if (!h) return {\n      candidates: []\n    };\n    const m = (await F(x(i), null, {\n        signal: t\n      }))[0],\n      p = (await F(x(h), null, {\n        signal: t\n      }))[0];\n    if (n(m) || n(p)) return {\n      candidates: []\n    };\n    const f = new v(await this._reschedule(() => this._searchFeatures(this._getQueryBBoxes(p.toJSON())), t), a, this);\n    await this._reschedule(() => this._executeObjectIdsQuery(f), t), await this._reschedule(() => this._executeTimeQuery(f), t), await this._reschedule(() => this._executeAttributesQuery(f), t);\n    const d = m.toJSON(),\n      y = o ? B(d, this.spatialReference) : d,\n      g = o ? Math.max(h.xmax - h.xmin, h.ymax - h.ymin) / 2 : s;\n    return f.createSnappingResponse({\n      ...e,\n      point: y,\n      distance: g\n    }, i.spatialReference);\n  }\n  async executeQueryForLatestObservations(e, t) {\n    if (!this.timeInfo || !this.timeInfo.trackIdField) throw new i($, \"Missing timeInfo or timeInfo.trackIdField\", {\n      query: e,\n      timeInfo: this.timeInfo\n    });\n    try {\n      const i = await this._executeQuery(e, {}, t);\n      return await this._reschedule(() => this._filterLatest(i), t), i.createQueryResponse();\n    } catch (s) {\n      if (s !== Z) throw s;\n      return new v([], e, this).createQueryResponse();\n    }\n  }\n  async executeQueryForSummaryStatistics() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let t = arguments.length > 1 ? arguments[1] : undefined;\n    let i = arguments.length > 2 ? arguments[2] : undefined;\n    const {\n      field: s,\n      normalizationField: r,\n      valueExpression: a\n    } = t;\n    return (await this._getQueryEngineResultForStats(e, {\n      field: s,\n      normalizationField: r,\n      valueExpression: a\n    }, i)).createSummaryStatisticsResponse(t);\n  }\n  async executeQueryForUniqueValues() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let t = arguments.length > 1 ? arguments[1] : undefined;\n    let i = arguments.length > 2 ? arguments[2] : undefined;\n    const {\n      field: s,\n      field2: r,\n      field3: a,\n      valueExpression: n\n    } = t;\n    return (await this._getQueryEngineResultForStats(e, {\n      field: s,\n      field2: r,\n      field3: a,\n      valueExpression: n\n    }, i)).createUniqueValuesResponse(t);\n  }\n  async executeQueryForClassBreaks() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let t = arguments.length > 1 ? arguments[1] : undefined;\n    let i = arguments.length > 2 ? arguments[2] : undefined;\n    const {\n      field: s,\n      normalizationField: r,\n      valueExpression: a\n    } = t;\n    return (await this._getQueryEngineResultForStats(e, {\n      field: s,\n      normalizationField: r,\n      valueExpression: a\n    }, i)).createClassBreaksResponse(t);\n  }\n  async executeQueryForHistogram() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let t = arguments.length > 1 ? arguments[1] : undefined;\n    let i = arguments.length > 2 ? arguments[2] : undefined;\n    const {\n      field: s,\n      normalizationField: r,\n      valueExpression: a\n    } = t;\n    return (await this._getQueryEngineResultForStats(e, {\n      field: s,\n      normalizationField: r,\n      valueExpression: a\n    }, i)).createHistogramResponse(t);\n  }\n  async fetchRecomputedExtents(e) {\n    const [t, i] = await Promise.all([\"getFullExtent\" in this.featureStore && this.featureStore.getFullExtent ? Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)) : this._getBounds(await this._getAllFeatures(), this.spatialReference, this.spatialReference), o(this._timeExtentPromise) ? this._timeExtentPromise : this._timeExtentPromise = M(this.timeInfo, this.featureStore)]);\n    return l(e), {\n      fullExtent: t,\n      timeExtent: i\n    };\n  }\n  async _getBounds(e, t, i) {\n    const s = m(f(), p);\n    await this.featureStore.forEachBounds(e, e => d(s, e));\n    const r = {\n      xmin: s[0],\n      ymin: s[1],\n      xmax: s[3],\n      ymax: s[4],\n      spatialReference: N(this.spatialReference)\n    };\n    this.hasZ && isFinite(s[2]) && isFinite(s[5]) && (r.zmin = s[2], r.zmax = s[5]);\n    const a = B(r, t, i);\n    if (a.spatialReference = N(i), a.xmax - a.xmin == 0) {\n      const e = h(a.spatialReference);\n      a.xmin -= e, a.xmax += e;\n    }\n    if (a.ymax - a.ymin == 0) {\n      const e = h(a.spatialReference);\n      a.ymin -= e, a.ymax += e;\n    }\n    if (this.hasZ && null != a.zmin && null != a.zmax && a.zmax - a.zmin == 0) {\n      const e = h(a.spatialReference);\n      a.zmin -= e, a.zmax += e;\n    }\n    return a;\n  }\n  async _schedule(e, t) {\n    return o(this._frameTask) ? this._frameTask.schedule(e, t) : e(V);\n  }\n  async _reschedule(e, t) {\n    return o(this._frameTask) ? this._frameTask.reschedule(e, t) : e(V);\n  }\n  async _getAllFeaturesQueryEngineResult(e) {\n    return new v(await this._getAllFeatures(), e, this);\n  }\n  async _getAllFeatures() {\n    if (n(this._allFeaturesPromise)) {\n      const e = [];\n      this._allFeaturesPromise = (async () => {\n        await this.featureStore.forEach(t => e.push(t));\n      })().then(() => e);\n    }\n    const e = this._allFeaturesPromise,\n      t = await e;\n    return e === this._allFeaturesPromise ? t.slice() : this._getAllFeatures();\n  }\n  async _executeQuery(e, t, i) {\n    e = s(e), e = await this._schedule(() => H(e, this.definitionExpression, this.spatialReference), i), e = await this._reschedule(() => this._checkQuerySupport(e), i), e = {\n      ...e,\n      ...t\n    };\n    const r = await this._reschedule(() => this._executeSceneFilterQuery(e, i), i),\n      a = await this._reschedule(() => this._executeGeometryQuery(e, r, i), i);\n    return await this._reschedule(() => this._executeAggregateIdsQuery(a), i), await this._reschedule(() => this._executeObjectIdsQuery(a), i), await this._reschedule(() => this._executeTimeQuery(a), i), await this._reschedule(() => this._executeAttributesQuery(a), i), a;\n  }\n  async _executeSceneFilterQuery(e, t) {\n    if (n(e.sceneFilter)) return null;\n    const {\n        outSR: i,\n        returnGeometry: s,\n        returnCentroid: r\n      } = e,\n      a = this.featureStore.featureSpatialReference,\n      o = e.sceneFilter.geometry,\n      u = n(a) || R(a, o.spatialReference) ? o : B(o, a);\n    if (!u) return null;\n    const c = s || r,\n      l = Q(i) && !R(this.spatialReference, i) && c ? async e => this._project(e, i) : e => e,\n      h = this.featureAdapter,\n      m = await this._reschedule(() => this._searchFeatures(this._getQueryBBoxes(u)), t);\n    if (\"disjoint\" === e.sceneFilter.spatialRelationship) {\n      if (!m.length) return null;\n      const i = new Set();\n      for (const e of m) i.add(h.getObjectId(e));\n      const s = await this._reschedule(() => this._getAllFeatures(), t),\n        r = await this._reschedule(async () => {\n          const r = await z(\"esriSpatialRelDisjoint\", u, this.geometryType, this.hasZ, this.hasM),\n            a = e => !i.has(h.getObjectId(e)) || r(h.getGeometry(e)),\n            n = await this._runSpatialFilter(s, a, t);\n          return new v(n, e, this);\n        }, t);\n      return l(r);\n    }\n    if (!m.length) return new v([], e, this);\n    if (this._canExecuteSinglePass(u, e)) return l(new v(m, e, this));\n    const p = await z(\"esriSpatialRelContains\", u, this.geometryType, this.hasZ, this.hasM),\n      f = await this._runSpatialFilter(m, e => p(h.getGeometry(e)), t);\n    return l(new v(f, e, this));\n  }\n  async _executeGeometryQuery(i, s, r) {\n    if (o(s) && 0 === s.items.length) return s;\n    i = o(s) ? s.query : i;\n    const {\n        geometry: a,\n        outSR: u,\n        spatialRel: c,\n        returnGeometry: l,\n        returnCentroid: h\n      } = i,\n      m = this.featureStore.featureSpatialReference,\n      p = !a || n(m) || R(m, a.spatialReference) ? a : B(a, m),\n      f = l || h,\n      d = Q(u) && !R(this.spatialReference, u),\n      y = this._geometryQueryCache && n(s) ? d && f ? JSON.stringify({\n        originalFilterGeometry: a,\n        spatialRelationship: c,\n        outSpatialReference: u\n      }) : JSON.stringify({\n        originalFilterGeometry: a,\n        spatialRelationship: c\n      }) : null,\n      g = y ? this._geometryQueryCache.get(y) : null;\n    if (o(g)) return new v(g, i, this);\n    const _ = async e => (d && f && (await this._project(e, u)), y && this._geometryQueryCache.put(y, e.items, e.items.length + 1), e);\n    if (!p) return _(o(s) ? s : await this._getAllFeaturesQueryEngineResult(i));\n    const x = this.featureAdapter;\n    let w = await this._reschedule(() => this._searchFeatures(this._getQueryBBoxes(a)), r);\n    if (\"esriSpatialRelDisjoint\" === c) {\n      if (!w.length) return _(o(s) ? s : await this._getAllFeaturesQueryEngineResult(i));\n      const e = new Set();\n      for (const i of w) e.add(x.getObjectId(i));\n      const t = o(s) ? s.items : await this._reschedule(() => this._getAllFeatures(), r),\n        a = await this._reschedule(async () => {\n          const s = await z(c, p, this.geometryType, this.hasZ, this.hasM),\n            a = t => !e.has(x.getObjectId(t)) || s(x.getGeometry(t)),\n            n = await this._runSpatialFilter(t, a, r);\n          return new v(n, i, this);\n        }, r);\n      return _(a);\n    }\n    if (o(s)) {\n      const i = new e();\n      w = w.filter(e => t(s.items, e, s.items.length, i) >= 0);\n    }\n    if (!w.length) {\n      const e = new v([], i, this);\n      return y && this._geometryQueryCache.put(y, e.items, 1), e;\n    }\n    if (this._canExecuteSinglePass(p, i)) return _(new v(w, i, this));\n    const S = await z(c, p, this.geometryType, this.hasZ, this.hasM),\n      F = await this._runSpatialFilter(w, e => S(x.getGeometry(e)), r);\n    return _(new v(F, i, this));\n  }\n  _executeAggregateIdsQuery(e) {\n    if (0 === e.items.length || !e.query.aggregateIds || !e.query.aggregateIds.length || n(this.aggregateAdapter)) return;\n    const t = new Set();\n    for (const s of e.query.aggregateIds) {\n      this.aggregateAdapter.getFeatureObjectIds(s).forEach(e => t.add(e));\n    }\n    const i = this.featureAdapter.getObjectId;\n    e.items = e.items.filter(e => t.has(i(e)));\n  }\n  _executeObjectIdsQuery(e) {\n    if (0 === e.items.length || !e.query.objectIds || !e.query.objectIds.length) return;\n    const t = new Set(e.query.objectIds),\n      i = this.featureAdapter.getObjectId;\n    e.items = e.items.filter(e => t.has(i(e)));\n  }\n  _executeTimeQuery(e) {\n    if (0 === e.items.length) return;\n    const t = U(this.timeInfo, e.query.timeExtent, this.featureAdapter);\n    n(t) || (e.items = e.items.filter(t));\n  }\n  _executeAttributesQuery(e) {\n    if (0 === e.items.length) return;\n    const t = j(e.query.where, this.fieldsIndex);\n    if (t) {\n      if (!t.isStandardized) throw new TypeError(\"Where clause is not standardized\");\n      e.items = e.items.filter(e => t.testFeature(e, this.featureAdapter));\n    }\n  }\n  async _runSpatialFilter(e, t, i) {\n    if (!t) return e;\n    if (n(this._frameTask)) return e.filter(e => t(e));\n    let s = 0;\n    const r = new Array(),\n      a = async n => {\n        for (; s < e.length;) {\n          const o = e[s++];\n          t(o) && (r.push(o), n.madeProgress()), n.done && (await this._reschedule(e => a(e), i));\n        }\n      };\n    return this._reschedule(e => a(e), i).then(() => r);\n  }\n  _filterLatest(e) {\n    const {\n        trackIdField: t,\n        startTimeField: i,\n        endTimeField: s\n      } = this.timeInfo,\n      r = s || i,\n      a = new Map(),\n      n = this.featureAdapter.getAttribute;\n    for (const o of e.items) {\n      const e = n(o, t),\n        i = n(o, r),\n        s = a.get(e);\n      (!s || i > n(s, r)) && a.set(e, o);\n    }\n    e.items = Array.from(a.values());\n  }\n  _canExecuteSinglePass(e, t) {\n    const {\n      spatialRel: i\n    } = t;\n    return O(e) && (\"esriSpatialRelEnvelopeIntersects\" === i || \"esriGeometryPoint\" === this.geometryType && (\"esriSpatialRelIntersects\" === i || \"esriSpatialRelContains\" === i || \"esriSpatialRelWithin\" === i));\n  }\n  async _project(e, t) {\n    if (!t || R(this.spatialReference, t)) return e;\n    const i = this.featureAdapter,\n      s = await C(e.items.map(e => D(this.geometryType, this.hasZ, this.hasM, i.getGeometry(e))), this.spatialReference, t);\n    return e.items = s.map((t, s) => i.cloneWithGeometry(e.items[s], I(t, this.hasZ, this.hasM))), e;\n  }\n  _getQueryBBoxes(e) {\n    if (O(e)) {\n      if (w(e)) return [y(e.xmin, e.ymin, e.xmax, e.ymax)];\n      if (S(e)) return e.rings.map(e => y(Math.min(e[0][0], e[2][0]), Math.min(e[0][1], e[2][1]), Math.max(e[0][0], e[2][0]), Math.max(e[0][1], e[2][1])));\n    }\n    return [_(g(), e)];\n  }\n  async _searchFeatures(e) {\n    const t = new Set();\n    await Promise.all(e.map(e => this.featureStore.forEachInBounds(e, e => t.add(e))));\n    const i = Array.from(t.values());\n    return t.clear(), i;\n  }\n  async _checkStatisticsSupport(e, t) {\n    if ((e.distance ?? 0) < 0 || null != e.geometryPrecision || e.multipatchOption || e.pixelSize || e.relationParam || e.text || e.outStatistics || e.groupByFieldsForStatistics || e.having || e.orderByFields) throw new i($, \"Unsupported query options\", {\n      query: e\n    });\n    return this._checkAttributesQuerySupport(e), Promise.all([this._checkStatisticsParamsSupport(t), G(e, this.geometryType, this.spatialReference), T(this.spatialReference, e.outSR)]).then(() => e);\n  }\n  async _checkStatisticsParamsSupport(e) {\n    let t = [];\n    if (e.valueExpression) {\n      const {\n        arcadeUtils: i\n      } = await J();\n      t = i.extractFieldNames(e.valueExpression);\n    }\n    if (e.field && t.push(e.field), e.field2 && t.push(e.field2), e.field3 && t.push(e.field3), e.normalizationField && t.push(e.normalizationField), !t.length) throw new i($, \"params should have at least a field or valueExpression\", {\n      params: e\n    });\n    E(this.fieldsIndex, t, \"params contains missing fields\");\n  }\n  async _checkQuerySupport(e) {\n    if ((e.distance ?? 0) < 0 || null != e.geometryPrecision || e.multipatchOption || e.pixelSize || e.relationParam || e.text) throw new i($, \"Unsupported query options\", {\n      query: e\n    });\n    return this._checkAttributesQuerySupport(e), this._checkStatisticsQuerySupport(e), Promise.all([G(e, this.geometryType, this.spatialReference), T(this.spatialReference, e.outSR)]).then(() => e);\n  }\n  _checkAttributesQuerySupport(e) {\n    const {\n        outFields: t,\n        orderByFields: s,\n        returnDistinctValues: r,\n        outStatistics: a\n      } = e,\n      n = a ? a.map(e => e.outStatisticFieldName && e.outStatisticFieldName.toLowerCase()).filter(Boolean) : [];\n    if (s && s.length > 0) {\n      const e = \" asc\",\n        t = \" desc\",\n        i = s.map(i => {\n          const s = i.toLowerCase();\n          return s.includes(e) ? s.split(e)[0] : s.includes(t) ? s.split(t)[0] : i;\n        }).filter(e => !n.includes(e));\n      E(this.fieldsIndex, i, \"orderByFields contains missing fields\");\n    }\n    if (t && t.length > 0) E(this.fieldsIndex, t, \"outFields contains missing fields\");else if (r) throw new i($, \"outFields should be specified for returnDistinctValues\", {\n      query: e\n    });\n    A(this.fieldsIndex, e.where);\n  }\n  _checkStatisticsQuerySupport(e) {\n    const {\n        outStatistics: t,\n        groupByFieldsForStatistics: s,\n        having: r\n      } = e,\n      a = s && s.length,\n      n = t && t.length;\n    if (r) {\n      if (!a || !n) throw new i($, \"outStatistics and groupByFieldsForStatistics should be specified with having\", {\n        query: e\n      });\n      b(this.fieldsIndex, r, t);\n    }\n    if (n) {\n      if (!W(t)) return;\n      const r = t.map(e => e.onStatisticField).filter(Boolean);\n      E(this.fieldsIndex, r, \"onStatisticFields contains missing fields\"), a && E(this.fieldsIndex, s, \"groupByFieldsForStatistics contains missing fields\");\n      for (const s of t) {\n        const {\n          onStatisticField: t,\n          statisticType: r\n        } = s;\n        if ((\"percentile_disc\" === r || \"percentile_cont\" === r) && \"statisticParameters\" in s) {\n          const {\n            statisticParameters: t\n          } = s;\n          if (!t) throw new i($, \"statisticParamters should be set for percentile type\", {\n            definition: s,\n            query: e\n          });\n        } else if (\"count\" !== r && t && P(t, this.fieldsIndex)) throw new i($, \"outStatistics contains non-numeric fields\", {\n          definition: s,\n          query: e\n        });\n      }\n    }\n  }\n  async _getQueryEngineResultForStats(e, t, i) {\n    e = s(e);\n    try {\n      e = await this._schedule(() => H(e, this.definitionExpression, this.spatialReference), i), e = await this._reschedule(() => this._checkStatisticsSupport(e, t), i);\n      const s = await this._reschedule(() => this._executeSceneFilterQuery(e, i), i),\n        r = await this._reschedule(() => this._executeGeometryQuery(e, s, i), i);\n      return await this._reschedule(() => this._executeAggregateIdsQuery(r), i), await this._reschedule(() => this._executeObjectIdsQuery(r), i), await this._reschedule(() => this._executeTimeQuery(r), i), await this._reschedule(() => this._executeAttributesQuery(r), i), r;\n    } catch (r) {\n      if (r !== Z) throw r;\n      return new v([], e, this);\n    }\n  }\n}\nexport { K as Feature, ee as QueryEngine };","map":{"version":3,"names":["PositionHint","e","indexOf","t","i","clone","s","removeMaybe","r","destroyMaybe","a","isNone","n","isSome","o","MemCacheStorage","u","MemCache","c","throwIfAborted","l","getMetersPerUnitForSR","h","set","m","NEGATIVE_INFINITY","p","create","f","expandWithAABB","d","fromValues","y","g","getBoundsXY","_","fromJSON","x","isExtent","w","isPolygon","S","normalizeCentralMeridian","F","equals","R","isValid","Q","convertFromGeometry","I","getWhereClause","j","validateFields","E","validateWhere","A","validateHaving","b","hasInvalidFieldType","P","checkProjectionSupport","T","project","B","projectMany","C","queryCapabilities","k","QueryEngineResult","v","SnappingTypes","q","getSpatialQueryOperator","z","canQueryWithRBush","O","checkSpatialQuerySupport","G","getTimeExtent","M","getTimeOperator","U","QUERY_ENGINE_EMPTY_RESULT","Z","cleanFromGeometryEngine","N","normalizeQuery","H","getGeometry","D","L","loadArcade","J","noBudget","V","W","every","statisticType","$","K","constructor","arguments","length","undefined","attributes","geometry","centroid","filterFlags","groupId","displayId","X","Y","ee","_geometryQueryCache","_changeHandle","capabilities","query","geometryType","hasM","hasZ","objectIdField","spatialReference","definitionExpression","featureStore","aggregateAdapter","events","on","clearCache","timeInfo","cacheSpatialQueries","fieldsIndex","fields","scheduler","priority","_frameTask","registerTask","destroy","featureAdapter","clear","_allFeaturesPromise","_timeExtentPromise","executeQuery","_executeQuery","createQueryResponse","executeQueryForCount","returnGeometry","returnCentroid","outSR","createQueryResponseForCount","executeQueryForExtent","size","count","extent","_getBounds","items","executeQueryForIds","executeQueryForIdSet","then","Array","from","Set","_reschedule","add","getObjectId","executeQueryForSnapping","point","distance","types","NONE","candidates","_checkQuerySupport","xmin","xmax","ymin","ymax","signal","_searchFeatures","_getQueryBBoxes","toJSON","_executeObjectIdsQuery","_executeTimeQuery","_executeAttributesQuery","Math","max","createSnappingResponse","executeQueryForLatestObservations","trackIdField","_filterLatest","executeQueryForSummaryStatistics","field","normalizationField","valueExpression","_getQueryEngineResultForStats","createSummaryStatisticsResponse","executeQueryForUniqueValues","field2","field3","createUniqueValuesResponse","executeQueryForClassBreaks","createClassBreaksResponse","executeQueryForHistogram","createHistogramResponse","fetchRecomputedExtents","Promise","all","getFullExtent","resolve","_getAllFeatures","fullExtent","timeExtent","forEachBounds","isFinite","zmin","zmax","_schedule","schedule","reschedule","_getAllFeaturesQueryEngineResult","forEach","push","slice","_executeSceneFilterQuery","_executeGeometryQuery","_executeAggregateIdsQuery","sceneFilter","featureSpatialReference","_project","spatialRelationship","has","_runSpatialFilter","_canExecuteSinglePass","spatialRel","JSON","stringify","originalFilterGeometry","outSpatialReference","get","put","filter","aggregateIds","getFeatureObjectIds","objectIds","where","isStandardized","TypeError","testFeature","madeProgress","done","startTimeField","endTimeField","Map","getAttribute","values","map","cloneWithGeometry","rings","min","forEachInBounds","_checkStatisticsSupport","geometryPrecision","multipatchOption","pixelSize","relationParam","text","outStatistics","groupByFieldsForStatistics","having","orderByFields","_checkAttributesQuerySupport","_checkStatisticsParamsSupport","arcadeUtils","extractFieldNames","params","_checkStatisticsQuerySupport","outFields","returnDistinctValues","outStatisticFieldName","toLowerCase","Boolean","includes","split","onStatisticField","statisticParameters","definition","Feature","QueryEngine"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{PositionHint as e,indexOf as t}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import{clone as s}from\"../../../core/lang.js\";import{removeMaybe as r,destroyMaybe as a,isNone as n,isSome as o}from\"../../../core/maybe.js\";import{MemCacheStorage as u,MemCache as c}from\"../../../core/MemCache.js\";import{throwIfAborted as l}from\"../../../core/promiseUtils.js\";import{getMetersPerUnitForSR as h}from\"../../../core/unitUtils.js\";import{set as m,NEGATIVE_INFINITY as p,create as f,expandWithAABB as d}from\"../../../geometry/support/aaBoundingBox.js\";import{fromValues as y,create as g}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as _}from\"../../../geometry/support/boundsUtils.js\";import{fromJSON as x,isExtent as w,isPolygon as S}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as F}from\"../../../geometry/support/normalizeUtils.js\";import{equals as R,isValid as Q}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as I}from\"../featureConversionUtils.js\";import{getWhereClause as j,validateFields as E,validateWhere as A,validateHaving as b,hasInvalidFieldType as P}from\"./attributeSupport.js\";import{checkProjectionSupport as T,project as B,projectMany as C}from\"./projectionSupport.js\";import{queryCapabilities as k}from\"./QueryEngineCapabilities.js\";import{QueryEngineResult as v,SnappingTypes as q}from\"./QueryEngineResult.js\";import{getSpatialQueryOperator as z,canQueryWithRBush as O,checkSpatialQuerySupport as G}from\"./spatialQuerySupport.js\";import{getTimeExtent as M,getTimeOperator as U}from\"./timeSupport.js\";import{QUERY_ENGINE_EMPTY_RESULT as Z,cleanFromGeometryEngine as N,normalizeQuery as H,getGeometry as D}from\"./utils.js\";import L from\"../../support/FieldsIndex.js\";import{loadArcade as J}from\"../../../support/arcadeOnDemand.js\";import{noBudget as V}from\"../../../views/support/Scheduler.js\";function W(e){return null!=e&&e.every((e=>\"exceedslimit\"!==e.statisticType))}const $=\"feature-store:unsupported-query\";class K{constructor(e,t=null,i,s,r){this.attributes=e,this.geometry=i,this.centroid=s,this.filterFlags=r,this.groupId=-1,this.displayId=t}}const X=new u(2e6);let Y=0;class ee{constructor(e){this._geometryQueryCache=null,this._changeHandle=null,this.capabilities={query:k},this.geometryType=e.geometryType,this.hasM=!!e.hasM,this.hasZ=!!e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on(\"changed\",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new c(Y+++\"$$\",X)),this.fieldsIndex=new L(e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=r(this._frameTask),this.clearCache(),a(this._geometryQueryCache),this._changeHandle=r(this._changeHandle),a(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear(),this._allFeaturesPromise=null,this._timeExtentPromise=null}async executeQuery(e,t){try{return(await this._executeQuery(e,{},t)).createQueryResponse()}catch(i){if(i!==Z)throw i;return new v([],e,this).createQueryResponse()}}async executeQueryForCount(e={},t){try{return(await this._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},t)).createQueryResponseForCount()}catch(i){if(i!==Z)throw i;return 0}}async executeQueryForExtent(e,t){const i=e.outSR;try{const s=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),r=s.size;if(!r)return{count:0,extent:null};return{count:r,extent:await this._getBounds(s.items,s.spatialReference,i||this.spatialReference)}}catch(s){if(s===Z)return{count:0,extent:null};throw s}}async executeQueryForIds(e,t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))}async executeQueryForIdSet(e,t){try{const i=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),s=i.items,r=new Set;return await this._reschedule((()=>{for(const e of s)r.add(i.featureAdapter.getObjectId(e))}),t),r}catch(i){if(i===Z)return new Set;throw i}}async executeQueryForSnapping(e,t){const{point:i,distance:s,types:r}=e;if(r===q.NONE)return{candidates:[]};const a=await this._reschedule((()=>this._checkQuerySupport(e.query)),t),o=!R(i.spatialReference,this.spatialReference);o&&await T(i.spatialReference,this.spatialReference);const u=\"number\"==typeof s?s:s.x,c=\"number\"==typeof s?s:s.y,l={xmin:i.x-u,xmax:i.x+u,ymin:i.y-c,ymax:i.y+c,spatialReference:i.spatialReference},h=o?B(l,this.spatialReference):l;if(!h)return{candidates:[]};const m=(await F(x(i),null,{signal:t}))[0],p=(await F(x(h),null,{signal:t}))[0];if(n(m)||n(p))return{candidates:[]};const f=new v(await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(p.toJSON()))),t),a,this);await this._reschedule((()=>this._executeObjectIdsQuery(f)),t),await this._reschedule((()=>this._executeTimeQuery(f)),t),await this._reschedule((()=>this._executeAttributesQuery(f)),t);const d=m.toJSON(),y=o?B(d,this.spatialReference):d,g=o?Math.max(h.xmax-h.xmin,h.ymax-h.ymin)/2:s;return f.createSnappingResponse({...e,point:y,distance:g},i.spatialReference)}async executeQueryForLatestObservations(e,t){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new i($,\"Missing timeInfo or timeInfo.trackIdField\",{query:e,timeInfo:this.timeInfo});try{const i=await this._executeQuery(e,{},t);return await this._reschedule((()=>this._filterLatest(i)),t),i.createQueryResponse()}catch(s){if(s!==Z)throw s;return new v([],e,this).createQueryResponse()}}async executeQueryForSummaryStatistics(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createSummaryStatisticsResponse(t)}async executeQueryForUniqueValues(e={},t,i){const{field:s,field2:r,field3:a,valueExpression:n}=t;return(await this._getQueryEngineResultForStats(e,{field:s,field2:r,field3:a,valueExpression:n},i)).createUniqueValuesResponse(t)}async executeQueryForClassBreaks(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createClassBreaksResponse(t)}async executeQueryForHistogram(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createHistogramResponse(t)}async fetchRecomputedExtents(e){const[t,i]=await Promise.all([\"getFullExtent\"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),this.spatialReference,this.spatialReference),o(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=M(this.timeInfo,this.featureStore)]);return l(e),{fullExtent:t,timeExtent:i}}async _getBounds(e,t,i){const s=m(f(),p);await this.featureStore.forEachBounds(e,(e=>d(s,e)));const r={xmin:s[0],ymin:s[1],xmax:s[3],ymax:s[4],spatialReference:N(this.spatialReference)};this.hasZ&&isFinite(s[2])&&isFinite(s[5])&&(r.zmin=s[2],r.zmax=s[5]);const a=B(r,t,i);if(a.spatialReference=N(i),a.xmax-a.xmin==0){const e=h(a.spatialReference);a.xmin-=e,a.xmax+=e}if(a.ymax-a.ymin==0){const e=h(a.spatialReference);a.ymin-=e,a.ymax+=e}if(this.hasZ&&null!=a.zmin&&null!=a.zmax&&a.zmax-a.zmin==0){const e=h(a.spatialReference);a.zmin-=e,a.zmax+=e}return a}async _schedule(e,t){return o(this._frameTask)?this._frameTask.schedule(e,t):e(V)}async _reschedule(e,t){return o(this._frameTask)?this._frameTask.reschedule(e,t):e(V)}async _getAllFeaturesQueryEngineResult(e){return new v(await this._getAllFeatures(),e,this)}async _getAllFeatures(){if(n(this._allFeaturesPromise)){const e=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach((t=>e.push(t)))})().then((()=>e))}const e=this._allFeaturesPromise,t=await e;return e===this._allFeaturesPromise?t.slice():this._getAllFeatures()}async _executeQuery(e,t,i){e=s(e),e=await this._schedule((()=>H(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkQuerySupport(e)),i),e={...e,...t};const r=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),a=await this._reschedule((()=>this._executeGeometryQuery(e,r,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(a)),i),await this._reschedule((()=>this._executeObjectIdsQuery(a)),i),await this._reschedule((()=>this._executeTimeQuery(a)),i),await this._reschedule((()=>this._executeAttributesQuery(a)),i),a}async _executeSceneFilterQuery(e,t){if(n(e.sceneFilter))return null;const{outSR:i,returnGeometry:s,returnCentroid:r}=e,a=this.featureStore.featureSpatialReference,o=e.sceneFilter.geometry,u=n(a)||R(a,o.spatialReference)?o:B(o,a);if(!u)return null;const c=s||r,l=Q(i)&&!R(this.spatialReference,i)&&c?async e=>this._project(e,i):e=>e,h=this.featureAdapter,m=await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(u))),t);if(\"disjoint\"===e.sceneFilter.spatialRelationship){if(!m.length)return null;const i=new Set;for(const e of m)i.add(h.getObjectId(e));const s=await this._reschedule((()=>this._getAllFeatures()),t),r=await this._reschedule((async()=>{const r=await z(\"esriSpatialRelDisjoint\",u,this.geometryType,this.hasZ,this.hasM),a=e=>!i.has(h.getObjectId(e))||r(h.getGeometry(e)),n=await this._runSpatialFilter(s,a,t);return new v(n,e,this)}),t);return l(r)}if(!m.length)return new v([],e,this);if(this._canExecuteSinglePass(u,e))return l(new v(m,e,this));const p=await z(\"esriSpatialRelContains\",u,this.geometryType,this.hasZ,this.hasM),f=await this._runSpatialFilter(m,(e=>p(h.getGeometry(e))),t);return l(new v(f,e,this))}async _executeGeometryQuery(i,s,r){if(o(s)&&0===s.items.length)return s;i=o(s)?s.query:i;const{geometry:a,outSR:u,spatialRel:c,returnGeometry:l,returnCentroid:h}=i,m=this.featureStore.featureSpatialReference,p=!a||n(m)||R(m,a.spatialReference)?a:B(a,m),f=l||h,d=Q(u)&&!R(this.spatialReference,u),y=this._geometryQueryCache&&n(s)?d&&f?JSON.stringify({originalFilterGeometry:a,spatialRelationship:c,outSpatialReference:u}):JSON.stringify({originalFilterGeometry:a,spatialRelationship:c}):null,g=y?this._geometryQueryCache.get(y):null;if(o(g))return new v(g,i,this);const _=async e=>(d&&f&&await this._project(e,u),y&&this._geometryQueryCache.put(y,e.items,e.items.length+1),e);if(!p)return _(o(s)?s:await this._getAllFeaturesQueryEngineResult(i));const x=this.featureAdapter;let w=await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(a))),r);if(\"esriSpatialRelDisjoint\"===c){if(!w.length)return _(o(s)?s:await this._getAllFeaturesQueryEngineResult(i));const e=new Set;for(const i of w)e.add(x.getObjectId(i));const t=o(s)?s.items:await this._reschedule((()=>this._getAllFeatures()),r),a=await this._reschedule((async()=>{const s=await z(c,p,this.geometryType,this.hasZ,this.hasM),a=t=>!e.has(x.getObjectId(t))||s(x.getGeometry(t)),n=await this._runSpatialFilter(t,a,r);return new v(n,i,this)}),r);return _(a)}if(o(s)){const i=new e;w=w.filter((e=>t(s.items,e,s.items.length,i)>=0))}if(!w.length){const e=new v([],i,this);return y&&this._geometryQueryCache.put(y,e.items,1),e}if(this._canExecuteSinglePass(p,i))return _(new v(w,i,this));const S=await z(c,p,this.geometryType,this.hasZ,this.hasM),F=await this._runSpatialFilter(w,(e=>S(x.getGeometry(e))),r);return _(new v(F,i,this))}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||n(this.aggregateAdapter))return;const t=new Set;for(const s of e.query.aggregateIds){this.aggregateAdapter.getFeatureObjectIds(s).forEach((e=>t.add(e)))}const i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const t=new Set(e.query.objectIds),i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeTimeQuery(e){if(0===e.items.length)return;const t=U(this.timeInfo,e.query.timeExtent,this.featureAdapter);n(t)||(e.items=e.items.filter(t))}_executeAttributesQuery(e){if(0===e.items.length)return;const t=j(e.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError(\"Where clause is not standardized\");e.items=e.items.filter((e=>t.testFeature(e,this.featureAdapter)))}}async _runSpatialFilter(e,t,i){if(!t)return e;if(n(this._frameTask))return e.filter((e=>t(e)));let s=0;const r=new Array,a=async n=>{for(;s<e.length;){const o=e[s++];t(o)&&(r.push(o),n.madeProgress()),n.done&&await this._reschedule((e=>a(e)),i)}};return this._reschedule((e=>a(e)),i).then((()=>r))}_filterLatest(e){const{trackIdField:t,startTimeField:i,endTimeField:s}=this.timeInfo,r=s||i,a=new Map,n=this.featureAdapter.getAttribute;for(const o of e.items){const e=n(o,t),i=n(o,r),s=a.get(e);(!s||i>n(s,r))&&a.set(e,o)}e.items=Array.from(a.values())}_canExecuteSinglePass(e,t){const{spatialRel:i}=t;return O(e)&&(\"esriSpatialRelEnvelopeIntersects\"===i||\"esriGeometryPoint\"===this.geometryType&&(\"esriSpatialRelIntersects\"===i||\"esriSpatialRelContains\"===i||\"esriSpatialRelWithin\"===i))}async _project(e,t){if(!t||R(this.spatialReference,t))return e;const i=this.featureAdapter,s=await C(e.items.map((e=>D(this.geometryType,this.hasZ,this.hasM,i.getGeometry(e)))),this.spatialReference,t);return e.items=s.map(((t,s)=>i.cloneWithGeometry(e.items[s],I(t,this.hasZ,this.hasM)))),e}_getQueryBBoxes(e){if(O(e)){if(w(e))return[y(e.xmin,e.ymin,e.xmax,e.ymax)];if(S(e))return e.rings.map((e=>y(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[_(g(),e)]}async _searchFeatures(e){const t=new Set;await Promise.all(e.map((e=>this.featureStore.forEachInBounds(e,(e=>t.add(e))))));const i=Array.from(t.values());return t.clear(),i}async _checkStatisticsSupport(e,t){if((e.distance??0)<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new i($,\"Unsupported query options\",{query:e});return this._checkAttributesQuerySupport(e),Promise.all([this._checkStatisticsParamsSupport(t),G(e,this.geometryType,this.spatialReference),T(this.spatialReference,e.outSR)]).then((()=>e))}async _checkStatisticsParamsSupport(e){let t=[];if(e.valueExpression){const{arcadeUtils:i}=await J();t=i.extractFieldNames(e.valueExpression)}if(e.field&&t.push(e.field),e.field2&&t.push(e.field2),e.field3&&t.push(e.field3),e.normalizationField&&t.push(e.normalizationField),!t.length)throw new i($,\"params should have at least a field or valueExpression\",{params:e});E(this.fieldsIndex,t,\"params contains missing fields\")}async _checkQuerySupport(e){if((e.distance??0)<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new i($,\"Unsupported query options\",{query:e});return this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),Promise.all([G(e,this.geometryType,this.spatialReference),T(this.spatialReference,e.outSR)]).then((()=>e))}_checkAttributesQuerySupport(e){const{outFields:t,orderByFields:s,returnDistinctValues:r,outStatistics:a}=e,n=a?a.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())).filter(Boolean):[];if(s&&s.length>0){const e=\" asc\",t=\" desc\",i=s.map((i=>{const s=i.toLowerCase();return s.includes(e)?s.split(e)[0]:s.includes(t)?s.split(t)[0]:i})).filter((e=>!n.includes(e)));E(this.fieldsIndex,i,\"orderByFields contains missing fields\")}if(t&&t.length>0)E(this.fieldsIndex,t,\"outFields contains missing fields\");else if(r)throw new i($,\"outFields should be specified for returnDistinctValues\",{query:e});A(this.fieldsIndex,e.where)}_checkStatisticsQuerySupport(e){const{outStatistics:t,groupByFieldsForStatistics:s,having:r}=e,a=s&&s.length,n=t&&t.length;if(r){if(!a||!n)throw new i($,\"outStatistics and groupByFieldsForStatistics should be specified with having\",{query:e});b(this.fieldsIndex,r,t)}if(n){if(!W(t))return;const r=t.map((e=>e.onStatisticField)).filter(Boolean);E(this.fieldsIndex,r,\"onStatisticFields contains missing fields\"),a&&E(this.fieldsIndex,s,\"groupByFieldsForStatistics contains missing fields\");for(const s of t){const{onStatisticField:t,statisticType:r}=s;if((\"percentile_disc\"===r||\"percentile_cont\"===r)&&\"statisticParameters\"in s){const{statisticParameters:t}=s;if(!t)throw new i($,\"statisticParamters should be set for percentile type\",{definition:s,query:e})}else if(\"count\"!==r&&t&&P(t,this.fieldsIndex))throw new i($,\"outStatistics contains non-numeric fields\",{definition:s,query:e})}}}async _getQueryEngineResultForStats(e,t,i){e=s(e);try{e=await this._schedule((()=>H(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkStatisticsSupport(e,t)),i);const s=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),r=await this._reschedule((()=>this._executeGeometryQuery(e,s,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(r)),i),await this._reschedule((()=>this._executeObjectIdsQuery(r)),i),await this._reschedule((()=>this._executeTimeQuery(r)),i),await this._reschedule((()=>this._executeAttributesQuery(r)),i),r}catch(r){if(r!==Z)throw r;return new v([],e,this)}}}export{K as Feature,ee as QueryEngine};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}