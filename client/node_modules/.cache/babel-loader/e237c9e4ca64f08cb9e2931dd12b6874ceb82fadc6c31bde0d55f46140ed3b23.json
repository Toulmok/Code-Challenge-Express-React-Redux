{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport r from \"../../core/Error.js\";\nimport o from \"../../core/ItemCache.js\";\nimport { isSome as t, unwrapOrThrow as n } from \"../../core/maybe.js\";\nimport { size as i, create as s } from \"../../geometry/support/aaBoundingBox.js\";\nimport { objectSymbolLayerSizeWithResourceSize as u, objectSymbolLayerPrimitiveBoundingBox as c } from \"./symbolLayerUtils3D.js\";\nlet a = m();\nfunction m() {\n  return new o(50);\n}\nfunction y() {\n  a = m();\n}\nfunction f(e, o) {\n  if (\"icon\" === e.type) return p(e, o);\n  if (\"object\" === e.type) return d(e, o);\n  throw new r(\"symbol3d:unsupported-symbol-layer\", \"computeLayerSize only works with symbol layers of type Icon and Object\");\n}\nasync function l(e, o) {\n  if (\"icon\" === e.type) return h(e, o);\n  if (\"object\" === e.type) return w(e, o);\n  throw new r(\"symbol3d:unsupported-symbol-layer\", \"computeLayerSize only works with symbol layers of type Icon and Object\");\n}\nasync function p(e, o) {\n  if (e.resource?.href) return b(e.resource.href).then(e => [e.width, e.height]);\n  if (e.resource?.primitive) return t(o) ? [o, o] : [256, 256];\n  throw new r(\"symbol3d:invalid-symbol-layer\", \"symbol layers of type Icon must have either an href or a primitive resource\");\n}\nfunction h(e, r) {\n  return p(e, r).then(r => {\n    if (null == e.size) return r;\n    const o = r[0] / r[1];\n    return o > 1 ? [e.size, e.size / o] : [e.size * o, e.size];\n  });\n}\nfunction b(r) {\n  return e(r, {\n    responseType: \"image\"\n  }).then(e => e.data);\n}\nfunction d(e, r) {\n  return j(e, r).then(e => i(e));\n}\nasync function w(e, r) {\n  const o = await d(e, r);\n  return u(o, e);\n}\nasync function j(e, o) {\n  if (!e.isPrimitive) {\n    const r = n(e.resource?.href),\n      o = a.get(r);\n    if (void 0 !== o) return o;\n    const t = await import(\"../../views/3d/layers/graphics/objectResourceUtils.js\"),\n      i = await t.fetch(r, {\n        disableTextures: !0\n      });\n    return a.put(r, i.referenceBoundingBox), i.referenceBoundingBox;\n  }\n  let i = null;\n  if (e.resource && e.resource.primitive && (i = s(c(e.resource.primitive)), t(o))) for (let r = 0; r < i.length; r++) i[r] *= o;\n  return i ? Promise.resolve(i) : Promise.reject(new r(\"symbol:invalid-resource\", \"The symbol does not have a valid resource\"));\n}\nexport { y as clearBoundingBoxCache, p as computeIconLayerResourceSize, f as computeLayerResourceSize, l as computeLayerSize, d as computeObjectLayerResourceSize };","map":{"version":3,"names":["e","r","o","isSome","t","unwrapOrThrow","n","size","i","create","s","objectSymbolLayerSizeWithResourceSize","u","objectSymbolLayerPrimitiveBoundingBox","c","a","m","y","f","type","p","d","l","h","w","resource","href","b","then","width","height","primitive","responseType","data","j","isPrimitive","get","fetch","disableTextures","put","referenceBoundingBox","length","Promise","resolve","reject","clearBoundingBoxCache","computeIconLayerResourceSize","computeLayerResourceSize","computeLayerSize","computeObjectLayerResourceSize"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/symbols/support/symbolLayerUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import r from\"../../core/Error.js\";import o from\"../../core/ItemCache.js\";import{isSome as t,unwrapOrThrow as n}from\"../../core/maybe.js\";import{size as i,create as s}from\"../../geometry/support/aaBoundingBox.js\";import{objectSymbolLayerSizeWithResourceSize as u,objectSymbolLayerPrimitiveBoundingBox as c}from\"./symbolLayerUtils3D.js\";let a=m();function m(){return new o(50)}function y(){a=m()}function f(e,o){if(\"icon\"===e.type)return p(e,o);if(\"object\"===e.type)return d(e,o);throw new r(\"symbol3d:unsupported-symbol-layer\",\"computeLayerSize only works with symbol layers of type Icon and Object\")}async function l(e,o){if(\"icon\"===e.type)return h(e,o);if(\"object\"===e.type)return w(e,o);throw new r(\"symbol3d:unsupported-symbol-layer\",\"computeLayerSize only works with symbol layers of type Icon and Object\")}async function p(e,o){if(e.resource?.href)return b(e.resource.href).then((e=>[e.width,e.height]));if(e.resource?.primitive)return t(o)?[o,o]:[256,256];throw new r(\"symbol3d:invalid-symbol-layer\",\"symbol layers of type Icon must have either an href or a primitive resource\")}function h(e,r){return p(e,r).then((r=>{if(null==e.size)return r;const o=r[0]/r[1];return o>1?[e.size,e.size/o]:[e.size*o,e.size]}))}function b(r){return e(r,{responseType:\"image\"}).then((e=>e.data))}function d(e,r){return j(e,r).then((e=>i(e)))}async function w(e,r){const o=await d(e,r);return u(o,e)}async function j(e,o){if(!e.isPrimitive){const r=n(e.resource?.href),o=a.get(r);if(void 0!==o)return o;const t=await import(\"../../views/3d/layers/graphics/objectResourceUtils.js\"),i=await t.fetch(r,{disableTextures:!0});return a.put(r,i.referenceBoundingBox),i.referenceBoundingBox}let i=null;if(e.resource&&e.resource.primitive&&(i=s(c(e.resource.primitive)),t(o)))for(let r=0;r<i.length;r++)i[r]*=o;return i?Promise.resolve(i):Promise.reject(new r(\"symbol:invalid-resource\",\"The symbol does not have a valid resource\"))}export{y as clearBoundingBoxCache,p as computeIconLayerResourceSize,f as computeLayerResourceSize,l as computeLayerSize,d as computeObjectLayerResourceSize};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}