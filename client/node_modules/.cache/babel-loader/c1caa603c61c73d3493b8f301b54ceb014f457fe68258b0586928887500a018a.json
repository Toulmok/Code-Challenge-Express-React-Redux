{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { isSome as r } from \"../../../core/maybe.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { TaskPriority as u, ImmediateTask as a } from \"../../support/Scheduler.js\";\nlet n = class extends t {\n  constructor(e, t) {\n    super({}), this._stage = e, this._textureRequests = new Map(), this._frameTask = t?.registerTask(u.TEXTURE_UNLOAD) ?? a;\n  }\n  normalizeCtorArgs() {\n    return {};\n  }\n  destroy() {\n    super.destroy(), this._frameTask.remove(), this._textureRequests.forEach(e => this._releaseTextureRequest(e)), this._textureRequests.clear();\n  }\n  get updating() {\n    return this._frameTask.updating;\n  }\n  fromData(e, t, r) {\n    const s = this.makeUid(e);\n    let o = this._textureRequests.get(s);\n    if (!o) {\n      const e = t();\n      o = {\n        referenceCount: 0,\n        texture: e,\n        textureAsync: null,\n        abortController: null,\n        onRemove: r\n      }, this._stage && (this._stage.add(e), this._stage.loadImmediate(e)), this._textureRequests.set(s, o);\n    }\n    return o.referenceCount++, {\n      uid: s,\n      texture: o.texture,\n      release: () => this._release(s)\n    };\n  }\n  _release(e) {\n    const t = this._textureRequests.get(e);\n    t ? (t.referenceCount < 1 && console.warn(\"TextureCollection: reference count is < 1 for \" + e), t.referenceCount--, t.referenceCount < 1 && this._frameTask.schedule(() => this._releaseNow(e))) : console.warn(`TextureCollection: texture doesn't exist: '${e}'`);\n  }\n  get test() {\n    return {\n      textureRequests: this._textureRequests\n    };\n  }\n  _releaseNow(e) {\n    if (!this._textureRequests) return;\n    const t = this._textureRequests.get(e);\n    !t || t.referenceCount > 0 || (this._releaseTextureRequest(t), this._textureRequests.delete(e));\n  }\n  _releaseTextureRequest(e) {\n    e.onRemove && e.onRemove(), e.texture ? this._stage?.remove(e.texture) : e.abortController && (e.abortController.abort(), e.abortController = null);\n  }\n  makeUid(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    return r(t) ? `${e}.${t}px` : e;\n  }\n};\ne([s()], n.prototype, \"_frameTask\", void 0), e([s()], n.prototype, \"updating\", null), n = e([o(\"esri.views.3d.support.TextureCollection\")], n);\nexport { n as TextureCollection };","map":{"version":3,"names":["_","e","t","isSome","r","property","s","subclass","o","TaskPriority","u","ImmediateTask","a","n","constructor","_stage","_textureRequests","Map","_frameTask","registerTask","TEXTURE_UNLOAD","normalizeCtorArgs","destroy","remove","forEach","_releaseTextureRequest","clear","updating","fromData","makeUid","get","referenceCount","texture","textureAsync","abortController","onRemove","add","loadImmediate","set","uid","release","_release","console","warn","schedule","_releaseNow","test","textureRequests","delete","abort","arguments","length","undefined","prototype","TextureCollection"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/TextureCollection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/maybe.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{TaskPriority as u,ImmediateTask as a}from\"../../support/Scheduler.js\";let n=class extends t{constructor(e,t){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=t?.registerTask(u.TEXTURE_UNLOAD)??a}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach((e=>this._releaseTextureRequest(e))),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,r){const s=this.makeUid(e);let o=this._textureRequests.get(s);if(!o){const e=t();o={referenceCount:0,texture:e,textureAsync:null,abortController:null,onRemove:r},this._stage&&(this._stage.add(e),this._stage.loadImmediate(e)),this._textureRequests.set(s,o)}return o.referenceCount++,{uid:s,texture:o.texture,release:()=>this._release(s)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn(\"TextureCollection: reference count is < 1 for \"+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule((()=>this._releaseNow(e)))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){e.onRemove&&e.onRemove(),e.texture?this._stage?.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return r(t)?`${e}.${t}px`:e}};e([s()],n.prototype,\"_frameTask\",void 0),e([s()],n.prototype,\"updating\",null),n=e([o(\"esri.views.3d.support.TextureCollection\")],n);export{n as TextureCollection};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}