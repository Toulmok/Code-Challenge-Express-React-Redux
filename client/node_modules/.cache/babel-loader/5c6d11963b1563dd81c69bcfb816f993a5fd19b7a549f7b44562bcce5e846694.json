{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { NUMBER_MAX_FLOAT32 as e } from \"../../../core/mathUtils.js\";\nimport { isNone as s } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as r } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"./BaseRasterFunction.js\";\nimport u from \"./MaskFunctionArguments.js\";\nimport { createMaskLUT as a, MAX_MAP_SIZE_GPU as i, NoDataInterpretation as l, mask as c } from \"./pixelUtils.js\";\nlet p = class extends n {\n  constructor() {\n    super(...arguments), this.functionName = \"Mask\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"];\n  }\n  _bindSourceRasters() {\n    const t = this.sourceRasterInfos[0].clone(),\n      {\n        pixelType: e\n      } = t;\n    this.outputPixelType = this._getOutputPixelType(e), t.pixelType = this.outputPixelType, this.rasterInfo = t;\n    const {\n      includedRanges: s,\n      normalizedNoDataValues: o\n    } = this.functionArguments;\n    if (!s?.length && !o?.length) return {\n      success: !1,\n      supportsGPU: !1,\n      error: \"missing includedRanges or noDataValues argument\"\n    };\n    let r = [];\n    for (let u = 0; u < t.bandCount; u++) {\n      const t = a(e, s?.slice(2 * u, 2 * u + 2), o?.[u]);\n      if (null == t) {\n        r = null;\n        break;\n      }\n      r.push(t);\n    }\n    this.lookups = r;\n    const n = null != o && o.every(t => t?.length === o[0]?.length);\n    return {\n      success: !0,\n      supportsGPU: (!s || s.length <= 2 * i) && (!o || n && o[0].length <= i)\n    };\n  }\n  _processPixels(t) {\n    const e = t.pixelBlocks?.[0];\n    if (s(e)) return null;\n    const {\n        outputPixelType: o,\n        lookups: r\n      } = this,\n      {\n        includedRanges: n,\n        noDataInterpretation: u,\n        normalizedNoDataValues: a\n      } = this.functionArguments,\n      i = u === l.matchAll;\n    return c(e, {\n      includedRanges: n,\n      noDataValues: a,\n      outputPixelType: o,\n      matchAll: i,\n      lookups: r\n    });\n  }\n  _getWebGLParameters() {\n    const {\n        includedRanges: t,\n        normalizedNoDataValues: s\n      } = this.functionArguments,\n      o = new Float32Array(i);\n    o.fill(e), s?.[0]?.length && o.set(s[0]);\n    const r = new Float32Array(i);\n    for (let n = 0; n < r.length; n += 2) r[n] = t?.[n] ?? -e, r[n + 1] = t?.[n + 1] ?? e;\n    return t && t.length && r.set(t), {\n      bandCount: this.sourceRasterInfos[0].bandCount,\n      noDataValues: o,\n      includedRanges: r\n    };\n  }\n};\nt([o({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], p.prototype, \"functionName\", void 0), t([o({\n  type: u,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], p.prototype, \"functionArguments\", void 0), t([o()], p.prototype, \"rasterArgumentNames\", void 0), t([o({\n  json: {\n    write: !0\n  }\n})], p.prototype, \"lookups\", void 0), p = t([r(\"esri.layers.support.rasterFunctions.MaskFunction\")], p);\nconst m = p;\nexport { m as default };","map":{"version":3,"names":["_","t","NUMBER_MAX_FLOAT32","e","isNone","s","property","o","subclass","r","n","u","createMaskLUT","a","MAX_MAP_SIZE_GPU","i","NoDataInterpretation","l","mask","c","p","constructor","arguments","functionName","functionArguments","rasterArgumentNames","_bindSourceRasters","sourceRasterInfos","clone","pixelType","outputPixelType","_getOutputPixelType","rasterInfo","includedRanges","normalizedNoDataValues","length","success","supportsGPU","error","bandCount","slice","push","lookups","every","_processPixels","pixelBlocks","noDataInterpretation","matchAll","noDataValues","_getWebGLParameters","Float32Array","fill","set","json","write","name","prototype","type","m","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/support/rasterFunctions/MaskFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{NUMBER_MAX_FLOAT32 as e}from\"../../../core/mathUtils.js\";import{isNone as s}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"./BaseRasterFunction.js\";import u from\"./MaskFunctionArguments.js\";import{createMaskLUT as a,MAX_MAP_SIZE_GPU as i,NoDataInterpretation as l,mask as c}from\"./pixelUtils.js\";let p=class extends n{constructor(){super(...arguments),this.functionName=\"Mask\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"]}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:e}=t;this.outputPixelType=this._getOutputPixelType(e),t.pixelType=this.outputPixelType,this.rasterInfo=t;const{includedRanges:s,normalizedNoDataValues:o}=this.functionArguments;if(!s?.length&&!o?.length)return{success:!1,supportsGPU:!1,error:\"missing includedRanges or noDataValues argument\"};let r=[];for(let u=0;u<t.bandCount;u++){const t=a(e,s?.slice(2*u,2*u+2),o?.[u]);if(null==t){r=null;break}r.push(t)}this.lookups=r;const n=null!=o&&o.every((t=>t?.length===o[0]?.length));return{success:!0,supportsGPU:(!s||s.length<=2*i)&&(!o||n&&o[0].length<=i)}}_processPixels(t){const e=t.pixelBlocks?.[0];if(s(e))return null;const{outputPixelType:o,lookups:r}=this,{includedRanges:n,noDataInterpretation:u,normalizedNoDataValues:a}=this.functionArguments,i=u===l.matchAll;return c(e,{includedRanges:n,noDataValues:a,outputPixelType:o,matchAll:i,lookups:r})}_getWebGLParameters(){const{includedRanges:t,normalizedNoDataValues:s}=this.functionArguments,o=new Float32Array(i);o.fill(e),s?.[0]?.length&&o.set(s[0]);const r=new Float32Array(i);for(let n=0;n<r.length;n+=2)r[n]=t?.[n]??-e,r[n+1]=t?.[n+1]??e;return t&&t.length&&r.set(t),{bandCount:this.sourceRasterInfos[0].bandCount,noDataValues:o,includedRanges:r}}};t([o({json:{write:!0,name:\"rasterFunction\"}})],p.prototype,\"functionName\",void 0),t([o({type:u,json:{write:!0,name:\"rasterFunctionArguments\"}})],p.prototype,\"functionArguments\",void 0),t([o()],p.prototype,\"rasterArgumentNames\",void 0),t([o({json:{write:!0}})],p.prototype,\"lookups\",void 0),p=t([r(\"esri.layers.support.rasterFunctions.MaskFunction\")],p);const m=p;export{m as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}