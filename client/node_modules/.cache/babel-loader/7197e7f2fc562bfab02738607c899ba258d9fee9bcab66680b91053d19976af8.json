{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport r from \"../../../core/Evented.js\";\nimport { destroyMaybe as s, isNone as i, isSome as o } from \"../../../core/maybe.js\";\nimport { createResolver as n, isAbortError as a } from \"../../../core/promiseUtils.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as c } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { equals as h } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { ElevationQuery as u } from \"../layers/graphics/ElevationQuery.js\";\nlet p = class extends r.EventedMixin(t) {\n  get spatialReference() {\n    return this.view?.basemapTerrain?.spatialReference;\n  }\n  constructor(e) {\n    super(e), this._im = new Array(), this._ground = new Array(), this._scene = new Array(), this._handles = new Map(), this.lastElevationQuery = null, this.elevationCacheEnabled = !1;\n  }\n  destroy() {\n    this._elevationQueryCached = s(this._elevationQueryCached);\n  }\n  get _elevationQuery() {\n    return i(this._elevationQueryCached) && (this._elevationQueryCached = new u(this.view.resourceController.scheduler, this.view.spatialReference, () => this.view.map && this.view.map.ground, {\n      maximumAutoTileRequests: 4\n    })), this._elevationQueryCached;\n  }\n  enableElevationCache(e) {\n    e || (this.lastElevationQuery = null), this.elevationCacheEnabled = e;\n  }\n  getElevation(e, t, r, s, o) {\n    if (this.elevationCacheEnabled && null != this.lastElevationQuery) {\n      const i = this.lastElevationQuery;\n      if (e === i.x && t === i.y && r === i.z && h(s, i.spatialReference) && o === i.queryContext) return i.result;\n    }\n    let n = null;\n    return n = v(n, this._im, e, t, r, s, o), i(n) && (n = v(n, this._ground, e, t, r, s, o)), \"scene\" === o && (n = v(n, this._scene, e, t, r, s, o)), this.elevationCacheEnabled && (this.lastElevationQuery = {\n      x: e,\n      y: t,\n      z: r,\n      spatialReference: s,\n      queryContext: o,\n      result: n\n    }), n;\n  }\n  queryElevation(e, t, r, s, i) {\n    let o = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n    let l = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n    const c = n();\n    return this._elevationQuery.queryElevation(e, t, o, l).then(o => {\n      \"scene\" === i && (o = v(o, this._scene, e, t, r, s, i)), c.resolve(o);\n    }).catch(o => {\n      a(o) ? c.reject(o) : c.resolve(this.getElevation(e, t, r, s, i));\n    }), c.promise;\n  }\n  register(e, t) {\n    this._handles.set(t, t.on(\"elevation-change\", e => this.emit(\"elevation-change\", e))), this._providersFromContext(e).push(t);\n  }\n  unregister(e) {\n    this._handles.has(e) && (this._handles.get(e)?.remove(), this._handles.delete(e));\n    for (const t of [this._im, this._ground, this._scene]) {\n      const r = t.indexOf(e);\n      r > -1 && t.splice(r, 1);\n    }\n  }\n  _providersFromContext(e) {\n    switch (e) {\n      case \"ground\":\n        return this._ground;\n      case \"im\":\n        return this._im;\n      case \"scene\":\n        return this._scene;\n    }\n  }\n};\nfunction v(e, t, r, s, i, n, a) {\n  for (const l of t) {\n    const t = l.getElevation(r, s, i, n, a);\n    o(t) && (e = o(e) ? Math.max(t, e) : t);\n  }\n  return e;\n}\ne([l({\n  constructOnly: !0\n})], p.prototype, \"view\", void 0), e([l()], p.prototype, \"spatialReference\", null), p = e([c(\"esri.views.3d.support.CombinedElevationProvider\")], p);\nexport { p as CombinedElevationProvider };","map":{"version":3,"names":["_","e","t","r","destroyMaybe","s","isNone","i","isSome","o","createResolver","n","isAbortError","a","property","l","subclass","c","equals","h","ElevationQuery","u","p","EventedMixin","spatialReference","view","basemapTerrain","constructor","_im","Array","_ground","_scene","_handles","Map","lastElevationQuery","elevationCacheEnabled","destroy","_elevationQueryCached","_elevationQuery","resourceController","scheduler","map","ground","maximumAutoTileRequests","enableElevationCache","getElevation","x","y","z","queryContext","result","v","queryElevation","arguments","length","undefined","then","resolve","catch","reject","promise","register","set","on","emit","_providersFromContext","push","unregister","has","get","remove","delete","indexOf","splice","Math","max","constructOnly","prototype","CombinedElevationProvider"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/CombinedElevationProvider.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import r from\"../../../core/Evented.js\";import{destroyMaybe as s,isNone as i,isSome as o}from\"../../../core/maybe.js\";import{createResolver as n,isAbortError as a}from\"../../../core/promiseUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as h}from\"../../../geometry/support/spatialReferenceUtils.js\";import{ElevationQuery as u}from\"../layers/graphics/ElevationQuery.js\";let p=class extends(r.EventedMixin(t)){get spatialReference(){return this.view?.basemapTerrain?.spatialReference}constructor(e){super(e),this._im=new Array,this._ground=new Array,this._scene=new Array,this._handles=new Map,this.lastElevationQuery=null,this.elevationCacheEnabled=!1}destroy(){this._elevationQueryCached=s(this._elevationQueryCached)}get _elevationQuery(){return i(this._elevationQueryCached)&&(this._elevationQueryCached=new u(this.view.resourceController.scheduler,this.view.spatialReference,(()=>this.view.map&&this.view.map.ground),{maximumAutoTileRequests:4})),this._elevationQueryCached}enableElevationCache(e){e||(this.lastElevationQuery=null),this.elevationCacheEnabled=e}getElevation(e,t,r,s,o){if(this.elevationCacheEnabled&&null!=this.lastElevationQuery){const i=this.lastElevationQuery;if(e===i.x&&t===i.y&&r===i.z&&h(s,i.spatialReference)&&o===i.queryContext)return i.result}let n=null;return n=v(n,this._im,e,t,r,s,o),i(n)&&(n=v(n,this._ground,e,t,r,s,o)),\"scene\"===o&&(n=v(n,this._scene,e,t,r,s,o)),this.elevationCacheEnabled&&(this.lastElevationQuery={x:e,y:t,z:r,spatialReference:s,queryContext:o,result:n}),n}queryElevation(e,t,r,s,i,o=null,l=0){const c=n();return this._elevationQuery.queryElevation(e,t,o,l).then((o=>{\"scene\"===i&&(o=v(o,this._scene,e,t,r,s,i)),c.resolve(o)})).catch((o=>{a(o)?c.reject(o):c.resolve(this.getElevation(e,t,r,s,i))})),c.promise}register(e,t){this._handles.set(t,t.on(\"elevation-change\",(e=>this.emit(\"elevation-change\",e)))),this._providersFromContext(e).push(t)}unregister(e){this._handles.has(e)&&(this._handles.get(e)?.remove(),this._handles.delete(e));for(const t of[this._im,this._ground,this._scene]){const r=t.indexOf(e);r>-1&&t.splice(r,1)}}_providersFromContext(e){switch(e){case\"ground\":return this._ground;case\"im\":return this._im;case\"scene\":return this._scene}}};function v(e,t,r,s,i,n,a){for(const l of t){const t=l.getElevation(r,s,i,n,a);o(t)&&(e=o(e)?Math.max(t,e):t)}return e}e([l({constructOnly:!0})],p.prototype,\"view\",void 0),e([l()],p.prototype,\"spatialReference\",null),p=e([c(\"esri.views.3d.support.CombinedElevationProvider\")],p);export{p as CombinedElevationProvider};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}