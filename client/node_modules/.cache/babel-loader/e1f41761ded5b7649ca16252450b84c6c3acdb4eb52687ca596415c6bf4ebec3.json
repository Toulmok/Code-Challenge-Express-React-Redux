{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { ShaderOutput as e } from \"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";\nimport { SliceDraw as o } from \"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";\nimport { Transform as i } from \"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";\nimport { VertexColor as r } from \"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";\nimport { OutputHighlight as t } from \"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";\nimport { LineStipple as l, computePixelSize as s } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js\";\nimport { symbolAlphaCutoff as n } from \"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";\nimport { addProjViewLocalOrigin as a } from \"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";\nimport { Float4PassUniform as d } from \"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";\nimport { FloatPassUniform as p } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { glsl as c } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as g } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { VertexAttribute as m } from \"../views/3d/webgl-engine/lib/VertexAttribute.js\";\nfunction u(u) {\n  const v = new g(),\n    {\n      vertex: f,\n      fragment: h\n    } = v;\n  return v.include(i, u), v.include(r, u), v.include(l, u), a(f, u), u.stippleEnabled && (v.attributes.add(m.UV0, \"vec2\"), v.attributes.add(m.AUXPOS1, \"vec3\"), f.uniforms.add(new d(\"viewport\", (e, o) => o.camera.fullViewport))), v.attributes.add(m.POSITION, \"vec3\"), v.varyings.add(\"vpos\", \"vec3\"), f.code.add(c`void main(void) {\nvpos = position;\nforwardNormalizedVertexColor();\ngl_Position = transformPosition(proj, view, vpos);`), u.stippleEnabled && (f.code.add(c`vec4 vpos2 = transformPosition(proj, view, auxpos1);\nvec2 ndcToPixel = viewport.zw * 0.5;\nfloat lineSegmentPixelSize = length((vpos2.xy / vpos2.w - gl_Position.xy / gl_Position.w) * ndcToPixel);`), u.draped ? f.uniforms.add(new p(\"worldToScreenRatio\", (e, o) => 1 / o.screenToPCSRatio)) : f.code.add(c`vec3 segmentCenter = (position + auxpos1) * 0.5;\nfloat worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`), f.code.add(c`float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);`), u.draped ? f.code.add(c`float startPseudoScreen = uv0.y * discreteWorldToScreenRatio - mix(0.0, lineSegmentPixelSize, uv0.x);\nfloat segmentLengthPseudoScreen = lineSegmentPixelSize;`) : f.code.add(c`float segmentLengthRender = length(position - auxpos1);\nfloat startPseudoScreen = mix(uv0.y, uv0.y - segmentLengthRender, uv0.x) * discreteWorldToScreenRatio;\nfloat segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`), f.uniforms.add(new p(\"stipplePatternPixelSize\", e => s(e))), f.code.add(c`vec2 stippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, lineSegmentPixelSize, stipplePatternPixelSize);\nvStippleDistance = mix(stippleDistanceLimits.x, stippleDistanceLimits.y, uv0.x);\nvStippleDistance *= gl_Position.w;`)), f.code.add(c`}`), u.output === e.Highlight && v.include(t, u), v.include(o, u), h.uniforms.add(new p(\"alphaCoverage\", (e, o) => Math.min(1, e.width * o.camera.pixelRatio))), u.hasVertexColors || h.uniforms.add(new d(\"constantColor\", e => e.color)), h.code.add(c`\n  void main() {\n    discardBySlice(vpos);\n\n    vec4 color = ${u.hasVertexColors ? \"vColor\" : \"constantColor\"};\n\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 finalColor = blendStipple(vec4(color.rgb, color.a * alphaCoverage), stippleAlpha);\n\n    ${u.output === e.ObjectAndLayerIdColor ? c`finalColor.a = 1.0;` : \"\"}\n\n    if (finalColor.a < ${c.float(n)}) {\n      discard;\n    }\n\n    ${u.output === e.Color ? c`gl_FragColor = highlightSlice(finalColor, vpos);` : \"\"}\n    ${u.output === e.Highlight ? c`outputHighlight();` : \"\"}\n  }\n  `), v;\n}\nconst v = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  build: u\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { v as N, u as b };","map":{"version":3,"names":["ShaderOutput","e","SliceDraw","o","Transform","i","VertexColor","r","OutputHighlight","t","LineStipple","l","computePixelSize","s","symbolAlphaCutoff","n","addProjViewLocalOrigin","a","Float4PassUniform","d","FloatPassUniform","p","glsl","c","ShaderBuilder","g","VertexAttribute","m","u","v","vertex","f","fragment","h","include","stippleEnabled","attributes","add","UV0","AUXPOS1","uniforms","camera","fullViewport","POSITION","varyings","code","draped","screenToPCSRatio","output","Highlight","Math","min","width","pixelRatio","hasVertexColors","color","ObjectAndLayerIdColor","float","Color","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","N","b"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/chunks/NativeLine.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{VertexColor as r}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{OutputHighlight as t}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{LineStipple as l,computePixelSize as s}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js\";import{symbolAlphaCutoff as n}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{addProjViewLocalOrigin as a}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float4PassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as p}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as c}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as g}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as m}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function u(u){const v=new g,{vertex:f,fragment:h}=v;return v.include(i,u),v.include(r,u),v.include(l,u),a(f,u),u.stippleEnabled&&(v.attributes.add(m.UV0,\"vec2\"),v.attributes.add(m.AUXPOS1,\"vec3\"),f.uniforms.add(new d(\"viewport\",((e,o)=>o.camera.fullViewport)))),v.attributes.add(m.POSITION,\"vec3\"),v.varyings.add(\"vpos\",\"vec3\"),f.code.add(c`void main(void) {\nvpos = position;\nforwardNormalizedVertexColor();\ngl_Position = transformPosition(proj, view, vpos);`),u.stippleEnabled&&(f.code.add(c`vec4 vpos2 = transformPosition(proj, view, auxpos1);\nvec2 ndcToPixel = viewport.zw * 0.5;\nfloat lineSegmentPixelSize = length((vpos2.xy / vpos2.w - gl_Position.xy / gl_Position.w) * ndcToPixel);`),u.draped?f.uniforms.add(new p(\"worldToScreenRatio\",((e,o)=>1/o.screenToPCSRatio))):f.code.add(c`vec3 segmentCenter = (position + auxpos1) * 0.5;\nfloat worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),f.code.add(c`float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);`),u.draped?f.code.add(c`float startPseudoScreen = uv0.y * discreteWorldToScreenRatio - mix(0.0, lineSegmentPixelSize, uv0.x);\nfloat segmentLengthPseudoScreen = lineSegmentPixelSize;`):f.code.add(c`float segmentLengthRender = length(position - auxpos1);\nfloat startPseudoScreen = mix(uv0.y, uv0.y - segmentLengthRender, uv0.x) * discreteWorldToScreenRatio;\nfloat segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),f.uniforms.add(new p(\"stipplePatternPixelSize\",(e=>s(e)))),f.code.add(c`vec2 stippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, lineSegmentPixelSize, stipplePatternPixelSize);\nvStippleDistance = mix(stippleDistanceLimits.x, stippleDistanceLimits.y, uv0.x);\nvStippleDistance *= gl_Position.w;`)),f.code.add(c`}`),u.output===e.Highlight&&v.include(t,u),v.include(o,u),h.uniforms.add(new p(\"alphaCoverage\",((e,o)=>Math.min(1,e.width*o.camera.pixelRatio)))),u.hasVertexColors||h.uniforms.add(new d(\"constantColor\",(e=>e.color))),h.code.add(c`\n  void main() {\n    discardBySlice(vpos);\n\n    vec4 color = ${u.hasVertexColors?\"vColor\":\"constantColor\"};\n\n    float stippleAlpha = getStippleAlpha();\n    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);\n\n    vec4 finalColor = blendStipple(vec4(color.rgb, color.a * alphaCoverage), stippleAlpha);\n\n    ${u.output===e.ObjectAndLayerIdColor?c`finalColor.a = 1.0;`:\"\"}\n\n    if (finalColor.a < ${c.float(n)}) {\n      discard;\n    }\n\n    ${u.output===e.Color?c`gl_FragColor = highlightSlice(finalColor, vpos);`:\"\"}\n    ${u.output===e.Highlight?c`outputHighlight();`:\"\"}\n  }\n  `),v}const v=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:\"Module\"}));export{v as N,u as b};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}