{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport s from \"../../../../core/Evented.js\";\nimport { someMap as r } from \"../../../../core/MapUtils.js\";\nimport { nextHighestPowerOfTwo as i } from \"../../../../core/mathUtils.js\";\nimport { disposeMaybe as a, isSome as n, removeMaybe as o, isNone as h } from \"../../../../core/maybe.js\";\nimport { generateUID as l } from \"../../../../core/uid.js\";\nimport { property as d } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as c } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { s as m } from \"../../../../chunks/vec4.js\";\nimport { c as _ } from \"../../../../chunks/vec4f64.js\";\nimport { ContentObjectType as g } from \"./ContentObjectType.js\";\nimport { textTextureAtlas as u } from \"./testUtils.js\";\nimport { VertexAttribute as p } from \"./VertexAttribute.js\";\nimport { TaskPriority as x, Task as T, noBudget as f } from \"../../../support/Scheduler.js\";\nimport { TextureType as A, PixelFormat as v, PixelType as R, TextureWrapMode as y, TextureSamplingMode as w } from \"../../../webgl/enums.js\";\nimport { Texture as z } from \"../../../webgl/Texture.js\";\nconst b = 512,\n  j = 4096,\n  O = .85,\n  E = .95;\nclass U {\n  constructor() {\n    this.offset = {\n      x: 0,\n      y: 0\n    }, this.uvMinMax = _();\n  }\n}\nclass k {\n  constructor(e, t) {\n    this.textId = e, this.textRenderer = t, this.placement = new U(), this.rendered = !1;\n  }\n}\nlet M = class extends t {\n  constructor(e) {\n    super(e), this.type = g.Texture, this.id = l(), this.events = new s(), this._glTexture = null, this._needsClear = !1, this._elementsToAddOrUpdate = new Map(), this._elementsToRemove = new Map(), this._elementsToRender = new Map(), this._elements = new Map(), this._stageObjects = new Map(), this.updating = !1;\n  }\n  initialize() {\n    this._stage = this.view._stage, this._canvas = this._create2DCanvas(), this._ctx = this._canvas.getContext(\"2d\"), this._stage.add(this);\n    const e = this._computeAtlasResolution(this.view.width, this.view.height);\n    this._createAtlasRegion(e), this._update2DCanvasSize(), this._resetAtlasCursor();\n  }\n  unload() {\n    this._glTexture = a(this._glTexture), this.updating = !1, this.events.emit(\"unloaded\");\n  }\n  get width() {\n    return this._atlas.size.width;\n  }\n  get height() {\n    return this._atlas.size.height;\n  }\n  get requiresFrameUpdates() {\n    return !1;\n  }\n  _createDescriptor(e) {\n    return {\n      target: A.TEXTURE_2D,\n      pixelFormat: v.RGBA,\n      dataType: R.UNSIGNED_BYTE,\n      wrapMode: y.CLAMP_TO_EDGE,\n      flipped: !0,\n      samplingMode: w.LINEAR_MIPMAP_LINEAR,\n      hasMipmap: !0,\n      preMultiplyAlpha: !0,\n      maxAnisotropy: e.parameters.maxMaxAnisotropy\n    };\n  }\n  get glTexture() {\n    return this._glTexture;\n  }\n  load(e) {\n    return n(this._glTexture) || (this._glTexture = new z(e, this._createDescriptor(e), this._canvas), this._frameWorker = this.view.resourceController.scheduler.registerTask(x.TEXT_TEXTURE_ATLAS, this), this.setDirty()), this._glTexture;\n  }\n  dispose() {\n    this._elements = null, this._elementsToAddOrUpdate = null, this._elementsToRemove = null, this._elementsToRender = null, this._frameWorker = o(this._frameWorker), this._glTexture && (this._stage.remove(this), this._glTexture = a(this._glTexture)), this._canvas.width = 0, this._canvas.height = 0, this._canvas = null, this._ctx = null;\n  }\n  _create2DCanvas() {\n    const e = document.createElement(\"canvas\");\n    return e.setAttribute(\"id\", \"canvas2d\"), e.setAttribute(\"style\", \"display:none\"), e.setAttribute(\"width\", b.toString()), e.setAttribute(\"height\", b.toString()), e;\n  }\n  _update2DCanvasSize() {\n    this._canvas.setAttribute(\"width\", this._atlas.size.width.toString()), this._canvas.setAttribute(\"height\", this._atlas.size.height.toString());\n  }\n  _createAtlasRegion() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : b;\n    this._atlas = {\n      size: {\n        width: e,\n        height: e\n      },\n      cursor: {\n        x: 0,\n        y: 0\n      },\n      lineHeight: 0\n    };\n  }\n  _computeAtlasResolution(e, t) {\n    let s = Math.max(e, t);\n    return s += 256, s = i(s), s = Math.min(s, j), s;\n  }\n  _resizeAtlas(e, t) {\n    t = t || e;\n    const s = this._atlas;\n    s.size.width = e, s.size.height = t, n(this._glTexture) && this._glTexture.resize(e, t), this._update2DCanvasSize();\n  }\n  _resetAtlasCursor() {\n    const e = this._atlas;\n    e.cursor.x = S, e.cursor.y = S + C, e.lineHeight = 0, this._needsClear = !0;\n  }\n  _getAtlasUsage() {\n    const e = this._atlas;\n    return (e.cursor.x + e.cursor.y * e.size.width) / (e.size.width * e.size.height);\n  }\n  _getExpectedAtlasUsage() {\n    const e = this._elementsToRemove.size,\n      t = this._elementsToAddOrUpdate.size,\n      s = this._elements.size;\n    return this._getAtlasUsage() / s * (s + t - e);\n  }\n  _addAtlasElement(e, t, s, r) {\n    const i = this._atlas,\n      {\n        renderedWidth: a,\n        renderedHeight: n\n      } = e.textRenderer;\n    e.placement.offset.x = i.cursor.x, e.placement.offset.y = i.cursor.y, m(e.placement.uvMinMax, e.placement.offset.x / i.size.width, 1 - (e.placement.offset.y + n) / i.size.height, (e.placement.offset.x + a) / i.size.width, 1 - e.placement.offset.y / i.size.height), i.cursor.x += s, i.lineHeight = Math.max(i.lineHeight, r), this._elements.set(t, e);\n  }\n  _removeAtlasElement(e) {\n    if (e && this._elements.has(e.textId)) {\n      const t = e.placement.offset;\n      this._ctx.clearRect(t.x, t.y, e.textRenderer.renderedWidth, e.textRenderer.renderedHeight), this._elements.delete(e.textId);\n    }\n  }\n  _ensureStageObjects(e) {\n    const t = this._stageObjects.get(e);\n    if (t) return t;\n    const s = new Set();\n    return this._stageObjects.set(e, s), s;\n  }\n  _addStageObject(e, t) {\n    this._ensureStageObjects(e).add(t);\n  }\n  _removeStageObject(e, t) {\n    const s = this._stageObjects.get(e);\n    s && s.delete(t) && (t.geometries[0].vertexAttributes.get(p.SIZE).data = [0, 0], t.geometryVertexAttrsUpdated(t.geometries[0]));\n  }\n  _processAddition(e, t) {\n    const s = this._atlas,\n      r = e.textId,\n      i = e.textRenderer.renderedWidth,\n      a = e.textRenderer.renderedHeight,\n      n = i + S,\n      o = a + S + C;\n    if (s.cursor.x + n < s.size.width && s.cursor.y + o < s.size.height) this._addAtlasElement(e, r, n, o), this._elementsToRender.set(r, e), this._elementsToAddOrUpdate.delete(r);else {\n      if (!(s.cursor.y + o + s.lineHeight < s.size.height)) {\n        const e = this._getExpectedAtlasUsage(),\n          r = e > O && s.size.width < j;\n        return r && this._resizeAtlas(2 * s.size.width, 2 * s.size.height), !t || !r && e > E && s.size.width === j ? (this._processRemovals(), D.OK) : (this._repack(), D.REPACK);\n      }\n      s.cursor.x = S, s.cursor.y += s.lineHeight, s.lineHeight = 0, this._addAtlasElement(e, r, n, o), this._elementsToRender.set(r, e), this._elementsToAddOrUpdate.delete(r);\n    }\n    return D.OK;\n  }\n  _processRemovals() {\n    this._elementsToRemove.forEach((e, t) => {\n      const s = this._stageObjects.get(t);\n      s && 0 !== s.size || this._removeAtlasElement(e), s && 0 === s.size && this._stageObjects.delete(t);\n    }), this._elementsToRemove.clear();\n  }\n  _repack() {\n    this._processRemovals(), this._elements.forEach((e, t) => {\n      e.rendered = !1, this._elementsToAddOrUpdate.set(t, e);\n    }), this._elements.clear(), this._resetAtlasCursor(), this._elementsToRender.clear();\n  }\n  _processRenderingRequest(e) {\n    this._ctx.clearRect(e.placement.offset.x, e.placement.offset.y, e.textRenderer.renderedWidth, e.textRenderer.renderedHeight), e.textRenderer.render(this._ctx, e.placement.offset.x, e.placement.offset.y);\n    const t = this._stageObjects.get(e.textId);\n    t && t.forEach(t => {\n      t.geometries[0].vertexAttributes.get(p.UV0).data = new Float32Array(e.placement.uvMinMax), t.geometries[0].vertexAttributes.get(p.SIZE).data = [e.textRenderer.displayWidth, e.textRenderer.displayHeight], t.geometryVertexAttrsUpdated(t.geometries[0]);\n    }), e.rendered = !0;\n  }\n  get running() {\n    return this.updating;\n  }\n  runTask(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n    if (h(this._glTexture)) return T.YIELD;\n    let s = !1;\n    if (r(this._elementsToAddOrUpdate, (r, i) => {\n      const a = this._elements.get(i);\n      if (a && a.rendered) {\n        const t = this._stageObjects.get(i);\n        return t && t.forEach(e => {\n          const t = e.geometries[0].vertexAttributes,\n            s = this._elements.get(i);\n          t.get(p.UV0).data = s.placement.uvMinMax, t.get(p.SIZE).data = [s.textRenderer.displayWidth, s.textRenderer.displayHeight], e.geometryVertexAttrsUpdated(e.geometries[0]);\n        }), this._elementsToAddOrUpdate.delete(i), e.madeProgress(), !1;\n      }\n      return this._processAddition(this._elementsToAddOrUpdate.get(i), t) === D.REPACK && (s = !0, !0);\n    }), s) return this.runTask(f, !1), void e.madeProgress();\n    let i = !1;\n    this._elementsToRender.size > 0 && this._needsClear && (this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height), this._needsClear = !1), r(this._elementsToRender, (t, s) => (this._processRenderingRequest(t), this._elementsToRender.delete(s), i = !0, e.madeProgress(), e.done)), i && this._glTexture.setData(this._canvas), this.updating = this._elementsToRender.size > 0, !this.updating && u.orderedRepackingEnabled && (this.repackOrdered(), e.madeProgress());\n  }\n  addTextTexture(e, t) {\n    const s = e.key;\n    this._elementsToAddOrUpdate.has(s) || this._elementsToAddOrUpdate.set(s, new k(s, e)), this._addStageObject(s, t), this._elementsToRemove.delete(s), this.setDirty();\n  }\n  removeTextTexture(e, t) {\n    const s = e.key;\n    this._elementsToRemove.set(s, this._elements.get(s)), this._removeStageObject(s, t);\n  }\n  setDirty() {\n    this._glTexture && (this.updating = !0);\n  }\n  repackOrdered() {\n    if (0 === this._elements.size) return;\n    const e = [];\n    this._elements.forEach((t, s) => e.push({\n      element: t,\n      key: s\n    }));\n    let t = !0;\n    for (let s = 0; s < e.length - 1; s++) if (e[s].key.localeCompare(e[s + 1].key) > 0) {\n      t = !1;\n      break;\n    }\n    if (!t || this._elementsToRemove.size) {\n      e.sort((e, t) => e.key.localeCompare(t.key)), this._elements.clear();\n      for (const {\n        element: t,\n        key: s\n      } of e) this._elements.set(s, t);\n      this._repack(), this.setDirty();\n    }\n  }\n  get test() {\n    const {\n        _elements: e,\n        _stageObjects: t,\n        _elementsToRemove: s,\n        _atlas: r\n      } = this,\n      i = this;\n    return {\n      elements: e,\n      stageObjects: t,\n      elementsToRemove: s,\n      atlas: r,\n      resizeAtlas: (e, t) => i._resizeAtlas(e, t),\n      run: (e, t) => i.runTask(e, t)\n    };\n  }\n};\ne([d({\n  constructOnly: !0\n})], M.prototype, \"view\", void 0), e([d({\n  type: Boolean\n})], M.prototype, \"updating\", void 0), M = e([c(\"esri.views.3d.webgl-engine.lib.TextTextureAtlas\")], M);\nconst S = 2,\n  C = 2;\nvar D;\n!function (e) {\n  e[e.OK = 0] = \"OK\", e[e.REPACK = 1] = \"REPACK\";\n}(D || (D = {}));\nexport { M as TextTextureAtlas };","map":{"version":3,"names":["_","e","t","s","someMap","r","nextHighestPowerOfTwo","i","disposeMaybe","a","isSome","n","removeMaybe","o","isNone","h","generateUID","l","property","d","subclass","c","m","ContentObjectType","g","textTextureAtlas","u","VertexAttribute","p","TaskPriority","x","Task","T","noBudget","f","TextureType","A","PixelFormat","v","PixelType","R","TextureWrapMode","y","TextureSamplingMode","w","Texture","z","b","j","O","E","U","constructor","offset","uvMinMax","k","textId","textRenderer","placement","rendered","M","type","id","events","_glTexture","_needsClear","_elementsToAddOrUpdate","Map","_elementsToRemove","_elementsToRender","_elements","_stageObjects","updating","initialize","_stage","view","_canvas","_create2DCanvas","_ctx","getContext","add","_computeAtlasResolution","width","height","_createAtlasRegion","_update2DCanvasSize","_resetAtlasCursor","unload","emit","_atlas","size","requiresFrameUpdates","_createDescriptor","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","flipped","samplingMode","LINEAR_MIPMAP_LINEAR","hasMipmap","preMultiplyAlpha","maxAnisotropy","parameters","maxMaxAnisotropy","glTexture","load","_frameWorker","resourceController","scheduler","registerTask","TEXT_TEXTURE_ATLAS","setDirty","dispose","remove","document","createElement","setAttribute","toString","arguments","length","undefined","cursor","lineHeight","Math","max","min","_resizeAtlas","resize","S","C","_getAtlasUsage","_getExpectedAtlasUsage","_addAtlasElement","renderedWidth","renderedHeight","set","_removeAtlasElement","has","clearRect","delete","_ensureStageObjects","get","Set","_addStageObject","_removeStageObject","geometries","vertexAttributes","SIZE","data","geometryVertexAttrsUpdated","_processAddition","_processRemovals","D","OK","_repack","REPACK","forEach","clear","_processRenderingRequest","render","UV0","Float32Array","displayWidth","displayHeight","running","runTask","YIELD","madeProgress","done","setData","orderedRepackingEnabled","repackOrdered","addTextTexture","key","removeTextTexture","push","element","localeCompare","sort","test","elements","stageObjects","elementsToRemove","atlas","resizeAtlas","run","constructOnly","prototype","Boolean","TextTextureAtlas"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTextureAtlas.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Evented.js\";import{someMap as r}from\"../../../../core/MapUtils.js\";import{nextHighestPowerOfTwo as i}from\"../../../../core/mathUtils.js\";import{disposeMaybe as a,isSome as n,removeMaybe as o,isNone as h}from\"../../../../core/maybe.js\";import{generateUID as l}from\"../../../../core/uid.js\";import{property as d}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{s as m}from\"../../../../chunks/vec4.js\";import{c as _}from\"../../../../chunks/vec4f64.js\";import{ContentObjectType as g}from\"./ContentObjectType.js\";import{textTextureAtlas as u}from\"./testUtils.js\";import{VertexAttribute as p}from\"./VertexAttribute.js\";import{TaskPriority as x,Task as T,noBudget as f}from\"../../../support/Scheduler.js\";import{TextureType as A,PixelFormat as v,PixelType as R,TextureWrapMode as y,TextureSamplingMode as w}from\"../../../webgl/enums.js\";import{Texture as z}from\"../../../webgl/Texture.js\";const b=512,j=4096,O=.85,E=.95;class U{constructor(){this.offset={x:0,y:0},this.uvMinMax=_()}}class k{constructor(e,t){this.textId=e,this.textRenderer=t,this.placement=new U,this.rendered=!1}}let M=class extends t{constructor(e){super(e),this.type=g.Texture,this.id=l(),this.events=new s,this._glTexture=null,this._needsClear=!1,this._elementsToAddOrUpdate=new Map,this._elementsToRemove=new Map,this._elementsToRender=new Map,this._elements=new Map,this._stageObjects=new Map,this.updating=!1}initialize(){this._stage=this.view._stage,this._canvas=this._create2DCanvas(),this._ctx=this._canvas.getContext(\"2d\"),this._stage.add(this);const e=this._computeAtlasResolution(this.view.width,this.view.height);this._createAtlasRegion(e),this._update2DCanvasSize(),this._resetAtlasCursor()}unload(){this._glTexture=a(this._glTexture),this.updating=!1,this.events.emit(\"unloaded\")}get width(){return this._atlas.size.width}get height(){return this._atlas.size.height}get requiresFrameUpdates(){return!1}_createDescriptor(e){return{target:A.TEXTURE_2D,pixelFormat:v.RGBA,dataType:R.UNSIGNED_BYTE,wrapMode:y.CLAMP_TO_EDGE,flipped:!0,samplingMode:w.LINEAR_MIPMAP_LINEAR,hasMipmap:!0,preMultiplyAlpha:!0,maxAnisotropy:e.parameters.maxMaxAnisotropy}}get glTexture(){return this._glTexture}load(e){return n(this._glTexture)||(this._glTexture=new z(e,this._createDescriptor(e),this._canvas),this._frameWorker=this.view.resourceController.scheduler.registerTask(x.TEXT_TEXTURE_ATLAS,this),this.setDirty()),this._glTexture}dispose(){this._elements=null,this._elementsToAddOrUpdate=null,this._elementsToRemove=null,this._elementsToRender=null,this._frameWorker=o(this._frameWorker),this._glTexture&&(this._stage.remove(this),this._glTexture=a(this._glTexture)),this._canvas.width=0,this._canvas.height=0,this._canvas=null,this._ctx=null}_create2DCanvas(){const e=document.createElement(\"canvas\");return e.setAttribute(\"id\",\"canvas2d\"),e.setAttribute(\"style\",\"display:none\"),e.setAttribute(\"width\",b.toString()),e.setAttribute(\"height\",b.toString()),e}_update2DCanvasSize(){this._canvas.setAttribute(\"width\",this._atlas.size.width.toString()),this._canvas.setAttribute(\"height\",this._atlas.size.height.toString())}_createAtlasRegion(e=b){this._atlas={size:{width:e,height:e},cursor:{x:0,y:0},lineHeight:0}}_computeAtlasResolution(e,t){let s=Math.max(e,t);return s+=256,s=i(s),s=Math.min(s,j),s}_resizeAtlas(e,t){t=t||e;const s=this._atlas;s.size.width=e,s.size.height=t,n(this._glTexture)&&this._glTexture.resize(e,t),this._update2DCanvasSize()}_resetAtlasCursor(){const e=this._atlas;e.cursor.x=S,e.cursor.y=S+C,e.lineHeight=0,this._needsClear=!0}_getAtlasUsage(){const e=this._atlas;return(e.cursor.x+e.cursor.y*e.size.width)/(e.size.width*e.size.height)}_getExpectedAtlasUsage(){const e=this._elementsToRemove.size,t=this._elementsToAddOrUpdate.size,s=this._elements.size;return this._getAtlasUsage()/s*(s+t-e)}_addAtlasElement(e,t,s,r){const i=this._atlas,{renderedWidth:a,renderedHeight:n}=e.textRenderer;e.placement.offset.x=i.cursor.x,e.placement.offset.y=i.cursor.y,m(e.placement.uvMinMax,e.placement.offset.x/i.size.width,1-(e.placement.offset.y+n)/i.size.height,(e.placement.offset.x+a)/i.size.width,1-e.placement.offset.y/i.size.height),i.cursor.x+=s,i.lineHeight=Math.max(i.lineHeight,r),this._elements.set(t,e)}_removeAtlasElement(e){if(e&&this._elements.has(e.textId)){const t=e.placement.offset;this._ctx.clearRect(t.x,t.y,e.textRenderer.renderedWidth,e.textRenderer.renderedHeight),this._elements.delete(e.textId)}}_ensureStageObjects(e){const t=this._stageObjects.get(e);if(t)return t;const s=new Set;return this._stageObjects.set(e,s),s}_addStageObject(e,t){this._ensureStageObjects(e).add(t)}_removeStageObject(e,t){const s=this._stageObjects.get(e);s&&s.delete(t)&&(t.geometries[0].vertexAttributes.get(p.SIZE).data=[0,0],t.geometryVertexAttrsUpdated(t.geometries[0]))}_processAddition(e,t){const s=this._atlas,r=e.textId,i=e.textRenderer.renderedWidth,a=e.textRenderer.renderedHeight,n=i+S,o=a+S+C;if(s.cursor.x+n<s.size.width&&s.cursor.y+o<s.size.height)this._addAtlasElement(e,r,n,o),this._elementsToRender.set(r,e),this._elementsToAddOrUpdate.delete(r);else{if(!(s.cursor.y+o+s.lineHeight<s.size.height)){const e=this._getExpectedAtlasUsage(),r=e>O&&s.size.width<j;return r&&this._resizeAtlas(2*s.size.width,2*s.size.height),!t||!r&&e>E&&s.size.width===j?(this._processRemovals(),D.OK):(this._repack(),D.REPACK)}s.cursor.x=S,s.cursor.y+=s.lineHeight,s.lineHeight=0,this._addAtlasElement(e,r,n,o),this._elementsToRender.set(r,e),this._elementsToAddOrUpdate.delete(r)}return D.OK}_processRemovals(){this._elementsToRemove.forEach(((e,t)=>{const s=this._stageObjects.get(t);s&&0!==s.size||this._removeAtlasElement(e),s&&0===s.size&&this._stageObjects.delete(t)})),this._elementsToRemove.clear()}_repack(){this._processRemovals(),this._elements.forEach(((e,t)=>{e.rendered=!1,this._elementsToAddOrUpdate.set(t,e)})),this._elements.clear(),this._resetAtlasCursor(),this._elementsToRender.clear()}_processRenderingRequest(e){this._ctx.clearRect(e.placement.offset.x,e.placement.offset.y,e.textRenderer.renderedWidth,e.textRenderer.renderedHeight),e.textRenderer.render(this._ctx,e.placement.offset.x,e.placement.offset.y);const t=this._stageObjects.get(e.textId);t&&t.forEach((t=>{t.geometries[0].vertexAttributes.get(p.UV0).data=new Float32Array(e.placement.uvMinMax),t.geometries[0].vertexAttributes.get(p.SIZE).data=[e.textRenderer.displayWidth,e.textRenderer.displayHeight],t.geometryVertexAttrsUpdated(t.geometries[0])})),e.rendered=!0}get running(){return this.updating}runTask(e,t=!0){if(h(this._glTexture))return T.YIELD;let s=!1;if(r(this._elementsToAddOrUpdate,((r,i)=>{const a=this._elements.get(i);if(a&&a.rendered){const t=this._stageObjects.get(i);return t&&t.forEach((e=>{const t=e.geometries[0].vertexAttributes,s=this._elements.get(i);t.get(p.UV0).data=s.placement.uvMinMax,t.get(p.SIZE).data=[s.textRenderer.displayWidth,s.textRenderer.displayHeight],e.geometryVertexAttrsUpdated(e.geometries[0])})),this._elementsToAddOrUpdate.delete(i),e.madeProgress(),!1}return this._processAddition(this._elementsToAddOrUpdate.get(i),t)===D.REPACK&&(s=!0,!0)})),s)return this.runTask(f,!1),void e.madeProgress();let i=!1;this._elementsToRender.size>0&&this._needsClear&&(this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._needsClear=!1),r(this._elementsToRender,((t,s)=>(this._processRenderingRequest(t),this._elementsToRender.delete(s),i=!0,e.madeProgress(),e.done))),i&&this._glTexture.setData(this._canvas),this.updating=this._elementsToRender.size>0,!this.updating&&u.orderedRepackingEnabled&&(this.repackOrdered(),e.madeProgress())}addTextTexture(e,t){const s=e.key;this._elementsToAddOrUpdate.has(s)||this._elementsToAddOrUpdate.set(s,new k(s,e)),this._addStageObject(s,t),this._elementsToRemove.delete(s),this.setDirty()}removeTextTexture(e,t){const s=e.key;this._elementsToRemove.set(s,this._elements.get(s)),this._removeStageObject(s,t)}setDirty(){this._glTexture&&(this.updating=!0)}repackOrdered(){if(0===this._elements.size)return;const e=[];this._elements.forEach(((t,s)=>e.push({element:t,key:s})));let t=!0;for(let s=0;s<e.length-1;s++)if(e[s].key.localeCompare(e[s+1].key)>0){t=!1;break}if(!t||this._elementsToRemove.size){e.sort(((e,t)=>e.key.localeCompare(t.key))),this._elements.clear();for(const{element:t,key:s}of e)this._elements.set(s,t);this._repack(),this.setDirty()}}get test(){const{_elements:e,_stageObjects:t,_elementsToRemove:s,_atlas:r}=this,i=this;return{elements:e,stageObjects:t,elementsToRemove:s,atlas:r,resizeAtlas:(e,t)=>i._resizeAtlas(e,t),run:(e,t)=>i.runTask(e,t)}}};e([d({constructOnly:!0})],M.prototype,\"view\",void 0),e([d({type:Boolean})],M.prototype,\"updating\",void 0),M=e([c(\"esri.views.3d.webgl-engine.lib.TextTextureAtlas\")],M);const S=2,C=2;var D;!function(e){e[e.OK=0]=\"OK\",e[e.REPACK=1]=\"REPACK\"}(D||(D={}));export{M as TextTextureAtlas};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}