{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { nextHighestPowerOfTwo as e } from \"../../../core/mathUtils.js\";\nimport { disposeMaybe as t, releaseMaybe as r, isNone as s, isSome as o } from \"../../../core/maybe.js\";\nimport { s as a, c as i } from \"../../../chunks/vec2.js\";\nimport { Z as n } from \"../../../chunks/vec2f64.js\";\nimport { isBaseLayer as c, isGroupLayer as u } from \"../../../layers/support/layerUtils.js\";\nimport { ImageWithType as l } from \"../support/StreamDataLoader.js\";\nimport { BlendLayersPassParameters as p } from \"./BlendLayersTechnique.js\";\nimport { TextureUpdate as h } from \"./interfaces.js\";\nimport { LayerClass as d } from \"./LayerClass.js\";\nimport { isBlendableLayerView as m, isVectorTileLayerView as _, isVectorTileRenderInfo as f, isImageryTileRenderInfo as y, isRasterTileRenderInfo as T, isTextureTileRenderInfo as g } from \"./terrainUtils.js\";\nimport { ActivationTime as x } from \"./TextureFader.js\";\nimport { TextureReference as b } from \"./TextureReference.js\";\nimport { TileCompositor as k } from \"./TileCompositor.js\";\nimport w from \"./TileTexture.js\";\nimport { TileUpdate as I } from \"./TileUpdate.js\";\nimport { blendModeFromString as P } from \"../webgl-engine/core/shaderLibrary/output/BlendOptions.js\";\nimport { BaseOpacityMode as A, BlendLayersOutput as D } from \"../webgl-engine/core/shaderLibrary/terrain/TileBackground.glsl.js\";\nimport { createColorTexture as E, createEmptyTexture as M } from \"../webgl-engine/lib/glUtil3D.js\";\nimport { ContextType as R } from \"../../webgl/context-util.js\";\nimport { TextureSamplingMode as L, TextureType as j, PixelFormat as C, PixelType as N, TextureWrapMode as O } from \"../../webgl/enums.js\";\nimport { Texture as U } from \"../../webgl/Texture.js\";\nclass B {\n  constructor(e, t, r, s) {\n    this.start = e, this.end = t, this.blendMode = r, this.opacity = s;\n  }\n}\nclass G {\n  constructor(e, t, r) {\n    this._rctx = e, this.tileSize = t, this._techniqueRepository = r, this._passParameters = new p(), this._backgroundTexture = null, this._backgroundColor = null, this._backgroundDirty = !1, this._blackTex = null, this._maxAnisotropy = this._rctx.parameters.maxMaxAnisotropy, this._composition = new k(this._rctx, this._techniqueRepository), this._blackTex = new w(E(this._rctx, [0, 0, 0, 1])), this._ensureBackgroundTexture(this.tileSize);\n  }\n  dispose() {\n    this._composition = t(this._composition), this._backgroundTexture = r(this._backgroundTexture), this._blackTex = r(this._blackTex);\n  }\n  get backgroundIsGrid() {\n    return s(this._backgroundColor);\n  }\n  get backgroundColor() {\n    return this._backgroundColor;\n  }\n  updateTileTexture(e, t) {\n    if (!e.renderData) return;\n    const r = e.surface,\n      s = r.baseOpacity;\n    let a = 0,\n      i = 0,\n      n = this.tileSize,\n      l = !1;\n    const p = r.view.state.contentPixelRatio;\n    let h = !1;\n    Y.clear(), Z.length = 0;\n    const f = e.layerInfo[d.MAP];\n    let y = f.length,\n      T = 0;\n    for (; T < f.length; T++) {\n      const t = r.layerViewByIndex(T, d.MAP),\n        g = t.layer.opacity;\n      v[T] = g;\n      const x = t.fullOpacity;\n      if (V[T] = x, c(t.layer) && y >= f.length && (y = T), m(t)) {\n        W[T] = t.layer.blendMode;\n        let e = \"normal\" !== t.layer.blendMode;\n        if (u(t.layer.parent)) {\n          const r = q(t.layer.parent);\n          o(r) && \"\" !== r && (e = z(t.layer.parent) || e);\n        }\n        e && (h = e, l = !1);\n      }\n      if (0 === g && !h) {\n        f[T].pendingUpdates &= ~(I.TEXTURE_NOFADING & I.TEXTURE_FADING);\n        continue;\n      }\n      ++i;\n      const b = S(e, T);\n      if (b) {\n        if (f[T].pendingUpdates &= ~(I.TEXTURE_NOFADING & I.TEXTURE_FADING), u(t.layer.parent)) {\n          const e = q(t.layer.parent);\n          o(e) && \"\" !== e && X(t.layer.parent, T);\n        }\n        _(t) ? n = Math.max(n, this.tileSize * p) : 1 === s && 1 === x && (t.isOpaque || this._dataToTexture(b) && b.sourceLayerInfo.data.descriptor.isOpaque) && (l = !0), ++a;\n      }\n    }\n    this._rctx.type === R.WEBGL1 && (n = F(n));\n    const g = n / this.tileSize,\n      x = T - 1;\n    this._ensureBackgroundTexture(this.tileSize), 0 !== a ? 1 === a && !h && this._useLayerTexture(e, x, y, V[x]) || this._composeMapLayers(e, t, x, y, v, W, n, g, !l || h, Y, h) : this._useBackgroundTexture(e, i);\n  }\n  _ensureBackgroundTexture(e) {\n    s(this._backgroundTexture) && (this._backgroundTexture = this._buildTexture(e), this._backgroundDirty = !0), this._backgroundDirty && (this._composition.bind(e), this._passParameters.offset = n, this._passParameters.scale = 1, this._passParameters.opacity = 1, o(this.backgroundColor) && (this._passParameters.backgroundColor = this.backgroundColor), this._composition.drawBackground(this._passParameters, o(this.backgroundColor)), this._composition.copyFBOToTexture(this._backgroundTexture), this._composition.unbind(), this._backgroundDirty = !1);\n  }\n  _useBackgroundTexture(e, t) {\n    let r = x.Immediate;\n    (e.surface.view.layerViewManager.updating || t > 0) && (r = x.Delayed);\n    const a = e.renderData;\n    this._backgroundTexture && s(a.textureReference) && (r = x.Immediate), a.setTextureReference(o(this._backgroundTexture) ? new b(this._backgroundTexture, h.FADING, J, e.surface.baseOpacity, 0, 1) : null, r);\n  }\n  _useLayerTexture(e, t, r, s) {\n    const o = t < r,\n      a = o ? 1 : e.surface.baseOpacity,\n      i = o ? e.surface.baseOpacity : 1,\n      n = S(e, t);\n    return !!this._dataToTexture(n) && (e.renderData.setTextureReference(new b(n.sourceLayerInfo.data, h.FADING, n, a, i, s)), !0);\n  }\n  _composeMapLayers(e, t, r, s, o, a, i, c, u, l, p) {\n    this._composition.ensureBuffer(i);\n    const h = e.surface.baseOpacity;\n    let d = !1,\n      m = L.LINEAR_MIPMAP_LINEAR,\n      _ = !1,\n      T = 0;\n    for (let b = r; b >= 0; b--) {\n      const t = S(e, b);\n      if (!t) continue;\n      if (0 === o[b] && !p) continue;\n      const r = b < s && h < 1 && !d;\n      this._passParameters.baseOpacity = r ? h : 1;\n      const g = this._passParameters.baseOpacity < 1 ? A.Required : A.NotRequired;\n      r && (d = !0);\n      let x = !1;\n      l.forEach(e => {\n        e.start === b && (Z.push(e), this._composition.openGroup(i), x = !0);\n      });\n      const k = 0 === T,\n        w = x ? D.GroupBackgroundComposite : u && k ? this.backgroundIsGrid ? D.GridComposite : D.ColorComposite : D.Composite,\n        I = P[a[b]];\n      for (f(t) ? (this._passParameters.opacity = o[b], _ = this._composition.drawVectorData(this._passParameters, w, i, I, g, t, c, this.tileSize, _)) : y(t) ? (this._passParameters.opacity = o[b], this._composition.drawImageryTileData(this._passParameters, w, i, I, g, t), this._hasNearestInterpolation(t) && (m = L.NEAREST)) : this._dataToTexture(t) && (this._passParameters.texture = t.sourceLayerInfo.data.texture, this._passParameters.offset = t.offset, this._passParameters.scale = t.scale, this._passParameters.opacity = o[b], this._composition.drawRasterData(this._passParameters, w, i, I, g)); Z.length > 0 && Z[Z.length - 1].end === b;) {\n        const e = Z.pop();\n        this._passParameters.opacity = e.opacity, this._passParameters.offset = n, this._passParameters.scale = 1;\n        const t = u && k ? this.backgroundIsGrid ? D.GridComposite : D.ColorComposite : D.Composite;\n        this._composition.drawGroup(this._passParameters, t, i, P[e.blendMode], g);\n      }\n      T++;\n    }\n    const g = e.renderData,\n      x = g.ensureTexture(i, () => this._buildTexture(i, m));\n    this._composition.copyFBOToTexture(x), this._composition.unbind(), g.setTextureReference(new b(x, t, J, d ? 1 : h, 0, 1));\n  }\n  _hasNearestInterpolation(e) {\n    const t = e.sourceLayerInfo.data;\n    return !!t.source && \"nearest\" === t.interpolation;\n  }\n  _dataToTexture(e) {\n    if (T(e)) {\n      const t = e.sourceLayerInfo;\n      t.data = this._buildTexture(t.data), e.tile.setMemoryDirty();\n    }\n    return g(e);\n  }\n  setBackground(e) {\n    this._backgroundColor !== e && (this._backgroundColor = e, this._backgroundDirty = !0);\n  }\n  _buildTexture(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : L.LINEAR_MIPMAP_LINEAR;\n    if (s(e)) return null;\n    const r = {\n        target: j.TEXTURE_2D,\n        pixelFormat: C.RGBA,\n        dataType: N.UNSIGNED_BYTE,\n        wrapMode: O.CLAMP_TO_EDGE,\n        samplingMode: t,\n        maxAnisotropy: this._maxAnisotropy,\n        preMultiplyAlpha: !0,\n        flipped: !0,\n        hasMipmap: !0\n      },\n      o = this._rctx;\n    let a;\n    if (\"number\" == typeof e) r.width = r.height = e, a = new w(new U(o, r));else if (e instanceof l) r.isOpaque = e.isOpaque, a = new w(new U(o, r, e.image)), e.release();else try {\n      r.width = e.width, r.height = e.height, a = new w(new U(o, r, e));\n    } catch (n) {\n      a = new w(M(o)), console.warn(\"TileRenderer: failed to execute 'texImage2D', cross-origin image may not be loaded.\");\n    }\n    const i = o.bindTexture(a.texture, U.TEXTURE_UNIT_FOR_UPDATES);\n    return a.generateMipmap(), o.bindTexture(i, U.TEXTURE_UNIT_FOR_UPDATES), a;\n  }\n  get test() {\n    return {\n      backgroundTexture: this._backgroundTexture\n    };\n  }\n}\nfunction F(t) {\n  const r = e(t),\n    s = r * r,\n    o = t * t;\n  if (s === o) return t;\n  const a = r / 2;\n  return s - o < o - a * a ? r : a;\n}\nfunction S(e, t) {\n  H.layerIndex = t;\n  const r = e.layerInfo[d.MAP][t];\n  if (o(r.data)) return a(H.offset, 0, 0), H.tile = e, H.scale = 1, H.sourceLod = e.lij, H.sourceLayerInfo = r, H;\n  const s = r.upsampleInfo;\n  if (o(s)) {\n    const e = s.tile.layerInfo[d.MAP][t];\n    return H.tile = s.tile, i(H.offset, s.offset), H.scale = s.scale, H.sourceLod = s.tile.lij, H.sourceLayerInfo = e, H;\n  }\n  return null;\n}\nfunction q(e) {\n  return e.get(\"uid\");\n}\nfunction z(e) {\n  let t = \"normal\" !== e.blendMode;\n  return u(e.parent) && (t = z(e.parent) || t), t;\n}\nfunction X(e, t) {\n  u(e.parent) && X(e.parent, t);\n  const r = q(e);\n  if (o(r) && \"\" !== r) {\n    const s = Y.get(r);\n    s ? s.start = t : Y.set(r, new B(t, t, e.blendMode, e.opacity));\n  }\n}\nconst v = new Array(),\n  V = new Array(),\n  W = new Array(),\n  Y = new Map(),\n  Z = new Array(),\n  H = {\n    tile: null,\n    sourceLayerInfo: null,\n    sourceLod: null,\n    offset: [0, 0],\n    scale: 1,\n    layerIndex: 0\n  },\n  J = {\n    offset: [0, 0],\n    scale: 1\n  };\nexport { B as GroupInfo, G as TileRenderer };","map":{"version":3,"names":["nextHighestPowerOfTwo","e","disposeMaybe","t","releaseMaybe","r","isNone","s","isSome","o","a","c","i","Z","n","isBaseLayer","isGroupLayer","u","ImageWithType","l","BlendLayersPassParameters","p","TextureUpdate","h","LayerClass","d","isBlendableLayerView","m","isVectorTileLayerView","_","isVectorTileRenderInfo","f","isImageryTileRenderInfo","y","isRasterTileRenderInfo","T","isTextureTileRenderInfo","g","ActivationTime","x","TextureReference","b","TileCompositor","k","w","TileUpdate","I","blendModeFromString","P","BaseOpacityMode","A","BlendLayersOutput","D","createColorTexture","E","createEmptyTexture","M","ContextType","R","TextureSamplingMode","L","TextureType","j","PixelFormat","C","PixelType","N","TextureWrapMode","O","Texture","U","B","constructor","start","end","blendMode","opacity","G","_rctx","tileSize","_techniqueRepository","_passParameters","_backgroundTexture","_backgroundColor","_backgroundDirty","_blackTex","_maxAnisotropy","parameters","maxMaxAnisotropy","_composition","_ensureBackgroundTexture","dispose","backgroundIsGrid","backgroundColor","updateTileTexture","renderData","surface","baseOpacity","view","state","contentPixelRatio","Y","clear","length","layerInfo","MAP","layerViewByIndex","layer","v","fullOpacity","V","W","parent","q","z","pendingUpdates","TEXTURE_NOFADING","TEXTURE_FADING","S","X","Math","max","isOpaque","_dataToTexture","sourceLayerInfo","data","descriptor","type","WEBGL1","F","_useLayerTexture","_composeMapLayers","_useBackgroundTexture","_buildTexture","bind","offset","scale","drawBackground","copyFBOToTexture","unbind","Immediate","layerViewManager","updating","Delayed","textureReference","setTextureReference","FADING","J","ensureBuffer","LINEAR_MIPMAP_LINEAR","Required","NotRequired","forEach","push","openGroup","GroupBackgroundComposite","GridComposite","ColorComposite","Composite","drawVectorData","drawImageryTileData","_hasNearestInterpolation","NEAREST","texture","drawRasterData","pop","drawGroup","ensureTexture","source","interpolation","tile","setMemoryDirty","setBackground","arguments","undefined","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","samplingMode","maxAnisotropy","preMultiplyAlpha","flipped","hasMipmap","width","height","image","release","console","warn","bindTexture","TEXTURE_UNIT_FOR_UPDATES","generateMipmap","test","backgroundTexture","H","layerIndex","sourceLod","lij","upsampleInfo","get","set","Array","Map","GroupInfo","TileRenderer"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/terrain/TileRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as e}from\"../../../core/mathUtils.js\";import{disposeMaybe as t,releaseMaybe as r,isNone as s,isSome as o}from\"../../../core/maybe.js\";import{s as a,c as i}from\"../../../chunks/vec2.js\";import{Z as n}from\"../../../chunks/vec2f64.js\";import{isBaseLayer as c,isGroupLayer as u}from\"../../../layers/support/layerUtils.js\";import{ImageWithType as l}from\"../support/StreamDataLoader.js\";import{BlendLayersPassParameters as p}from\"./BlendLayersTechnique.js\";import{TextureUpdate as h}from\"./interfaces.js\";import{LayerClass as d}from\"./LayerClass.js\";import{isBlendableLayerView as m,isVectorTileLayerView as _,isVectorTileRenderInfo as f,isImageryTileRenderInfo as y,isRasterTileRenderInfo as T,isTextureTileRenderInfo as g}from\"./terrainUtils.js\";import{ActivationTime as x}from\"./TextureFader.js\";import{TextureReference as b}from\"./TextureReference.js\";import{TileCompositor as k}from\"./TileCompositor.js\";import w from\"./TileTexture.js\";import{TileUpdate as I}from\"./TileUpdate.js\";import{blendModeFromString as P}from\"../webgl-engine/core/shaderLibrary/output/BlendOptions.js\";import{BaseOpacityMode as A,BlendLayersOutput as D}from\"../webgl-engine/core/shaderLibrary/terrain/TileBackground.glsl.js\";import{createColorTexture as E,createEmptyTexture as M}from\"../webgl-engine/lib/glUtil3D.js\";import{ContextType as R}from\"../../webgl/context-util.js\";import{TextureSamplingMode as L,TextureType as j,PixelFormat as C,PixelType as N,TextureWrapMode as O}from\"../../webgl/enums.js\";import{Texture as U}from\"../../webgl/Texture.js\";class B{constructor(e,t,r,s){this.start=e,this.end=t,this.blendMode=r,this.opacity=s}}class G{constructor(e,t,r){this._rctx=e,this.tileSize=t,this._techniqueRepository=r,this._passParameters=new p,this._backgroundTexture=null,this._backgroundColor=null,this._backgroundDirty=!1,this._blackTex=null,this._maxAnisotropy=this._rctx.parameters.maxMaxAnisotropy,this._composition=new k(this._rctx,this._techniqueRepository),this._blackTex=new w(E(this._rctx,[0,0,0,1])),this._ensureBackgroundTexture(this.tileSize)}dispose(){this._composition=t(this._composition),this._backgroundTexture=r(this._backgroundTexture),this._blackTex=r(this._blackTex)}get backgroundIsGrid(){return s(this._backgroundColor)}get backgroundColor(){return this._backgroundColor}updateTileTexture(e,t){if(!e.renderData)return;const r=e.surface,s=r.baseOpacity;let a=0,i=0,n=this.tileSize,l=!1;const p=r.view.state.contentPixelRatio;let h=!1;Y.clear(),Z.length=0;const f=e.layerInfo[d.MAP];let y=f.length,T=0;for(;T<f.length;T++){const t=r.layerViewByIndex(T,d.MAP),g=t.layer.opacity;v[T]=g;const x=t.fullOpacity;if(V[T]=x,c(t.layer)&&y>=f.length&&(y=T),m(t)){W[T]=t.layer.blendMode;let e=\"normal\"!==t.layer.blendMode;if(u(t.layer.parent)){const r=q(t.layer.parent);o(r)&&\"\"!==r&&(e=z(t.layer.parent)||e)}e&&(h=e,l=!1)}if(0===g&&!h){f[T].pendingUpdates&=~(I.TEXTURE_NOFADING&I.TEXTURE_FADING);continue}++i;const b=S(e,T);if(b){if(f[T].pendingUpdates&=~(I.TEXTURE_NOFADING&I.TEXTURE_FADING),u(t.layer.parent)){const e=q(t.layer.parent);o(e)&&\"\"!==e&&X(t.layer.parent,T)}_(t)?n=Math.max(n,this.tileSize*p):1===s&&1===x&&(t.isOpaque||this._dataToTexture(b)&&b.sourceLayerInfo.data.descriptor.isOpaque)&&(l=!0),++a}}this._rctx.type===R.WEBGL1&&(n=F(n));const g=n/this.tileSize,x=T-1;this._ensureBackgroundTexture(this.tileSize),0!==a?1===a&&!h&&this._useLayerTexture(e,x,y,V[x])||this._composeMapLayers(e,t,x,y,v,W,n,g,!l||h,Y,h):this._useBackgroundTexture(e,i)}_ensureBackgroundTexture(e){s(this._backgroundTexture)&&(this._backgroundTexture=this._buildTexture(e),this._backgroundDirty=!0),this._backgroundDirty&&(this._composition.bind(e),this._passParameters.offset=n,this._passParameters.scale=1,this._passParameters.opacity=1,o(this.backgroundColor)&&(this._passParameters.backgroundColor=this.backgroundColor),this._composition.drawBackground(this._passParameters,o(this.backgroundColor)),this._composition.copyFBOToTexture(this._backgroundTexture),this._composition.unbind(),this._backgroundDirty=!1)}_useBackgroundTexture(e,t){let r=x.Immediate;(e.surface.view.layerViewManager.updating||t>0)&&(r=x.Delayed);const a=e.renderData;this._backgroundTexture&&s(a.textureReference)&&(r=x.Immediate),a.setTextureReference(o(this._backgroundTexture)?new b(this._backgroundTexture,h.FADING,J,e.surface.baseOpacity,0,1):null,r)}_useLayerTexture(e,t,r,s){const o=t<r,a=o?1:e.surface.baseOpacity,i=o?e.surface.baseOpacity:1,n=S(e,t);return!!this._dataToTexture(n)&&(e.renderData.setTextureReference(new b(n.sourceLayerInfo.data,h.FADING,n,a,i,s)),!0)}_composeMapLayers(e,t,r,s,o,a,i,c,u,l,p){this._composition.ensureBuffer(i);const h=e.surface.baseOpacity;let d=!1,m=L.LINEAR_MIPMAP_LINEAR,_=!1,T=0;for(let b=r;b>=0;b--){const t=S(e,b);if(!t)continue;if(0===o[b]&&!p)continue;const r=b<s&&h<1&&!d;this._passParameters.baseOpacity=r?h:1;const g=this._passParameters.baseOpacity<1?A.Required:A.NotRequired;r&&(d=!0);let x=!1;l.forEach((e=>{e.start===b&&(Z.push(e),this._composition.openGroup(i),x=!0)}));const k=0===T,w=x?D.GroupBackgroundComposite:u&&k?this.backgroundIsGrid?D.GridComposite:D.ColorComposite:D.Composite,I=P[a[b]];for(f(t)?(this._passParameters.opacity=o[b],_=this._composition.drawVectorData(this._passParameters,w,i,I,g,t,c,this.tileSize,_)):y(t)?(this._passParameters.opacity=o[b],this._composition.drawImageryTileData(this._passParameters,w,i,I,g,t),this._hasNearestInterpolation(t)&&(m=L.NEAREST)):this._dataToTexture(t)&&(this._passParameters.texture=t.sourceLayerInfo.data.texture,this._passParameters.offset=t.offset,this._passParameters.scale=t.scale,this._passParameters.opacity=o[b],this._composition.drawRasterData(this._passParameters,w,i,I,g));Z.length>0&&Z[Z.length-1].end===b;){const e=Z.pop();this._passParameters.opacity=e.opacity,this._passParameters.offset=n,this._passParameters.scale=1;const t=u&&k?this.backgroundIsGrid?D.GridComposite:D.ColorComposite:D.Composite;this._composition.drawGroup(this._passParameters,t,i,P[e.blendMode],g)}T++}const g=e.renderData,x=g.ensureTexture(i,(()=>this._buildTexture(i,m)));this._composition.copyFBOToTexture(x),this._composition.unbind(),g.setTextureReference(new b(x,t,J,d?1:h,0,1))}_hasNearestInterpolation(e){const t=e.sourceLayerInfo.data;return!!t.source&&\"nearest\"===t.interpolation}_dataToTexture(e){if(T(e)){const t=e.sourceLayerInfo;t.data=this._buildTexture(t.data),e.tile.setMemoryDirty()}return g(e)}setBackground(e){this._backgroundColor!==e&&(this._backgroundColor=e,this._backgroundDirty=!0)}_buildTexture(e,t=L.LINEAR_MIPMAP_LINEAR){if(s(e))return null;const r={target:j.TEXTURE_2D,pixelFormat:C.RGBA,dataType:N.UNSIGNED_BYTE,wrapMode:O.CLAMP_TO_EDGE,samplingMode:t,maxAnisotropy:this._maxAnisotropy,preMultiplyAlpha:!0,flipped:!0,hasMipmap:!0},o=this._rctx;let a;if(\"number\"==typeof e)r.width=r.height=e,a=new w(new U(o,r));else if(e instanceof l)r.isOpaque=e.isOpaque,a=new w(new U(o,r,e.image)),e.release();else try{r.width=e.width,r.height=e.height,a=new w(new U(o,r,e))}catch(n){a=new w(M(o)),console.warn(\"TileRenderer: failed to execute 'texImage2D', cross-origin image may not be loaded.\")}const i=o.bindTexture(a.texture,U.TEXTURE_UNIT_FOR_UPDATES);return a.generateMipmap(),o.bindTexture(i,U.TEXTURE_UNIT_FOR_UPDATES),a}get test(){return{backgroundTexture:this._backgroundTexture}}}function F(t){const r=e(t),s=r*r,o=t*t;if(s===o)return t;const a=r/2;return s-o<o-a*a?r:a}function S(e,t){H.layerIndex=t;const r=e.layerInfo[d.MAP][t];if(o(r.data))return a(H.offset,0,0),H.tile=e,H.scale=1,H.sourceLod=e.lij,H.sourceLayerInfo=r,H;const s=r.upsampleInfo;if(o(s)){const e=s.tile.layerInfo[d.MAP][t];return H.tile=s.tile,i(H.offset,s.offset),H.scale=s.scale,H.sourceLod=s.tile.lij,H.sourceLayerInfo=e,H}return null}function q(e){return e.get(\"uid\")}function z(e){let t=\"normal\"!==e.blendMode;return u(e.parent)&&(t=z(e.parent)||t),t}function X(e,t){u(e.parent)&&X(e.parent,t);const r=q(e);if(o(r)&&\"\"!==r){const s=Y.get(r);s?s.start=t:Y.set(r,new B(t,t,e.blendMode,e.opacity))}}const v=new Array,V=new Array,W=new Array,Y=new Map,Z=new Array,H={tile:null,sourceLayerInfo:null,sourceLod:null,offset:[0,0],scale:1,layerIndex:0},J={offset:[0,0],scale:1};export{B as GroupInfo,G as TileRenderer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}