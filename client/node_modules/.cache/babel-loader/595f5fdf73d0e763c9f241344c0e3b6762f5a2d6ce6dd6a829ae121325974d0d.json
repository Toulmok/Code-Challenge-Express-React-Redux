{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport r from \"../../../../core/Evented.js\";\nimport has from \"../../../../core/has.js\";\nimport i from \"../../../../core/Logger.js\";\nimport { removeMaybe as s, destroyMaybe as o, isSome as n, isNone as a } from \"../../../../core/maybe.js\";\nimport { watch as p, initial as d } from \"../../../../core/reactiveUtils.js\";\nimport { addFrameTask as h } from \"../../../../core/scheduling.js\";\nimport { Milliseconds as c } from \"../../../../core/time.js\";\nimport { property as l } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as m } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { ComponentObjectCollection as u } from \"../collections/Component/ComponentObjectCollection.js\";\nimport { ShaderTechniqueRepository as _ } from \"../core/shaderTechnique/ShaderTechniqueRepository.js\";\nimport { RenderRequestType as f, Decorations as y } from \"../lib/basicInterfaces.js\";\nimport g from \"../lib/CompositingHelper.js\";\nimport { textureToDepth as R } from \"../lib/depthRangeUtils.js\";\nimport { GLMaterialRepository as x } from \"../lib/GLMaterialRepository.js\";\nimport { MagnifierHelper as b } from \"../lib/MagnifierHelper.js\";\nimport { UpdateParameters as v } from \"../lib/Material.js\";\nimport { ObjectAndLayerIdRenderHelper as j } from \"../lib/ObjectAndLayerIdRenderHelper.js\";\nimport { Renderer as w } from \"../lib/Renderer.js\";\nimport { RenderingContext as T } from \"../lib/RenderingContext.js\";\nimport { TextureRepository as A } from \"../lib/TextureRepository.js\";\nimport { StippleTextureRepository as C } from \"../materials/StippleTextureRepository.js\";\nimport { WaterTextureRepository as U } from \"../materials/internal/WaterTextureRepository.js\";\nimport { getContextCache as D } from \"./contextCache.js\";\nimport { removeLoadedShaderModules as O } from \"./requireUtils.js\";\nimport { ScreenshotManager as M, ScreenshotContext as q } from \"./ScreenshotManager.js\";\nimport { contextCache as S } from \"./testUtils.js\";\nimport { RenderState as L } from \"../../../support/RenderState.js\";\nimport { createContextOrErrorHTML as H } from \"../../../webgl/context-util.js\";\nlet B = class extends t {\n  constructor(e) {\n    super({}), this.events = new r(), this.waterTextureRepository = new U(), this._magnifierHelper = new b(), this.objectAndLayerIdRenderHelper = has(\"enable-feature:objectAndLayerId-rendering\") ? new j() : null, this._needsUpdate = !0, this._needsRender = !0, this._idleSuspend = !0, this._needsWaterReflectionUpdate = !1, this._lastAnimationUpdate = 0, this._container = e.container, this._viewingMode = e.viewingMode, this._initializeContext(e), p(() => this.waterTextureRepository?.updating, () => this.requestRender(), d), this._magnifierHelper.events.on(\"request-render\", () => this.requestRender()), this._stippleTextureRepository = new C(this._rctx), this._shaderTechniqueRepository = new _({\n      rctx: this._rctx,\n      viewingMode: e.viewingMode,\n      stippleTextureRepository: this._stippleTextureRepository,\n      waterTextureRepository: this.waterTextureRepository\n    }), this._textureRepository = new A(e, this._shaderTechniqueRepository, this._rctx), this._textureRepository.events.on(\"changed\", e => this.requestRender(e)), this._materialRepository = new x(this._textureRepository, this._shaderTechniqueRepository, () => this.requestRender(), () => this.requestRender()), this._compositingHelper = new g(this._rctx, this._shaderTechniqueRepository), this.renderer = new w(e, this._materialRepository, this._textureRepository, this._shaderTechniqueRepository, this._rctx, this._compositingHelper, this._magnifierHelper, e => this.requestRender(e));\n    const t = {\n      renderScene: (e, t, r, i, s) => this.renderer.render(e, t, {\n        camera: r,\n        contentCamera: r,\n        mode: L.IDLE\n      }, i, s),\n      requestRenderScene: e => this.requestRender(e),\n      prepareOverlay: () => e.options.screenshot.prepareOverlay(),\n      renderOverlay: (t, r) => e.options.screenshot.renderOverlay(t, r)\n    };\n    this._screenshotManager = new M(this._rctx, t, e => this.events.emit(\"force-camera-for-screenshot\", e), () => this.renderer.disposeOffscreenBuffers()), this._registerFrameTask(e);\n  }\n  normalizeCtorArgs() {\n    return {};\n  }\n  destroy() {\n    this._container.contains(this._canvas) && this._container.removeChild(this._canvas), this._frameTask = s(this._frameTask), this._shaderTechniqueRepository = o(this._shaderTechniqueRepository);\n  }\n  get performanceInfo() {\n    const e = this._rctx.gl;\n    return {\n      renderer: this.renderer.performanceInfo,\n      textureMemory: void 0 !== e.getUsedTextureMemory ? e.getUsedTextureMemory() : void 0,\n      renderbufferMemory: void 0 !== e.getUsedRenderbufferMemory ? e.getUsedRenderbufferMemory() : void 0,\n      VBOMemory: void 0 !== e.getUsedVBOMemory ? e.getUsedVBOMemory() : void 0\n    };\n  }\n  requestRender() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : f.UPDATE;\n    this._needsRender = !0, e === f.UPDATE && (this._needsUpdate = !0);\n  }\n  get updating() {\n    return this._needsUpdate || this._needsWaterReflectionUpdate || this.renderer.updating || this._textureRepository.updating || this.waterTextureRepository.updating || this._magnifierHelper.updating;\n  }\n  get textureRepository() {\n    return this._textureRepository;\n  }\n  get compositingHelper() {\n    return this._compositingHelper;\n  }\n  set magnifier(e) {\n    this._magnifierHelper.magnifier = e;\n  }\n  setIdleSuspend(e) {\n    this._idleSuspend !== e && (this._idleSuspend = e, this.requestRender());\n  }\n  get renderingContext() {\n    return this._rctx;\n  }\n  get capabilities() {\n    return this._rctx.capabilities;\n  }\n  get canvas() {\n    return this._canvas;\n  }\n  takeScreenshot(e) {\n    return this._screenshotManager.takeScreenshot(e).then(e => e[0]);\n  }\n  takeScreenshotWithOID(e) {\n    return e.objectAndLayerIdColor = !0, this._screenshotManager.takeScreenshot(e);\n  }\n  getAlpha() {\n    return !!this._rctx.contextAttributes.alpha;\n  }\n  getMinimalDepthForArea(e, t, r, i, s) {\n    let o = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : s;\n    const a = i.constrainWindowSize(t, r, s * i.pixelRatio, o * i.pixelRatio),\n      p = this._ensureDepthBuffer(a);\n    this.renderer.readDepthPixels(i, a, p);\n    let d = Number.MAX_VALUE;\n    for (let n = 0; n < a[2] * a[3]; n++) {\n      const e = R(4 * n, p, i.nearFar);\n      d > e && e !== i.nearFar[0] && e !== i.nearFar[1] && (d = e);\n    }\n    if (n(e)) {\n      const s = e.pickDepth(t * i.pixelRatio, r * i.pixelRatio, i);\n      n(s) && d > s && s !== i.nearFar[0] && s !== i.nearFar[1] && (d = s);\n    }\n    return d === Number.MAX_VALUE ? void 0 : d;\n  }\n  _ensureDepthBuffer(e) {\n    const t = 4 * e[2] * e[3];\n    return (a(this._tmpDepthBuffer) || this._tmpDepthBuffer.byteLength < t) && (this._tmpDepthBuffer = new Uint8Array(t)), this._tmpDepthBuffer;\n  }\n  async reloadShaders() {\n    O(), await this._shaderTechniqueRepository.reloadAll(), this.requestRender();\n  }\n  _registerFrameTask(e) {\n    const t = e.view.state;\n    let r = !1,\n      i = f.BACKGROUND,\n      s = !1;\n    const o = {\n      preRender: _ref => {\n        let {\n          time: s\n        } = _ref;\n        r = this.updating, i = this._needsUpdate ? f.UPDATE : f.BACKGROUND, e.commitSyncLayers();\n        const o = c(s - this._lastAnimationUpdate);\n        if (o > this.renderer.animationTimestep || n(t.forcedAnimationTime) || r || this._needsRender) {\n          const e = c(o / this.renderer.animationTimeDilation),\n            r = new v(t.camera, e, t.forcedAnimationTime);\n          this.renderer.updateAnimation(r) && this.requestRender(f.BACKGROUND), this._lastAnimationUpdate = s;\n        }\n      },\n      render: _ref2 => {\n        let {\n          time: e\n        } = _ref2;\n        if ((this._needsRender || !this._idleSuspend || !this.renderer.isCameraFinal || this._needsWaterReflectionUpdate) && t.camera.fullWidth > 0 && t.camera.fullHeight > 0) {\n          const r = this._needsUpdate && this._idleSuspend && this.renderer.isCameraFinal;\n          this._needsRender = !1, this._needsUpdate = !1, this._needsWaterReflectionUpdate = !1, this.renderer.render(null, null, t, y.ON, e), s = !0, r && this.renderer.hasWaterReflection && (this.requestRender(f.BACKGROUND), this._needsWaterReflectionUpdate = !0);\n        }\n      },\n      update: _ref3 => {\n        let {\n          time: e\n        } = _ref3;\n        const r = new q(t.camera, this.renderer.hasSlicePlane || this._magnifierHelper.enabled);\n        this._textureRepository.update(), this._screenshotManager.update(r, e);\n      },\n      finish: () => {\n        s && (this.renderer.finish(t.mode === L.IDLE ? i : f.UPDATE), s = !1);\n      }\n    };\n    this._frameTask = h(o);\n  }\n  _initializeContext(e) {\n    const t = e.options;\n    this._canvas = t.canvas, this._canvas || (this._canvas = document.createElement(\"canvas\")), this._canvas.setAttribute(\"style\", \"width: 100%; height:100%; display:block;\");\n    const r = {\n        alpha: t.alpha || !1,\n        premultipliedAlpha: !0,\n        antialias: !1,\n        depth: !0,\n        stencil: null == t.stencil || t.stencil,\n        powerPreference: \"high-performance\",\n        preserveDrawingBuffer: t.preserveDrawingBuffer ?? !1\n      },\n      s = H(\"3d\", this._canvas, r);\n    if (a(s)) {\n      const e = has(\"esri-force-webgl\");\n      i.getLogger(this.declaredClass).error(e);\n    } else this._rctx = this._newRenderingContext(s, e), this._loadShaderOnlyExtensions(), !t.alpha && this._rctx.contextAttributes.alpha && i.getLogger(this.declaredClass).error(\"WebGL context has alpha channel even though no alpha channel was requested\"), !this._rctx.contextAttributes.alpha && has(\"safari\") >= 11 && (this._container.style.backgroundColor = \"black\"), this._container.appendChild(this._canvas);\n  }\n  _newRenderingContext(e, t) {\n    const r = {\n        disabledExtensions: t.options.deactivatedWebGLExtensions || {},\n        debugWebGLExtensions: t.options.debugWebGLExtensions || {},\n        maxAnisotropy: 8\n      },\n      i = (e, r) => t.view.resourceController.memoryController.newCache(e, r);\n    if (S.enabled) {\n      let t = E.get(e);\n      return t ? (t.configure(r), t.newCache = i, t.ref(), t) : (t = new T(e, r, i), E.set(e, t), t.ref(), t);\n    }\n    return new T(e, r, i);\n  }\n  _loadShaderOnlyExtensions() {\n    this._rctx.capabilities.enable(\"standardDerivatives\"), this._rctx.capabilities.enable(\"shaderTextureLOD\"), this._rctx.capabilities.enable(\"textureFloat\");\n  }\n  getObjectAndLayerIdColor(e) {\n    return n(this.objectAndLayerIdRenderHelper) ? this.objectAndLayerIdRenderHelper.getObjectAndLayerIdColor(e) : null;\n  }\n  get componentObjectCollection() {\n    return a(this._componentObjectCollection) && (this._componentObjectCollection = new u(this.renderer.renderPassManager, this._viewingMode)), this._componentObjectCollection;\n  }\n  set componentObjectCollection(e) {\n    this._componentObjectCollection = e;\n  }\n};\ne([l({\n  type: Boolean,\n  readOnly: !0\n})], B.prototype, \"updating\", null), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_rctx\", void 0), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_container\", void 0), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_canvas\", void 0), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_stippleTextureRepository\", void 0), e([l({\n  autoDestroy: !0\n})], B.prototype, \"waterTextureRepository\", void 0), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_magnifierHelper\", void 0), e([l({\n  readOnly: !0\n})], B.prototype, \"objectAndLayerIdRenderHelper\", void 0), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_textureRepository\", void 0), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_compositingHelper\", void 0), e([l({\n  autoDestroy: !0,\n  readOnly: !0\n})], B.prototype, \"renderer\", void 0), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_screenshotManager\", void 0), e([l()], B.prototype, \"componentObjectCollection\", null), e([l({\n  autoDestroy: !0\n})], B.prototype, \"_componentObjectCollection\", void 0), e([l()], B.prototype, \"_needsUpdate\", void 0), e([l()], B.prototype, \"_needsWaterReflectionUpdate\", void 0), B = e([m(\"esri.views.3d.webgl-engine.parts.RenderView\")], B);\nconst E = D();\nexport { B as RenderView };","map":{"version":3,"names":["_","e","t","r","has","i","removeMaybe","s","destroyMaybe","o","isSome","n","isNone","a","watch","p","initial","d","addFrameTask","h","Milliseconds","c","property","l","subclass","m","ComponentObjectCollection","u","ShaderTechniqueRepository","RenderRequestType","f","Decorations","y","g","textureToDepth","R","GLMaterialRepository","x","MagnifierHelper","b","UpdateParameters","v","ObjectAndLayerIdRenderHelper","j","Renderer","w","RenderingContext","T","TextureRepository","A","StippleTextureRepository","C","WaterTextureRepository","U","getContextCache","D","removeLoadedShaderModules","O","ScreenshotManager","M","ScreenshotContext","q","contextCache","S","RenderState","L","createContextOrErrorHTML","H","B","constructor","events","waterTextureRepository","_magnifierHelper","objectAndLayerIdRenderHelper","_needsUpdate","_needsRender","_idleSuspend","_needsWaterReflectionUpdate","_lastAnimationUpdate","_container","container","_viewingMode","viewingMode","_initializeContext","updating","requestRender","on","_stippleTextureRepository","_rctx","_shaderTechniqueRepository","rctx","stippleTextureRepository","_textureRepository","_materialRepository","_compositingHelper","renderer","renderScene","render","camera","contentCamera","mode","IDLE","requestRenderScene","prepareOverlay","options","screenshot","renderOverlay","_screenshotManager","emit","disposeOffscreenBuffers","_registerFrameTask","normalizeCtorArgs","destroy","contains","_canvas","removeChild","_frameTask","performanceInfo","gl","textureMemory","getUsedTextureMemory","renderbufferMemory","getUsedRenderbufferMemory","VBOMemory","getUsedVBOMemory","arguments","length","undefined","UPDATE","textureRepository","compositingHelper","magnifier","setIdleSuspend","renderingContext","capabilities","canvas","takeScreenshot","then","takeScreenshotWithOID","objectAndLayerIdColor","getAlpha","contextAttributes","alpha","getMinimalDepthForArea","constrainWindowSize","pixelRatio","_ensureDepthBuffer","readDepthPixels","Number","MAX_VALUE","nearFar","pickDepth","_tmpDepthBuffer","byteLength","Uint8Array","reloadShaders","reloadAll","view","state","BACKGROUND","preRender","_ref","time","commitSyncLayers","animationTimestep","forcedAnimationTime","animationTimeDilation","updateAnimation","_ref2","isCameraFinal","fullWidth","fullHeight","ON","hasWaterReflection","update","_ref3","hasSlicePlane","enabled","finish","document","createElement","setAttribute","premultipliedAlpha","antialias","depth","stencil","powerPreference","preserveDrawingBuffer","getLogger","declaredClass","error","_newRenderingContext","_loadShaderOnlyExtensions","style","backgroundColor","appendChild","disabledExtensions","deactivatedWebGLExtensions","debugWebGLExtensions","maxAnisotropy","resourceController","memoryController","newCache","E","get","configure","ref","set","enable","getObjectAndLayerIdColor","componentObjectCollection","_componentObjectCollection","renderPassManager","type","Boolean","readOnly","prototype","autoDestroy","RenderView"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/parts/RenderView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Evented.js\";import has from\"../../../../core/has.js\";import i from\"../../../../core/Logger.js\";import{removeMaybe as s,destroyMaybe as o,isSome as n,isNone as a}from\"../../../../core/maybe.js\";import{watch as p,initial as d}from\"../../../../core/reactiveUtils.js\";import{addFrameTask as h}from\"../../../../core/scheduling.js\";import{Milliseconds as c}from\"../../../../core/time.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as m}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ComponentObjectCollection as u}from\"../collections/Component/ComponentObjectCollection.js\";import{ShaderTechniqueRepository as _}from\"../core/shaderTechnique/ShaderTechniqueRepository.js\";import{RenderRequestType as f,Decorations as y}from\"../lib/basicInterfaces.js\";import g from\"../lib/CompositingHelper.js\";import{textureToDepth as R}from\"../lib/depthRangeUtils.js\";import{GLMaterialRepository as x}from\"../lib/GLMaterialRepository.js\";import{MagnifierHelper as b}from\"../lib/MagnifierHelper.js\";import{UpdateParameters as v}from\"../lib/Material.js\";import{ObjectAndLayerIdRenderHelper as j}from\"../lib/ObjectAndLayerIdRenderHelper.js\";import{Renderer as w}from\"../lib/Renderer.js\";import{RenderingContext as T}from\"../lib/RenderingContext.js\";import{TextureRepository as A}from\"../lib/TextureRepository.js\";import{StippleTextureRepository as C}from\"../materials/StippleTextureRepository.js\";import{WaterTextureRepository as U}from\"../materials/internal/WaterTextureRepository.js\";import{getContextCache as D}from\"./contextCache.js\";import{removeLoadedShaderModules as O}from\"./requireUtils.js\";import{ScreenshotManager as M,ScreenshotContext as q}from\"./ScreenshotManager.js\";import{contextCache as S}from\"./testUtils.js\";import{RenderState as L}from\"../../../support/RenderState.js\";import{createContextOrErrorHTML as H}from\"../../../webgl/context-util.js\";let B=class extends t{constructor(e){super({}),this.events=new r,this.waterTextureRepository=new U,this._magnifierHelper=new b,this.objectAndLayerIdRenderHelper=has(\"enable-feature:objectAndLayerId-rendering\")?new j:null,this._needsUpdate=!0,this._needsRender=!0,this._idleSuspend=!0,this._needsWaterReflectionUpdate=!1,this._lastAnimationUpdate=0,this._container=e.container,this._viewingMode=e.viewingMode,this._initializeContext(e),p((()=>this.waterTextureRepository?.updating),(()=>this.requestRender()),d),this._magnifierHelper.events.on(\"request-render\",(()=>this.requestRender())),this._stippleTextureRepository=new C(this._rctx),this._shaderTechniqueRepository=new _({rctx:this._rctx,viewingMode:e.viewingMode,stippleTextureRepository:this._stippleTextureRepository,waterTextureRepository:this.waterTextureRepository}),this._textureRepository=new A(e,this._shaderTechniqueRepository,this._rctx),this._textureRepository.events.on(\"changed\",(e=>this.requestRender(e))),this._materialRepository=new x(this._textureRepository,this._shaderTechniqueRepository,(()=>this.requestRender()),(()=>this.requestRender())),this._compositingHelper=new g(this._rctx,this._shaderTechniqueRepository),this.renderer=new w(e,this._materialRepository,this._textureRepository,this._shaderTechniqueRepository,this._rctx,this._compositingHelper,this._magnifierHelper,(e=>this.requestRender(e)));const t={renderScene:(e,t,r,i,s)=>this.renderer.render(e,t,{camera:r,contentCamera:r,mode:L.IDLE},i,s),requestRenderScene:e=>this.requestRender(e),prepareOverlay:()=>e.options.screenshot.prepareOverlay(),renderOverlay:(t,r)=>e.options.screenshot.renderOverlay(t,r)};this._screenshotManager=new M(this._rctx,t,(e=>this.events.emit(\"force-camera-for-screenshot\",e)),(()=>this.renderer.disposeOffscreenBuffers())),this._registerFrameTask(e)}normalizeCtorArgs(){return{}}destroy(){this._container.contains(this._canvas)&&this._container.removeChild(this._canvas),this._frameTask=s(this._frameTask),this._shaderTechniqueRepository=o(this._shaderTechniqueRepository)}get performanceInfo(){const e=this._rctx.gl;return{renderer:this.renderer.performanceInfo,textureMemory:void 0!==e.getUsedTextureMemory?e.getUsedTextureMemory():void 0,renderbufferMemory:void 0!==e.getUsedRenderbufferMemory?e.getUsedRenderbufferMemory():void 0,VBOMemory:void 0!==e.getUsedVBOMemory?e.getUsedVBOMemory():void 0}}requestRender(e=f.UPDATE){this._needsRender=!0,e===f.UPDATE&&(this._needsUpdate=!0)}get updating(){return this._needsUpdate||this._needsWaterReflectionUpdate||this.renderer.updating||this._textureRepository.updating||this.waterTextureRepository.updating||this._magnifierHelper.updating}get textureRepository(){return this._textureRepository}get compositingHelper(){return this._compositingHelper}set magnifier(e){this._magnifierHelper.magnifier=e}setIdleSuspend(e){this._idleSuspend!==e&&(this._idleSuspend=e,this.requestRender())}get renderingContext(){return this._rctx}get capabilities(){return this._rctx.capabilities}get canvas(){return this._canvas}takeScreenshot(e){return this._screenshotManager.takeScreenshot(e).then((e=>e[0]))}takeScreenshotWithOID(e){return e.objectAndLayerIdColor=!0,this._screenshotManager.takeScreenshot(e)}getAlpha(){return!!this._rctx.contextAttributes.alpha}getMinimalDepthForArea(e,t,r,i,s,o=s){const a=i.constrainWindowSize(t,r,s*i.pixelRatio,o*i.pixelRatio),p=this._ensureDepthBuffer(a);this.renderer.readDepthPixels(i,a,p);let d=Number.MAX_VALUE;for(let n=0;n<a[2]*a[3];n++){const e=R(4*n,p,i.nearFar);d>e&&e!==i.nearFar[0]&&e!==i.nearFar[1]&&(d=e)}if(n(e)){const s=e.pickDepth(t*i.pixelRatio,r*i.pixelRatio,i);n(s)&&d>s&&s!==i.nearFar[0]&&s!==i.nearFar[1]&&(d=s)}return d===Number.MAX_VALUE?void 0:d}_ensureDepthBuffer(e){const t=4*e[2]*e[3];return(a(this._tmpDepthBuffer)||this._tmpDepthBuffer.byteLength<t)&&(this._tmpDepthBuffer=new Uint8Array(t)),this._tmpDepthBuffer}async reloadShaders(){O(),await this._shaderTechniqueRepository.reloadAll(),this.requestRender()}_registerFrameTask(e){const t=e.view.state;let r=!1,i=f.BACKGROUND,s=!1;const o={preRender:({time:s})=>{r=this.updating,i=this._needsUpdate?f.UPDATE:f.BACKGROUND,e.commitSyncLayers();const o=c(s-this._lastAnimationUpdate);if(o>this.renderer.animationTimestep||n(t.forcedAnimationTime)||r||this._needsRender){const e=c(o/this.renderer.animationTimeDilation),r=new v(t.camera,e,t.forcedAnimationTime);this.renderer.updateAnimation(r)&&this.requestRender(f.BACKGROUND),this._lastAnimationUpdate=s}},render:({time:e})=>{if((this._needsRender||!this._idleSuspend||!this.renderer.isCameraFinal||this._needsWaterReflectionUpdate)&&t.camera.fullWidth>0&&t.camera.fullHeight>0){const r=this._needsUpdate&&this._idleSuspend&&this.renderer.isCameraFinal;this._needsRender=!1,this._needsUpdate=!1,this._needsWaterReflectionUpdate=!1,this.renderer.render(null,null,t,y.ON,e),s=!0,r&&this.renderer.hasWaterReflection&&(this.requestRender(f.BACKGROUND),this._needsWaterReflectionUpdate=!0)}},update:({time:e})=>{const r=new q(t.camera,this.renderer.hasSlicePlane||this._magnifierHelper.enabled);this._textureRepository.update(),this._screenshotManager.update(r,e)},finish:()=>{s&&(this.renderer.finish(t.mode===L.IDLE?i:f.UPDATE),s=!1)}};this._frameTask=h(o)}_initializeContext(e){const t=e.options;this._canvas=t.canvas,this._canvas||(this._canvas=document.createElement(\"canvas\")),this._canvas.setAttribute(\"style\",\"width: 100%; height:100%; display:block;\");const r={alpha:t.alpha||!1,premultipliedAlpha:!0,antialias:!1,depth:!0,stencil:null==t.stencil||t.stencil,powerPreference:\"high-performance\",preserveDrawingBuffer:t.preserveDrawingBuffer??!1},s=H(\"3d\",this._canvas,r);if(a(s)){const e=has(\"esri-force-webgl\");i.getLogger(this.declaredClass).error(e)}else this._rctx=this._newRenderingContext(s,e),this._loadShaderOnlyExtensions(),!t.alpha&&this._rctx.contextAttributes.alpha&&i.getLogger(this.declaredClass).error(\"WebGL context has alpha channel even though no alpha channel was requested\"),!this._rctx.contextAttributes.alpha&&has(\"safari\")>=11&&(this._container.style.backgroundColor=\"black\"),this._container.appendChild(this._canvas)}_newRenderingContext(e,t){const r={disabledExtensions:t.options.deactivatedWebGLExtensions||{},debugWebGLExtensions:t.options.debugWebGLExtensions||{},maxAnisotropy:8},i=(e,r)=>t.view.resourceController.memoryController.newCache(e,r);if(S.enabled){let t=E.get(e);return t?(t.configure(r),t.newCache=i,t.ref(),t):(t=new T(e,r,i),E.set(e,t),t.ref(),t)}return new T(e,r,i)}_loadShaderOnlyExtensions(){this._rctx.capabilities.enable(\"standardDerivatives\"),this._rctx.capabilities.enable(\"shaderTextureLOD\"),this._rctx.capabilities.enable(\"textureFloat\")}getObjectAndLayerIdColor(e){return n(this.objectAndLayerIdRenderHelper)?this.objectAndLayerIdRenderHelper.getObjectAndLayerIdColor(e):null}get componentObjectCollection(){return a(this._componentObjectCollection)&&(this._componentObjectCollection=new u(this.renderer.renderPassManager,this._viewingMode)),this._componentObjectCollection}set componentObjectCollection(e){this._componentObjectCollection=e}};e([l({type:Boolean,readOnly:!0})],B.prototype,\"updating\",null),e([l({autoDestroy:!0})],B.prototype,\"_rctx\",void 0),e([l({autoDestroy:!0})],B.prototype,\"_container\",void 0),e([l({autoDestroy:!0})],B.prototype,\"_canvas\",void 0),e([l({autoDestroy:!0})],B.prototype,\"_stippleTextureRepository\",void 0),e([l({autoDestroy:!0})],B.prototype,\"waterTextureRepository\",void 0),e([l({autoDestroy:!0})],B.prototype,\"_magnifierHelper\",void 0),e([l({readOnly:!0})],B.prototype,\"objectAndLayerIdRenderHelper\",void 0),e([l({autoDestroy:!0})],B.prototype,\"_textureRepository\",void 0),e([l({autoDestroy:!0})],B.prototype,\"_compositingHelper\",void 0),e([l({autoDestroy:!0,readOnly:!0})],B.prototype,\"renderer\",void 0),e([l({autoDestroy:!0})],B.prototype,\"_screenshotManager\",void 0),e([l()],B.prototype,\"componentObjectCollection\",null),e([l({autoDestroy:!0})],B.prototype,\"_componentObjectCollection\",void 0),e([l()],B.prototype,\"_needsUpdate\",void 0),e([l()],B.prototype,\"_needsWaterReflectionUpdate\",void 0),B=e([m(\"esri.views.3d.webgl-engine.parts.RenderView\")],B);const E=D();export{B as RenderView};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}