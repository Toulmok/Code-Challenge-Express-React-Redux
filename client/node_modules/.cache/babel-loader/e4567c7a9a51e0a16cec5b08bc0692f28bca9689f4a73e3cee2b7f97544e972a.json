{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { DateTimeReferenceFieldIndex as e } from \"../../arcadeTimeUtils.js\";\nimport t from \"./cache.js\";\nimport { FeatureSetError as s, FeatureSetErrorCodes as r } from \"./errorsupport.js\";\nimport n from \"./FeatureSetIterator.js\";\nimport i from \"./IdSet.js\";\nimport { FeatureServiceDatabaseType as a, layerGeometryEsriConstants as l, IdState as u, convertSquareUnitsToCode as h, convertLinearUnitsToCode as c, esriFieldToJson as o, layerGeometryEsriRestConstants as d } from \"./shared.js\";\nimport { max as _, min as p, sum as f, variance as g, stdev as m, mean as y, distinct as F, count as b } from \"./stats.js\";\nimport { isPromiseLike as I } from \"../../../core/promiseUtils.js\";\nimport { WhereClause as w } from \"../../../core/sql/WhereClause.js\";\nimport { union as S, geodesicArea as T, planarArea as P, geodesicLength as x, planarLength as k } from \"../../../geometry/geometryEngineAsync.js\";\nimport D from \"../../../geometry/SpatialReference.js\";\nimport C from \"../../../layers/support/FieldsIndex.js\";\nclass v {\n  constructor(e) {\n    this.recentlyUsedQueries = null, this.featureSetQueryInterceptor = null, this._idstates = [], this._parent = null, this._wset = null, this._mainSetInUse = null, this._maxProcessing = 200, this._maxQuery = 500, this._totalCount = -1, this._databaseType = a.NotEvaluated, this._databaseTypeProbed = null, this.declaredRootClass = \"esri.arcade.featureset.support.FeatureSet\", this._featureCache = [], this.typeIdField = null, this.types = null, this.fields = null, this.geometryType = \"\", this.objectIdField = \"\", this.globalIdField = \"\", this.spatialReference = null, this.hasM = !1, this.hasZ = !1, this._transparent = !1, this.loaded = !1, this._loadPromise = null, this._fieldsIndex = null, this._dateFieldIndex = null, e && e.lrucache && (this.recentlyUsedQueries = e.lrucache), e && e.interceptor && (this.featureSetQueryInterceptor = e.interceptor);\n  }\n  optimisePagingFeatureQueries(e) {\n    this._parent && this._parent.optimisePagingFeatureQueries(e);\n  }\n  _hasMemorySource() {\n    return !0;\n  }\n  prop(e, t) {\n    return void 0 === t ? this[e] : (void 0 !== this[e] && (this[e] = t), this);\n  }\n  end() {\n    return null !== this._parent && !0 === this._parent._transparent ? this._parent.end() : this._parent;\n  }\n  _ensureLoaded() {\n    return this.load();\n  }\n  load() {\n    return null === this._loadPromise && (this._loadPromise = this.loadImpl()), this._loadPromise;\n  }\n  async loadImpl() {\n    return !0 === this._parent?.loaded ? (this._initialiseFeatureSet(), this) : (await this._parent?.load(), this._initialiseFeatureSet(), this);\n  }\n  _initialiseFeatureSet() {\n    null !== this._parent ? (this.fields = this._parent.fields.slice(0), this.geometryType = this._parent.geometryType, this.objectIdField = this._parent.objectIdField, this.globalIdField = this._parent.globalIdField, this.spatialReference = this._parent.spatialReference, this.hasM = this._parent.hasM, this.hasZ = this._parent.hasZ, this.typeIdField = this._parent.typeIdField, this.types = this._parent.types) : (this.fields = [], this.typeIdField = \"\", this.objectIdField = \"\", this.globalIdField = \"\", this.spatialReference = new D({\n      wkid: 4326\n    }), this.geometryType = l.point);\n  }\n  getField(e, t) {\n    let s;\n    return (t = t || this.fields) && (e = e.toLowerCase(), t.some(t => (t && t.name.toLowerCase() === e && (s = t), !!s))), s;\n  }\n  getFieldsIndex() {\n    return null === this._fieldsIndex && (this._fieldsIndex = new C(this.fields)), this._fieldsIndex;\n  }\n  _maxProcessingRate() {\n    return null !== this._parent ? Math.min(this._maxProcessing, this._parent._maxProcessingRate()) : Math.min(this._maxProcessing, this._maxQueryRate());\n  }\n  _maxQueryRate() {\n    return null !== this._parent ? Math.max(this._maxQuery, this._parent._maxQueryRate()) : this._maxQuery;\n  }\n  _checkCancelled(e) {\n    if (null != e && e.aborted) throw new s(r.Cancelled);\n  }\n  nativeCapabilities() {\n    return this._parent.nativeCapabilities();\n  }\n  async _canDoAggregates(e, t, s, r, n) {\n    return null !== this._parent && this._parent._canDoAggregates(e, t, s, r, n);\n  }\n  async _getAggregatePagesDataSourceDefinition(e, t, n, i, a, l, u) {\n    if (null === this._parent) throw new s(r.NeverReach);\n    return this._parent._getAggregatePagesDataSourceDefinition(e, t, n, i, a, l, u);\n  }\n  async _getAgregagtePhysicalPage(e, t, n) {\n    if (null === this._parent) throw new s(r.NeverReach);\n    return this._parent._getAgregagtePhysicalPage(e, t, n);\n  }\n  async databaseType() {\n    if (this._databaseType === a.NotEvaluated) {\n      if (null !== t.applicationCache) {\n        const e = t.applicationCache.getDatabaseType(this._cacheableFeatureSetSourceKey());\n        if (null !== e) return e;\n      }\n      if (null !== this._databaseTypeProbed) return this._databaseTypeProbed;\n      try {\n        this._databaseTypeProbed = this._getDatabaseTypeImpl(), null !== t.applicationCache && t.applicationCache.setDatabaseType(this._cacheableFeatureSetSourceKey(), this._databaseTypeProbed);\n      } catch (e) {\n        throw null !== t.applicationCache && t.applicationCache.clearDatabaseType(this._cacheableFeatureSetSourceKey()), e;\n      }\n      return this._databaseTypeProbed;\n    }\n    return this._databaseType;\n  }\n  async _getDatabaseTypeImpl() {\n    const e = [{\n      thetype: a.SqlServer,\n      testwhere: \"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0\"\n    }, {\n      thetype: a.Oracle,\n      testwhere: \"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0\"\n    }, {\n      thetype: a.StandardisedNoInterval,\n      testwhere: \"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0\"\n    }];\n    for (const t of e) {\n      if (!0 === (await this._runDatabaseProbe(t.testwhere))) return t.thetype;\n    }\n    return a.StandardisedNoInterval;\n  }\n  _cacheableFeatureSetSourceKey() {\n    return \"MUSTBESET\";\n  }\n  async _runDatabaseProbe(e) {\n    if (null !== this._parent) return this._parent._runDatabaseProbe(e);\n    throw new s(r.NotImplemented);\n  }\n  isTable() {\n    return this._parent?.isTable() ?? !1;\n  }\n  _featureFromCache(e) {\n    if (void 0 !== this._featureCache[e]) return this._featureCache[e];\n  }\n  _isInFeatureSet(e) {\n    return u.Unknown;\n  }\n  _getSet(e) {\n    throw new s(r.NotImplemented);\n  }\n  async _getFeature(e, t, n) {\n    if (this._checkCancelled(n), void 0 !== this._featureFromCache(t)) return this._featureFromCache(t);\n    if (await this._getFeatures(e, t, this._maxProcessingRate(), n), this._checkCancelled(n), void 0 !== this._featureFromCache(t)) return this._featureFromCache(t);\n    throw new s(r.MissingFeatures);\n  }\n  async _getFeatureBatch(e, t) {\n    this._checkCancelled(t);\n    const s = new i([], e, !1, null),\n      r = [];\n    await this._getFeatures(s, -1, e.length, t), this._checkCancelled(t);\n    for (const n of e) void 0 !== this._featureFromCache(n) && r.push(this._featureFromCache(n));\n    return r;\n  }\n  async _getFeatures(e, t, s, r) {\n    return \"success\";\n  }\n  _getFilteredSet(e, t, n, i, a) {\n    throw new s(r.NotImplemented);\n  }\n  async _refineSetBlock(e, t, s) {\n    if (!0 === this._checkIfNeedToExpandCandidatePage(e, this._maxQueryRate())) return await this._expandPagedSet(e, this._maxQueryRate(), 0, 0, s), this._refineSetBlock(e, t, s);\n    this._checkCancelled(s);\n    const r = e._candidates.length;\n    this._refineKnowns(e, t);\n    let n = r - e._candidates.length;\n    if (0 === e._candidates.length) return e;\n    if (n >= t) return e;\n    if (await this._refineIfParentKnown(e, t - n, s), this._checkCancelled(s), this._refineKnowns(e, t - n), n = r - e._candidates.length, n < t && e._candidates.length > 0) {\n      const r = t - n,\n        i = this._prepareFetchAndRefineSet(e._candidates);\n      return await this._fetchAndRefineFeatures(i, i.length > r ? r : e._candidates.length, s), this._checkCancelled(s), this._refineKnowns(e, t - n), e;\n    }\n    return e;\n  }\n  _fetchAndRefineFeatures(e, t, s) {\n    return null;\n  }\n  _prepareFetchAndRefineSet(e) {\n    const t = [];\n    for (let s = 0; s < e.length; s++) this._isPhysicalFeature(e[s]) && t.push(e[s]);\n    return t;\n  }\n  _isPhysicalFeature(e) {\n    return null === this._parent || this._parent._isPhysicalFeature(e);\n  }\n  _refineKnowns(e, t) {\n    let s = 0,\n      r = null;\n    const n = [];\n    t = this._maxQueryRate();\n    for (let i = 0; i < e._candidates.length && \"GETPAGES\" !== e._candidates[i]; i++) {\n      let a = !1;\n      const l = this._candidateIdTransform(e._candidates[i]);\n      l !== e._candidates[i] && (a = !0);\n      const h = this._isInFeatureSet(l);\n      if (h === u.InFeatureSet) !0 === a ? e._known.includes(l) || (e._known.push(l), s += 1) : (e._known.push(e._candidates[i]), s += 1), null === r ? r = {\n        start: i,\n        end: i\n      } : r.end === i - 1 ? r.end = i : (n.push(r), r = {\n        start: i,\n        end: i\n      });else if (h === u.NotInFeatureSet) null === r ? r = {\n        start: i,\n        end: i\n      } : r.end === i - 1 ? r.end = i : (n.push(r), r = {\n        start: i,\n        end: i\n      }), s += 1;else if (h === u.Unknown && (s += 1, !0 === e._ordered)) break;\n      if (s >= t) break;\n    }\n    null !== r && n.push(r);\n    for (let i = n.length - 1; i >= 0; i--) e._candidates.splice(n[i].start, n[i].end - n[i].start + 1);\n  }\n  _refineIfParentKnown(e, t, s) {\n    const r = new i([], [], e._ordered, null);\n    return r._candidates = e._candidates.slice(0), this._parent._refineSetBlock(r, t, s);\n  }\n  _candidateIdTransform(e) {\n    return this._parent._candidateIdTransform(e);\n  }\n  _checkIfNeedToExpandKnownPage(e, t) {\n    if (null === e.pagesDefinition) return !1;\n    let s = 0;\n    for (let r = e._lastFetchedIndex; r < e._known.length; r++) {\n      if (\"GETPAGES\" === e._known[r]) return !0;\n      if (void 0 === this._featureCache[e._known[r]] && (s += 1, s >= t)) break;\n    }\n    return !1;\n  }\n  _checkIfNeedToExpandCandidatePage(e, t) {\n    if (null === e.pagesDefinition) return !1;\n    let s = 0;\n    for (let r = 0; r < e._candidates.length; r++) {\n      if (\"GETPAGES\" === e._candidates[r]) return !0;\n      if (s += 1, s >= t) break;\n    }\n    return !1;\n  }\n  async _expandPagedSet(e, t, n, i, a) {\n    if (null === this._parent) throw new s(r.NotImplemented);\n    return this._parent._expandPagedSet(e, t, n, i, a);\n  }\n  async _expandPagedSetFeatureSet(e, t, s, r, n) {\n    if (e._known.length > 0 && \"GETPAGES\" === e._known[e._known.length - 1] && (r = 1), 0 === r && e._candidates.length > 0 && \"GETPAGES\" === e._candidates[e._candidates.length - 1] && (r = 2), 0 === r) return \"finished\";\n    const i = await this._getPage(e, r, n);\n    return s + i < t ? this._expandPagedSet(e, t, s + i, 0, n) : \"success\";\n  }\n  async _getPage(e, t, s) {\n    const r = 1 === t ? e._known : e._candidates;\n    if (e.pagesDefinition.internal.set.length > e.pagesDefinition.resultOffset || !0 === e.pagesDefinition.internal.fullyResolved) {\n      r.length = r.length - 1;\n      let t = 0;\n      for (let n = 0; n < e.pagesDefinition.resultRecordCount && !(e.pagesDefinition.resultOffset + n >= e.pagesDefinition.internal.set.length); n++) r[r.length] = e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset + n], t++;\n      e.pagesDefinition.resultOffset += t;\n      let s = !1;\n      return !0 === e.pagesDefinition.internal.fullyResolved && e.pagesDefinition.internal.set.length <= e.pagesDefinition.resultOffset && (s = !0), !1 === s && r.push(\"GETPAGES\"), t;\n    }\n    return await this._getPhysicalPage(e, t, s), this._getPage(e, t, s);\n  }\n  _getPhysicalPage(e, t, s) {\n    return null;\n  }\n  _clonePageDefinition(e) {\n    return null === this._parent ? null : this._parent._clonePageDefinition(e);\n  }\n  _first(e) {\n    return this.iterator(e).next();\n  }\n  first(e) {\n    return this._first(e);\n  }\n  async calculateStatistic(e, t, s, r) {\n    await this._ensureLoaded();\n    let n = await this._stat(e, t, \"\", null, null, s, r);\n    return !1 === n.calculated && (n = await this._manualStat(e, t, s, r)), n.result;\n  }\n  async _manualStat(e, t, s, r) {\n    let n = null;\n    switch (e.toLowerCase()) {\n      case \"count\":\n        return n = await b(this, r), {\n          calculated: !0,\n          result: n\n        };\n      case \"distinct\":\n        return n = await F(this, t, s, r), {\n          calculated: !0,\n          result: n\n        };\n      case \"avg\":\n      case \"mean\":\n        return n = await y(this, t, r), {\n          calculated: !0,\n          result: n\n        };\n      case \"stdev\":\n        return n = await m(this, t, r), {\n          calculated: !0,\n          result: n\n        };\n      case \"variance\":\n        return n = await g(this, t, r), {\n          calculated: !0,\n          result: n\n        };\n      case \"sum\":\n        return n = await f(this, t, r), {\n          calculated: !0,\n          result: n\n        };\n      case \"min\":\n        return n = await p(this, t, r), {\n          calculated: !0,\n          result: n\n        };\n      case \"max\":\n        return n = await _(this, t, r), {\n          calculated: !0,\n          result: n\n        };\n      default:\n        return {\n          calculated: !0,\n          result: 0\n        };\n    }\n  }\n  async _stat(e, t, s, r, n, i, a) {\n    const l = await this._parent._stat(e, t, s, r, n, i, a);\n    return !1 === l.calculated ? null === n && \"\" === s && null === r ? this._manualStat(e, t, i, a) : {\n      calculated: !1\n    } : l;\n  }\n  _unionAllGeomSelf(e) {\n    const t = this.iterator(this._defaultTracker(e)),\n      s = [];\n    return new Promise((e, r) => {\n      this._unionShapeInBatches(s, t, e, r);\n    });\n  }\n  _unionAllGeom(e) {\n    return new Promise((t, s) => {\n      const r = this.iterator(this._defaultTracker(e)),\n        n = [];\n      this._unionShapeInBatches(n, r, t, s);\n    });\n  }\n  _unionShapeInBatches(e, t, s, r) {\n    t.next().then(n => {\n      try {\n        null !== n && null !== n.geometry && e.push(n.geometry), e.length > 30 || null === n && e.length > 1 ? S(e).then(i => {\n          try {\n            null === n ? s(i) : (e = [i], this._unionShapeInBatches(e, t, s, r));\n          } catch (a) {\n            r(a);\n          }\n        }, r) : null === n ? 1 === e.length ? s(e[0]) : s(null) : this._unionShapeInBatches(e, t, s, r);\n      } catch (i) {\n        r(i);\n      }\n    }, r);\n  }\n  iterator(e) {\n    return new n(this, e);\n  }\n  intersection(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    return v._featuresetFunctions.intersection.bind(this)(e, t);\n  }\n  difference(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n    return v._featuresetFunctions.difference.bind(this)(e, t, s);\n  }\n  symmetricDifference(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n    return v._featuresetFunctions.symmetricDifference.bind(this)(e, t, s);\n  }\n  morphShape(e, t) {\n    let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"unknown\";\n    let r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    return v._featuresetFunctions.morphShape.bind(this)(e, t, s, r);\n  }\n  morphShapeAndAttributes(e, t) {\n    let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"unknown\";\n    return v._featuresetFunctions.morphShapeAndAttributes.bind(this)(e, t, s);\n  }\n  union(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    return v._featuresetFunctions.union.bind(this)(e, t);\n  }\n  intersects(e) {\n    return v._featuresetFunctions.intersects.bind(this)(e);\n  }\n  envelopeIntersects(e) {\n    return v._featuresetFunctions.envelopeIntersects.bind(this)(e);\n  }\n  contains(e) {\n    return v._featuresetFunctions.contains.bind(this)(e);\n  }\n  overlaps(e) {\n    return v._featuresetFunctions.overlaps.bind(this)(e);\n  }\n  relate(e, t) {\n    return v._featuresetFunctions.relate.bind(this)(e, t);\n  }\n  within(e) {\n    return v._featuresetFunctions.within.bind(this)(e);\n  }\n  touches(e) {\n    return v._featuresetFunctions.touches.bind(this)(e);\n  }\n  top(e) {\n    return v._featuresetFunctions.top.bind(this)(e);\n  }\n  crosses(e) {\n    return v._featuresetFunctions.crosses.bind(this)(e);\n  }\n  buffer(e, t, s) {\n    let r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n    return v._featuresetFunctions.buffer.bind(this)(e, t, s, r);\n  }\n  filter(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    return v._featuresetFunctions.filter.bind(this)(e, t);\n  }\n  orderBy(e) {\n    return v._featuresetFunctions.orderBy.bind(this)(e);\n  }\n  dissolve(e, t) {\n    return v._featuresetFunctions.dissolve.bind(this)(e, t);\n  }\n  groupby(e, t) {\n    return v._featuresetFunctions.groupby.bind(this)(e, t);\n  }\n  reduce(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    return new Promise((r, n) => {\n      this._reduceImpl(this.iterator(this._defaultTracker(s)), e, t, 0, r, n, 0);\n    });\n  }\n  _reduceImpl(e, t, s, r, n, i, a) {\n    try {\n      if (++a > 1e3) return void setTimeout(() => {\n        a = 0, this._reduceImpl(e, t, s, r, n, i, a);\n      });\n      e.next().then(l => {\n        try {\n          if (null === l) n(s);else {\n            const u = t(s, l, r, this);\n            I(u) ? u.then(s => {\n              this._reduceImpl(e, t, s, r + 1, n, i, a);\n            }, i) : this._reduceImpl(e, t, u, r + 1, n, i, a);\n          }\n        } catch (u) {\n          i(u);\n        }\n      }, i);\n    } catch (l) {\n      i(l);\n    }\n  }\n  removeField(e) {\n    return v._featuresetFunctions.removeField.bind(this)(e);\n  }\n  addField(e, t) {\n    let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    return v._featuresetFunctions.addField.bind(this)(e, t, s);\n  }\n  sumArea(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    const r = h(e);\n    return this.reduce((e, s) => null === s.geometry ? 0 : t ? T(s.geometry, r).then(t => e + t) : P(s.geometry, r).then(t => e + t), 0, s);\n  }\n  sumLength(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    const r = c(e);\n    return this.reduce((e, s) => null === s.geometry ? 0 : t ? x(s.geometry, r).then(t => e + t) : k(s.geometry, r).then(t => e + t), 0, s);\n  }\n  _substituteVars(e, t) {\n    if (null !== t) {\n      const s = {};\n      for (const e in t) s[e.toLowerCase()] = t[e];\n      e.parameters = s;\n    }\n  }\n  async distinct(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1e3;\n    let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let r = arguments.length > 3 ? arguments[3] : undefined;\n    await this.load();\n    const n = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(n, s), this.calculateStatistic(\"distinct\", n, t, this._defaultTracker(r));\n  }\n  async min(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    await this.load();\n    const r = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(r, t), this.calculateStatistic(\"min\", r, -1, this._defaultTracker(s));\n  }\n  async max(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    await this.load();\n    const r = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(r, t), this.calculateStatistic(\"max\", r, -1, this._defaultTracker(s));\n  }\n  async avg(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    await this.load();\n    const r = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(r, t), this.calculateStatistic(\"avg\", r, -1, this._defaultTracker(s));\n  }\n  async sum(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    await this.load();\n    const r = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(r, t), this.calculateStatistic(\"sum\", r, -1, this._defaultTracker(s));\n  }\n  async stdev(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    await this.load();\n    const r = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(r, t), this.calculateStatistic(\"stdev\", r, -1, this._defaultTracker(s));\n  }\n  async variance(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let s = arguments.length > 2 ? arguments[2] : undefined;\n    await this.load();\n    const r = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(r, t), this.calculateStatistic(\"variance\", r, -1, this._defaultTracker(s));\n  }\n  async count(e) {\n    return await this.load(), this.calculateStatistic(\"count\", w.create(\"1\", this.getFieldsIndex()), -1, this._defaultTracker(e));\n  }\n  _defaultTracker(e) {\n    return e || {\n      aborted: !1\n    };\n  }\n  forEach(e, t) {\n    return new Promise((s, r) => {\n      this._forEachImpl(this.iterator(this._defaultTracker(t)), e, this, s, r, 0);\n    });\n  }\n  _forEachImpl(e, t, s, r, n, i) {\n    try {\n      if (++i > 1e3) return void setTimeout(() => {\n        i = 0, this._forEachImpl(e, t, s, r, n, i);\n      }, 0);\n      e.next().then(a => {\n        try {\n          if (null === a) r(s);else {\n            const l = t(a);\n            null == l ? this._forEachImpl(e, t, s, r, n, i) : I(l) ? l.then(() => {\n              try {\n                this._forEachImpl(e, t, s, r, n, i);\n              } catch (a) {\n                n(a);\n              }\n            }, n) : this._forEachImpl(e, t, s, r, n, i);\n          }\n        } catch (l) {\n          n(l);\n        }\n      }, n);\n    } catch (a) {\n      n(a);\n    }\n  }\n  convertToJSON(e) {\n    const t = {\n      layerDefinition: {\n        geometryType: this.geometryType,\n        fields: []\n      },\n      featureSet: {\n        features: [],\n        geometryType: this.geometryType\n      }\n    };\n    for (let s = 0; s < this.fields.length; s++) t.layerDefinition.fields.push(o(this.fields[s]));\n    return this.reduce((e, s) => {\n      const r = {\n        geometry: s.geometry && s.geometry.toJSON(),\n        attributes: {}\n      };\n      for (const t in s.attributes) r.attributes[t] = s.attributes[t];\n      return t.featureSet.features.push(r), 1;\n    }, 0, e).then(() => t);\n  }\n  castToText() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    return \"object, FeatureSet\";\n  }\n  queryAttachments(e, t, s, r, n) {\n    return this._parent.queryAttachments(e, t, s, r, n);\n  }\n  serviceUrl() {\n    return this._parent.serviceUrl();\n  }\n  subtypes() {\n    return this.typeIdField ? {\n      subtypeField: this.typeIdField,\n      subtypes: this.types ? this.types.map(e => ({\n        name: e.name,\n        code: e.id\n      })) : []\n    } : null;\n  }\n  relationshipMetaData() {\n    return this._parent.relationshipMetaData();\n  }\n  get gdbVersion() {\n    return this._parent ? this._parent.gdbVersion : \"\";\n  }\n  schema() {\n    const e = [];\n    for (const t of this.fields) e.push(o(t));\n    return {\n      objectIdField: this.objectIdField,\n      globalIdField: this.globalIdField,\n      geometryType: void 0 === d[this.geometryType] ? \"esriGeometryNull\" : d[this.geometryType],\n      fields: e\n    };\n  }\n  async convertToText(e, t) {\n    if (\"schema\" === e) return await this._ensureLoaded(), JSON.stringify(this.schema());\n    if (\"featureset\" === e) {\n      await this._ensureLoaded();\n      const e = [];\n      await this.reduce((t, s) => {\n        const r = {\n          geometry: s.geometry ? s.geometry.toJSON() : null,\n          attributes: s.attributes\n        };\n        return null !== r.geometry && r.geometry.spatialReference && delete r.geometry.spatialReference, e.push(r), 1;\n      }, 0, t);\n      const s = this.schema();\n      return s.features = e, s.spatialReference = this.spatialReference.toJSON(), JSON.stringify(s);\n    }\n    return this.castToText();\n  }\n  getFeatureByObjectId(e, t) {\n    return this._parent.getFeatureByObjectId(e, t);\n  }\n  getOwningSystemUrl() {\n    return this._parent.getOwningSystemUrl();\n  }\n  getIdentityUser() {\n    return this._parent.getIdentityUser();\n  }\n  getRootFeatureSet() {\n    return null !== this._parent ? this._parent.getRootFeatureSet() : this;\n  }\n  getDataSourceFeatureSet() {\n    return null !== this._parent ? this._parent.getDataSourceFeatureSet() : this;\n  }\n  castAsJson() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    return \"keeptype\" === e?.featureset ? this : \"none\" === e?.featureset ? null : {\n      type: \"FeatureSet\"\n    };\n  }\n  async castAsJsonAsync() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (\"keeptype\" === t?.featureset) return this;\n    if (\"schema\" === t?.featureset) return await this._ensureLoaded(), JSON.parse(JSON.stringify(this.schema()));\n    if (\"none\" === t?.featureset) return null;\n    await this._ensureLoaded();\n    const s = [];\n    await this.reduce((e, r) => {\n      const n = {\n        geometry: r.geometry ? !0 === t?.keepGeometryType ? r.geometry : r.geometry.toJSON() : null,\n        attributes: r.attributes\n      };\n      return null !== n.geometry && n.geometry.spatialReference && !0 !== t?.keepGeometryType && delete n.geometry.spatialReference, s.push(n), 1;\n    }, 0, e);\n    const r = this.schema();\n    return r.features = s, r.spatialReference = !0 === t?.keepGeometryType ? this.spatialReference : this.spatialReference?.toJSON(), r;\n  }\n  get dateTimeReferenceFieldIndex() {\n    return null === this._dateFieldIndex && (this._dateFieldIndex = e.create(this.getFieldsIndex(), this)), this._dateFieldIndex;\n  }\n  fieldTimeZone(e) {\n    return this.dateTimeReferenceFieldIndex.fieldTimeZone(e);\n  }\n  get preferredTimeReference() {\n    return this._parent?.preferredTimeReference ?? null;\n  }\n  get dateFieldsTimeReference() {\n    return this._parent?.dateFieldsTimeReference ?? null;\n  }\n  get datesInUnknownTimezone() {\n    return this._parent.datesInUnknownTimezone;\n  }\n  get editFieldsInfo() {\n    return this._parent?.editFieldsInfo ?? null;\n  }\n  get timeInfo() {\n    return this._parent?.timeInfo ?? null;\n  }\n}\nv._featuresetFunctions = {};\nexport { v as default };","map":{"version":3,"names":["DateTimeReferenceFieldIndex","e","t","FeatureSetError","s","FeatureSetErrorCodes","r","n","i","FeatureServiceDatabaseType","a","layerGeometryEsriConstants","l","IdState","u","convertSquareUnitsToCode","h","convertLinearUnitsToCode","c","esriFieldToJson","o","layerGeometryEsriRestConstants","d","max","_","min","p","sum","f","variance","g","stdev","m","mean","y","distinct","F","count","b","isPromiseLike","I","WhereClause","w","union","S","geodesicArea","T","planarArea","P","geodesicLength","x","planarLength","k","D","C","v","constructor","recentlyUsedQueries","featureSetQueryInterceptor","_idstates","_parent","_wset","_mainSetInUse","_maxProcessing","_maxQuery","_totalCount","_databaseType","NotEvaluated","_databaseTypeProbed","declaredRootClass","_featureCache","typeIdField","types","fields","geometryType","objectIdField","globalIdField","spatialReference","hasM","hasZ","_transparent","loaded","_loadPromise","_fieldsIndex","_dateFieldIndex","lrucache","interceptor","optimisePagingFeatureQueries","_hasMemorySource","prop","end","_ensureLoaded","load","loadImpl","_initialiseFeatureSet","slice","wkid","point","getField","toLowerCase","some","name","getFieldsIndex","_maxProcessingRate","Math","_maxQueryRate","_checkCancelled","aborted","Cancelled","nativeCapabilities","_canDoAggregates","_getAggregatePagesDataSourceDefinition","NeverReach","_getAgregagtePhysicalPage","databaseType","applicationCache","getDatabaseType","_cacheableFeatureSetSourceKey","_getDatabaseTypeImpl","setDatabaseType","clearDatabaseType","thetype","SqlServer","testwhere","Oracle","StandardisedNoInterval","_runDatabaseProbe","NotImplemented","isTable","_featureFromCache","_isInFeatureSet","Unknown","_getSet","_getFeature","_getFeatures","MissingFeatures","_getFeatureBatch","length","push","_getFilteredSet","_refineSetBlock","_checkIfNeedToExpandCandidatePage","_expandPagedSet","_candidates","_refineKnowns","_refineIfParentKnown","_prepareFetchAndRefineSet","_fetchAndRefineFeatures","_isPhysicalFeature","_candidateIdTransform","InFeatureSet","_known","includes","start","NotInFeatureSet","_ordered","splice","_checkIfNeedToExpandKnownPage","pagesDefinition","_lastFetchedIndex","_expandPagedSetFeatureSet","_getPage","internal","set","resultOffset","fullyResolved","resultRecordCount","_getPhysicalPage","_clonePageDefinition","_first","iterator","next","first","calculateStatistic","_stat","calculated","_manualStat","result","_unionAllGeomSelf","_defaultTracker","Promise","_unionShapeInBatches","_unionAllGeom","then","geometry","intersection","arguments","undefined","_featuresetFunctions","bind","difference","symmetricDifference","morphShape","morphShapeAndAttributes","intersects","envelopeIntersects","contains","overlaps","relate","within","touches","top","crosses","buffer","filter","orderBy","dissolve","groupby","reduce","_reduceImpl","setTimeout","removeField","addField","sumArea","sumLength","_substituteVars","parameters","create","avg","forEach","_forEachImpl","convertToJSON","layerDefinition","featureSet","features","toJSON","attributes","castToText","queryAttachments","serviceUrl","subtypes","subtypeField","map","code","id","relationshipMetaData","gdbVersion","schema","convertToText","JSON","stringify","getFeatureByObjectId","getOwningSystemUrl","getIdentityUser","getRootFeatureSet","getDataSourceFeatureSet","castAsJson","featureset","type","castAsJsonAsync","parse","keepGeometryType","dateTimeReferenceFieldIndex","fieldTimeZone","preferredTimeReference","dateFieldsTimeReference","datesInUnknownTimezone","editFieldsInfo","timeInfo","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{DateTimeReferenceFieldIndex as e}from\"../../arcadeTimeUtils.js\";import t from\"./cache.js\";import{FeatureSetError as s,FeatureSetErrorCodes as r}from\"./errorsupport.js\";import n from\"./FeatureSetIterator.js\";import i from\"./IdSet.js\";import{FeatureServiceDatabaseType as a,layerGeometryEsriConstants as l,IdState as u,convertSquareUnitsToCode as h,convertLinearUnitsToCode as c,esriFieldToJson as o,layerGeometryEsriRestConstants as d}from\"./shared.js\";import{max as _,min as p,sum as f,variance as g,stdev as m,mean as y,distinct as F,count as b}from\"./stats.js\";import{isPromiseLike as I}from\"../../../core/promiseUtils.js\";import{WhereClause as w}from\"../../../core/sql/WhereClause.js\";import{union as S,geodesicArea as T,planarArea as P,geodesicLength as x,planarLength as k}from\"../../../geometry/geometryEngineAsync.js\";import D from\"../../../geometry/SpatialReference.js\";import C from\"../../../layers/support/FieldsIndex.js\";class v{constructor(e){this.recentlyUsedQueries=null,this.featureSetQueryInterceptor=null,this._idstates=[],this._parent=null,this._wset=null,this._mainSetInUse=null,this._maxProcessing=200,this._maxQuery=500,this._totalCount=-1,this._databaseType=a.NotEvaluated,this._databaseTypeProbed=null,this.declaredRootClass=\"esri.arcade.featureset.support.FeatureSet\",this._featureCache=[],this.typeIdField=null,this.types=null,this.fields=null,this.geometryType=\"\",this.objectIdField=\"\",this.globalIdField=\"\",this.spatialReference=null,this.hasM=!1,this.hasZ=!1,this._transparent=!1,this.loaded=!1,this._loadPromise=null,this._fieldsIndex=null,this._dateFieldIndex=null,e&&e.lrucache&&(this.recentlyUsedQueries=e.lrucache),e&&e.interceptor&&(this.featureSetQueryInterceptor=e.interceptor)}optimisePagingFeatureQueries(e){this._parent&&this._parent.optimisePagingFeatureQueries(e)}_hasMemorySource(){return!0}prop(e,t){return void 0===t?this[e]:(void 0!==this[e]&&(this[e]=t),this)}end(){return null!==this._parent&&!0===this._parent._transparent?this._parent.end():this._parent}_ensureLoaded(){return this.load()}load(){return null===this._loadPromise&&(this._loadPromise=this.loadImpl()),this._loadPromise}async loadImpl(){return!0===this._parent?.loaded?(this._initialiseFeatureSet(),this):(await(this._parent?.load()),this._initialiseFeatureSet(),this)}_initialiseFeatureSet(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField=\"\",this.objectIdField=\"\",this.globalIdField=\"\",this.spatialReference=new D({wkid:4326}),this.geometryType=l.point)}getField(e,t){let s;return(t=t||this.fields)&&(e=e.toLowerCase(),t.some((t=>(t&&t.name.toLowerCase()===e&&(s=t),!!s)))),s}getFieldsIndex(){return null===this._fieldsIndex&&(this._fieldsIndex=new C(this.fields)),this._fieldsIndex}_maxProcessingRate(){return null!==this._parent?Math.min(this._maxProcessing,this._parent._maxProcessingRate()):Math.min(this._maxProcessing,this._maxQueryRate())}_maxQueryRate(){return null!==this._parent?Math.max(this._maxQuery,this._parent._maxQueryRate()):this._maxQuery}_checkCancelled(e){if(null!=e&&e.aborted)throw new s(r.Cancelled)}nativeCapabilities(){return this._parent.nativeCapabilities()}async _canDoAggregates(e,t,s,r,n){return null!==this._parent&&this._parent._canDoAggregates(e,t,s,r,n)}async _getAggregatePagesDataSourceDefinition(e,t,n,i,a,l,u){if(null===this._parent)throw new s(r.NeverReach);return this._parent._getAggregatePagesDataSourceDefinition(e,t,n,i,a,l,u)}async _getAgregagtePhysicalPage(e,t,n){if(null===this._parent)throw new s(r.NeverReach);return this._parent._getAgregagtePhysicalPage(e,t,n)}async databaseType(){if(this._databaseType===a.NotEvaluated){if(null!==t.applicationCache){const e=t.applicationCache.getDatabaseType(this._cacheableFeatureSetSourceKey());if(null!==e)return e}if(null!==this._databaseTypeProbed)return this._databaseTypeProbed;try{this._databaseTypeProbed=this._getDatabaseTypeImpl(),null!==t.applicationCache&&t.applicationCache.setDatabaseType(this._cacheableFeatureSetSourceKey(),this._databaseTypeProbed)}catch(e){throw null!==t.applicationCache&&t.applicationCache.clearDatabaseType(this._cacheableFeatureSetSourceKey()),e}return this._databaseTypeProbed}return this._databaseType}async _getDatabaseTypeImpl(){const e=[{thetype:a.SqlServer,testwhere:\"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0\"},{thetype:a.Oracle,testwhere:\"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0\"},{thetype:a.StandardisedNoInterval,testwhere:\"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0\"}];for(const t of e){if(!0===await this._runDatabaseProbe(t.testwhere))return t.thetype}return a.StandardisedNoInterval}_cacheableFeatureSetSourceKey(){return\"MUSTBESET\"}async _runDatabaseProbe(e){if(null!==this._parent)return this._parent._runDatabaseProbe(e);throw new s(r.NotImplemented)}isTable(){return this._parent?.isTable()??!1}_featureFromCache(e){if(void 0!==this._featureCache[e])return this._featureCache[e]}_isInFeatureSet(e){return u.Unknown}_getSet(e){throw new s(r.NotImplemented)}async _getFeature(e,t,n){if(this._checkCancelled(n),void 0!==this._featureFromCache(t))return this._featureFromCache(t);if(await this._getFeatures(e,t,this._maxProcessingRate(),n),this._checkCancelled(n),void 0!==this._featureFromCache(t))return this._featureFromCache(t);throw new s(r.MissingFeatures)}async _getFeatureBatch(e,t){this._checkCancelled(t);const s=new i([],e,!1,null),r=[];await this._getFeatures(s,-1,e.length,t),this._checkCancelled(t);for(const n of e)void 0!==this._featureFromCache(n)&&r.push(this._featureFromCache(n));return r}async _getFeatures(e,t,s,r){return\"success\"}_getFilteredSet(e,t,n,i,a){throw new s(r.NotImplemented)}async _refineSetBlock(e,t,s){if(!0===this._checkIfNeedToExpandCandidatePage(e,this._maxQueryRate()))return await this._expandPagedSet(e,this._maxQueryRate(),0,0,s),this._refineSetBlock(e,t,s);this._checkCancelled(s);const r=e._candidates.length;this._refineKnowns(e,t);let n=r-e._candidates.length;if(0===e._candidates.length)return e;if(n>=t)return e;if(await this._refineIfParentKnown(e,t-n,s),this._checkCancelled(s),this._refineKnowns(e,t-n),n=r-e._candidates.length,n<t&&e._candidates.length>0){const r=t-n,i=this._prepareFetchAndRefineSet(e._candidates);return await this._fetchAndRefineFeatures(i,i.length>r?r:e._candidates.length,s),this._checkCancelled(s),this._refineKnowns(e,t-n),e}return e}_fetchAndRefineFeatures(e,t,s){return null}_prepareFetchAndRefineSet(e){const t=[];for(let s=0;s<e.length;s++)this._isPhysicalFeature(e[s])&&t.push(e[s]);return t}_isPhysicalFeature(e){return null===this._parent||this._parent._isPhysicalFeature(e)}_refineKnowns(e,t){let s=0,r=null;const n=[];t=this._maxQueryRate();for(let i=0;i<e._candidates.length&&\"GETPAGES\"!==e._candidates[i];i++){let a=!1;const l=this._candidateIdTransform(e._candidates[i]);l!==e._candidates[i]&&(a=!0);const h=this._isInFeatureSet(l);if(h===u.InFeatureSet)!0===a?e._known.includes(l)||(e._known.push(l),s+=1):(e._known.push(e._candidates[i]),s+=1),null===r?r={start:i,end:i}:r.end===i-1?r.end=i:(n.push(r),r={start:i,end:i});else if(h===u.NotInFeatureSet)null===r?r={start:i,end:i}:r.end===i-1?r.end=i:(n.push(r),r={start:i,end:i}),s+=1;else if(h===u.Unknown&&(s+=1,!0===e._ordered))break;if(s>=t)break}null!==r&&n.push(r);for(let i=n.length-1;i>=0;i--)e._candidates.splice(n[i].start,n[i].end-n[i].start+1)}_refineIfParentKnown(e,t,s){const r=new i([],[],e._ordered,null);return r._candidates=e._candidates.slice(0),this._parent._refineSetBlock(r,t,s)}_candidateIdTransform(e){return this._parent._candidateIdTransform(e)}_checkIfNeedToExpandKnownPage(e,t){if(null===e.pagesDefinition)return!1;let s=0;for(let r=e._lastFetchedIndex;r<e._known.length;r++){if(\"GETPAGES\"===e._known[r])return!0;if(void 0===this._featureCache[e._known[r]]&&(s+=1,s>=t))break}return!1}_checkIfNeedToExpandCandidatePage(e,t){if(null===e.pagesDefinition)return!1;let s=0;for(let r=0;r<e._candidates.length;r++){if(\"GETPAGES\"===e._candidates[r])return!0;if(s+=1,s>=t)break}return!1}async _expandPagedSet(e,t,n,i,a){if(null===this._parent)throw new s(r.NotImplemented);return this._parent._expandPagedSet(e,t,n,i,a)}async _expandPagedSetFeatureSet(e,t,s,r,n){if(e._known.length>0&&\"GETPAGES\"===e._known[e._known.length-1]&&(r=1),0===r&&e._candidates.length>0&&\"GETPAGES\"===e._candidates[e._candidates.length-1]&&(r=2),0===r)return\"finished\";const i=await this._getPage(e,r,n);return s+i<t?this._expandPagedSet(e,t,s+i,0,n):\"success\"}async _getPage(e,t,s){const r=1===t?e._known:e._candidates;if(e.pagesDefinition.internal.set.length>e.pagesDefinition.resultOffset||!0===e.pagesDefinition.internal.fullyResolved){r.length=r.length-1;let t=0;for(let n=0;n<e.pagesDefinition.resultRecordCount&&!(e.pagesDefinition.resultOffset+n>=e.pagesDefinition.internal.set.length);n++)r[r.length]=e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset+n],t++;e.pagesDefinition.resultOffset+=t;let s=!1;return!0===e.pagesDefinition.internal.fullyResolved&&e.pagesDefinition.internal.set.length<=e.pagesDefinition.resultOffset&&(s=!0),!1===s&&r.push(\"GETPAGES\"),t}return await this._getPhysicalPage(e,t,s),this._getPage(e,t,s)}_getPhysicalPage(e,t,s){return null}_clonePageDefinition(e){return null===this._parent?null:this._parent._clonePageDefinition(e)}_first(e){return this.iterator(e).next()}first(e){return this._first(e)}async calculateStatistic(e,t,s,r){await this._ensureLoaded();let n=await this._stat(e,t,\"\",null,null,s,r);return!1===n.calculated&&(n=await this._manualStat(e,t,s,r)),n.result}async _manualStat(e,t,s,r){let n=null;switch(e.toLowerCase()){case\"count\":return n=await b(this,r),{calculated:!0,result:n};case\"distinct\":return n=await F(this,t,s,r),{calculated:!0,result:n};case\"avg\":case\"mean\":return n=await y(this,t,r),{calculated:!0,result:n};case\"stdev\":return n=await m(this,t,r),{calculated:!0,result:n};case\"variance\":return n=await g(this,t,r),{calculated:!0,result:n};case\"sum\":return n=await f(this,t,r),{calculated:!0,result:n};case\"min\":return n=await p(this,t,r),{calculated:!0,result:n};case\"max\":return n=await _(this,t,r),{calculated:!0,result:n};default:return{calculated:!0,result:0}}}async _stat(e,t,s,r,n,i,a){const l=await this._parent._stat(e,t,s,r,n,i,a);return!1===l.calculated?null===n&&\"\"===s&&null===r?this._manualStat(e,t,i,a):{calculated:!1}:l}_unionAllGeomSelf(e){const t=this.iterator(this._defaultTracker(e)),s=[];return new Promise(((e,r)=>{this._unionShapeInBatches(s,t,e,r)}))}_unionAllGeom(e){return new Promise(((t,s)=>{const r=this.iterator(this._defaultTracker(e)),n=[];this._unionShapeInBatches(n,r,t,s)}))}_unionShapeInBatches(e,t,s,r){t.next().then((n=>{try{null!==n&&null!==n.geometry&&e.push(n.geometry),e.length>30||null===n&&e.length>1?S(e).then((i=>{try{null===n?s(i):(e=[i],this._unionShapeInBatches(e,t,s,r))}catch(a){r(a)}}),r):null===n?1===e.length?s(e[0]):s(null):this._unionShapeInBatches(e,t,s,r)}catch(i){r(i)}}),r)}iterator(e){return new n(this,e)}intersection(e,t=!1){return v._featuresetFunctions.intersection.bind(this)(e,t)}difference(e,t=!1,s=!0){return v._featuresetFunctions.difference.bind(this)(e,t,s)}symmetricDifference(e,t=!1,s=!0){return v._featuresetFunctions.symmetricDifference.bind(this)(e,t,s)}morphShape(e,t,s=\"unknown\",r=null){return v._featuresetFunctions.morphShape.bind(this)(e,t,s,r)}morphShapeAndAttributes(e,t,s=\"unknown\"){return v._featuresetFunctions.morphShapeAndAttributes.bind(this)(e,t,s)}union(e,t=!1){return v._featuresetFunctions.union.bind(this)(e,t)}intersects(e){return v._featuresetFunctions.intersects.bind(this)(e)}envelopeIntersects(e){return v._featuresetFunctions.envelopeIntersects.bind(this)(e)}contains(e){return v._featuresetFunctions.contains.bind(this)(e)}overlaps(e){return v._featuresetFunctions.overlaps.bind(this)(e)}relate(e,t){return v._featuresetFunctions.relate.bind(this)(e,t)}within(e){return v._featuresetFunctions.within.bind(this)(e)}touches(e){return v._featuresetFunctions.touches.bind(this)(e)}top(e){return v._featuresetFunctions.top.bind(this)(e)}crosses(e){return v._featuresetFunctions.crosses.bind(this)(e)}buffer(e,t,s,r=!0){return v._featuresetFunctions.buffer.bind(this)(e,t,s,r)}filter(e,t=null){return v._featuresetFunctions.filter.bind(this)(e,t)}orderBy(e){return v._featuresetFunctions.orderBy.bind(this)(e)}dissolve(e,t){return v._featuresetFunctions.dissolve.bind(this)(e,t)}groupby(e,t){return v._featuresetFunctions.groupby.bind(this)(e,t)}reduce(e,t=null,s){return new Promise(((r,n)=>{this._reduceImpl(this.iterator(this._defaultTracker(s)),e,t,0,r,n,0)}))}_reduceImpl(e,t,s,r,n,i,a){try{if(++a>1e3)return void setTimeout((()=>{a=0,this._reduceImpl(e,t,s,r,n,i,a)}));e.next().then((l=>{try{if(null===l)n(s);else{const u=t(s,l,r,this);I(u)?u.then((s=>{this._reduceImpl(e,t,s,r+1,n,i,a)}),i):this._reduceImpl(e,t,u,r+1,n,i,a)}}catch(u){i(u)}}),i)}catch(l){i(l)}}removeField(e){return v._featuresetFunctions.removeField.bind(this)(e)}addField(e,t,s=null){return v._featuresetFunctions.addField.bind(this)(e,t,s)}sumArea(e,t=!1,s){const r=h(e);return this.reduce(((e,s)=>null===s.geometry?0:t?T(s.geometry,r).then((t=>e+t)):P(s.geometry,r).then((t=>e+t))),0,s)}sumLength(e,t=!1,s){const r=c(e);return this.reduce(((e,s)=>null===s.geometry?0:t?x(s.geometry,r).then((t=>e+t)):k(s.geometry,r).then((t=>e+t))),0,s)}_substituteVars(e,t){if(null!==t){const s={};for(const e in t)s[e.toLowerCase()]=t[e];e.parameters=s}}async distinct(e,t=1e3,s=null,r){await this.load();const n=w.create(e,this.getFieldsIndex());return this._substituteVars(n,s),this.calculateStatistic(\"distinct\",n,t,this._defaultTracker(r))}async min(e,t=null,s){await this.load();const r=w.create(e,this.getFieldsIndex());return this._substituteVars(r,t),this.calculateStatistic(\"min\",r,-1,this._defaultTracker(s))}async max(e,t=null,s){await this.load();const r=w.create(e,this.getFieldsIndex());return this._substituteVars(r,t),this.calculateStatistic(\"max\",r,-1,this._defaultTracker(s))}async avg(e,t=null,s){await this.load();const r=w.create(e,this.getFieldsIndex());return this._substituteVars(r,t),this.calculateStatistic(\"avg\",r,-1,this._defaultTracker(s))}async sum(e,t=null,s){await this.load();const r=w.create(e,this.getFieldsIndex());return this._substituteVars(r,t),this.calculateStatistic(\"sum\",r,-1,this._defaultTracker(s))}async stdev(e,t=null,s){await this.load();const r=w.create(e,this.getFieldsIndex());return this._substituteVars(r,t),this.calculateStatistic(\"stdev\",r,-1,this._defaultTracker(s))}async variance(e,t=null,s){await this.load();const r=w.create(e,this.getFieldsIndex());return this._substituteVars(r,t),this.calculateStatistic(\"variance\",r,-1,this._defaultTracker(s))}async count(e){return await this.load(),this.calculateStatistic(\"count\",w.create(\"1\",this.getFieldsIndex()),-1,this._defaultTracker(e))}_defaultTracker(e){return e||{aborted:!1}}forEach(e,t){return new Promise(((s,r)=>{this._forEachImpl(this.iterator(this._defaultTracker(t)),e,this,s,r,0)}))}_forEachImpl(e,t,s,r,n,i){try{if(++i>1e3)return void setTimeout((()=>{i=0,this._forEachImpl(e,t,s,r,n,i)}),0);e.next().then((a=>{try{if(null===a)r(s);else{const l=t(a);null==l?this._forEachImpl(e,t,s,r,n,i):I(l)?l.then((()=>{try{this._forEachImpl(e,t,s,r,n,i)}catch(a){n(a)}}),n):this._forEachImpl(e,t,s,r,n,i)}}catch(l){n(l)}}),n)}catch(a){n(a)}}convertToJSON(e){const t={layerDefinition:{geometryType:this.geometryType,fields:[]},featureSet:{features:[],geometryType:this.geometryType}};for(let s=0;s<this.fields.length;s++)t.layerDefinition.fields.push(o(this.fields[s]));return this.reduce(((e,s)=>{const r={geometry:s.geometry&&s.geometry.toJSON(),attributes:{}};for(const t in s.attributes)r.attributes[t]=s.attributes[t];return t.featureSet.features.push(r),1}),0,e).then((()=>t))}castToText(e=!1){return\"object, FeatureSet\"}queryAttachments(e,t,s,r,n){return this._parent.queryAttachments(e,t,s,r,n)}serviceUrl(){return this._parent.serviceUrl()}subtypes(){return this.typeIdField?{subtypeField:this.typeIdField,subtypes:this.types?this.types.map((e=>({name:e.name,code:e.id}))):[]}:null}relationshipMetaData(){return this._parent.relationshipMetaData()}get gdbVersion(){return this._parent?this._parent.gdbVersion:\"\"}schema(){const e=[];for(const t of this.fields)e.push(o(t));return{objectIdField:this.objectIdField,globalIdField:this.globalIdField,geometryType:void 0===d[this.geometryType]?\"esriGeometryNull\":d[this.geometryType],fields:e}}async convertToText(e,t){if(\"schema\"===e)return await this._ensureLoaded(),JSON.stringify(this.schema());if(\"featureset\"===e){await this._ensureLoaded();const e=[];await this.reduce(((t,s)=>{const r={geometry:s.geometry?s.geometry.toJSON():null,attributes:s.attributes};return null!==r.geometry&&r.geometry.spatialReference&&delete r.geometry.spatialReference,e.push(r),1}),0,t);const s=this.schema();return s.features=e,s.spatialReference=this.spatialReference.toJSON(),JSON.stringify(s)}return this.castToText()}getFeatureByObjectId(e,t){return this._parent.getFeatureByObjectId(e,t)}getOwningSystemUrl(){return this._parent.getOwningSystemUrl()}getIdentityUser(){return this._parent.getIdentityUser()}getRootFeatureSet(){return null!==this._parent?this._parent.getRootFeatureSet():this}getDataSourceFeatureSet(){return null!==this._parent?this._parent.getDataSourceFeatureSet():this}castAsJson(e=null){return\"keeptype\"===e?.featureset?this:\"none\"===e?.featureset?null:{type:\"FeatureSet\"}}async castAsJsonAsync(e=null,t=null){if(\"keeptype\"===t?.featureset)return this;if(\"schema\"===t?.featureset)return await this._ensureLoaded(),JSON.parse(JSON.stringify(this.schema()));if(\"none\"===t?.featureset)return null;await this._ensureLoaded();const s=[];await this.reduce(((e,r)=>{const n={geometry:r.geometry?!0===t?.keepGeometryType?r.geometry:r.geometry.toJSON():null,attributes:r.attributes};return null!==n.geometry&&n.geometry.spatialReference&&!0!==t?.keepGeometryType&&delete n.geometry.spatialReference,s.push(n),1}),0,e);const r=this.schema();return r.features=s,r.spatialReference=!0===t?.keepGeometryType?this.spatialReference:this.spatialReference?.toJSON(),r}get dateTimeReferenceFieldIndex(){return null===this._dateFieldIndex&&(this._dateFieldIndex=e.create(this.getFieldsIndex(),this)),this._dateFieldIndex}fieldTimeZone(e){return this.dateTimeReferenceFieldIndex.fieldTimeZone(e)}get preferredTimeReference(){return this._parent?.preferredTimeReference??null}get dateFieldsTimeReference(){return this._parent?.dateFieldsTimeReference??null}get datesInUnknownTimezone(){return this._parent.datesInUnknownTimezone}get editFieldsInfo(){return this._parent?.editFieldsInfo??null}get timeInfo(){return this._parent?.timeInfo??null}}v._featuresetFunctions={};export{v as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}