{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../Color.js\";\nimport \"../../../../intl.js\";\nimport i from \"../../../../core/Accessor.js\";\nimport { getAccentColor as s, getTextHaloColor as n, getTextColor as o } from \"../../../../core/analysisThemeUtils.js\";\nimport a from \"../../../../core/Handles.js\";\nimport { nextHighestPowerOfTen as r, deg2rad as l } from \"../../../../core/mathUtils.js\";\nimport { isNone as c, destroyMaybe as d, isSome as h } from \"../../../../core/maybe.js\";\nimport { formatDecimal as m, formatImperialLength as u, formatImperialVerticalLength as g, formatMetricLength as p, formatMetricVerticalLength as _ } from \"../../../../core/quantityFormatUtils.js\";\nimport { toUnit as v } from \"../../../../core/quantityUtils.js\";\nimport { watch as b, syncAndInitial as L } from \"../../../../core/reactiveUtils.js\";\nimport { createRenderScreenPointArray3 as w, createRenderScreenPointArray as S } from \"../../../../core/screenUtils.js\";\nimport { preferredImperialLengthUnit as y, convertUnit as f } from \"../../../../core/unitUtils.js\";\nimport { property as A } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as P } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { h as V } from \"../../../../chunks/vec2.js\";\nimport { g as j, a as E } from \"../../../../chunks/vec3.js\";\nimport { c as z } from \"../../../../chunks/vec3f64.js\";\nimport { MeasurementMode as M } from \"../interfaces.js\";\nimport { ViewMode as D, VisualElementOrientation as O } from \"./interfaces.js\";\nimport { screenSpaceTangent as G } from \"../support/viewUtils.js\";\nimport { LabelVisualElement as x, mirrorPosition as C } from \"../../interactive/visualElements/LabelVisualElement.js\";\nimport { LineVisualElement as T } from \"../../interactive/visualElements/LineVisualElement.js\";\nimport { MeasurementArrowVisualElement as H } from \"../../interactive/visualElements/MeasurementArrowVisualElement.js\";\nimport { RightAngleQuadVisualElement as U } from \"../../interactive/visualElements/RightAngleQuadVisualElement.js\";\nimport { GeodesicSegment as k, EuclideanSegment as R } from \"../../interactive/visualElements/support/Segment.js\";\nimport { RenderOccludedFlag as F } from \"../../webgl-engine/lib/Material.js\";\nimport { createStipplePatternSimple as B } from \"../../webgl-engine/materials/lineStippleUtils.js\";\nimport { onLocaleChange as Q } from \"../../../../intl/locale.js\";\nimport { fetchMessageBundle as q } from \"../../../../intl/messages.js\";\nlet W = class extends i {\n  get visible() {\n    return this.analysisView.visible;\n  }\n  get viewMode() {\n    const {\n      elevationAlignedStartPoint: e,\n      elevationAlignedEndPoint: t\n    } = this.analysisView;\n    if (c(e) || c(t) || e.equals(t)) return D.None;\n    const i = this.analysisView.result;\n    if (c(i)) return D.Direct;\n    if (\"geodesic\" === i.mode) return this._requiresGeodesicGuideAt(this._startPosition) || this._requiresGeodesicGuideAt(this._endPosition) ? D.ProjectedGeodesic : D.Direct;\n    const {\n        verticalDistance: s,\n        horizontalDistance: n\n      } = i,\n      o = s.value,\n      a = n.value;\n    return Math.min(o / a, a / o) < this.triangleCollapseRatioThreshold ? D.Direct : D.Triangle;\n  }\n  get actualVisualizedMeasurement() {\n    if (c(this.analysisView.result)) switch (this.analysisView.measurementMode) {\n      case M.Auto:\n      case M.Euclidean:\n      default:\n        return \"euclidean\";\n      case M.Geodesic:\n        return \"geodesic\";\n    }\n    return this.analysisView.result.mode;\n  }\n  get allowVisualElementsOrientationChange() {\n    return c(this._triangleOrientationOverride);\n  }\n  set allowVisualElementsOrientationChange(e) {\n    c(this._triangleOrientationOverride) !== e && (c(this._triangleOrientationOverride) ? this._triangleOrientationOverride = this._actualVisualElementsOrientation : this._triangleOrientationOverride = null);\n  }\n  get labels() {\n    const e = \"geodesic\" === this.actualVisualizedMeasurement;\n    return {\n      direct: this._segmentLabel,\n      horizontal: e ? this._segmentLabel : this._horizontalLabel,\n      vertical: this._verticalLabel\n    };\n  }\n  constructor(e) {\n    super(e), this._params = {\n      triangleColor: t.toUnitRGBA(s(.75)),\n      triangleLineWidth: 3,\n      geodesicProjectionLineWidth: 2,\n      geodesicProjectionLineColor: t.toUnitRGBA(s(.75)),\n      guideLineWidth: 2,\n      guideStippleLengthPixels: 6,\n      direcLabelFontSize: 16,\n      horizontalLabelFontSize: 12,\n      verticalLabelFontSize: 12\n    }, this._handles = new a(), this._segmentVisualElement = null, this._triangleVisualElement = null, this._rightAngleQuad = null, this._projectedGeodesicLine = null, this._geodesicStartHint = null, this._geodesicEndHint = null, this._segmentLabel = null, this._verticalLabel = null, this._horizontalLabel = null, this._startPosition = z(), this._endPosition = z(), this._cornerPosition = z(), this._startPositionAtSeaLevel = z(), this._endPositionAtSeaLevel = z(), this._triangleOrientationOverride = null, this.messages = null, this.loadingMessages = !0, this.visualElementOrientation = O.Auto, this.triangleCollapseRatioThreshold = .03;\n  }\n  initialize() {\n    const e = this._params,\n      i = {\n        attached: !0,\n        view: this.view\n      };\n    this._segmentVisualElement = new H({\n      ...i,\n      geometry: null,\n      renderOccluded: F.OccludeAndTransparent\n    }), this._triangleVisualElement = new T({\n      ...i,\n      width: e.triangleLineWidth,\n      color: e.triangleColor,\n      renderOccluded: F.OccludeAndTransparent\n    }), this._rightAngleQuad = new U({\n      ...i,\n      color: t.toUnitRGBA(s(.75)),\n      renderOccluded: F.OccludeAndTransparent\n    });\n    const a = {\n      ...i,\n      polygonOffset: !0,\n      renderOccluded: F.OccludeAndTransparent\n    };\n    this._projectedGeodesicLine = new T({\n      ...a,\n      width: e.geodesicProjectionLineWidth,\n      color: e.geodesicProjectionLineColor,\n      stipplePattern: B(e.guideStippleLengthPixels)\n    }), this._geodesicStartHint = new T({\n      ...a,\n      width: e.guideLineWidth,\n      color: e.geodesicProjectionLineColor,\n      stipplePattern: B(e.guideStippleLengthPixels)\n    }), this._geodesicEndHint = new T({\n      ...a,\n      width: e.guideLineWidth,\n      color: e.geodesicProjectionLineColor,\n      stipplePattern: B(e.guideStippleLengthPixels)\n    });\n    const r = {\n      ...i,\n      backgroundColor: n(.6),\n      textColor: o()\n    };\n    this._segmentLabel = new x({\n      ...r,\n      fontSize: e.direcLabelFontSize\n    }), this._verticalLabel = new x({\n      ...r,\n      fontSize: e.verticalLabelFontSize\n    }), this._horizontalLabel = new x({\n      ...r,\n      fontSize: e.horizontalLabelFontSize\n    }), this._handles.add([b(() => {\n      const {\n          elevationAlignedStartPoint: e,\n          elevationAlignedEndPoint: t\n        } = this.analysisView,\n        i = this.view;\n      return {\n        view: i,\n        camera: i.state.camera,\n        viewMode: this.viewMode,\n        elevationAlignedStartPoint: e,\n        elevationAlignedEndPoint: t,\n        orientation: this._actualVisualElementsOrientation,\n        visualizedMeasurement: this.actualVisualizedMeasurement,\n        stripeLength: this._measurementArrowStripeLength\n      };\n    }, e => this._updateGeometryAndViewMode(e), L), b(() => ({\n      visible: this.visible,\n      viewMode: this.viewMode\n    }), e => this._updateVisualElementVisibility(e), L), b(() => ({\n      text: this._labelsText,\n      visualizedMeasurement: this.actualVisualizedMeasurement\n    }), e => this._updateLabelText(e), L), b(() => ({\n      visible: this.visible,\n      viewMode: this.viewMode\n    }), e => this._updateLabelVisibility(e), L), b(() => this._measurementArrowStripeLength, e => this._updateSegmentStripeLength(e), L), Q(async () => this._updateMessageBundle())]), this._updateMessageBundle();\n  }\n  destroy() {\n    this._handles = d(this._handles), this._segmentVisualElement = d(this._segmentVisualElement), this._triangleVisualElement = d(this._triangleVisualElement), this._rightAngleQuad = d(this._rightAngleQuad), this._projectedGeodesicLine = d(this._projectedGeodesicLine), this._geodesicStartHint = d(this._geodesicStartHint), this._geodesicEndHint = d(this._geodesicEndHint), this._segmentLabel = d(this._segmentLabel), this._verticalLabel = d(this._verticalLabel), this._horizontalLabel = d(this._horizontalLabel), this.set(\"view\", null);\n  }\n  _updateVisualElementVisibility(_ref) {\n    let {\n      visible: e,\n      viewMode: t\n    } = _ref;\n    if (this._segmentVisualElement.visible = !1, this._triangleVisualElement.visible = !1, this._rightAngleQuad.visible = !1, this._projectedGeodesicLine.visible = !1, this._geodesicStartHint.visible = !1, this._geodesicEndHint.visible = !1, e) switch (t) {\n      case D.None:\n        break;\n      case D.Direct:\n        this._segmentVisualElement.visible = !0;\n        break;\n      case D.Triangle:\n        this._segmentVisualElement.visible = !0, this._triangleVisualElement.visible = !0, this._rightAngleQuad.visible = !0;\n        break;\n      case D.ProjectedGeodesic:\n        this._segmentVisualElement.visible = !0, this._projectedGeodesicLine.visible = !0, this._geodesicStartHint.visible = !0, this._geodesicEndHint.visible = !0;\n    }\n  }\n  _updateGeometryAndViewMode(_ref2) {\n    let {\n      view: e,\n      camera: t,\n      viewMode: i,\n      elevationAlignedStartPoint: s,\n      elevationAlignedEndPoint: n,\n      orientation: o,\n      visualizedMeasurement: a,\n      stripeLength: r\n    } = _ref2;\n    const l = e.renderCoordsHelper;\n    if (c(l) || c(s) || c(n) || s.equals(n)) return;\n    let d = this._startPosition,\n      h = this._endPosition;\n    l.toRenderCoords(s, d), l.toRenderCoords(n, h);\n    const m = o === O.AboveSegment ? 1 : -1,\n      u = m * (l.getAltitude(h) - l.getAltitude(d));\n    u < 0 && (d = this._endPosition, h = this._startPosition);\n    const g = \"geodesic\" === a ? new k(this._startPosition, this._endPosition, l.spatialReference) : new R(this._startPosition, this._endPosition);\n    switch (this._segmentVisualElement.geometry = g, this._updateSegmentStripeLength(r), i) {\n      case D.Direct:\n        this._updateSegment(g, o);\n        break;\n      case D.Triangle:\n        this._updateSegmentAndTriangle({\n          view: e,\n          camera: t,\n          segment: g,\n          orientation: o,\n          startPosition: d,\n          endPosition: h,\n          deltaSign: m,\n          altitudeDelta: u\n        });\n        break;\n      case D.ProjectedGeodesic:\n        this._updateSegmentAndProjection({\n          view: e,\n          orientation: o,\n          startPosition: d,\n          endPosition: h\n        });\n    }\n  }\n  _updateSegment(e, t) {\n    this._segmentLabel.anchor = t === O.AboveSegment ? \"top\" : \"bottom\", this._segmentLabel.geometry = {\n      type: \"segment\",\n      segment: e,\n      sampleLocation: \"center\"\n    };\n  }\n  _updateSegmentAndTriangle(_ref3) {\n    let {\n      view: {\n        renderCoordsHelper: e\n      },\n      camera: t,\n      segment: i,\n      orientation: s,\n      startPosition: n,\n      endPosition: o,\n      deltaSign: a,\n      altitudeDelta: r\n    } = _ref3;\n    const l = this._cornerPosition;\n    e.worldUpAtPosition(n, l), j(l, l, a * Math.abs(r)), E(l, l, n), this._triangleVisualElement.geometry = [[[n[0], n[1], n[2]], [l[0], l[1], l[2]], [o[0], o[1], o[2]]]], this._rightAngleQuad.geometry = {\n      previous: n,\n      center: l,\n      next: o\n    };\n    const c = new R(n, l),\n      d = new R(l, o),\n      h = N(n, o, l, s, t);\n    this._segmentLabel.anchor = h.segment, this._segmentLabel.geometry = {\n      type: \"segment\",\n      segment: i,\n      sampleLocation: \"center\"\n    }, this._verticalLabel.geometry = {\n      type: \"segment\",\n      segment: c,\n      sampleLocation: \"center\"\n    }, this._verticalLabel.anchor = h.vertical, this._horizontalLabel.geometry = {\n      type: \"segment\",\n      segment: d,\n      sampleLocation: \"center\"\n    }, this._horizontalLabel.anchor = h.horizontal;\n  }\n  _updateSegmentAndProjection(_ref4) {\n    let {\n      view: {\n        renderCoordsHelper: e\n      },\n      orientation: t,\n      startPosition: i,\n      endPosition: s\n    } = _ref4;\n    e.setAltitude(this._startPositionAtSeaLevel, 0, i), e.setAltitude(this._endPositionAtSeaLevel, 0, s);\n    const n = new k(this._startPositionAtSeaLevel, this._endPositionAtSeaLevel, e.spatialReference);\n    this._projectedGeodesicLine.setGeometryFromSegment(n), this._geodesicStartHint.setGeometryFromSegment(new R(this._startPositionAtSeaLevel, i)), this._geodesicEndHint.setGeometryFromSegment(new R(this._endPositionAtSeaLevel, s)), this._segmentLabel.geometry = {\n      type: \"segment\",\n      segment: n,\n      sampleLocation: \"center\"\n    }, this._segmentLabel.anchor = t === O.AboveSegment ? \"top\" : \"bottom\";\n  }\n  _updateLabelText(_ref5) {\n    let {\n      text: e,\n      visualizedMeasurement: t\n    } = _ref5;\n    h(e) ? (this._segmentLabel.text = \"euclidean\" === t ? e.euclideanDistance : e.geodesicDistance, this._horizontalLabel.text = e.horizontalDistance, this._verticalLabel.text = e.verticalDistance) : (this._segmentLabel.text = null, this._horizontalLabel.text = null, this._verticalLabel.text = null), this.notifyChange(\"labels\");\n  }\n  _updateLabelVisibility(_ref6) {\n    let {\n      visible: e,\n      viewMode: t\n    } = _ref6;\n    const i = this._segmentLabel,\n      s = this._horizontalLabel,\n      n = this._verticalLabel;\n    if (i.visible = !1, s.visible = !1, n.visible = !1, e) switch (t) {\n      case D.Direct:\n        i.visible = !0;\n        break;\n      case D.Triangle:\n        i.visible = !0, s.visible = !0, n.visible = !0;\n        break;\n      case D.ProjectedGeodesic:\n        i.visible = !0;\n      case D.None:\n    }\n  }\n  get _labelsText() {\n    if (this.destroyed) return null;\n    const e = this.messages,\n      t = this.analysisView.result;\n    if (c(t) || c(e)) return null;\n    const {\n        directDistance: i,\n        horizontalDistance: s,\n        verticalDistance: n,\n        geodesicDistance: o\n      } = t,\n      a = this.analysisView.unit,\n      r = e => ({\n        euclideanDistance: \"\",\n        geodesicDistance: \"\",\n        horizontalDistance: \"\",\n        verticalDistance: \"\",\n        ...e\n      });\n    switch (a) {\n      case \"metric\":\n        return r({\n          euclideanDistance: i && p(e, i),\n          geodesicDistance: o && p(e, o),\n          horizontalDistance: s && p(e, s),\n          verticalDistance: n && _(e, n)\n        });\n      case \"imperial\":\n        return r({\n          euclideanDistance: i && u(e, i),\n          geodesicDistance: o && u(e, o),\n          horizontalDistance: s && u(e, s),\n          verticalDistance: n && g(e, n)\n        });\n      default:\n        return r({\n          euclideanDistance: i && m(e, i, a),\n          geodesicDistance: o && m(e, o, a),\n          horizontalDistance: s && m(e, s, a),\n          verticalDistance: n && m(e, n, a)\n        });\n    }\n  }\n  _updateSegmentStripeLength(e) {\n    const t = this._segmentVisualElement;\n    h(e) ? (t.stripeLength = e, t.stripesEnabled = !0) : t.stripesEnabled = !1;\n  }\n  get _actualVisualElementsOrientation() {\n    if (h(this._triangleOrientationOverride)) return this._triangleOrientationOverride;\n    const e = this.visualElementOrientation;\n    return e === O.Auto ? this.view.state.camera.aboveGround ? O.AboveSegment : O.BelowSegment : e;\n  }\n  _requiresGeodesicGuideAt(e) {\n    const t = this.view;\n    if (!t?.state) return !1;\n    const i = t.state.camera,\n      s = t.renderCoordsHelper,\n      n = i.computeScreenPixelSizeAt(e);\n    return s.getAltitude(e) / n >= 10;\n  }\n  get _measurementArrowStripeLength() {\n    const {\n      result: e,\n      unit: t\n    } = this.analysisView;\n    if (c(e)) return null;\n    let i = null;\n    const s = e.directDistance;\n    switch (t) {\n      case \"metric\":\n        i = s && v(s, \"meters\");\n        break;\n      case \"imperial\":\n        i = s && v(s, y(s.value, s.unit));\n        break;\n      default:\n        i = s && v(s, t);\n    }\n    if (c(i)) return null;\n    return r(i.value / 30) * f(1, i.unit, \"meters\");\n  }\n  _updateMessageBundle() {\n    this.loadingMessages = !0, q(\"esri/core/t9n/Units\").then(e => {\n      this.messages = e;\n    }).finally(() => {\n      this.loadingMessages = !1;\n    });\n  }\n  get testData() {\n    return {\n      labels: this.labels,\n      stripeLength: this._segmentVisualElement?.stripeLength\n    };\n  }\n};\nfunction N(e, t, i, s, n) {\n  const o = J,\n    a = K;\n  n.projectToRenderScreen(i, o), n.projectToRenderScreen(t, a);\n  const r = {\n    segment: \"bottom\",\n    horizontal: \"top\",\n    vertical: o[0] < a[0] ? \"left\" : \"right\"\n  };\n  {\n    const s = X,\n      o = Y;\n    if (G(e, i, s, n), G(e, t, o, n), V(s, o) >= I) {\n      const e = Math.sign(s[1]) === Math.sign(o[1]);\n      r.segment = e ? C(r.vertical) : r.vertical;\n    } else {\n      const e = Z;\n      G(i, t, e, n), V(e, o) >= I && (r.segment = Math.sign(e[0]) === Math.sign(o[0]) ? C(r.horizontal) : r.horizontal);\n    }\n  }\n  if (s === O.BelowSegment) {\n    const e = e => \"top\" === e ? \"bottom\" : \"top\";\n    r.segment = e(r.segment), r.horizontal = e(r.horizontal), r.vertical = e(r.vertical);\n  }\n  return r;\n}\ne([A()], W.prototype, \"_triangleOrientationOverride\", void 0), e([A()], W.prototype, \"messages\", void 0), e([A()], W.prototype, \"view\", void 0), e([A()], W.prototype, \"analysis\", void 0), e([A()], W.prototype, \"analysisView\", void 0), e([A()], W.prototype, \"loadingMessages\", void 0), e([A()], W.prototype, \"visible\", null), e([A()], W.prototype, \"viewMode\", null), e([A()], W.prototype, \"actualVisualizedMeasurement\", null), e([A()], W.prototype, \"visualElementOrientation\", void 0), e([A()], W.prototype, \"triangleCollapseRatioThreshold\", void 0), e([A()], W.prototype, \"allowVisualElementsOrientationChange\", null), e([A()], W.prototype, \"labels\", null), e([A()], W.prototype, \"_labelsText\", null), e([A()], W.prototype, \"_actualVisualElementsOrientation\", null), e([A()], W.prototype, \"_measurementArrowStripeLength\", null), W = e([P(\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization\")], W);\nconst I = Math.cos(l(12)),\n  J = w(),\n  K = w(),\n  X = S(),\n  Y = S(),\n  Z = S();\nexport { W as DirectLineMeasurementVisualization };","map":{"version":3,"names":["_","e","t","i","getAccentColor","s","getTextHaloColor","n","getTextColor","o","a","nextHighestPowerOfTen","r","deg2rad","l","isNone","c","destroyMaybe","d","isSome","h","formatDecimal","m","formatImperialLength","u","formatImperialVerticalLength","g","formatMetricLength","p","formatMetricVerticalLength","toUnit","v","watch","b","syncAndInitial","L","createRenderScreenPointArray3","w","createRenderScreenPointArray","S","preferredImperialLengthUnit","y","convertUnit","f","property","A","subclass","P","V","j","E","z","MeasurementMode","M","ViewMode","D","VisualElementOrientation","O","screenSpaceTangent","G","LabelVisualElement","x","mirrorPosition","C","LineVisualElement","T","MeasurementArrowVisualElement","H","RightAngleQuadVisualElement","U","GeodesicSegment","k","EuclideanSegment","R","RenderOccludedFlag","F","createStipplePatternSimple","B","onLocaleChange","Q","fetchMessageBundle","q","W","visible","analysisView","viewMode","elevationAlignedStartPoint","elevationAlignedEndPoint","equals","None","result","Direct","mode","_requiresGeodesicGuideAt","_startPosition","_endPosition","ProjectedGeodesic","verticalDistance","horizontalDistance","value","Math","min","triangleCollapseRatioThreshold","Triangle","actualVisualizedMeasurement","measurementMode","Auto","Euclidean","Geodesic","allowVisualElementsOrientationChange","_triangleOrientationOverride","_actualVisualElementsOrientation","labels","direct","_segmentLabel","horizontal","_horizontalLabel","vertical","_verticalLabel","constructor","_params","triangleColor","toUnitRGBA","triangleLineWidth","geodesicProjectionLineWidth","geodesicProjectionLineColor","guideLineWidth","guideStippleLengthPixels","direcLabelFontSize","horizontalLabelFontSize","verticalLabelFontSize","_handles","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","messages","loadingMessages","visualElementOrientation","initialize","attached","view","geometry","renderOccluded","OccludeAndTransparent","width","color","polygonOffset","stipplePattern","backgroundColor","textColor","fontSize","add","camera","state","orientation","visualizedMeasurement","stripeLength","_measurementArrowStripeLength","_updateGeometryAndViewMode","_updateVisualElementVisibility","text","_labelsText","_updateLabelText","_updateLabelVisibility","_updateSegmentStripeLength","_updateMessageBundle","destroy","set","_ref","_ref2","renderCoordsHelper","toRenderCoords","AboveSegment","getAltitude","spatialReference","_updateSegment","_updateSegmentAndTriangle","segment","startPosition","endPosition","deltaSign","altitudeDelta","_updateSegmentAndProjection","anchor","type","sampleLocation","_ref3","worldUpAtPosition","abs","previous","center","next","N","_ref4","setAltitude","setGeometryFromSegment","_ref5","euclideanDistance","geodesicDistance","notifyChange","_ref6","destroyed","directDistance","unit","stripesEnabled","aboveGround","BelowSegment","computeScreenPixelSizeAt","then","finally","testData","J","K","projectToRenderScreen","X","Y","I","sign","Z","prototype","cos","DirectLineMeasurementVisualization"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/DirectLineMeasurementVisualization.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Color.js\";import\"../../../../intl.js\";import i from\"../../../../core/Accessor.js\";import{getAccentColor as s,getTextHaloColor as n,getTextColor as o}from\"../../../../core/analysisThemeUtils.js\";import a from\"../../../../core/Handles.js\";import{nextHighestPowerOfTen as r,deg2rad as l}from\"../../../../core/mathUtils.js\";import{isNone as c,destroyMaybe as d,isSome as h}from\"../../../../core/maybe.js\";import{formatDecimal as m,formatImperialLength as u,formatImperialVerticalLength as g,formatMetricLength as p,formatMetricVerticalLength as _}from\"../../../../core/quantityFormatUtils.js\";import{toUnit as v}from\"../../../../core/quantityUtils.js\";import{watch as b,syncAndInitial as L}from\"../../../../core/reactiveUtils.js\";import{createRenderScreenPointArray3 as w,createRenderScreenPointArray as S}from\"../../../../core/screenUtils.js\";import{preferredImperialLengthUnit as y,convertUnit as f}from\"../../../../core/unitUtils.js\";import{property as A}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as P}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{h as V}from\"../../../../chunks/vec2.js\";import{g as j,a as E}from\"../../../../chunks/vec3.js\";import{c as z}from\"../../../../chunks/vec3f64.js\";import{MeasurementMode as M}from\"../interfaces.js\";import{ViewMode as D,VisualElementOrientation as O}from\"./interfaces.js\";import{screenSpaceTangent as G}from\"../support/viewUtils.js\";import{LabelVisualElement as x,mirrorPosition as C}from\"../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as T}from\"../../interactive/visualElements/LineVisualElement.js\";import{MeasurementArrowVisualElement as H}from\"../../interactive/visualElements/MeasurementArrowVisualElement.js\";import{RightAngleQuadVisualElement as U}from\"../../interactive/visualElements/RightAngleQuadVisualElement.js\";import{GeodesicSegment as k,EuclideanSegment as R}from\"../../interactive/visualElements/support/Segment.js\";import{RenderOccludedFlag as F}from\"../../webgl-engine/lib/Material.js\";import{createStipplePatternSimple as B}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as Q}from\"../../../../intl/locale.js\";import{fetchMessageBundle as q}from\"../../../../intl/messages.js\";let W=class extends i{get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView;if(c(e)||c(t)||e.equals(t))return D.None;const i=this.analysisView.result;if(c(i))return D.Direct;if(\"geodesic\"===i.mode)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?D.ProjectedGeodesic:D.Direct;const{verticalDistance:s,horizontalDistance:n}=i,o=s.value,a=n.value;return Math.min(o/a,a/o)<this.triangleCollapseRatioThreshold?D.Direct:D.Triangle}get actualVisualizedMeasurement(){if(c(this.analysisView.result))switch(this.analysisView.measurementMode){case M.Auto:case M.Euclidean:default:return\"euclidean\";case M.Geodesic:return\"geodesic\"}return this.analysisView.result.mode}get allowVisualElementsOrientationChange(){return c(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){c(this._triangleOrientationOverride)!==e&&(c(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){const e=\"geodesic\"===this.actualVisualizedMeasurement;return{direct:this._segmentLabel,horizontal:e?this._segmentLabel:this._horizontalLabel,vertical:this._verticalLabel}}constructor(e){super(e),this._params={triangleColor:t.toUnitRGBA(s(.75)),triangleLineWidth:3,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:t.toUnitRGBA(s(.75)),guideLineWidth:2,guideStippleLengthPixels:6,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},this._handles=new a,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=z(),this._endPosition=z(),this._cornerPosition=z(),this._startPositionAtSeaLevel=z(),this._endPositionAtSeaLevel=z(),this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=O.Auto,this.triangleCollapseRatioThreshold=.03}initialize(){const e=this._params,i={attached:!0,view:this.view};this._segmentVisualElement=new H({...i,geometry:null,renderOccluded:F.OccludeAndTransparent}),this._triangleVisualElement=new T({...i,width:e.triangleLineWidth,color:e.triangleColor,renderOccluded:F.OccludeAndTransparent}),this._rightAngleQuad=new U({...i,color:t.toUnitRGBA(s(.75)),renderOccluded:F.OccludeAndTransparent});const a={...i,polygonOffset:!0,renderOccluded:F.OccludeAndTransparent};this._projectedGeodesicLine=new T({...a,width:e.geodesicProjectionLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:B(e.guideStippleLengthPixels)}),this._geodesicStartHint=new T({...a,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:B(e.guideStippleLengthPixels)}),this._geodesicEndHint=new T({...a,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:B(e.guideStippleLengthPixels)});const r={...i,backgroundColor:n(.6),textColor:o()};this._segmentLabel=new x({...r,fontSize:e.direcLabelFontSize}),this._verticalLabel=new x({...r,fontSize:e.verticalLabelFontSize}),this._horizontalLabel=new x({...r,fontSize:e.horizontalLabelFontSize}),this._handles.add([b((()=>{const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}}),(e=>this._updateGeometryAndViewMode(e)),L),b((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateVisualElementVisibility(e)),L),b((()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement})),(e=>this._updateLabelText(e)),L),b((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateLabelVisibility(e)),L),b((()=>this._measurementArrowStripeLength),(e=>this._updateSegmentStripeLength(e)),L),Q((async()=>this._updateMessageBundle()))]),this._updateMessageBundle()}destroy(){this._handles=d(this._handles),this._segmentVisualElement=d(this._segmentVisualElement),this._triangleVisualElement=d(this._triangleVisualElement),this._rightAngleQuad=d(this._rightAngleQuad),this._projectedGeodesicLine=d(this._projectedGeodesicLine),this._geodesicStartHint=d(this._geodesicStartHint),this._geodesicEndHint=d(this._geodesicEndHint),this._segmentLabel=d(this._segmentLabel),this._verticalLabel=d(this._verticalLabel),this._horizontalLabel=d(this._horizontalLabel),this.set(\"view\",null)}_updateVisualElementVisibility({visible:e,viewMode:t}){if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,e)switch(t){case D.None:break;case D.Direct:this._segmentVisualElement.visible=!0;break;case D.Triangle:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case D.ProjectedGeodesic:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode({view:e,camera:t,viewMode:i,elevationAlignedStartPoint:s,elevationAlignedEndPoint:n,orientation:o,visualizedMeasurement:a,stripeLength:r}){const l=e.renderCoordsHelper;if(c(l)||c(s)||c(n)||s.equals(n))return;let d=this._startPosition,h=this._endPosition;l.toRenderCoords(s,d),l.toRenderCoords(n,h);const m=o===O.AboveSegment?1:-1,u=m*(l.getAltitude(h)-l.getAltitude(d));u<0&&(d=this._endPosition,h=this._startPosition);const g=\"geodesic\"===a?new k(this._startPosition,this._endPosition,l.spatialReference):new R(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=g,this._updateSegmentStripeLength(r),i){case D.Direct:this._updateSegment(g,o);break;case D.Triangle:this._updateSegmentAndTriangle({view:e,camera:t,segment:g,orientation:o,startPosition:d,endPosition:h,deltaSign:m,altitudeDelta:u});break;case D.ProjectedGeodesic:this._updateSegmentAndProjection({view:e,orientation:o,startPosition:d,endPosition:h})}}_updateSegment(e,t){this._segmentLabel.anchor=t===O.AboveSegment?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"}}_updateSegmentAndTriangle({view:{renderCoordsHelper:e},camera:t,segment:i,orientation:s,startPosition:n,endPosition:o,deltaSign:a,altitudeDelta:r}){const l=this._cornerPosition;e.worldUpAtPosition(n,l),j(l,l,a*Math.abs(r)),E(l,l,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[l[0],l[1],l[2]],[o[0],o[1],o[2]]]],this._rightAngleQuad.geometry={previous:n,center:l,next:o};const c=new R(n,l),d=new R(l,o),h=N(n,o,l,s,t);this._segmentLabel.anchor=h.segment,this._segmentLabel.geometry={type:\"segment\",segment:i,sampleLocation:\"center\"},this._verticalLabel.geometry={type:\"segment\",segment:c,sampleLocation:\"center\"},this._verticalLabel.anchor=h.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:d,sampleLocation:\"center\"},this._horizontalLabel.anchor=h.horizontal}_updateSegmentAndProjection({view:{renderCoordsHelper:e},orientation:t,startPosition:i,endPosition:s}){e.setAltitude(this._startPositionAtSeaLevel,0,i),e.setAltitude(this._endPositionAtSeaLevel,0,s);const n=new k(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,e.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(n),this._geodesicStartHint.setGeometryFromSegment(new R(this._startPositionAtSeaLevel,i)),this._geodesicEndHint.setGeometryFromSegment(new R(this._endPositionAtSeaLevel,s)),this._segmentLabel.geometry={type:\"segment\",segment:n,sampleLocation:\"center\"},this._segmentLabel.anchor=t===O.AboveSegment?\"top\":\"bottom\"}_updateLabelText({text:e,visualizedMeasurement:t}){h(e)?(this._segmentLabel.text=\"euclidean\"===t?e.euclideanDistance:e.geodesicDistance,this._horizontalLabel.text=e.horizontalDistance,this._verticalLabel.text=e.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange(\"labels\")}_updateLabelVisibility({visible:e,viewMode:t}){const i=this._segmentLabel,s=this._horizontalLabel,n=this._verticalLabel;if(i.visible=!1,s.visible=!1,n.visible=!1,e)switch(t){case D.Direct:i.visible=!0;break;case D.Triangle:i.visible=!0,s.visible=!0,n.visible=!0;break;case D.ProjectedGeodesic:i.visible=!0;case D.None:}}get _labelsText(){if(this.destroyed)return null;const e=this.messages,t=this.analysisView.result;if(c(t)||c(e))return null;const{directDistance:i,horizontalDistance:s,verticalDistance:n,geodesicDistance:o}=t,a=this.analysisView.unit,r=e=>({euclideanDistance:\"\",geodesicDistance:\"\",horizontalDistance:\"\",verticalDistance:\"\",...e});switch(a){case\"metric\":return r({euclideanDistance:i&&p(e,i),geodesicDistance:o&&p(e,o),horizontalDistance:s&&p(e,s),verticalDistance:n&&_(e,n)});case\"imperial\":return r({euclideanDistance:i&&u(e,i),geodesicDistance:o&&u(e,o),horizontalDistance:s&&u(e,s),verticalDistance:n&&g(e,n)});default:return r({euclideanDistance:i&&m(e,i,a),geodesicDistance:o&&m(e,o,a),horizontalDistance:s&&m(e,s,a),verticalDistance:n&&m(e,n,a)})}}_updateSegmentStripeLength(e){const t=this._segmentVisualElement;h(e)?(t.stripeLength=e,t.stripesEnabled=!0):t.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(h(this._triangleOrientationOverride))return this._triangleOrientationOverride;const e=this.visualElementOrientation;return e===O.Auto?this.view.state.camera.aboveGround?O.AboveSegment:O.BelowSegment:e}_requiresGeodesicGuideAt(e){const t=this.view;if(!t?.state)return!1;const i=t.state.camera,s=t.renderCoordsHelper,n=i.computeScreenPixelSizeAt(e);return s.getAltitude(e)/n>=10}get _measurementArrowStripeLength(){const{result:e,unit:t}=this.analysisView;if(c(e))return null;let i=null;const s=e.directDistance;switch(t){case\"metric\":i=s&&v(s,\"meters\");break;case\"imperial\":i=s&&v(s,y(s.value,s.unit));break;default:i=s&&v(s,t)}if(c(i))return null;return r(i.value/30)*f(1,i.unit,\"meters\")}_updateMessageBundle(){this.loadingMessages=!0,q(\"esri/core/t9n/Units\").then((e=>{this.messages=e})).finally((()=>{this.loadingMessages=!1}))}get testData(){return{labels:this.labels,stripeLength:this._segmentVisualElement?.stripeLength}}};function N(e,t,i,s,n){const o=J,a=K;n.projectToRenderScreen(i,o),n.projectToRenderScreen(t,a);const r={segment:\"bottom\",horizontal:\"top\",vertical:o[0]<a[0]?\"left\":\"right\"};{const s=X,o=Y;if(G(e,i,s,n),G(e,t,o,n),V(s,o)>=I){const e=Math.sign(s[1])===Math.sign(o[1]);r.segment=e?C(r.vertical):r.vertical}else{const e=Z;G(i,t,e,n),V(e,o)>=I&&(r.segment=Math.sign(e[0])===Math.sign(o[0])?C(r.horizontal):r.horizontal)}}if(s===O.BelowSegment){const e=e=>\"top\"===e?\"bottom\":\"top\";r.segment=e(r.segment),r.horizontal=e(r.horizontal),r.vertical=e(r.vertical)}return r}e([A()],W.prototype,\"_triangleOrientationOverride\",void 0),e([A()],W.prototype,\"messages\",void 0),e([A()],W.prototype,\"view\",void 0),e([A()],W.prototype,\"analysis\",void 0),e([A()],W.prototype,\"analysisView\",void 0),e([A()],W.prototype,\"loadingMessages\",void 0),e([A()],W.prototype,\"visible\",null),e([A()],W.prototype,\"viewMode\",null),e([A()],W.prototype,\"actualVisualizedMeasurement\",null),e([A()],W.prototype,\"visualElementOrientation\",void 0),e([A()],W.prototype,\"triangleCollapseRatioThreshold\",void 0),e([A()],W.prototype,\"allowVisualElementsOrientationChange\",null),e([A()],W.prototype,\"labels\",null),e([A()],W.prototype,\"_labelsText\",null),e([A()],W.prototype,\"_actualVisualElementsOrientation\",null),e([A()],W.prototype,\"_measurementArrowStripeLength\",null),W=e([P(\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization\")],W);const I=Math.cos(l(12)),J=w(),K=w(),X=S(),Y=S(),Z=S();export{W as DirectLineMeasurementVisualization};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}