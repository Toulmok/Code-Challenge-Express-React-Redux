{"ast":null,"code":"import _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../../core/Logger.js\";\nimport { analyzeCIMResource as t } from \"../../../../../../symbols/cim/cimAnalyzer.js\";\nimport { evaluateValueOrFunction as a } from \"../../../../../../symbols/cim/utils.js\";\nimport s from \"./WGLMeshTemplate.js\";\nvar i = e.getLogger(\"esri.views.2d.engine.webgl.WGLDynamicMeshTemplate\");\nvar r = /*#__PURE__*/function (_s) {\n  _inherits(r, _s);\n  var _super = _createSuper(r);\n  function r(e) {\n    var _this;\n    _classCallCheck(this, r);\n    _this = _super.call(this), _this._ongoingMaterialRequestMap = new Map(), _this._materialCache = new Map(), _this._dynamicPropertyMap = new Map(), _this._cimLayer = e;\n    return _this;\n  }\n  _createClass(r, [{\n    key: \"analyze\",\n    value: function analyze(e, s, _r, n, o) {\n      var _this2 = this;\n      if (o && 0 === o.length) return null;\n      var l = o && o.length > 0,\n        m = s.readLegacyFeature(),\n        c = s.getObjectId(),\n        h = this._materialCache,\n        u = this._cimLayer.materialHash;\n      if (!u) return i.error(\"A Dynamic mesh template must have a material hash value or function!\"), Promise.reject(null);\n      var p = \"function\" == typeof u ? u(m, _r, n, c) : u,\n        g = h.get(p);\n      if (null != g) return Promise.resolve(g);\n      var y = this._ongoingMaterialRequestMap.get(p);\n      if (y) return y;\n      var M = this._cimLayer,\n        d = t(M.cim, this._cimLayer.materialOverrides);\n      d.mosaicHash = p;\n      var f = M.type,\n        _ = M.url,\n        b = {\n          cim: d,\n          type: f,\n          mosaicHash: p,\n          url: _,\n          size: null,\n          dashTemplate: null,\n          text: null,\n          fontName: null,\n          objectId: c,\n          animatedSymbolProperties: null\n        };\n      switch (f) {\n        case \"marker\":\n          b.size = a(M.size, m, _r, n), b.animatedSymbolProperties = a(M.animatedSymbolProperties, m, _r, n);\n          break;\n        case \"line\":\n          b.dashTemplate = M.dashTemplate;\n          break;\n        case \"text\":\n          b.text = a(M.text, m, _r, n), b.fontName = a(M.fontName, m, _r, n);\n      }\n      var L = e.getMosaicItem(b, o).then(function (e) {\n        return l || (_this2._ongoingMaterialRequestMap.delete(p), h.set(p, e)), e;\n      }).catch(function (e) {\n        return _this2._ongoingMaterialRequestMap.delete(p), i.error(\".analyze()\", e.message), null;\n      });\n      return l || this._ongoingMaterialRequestMap.set(p, L), L;\n    }\n  }]);\n  return r;\n}(s);\nexport { r as default };","map":{"version":3,"names":["e","analyzeCIMResource","t","evaluateValueOrFunction","a","s","i","getLogger","r","_s","_inherits","_super","_createSuper","_this","_classCallCheck","call","_ongoingMaterialRequestMap","Map","_materialCache","_dynamicPropertyMap","_cimLayer","_createClass","key","value","analyze","n","o","_this2","length","l","m","readLegacyFeature","c","getObjectId","h","u","materialHash","error","Promise","reject","p","g","get","resolve","y","M","d","cim","materialOverrides","mosaicHash","f","type","_","url","b","size","dashTemplate","text","fontName","objectId","animatedSymbolProperties","L","getMosaicItem","then","delete","set","catch","message","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Logger.js\";import{analyzeCIMResource as t}from\"../../../../../../symbols/cim/cimAnalyzer.js\";import{evaluateValueOrFunction as a}from\"../../../../../../symbols/cim/utils.js\";import s from\"./WGLMeshTemplate.js\";const i=e.getLogger(\"esri.views.2d.engine.webgl.WGLDynamicMeshTemplate\");class r extends s{constructor(e){super(),this._ongoingMaterialRequestMap=new Map,this._materialCache=new Map,this._dynamicPropertyMap=new Map,this._cimLayer=e}analyze(e,s,r,n,o){if(o&&0===o.length)return null;const l=o&&o.length>0,m=s.readLegacyFeature(),c=s.getObjectId(),h=this._materialCache,u=this._cimLayer.materialHash;if(!u)return i.error(\"A Dynamic mesh template must have a material hash value or function!\"),Promise.reject(null);const p=\"function\"==typeof u?u(m,r,n,c):u,g=h.get(p);if(null!=g)return Promise.resolve(g);const y=this._ongoingMaterialRequestMap.get(p);if(y)return y;const M=this._cimLayer,d=t(M.cim,this._cimLayer.materialOverrides);d.mosaicHash=p;const{type:f,url:_}=M,b={cim:d,type:f,mosaicHash:p,url:_,size:null,dashTemplate:null,text:null,fontName:null,objectId:c,animatedSymbolProperties:null};switch(f){case\"marker\":b.size=a(M.size,m,r,n),b.animatedSymbolProperties=a(M.animatedSymbolProperties,m,r,n);break;case\"line\":b.dashTemplate=M.dashTemplate;break;case\"text\":b.text=a(M.text,m,r,n),b.fontName=a(M.fontName,m,r,n)}const L=e.getMosaicItem(b,o).then((e=>(l||(this._ongoingMaterialRequestMap.delete(p),h.set(p,e)),e))).catch((e=>(this._ongoingMaterialRequestMap.delete(p),i.error(\".analyze()\",e.message),null)));return l||this._ongoingMaterialRequestMap.set(p,L),L}}export{r as default};\n"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAC,MAAK,kCAAkC;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,8CAA8C;AAAC,SAAOC,uBAAuB,IAAIC,CAAC,QAAK,wCAAwC;AAAC,OAAOC,CAAC,MAAK,sBAAsB;AAAC,IAAMC,CAAC,GAACN,CAAC,CAACO,SAAS,CAAC,mDAAmD,CAAC;AAAC,IAAMC,CAAC,0BAAAC,EAAA;EAAAC,SAAA,CAAAF,CAAA,EAAAC,EAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,CAAA;EAAW,SAAAA,EAAYR,CAAC,EAAC;IAAA,IAAAa,KAAA;IAAAC,eAAA,OAAAN,CAAA;IAACK,KAAA,GAAAF,MAAA,CAAAI,IAAA,QAAQF,KAAA,CAAKG,0BAA0B,GAAC,IAAIC,GAAG,IAACJ,KAAA,CAAKK,cAAc,GAAC,IAAID,GAAG,IAACJ,KAAA,CAAKM,mBAAmB,GAAC,IAAIF,GAAG,IAACJ,KAAA,CAAKO,SAAS,GAACpB,CAAC;IAAA,OAAAa,KAAA;EAAA;EAACQ,YAAA,CAAAb,CAAA;IAAAc,GAAA;IAAAC,KAAA,WAAAC,QAAQxB,CAAC,EAACK,CAAC,EAACG,EAAC,EAACiB,CAAC,EAACC,CAAC,EAAC;MAAA,IAAAC,MAAA;MAAC,IAAGD,CAAC,IAAE,CAAC,KAAGA,CAAC,CAACE,MAAM,EAAC,OAAO,IAAI;MAAC,IAAMC,CAAC,GAACH,CAAC,IAAEA,CAAC,CAACE,MAAM,GAAC,CAAC;QAACE,CAAC,GAACzB,CAAC,CAAC0B,iBAAiB,EAAE;QAACC,CAAC,GAAC3B,CAAC,CAAC4B,WAAW,EAAE;QAACC,CAAC,GAAC,IAAI,CAAChB,cAAc;QAACiB,CAAC,GAAC,IAAI,CAACf,SAAS,CAACgB,YAAY;MAAC,IAAG,CAACD,CAAC,EAAC,OAAO7B,CAAC,CAAC+B,KAAK,CAAC,sEAAsE,CAAC,EAACC,OAAO,CAACC,MAAM,CAAC,IAAI,CAAC;MAAC,IAAMC,CAAC,GAAC,UAAU,IAAE,OAAOL,CAAC,GAACA,CAAC,CAACL,CAAC,EAACtB,EAAC,EAACiB,CAAC,EAACO,CAAC,CAAC,GAACG,CAAC;QAACM,CAAC,GAACP,CAAC,CAACQ,GAAG,CAACF,CAAC,CAAC;MAAC,IAAG,IAAI,IAAEC,CAAC,EAAC,OAAOH,OAAO,CAACK,OAAO,CAACF,CAAC,CAAC;MAAC,IAAMG,CAAC,GAAC,IAAI,CAAC5B,0BAA0B,CAAC0B,GAAG,CAACF,CAAC,CAAC;MAAC,IAAGI,CAAC,EAAC,OAAOA,CAAC;MAAC,IAAMC,CAAC,GAAC,IAAI,CAACzB,SAAS;QAAC0B,CAAC,GAAC5C,CAAC,CAAC2C,CAAC,CAACE,GAAG,EAAC,IAAI,CAAC3B,SAAS,CAAC4B,iBAAiB,CAAC;MAACF,CAAC,CAACG,UAAU,GAACT,CAAC;MAAC,IAAWU,CAAC,GAAQL,CAAC,CAAfM,IAAI;QAAOC,CAAC,GAAEP,CAAC,CAARQ,GAAG;QAAMC,CAAC,GAAC;UAACP,GAAG,EAACD,CAAC;UAACK,IAAI,EAACD,CAAC;UAACD,UAAU,EAACT,CAAC;UAACa,GAAG,EAACD,CAAC;UAACG,IAAI,EAAC,IAAI;UAACC,YAAY,EAAC,IAAI;UAACC,IAAI,EAAC,IAAI;UAACC,QAAQ,EAAC,IAAI;UAACC,QAAQ,EAAC3B,CAAC;UAAC4B,wBAAwB,EAAC;QAAI,CAAC;MAAC,QAAOV,CAAC;QAAE,KAAI,QAAQ;UAACI,CAAC,CAACC,IAAI,GAACnD,CAAC,CAACyC,CAAC,CAACU,IAAI,EAACzB,CAAC,EAACtB,EAAC,EAACiB,CAAC,CAAC,EAAC6B,CAAC,CAACM,wBAAwB,GAACxD,CAAC,CAACyC,CAAC,CAACe,wBAAwB,EAAC9B,CAAC,EAACtB,EAAC,EAACiB,CAAC,CAAC;UAAC;QAAM,KAAI,MAAM;UAAC6B,CAAC,CAACE,YAAY,GAACX,CAAC,CAACW,YAAY;UAAC;QAAM,KAAI,MAAM;UAACF,CAAC,CAACG,IAAI,GAACrD,CAAC,CAACyC,CAAC,CAACY,IAAI,EAAC3B,CAAC,EAACtB,EAAC,EAACiB,CAAC,CAAC,EAAC6B,CAAC,CAACI,QAAQ,GAACtD,CAAC,CAACyC,CAAC,CAACa,QAAQ,EAAC5B,CAAC,EAACtB,EAAC,EAACiB,CAAC,CAAC;MAAA;MAAC,IAAMoC,CAAC,GAAC7D,CAAC,CAAC8D,aAAa,CAACR,CAAC,EAAC5B,CAAC,CAAC,CAACqC,IAAI,CAAE,UAAA/D,CAAC;QAAA,OAAG6B,CAAC,KAAGF,MAAI,CAACX,0BAA0B,CAACgD,MAAM,CAACxB,CAAC,CAAC,EAACN,CAAC,CAAC+B,GAAG,CAACzB,CAAC,EAACxC,CAAC,CAAC,CAAC,EAACA,CAAC;MAAA,CAAC,CAAE,CAACkE,KAAK,CAAE,UAAAlE,CAAC;QAAA,OAAG2B,MAAI,CAACX,0BAA0B,CAACgD,MAAM,CAACxB,CAAC,CAAC,EAAClC,CAAC,CAAC+B,KAAK,CAAC,YAAY,EAACrC,CAAC,CAACmE,OAAO,CAAC,EAAC,IAAI;MAAA,CAAC,CAAE;MAAC,OAAOtC,CAAC,IAAE,IAAI,CAACb,0BAA0B,CAACiD,GAAG,CAACzB,CAAC,EAACqB,CAAC,CAAC,EAACA,CAAC;IAAA;EAAC;EAAA,OAAArD,CAAA;AAAA,EAAlwCH,CAAC;AAAkwC,SAAOG,CAAC,IAAI4D,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}