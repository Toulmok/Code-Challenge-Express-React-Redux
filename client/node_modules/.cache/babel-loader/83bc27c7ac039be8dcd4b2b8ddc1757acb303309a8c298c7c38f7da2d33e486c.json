{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { unwrap as e } from \"../../../../../core/maybe.js\";\nimport t from \"../../../../../core/PooledArray.js\";\nimport { TransparencyPassType as r } from \"../../lib/TransparencyPassType.js\";\nimport { DataType as i } from \"../../../../webgl/enums.js\";\nvar s;\n!function (e) {\n  e[e.FrontToBack = 0] = \"FrontToBack\", e[e.BackToFront = 1] = \"BackToFront\";\n}(s || (s = {}));\nclass o {\n  constructor(e, r) {\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : s.FrontToBack;\n    this._rctx = e, this._techniqueRepository = r, this._sorting = i, this._draws = new t({\n      initialSize: 32,\n      allocator: e => e || {\n        material: null,\n        geometry: null,\n        geometryRanges: null,\n        bindDrawParams: null,\n        depthSquaredHint: 0,\n        indexType: 0\n      }\n    }), this._previouslyBoundDraw = new Map();\n  }\n  submitDraw(t, r, i, s) {\n    const o = this._draws.pushNew();\n    o.geometry = r, o.geometryRanges = i, o.material = t, o.depthSquaredHint = s, o.indexType = (r.indexed ? e(r.vao.indexBuffer).indexType : null) ?? 0;\n  }\n  dispatch(e, t) {\n    const i = this._rctx;\n    this._previouslyBoundDraw.clear();\n    let s = null;\n    const o = this._draws.map(r => r.material.prepareTechnique(this._techniqueRepository, e, t, r.geometry.parameters)),\n      n = this._draws.length;\n    for (let l = 0; l < n; l++) {\n      const n = o[l];\n      n === s && n.configuration.transparencyPassType === r.NONE || (i.bindTechnique(n, e, t), s = n);\n      const p = this._draws.data[l],\n        c = p.geometry;\n      i.bindVAO(c.vao), this._previouslyBoundDraw.get(n) !== p.material && (n.program.bindDraw(p.material, t, e), this._previouslyBoundDraw.set(n, p.material));\n      const d = p.geometryRanges,\n        m = d.length;\n      if (0 !== p.indexType) {\n        const e = a.get(p.indexType);\n        for (let t = 0; t < m; t += 2) {\n          const r = d[t],\n            s = d[t + 1];\n          i.drawElements(c.primitiveType, s, p.indexType, r * e);\n        }\n      } else for (let e = 0; e < m; e += 2) {\n        const t = d[e],\n          r = d[e + 1];\n        i.drawArrays(c.primitiveType, t, r);\n      }\n    }\n  }\n  prepareSubmit() {\n    this._draws.clear();\n  }\n  finishSubmit() {\n    const e = this._sorting === s.FrontToBack ? 1 : -1;\n    this._draws.sort((t, r) => {\n      const i = e * (t.depthSquaredHint - r.depthSquaredHint);\n      return 0 !== i ? i : t.geometry.vao.size - r.geometry.vao.size;\n    });\n  }\n  get count() {\n    return this._draws.length;\n  }\n}\nconst a = new Map();\na.set(i.UNSIGNED_BYTE, 1), a.set(i.UNSIGNED_SHORT, 2), a.set(i.UNSIGNED_INT, 4);\nexport { o as RenderPass, s as RenderPassSorting };","map":{"version":3,"names":["unwrap","e","t","TransparencyPassType","r","DataType","i","s","FrontToBack","BackToFront","o","constructor","arguments","length","undefined","_rctx","_techniqueRepository","_sorting","_draws","initialSize","allocator","material","geometry","geometryRanges","bindDrawParams","depthSquaredHint","indexType","_previouslyBoundDraw","Map","submitDraw","pushNew","indexed","vao","indexBuffer","dispatch","clear","map","prepareTechnique","parameters","n","l","configuration","transparencyPassType","NONE","bindTechnique","p","data","c","bindVAO","get","program","bindDraw","set","d","m","a","drawElements","primitiveType","drawArrays","prepareSubmit","finishSubmit","sort","size","count","UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT","RenderPass","RenderPassSorting"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/core/renderPasses/RenderPass.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../../../../../core/maybe.js\";import t from\"../../../../../core/PooledArray.js\";import{TransparencyPassType as r}from\"../../lib/TransparencyPassType.js\";import{DataType as i}from\"../../../../webgl/enums.js\";var s;!function(e){e[e.FrontToBack=0]=\"FrontToBack\",e[e.BackToFront=1]=\"BackToFront\"}(s||(s={}));class o{constructor(e,r,i=s.FrontToBack){this._rctx=e,this._techniqueRepository=r,this._sorting=i,this._draws=new t({initialSize:32,allocator:e=>e||{material:null,geometry:null,geometryRanges:null,bindDrawParams:null,depthSquaredHint:0,indexType:0}}),this._previouslyBoundDraw=new Map}submitDraw(t,r,i,s){const o=this._draws.pushNew();o.geometry=r,o.geometryRanges=i,o.material=t,o.depthSquaredHint=s,o.indexType=(r.indexed?e(r.vao.indexBuffer).indexType:null)??0}dispatch(e,t){const i=this._rctx;this._previouslyBoundDraw.clear();let s=null;const o=this._draws.map((r=>r.material.prepareTechnique(this._techniqueRepository,e,t,r.geometry.parameters))),n=this._draws.length;for(let l=0;l<n;l++){const n=o[l];n===s&&n.configuration.transparencyPassType===r.NONE||(i.bindTechnique(n,e,t),s=n);const p=this._draws.data[l],c=p.geometry;i.bindVAO(c.vao),this._previouslyBoundDraw.get(n)!==p.material&&(n.program.bindDraw(p.material,t,e),this._previouslyBoundDraw.set(n,p.material));const d=p.geometryRanges,m=d.length;if(0!==p.indexType){const e=a.get(p.indexType);for(let t=0;t<m;t+=2){const r=d[t],s=d[t+1];i.drawElements(c.primitiveType,s,p.indexType,r*e)}}else for(let e=0;e<m;e+=2){const t=d[e],r=d[e+1];i.drawArrays(c.primitiveType,t,r)}}}prepareSubmit(){this._draws.clear()}finishSubmit(){const e=this._sorting===s.FrontToBack?1:-1;this._draws.sort(((t,r)=>{const i=e*(t.depthSquaredHint-r.depthSquaredHint);return 0!==i?i:t.geometry.vao.size-r.geometry.vao.size}))}get count(){return this._draws.length}}const a=new Map;a.set(i.UNSIGNED_BYTE,1),a.set(i.UNSIGNED_SHORT,2),a.set(i.UNSIGNED_INT,4);export{o as RenderPass,s as RenderPassSorting};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}