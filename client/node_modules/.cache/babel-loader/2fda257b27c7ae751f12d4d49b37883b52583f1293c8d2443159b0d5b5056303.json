{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../../geometry.js\";\nimport { isNone as e } from \"../../../../core/maybe.js\";\nimport { throwIfAborted as o } from \"../../../../core/promiseUtils.js\";\nimport { makeDehydratedPoint as t } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport { getGeometryEffectiveElevationInfo as r } from \"../../../../support/elevationInfoUtils.js\";\nimport { evaluateElevationInfoAtPoint as s, SampleElevationInfo as n } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as i } from \"./ElevationContext.js\";\nimport { extractExpressionInfo as a, createContext as p } from \"./featureExpressionInfoUtils.js\";\nimport f from \"../../../../geometry/SpatialReference.js\";\nasync function m(t, n, i, f, m) {\n  const {\n      elevationProvider: j,\n      renderCoordsHelper: u,\n      spatialReference: y\n    } = t,\n    {\n      elevationInfo: v\n    } = n,\n    I = a(v, !0),\n    g = await p(I, y, m);\n  o(m);\n  const x = [],\n    h = new Set(),\n    w = new Set();\n  for (const {\n    objectId: o,\n    points: a\n  } of f) {\n    const p = i(o);\n    if (e(p)) {\n      for (const e of a) x.push(e[2]);\n      h.add(o);\n      continue;\n    }\n    p.isDraped && w.add(o);\n    const f = p.graphic.geometry;\n    c.setFromElevationInfo(r(f, v)), c.updateFeatureExpressionInfoContext(g, p.graphic, n), l.spatialReference = t.spatialReference;\n    for (const {\n      x: e,\n      y: o,\n      z: t\n    } of a) l.x = e, l.y = o, l.z = t ?? 0, s(l, j, c, u, d), x.push(d.z);\n  }\n  return {\n    elevations: x,\n    drapedObjectIds: w,\n    failedObjectIds: h\n  };\n}\nconst c = new i(),\n  l = t(0, 0, 0, f.WGS84),\n  d = new n();\nexport { m as elevationAlignPointsInFeatures };","map":{"version":3,"names":["isNone","e","throwIfAborted","o","makeDehydratedPoint","t","getGeometryEffectiveElevationInfo","r","evaluateElevationInfoAtPoint","s","SampleElevationInfo","n","ElevationContext","i","extractExpressionInfo","a","createContext","p","f","m","elevationProvider","j","renderCoordsHelper","u","spatialReference","y","elevationInfo","v","I","g","x","h","Set","w","objectId","points","push","add","isDraped","graphic","geometry","c","setFromElevationInfo","updateFeatureExpressionInfoContext","l","z","d","elevations","drapedObjectIds","failedObjectIds","WGS84","elevationAlignPointsInFeatures"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignPointsInFeatures.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import{isNone as e}from\"../../../../core/maybe.js\";import{throwIfAborted as o}from\"../../../../core/promiseUtils.js\";import{makeDehydratedPoint as t}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{getGeometryEffectiveElevationInfo as r}from\"../../../../support/elevationInfoUtils.js\";import{evaluateElevationInfoAtPoint as s,SampleElevationInfo as n}from\"./elevationAlignmentUtils.js\";import{ElevationContext as i}from\"./ElevationContext.js\";import{extractExpressionInfo as a,createContext as p}from\"./featureExpressionInfoUtils.js\";import f from\"../../../../geometry/SpatialReference.js\";async function m(t,n,i,f,m){const{elevationProvider:j,renderCoordsHelper:u,spatialReference:y}=t,{elevationInfo:v}=n,I=a(v,!0),g=await p(I,y,m);o(m);const x=[],h=new Set,w=new Set;for(const{objectId:o,points:a}of f){const p=i(o);if(e(p)){for(const e of a)x.push(e[2]);h.add(o);continue}p.isDraped&&w.add(o);const f=p.graphic.geometry;c.setFromElevationInfo(r(f,v)),c.updateFeatureExpressionInfoContext(g,p.graphic,n),l.spatialReference=t.spatialReference;for(const{x:e,y:o,z:t}of a)l.x=e,l.y=o,l.z=t??0,s(l,j,c,u,d),x.push(d.z)}return{elevations:x,drapedObjectIds:w,failedObjectIds:h}}const c=new i,l=t(0,0,0,f.WGS84),d=new n;export{m as elevationAlignPointsInFeatures};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}