{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as t, abortMaybe as s, isSome as e, isNone as i } from \"../../../core/maybe.js\";\nimport a from \"../../../core/ObjectPool.js\";\nimport n from \"../../../core/PooledArray.js\";\nimport { releaseTileData as o } from \"./terrainUtils.js\";\nimport { computeUpsampleInfo as l } from \"./tileUtils.js\";\nclass p {\n  constructor() {\n    this.waitingAgents = new n(), this._upsampleInfo = null, this.loadingAgent = null, this.requestPromise = null, this.requestAbort = null, this.pendingUpdates = 0;\n  }\n  static acquire(t) {\n    const s = r.acquire();\n    return s._init(t), s;\n  }\n  release() {\n    this.dispose(), h.delete(this), r.release(this);\n  }\n  dispose() {\n    this.loadingAgent = t(this.loadingAgent), this.abortRequest(), this._unsetUpsampleInfo(), this.pendingUpdates = 0, this._data = o(this._data);\n  }\n  static prune() {\n    r.prune(0);\n  }\n  _init(t) {\n    this.waitingAgents.clear(), this._data = o(this._data), this.dataMissing = !1, this.dataInvalidated = !1, this._unsetUpsampleInfo(), this.abortRequest(), this.loadingAgent = null, this.pendingUpdates = 0, this._pool = t, this.elevationBounds = null;\n  }\n  invalidateSourceData() {\n    this.dataInvalidated = !0, this.dataMissing = !1, this._unsetUpsampleInfo();\n  }\n  abortRequest() {\n    this.requestAbort = s(this.requestAbort), this.requestPromise = null;\n  }\n  get upsampleInfo() {\n    return this._upsampleInfo;\n  }\n  _unsetUpsampleInfo() {\n    e(this._upsampleInfo) && (this._upsampleInfo.tile.unrefMapData(), this._pool.release(this._upsampleInfo), this._upsampleInfo = null);\n  }\n  setUpsampleInfo(t, s) {\n    if (t === s || i(s)) this._unsetUpsampleInfo();else {\n      if (i(this._upsampleInfo)) this._upsampleInfo = this._pool.acquire();else {\n        if (this._upsampleInfo.tile === s) return;\n        this._upsampleInfo.tile.unrefMapData();\n      }\n      s.refMapData(), l(t, s, this._upsampleInfo);\n    }\n  }\n  get data() {\n    return this._data;\n  }\n  set data(t) {\n    o(this._data), this._data = t;\n  }\n}\nconst r = new a(p, null, () => {}),\n  h = new Map();\nfunction u() {\n  h.size > 0 && (console.log(`${h.size} live TilePerLayerInfo allocations:`), h.forEach(t => console.log(t, \"\\n\")));\n}\nexport { p as TilePerLayerInfo, u as printAllocations };","map":{"version":3,"names":["disposeMaybe","t","abortMaybe","s","isSome","e","isNone","i","a","n","releaseTileData","o","computeUpsampleInfo","l","p","constructor","waitingAgents","_upsampleInfo","loadingAgent","requestPromise","requestAbort","pendingUpdates","acquire","r","_init","release","dispose","h","delete","abortRequest","_unsetUpsampleInfo","_data","prune","clear","dataMissing","dataInvalidated","_pool","elevationBounds","invalidateSourceData","upsampleInfo","tile","unrefMapData","setUpsampleInfo","refMapData","data","Map","u","size","console","log","forEach","TilePerLayerInfo","printAllocations"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/terrain/TilePerLayerInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as t,abortMaybe as s,isSome as e,isNone as i}from\"../../../core/maybe.js\";import a from\"../../../core/ObjectPool.js\";import n from\"../../../core/PooledArray.js\";import{releaseTileData as o}from\"./terrainUtils.js\";import{computeUpsampleInfo as l}from\"./tileUtils.js\";class p{constructor(){this.waitingAgents=new n,this._upsampleInfo=null,this.loadingAgent=null,this.requestPromise=null,this.requestAbort=null,this.pendingUpdates=0}static acquire(t){const s=r.acquire();return s._init(t),s}release(){this.dispose(),h.delete(this),r.release(this)}dispose(){this.loadingAgent=t(this.loadingAgent),this.abortRequest(),this._unsetUpsampleInfo(),this.pendingUpdates=0,this._data=o(this._data)}static prune(){r.prune(0)}_init(t){this.waitingAgents.clear(),this._data=o(this._data),this.dataMissing=!1,this.dataInvalidated=!1,this._unsetUpsampleInfo(),this.abortRequest(),this.loadingAgent=null,this.pendingUpdates=0,this._pool=t,this.elevationBounds=null}invalidateSourceData(){this.dataInvalidated=!0,this.dataMissing=!1,this._unsetUpsampleInfo()}abortRequest(){this.requestAbort=s(this.requestAbort),this.requestPromise=null}get upsampleInfo(){return this._upsampleInfo}_unsetUpsampleInfo(){e(this._upsampleInfo)&&(this._upsampleInfo.tile.unrefMapData(),this._pool.release(this._upsampleInfo),this._upsampleInfo=null)}setUpsampleInfo(t,s){if(t===s||i(s))this._unsetUpsampleInfo();else{if(i(this._upsampleInfo))this._upsampleInfo=this._pool.acquire();else{if(this._upsampleInfo.tile===s)return;this._upsampleInfo.tile.unrefMapData()}s.refMapData(),l(t,s,this._upsampleInfo)}}get data(){return this._data}set data(t){o(this._data),this._data=t}}const r=new a(p,null,(()=>{})),h=new Map;function u(){h.size>0&&(console.log(`${h.size} live TilePerLayerInfo allocations:`),h.forEach((t=>console.log(t,\"\\n\"))))}export{p as TilePerLayerInfo,u as printAllocations};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}