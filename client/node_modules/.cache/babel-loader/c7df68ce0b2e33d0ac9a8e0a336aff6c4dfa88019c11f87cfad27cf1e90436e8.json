{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport has from \"../../../../../core/has.js\";\nimport { isNone as r, applySome as s, isSome as i, filterNones as a } from \"../../../../../core/maybe.js\";\nimport { ignoreAbortErrors as o, after as n, throwIfAborted as u, throwIfNotAbortError as g, isAbortError as h } from \"../../../../../core/promiseUtils.js\";\nimport { when as d, watch as c, whenOnce as l } from \"../../../../../core/reactiveUtils.js\";\nimport { property as p } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport { subclass as y } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { convertToGeometry as f } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { QueryEngine as m } from \"../../../../../layers/graphics/data/QueryEngine.js\";\nimport S from \"../../../../../layers/support/FieldsIndex.js\";\nimport { FeatureStore2D as _ } from \"../FeatureStore2D.js\";\nimport { createSource as v } from \"../sources/createSource.js\";\nimport b from \"../support/AttributeStore.js\";\nimport { BinStore as I } from \"../support/BinStore.js\";\nimport { ClusterStore as Q } from \"../support/ClusterStore.js\";\nimport { ComputedAttributeStorage as C } from \"../support/ComputedAttributeStorage.js\";\nimport { FeatureSetReaderJSON as E } from \"../support/FeatureSetReaderJSON.js\";\nimport { UpdateToken as w } from \"../support/UpdateToken.js\";\nimport { QueueProcessor as F } from \"../../../../support/QueueProcessor.js\";\nconst T = 5e3,\n  k = \"tileRenderer.featuresView.attributeView.initialize\",\n  j = \"tileRenderer.featuresView.attributeView.requestUpdate\",\n  x = \"tileRenderer.featuresView.requestRender\";\nfunction R(e) {\n  return \"worker:port-closed\" === e.name;\n}\nfunction A(e) {\n  if (!h(e) && !R(e)) throw e;\n}\nfunction U(e) {\n  return \"feature\" === e.type && \"snapshot\" === e.mode;\n}\nlet q = class extends t {\n  constructor() {\n    super(...arguments), this._storage = new C(), this._markedIdsBufId = this._storage.createBitset(), this._lastCleanup = performance.now(), this._cleanupNeeded = !1, this._invalidated = !1, this._tileToResolver = new Map(), this._didEdit = !1, this._updateVersion = 1, this.tileStore = null, this.config = null, this.processor = null, this.remoteClient = null, this.service = null;\n  }\n  initialize() {\n    this._initStores(), this._initSource(), this._updateQueue = new F({\n      concurrency: \"stream\" === this._source.type ? 1 : 4,\n      process: (e, t) => this._onTileMessage(e, {\n        signal: t\n      })\n    }), this.addHandles([this.tileStore.on(\"update\", this.onTileUpdate.bind(this)), d(() => !this.updating, () => this.onIdle())]), this._checkUpdating = setInterval(() => this.notifyChange(\"updating\"), 300);\n  }\n  _initSource() {\n    const e = this.tileStore.tileScheme,\n      t = () => this._updateQueue && this._updateQueue.length < 50,\n      r = (e, t) => (this._invalidated = !0, this._patchTile(e, t));\n    this._source = v(this.service, this.spatialReference, e, r, t, this.featureStore), this._proxyEvents();\n  }\n  _proxyEvents() {\n    if (\"stream\" === this._source.type) {\n      const e = this._source.events,\n        t = this._source;\n      this.addHandles([c(() => t.connectionStatus, e => this.remoteClient.invoke(\"setProperty\", {\n        propertyName: \"connectionStatus\",\n        value: e\n      }).catch(A), {\n        initial: !0\n      }), c(() => t.errorString, e => this.remoteClient.invoke(\"setProperty\", {\n        propertyName: \"errorString\",\n        value: e\n      }).catch(A), {\n        initial: !0\n      }), e.on(\"data-received\", e => this.remoteClient.invoke(\"emitEvent\", {\n        name: \"data-received\",\n        event: {\n          attributes: e.attributes,\n          centroid: e.centroid,\n          geometry: e.geometry\n        }\n      }).catch(A)), e.on(\"message-received\", e => this.remoteClient.invoke(\"emitEvent\", {\n        name: \"message-received\",\n        event: e\n      }).catch(A)), e.on(\"updateRate\", e => this.remoteClient.invoke(\"emitEvent\", {\n        name: \"update-rate\",\n        event: {\n          ...e\n        }\n      }).catch(A))]);\n    }\n  }\n  _initAttributeStore(e) {\n    this.attributeStore || (this.attributeStore = new b({\n      type: \"remote\",\n      initialize: (e, t) => o(this.remoteClient.invoke(k, e, {\n        signal: t\n      }).catch(A)),\n      update: (e, t) => o(this.remoteClient.invoke(j, e, {\n        signal: t\n      }).catch(A)),\n      render: e => o(this.remoteClient.invoke(x, void 0, {\n        signal: e\n      }).catch(A))\n    }, e, () => this.notifyChange(\"updating\")));\n  }\n  _initStores() {\n    const e = \"snapshot\" === this.service.type ? \"snapshot\" : \"on-demand\",\n      t = {\n        geometryInfo: {\n          geometryType: this.service.geometryType,\n          hasM: !1,\n          hasZ: !1\n        },\n        spatialReference: this.spatialReference,\n        fieldsIndex: this.fieldsIndex,\n        fields: this.service.fields\n      };\n    this.featureStore = new _(t, this._storage, e);\n  }\n  _initQueryEngine(e) {\n    const t = this;\n    this.featureQueryEngine?.destroy(), this.featureQueryEngine = new m({\n      definitionExpression: e.schema.source.definitionExpression ?? void 0,\n      fields: this.service.fields,\n      geometryType: this.service.geometryType,\n      objectIdField: this.service.objectIdField,\n      hasM: !1,\n      hasZ: !1,\n      spatialReference: this.spatialReference.toJSON(),\n      cacheSpatialQueries: !0,\n      featureStore: this.featureStore,\n      aggregateAdapter: {\n        getFeatureObjectIds(e) {\n          if (r(t.aggregateStore)) return [];\n          return t.aggregateStore.getFeatureDisplayIdsForAggregate(e).map(e => t.getObjectId(e));\n        }\n      },\n      timeInfo: this.service.timeInfo\n    });\n  }\n  _initAggregateQueryEngine(e, t) {\n    if (this.aggregateQueryEngine?.destroy(), r(e)) return;\n    const s = t.targets.aggregate.params.fields.slice();\n    this.aggregateQueryEngine = new m({\n      definitionExpression: void 0,\n      fields: s,\n      geometryType: e.geometryInfo.geometryType,\n      objectIdField: e.objectIdField,\n      hasM: e.geometryInfo.hasM,\n      hasZ: e.geometryInfo.hasZ,\n      spatialReference: this.spatialReference.toJSON(),\n      cacheSpatialQueries: !1,\n      featureStore: e,\n      aggregateAdapter: {\n        getFeatureObjectIds: e => []\n      }\n    });\n  }\n  destroy() {\n    this._updateQueue.destroy(), this._source.destroy(), this.featureQueryEngine?.destroy(), this.aggregateQueryEngine?.destroy(), this.attributeStore?.destroy();\n    for (const e of this.tileStore.tiles) this._source.unsubscribe(e);\n    clearInterval(this._checkUpdating);\n  }\n  get fieldsIndex() {\n    return new S(this.service.fields);\n  }\n  get spatialReference() {\n    return this.tileStore.tileScheme.spatialReference;\n  }\n  get updating() {\n    return this.isUpdating();\n  }\n  isUpdating() {\n    const e = this._source.updating,\n      t = !!this._updateQueue.length,\n      r = !this.attributeStore || this.attributeStore.isUpdating(),\n      s = e || t || r;\n    return has(\"esri-2d-log-updating\") && console.log(`Updating FeatureController2D: ${s}\\n  -> updatingSource ${e}\\n  -> updateQueue ${t}\\n  -> updatingAttributeStore ${r}\\n`), s;\n  }\n  updateCustomParameters(e) {\n    \"stream\" === this._source.type && this._source.updateCustomParameters(e);\n  }\n  enableEvent(e) {\n    this._source.enableEvent(e.name, e.value);\n  }\n  pause() {\n    this._updateQueue.pause(), this._updateQueue.clear();\n  }\n  resume() {\n    this._updateQueue.resume();\n  }\n  pauseStream() {\n    \"stream\" === this._source.type && this._source.pauseStream();\n  }\n  resumeStream() {\n    \"stream\" === this._source.type && this._source.resumeStream();\n  }\n  sendMessageToSocket(e) {\n    \"stream\" === this._source.type && this._source.sendMessageToSocket(e);\n  }\n  sendMessageToClient(e) {\n    \"stream\" === this._source.type && this._source.sendMessageToClient(e);\n  }\n  _initAggregateStore(e) {\n    const t = e.schema.targets?.aggregate?.type,\n      r = s(this.config, e => e.schema.targets?.aggregate?.type);\n    if (r !== t && (i(this.aggregateStore) && (this.removeHandles(\"valueRangesChanged\"), this.aggregateStore.destroy(), this.aggregateStore = null), t)) {\n      switch (t) {\n        case \"cluster\":\n          {\n            const e = {\n              geometryInfo: {\n                geometryType: \"esriGeometryPoint\",\n                hasM: !1,\n                hasZ: !1\n              },\n              spatialReference: this.spatialReference,\n              fieldsIndex: this.fieldsIndex,\n              fields: this.service.fields\n            };\n            this.aggregateStore = new Q(e, this.spatialReference, this._storage, this.service), this.addHandles(this.aggregateStore.events.on(\"valueRangesChanged\", e => {\n              this.remoteClient.invoke(\"emitEvent\", {\n                name: \"valueRangesChanged\",\n                event: {\n                  valueRanges: e.valueRanges\n                }\n              }).catch(A);\n            }), \"valueRangesChanged\");\n            break;\n          }\n        case \"bin\":\n          {\n            const e = {\n              geometryInfo: {\n                geometryType: \"esriGeometryPolygon\",\n                hasM: !1,\n                hasZ: !1\n              },\n              spatialReference: this.spatialReference,\n              fieldsIndex: this.fieldsIndex,\n              fields: this.service.fields\n            };\n            this.aggregateStore = new I(e, this.spatialReference, this._storage, this.service);\n            break;\n          }\n      }\n      this.aggregateStore.onTileUpdate({\n        added: this.tileStore.tiles,\n        removed: []\n      });\n    }\n  }\n  async update(e, t) {\n    this._updateVersion++, this._initQueryEngine(t), this._initAttributeStore(t), this.pause(), await Promise.all([this._source.update(e, t.schema.source), this.featureStore.updateSchema(e, t.schema.targets.feature), this.attributeStore.update(e, t), this.attributeStore.updateFilters(e, t, this)]), this._initAggregateStore(t), i(this.aggregateStore) && (await this.aggregateStore.updateSchema(e, t.schema.targets.aggregate)), this._initAggregateQueryEngine(this.aggregateStore, t.schema), has(\"esri-2d-update-debug\") && e.describe(), this._set(\"config\", t);\n  }\n  async applyUpdate(e) {\n    e.version = this._updateVersion, has(\"esri-2d-update-debug\") && console.debug(`Applying update ${e.version}`), e.mesh && this.clearTiles(), this._updateQueue.resume(), await this._source.applyUpdate(e), this.notifyChange(\"updating\"), await l(() => !this.updating), i(this.aggregateStore) && (await n(10), await l(() => !this.updating));\n  }\n  async onEdits(_ref) {\n    let {\n      edits: e\n    } = _ref;\n    has(\"esri-2d-update-debug\") && console.debug(\"Applying Edit:\", e), this._didEdit = !0;\n    try {\n      const t = e.removed.map(e => e.objectId && -1 !== e.objectId ? e.objectId : this._lookupObjectIdByGlobalId(e.globalId)),\n        r = e.addOrModified.map(_ref2 => {\n          let {\n            objectId: e\n          } = _ref2;\n          return e;\n        });\n      this.featureStore.invalidate(), await this._source.edit(r, t), this.clearTiles(), this.notifyChange(\"updating\"), i(this.aggregateStore) && this.aggregateStore.clear(), await this._source.resend(), await l(() => !this.updating);\n    } catch (t) {}\n  }\n  async refresh(e) {\n    if (!e.dataChanged) {\n      const e = w.empty();\n      return e.storage.filters = !0, this.applyUpdate(e);\n    }\n    this.featureStore.invalidate(), this.clearTiles(), this._source.refresh(this._updateVersion, e), this._cleanupNeeded = !0, this.notifyChange(\"updating\"), await l(() => !this.updating);\n  }\n  clearTiles() {\n    for (const e of this.tileStore.tiles) this.processor.onTileClear(e);\n  }\n  onTileUpdate(e) {\n    i(this.aggregateStore) && this.aggregateStore.onTileUpdate(e);\n    for (const t of e.added) this._source.subscribe(t, this._updateVersion), this._level = t.level;\n    for (const t of e.removed) this._source.unsubscribe(t), this._cleanupNeeded = !0, this._tileToResolver.has(t.id) && (this._tileToResolver.get(t.id).resolve(), this._tileToResolver.delete(t.id));\n    this.notifyChange(\"updating\");\n  }\n  async onIdle() {\n    this._invalidated && (this._invalidated = !1, (i(this.aggregateStore) || \"heatmap\" === this.processor.type) && (await this._repushCurrentLevelTiles())), this._markAndSweep();\n  }\n  async querySummaryStatistics(_ref3) {\n    let {\n      query: e,\n      params: t\n    } = _ref3;\n    return this.featureQueryEngine.executeQueryForSummaryStatistics(e, t);\n  }\n  async queryAggregateSummaryStatistics(_ref4) {\n    let {\n      query: e,\n      params: t\n    } = _ref4;\n    return this.aggregateQueryEngine.executeQueryForSummaryStatistics(e, t);\n  }\n  async queryUniqueValues(_ref5) {\n    let {\n      query: e,\n      params: t\n    } = _ref5;\n    return this.featureQueryEngine.executeQueryForUniqueValues(e, t);\n  }\n  async queryAggregateUniqueValues(_ref6) {\n    let {\n      query: e,\n      params: t\n    } = _ref6;\n    return this.aggregateQueryEngine.executeQueryForUniqueValues(e, t);\n  }\n  async queryClassBreaks(_ref7) {\n    let {\n      query: e,\n      params: t\n    } = _ref7;\n    return this.featureQueryEngine.executeQueryForClassBreaks(e, t);\n  }\n  async queryAggregateClassBreaks(_ref8) {\n    let {\n      query: e,\n      params: t\n    } = _ref8;\n    return this.aggregateQueryEngine.executeQueryForClassBreaks(e, t);\n  }\n  async queryHistogram(_ref9) {\n    let {\n      query: e,\n      params: t\n    } = _ref9;\n    return this.featureQueryEngine.executeQueryForHistogram(e, t);\n  }\n  async queryAggregateHistogram(_ref10) {\n    let {\n      query: e,\n      params: t\n    } = _ref10;\n    return this.aggregateQueryEngine.executeQueryForHistogram(e, t);\n  }\n  queryExtent(e) {\n    return this.featureQueryEngine.executeQueryForExtent(e);\n  }\n  queryAggregates(e) {\n    return this.aggregateQueryEngine.executeQuery(e);\n  }\n  queryAggregateCount(e) {\n    return this.aggregateQueryEngine.executeQueryForCount(e);\n  }\n  queryAggregateIds(e) {\n    return this.aggregateQueryEngine.executeQueryForIds(e);\n  }\n  queryFeatures(e) {\n    return this.featureQueryEngine.executeQuery(e);\n  }\n  async queryVisibleFeatures(e) {\n    const t = await this.featureQueryEngine.executeQuery(e),\n      r = t.objectIdFieldName;\n    return t.features = t.features.filter(e => {\n      const t = e.attributes[r],\n        i = this.getDisplayId(t);\n      return s(i, e => this.attributeStore.isVisible(e));\n    }), t;\n  }\n  queryFeatureCount(e) {\n    return this.featureQueryEngine.executeQueryForCount(e);\n  }\n  queryLatestObservations(e) {\n    return this.featureQueryEngine.executeQueryForLatestObservations(e);\n  }\n  queryObjectIds(e) {\n    return this.featureQueryEngine.executeQueryForIds(e);\n  }\n  async queryStatistics() {\n    return this.featureStore.storeStatistics;\n  }\n  getObjectId(e) {\n    return this.featureStore.lookupObjectId(e, this._storage);\n  }\n  getDisplayId(e) {\n    if (i(this.aggregateStore)) {\n      const t = this.aggregateStore.getDisplayId(e);\n      if (r(t)) {\n        const t = this.featureStore.lookupDisplayId(e);\n        return this.aggregateStore.getDisplayIdForReferenceId(t);\n      }\n      return t;\n    }\n    return this.featureStore.lookupDisplayId(e);\n  }\n  getFeatures(e) {\n    const t = [],\n      r = [];\n    for (const s of e) {\n      const e = i(this.aggregateStore) ? this.getAggregate(s) : null;\n      if (i(e)) {\n        if (i(e.attributes.referenceId)) {\n          const r = this.getFeature(e.attributes.referenceId);\n          i(r) && t.push(r);\n        } else r.push(e);\n      } else {\n        const e = this.getFeature(s);\n        i(e) && t.push(e);\n      }\n    }\n    return {\n      features: t,\n      aggregates: r\n    };\n  }\n  getFeature(e) {\n    const t = this.featureStore.lookupFeatureByDisplayId(e, this._storage);\n    if (r(t)) return null;\n    const s = t.readHydratedGeometry(),\n      i = f(s, t.geometryType, t.hasZ, t.hasM);\n    return {\n      attributes: t.readAttributes(),\n      geometry: i\n    };\n  }\n  getAggregate(e) {\n    return r(this.aggregateStore) ? null : this.aggregateStore.getAggregate(e);\n  }\n  getAggregates() {\n    return r(this.aggregateStore) ? [] : this.aggregateStore.getAggregates();\n  }\n  async setHighlight(e) {\n    const t = a(e.map(e => this.getDisplayId(e)));\n    return this.attributeStore.setHighlight(e, t);\n  }\n  _lookupObjectIdByGlobalId(e) {\n    const t = this.service.globalIdField;\n    if (r(t)) throw new Error(\"Expected globalIdField to be defined\");\n    let s = null;\n    if (this.featureStore.forEach(r => {\n      e === r.readAttribute(t) && (s = r.getObjectId());\n    }), r(s)) throw new Error(`Expected to find a feature with globalId ${e}`);\n    return s;\n  }\n  async _repushCurrentLevelTiles() {\n    const e = this.tileStore.tiles.filter(e => e.level === this._level);\n    e.map(async e => this._patchTile({\n      type: \"append\",\n      id: e.key.id,\n      clear: !0,\n      addOrUpdate: null,\n      end: !1\n    }));\n    const t = e.map(async e => this._patchTile({\n      type: \"append\",\n      id: e.key.id,\n      addOrUpdate: E.fromOptimizedFeatures([], this.service),\n      remove: [],\n      end: !0,\n      isRepush: !0,\n      status: w.empty()\n    }));\n    await Promise.all(t);\n  }\n  _maybeForceCleanup() {\n    performance.now() - this._lastCleanup > T && this._markAndSweep();\n  }\n  _patchTile(e, t) {\n    const r = this._updateQueue.push(e, t).then(() => {\n      this.notifyChange(\"updating\");\n    }).catch(e => {\n      this.notifyChange(\"updating\");\n    });\n    return this.notifyChange(\"updating\"), r;\n  }\n  async _onTileMessage(e, t) {\n    if (u(t), has(\"esri-2d-update-debug\")) {\n      const t = s(e.addOrUpdate, e => e.hasFeatures);\n      console.debug(e.id, `FeatureController:onTileMessage: [clear:${e.clear}, end:${e.end}, features: ${t}]`);\n    }\n    const a = this.tileStore.get(e.id);\n    if (!a) return;\n    if (e.clear) return this.processor.onTileClear(a);\n    const o = e.status;\n    this._cleanupNeeded = !0;\n    const n = [];\n    for (const r of e.remove ?? []) {\n      const e = this.featureStore.lookupDisplayId(r);\n      e && n.push(e);\n    }\n    e.remove = n;\n    try {\n      if (r(e.addOrUpdate)) return void this.processor.onTileMessage(a, {\n        ...e,\n        addOrUpdate: null\n      }, i(this.aggregateStore), t).catch(g);\n      if (e.addOrUpdate.setArcadeSpatialReference(this.spatialReference), this.featureStore.hasInstance(e.addOrUpdate.instance) && o.targets.feature || (o.targets.feature = !0, this.featureStore.onTileData(a, e)), !o.storage.data || !o.storage.filters) {\n        o.storage.data = !0, o.storage.filters = !0, this.attributeStore.onTileData(a, e);\n        \"stream\" === this._source.type || this._didEdit ? (await this.attributeStore.sendUpdates(), u(t)) : this.attributeStore.sendUpdates();\n      }\n      if (i(this.aggregateStore) && !o.targets.aggregate) {\n        o.targets.aggregate = !0;\n        const t = U(this._source) && this._source.loading,\n          r = !U(this._source) || t || e.end;\n        if (this.aggregateStore.onTileData(a, e, this._storage, this.attributeStore, r), !r) return;\n        o.mesh || (this.attributeStore.onTileData(a, e), await this.attributeStore.sendUpdates());\n      }\n      if (!o.mesh) {\n        o.mesh = !0;\n        const r = i(this.aggregateStore) && \"cluster\" === this.aggregateStore.type;\n        await this.processor.onTileMessage(a, e, r, t), u(t);\n      }\n      this._maybeForceCleanup();\n    } catch (h) {\n      g(h);\n    }\n  }\n  _mark(e, t, r) {\n    const s = (4294901760 & this._storage.getInstanceId(e)) >>> 16;\n    e && (t.add(s), r.set(e));\n  }\n  _markAndSweep() {\n    this._lastCleanup = performance.now();\n    if (!(!(\"feature\" === this._source.type && \"snapshot\" === this._source.mode) && (\"stream\" === this._source.type || this._cleanupNeeded))) return;\n    this._cleanupNeeded = !1;\n    const e = this._storage.getBitset(this._markedIdsBufId),\n      t = new Set();\n    e.clear();\n    for (const r of this.tileStore.tiles) for (const s of this._source.readers(r.id)) {\n      const r = s.getCursor();\n      for (; r.next();) {\n        let s = r.getDisplayId();\n        if (!s) {\n          const e = r.getObjectId();\n          s = this.featureStore.lookupDisplayId(e);\n        }\n        this._mark(s, t, e);\n      }\n    }\n    \"symbol\" === this.processor.type && this.processor.forEachBufferId(r => {\n      this._mark(r, t, e);\n    }), this._updateQueue.forEach(r => {\n      for (const s of r.remove ?? []) {\n        const r = this.featureStore.lookupDisplayId(s);\n        this._mark(r, t, e);\n      }\n    }), i(this.aggregateStore) && (this.aggregateStore.sweepFeatures(e, this.featureStore), \"sweepAggregates\" in this.aggregateStore && this.aggregateStore.sweepAggregates(this._storage, this.attributeStore, this._level)), this.featureStore.sweepFeatures(e, this._storage, this.attributeStore), this.featureStore.sweepFeatureSets(t);\n  }\n};\ne([p({\n  constructOnly: !0\n})], q.prototype, \"tileStore\", void 0), e([p()], q.prototype, \"config\", void 0), e([p({\n  readOnly: !0\n})], q.prototype, \"fieldsIndex\", null), e([p()], q.prototype, \"processor\", void 0), e([p({\n  constructOnly: !0\n})], q.prototype, \"remoteClient\", void 0), e([p({\n  constructOnly: !0\n})], q.prototype, \"service\", void 0), e([p()], q.prototype, \"spatialReference\", null), e([p()], q.prototype, \"updating\", null), q = e([y(\"esri.views.2d.layers.features.controllers.FeatureController2D\")], q);\nconst O = q;\nexport { O as default };","map":{"version":3,"names":["_","e","t","has","isNone","r","applySome","s","isSome","i","filterNones","a","ignoreAbortErrors","o","after","n","throwIfAborted","u","throwIfNotAbortError","g","isAbortError","h","when","d","watch","c","whenOnce","l","property","p","subclass","y","convertToGeometry","f","QueryEngine","m","S","FeatureStore2D","createSource","v","b","BinStore","I","ClusterStore","Q","ComputedAttributeStorage","C","FeatureSetReaderJSON","E","UpdateToken","w","QueueProcessor","F","T","k","j","x","R","name","A","U","type","mode","q","constructor","arguments","_storage","_markedIdsBufId","createBitset","_lastCleanup","performance","now","_cleanupNeeded","_invalidated","_tileToResolver","Map","_didEdit","_updateVersion","tileStore","config","processor","remoteClient","service","initialize","_initStores","_initSource","_updateQueue","concurrency","_source","process","_onTileMessage","signal","addHandles","on","onTileUpdate","bind","updating","onIdle","_checkUpdating","setInterval","notifyChange","tileScheme","length","_patchTile","spatialReference","featureStore","_proxyEvents","events","connectionStatus","invoke","propertyName","value","catch","initial","errorString","event","attributes","centroid","geometry","_initAttributeStore","attributeStore","update","render","geometryInfo","geometryType","hasM","hasZ","fieldsIndex","fields","_initQueryEngine","featureQueryEngine","destroy","definitionExpression","schema","source","objectIdField","toJSON","cacheSpatialQueries","aggregateAdapter","getFeatureObjectIds","aggregateStore","getFeatureDisplayIdsForAggregate","map","getObjectId","timeInfo","_initAggregateQueryEngine","aggregateQueryEngine","targets","aggregate","params","slice","tiles","unsubscribe","clearInterval","isUpdating","console","log","updateCustomParameters","enableEvent","pause","clear","resume","pauseStream","resumeStream","sendMessageToSocket","sendMessageToClient","_initAggregateStore","removeHandles","valueRanges","added","removed","Promise","all","updateSchema","feature","updateFilters","describe","_set","applyUpdate","version","debug","mesh","clearTiles","onEdits","_ref","edits","objectId","_lookupObjectIdByGlobalId","globalId","addOrModified","_ref2","invalidate","edit","resend","refresh","dataChanged","empty","storage","filters","onTileClear","subscribe","_level","level","id","get","resolve","delete","_repushCurrentLevelTiles","_markAndSweep","querySummaryStatistics","_ref3","query","executeQueryForSummaryStatistics","queryAggregateSummaryStatistics","_ref4","queryUniqueValues","_ref5","executeQueryForUniqueValues","queryAggregateUniqueValues","_ref6","queryClassBreaks","_ref7","executeQueryForClassBreaks","queryAggregateClassBreaks","_ref8","queryHistogram","_ref9","executeQueryForHistogram","queryAggregateHistogram","_ref10","queryExtent","executeQueryForExtent","queryAggregates","executeQuery","queryAggregateCount","executeQueryForCount","queryAggregateIds","executeQueryForIds","queryFeatures","queryVisibleFeatures","objectIdFieldName","features","filter","getDisplayId","isVisible","queryFeatureCount","queryLatestObservations","executeQueryForLatestObservations","queryObjectIds","queryStatistics","storeStatistics","lookupObjectId","lookupDisplayId","getDisplayIdForReferenceId","getFeatures","getAggregate","referenceId","getFeature","push","aggregates","lookupFeatureByDisplayId","readHydratedGeometry","readAttributes","getAggregates","setHighlight","globalIdField","Error","forEach","readAttribute","key","addOrUpdate","end","fromOptimizedFeatures","remove","isRepush","status","_maybeForceCleanup","then","hasFeatures","onTileMessage","setArcadeSpatialReference","hasInstance","instance","onTileData","data","sendUpdates","loading","_mark","getInstanceId","add","set","getBitset","Set","readers","getCursor","next","forEachBufferId","sweepFeatures","sweepAggregates","sweepFeatureSets","constructOnly","prototype","readOnly","O","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/2d/layers/features/controllers/FeatureController2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import has from\"../../../../../core/has.js\";import{isNone as r,applySome as s,isSome as i,filterNones as a}from\"../../../../../core/maybe.js\";import{ignoreAbortErrors as o,after as n,throwIfAborted as u,throwIfNotAbortError as g,isAbortError as h}from\"../../../../../core/promiseUtils.js\";import{when as d,watch as c,whenOnce as l}from\"../../../../../core/reactiveUtils.js\";import{property as p}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import{subclass as y}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{convertToGeometry as f}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{QueryEngine as m}from\"../../../../../layers/graphics/data/QueryEngine.js\";import S from\"../../../../../layers/support/FieldsIndex.js\";import{FeatureStore2D as _}from\"../FeatureStore2D.js\";import{createSource as v}from\"../sources/createSource.js\";import b from\"../support/AttributeStore.js\";import{BinStore as I}from\"../support/BinStore.js\";import{ClusterStore as Q}from\"../support/ClusterStore.js\";import{ComputedAttributeStorage as C}from\"../support/ComputedAttributeStorage.js\";import{FeatureSetReaderJSON as E}from\"../support/FeatureSetReaderJSON.js\";import{UpdateToken as w}from\"../support/UpdateToken.js\";import{QueueProcessor as F}from\"../../../../support/QueueProcessor.js\";const T=5e3,k=\"tileRenderer.featuresView.attributeView.initialize\",j=\"tileRenderer.featuresView.attributeView.requestUpdate\",x=\"tileRenderer.featuresView.requestRender\";function R(e){return\"worker:port-closed\"===e.name}function A(e){if(!h(e)&&!R(e))throw e}function U(e){return\"feature\"===e.type&&\"snapshot\"===e.mode}let q=class extends t{constructor(){super(...arguments),this._storage=new C,this._markedIdsBufId=this._storage.createBitset(),this._lastCleanup=performance.now(),this._cleanupNeeded=!1,this._invalidated=!1,this._tileToResolver=new Map,this._didEdit=!1,this._updateVersion=1,this.tileStore=null,this.config=null,this.processor=null,this.remoteClient=null,this.service=null}initialize(){this._initStores(),this._initSource(),this._updateQueue=new F({concurrency:\"stream\"===this._source.type?1:4,process:(e,t)=>this._onTileMessage(e,{signal:t})}),this.addHandles([this.tileStore.on(\"update\",this.onTileUpdate.bind(this)),d((()=>!this.updating),(()=>this.onIdle()))]),this._checkUpdating=setInterval((()=>this.notifyChange(\"updating\")),300)}_initSource(){const e=this.tileStore.tileScheme,t=()=>this._updateQueue&&this._updateQueue.length<50,r=(e,t)=>(this._invalidated=!0,this._patchTile(e,t));this._source=v(this.service,this.spatialReference,e,r,t,this.featureStore),this._proxyEvents()}_proxyEvents(){if(\"stream\"===this._source.type){const e=this._source.events,t=this._source;this.addHandles([c((()=>t.connectionStatus),(e=>this.remoteClient.invoke(\"setProperty\",{propertyName:\"connectionStatus\",value:e}).catch(A)),{initial:!0}),c((()=>t.errorString),(e=>this.remoteClient.invoke(\"setProperty\",{propertyName:\"errorString\",value:e}).catch(A)),{initial:!0}),e.on(\"data-received\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"data-received\",event:{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry}}).catch(A))),e.on(\"message-received\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"message-received\",event:e}).catch(A))),e.on(\"updateRate\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"update-rate\",event:{...e}}).catch(A)))])}}_initAttributeStore(e){this.attributeStore||(this.attributeStore=new b({type:\"remote\",initialize:(e,t)=>o(this.remoteClient.invoke(k,e,{signal:t}).catch(A)),update:(e,t)=>o(this.remoteClient.invoke(j,e,{signal:t}).catch(A)),render:e=>o(this.remoteClient.invoke(x,void 0,{signal:e}).catch(A))},e,(()=>this.notifyChange(\"updating\"))))}_initStores(){const e=\"snapshot\"===this.service.type?\"snapshot\":\"on-demand\",t={geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.featureStore=new _(t,this._storage,e)}_initQueryEngine(e){const t=this;this.featureQueryEngine?.destroy(),this.featureQueryEngine=new m({definitionExpression:e.schema.source.definitionExpression??void 0,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,aggregateAdapter:{getFeatureObjectIds(e){if(r(t.aggregateStore))return[];return t.aggregateStore.getFeatureDisplayIdsForAggregate(e).map((e=>t.getObjectId(e)))}},timeInfo:this.service.timeInfo})}_initAggregateQueryEngine(e,t){if(this.aggregateQueryEngine?.destroy(),r(e))return;const s=t.targets.aggregate.params.fields.slice();this.aggregateQueryEngine=new m({definitionExpression:void 0,fields:s,geometryType:e.geometryInfo.geometryType,objectIdField:e.objectIdField,hasM:e.geometryInfo.hasM,hasZ:e.geometryInfo.hasZ,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!1,featureStore:e,aggregateAdapter:{getFeatureObjectIds:e=>[]}})}destroy(){this._updateQueue.destroy(),this._source.destroy(),this.featureQueryEngine?.destroy(),this.aggregateQueryEngine?.destroy(),this.attributeStore?.destroy();for(const e of this.tileStore.tiles)this._source.unsubscribe(e);clearInterval(this._checkUpdating)}get fieldsIndex(){return new S(this.service.fields)}get spatialReference(){return this.tileStore.tileScheme.spatialReference}get updating(){return this.isUpdating()}isUpdating(){const e=this._source.updating,t=!!this._updateQueue.length,r=!this.attributeStore||this.attributeStore.isUpdating(),s=e||t||r;return has(\"esri-2d-log-updating\")&&console.log(`Updating FeatureController2D: ${s}\\n  -> updatingSource ${e}\\n  -> updateQueue ${t}\\n  -> updatingAttributeStore ${r}\\n`),s}updateCustomParameters(e){\"stream\"===this._source.type&&this._source.updateCustomParameters(e)}enableEvent(e){this._source.enableEvent(e.name,e.value)}pause(){this._updateQueue.pause(),this._updateQueue.clear()}resume(){this._updateQueue.resume()}pauseStream(){\"stream\"===this._source.type&&this._source.pauseStream()}resumeStream(){\"stream\"===this._source.type&&this._source.resumeStream()}sendMessageToSocket(e){\"stream\"===this._source.type&&this._source.sendMessageToSocket(e)}sendMessageToClient(e){\"stream\"===this._source.type&&this._source.sendMessageToClient(e)}_initAggregateStore(e){const t=e.schema.targets?.aggregate?.type,r=s(this.config,(e=>e.schema.targets?.aggregate?.type));if(r!==t&&(i(this.aggregateStore)&&(this.removeHandles(\"valueRangesChanged\"),this.aggregateStore.destroy(),this.aggregateStore=null),t)){switch(t){case\"cluster\":{const e={geometryInfo:{geometryType:\"esriGeometryPoint\",hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.aggregateStore=new Q(e,this.spatialReference,this._storage,this.service),this.addHandles(this.aggregateStore.events.on(\"valueRangesChanged\",(e=>{this.remoteClient.invoke(\"emitEvent\",{name:\"valueRangesChanged\",event:{valueRanges:e.valueRanges}}).catch(A)})),\"valueRangesChanged\");break}case\"bin\":{const e={geometryInfo:{geometryType:\"esriGeometryPolygon\",hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.aggregateStore=new I(e,this.spatialReference,this._storage,this.service);break}}this.aggregateStore.onTileUpdate({added:this.tileStore.tiles,removed:[]})}}async update(e,t){this._updateVersion++,this._initQueryEngine(t),this._initAttributeStore(t),this.pause(),await Promise.all([this._source.update(e,t.schema.source),this.featureStore.updateSchema(e,t.schema.targets.feature),this.attributeStore.update(e,t),this.attributeStore.updateFilters(e,t,this)]),this._initAggregateStore(t),i(this.aggregateStore)&&await this.aggregateStore.updateSchema(e,t.schema.targets.aggregate),this._initAggregateQueryEngine(this.aggregateStore,t.schema),has(\"esri-2d-update-debug\")&&e.describe(),this._set(\"config\",t)}async applyUpdate(e){e.version=this._updateVersion,has(\"esri-2d-update-debug\")&&console.debug(`Applying update ${e.version}`),e.mesh&&this.clearTiles(),this._updateQueue.resume(),await this._source.applyUpdate(e),this.notifyChange(\"updating\"),await l((()=>!this.updating)),i(this.aggregateStore)&&(await n(10),await l((()=>!this.updating)))}async onEdits({edits:e}){has(\"esri-2d-update-debug\")&&console.debug(\"Applying Edit:\",e),this._didEdit=!0;try{const t=e.removed.map((e=>e.objectId&&-1!==e.objectId?e.objectId:this._lookupObjectIdByGlobalId(e.globalId))),r=e.addOrModified.map((({objectId:e})=>e));this.featureStore.invalidate(),await this._source.edit(r,t),this.clearTiles(),this.notifyChange(\"updating\"),i(this.aggregateStore)&&this.aggregateStore.clear(),await this._source.resend(),await l((()=>!this.updating))}catch(t){}}async refresh(e){if(!e.dataChanged){const e=w.empty();return e.storage.filters=!0,this.applyUpdate(e)}this.featureStore.invalidate(),this.clearTiles(),this._source.refresh(this._updateVersion,e),this._cleanupNeeded=!0,this.notifyChange(\"updating\"),await l((()=>!this.updating))}clearTiles(){for(const e of this.tileStore.tiles)this.processor.onTileClear(e)}onTileUpdate(e){i(this.aggregateStore)&&this.aggregateStore.onTileUpdate(e);for(const t of e.added)this._source.subscribe(t,this._updateVersion),this._level=t.level;for(const t of e.removed)this._source.unsubscribe(t),this._cleanupNeeded=!0,this._tileToResolver.has(t.id)&&(this._tileToResolver.get(t.id).resolve(),this._tileToResolver.delete(t.id));this.notifyChange(\"updating\")}async onIdle(){this._invalidated&&(this._invalidated=!1,(i(this.aggregateStore)||\"heatmap\"===this.processor.type)&&await this._repushCurrentLevelTiles()),this._markAndSweep()}async querySummaryStatistics({query:e,params:t}){return this.featureQueryEngine.executeQueryForSummaryStatistics(e,t)}async queryAggregateSummaryStatistics({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForSummaryStatistics(e,t)}async queryUniqueValues({query:e,params:t}){return this.featureQueryEngine.executeQueryForUniqueValues(e,t)}async queryAggregateUniqueValues({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForUniqueValues(e,t)}async queryClassBreaks({query:e,params:t}){return this.featureQueryEngine.executeQueryForClassBreaks(e,t)}async queryAggregateClassBreaks({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForClassBreaks(e,t)}async queryHistogram({query:e,params:t}){return this.featureQueryEngine.executeQueryForHistogram(e,t)}async queryAggregateHistogram({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForHistogram(e,t)}queryExtent(e){return this.featureQueryEngine.executeQueryForExtent(e)}queryAggregates(e){return this.aggregateQueryEngine.executeQuery(e)}queryAggregateCount(e){return this.aggregateQueryEngine.executeQueryForCount(e)}queryAggregateIds(e){return this.aggregateQueryEngine.executeQueryForIds(e)}queryFeatures(e){return this.featureQueryEngine.executeQuery(e)}async queryVisibleFeatures(e){const t=await this.featureQueryEngine.executeQuery(e),r=t.objectIdFieldName;return t.features=t.features.filter((e=>{const t=e.attributes[r],i=this.getDisplayId(t);return s(i,(e=>this.attributeStore.isVisible(e)))})),t}queryFeatureCount(e){return this.featureQueryEngine.executeQueryForCount(e)}queryLatestObservations(e){return this.featureQueryEngine.executeQueryForLatestObservations(e)}queryObjectIds(e){return this.featureQueryEngine.executeQueryForIds(e)}async queryStatistics(){return this.featureStore.storeStatistics}getObjectId(e){return this.featureStore.lookupObjectId(e,this._storage)}getDisplayId(e){if(i(this.aggregateStore)){const t=this.aggregateStore.getDisplayId(e);if(r(t)){const t=this.featureStore.lookupDisplayId(e);return this.aggregateStore.getDisplayIdForReferenceId(t)}return t}return this.featureStore.lookupDisplayId(e)}getFeatures(e){const t=[],r=[];for(const s of e){const e=i(this.aggregateStore)?this.getAggregate(s):null;if(i(e))if(i(e.attributes.referenceId)){const r=this.getFeature(e.attributes.referenceId);i(r)&&t.push(r)}else r.push(e);else{const e=this.getFeature(s);i(e)&&t.push(e)}}return{features:t,aggregates:r}}getFeature(e){const t=this.featureStore.lookupFeatureByDisplayId(e,this._storage);if(r(t))return null;const s=t.readHydratedGeometry(),i=f(s,t.geometryType,t.hasZ,t.hasM);return{attributes:t.readAttributes(),geometry:i}}getAggregate(e){return r(this.aggregateStore)?null:this.aggregateStore.getAggregate(e)}getAggregates(){return r(this.aggregateStore)?[]:this.aggregateStore.getAggregates()}async setHighlight(e){const t=a(e.map((e=>this.getDisplayId(e))));return this.attributeStore.setHighlight(e,t)}_lookupObjectIdByGlobalId(e){const t=this.service.globalIdField;if(r(t))throw new Error(\"Expected globalIdField to be defined\");let s=null;if(this.featureStore.forEach((r=>{e===r.readAttribute(t)&&(s=r.getObjectId())})),r(s))throw new Error(`Expected to find a feature with globalId ${e}`);return s}async _repushCurrentLevelTiles(){const e=this.tileStore.tiles.filter((e=>e.level===this._level));e.map((async e=>this._patchTile({type:\"append\",id:e.key.id,clear:!0,addOrUpdate:null,end:!1})));const t=e.map((async e=>this._patchTile({type:\"append\",id:e.key.id,addOrUpdate:E.fromOptimizedFeatures([],this.service),remove:[],end:!0,isRepush:!0,status:w.empty()})));await Promise.all(t)}_maybeForceCleanup(){performance.now()-this._lastCleanup>T&&this._markAndSweep()}_patchTile(e,t){const r=this._updateQueue.push(e,t).then((()=>{this.notifyChange(\"updating\")})).catch((e=>{this.notifyChange(\"updating\")}));return this.notifyChange(\"updating\"),r}async _onTileMessage(e,t){if(u(t),has(\"esri-2d-update-debug\")){const t=s(e.addOrUpdate,(e=>e.hasFeatures));console.debug(e.id,`FeatureController:onTileMessage: [clear:${e.clear}, end:${e.end}, features: ${t}]`)}const a=this.tileStore.get(e.id);if(!a)return;if(e.clear)return this.processor.onTileClear(a);const o=e.status;this._cleanupNeeded=!0;const n=[];for(const r of e.remove??[]){const e=this.featureStore.lookupDisplayId(r);e&&n.push(e)}e.remove=n;try{if(r(e.addOrUpdate))return void this.processor.onTileMessage(a,{...e,addOrUpdate:null},i(this.aggregateStore),t).catch(g);if(e.addOrUpdate.setArcadeSpatialReference(this.spatialReference),this.featureStore.hasInstance(e.addOrUpdate.instance)&&o.targets.feature||(o.targets.feature=!0,this.featureStore.onTileData(a,e)),!o.storage.data||!o.storage.filters){o.storage.data=!0,o.storage.filters=!0,this.attributeStore.onTileData(a,e);\"stream\"===this._source.type||this._didEdit?(await this.attributeStore.sendUpdates(),u(t)):this.attributeStore.sendUpdates()}if(i(this.aggregateStore)&&!o.targets.aggregate){o.targets.aggregate=!0;const t=U(this._source)&&this._source.loading,r=!U(this._source)||t||e.end;if(this.aggregateStore.onTileData(a,e,this._storage,this.attributeStore,r),!r)return;o.mesh||(this.attributeStore.onTileData(a,e),await this.attributeStore.sendUpdates())}if(!o.mesh){o.mesh=!0;const r=i(this.aggregateStore)&&\"cluster\"===this.aggregateStore.type;await this.processor.onTileMessage(a,e,r,t),u(t)}this._maybeForceCleanup()}catch(h){g(h)}}_mark(e,t,r){const s=(4294901760&this._storage.getInstanceId(e))>>>16;e&&(t.add(s),r.set(e))}_markAndSweep(){this._lastCleanup=performance.now();if(!(!(\"feature\"===this._source.type&&\"snapshot\"===this._source.mode)&&(\"stream\"===this._source.type||this._cleanupNeeded)))return;this._cleanupNeeded=!1;const e=this._storage.getBitset(this._markedIdsBufId),t=new Set;e.clear();for(const r of this.tileStore.tiles)for(const s of this._source.readers(r.id)){const r=s.getCursor();for(;r.next();){let s=r.getDisplayId();if(!s){const e=r.getObjectId();s=this.featureStore.lookupDisplayId(e)}this._mark(s,t,e)}}\"symbol\"===this.processor.type&&this.processor.forEachBufferId((r=>{this._mark(r,t,e)})),this._updateQueue.forEach((r=>{for(const s of r.remove??[]){const r=this.featureStore.lookupDisplayId(s);this._mark(r,t,e)}})),i(this.aggregateStore)&&(this.aggregateStore.sweepFeatures(e,this.featureStore),\"sweepAggregates\"in this.aggregateStore&&this.aggregateStore.sweepAggregates(this._storage,this.attributeStore,this._level)),this.featureStore.sweepFeatures(e,this._storage,this.attributeStore),this.featureStore.sweepFeatureSets(t)}};e([p({constructOnly:!0})],q.prototype,\"tileStore\",void 0),e([p()],q.prototype,\"config\",void 0),e([p({readOnly:!0})],q.prototype,\"fieldsIndex\",null),e([p()],q.prototype,\"processor\",void 0),e([p({constructOnly:!0})],q.prototype,\"remoteClient\",void 0),e([p({constructOnly:!0})],q.prototype,\"service\",void 0),e([p()],q.prototype,\"spatialReference\",null),e([p()],q.prototype,\"updating\",null),q=e([y(\"esri.views.2d.layers.features.controllers.FeatureController2D\")],q);const O=q;export{O as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}