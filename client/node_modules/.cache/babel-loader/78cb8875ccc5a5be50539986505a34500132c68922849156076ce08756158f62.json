{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Evented.js\";\nimport { someMap as t } from \"../../../core/MapUtils.js\";\nimport { GraphicsMap as s } from \"./GraphicsMap.js\";\nclass i extends e {\n  constructor(e) {\n    super(), this._limit = e, this._all = new s(), this._active = new a(this), this._pending = new Map(), this._handle = this._all.on(\"change\", e => this._handleChanges(e));\n  }\n  destroy() {\n    this._handle.remove();\n  }\n  get length() {\n    return this._active.length;\n  }\n  toArray() {\n    return this._active.toArray();\n  }\n  find(e) {\n    return this._active.find(e);\n  }\n  forEach(e) {\n    this._active.forEach(e);\n  }\n  addMany(e) {\n    this._all.addMany(e);\n  }\n  removeManyByObjectId(e) {\n    this._all.removeManyByObjectId(e);\n  }\n  _handleChanges(e) {\n    let t = e.removed;\n    if (this._pending.size > 0) {\n      t = new Array();\n      for (const s of e.removed) this._pending.delete(s.objectId) || t.push(s);\n    }\n    let s = this._limit - this._active.length + t.length;\n    s < e.added.length && (this._active.removeMany(t), t = [], h.reset(1 - this._limit / (this._active.length + e.added.length)), this._active.forEach(e => {\n      h.sample() && (t.push(e), this._pending.set(e.objectId, e));\n    }), s = this._limit - this._active.length + t.length);\n    let i = e.added;\n    if (s < e.added.length) {\n      i = new Array(), h.reset(s / e.added.length);\n      for (const t of e.added) h.sample() ? i.push(t) : this._pending.set(t.objectId, t);\n    }\n    const n = s - i.length;\n    n > 0 && this._pending.size > 0 && (h.reset(n / this._pending.size), this._pending.forEach(e => {\n      h.sample() && (i.push(e), this._pending.delete(e.objectId));\n    })), this._active.addAndRemove(i, t);\n  }\n}\nclass n {\n  constructor() {\n    this._percentage = 1, this._last = -1, this._index = 0;\n  }\n  reset(e) {\n    this._percentage = e, this._last = -1;\n  }\n  sample() {\n    const e = Math.floor(this._index * this._percentage);\n    return ++this._index, e !== this._last && (this._last = e, !0);\n  }\n}\nconst h = new n();\nclass a {\n  constructor(e) {\n    this._parent = e, this._map = new Map();\n  }\n  get length() {\n    return this._map.size;\n  }\n  forEach(e) {\n    this._map.forEach(t => e(t));\n  }\n  find(e) {\n    let s;\n    return t(this._map, t => !!e(t) && (s = t, !0)), s;\n  }\n  toArray() {\n    return [...this._map.values()];\n  }\n  addAndRemove(e, t) {\n    for (const s of e) this._map.set(s.objectId, s);\n    for (const s of t) this._map.delete(s.objectId);\n    (e.length > 0 || t.length > 0) && this._parent.emit(\"change\", {\n      added: e,\n      removed: t\n    });\n  }\n  removeMany(e) {\n    for (const t of e) this._map.delete(t.objectId);\n    e.length > 0 && this._parent.emit(\"change\", {\n      added: [],\n      removed: e\n    });\n  }\n}\nexport { i as LimitGraphicsMap };","map":{"version":3,"names":["e","someMap","t","GraphicsMap","s","i","constructor","_limit","_all","_active","a","_pending","Map","_handle","on","_handleChanges","destroy","remove","length","toArray","find","forEach","addMany","removeManyByObjectId","removed","size","Array","delete","objectId","push","added","removeMany","h","reset","sample","set","n","addAndRemove","_percentage","_last","_index","Math","floor","_parent","_map","values","emit","LimitGraphicsMap"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/LimitGraphicsMap.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Evented.js\";import{someMap as t}from\"../../../core/MapUtils.js\";import{GraphicsMap as s}from\"./GraphicsMap.js\";class i extends e{constructor(e){super(),this._limit=e,this._all=new s,this._active=new a(this),this._pending=new Map,this._handle=this._all.on(\"change\",(e=>this._handleChanges(e)))}destroy(){this._handle.remove()}get length(){return this._active.length}toArray(){return this._active.toArray()}find(e){return this._active.find(e)}forEach(e){this._active.forEach(e)}addMany(e){this._all.addMany(e)}removeManyByObjectId(e){this._all.removeManyByObjectId(e)}_handleChanges(e){let t=e.removed;if(this._pending.size>0){t=new Array;for(const s of e.removed)this._pending.delete(s.objectId)||t.push(s)}let s=this._limit-this._active.length+t.length;s<e.added.length&&(this._active.removeMany(t),t=[],h.reset(1-this._limit/(this._active.length+e.added.length)),this._active.forEach((e=>{h.sample()&&(t.push(e),this._pending.set(e.objectId,e))})),s=this._limit-this._active.length+t.length);let i=e.added;if(s<e.added.length){i=new Array,h.reset(s/e.added.length);for(const t of e.added)h.sample()?i.push(t):this._pending.set(t.objectId,t)}const n=s-i.length;n>0&&this._pending.size>0&&(h.reset(n/this._pending.size),this._pending.forEach((e=>{h.sample()&&(i.push(e),this._pending.delete(e.objectId))}))),this._active.addAndRemove(i,t)}}class n{constructor(){this._percentage=1,this._last=-1,this._index=0}reset(e){this._percentage=e,this._last=-1}sample(){const e=Math.floor(this._index*this._percentage);return++this._index,e!==this._last&&(this._last=e,!0)}}const h=new n;class a{constructor(e){this._parent=e,this._map=new Map}get length(){return this._map.size}forEach(e){this._map.forEach((t=>e(t)))}find(e){let s;return t(this._map,(t=>!!e(t)&&(s=t,!0))),s}toArray(){return[...this._map.values()]}addAndRemove(e,t){for(const s of e)this._map.set(s.objectId,s);for(const s of t)this._map.delete(s.objectId);(e.length>0||t.length>0)&&this._parent.emit(\"change\",{added:e,removed:t})}removeMany(e){for(const t of e)this._map.delete(t.objectId);e.length>0&&this._parent.emit(\"change\",{added:[],removed:e})}}export{i as LimitGraphicsMap};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}