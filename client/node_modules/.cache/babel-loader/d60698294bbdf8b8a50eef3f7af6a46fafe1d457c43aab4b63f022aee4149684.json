{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../Color.js\";\nimport t from \"../../request.js\";\nimport { unwrapOrThrow as a } from \"../../core/maybe.js\";\nimport { throwIfAborted as i } from \"../../core/promiseUtils.js\";\nimport { pt2px as r } from \"../../core/screenUtils.js\";\nimport { analyzeCIMSymbol as s, analyzeCIMResource as o } from \"./cimAnalyzer.js\";\nimport n from \"./CIMResourceManager.js\";\nimport { Transformation as c, CanvasDrawHelper as h } from \"./CIMSymbolDrawHelper.js\";\nimport { OverrideHelper as l, CIMSymbolHelper as m } from \"./CIMSymbolHelper.js\";\nimport g from \"./Rasterizer.js\";\nimport u from \"./TextRasterizer.js\";\nimport { mapCIMSymbolToGeometryType as f, createLabelOverrideFunction as d, evaluateValueOrFunction as p, colorToArray as y } from \"./utils.js\";\nimport { scaleCIMMarker as w } from \"../support/cimSymbolUtils.js\";\nimport { Symbol3DAnchorPosition2D as C } from \"../support/Symbol3DAnchorPosition2D.js\";\nvar M;\n!function (e) {\n  e.Legend = \"legend\", e.Preview = \"preview\";\n}(M || (M = {}));\nconst _ = e => e && e.scaleFactor ? e.scaleFactor : 1,\n  v = 96 / 72;\nclass z {\n  constructor(e, t) {\n    this._spatialReference = e, this._avoidSDF = t, this._resourceCache = new Map(), this._imageDataCanvas = null, this._pictureMarkerCache = new Map(), this._textRasterizer = new u(), this._cimResourceManager = new n(), this._rasterizer = new g(this._cimResourceManager);\n  }\n  get resourceManager() {\n    return this._cimResourceManager;\n  }\n  async rasterizeCIMSymbolAsync(e, t, a, i, r, s, o, n) {\n    if (!e) return null;\n    const {\n      data: g\n    } = e;\n    if (!g || \"CIMSymbolReference\" !== g.type || !g.symbol) return null;\n    const {\n      symbol: u\n    } = g;\n    s || (s = f(u));\n    const d = await l.resolveSymbolOverrides(g, t, this._spatialReference, r, s, o, n);\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const p = this._imageDataCanvas,\n      y = this._cimResourceManager,\n      w = [];\n    m.fetchResources(d, y, w), w.length > 0 && (await Promise.all(w));\n    const {\n        width: C,\n        height: M\n      } = a,\n      _ = I(s, C, M, i),\n      z = m.getEnvelope(d, _, y);\n    if (!z) return null;\n    const x = (window.devicePixelRatio || 1) * v;\n    let R = 1,\n      b = 0,\n      P = 0;\n    switch (u.type) {\n      case \"CIMPointSymbol\":\n      case \"CIMTextSymbol\":\n        {\n          let e = 1;\n          z.width > C && (e = C / z.width);\n          let t = 1;\n          z.height > M && (t = M / z.height), \"preview\" === i && (z.width < C && (e = C / z.width), z.height < M && (t = M / z.height)), R = Math.min(e, t), b = z.x + z.width / 2, P = z.y + z.height / 2;\n        }\n        break;\n      case \"CIMLineSymbol\":\n        {\n          let e = 1;\n          z.height > M && (e = M / z.height), R = e, P = z.y + z.height / 2;\n          const t = z.x * R + C / 2,\n            a = (z.x + z.width) * R + C / 2;\n          if (t < 0) {\n            const {\n              paths: e\n            } = _;\n            e[0][0][0] -= t;\n          }\n          if (a > C) {\n            const {\n              paths: e\n            } = _;\n            e[0][2][0] -= a - C;\n          }\n        }\n        break;\n      case \"CIMPolygonSymbol\":\n        {\n          b = z.x + z.width / 2, P = z.y + z.height / 2;\n          const e = z.x * R + C / 2,\n            t = (z.x + z.width) * R + C / 2,\n            a = z.y * R + M / 2,\n            i = (z.y + z.height) * R + M / 2,\n            {\n              rings: r\n            } = _;\n          e < 0 && (r[0][0][0] -= e, r[0][3][0] -= e, r[0][4][0] -= e), a < 0 && (r[0][0][1] += a, r[0][1][1] += a, r[0][4][1] += a), t > C && (r[0][1][0] -= t - C, r[0][2][0] -= t - C), i > M && (r[0][2][1] += i - M, r[0][3][1] += i - M);\n        }\n    }\n    p.width = C * x, p.height = M * x;\n    const D = 1;\n    p.width += 2 * D, p.height += 2 * D;\n    const S = p.getContext(\"2d\"),\n      k = c.createIdentity();\n    k.translate(-b, -P), k.scale(R * x, -R * x), k.translate(C * x / 2 + D, M * x / 2 + D), S.clearRect(0, 0, p.width, p.height);\n    return new h(S, y, k, !0).drawSymbol(d, _), S.getImageData(0, 0, p.width, p.height);\n  }\n  async analyzeCIMSymbol(e, t, a, r, o) {\n    const n = [],\n      c = t ? {\n        geometryType: r,\n        spatialReference: this._spatialReference,\n        fields: t\n      } : null;\n    let h;\n    await s(e.data, c, this._cimResourceManager, n, this._avoidSDF), i(o);\n    for (const i of n) \"CIMPictureMarker\" !== i.cim.type && \"CIMPictureFill\" !== i.cim.type && \"CIMPictureStroke\" !== i.cim.type || (h || (h = []), h.push(this._fetchPictureMarkerResource(i, o))), a && \"text\" === i.type && \"string\" == typeof i.text && i.text.includes(\"[\") && (i.text = d(a, i.text, i.cim.textCase));\n    return h && (await Promise.all(h)), n;\n  }\n  rasterizeCIMSymbol3D(e, t, a, i, r, s) {\n    const o = [];\n    for (const n of e) {\n      i && \"function\" == typeof i.scaleFactor && (i.scaleFactor = i.scaleFactor(t, r, s));\n      const e = this._getRasterizedResource(n, t, a, i, r, s);\n      if (!e) continue;\n      let c = 0,\n        h = e.anchorX || 0,\n        l = e.anchorY || 0,\n        m = !1,\n        g = 0,\n        u = 0;\n      if (\"esriGeometryPoint\" === a) {\n        const e = _(i);\n        if (g = p(n.offsetX, t, r, s) * e || 0, u = p(n.offsetY, t, r, s) * e || 0, \"marker\" === n.type) c = p(n.rotation, t, r, s) || 0, m = !!n.rotateClockwise && n.rotateClockwise;else if (\"text\" === n.type) {\n          if (c = p(n.angle, t, r, s) || 0, void 0 !== n.horizontalAlignment) switch (n.horizontalAlignment) {\n            case \"left\":\n              h = -.5;\n              break;\n            case \"right\":\n              h = .5;\n              break;\n            default:\n              h = 0;\n          }\n          if (void 0 !== n.verticalAlignment) switch (n.verticalAlignment) {\n            case \"top\":\n              l = .5;\n              break;\n            case \"bottom\":\n              l = -.5;\n              break;\n            case \"baseline\":\n              l = -.25;\n              break;\n            default:\n              l = 0;\n          }\n        }\n      }\n      null != e && o.push({\n        angle: c,\n        rotateClockWise: m,\n        anchorX: h,\n        anchorY: l,\n        offsetX: g,\n        offsetY: u,\n        rasterizedResource: e\n      });\n    }\n    return this.getSymbolImage(o);\n  }\n  getSymbolImage(e) {\n    const t = document.createElement(\"canvas\"),\n      i = a(t.getContext(\"2d\"));\n    let s = 0,\n      o = 0,\n      n = 0,\n      c = 0;\n    const h = [];\n    for (let a = 0; a < e.length; a++) {\n      const t = e[a],\n        l = t.rasterizedResource;\n      if (!l) continue;\n      const m = l.size,\n        g = t.offsetX,\n        u = t.offsetY,\n        f = t.anchorX,\n        d = t.anchorY,\n        p = t.rotateClockWise || !1;\n      let y = t.angle,\n        w = r(g) - m[0] * (.5 + f),\n        C = r(u) - m[1] * (.5 + d),\n        M = w + m[0],\n        _ = C + m[1];\n      if (y) {\n        p && (y = -y);\n        const e = Math.sin(y * Math.PI / 180),\n          t = Math.cos(y * Math.PI / 180),\n          a = w * t - C * e,\n          i = w * e + C * t,\n          r = w * t - _ * e,\n          s = w * e + _ * t,\n          o = M * t - _ * e,\n          n = M * e + _ * t,\n          c = M * t - C * e,\n          h = M * e + C * t;\n        w = Math.min(a, r, o, c), C = Math.min(i, s, n, h), M = Math.max(a, r, o, c), _ = Math.max(i, s, n, h);\n      }\n      s = w < s ? w : s, o = C < o ? C : o, n = M > n ? M : n, c = _ > c ? _ : c;\n      const v = i.createImageData(l.size[0], l.size[1]);\n      v.data.set(new Uint8ClampedArray(l.image.buffer));\n      const z = {\n        offsetX: g,\n        offsetY: u,\n        rotateClockwise: p,\n        angle: y,\n        rasterizedImage: v,\n        anchorX: f,\n        anchorY: d\n      };\n      h.push(z);\n    }\n    t.width = n - s, t.height = c - o;\n    const l = -s,\n      m = c;\n    for (let a = 0; a < h.length; a++) {\n      const e = h[a],\n        t = this._imageDataToCanvas(e.rasterizedImage),\n        s = e.rasterizedImage.width,\n        o = e.rasterizedImage.height,\n        n = l - s * (.5 + e.anchorX),\n        c = m - o * (.5 - e.anchorY);\n      if (e.angle) {\n        const a = (360 - e.angle) * Math.PI / 180;\n        i.save(), i.translate(r(e.offsetX), -r(e.offsetY)), i.translate(l, m), i.rotate(a), i.translate(-l, -m), i.drawImage(t, n, c), i.restore();\n      } else i.drawImage(t, n + r(e.offsetX), c - r(e.offsetY));\n    }\n    const g = new C({\n      x: l / t.width - .5,\n      y: m / t.height - .5\n    });\n    return {\n      imageData: 0 !== t.width && 0 !== t.height ? i.getImageData(0, 0, t.width, t.height) : i.createImageData(1, 1),\n      anchorPosition: g\n    };\n  }\n  async _fetchPictureMarkerResource(e, a) {\n    const i = e.materialHash;\n    if (!this._pictureMarkerCache.get(i)) {\n      const r = (await t(e.cim.url, {\n        responseType: \"image\",\n        signal: a && a.signal\n      })).data;\n      this._pictureMarkerCache.set(i, r);\n    }\n  }\n  _imageDataToCanvas(e) {\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const t = this._imageDataCanvas,\n      i = a(t.getContext(\"2d\"));\n    return t.width = e.width, t.height = e.height, i.putImageData(e, 0, 0), t;\n  }\n  _imageTo32Array(t, i, r, s) {\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const o = this._imageDataCanvas,\n      n = a(o.getContext(\"2d\"));\n    if (o.width = i, o.height = r, n.drawImage(t, 0, 0, i, r), s) {\n      n.save();\n      const a = new e(s);\n      n.fillStyle = a.toHex(), n.globalCompositeOperation = \"multiply\", n.fillRect(0, 0, i, r), n.globalCompositeOperation = \"destination-atop\", n.drawImage(t, 0, 0, i, r), n.restore();\n    }\n    return new Uint32Array(n.getImageData(0, 0, i, r).data.buffer);\n  }\n  _getRasterizedResource(e, t, i, r, s, o) {\n    let n, c, h;\n    const l = null,\n      m = null;\n    if (\"text\" === e.type) return this._rasterizeTextResource(e, t, r, s, o);\n    ({\n      analyzedCIM: n,\n      hash: c\n    } = x(e, t, s, o));\n    const g = _(r);\n    if (\"CIMPictureMarker\" === e.cim.type) {\n      const i = p(e.size, t, s, o) * g,\n        {\n          image: r,\n          width: n,\n          height: c\n        } = a(this._getPictureResource(e, i, p(e.color, t, s, o)));\n      return h = {\n        image: r,\n        size: [n, c],\n        sdf: !1,\n        simplePattern: !1,\n        anchorX: e.anchorPoint ? e.anchorPoint.x : 0,\n        anchorY: e.anchorPoint ? e.anchorPoint.y : 0\n      }, h;\n    }\n    w(n, g, {\n      preserveOutlineWidth: !1\n    });\n    const u = n;\n    c += i, r && (c += JSON.stringify(r));\n    const f = this._resourceCache;\n    return f.has(c) ? f.get(c) : (h = this._rasterizer.rasterizeJSONResource({\n      cim: u,\n      type: e.type,\n      url: e.url,\n      mosaicHash: c,\n      size: l,\n      path: m\n    }, window.devicePixelRatio || 1, this._avoidSDF), f.set(c, h), h);\n  }\n  _rasterizeTextResource(e, t, a, i, r) {\n    const s = _(a),\n      o = p(e.text, t, i, r);\n    if (!o || 0 === o.length) return null;\n    const n = p(e.fontName, t, i, r),\n      c = p(e.style, t, i, r),\n      h = p(e.weight, t, i, r),\n      l = p(e.decoration, t, i, r),\n      m = p(e.size, t, i, r) * s,\n      g = p(e.horizontalAlignment, t, i, r),\n      u = p(e.verticalAlignment, t, i, r),\n      f = y(p(e.color, t, i, r)),\n      d = y(p(e.outlineColor, t, i, r)),\n      w = {\n        color: f,\n        size: m,\n        horizontalAlignment: g,\n        verticalAlignment: u,\n        font: {\n          family: n,\n          style: c,\n          weight: h,\n          decoration: l\n        },\n        halo: {\n          size: p(e.outlineSize, t, i, r) || 0,\n          color: d,\n          style: c\n        },\n        pixelRatio: 1,\n        premultiplyColors: !this._avoidSDF\n      };\n    return this._textRasterizer.rasterizeText(o, w);\n  }\n  _getPictureResource(e, t, a) {\n    const i = this._pictureMarkerCache.get(e.materialHash);\n    if (!i) return null;\n    const s = i.height / i.width,\n      o = t ? s > 1 ? r(t) : r(t) / s : i.width,\n      n = t ? s > 1 ? r(t) * s : r(t) : i.height;\n    return {\n      image: this._imageTo32Array(i, o, n, a),\n      width: o,\n      height: n\n    };\n  }\n}\nfunction I(e, t, a, i) {\n  const r = 1,\n    s = -t / 2 + r,\n    o = t / 2 - r,\n    n = a / 2 - r,\n    c = -a / 2 + r;\n  switch (e) {\n    case \"esriGeometryPoint\":\n      return {\n        x: 0,\n        y: 0\n      };\n    case \"esriGeometryPolyline\":\n      return {\n        paths: [[[s, 0], [0, 0], [o, 0]]]\n      };\n    default:\n      return \"legend\" === i ? {\n        rings: [[[s, n], [o, 0], [o, c], [s, c], [s, n]]]\n      } : {\n        rings: [[[s, n], [o, n], [o, c], [s, c], [s, n]]]\n      };\n  }\n}\nfunction x(e, t, a, i) {\n  let r, s;\n  if (\"function\" == typeof e.materialHash) {\n    r = (0, e.materialHash)(t, a, i), s = o(e.cim, e.materialOverrides);\n  } else r = e.materialHash, s = e.cim;\n  return {\n    analyzedCIM: s,\n    hash: r\n  };\n}\nexport { z as CIMSymbolRasterizer, M as GeometryStyle };","map":{"version":3,"names":["e","t","unwrapOrThrow","a","throwIfAborted","i","pt2px","r","analyzeCIMSymbol","s","analyzeCIMResource","o","n","Transformation","c","CanvasDrawHelper","h","OverrideHelper","l","CIMSymbolHelper","m","g","u","mapCIMSymbolToGeometryType","f","createLabelOverrideFunction","d","evaluateValueOrFunction","p","colorToArray","y","scaleCIMMarker","w","Symbol3DAnchorPosition2D","C","M","Legend","Preview","_","scaleFactor","v","z","constructor","_spatialReference","_avoidSDF","_resourceCache","Map","_imageDataCanvas","_pictureMarkerCache","_textRasterizer","_cimResourceManager","_rasterizer","resourceManager","rasterizeCIMSymbolAsync","data","type","symbol","resolveSymbolOverrides","document","createElement","fetchResources","length","Promise","all","width","height","I","getEnvelope","x","window","devicePixelRatio","R","b","P","Math","min","paths","rings","D","S","getContext","k","createIdentity","translate","scale","clearRect","drawSymbol","getImageData","geometryType","spatialReference","fields","cim","push","_fetchPictureMarkerResource","text","includes","textCase","rasterizeCIMSymbol3D","_getRasterizedResource","anchorX","anchorY","offsetX","offsetY","rotation","rotateClockwise","angle","horizontalAlignment","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","size","sin","PI","cos","max","createImageData","set","Uint8ClampedArray","image","buffer","rasterizedImage","_imageDataToCanvas","save","rotate","drawImage","restore","imageData","anchorPosition","materialHash","get","url","responseType","signal","putImageData","_imageTo32Array","fillStyle","toHex","globalCompositeOperation","fillRect","Uint32Array","_rasterizeTextResource","analyzedCIM","hash","_getPictureResource","color","sdf","simplePattern","anchorPoint","preserveOutlineWidth","JSON","stringify","has","rasterizeJSONResource","mosaicHash","path","fontName","style","weight","decoration","outlineColor","font","family","halo","outlineSize","pixelRatio","premultiplyColors","rasterizeText","materialOverrides","CIMSymbolRasterizer","GeometryStyle"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../request.js\";import{unwrapOrThrow as a}from\"../../core/maybe.js\";import{throwIfAborted as i}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{analyzeCIMSymbol as s,analyzeCIMResource as o}from\"./cimAnalyzer.js\";import n from\"./CIMResourceManager.js\";import{Transformation as c,CanvasDrawHelper as h}from\"./CIMSymbolDrawHelper.js\";import{OverrideHelper as l,CIMSymbolHelper as m}from\"./CIMSymbolHelper.js\";import g from\"./Rasterizer.js\";import u from\"./TextRasterizer.js\";import{mapCIMSymbolToGeometryType as f,createLabelOverrideFunction as d,evaluateValueOrFunction as p,colorToArray as y}from\"./utils.js\";import{scaleCIMMarker as w}from\"../support/cimSymbolUtils.js\";import{Symbol3DAnchorPosition2D as C}from\"../support/Symbol3DAnchorPosition2D.js\";var M;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(M||(M={}));const _=e=>e&&e.scaleFactor?e.scaleFactor:1,v=96/72;class z{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._imageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new u,this._cimResourceManager=new n,this._rasterizer=new g(this._cimResourceManager)}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,a,i,r,s,o,n){if(!e)return null;const{data:g}=e;if(!g||\"CIMSymbolReference\"!==g.type||!g.symbol)return null;const{symbol:u}=g;s||(s=f(u));const d=await l.resolveSymbolOverrides(g,t,this._spatialReference,r,s,o,n);this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const p=this._imageDataCanvas,y=this._cimResourceManager,w=[];m.fetchResources(d,y,w),w.length>0&&await Promise.all(w);const{width:C,height:M}=a,_=I(s,C,M,i),z=m.getEnvelope(d,_,y);if(!z)return null;const x=(window.devicePixelRatio||1)*v;let R=1,b=0,P=0;switch(u.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":{let e=1;z.width>C&&(e=C/z.width);let t=1;z.height>M&&(t=M/z.height),\"preview\"===i&&(z.width<C&&(e=C/z.width),z.height<M&&(t=M/z.height)),R=Math.min(e,t),b=z.x+z.width/2,P=z.y+z.height/2}break;case\"CIMLineSymbol\":{let e=1;z.height>M&&(e=M/z.height),R=e,P=z.y+z.height/2;const t=z.x*R+C/2,a=(z.x+z.width)*R+C/2;if(t<0){const{paths:e}=_;e[0][0][0]-=t}if(a>C){const{paths:e}=_;e[0][2][0]-=a-C}}break;case\"CIMPolygonSymbol\":{b=z.x+z.width/2,P=z.y+z.height/2;const e=z.x*R+C/2,t=(z.x+z.width)*R+C/2,a=z.y*R+M/2,i=(z.y+z.height)*R+M/2,{rings:r}=_;e<0&&(r[0][0][0]-=e,r[0][3][0]-=e,r[0][4][0]-=e),a<0&&(r[0][0][1]+=a,r[0][1][1]+=a,r[0][4][1]+=a),t>C&&(r[0][1][0]-=t-C,r[0][2][0]-=t-C),i>M&&(r[0][2][1]+=i-M,r[0][3][1]+=i-M)}}p.width=C*x,p.height=M*x;const D=1;p.width+=2*D,p.height+=2*D;const S=p.getContext(\"2d\"),k=c.createIdentity();k.translate(-b,-P),k.scale(R*x,-R*x),k.translate(C*x/2+D,M*x/2+D),S.clearRect(0,0,p.width,p.height);return new h(S,y,k,!0).drawSymbol(d,_),S.getImageData(0,0,p.width,p.height)}async analyzeCIMSymbol(e,t,a,r,o){const n=[],c=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null;let h;await s(e.data,c,this._cimResourceManager,n,this._avoidSDF),i(o);for(const i of n)\"CIMPictureMarker\"!==i.cim.type&&\"CIMPictureFill\"!==i.cim.type&&\"CIMPictureStroke\"!==i.cim.type||(h||(h=[]),h.push(this._fetchPictureMarkerResource(i,o))),a&&\"text\"===i.type&&\"string\"==typeof i.text&&i.text.includes(\"[\")&&(i.text=d(a,i.text,i.cim.textCase));return h&&await Promise.all(h),n}rasterizeCIMSymbol3D(e,t,a,i,r,s){const o=[];for(const n of e){i&&\"function\"==typeof i.scaleFactor&&(i.scaleFactor=i.scaleFactor(t,r,s));const e=this._getRasterizedResource(n,t,a,i,r,s);if(!e)continue;let c=0,h=e.anchorX||0,l=e.anchorY||0,m=!1,g=0,u=0;if(\"esriGeometryPoint\"===a){const e=_(i);if(g=p(n.offsetX,t,r,s)*e||0,u=p(n.offsetY,t,r,s)*e||0,\"marker\"===n.type)c=p(n.rotation,t,r,s)||0,m=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=p(n.angle,t,r,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":h=-.5;break;case\"right\":h=.5;break;default:h=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":l=.5;break;case\"bottom\":l=-.5;break;case\"baseline\":l=-.25;break;default:l=0}}}null!=e&&o.push({angle:c,rotateClockWise:m,anchorX:h,anchorY:l,offsetX:g,offsetY:u,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),i=a(t.getContext(\"2d\"));let s=0,o=0,n=0,c=0;const h=[];for(let a=0;a<e.length;a++){const t=e[a],l=t.rasterizedResource;if(!l)continue;const m=l.size,g=t.offsetX,u=t.offsetY,f=t.anchorX,d=t.anchorY,p=t.rotateClockWise||!1;let y=t.angle,w=r(g)-m[0]*(.5+f),C=r(u)-m[1]*(.5+d),M=w+m[0],_=C+m[1];if(y){p&&(y=-y);const e=Math.sin(y*Math.PI/180),t=Math.cos(y*Math.PI/180),a=w*t-C*e,i=w*e+C*t,r=w*t-_*e,s=w*e+_*t,o=M*t-_*e,n=M*e+_*t,c=M*t-C*e,h=M*e+C*t;w=Math.min(a,r,o,c),C=Math.min(i,s,n,h),M=Math.max(a,r,o,c),_=Math.max(i,s,n,h)}s=w<s?w:s,o=C<o?C:o,n=M>n?M:n,c=_>c?_:c;const v=i.createImageData(l.size[0],l.size[1]);v.data.set(new Uint8ClampedArray(l.image.buffer));const z={offsetX:g,offsetY:u,rotateClockwise:p,angle:y,rasterizedImage:v,anchorX:f,anchorY:d};h.push(z)}t.width=n-s,t.height=c-o;const l=-s,m=c;for(let a=0;a<h.length;a++){const e=h[a],t=this._imageDataToCanvas(e.rasterizedImage),s=e.rasterizedImage.width,o=e.rasterizedImage.height,n=l-s*(.5+e.anchorX),c=m-o*(.5-e.anchorY);if(e.angle){const a=(360-e.angle)*Math.PI/180;i.save(),i.translate(r(e.offsetX),-r(e.offsetY)),i.translate(l,m),i.rotate(a),i.translate(-l,-m),i.drawImage(t,n,c),i.restore()}else i.drawImage(t,n+r(e.offsetX),c-r(e.offsetY))}const g=new C({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?i.getImageData(0,0,t.width,t.height):i.createImageData(1,1),anchorPosition:g}}async _fetchPictureMarkerResource(e,a){const i=e.materialHash;if(!this._pictureMarkerCache.get(i)){const r=(await t(e.cim.url,{responseType:\"image\",signal:a&&a.signal})).data;this._pictureMarkerCache.set(i,r)}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,i=a(t.getContext(\"2d\"));return t.width=e.width,t.height=e.height,i.putImageData(e,0,0),t}_imageTo32Array(t,i,r,s){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const o=this._imageDataCanvas,n=a(o.getContext(\"2d\"));if(o.width=i,o.height=r,n.drawImage(t,0,0,i,r),s){n.save();const a=new e(s);n.fillStyle=a.toHex(),n.globalCompositeOperation=\"multiply\",n.fillRect(0,0,i,r),n.globalCompositeOperation=\"destination-atop\",n.drawImage(t,0,0,i,r),n.restore()}return new Uint32Array(n.getImageData(0,0,i,r).data.buffer)}_getRasterizedResource(e,t,i,r,s,o){let n,c,h;const l=null,m=null;if(\"text\"===e.type)return this._rasterizeTextResource(e,t,r,s,o);({analyzedCIM:n,hash:c}=x(e,t,s,o));const g=_(r);if(\"CIMPictureMarker\"===e.cim.type){const i=p(e.size,t,s,o)*g,{image:r,width:n,height:c}=a(this._getPictureResource(e,i,p(e.color,t,s,o)));return h={image:r,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},h}w(n,g,{preserveOutlineWidth:!1});const u=n;c+=i,r&&(c+=JSON.stringify(r));const f=this._resourceCache;return f.has(c)?f.get(c):(h=this._rasterizer.rasterizeJSONResource({cim:u,type:e.type,url:e.url,mosaicHash:c,size:l,path:m},window.devicePixelRatio||1,this._avoidSDF),f.set(c,h),h)}_rasterizeTextResource(e,t,a,i,r){const s=_(a),o=p(e.text,t,i,r);if(!o||0===o.length)return null;const n=p(e.fontName,t,i,r),c=p(e.style,t,i,r),h=p(e.weight,t,i,r),l=p(e.decoration,t,i,r),m=p(e.size,t,i,r)*s,g=p(e.horizontalAlignment,t,i,r),u=p(e.verticalAlignment,t,i,r),f=y(p(e.color,t,i,r)),d=y(p(e.outlineColor,t,i,r)),w={color:f,size:m,horizontalAlignment:g,verticalAlignment:u,font:{family:n,style:c,weight:h,decoration:l},halo:{size:p(e.outlineSize,t,i,r)||0,color:d,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,w)}_getPictureResource(e,t,a){const i=this._pictureMarkerCache.get(e.materialHash);if(!i)return null;const s=i.height/i.width,o=t?s>1?r(t):r(t)/s:i.width,n=t?s>1?r(t)*s:r(t):i.height;return{image:this._imageTo32Array(i,o,n,a),width:o,height:n}}}function I(e,t,a,i){const r=1,s=-t/2+r,o=t/2-r,n=a/2-r,c=-a/2+r;switch(e){case\"esriGeometryPoint\":return{x:0,y:0};case\"esriGeometryPolyline\":return{paths:[[[s,0],[0,0],[o,0]]]};default:return\"legend\"===i?{rings:[[[s,n],[o,0],[o,c],[s,c],[s,n]]]}:{rings:[[[s,n],[o,n],[o,c],[s,c],[s,n]]]}}}function x(e,t,a,i){let r,s;if(\"function\"==typeof e.materialHash){r=(0,e.materialHash)(t,a,i),s=o(e.cim,e.materialOverrides)}else r=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:r}}export{z as CIMSymbolRasterizer,M as GeometryStyle};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}