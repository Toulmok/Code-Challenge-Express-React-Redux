{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { isSome as r } from \"../../../../core/maybe.js\";\nimport { property as s } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../../../../geometry/Extent.js\";\nimport { QueryEngine as o } from \"../../../../layers/graphics/data/QueryEngine.js\";\nimport i from \"../../../../rest/support/FeatureSet.js\";\nimport u from \"../../../../rest/support/Query.js\";\nimport { featureGeometryTypeKebabDictionary as y } from \"../../../../geometry/support/typeUtils.js\";\nconst c = o;\nlet p = class extends t {\n  get layer() {\n    return this.context.layer;\n  }\n  get spatialReference() {\n    return this.context.spatialReference;\n  }\n  get _queryGeometryType() {\n    switch (this.layer.geometryType) {\n      case \"multipoint\":\n      case \"point\":\n      case \"polygon\":\n      case \"polyline\":\n        return this.layer.geometryType;\n      case \"mesh\":\n        return \"polygon\";\n      default:\n        return;\n    }\n  }\n  get defaultQueryJSON() {\n    return new u({\n      outSpatialReference: this.spatialReference\n    }).toJSON();\n  }\n  get _dataQueryEngine() {\n    return this._ensureDataQueryEngine();\n  }\n  constructor(e) {\n    super(e), this._dataQueryEngineInstance = null;\n  }\n  destroy() {\n    this.clear();\n  }\n  clear() {\n    return !!this._dataQueryEngineInstance && (this._dataQueryEngineInstance.destroy(), this._dataQueryEngineInstance = null, !0);\n  }\n  async executeQueryForIdSet(e, t, r) {\n    return this._dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(e, t), r);\n  }\n  async executeQueryForCount(e, t) {\n    return this._dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e), t);\n  }\n  async executeQueryForExtent(e, t) {\n    const {\n      count: r,\n      extent: s\n    } = await this._dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e), t);\n    return {\n      count: r,\n      extent: a.fromJSON(s)\n    };\n  }\n  async executeQueryForIds(e, t) {\n    return this._dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e), t);\n  }\n  async executeQueryForLatestObservations(e, t) {\n    const r = await this._dataQueryEngine.executeQueryForLatestObservations(this._ensureQueryJSON(e), t),\n      s = i.fromJSON(r);\n    return s.features.forEach(e => {\n      e.layer = this.layer, e.sourceLayer = this.layer;\n    }), s;\n  }\n  async executeQuery(e, t) {\n    const r = await this._dataQueryEngine.executeQuery(this._ensureQueryJSON(e), t),\n      s = i.fromJSON(r);\n    return s.features.forEach(e => {\n      e.layer = this.layer, e.sourceLayer = this.layer;\n    }), s;\n  }\n  _ensureQueryJSON(e, t) {\n    let s = this.defaultQueryJSON;\n    if (r(e) && (\"outSpatialReference\" in e && !e.outSpatialReference && (e.outSpatialReference = this.spatialReference), s = e.toJSON()), r(t)) {\n      const e = t.geometries.map(e => e.toJSON()).reduce((e, t) => (e.rings = e.rings.concat(t.rings), e));\n      s = {\n        ...s,\n        sceneFilter: {\n          ...t,\n          geometry: e\n        }\n      };\n    }\n    return s;\n  }\n  _ensureDataQueryEngine() {\n    if (this._dataQueryEngineInstance) return this._dataQueryEngineInstance;\n    const e = \"timeInfo\" in this.layer && this.layer.timeInfo && this.layer.timeInfo.toJSON() || null,\n      t = this.layer.objectIdField,\n      r = y.toJSON(this._queryGeometryType),\n      s = this.layer.fields?.map(e => e.toJSON()) ?? [],\n      n = this.priority,\n      a = this.spatialReference.toJSON(),\n      {\n        hasZ: o,\n        hasM: i,\n        featureStore: u,\n        scheduler: p\n      } = this.context;\n    return this._dataQueryEngineInstance = new c({\n      hasZ: o,\n      hasM: i,\n      geometryType: r,\n      fields: s,\n      timeInfo: e,\n      spatialReference: a,\n      objectIdField: t,\n      featureStore: u,\n      scheduler: p,\n      priority: n\n    }), this._dataQueryEngineInstance;\n  }\n};\ne([s({\n  constructOnly: !0\n})], p.prototype, \"context\", void 0), e([s({\n  constructOnly: !0\n})], p.prototype, \"priority\", void 0), e([s()], p.prototype, \"layer\", null), e([s()], p.prototype, \"spatialReference\", null), e([s()], p.prototype, \"_queryGeometryType\", null), e([s()], p.prototype, \"defaultQueryJSON\", null), p = e([n(\"esri.views.3d.layers.graphics.QueryEngine\")], p);\nexport { p as QueryEngine };","map":{"version":3,"names":["_","e","t","isSome","r","property","s","subclass","n","a","QueryEngine","o","i","u","featureGeometryTypeKebabDictionary","y","c","p","layer","context","spatialReference","_queryGeometryType","geometryType","defaultQueryJSON","outSpatialReference","toJSON","_dataQueryEngine","_ensureDataQueryEngine","constructor","_dataQueryEngineInstance","destroy","clear","executeQueryForIdSet","_ensureQueryJSON","executeQueryForCount","executeQueryForExtent","count","extent","fromJSON","executeQueryForIds","executeQueryForLatestObservations","features","forEach","sourceLayer","executeQuery","geometries","map","reduce","rings","concat","sceneFilter","geometry","timeInfo","objectIdField","fields","priority","hasZ","hasM","featureStore","scheduler","constructOnly","prototype"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../core/Accessor.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../geometry/Extent.js\";import{QueryEngine as o}from\"../../../../layers/graphics/data/QueryEngine.js\";import i from\"../../../../rest/support/FeatureSet.js\";import u from\"../../../../rest/support/Query.js\";import{featureGeometryTypeKebabDictionary as y}from\"../../../../geometry/support/typeUtils.js\";const c=o;let p=class extends t{get layer(){return this.context.layer}get spatialReference(){return this.context.spatialReference}get _queryGeometryType(){switch(this.layer.geometryType){case\"multipoint\":case\"point\":case\"polygon\":case\"polyline\":return this.layer.geometryType;case\"mesh\":return\"polygon\";default:return}}get defaultQueryJSON(){return new u({outSpatialReference:this.spatialReference}).toJSON()}get _dataQueryEngine(){return this._ensureDataQueryEngine()}constructor(e){super(e),this._dataQueryEngineInstance=null}destroy(){this.clear()}clear(){return!!this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null,!0)}async executeQueryForIdSet(e,t,r){return this._dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(e,t),r)}async executeQueryForCount(e,t){return this._dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),t)}async executeQueryForExtent(e,t){const{count:r,extent:s}=await this._dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),t);return{count:r,extent:a.fromJSON(s)}}async executeQueryForIds(e,t){return this._dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),t)}async executeQueryForLatestObservations(e,t){const r=await this._dataQueryEngine.executeQueryForLatestObservations(this._ensureQueryJSON(e),t),s=i.fromJSON(r);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}async executeQuery(e,t){const r=await this._dataQueryEngine.executeQuery(this._ensureQueryJSON(e),t),s=i.fromJSON(r);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}_ensureQueryJSON(e,t){let s=this.defaultQueryJSON;if(r(e)&&(\"outSpatialReference\"in e&&!e.outSpatialReference&&(e.outSpatialReference=this.spatialReference),s=e.toJSON()),r(t)){const e=t.geometries.map((e=>e.toJSON())).reduce(((e,t)=>(e.rings=e.rings.concat(t.rings),e)));s={...s,sceneFilter:{...t,geometry:e}}}return s}_ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=\"timeInfo\"in this.layer&&this.layer.timeInfo&&this.layer.timeInfo.toJSON()||null,t=this.layer.objectIdField,r=y.toJSON(this._queryGeometryType),s=this.layer.fields?.map((e=>e.toJSON()))??[],n=this.priority,a=this.spatialReference.toJSON(),{hasZ:o,hasM:i,featureStore:u,scheduler:p}=this.context;return this._dataQueryEngineInstance=new c({hasZ:o,hasM:i,geometryType:r,fields:s,timeInfo:e,spatialReference:a,objectIdField:t,featureStore:u,scheduler:p,priority:n}),this._dataQueryEngineInstance}};e([s({constructOnly:!0})],p.prototype,\"context\",void 0),e([s({constructOnly:!0})],p.prototype,\"priority\",void 0),e([s()],p.prototype,\"layer\",null),e([s()],p.prototype,\"spatialReference\",null),e([s()],p.prototype,\"_queryGeometryType\",null),e([s()],p.prototype,\"defaultQueryJSON\",null),p=e([n(\"esri.views.3d.layers.graphics.QueryEngine\")],p);export{p as QueryEngine};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}