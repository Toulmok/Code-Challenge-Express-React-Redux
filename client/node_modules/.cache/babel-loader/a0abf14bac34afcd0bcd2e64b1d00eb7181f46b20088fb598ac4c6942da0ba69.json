{"ast":null,"code":"import { base64UrlEncode } from \"./base-64-url.js\";\n/**\n * Utility to hash the codeVerifier using sha256\n */\nexport function generateCodeChallenge(codeVerifier) {\n  var win = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n  /* istanbul ignore next: must pass in a mockwindow for tests so we can't cover the other branch */\n  if (!win && window) {\n    win = window;\n  }\n  if (codeVerifier && win.isSecureContext && win.crypto && win.crypto.subtle) {\n    var encoder = new win.TextEncoder();\n    var bytes = encoder.encode(codeVerifier);\n    return win.crypto.subtle.digest(\"SHA-256\", bytes).then(function (buffer) {\n      return base64UrlEncode(new Uint8Array(buffer), win);\n    });\n  }\n  return Promise.resolve(null);\n}","map":{"version":3,"names":["base64UrlEncode","generateCodeChallenge","codeVerifier","win","arguments","length","undefined","window","isSecureContext","crypto","subtle","encoder","TextEncoder","bytes","encode","digest","then","buffer","Uint8Array","Promise","resolve"],"sources":["C:\\code-challenge-react\\node_modules\\@esri\\arcgis-rest-request\\src\\utils\\generate-code-challenge.ts"],"sourcesContent":["import { base64UrlEncode } from \"./base-64-url.js\";\n\n/**\n * Utility to hash the codeVerifier using sha256\n */\nexport function generateCodeChallenge(codeVerifier: string, win = window) {\n  /* istanbul ignore next: must pass in a mockwindow for tests so we can't cover the other branch */\n  if (!win && window) {\n    win = window;\n  }\n\n  if (codeVerifier && win.isSecureContext && win.crypto && win.crypto.subtle) {\n    const encoder = new win.TextEncoder();\n    const bytes = encoder.encode(codeVerifier);\n\n    return win.crypto.subtle\n      .digest(\"SHA-256\", bytes)\n      .then((buffer) => base64UrlEncode(new Uint8Array(buffer), win));\n  }\n\n  return Promise.resolve(null);\n}\n"],"mappings":"AAAA,SAASA,eAAe,QAAQ,kBAAkB;AAElD;;;AAGA,OAAM,SAAUC,qBAAqBA,CAACC,YAAoB,EAAc;EAAA,IAAZC,GAAG,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGG,MAAM;EACtE;EACA,IAAI,CAACJ,GAAG,IAAII,MAAM,EAAE;IAClBJ,GAAG,GAAGI,MAAM;;EAGd,IAAIL,YAAY,IAAIC,GAAG,CAACK,eAAe,IAAIL,GAAG,CAACM,MAAM,IAAIN,GAAG,CAACM,MAAM,CAACC,MAAM,EAAE;IAC1E,IAAMC,OAAO,GAAG,IAAIR,GAAG,CAACS,WAAW,EAAE;IACrC,IAAMC,KAAK,GAAGF,OAAO,CAACG,MAAM,CAACZ,YAAY,CAAC;IAE1C,OAAOC,GAAG,CAACM,MAAM,CAACC,MAAM,CACrBK,MAAM,CAAC,SAAS,EAAEF,KAAK,CAAC,CACxBG,IAAI,CAAC,UAACC,MAAM;MAAA,OAAKjB,eAAe,CAAC,IAAIkB,UAAU,CAACD,MAAM,CAAC,EAAEd,GAAG,CAAC;IAAA,EAAC;;EAGnE,OAAOgB,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;AAC9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}