{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as r } from \"../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../core/Logger.js\";\nimport { property as i } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as s } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { WhereClause as o } from \"../../../../core/sql/WhereClause.js\";\nimport { findFieldsCaseInsensitive as n } from \"../i3s/I3SUtil.js\";\nconst t = t => {\n  let a = class extends t {\n    constructor() {\n      super(...arguments), this._definitionExpressionErrors = 0, this._maxDefinitionExpressionErrors = 20, this.logError = r => {\n        this._definitionExpressionErrors < this._maxDefinitionExpressionErrors && e.getLogger(this.declaredClass).error(\"Error while evaluating definitionExpression: \" + r), this._definitionExpressionErrors++, this._definitionExpressionErrors === this._maxDefinitionExpressionErrors && e.getLogger(this.declaredClass).error(\"Further errors are ignored\");\n      };\n    }\n    get parsedDefinitionExpression() {\n      if (!this.i3slayer || !this.i3slayer.definitionExpression) return null;\n      try {\n        const r = o.create(this.i3slayer.definitionExpression, this.i3slayer.fieldsIndex);\n        if (!r.isStandardized) return e.getLogger(this.declaredClass).error(\"definitionExpression is using non standard function\"), null;\n        const i = [],\n          s = r.fieldNames;\n        return n(s, this.i3slayer.fields, {\n          missingFields: i\n        }), i.length > 0 ? (e.getLogger(this.declaredClass).error(`definitionExpression references unknown fields: ${i.join(\", \")}`), null) : (this._definitionExpressionErrors = 0, r);\n      } catch (r) {\n        return e.getLogger(this.declaredClass).error(\"Failed to parse definitionExpression: \" + r), null;\n      }\n    }\n    get definitionExpressionFields() {\n      return this.parsedDefinitionExpression ? this.parsedDefinitionExpression.fieldNames : [];\n    }\n    _evaluateClause(r, e) {\n      try {\n        return r.testFeature(e);\n      } catch (i) {\n        return this.logError(i), !1;\n      }\n    }\n    _addDefinitionExpressionToQuery(r) {\n      if (!this.parsedDefinitionExpression) return r;\n      const e = this.i3slayer.definitionExpression,\n        i = r.clone();\n      return i.where ? i.where = `(${e}) AND (${i.where})` : i.where = e, i;\n    }\n  };\n  return r([i()], a.prototype, \"i3slayer\", void 0), r([i({\n    readOnly: !0\n  })], a.prototype, \"parsedDefinitionExpression\", null), r([i({\n    readOnly: !0\n  })], a.prototype, \"definitionExpressionFields\", null), a = r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")], a), a;\n};\nexport { t as DefinitionExpressionSceneLayerView };","map":{"version":3,"names":["_","r","e","property","i","subclass","s","WhereClause","o","findFieldsCaseInsensitive","n","t","a","constructor","arguments","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","getLogger","declaredClass","error","parsedDefinitionExpression","i3slayer","definitionExpression","create","fieldsIndex","isStandardized","fieldNames","fields","missingFields","length","join","definitionExpressionFields","_evaluateClause","testFeature","_addDefinitionExpressionToQuery","clone","where","prototype","readOnly","DefinitionExpressionSceneLayerView"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=t=>{let a=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&e.getLogger(this.declaredClass).error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&e.getLogger(this.declaredClass).error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer||!this.i3slayer.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return e.getLogger(this.declaredClass).error(\"definitionExpression is using non standard function\"),null;const i=[],s=r.fieldNames;return n(s,this.i3slayer.fields,{missingFields:i}),i.length>0?(e.getLogger(this.declaredClass).error(`definitionExpression references unknown fields: ${i.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return e.getLogger(this.declaredClass).error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],a.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],a.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],a.prototype,\"definitionExpressionFields\",null),a=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],a),a};export{t as DefinitionExpressionSceneLayerView};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}