{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport r from \"../core/Collection.js\";\nimport t from \"../core/Error.js\";\nimport { HandleOwnerMixin as s } from \"../core/HandleOwner.js\";\nimport i from \"../core/Handles.js\";\nimport { loadAll as o } from \"../core/loadAll.js\";\nimport { destroyMaybe as a, isSome as n, unwrapOr as l } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as u } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as p, whenOrAbort as y } from \"../core/promiseUtils.js\";\nimport { watch as d, sync as c } from \"../core/reactiveUtils.js\";\nimport { sqlAnd as h } from \"../core/sql.js\";\nimport { urlToObject as m, join as f } from \"../core/urlUtils.js\";\nimport { property as b } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/arrayUtils.js\";\nimport { reader as g } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as j } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { OriginId as w, nameToId as v } from \"../core/accessorSupport/PropertyOrigin.js\";\nimport S from \"./Layer.js\";\nimport { APIKeyMixin as L } from \"./mixins/APIKeyMixin.js\";\nimport { ArcGISService as F } from \"./mixins/ArcGISService.js\";\nimport { BlendLayer as _ } from \"./mixins/BlendLayer.js\";\nimport { CustomParametersMixin as x } from \"./mixins/CustomParametersMixin.js\";\nimport { EditBusLayer as I } from \"./mixins/EditBusLayer.js\";\nimport { FeatureLayerBase as C } from \"./mixins/FeatureLayerBase.js\";\nimport { OperationalLayer as P } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as E } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as O } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as T } from \"./mixins/ScaleRangeLayer.js\";\nimport { TemporalLayer as U } from \"./mixins/TemporalLayer.js\";\nimport { titleFromUrlAndName as G } from \"./support/arcgisLayerUrl.js\";\nimport { id as q } from \"./support/commonProperties.js\";\nimport { ensureLayerCredential as A, computeEffectiveEditingEnabled as $, addAttachment as M, updateAttachment as R, applyEdits as k, createQuery as N, deleteAttachments as Q, fetchRecomputedExtents as D, queryAttachments as H, queryObjectIds as V, queryFeatureCount as B, queryExtent as J, queryRelatedFeatures as z, queryRelatedFeaturesCount as K, hasDataChanged as Z } from \"./support/featureLayerUtils.js\";\nimport { defineFieldProperties as W } from \"./support/fieldProperties.js\";\nimport { fixTimeInfoFields as X } from \"./support/fieldUtils.js\";\nimport Y from \"./support/Subtype.js\";\nimport ee from \"./support/SubtypeSublayer.js\";\nimport re from \"./support/TimeInfo.js\";\nimport { serviceSupportsSpatialReference as te } from \"./support/versionUtils.js\";\nimport se from \"../rest/support/Query.js\";\nconst ie = \"SubtypeGroupLayer\",\n  oe = \"esri.layers.SubtypeGroupLayer\";\nfunction ae(e, r) {\n  return new t(\"layer:unsupported\", `Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${r}`, {\n    layer: e\n  });\n}\nconst ne = W();\nlet le = class extends C(I(_(U(T(O(F(P(E(u(x(L(s(S))))))))))))) {\n  constructor() {\n    super(...arguments), this._handles = new i(), this._sublayersCollectionChanged = !1, this._sublayerLookup = new Map(), this.fields = null, this.fieldsIndex = null, this.outFields = null, this.subtypes = null, this.sublayers = new (r.ofType(ee))(), this.timeInfo = null, this.title = \"Layer\", this.type = \"subtype-group\", this.addHandles(d(() => this.sublayers, (e, r) => this._handleSublayersChange(e, r), c));\n  }\n  destroy() {\n    this.source?.destroy(), this._handles = a(this._handles);\n  }\n  normalizeCtorArgs(e, r) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...r\n    } : e;\n  }\n  load(e) {\n    const r = n(e) ? e.signal : null,\n      s = this.loadFromPortal({\n        supportedTypes: [\"Feature Service\"]\n      }, e).catch(p).then(async () => {\n        if (!this.url) throw new t(\"subtype-grouplayer:missing-url-or-source\", \"SubtypeGroupLayer must be created with either a url or a portal item\");\n        if (null == this.layerId) throw new t(\"subtype-grouplayer:missing-layerid\", \"layerId is required for a SubtypeGroupLayer created with url\");\n        return this._initLayerProperties(await this.createGraphicsSource(r));\n      }).then(() => this._setUserPrivileges(this.serviceItemId, e)).then(() => A(this, e));\n    return this.addResolvingPromise(s), Promise.resolve(this);\n  }\n  get createQueryVersion() {\n    return this.commitProperty(\"definitionExpression\"), this.commitProperty(\"timeExtent\"), this.commitProperty(\"timeOffset\"), this.commitProperty(\"geometryType\"), this.commitProperty(\"gdbVersion\"), this.commitProperty(\"historicMoment\"), this.commitProperty(\"returnZ\"), this.commitProperty(\"capabilities\"), this.commitProperty(\"returnM\"), (this._get(\"createQueryVersion\") ?? 0) + 1;\n  }\n  get editingEnabled() {\n    return this.loaded && null != this.capabilities && this.capabilities.operations.supportsEditing && this.userHasEditingPrivileges;\n  }\n  get effectiveEditingEnabled() {\n    return $(this);\n  }\n  get parsedUrl() {\n    const e = m(this.url);\n    return null != e && null != this.layerId && (e.path = f(e.path, this.layerId.toString())), e;\n  }\n  set source(e) {\n    this._get(\"source\") !== e && this._set(\"source\", e);\n  }\n  readTitleFromService(e, _ref) {\n    let {\n      name: r\n    } = _ref;\n    return this.url ? G(this.url, r) : r;\n  }\n  async addAttachment(e, r) {\n    return M(this, e, r, ie);\n  }\n  async updateAttachment(e, r, t) {\n    return R(this, e, r, t, ie);\n  }\n  async applyEdits(e, r) {\n    return k(this, e, r);\n  }\n  on(e, r) {\n    return super.on(e, r);\n  }\n  async createGraphicsSource(e) {\n    const {\n      default: r\n    } = await y(import(\"./graphics/sources/FeatureLayerSource.js\"), e);\n    return new r({\n      layer: this\n    }).load({\n      signal: e\n    });\n  }\n  createQuery() {\n    const e = N(this),\n      r = this.sublayers.map(e => e.subtypeCode);\n    return e.where = h(`${this.subtypeField} IN (${r.join(\",\")})`, this.definitionExpression), e;\n  }\n  async deleteAttachments(e, r) {\n    return Q(this, e, r, ie);\n  }\n  async fetchRecomputedExtents(e) {\n    return D(this, e, ie);\n  }\n  getFieldDomain(e, r) {\n    return this._getLayerDomain(e);\n  }\n  getField(e) {\n    return this.fieldsIndex.get(e);\n  }\n  findSublayerForFeature(e) {\n    const r = this.fieldsIndex.get(this.subtypeField),\n      t = e.attributes[r.name];\n    return this._sublayerLookup.get(t);\n  }\n  loadAll() {\n    return o(this, e => {\n      e(this.sublayers);\n    });\n  }\n  async queryAttachments(e, r) {\n    return H(this, e, r, ie);\n  }\n  async queryFeatures(e, r) {\n    const t = await this.load(),\n      s = se.from(e) ?? t.createQuery(),\n      i = l(s.outFields, []);\n    i.includes(this.subtypeField) || (i.push(this.subtypeField), s.outFields = i);\n    const o = await t.source.queryFeatures(s, r);\n    if (o?.features) for (const a of o.features) a.layer = a.sourceLayer = this.findSublayerForFeature(a);\n    return o;\n  }\n  async queryObjectIds(e, r) {\n    return V(this, e, r, ie);\n  }\n  async queryFeatureCount(e, r) {\n    return B(this, e, r, ie);\n  }\n  async queryExtent(e, r) {\n    return J(this, e, r, ie);\n  }\n  async queryRelatedFeatures(e, r) {\n    return z(this, e, r, ie);\n  }\n  async queryRelatedFeaturesCount(e, r) {\n    return K(this, e, r, ie);\n  }\n  write(e, r) {\n    const {\n      origin: s,\n      layerContainerType: i,\n      messages: o\n    } = r;\n    if (this.isTable) {\n      if (\"web-scene\" === s || \"web-map\" === s && \"tables\" !== i) return o?.push(ae(this, \"using a table source cannot be written to web scenes and web maps\")), null;\n    } else if (this.loaded && \"web-map\" === s && \"tables\" === i) return o?.push(ae(this, \"using a non-table source cannot be written to tables in web maps\")), null;\n    return this.sublayers?.length ? super.write(e, r) : (o?.push(new t(\"web-document-write:invalid-property\", `Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`, {\n      layer: this\n    })), null);\n  }\n  serviceSupportsSpatialReference(e) {\n    return !!this.loaded && te(this, e);\n  }\n  _getLayerDomain(e) {\n    const r = this.fieldsIndex.get(e);\n    return r ? r.domain : null;\n  }\n  async _initLayerProperties(e) {\n    this._set(\"source\", e);\n    const {\n      sourceJSON: r\n    } = e;\n    if (r && (this.sourceJSON = r, this.read(r, {\n      origin: \"service\",\n      url: this.parsedUrl\n    })), this.isTable) throw new t(\"subtype-grouplayer:unsupported-source\", \"SubtypeGroupLayer cannot be created using a layer with table source\");\n    if (!this.subtypes?.length) throw new t(\"subtype-grouplayer:missing-subtypes\", \"SubtypeGroupLayer must be created using a layer with subtypes\");\n    this._verifyFields(), X(this.timeInfo, this.fieldsIndex);\n  }\n  async hasDataChanged() {\n    return Z(this);\n  }\n  _verifyFields() {\n    const e = this.parsedUrl?.path ?? \"undefined\";\n    this.objectIdField || console.log(\"SubtypeGroupLayer: 'objectIdField' property is not defined (url: \" + e + \")\"), this.isTable || -1 !== e.search(/\\/FeatureServer\\//i) || this.fields?.some(e => \"geometry\" === e.type) || console.log(\"SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: \" + e + \")\");\n  }\n  _handleSublayersChange(e, r) {\n    r && (r.forEach(e => {\n      e.parent = null;\n    }), this.handles.remove(\"sublayers-owner\"), this._sublayerLookup.clear()), e && (e.forEach(e => {\n      e.parent = this, this._sublayerLookup.set(e.subtypeCode, e);\n    }), this._sublayersCollectionChanged = !1, this.handles.add([e.on(\"after-add\", _ref2 => {\n      let {\n        item: e\n      } = _ref2;\n      e.parent = this, this._sublayerLookup.set(e.subtypeCode, e);\n    }), e.on(\"after-remove\", _ref3 => {\n      let {\n        item: e\n      } = _ref3;\n      e.parent = null, this._sublayerLookup.delete(e.subtypeCode);\n    }), e.on(\"after-changes\", () => {\n      this._sublayersCollectionChanged = !0;\n    })], \"sublayers-owner\"));\n  }\n};\ne([b({\n  readOnly: !0\n})], le.prototype, \"createQueryVersion\", null), e([b({\n  readOnly: !0\n})], le.prototype, \"editingEnabled\", null), e([b({\n  readOnly: !0\n})], le.prototype, \"effectiveEditingEnabled\", null), e([b({\n  ...ne.fields,\n  readOnly: !0,\n  json: {\n    origins: {\n      service: {\n        read: !0\n      }\n    },\n    read: !1\n  }\n})], le.prototype, \"fields\", void 0), e([b(ne.fieldsIndex)], le.prototype, \"fieldsIndex\", void 0), e([b(q)], le.prototype, \"id\", void 0), e([b({\n  type: [\"show\", \"hide\", \"hide-children\"]\n})], le.prototype, \"listMode\", void 0), e([b({\n  value: \"SubtypeGroupLayer\",\n  type: [\"SubtypeGroupLayer\"]\n})], le.prototype, \"operationalLayerType\", void 0), e([b(ne.outFields)], le.prototype, \"outFields\", void 0), e([b({\n  readOnly: !0\n})], le.prototype, \"parsedUrl\", null), e([b()], le.prototype, \"source\", null), e([b({\n  type: [Y],\n  readOnly: !0,\n  json: {\n    read: !1,\n    origins: {\n      service: {\n        read: !0\n      }\n    }\n  }\n})], le.prototype, \"subtypes\", void 0), e([b({\n  type: r.ofType(ee),\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"subtypes\",\n          reader: (e, t, s) => {\n            const i = e.map(_ref4 => {\n              let {\n                code: e\n              } = _ref4;\n              const r = new ee({\n                subtypeCode: e\n              });\n              return r.read(t, s), r;\n            });\n            return new (r.ofType(ee))(i);\n          }\n        }\n      }\n    },\n    name: \"layers\",\n    write: {\n      overridePolicy(e, r, t) {\n        const s = this.originOf(\"sublayers\"),\n          i = w.PORTAL_ITEM;\n        let o = !0;\n        if (v(s) === i && v(t.origin) > i) {\n          const r = e.some(e => e.hasUserOverrides());\n          o = this._sublayersCollectionChanged || r;\n        }\n        return {\n          enabled: o,\n          ignoreOrigin: !0\n        };\n      }\n    }\n  }\n})], le.prototype, \"sublayers\", void 0), e([b({\n  type: re\n})], le.prototype, \"timeInfo\", void 0), e([b({\n  json: {\n    origins: {\n      \"portal-item\": {\n        write: {\n          ignoreOrigin: !0,\n          writerEnsuresNonNull: !0\n        }\n      }\n    }\n  }\n})], le.prototype, \"title\", void 0), e([g(\"service\", \"title\", [\"name\"])], le.prototype, \"readTitleFromService\", null), e([b({\n  json: {\n    read: !1\n  }\n})], le.prototype, \"type\", void 0), le = e([j(oe)], le);\nconst ue = le;\nexport { ue as default };","map":{"version":3,"names":["_","e","r","t","HandleOwnerMixin","s","i","loadAll","o","destroyMaybe","a","isSome","n","unwrapOr","l","MultiOriginJSONMixin","u","throwIfAbortError","p","whenOrAbort","y","watch","d","sync","c","sqlAnd","h","urlToObject","m","join","f","property","b","reader","g","subclass","j","OriginId","w","nameToId","v","S","APIKeyMixin","L","ArcGISService","F","BlendLayer","CustomParametersMixin","x","EditBusLayer","I","FeatureLayerBase","C","OperationalLayer","P","PortalLayer","E","RefreshableLayer","O","ScaleRangeLayer","T","TemporalLayer","U","titleFromUrlAndName","G","id","q","ensureLayerCredential","A","computeEffectiveEditingEnabled","$","addAttachment","M","updateAttachment","R","applyEdits","k","createQuery","N","deleteAttachments","Q","fetchRecomputedExtents","D","queryAttachments","H","queryObjectIds","V","queryFeatureCount","B","queryExtent","J","queryRelatedFeatures","z","queryRelatedFeaturesCount","K","hasDataChanged","Z","defineFieldProperties","W","fixTimeInfoFields","X","Y","ee","re","serviceSupportsSpatialReference","te","se","ie","oe","ae","title","declaredClass","layer","ne","le","constructor","arguments","_handles","_sublayersCollectionChanged","_sublayerLookup","Map","fields","fieldsIndex","outFields","subtypes","sublayers","ofType","timeInfo","type","addHandles","_handleSublayersChange","destroy","source","normalizeCtorArgs","url","load","signal","loadFromPortal","supportedTypes","catch","then","layerId","_initLayerProperties","createGraphicsSource","_setUserPrivileges","serviceItemId","addResolvingPromise","Promise","resolve","createQueryVersion","commitProperty","_get","editingEnabled","loaded","capabilities","operations","supportsEditing","userHasEditingPrivileges","effectiveEditingEnabled","parsedUrl","path","toString","_set","readTitleFromService","_ref","name","on","default","map","subtypeCode","where","subtypeField","definitionExpression","getFieldDomain","_getLayerDomain","getField","get","findSublayerForFeature","attributes","queryFeatures","from","includes","push","features","sourceLayer","write","origin","layerContainerType","messages","isTable","length","domain","sourceJSON","read","_verifyFields","objectIdField","console","log","search","some","forEach","parent","handles","remove","clear","set","add","_ref2","item","_ref3","delete","readOnly","prototype","json","origins","service","value","_ref4","code","overridePolicy","originOf","PORTAL_ITEM","hasUserOverrides","enabled","ignoreOrigin","writerEnsuresNonNull","ue"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/SubtypeGroupLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as s}from\"../core/HandleOwner.js\";import i from\"../core/Handles.js\";import{loadAll as o}from\"../core/loadAll.js\";import{destroyMaybe as a,isSome as n,unwrapOr as l}from\"../core/maybe.js\";import{MultiOriginJSONMixin as u}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as p,whenOrAbort as y}from\"../core/promiseUtils.js\";import{watch as d,sync as c}from\"../core/reactiveUtils.js\";import{sqlAnd as h}from\"../core/sql.js\";import{urlToObject as m,join as f}from\"../core/urlUtils.js\";import{property as b}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{reader as g}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as j}from\"../core/accessorSupport/decorators/subclass.js\";import{OriginId as w,nameToId as v}from\"../core/accessorSupport/PropertyOrigin.js\";import S from\"./Layer.js\";import{APIKeyMixin as L}from\"./mixins/APIKeyMixin.js\";import{ArcGISService as F}from\"./mixins/ArcGISService.js\";import{BlendLayer as _}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as x}from\"./mixins/CustomParametersMixin.js\";import{EditBusLayer as I}from\"./mixins/EditBusLayer.js\";import{FeatureLayerBase as C}from\"./mixins/FeatureLayerBase.js\";import{OperationalLayer as P}from\"./mixins/OperationalLayer.js\";import{PortalLayer as E}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as O}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as T}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as U}from\"./mixins/TemporalLayer.js\";import{titleFromUrlAndName as G}from\"./support/arcgisLayerUrl.js\";import{id as q}from\"./support/commonProperties.js\";import{ensureLayerCredential as A,computeEffectiveEditingEnabled as $,addAttachment as M,updateAttachment as R,applyEdits as k,createQuery as N,deleteAttachments as Q,fetchRecomputedExtents as D,queryAttachments as H,queryObjectIds as V,queryFeatureCount as B,queryExtent as J,queryRelatedFeatures as z,queryRelatedFeaturesCount as K,hasDataChanged as Z}from\"./support/featureLayerUtils.js\";import{defineFieldProperties as W}from\"./support/fieldProperties.js\";import{fixTimeInfoFields as X}from\"./support/fieldUtils.js\";import Y from\"./support/Subtype.js\";import ee from\"./support/SubtypeSublayer.js\";import re from\"./support/TimeInfo.js\";import{serviceSupportsSpatialReference as te}from\"./support/versionUtils.js\";import se from\"../rest/support/Query.js\";const ie=\"SubtypeGroupLayer\",oe=\"esri.layers.SubtypeGroupLayer\";function ae(e,r){return new t(\"layer:unsupported\",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${r}`,{layer:e})}const ne=W();let le=class extends(C(I(_(U(T(O(F(P(E(u(x(L(s(S)))))))))))))){constructor(...e){super(...e),this._handles=new i,this._sublayersCollectionChanged=!1,this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.subtypes=null,this.sublayers=new(r.ofType(ee)),this.timeInfo=null,this.title=\"Layer\",this.type=\"subtype-group\",this.addHandles(d((()=>this.sublayers),((e,r)=>this._handleSublayersChange(e,r)),c))}destroy(){this.source?.destroy(),this._handles=a(this._handles)}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=n(e)?e.signal:null,s=this.loadFromPortal({supportedTypes:[\"Feature Service\"]},e).catch(p).then((async()=>{if(!this.url)throw new t(\"subtype-grouplayer:missing-url-or-source\",\"SubtypeGroupLayer must be created with either a url or a portal item\");if(null==this.layerId)throw new t(\"subtype-grouplayer:missing-layerid\",\"layerId is required for a SubtypeGroupLayer created with url\");return this._initLayerProperties(await this.createGraphicsSource(r))})).then((()=>this._setUserPrivileges(this.serviceItemId,e))).then((()=>A(this,e)));return this.addResolvingPromise(s),Promise.resolve(this)}get createQueryVersion(){return this.commitProperty(\"definitionExpression\"),this.commitProperty(\"timeExtent\"),this.commitProperty(\"timeOffset\"),this.commitProperty(\"geometryType\"),this.commitProperty(\"gdbVersion\"),this.commitProperty(\"historicMoment\"),this.commitProperty(\"returnZ\"),this.commitProperty(\"capabilities\"),this.commitProperty(\"returnM\"),(this._get(\"createQueryVersion\")??0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return $(this)}get parsedUrl(){const e=m(this.url);return null!=e&&null!=this.layerId&&(e.path=f(e.path,this.layerId.toString())),e}set source(e){this._get(\"source\")!==e&&this._set(\"source\",e)}readTitleFromService(e,{name:r}){return this.url?G(this.url,r):r}async addAttachment(e,r){return M(this,e,r,ie)}async updateAttachment(e,r,t){return R(this,e,r,t,ie)}async applyEdits(e,r){return k(this,e,r)}on(e,r){return super.on(e,r)}async createGraphicsSource(e){const{default:r}=await y(import(\"./graphics/sources/FeatureLayerSource.js\"),e);return new r({layer:this}).load({signal:e})}createQuery(){const e=N(this),r=this.sublayers.map((e=>e.subtypeCode));return e.where=h(`${this.subtypeField} IN (${r.join(\",\")})`,this.definitionExpression),e}async deleteAttachments(e,r){return Q(this,e,r,ie)}async fetchRecomputedExtents(e){return D(this,e,ie)}getFieldDomain(e,r){return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}findSublayerForFeature(e){const r=this.fieldsIndex.get(this.subtypeField),t=e.attributes[r.name];return this._sublayerLookup.get(t)}loadAll(){return o(this,(e=>{e(this.sublayers)}))}async queryAttachments(e,r){return H(this,e,r,ie)}async queryFeatures(e,r){const t=await this.load(),s=se.from(e)??t.createQuery(),i=l(s.outFields,[]);i.includes(this.subtypeField)||(i.push(this.subtypeField),s.outFields=i);const o=await t.source.queryFeatures(s,r);if(o?.features)for(const a of o.features)a.layer=a.sourceLayer=this.findSublayerForFeature(a);return o}async queryObjectIds(e,r){return V(this,e,r,ie)}async queryFeatureCount(e,r){return B(this,e,r,ie)}async queryExtent(e,r){return J(this,e,r,ie)}async queryRelatedFeatures(e,r){return z(this,e,r,ie)}async queryRelatedFeaturesCount(e,r){return K(this,e,r,ie)}write(e,r){const{origin:s,layerContainerType:i,messages:o}=r;if(this.isTable){if(\"web-scene\"===s||\"web-map\"===s&&\"tables\"!==i)return o?.push(ae(this,\"using a table source cannot be written to web scenes and web maps\")),null}else if(this.loaded&&\"web-map\"===s&&\"tables\"===i)return o?.push(ae(this,\"using a non-table source cannot be written to tables in web maps\")),null;return this.sublayers?.length?super.write(e,r):(o?.push(new t(\"web-document-write:invalid-property\",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&te(this,e)}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}async _initLayerProperties(e){this._set(\"source\",e);const{sourceJSON:r}=e;if(r&&(this.sourceJSON=r,this.read(r,{origin:\"service\",url:this.parsedUrl})),this.isTable)throw new t(\"subtype-grouplayer:unsupported-source\",\"SubtypeGroupLayer cannot be created using a layer with table source\");if(!this.subtypes?.length)throw new t(\"subtype-grouplayer:missing-subtypes\",\"SubtypeGroupLayer must be created using a layer with subtypes\");this._verifyFields(),X(this.timeInfo,this.fieldsIndex)}async hasDataChanged(){return Z(this)}_verifyFields(){const e=this.parsedUrl?.path??\"undefined\";this.objectIdField||console.log(\"SubtypeGroupLayer: 'objectIdField' property is not defined (url: \"+e+\")\"),this.isTable||-1!==e.search(/\\/FeatureServer\\//i)||this.fields?.some((e=>\"geometry\"===e.type))||console.log(\"SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: \"+e+\")\")}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null})),this.handles.remove(\"sublayers-owner\"),this._sublayerLookup.clear()),e&&(e.forEach((e=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),this._sublayersCollectionChanged=!1,this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,this._sublayerLookup.delete(e.subtypeCode)})),e.on(\"after-changes\",(()=>{this._sublayersCollectionChanged=!0}))],\"sublayers-owner\"))}};e([b({readOnly:!0})],le.prototype,\"createQueryVersion\",null),e([b({readOnly:!0})],le.prototype,\"editingEnabled\",null),e([b({readOnly:!0})],le.prototype,\"effectiveEditingEnabled\",null),e([b({...ne.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],le.prototype,\"fields\",void 0),e([b(ne.fieldsIndex)],le.prototype,\"fieldsIndex\",void 0),e([b(q)],le.prototype,\"id\",void 0),e([b({type:[\"show\",\"hide\",\"hide-children\"]})],le.prototype,\"listMode\",void 0),e([b({value:\"SubtypeGroupLayer\",type:[\"SubtypeGroupLayer\"]})],le.prototype,\"operationalLayerType\",void 0),e([b(ne.outFields)],le.prototype,\"outFields\",void 0),e([b({readOnly:!0})],le.prototype,\"parsedUrl\",null),e([b()],le.prototype,\"source\",null),e([b({type:[Y],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],le.prototype,\"subtypes\",void 0),e([b({type:r.ofType(ee),json:{origins:{service:{read:{source:\"subtypes\",reader:(e,t,s)=>{const i=e.map((({code:e})=>{const r=new ee({subtypeCode:e});return r.read(t,s),r}));return new(r.ofType(ee))(i)}}}},name:\"layers\",write:{overridePolicy(e,r,t){const s=this.originOf(\"sublayers\"),i=w.PORTAL_ITEM;let o=!0;if(v(s)===i&&v(t.origin)>i){const r=e.some((e=>e.hasUserOverrides()));o=this._sublayersCollectionChanged||r}return{enabled:o,ignoreOrigin:!0}}}}})],le.prototype,\"sublayers\",void 0),e([b({type:re})],le.prototype,\"timeInfo\",void 0),e([b({json:{origins:{\"portal-item\":{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],le.prototype,\"title\",void 0),e([g(\"service\",\"title\",[\"name\"])],le.prototype,\"readTitleFromService\",null),e([b({json:{read:!1}})],le.prototype,\"type\",void 0),le=e([j(oe)],le);const ue=le;export{ue as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,wBAAwB;AAAC,OAAOC,CAAC,MAAK,uBAAuB;AAAC,OAAOC,CAAC,MAAK,kBAAkB;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,wBAAwB;AAAC,OAAOC,CAAC,MAAK,oBAAoB;AAAC,SAAOC,OAAO,IAAIC,CAAC,QAAK,oBAAoB;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,QAAQ,IAAIC,CAAC,QAAK,kBAAkB;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,mCAAmC;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,KAAK,IAAIC,CAAC,EAACC,IAAI,IAAIC,CAAC,QAAK,0BAA0B;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,gBAAgB;AAAC,SAAOC,WAAW,IAAIC,CAAC,EAACC,IAAI,IAAIC,CAAC,QAAK,qBAAqB;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,gDAAgD;AAAC,OAAM,uCAAuC;AAAC,OAAM,uBAAuB;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,8CAA8C;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,gDAAgD;AAAC,SAAOC,QAAQ,IAAIC,CAAC,EAACC,QAAQ,IAAIC,CAAC,QAAK,2CAA2C;AAAC,OAAOC,CAAC,MAAK,YAAY;AAAC,SAAOC,WAAW,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,aAAa,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,UAAU,IAAI9C,CAAC,QAAK,wBAAwB;AAAC,SAAO+C,qBAAqB,IAAIC,CAAC,QAAK,mCAAmC;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,0BAA0B;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,WAAW,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,6BAA6B;AAAC,SAAOC,aAAa,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,mBAAmB,IAAIC,CAAC,QAAK,6BAA6B;AAAC,SAAOC,EAAE,IAAIC,CAAC,QAAK,+BAA+B;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,EAACC,8BAA8B,IAAIC,CAAC,EAACC,aAAa,IAAIC,CAAC,EAACC,gBAAgB,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,EAACC,iBAAiB,IAAIC,CAAC,EAACC,sBAAsB,IAAIC,CAAC,EAACC,gBAAgB,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,EAACC,iBAAiB,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,EAACC,oBAAoB,IAAIC,CAAC,EAACC,yBAAyB,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,QAAK,gCAAgC;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,yBAAyB;AAAC,OAAOC,CAAC,MAAK,sBAAsB;AAAC,OAAOC,EAAE,MAAK,8BAA8B;AAAC,OAAOC,EAAE,MAAK,uBAAuB;AAAC,SAAOC,+BAA+B,IAAIC,EAAE,QAAK,2BAA2B;AAAC,OAAOC,EAAE,MAAK,0BAA0B;AAAC,MAAMC,EAAE,GAAC,mBAAmB;EAACC,EAAE,GAAC,+BAA+B;AAAC,SAASC,EAAEA,CAAC5G,CAAC,EAACC,CAAC,EAAC;EAAC,OAAO,IAAIC,CAAC,CAAC,mBAAmB,EAAE,UAASF,CAAC,CAAC6G,KAAM,KAAI7G,CAAC,CAACgE,EAAG,cAAahE,CAAC,CAAC8G,aAAc,KAAI7G,CAAE,EAAC,EAAC;IAAC8G,KAAK,EAAC/G;EAAC,CAAC,CAAC;AAAA;AAAC,MAAMgH,EAAE,GAACf,CAAC,EAAE;AAAC,IAAIgB,EAAE,GAAC,cAAc9D,CAAC,CAACF,CAAC,CAAClD,CAAC,CAAC8D,CAAC,CAACF,CAAC,CAACF,CAAC,CAACb,CAAC,CAACS,CAAC,CAACE,CAAC,CAACxC,CAAC,CAACgC,CAAC,CAACL,CAAC,CAACtC,CAAC,CAACoC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAAC0E,WAAWA,CAAA,EAAM;IAAC,KAAK,CAAC,GAAAC,SAAI,CAAC,EAAC,IAAI,CAACC,QAAQ,GAAC,IAAI/G,CAAC,IAAC,IAAI,CAACgH,2BAA2B,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,eAAe,GAAC,IAAIC,GAAG,IAAC,IAAI,CAACC,MAAM,GAAC,IAAI,EAAC,IAAI,CAACC,WAAW,GAAC,IAAI,EAAC,IAAI,CAACC,SAAS,GAAC,IAAI,EAAC,IAAI,CAACC,QAAQ,GAAC,IAAI,EAAC,IAAI,CAACC,SAAS,GAAC,KAAI3H,CAAC,CAAC4H,MAAM,CAACxB,EAAE,CAAC,GAAC,EAAC,IAAI,CAACyB,QAAQ,GAAC,IAAI,EAAC,IAAI,CAACjB,KAAK,GAAC,OAAO,EAAC,IAAI,CAACkB,IAAI,GAAC,eAAe,EAAC,IAAI,CAACC,UAAU,CAAC3G,CAAC,CAAE,MAAI,IAAI,CAACuG,SAAS,EAAG,CAAC5H,CAAC,EAACC,CAAC,KAAG,IAAI,CAACgI,sBAAsB,CAACjI,CAAC,EAACC,CAAC,CAAC,EAAEsB,CAAC,CAAC,CAAC;EAAA;EAAC2G,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACC,MAAM,EAAED,OAAO,EAAE,EAAC,IAAI,CAACd,QAAQ,GAAC3G,CAAC,CAAC,IAAI,CAAC2G,QAAQ,CAAC;EAAA;EAACgB,iBAAiBA,CAACpI,CAAC,EAACC,CAAC,EAAC;IAAC,OAAM,QAAQ,IAAE,OAAOD,CAAC,GAAC;MAACqI,GAAG,EAACrI,CAAC;MAAC,GAAGC;IAAC,CAAC,GAACD,CAAC;EAAA;EAACsI,IAAIA,CAACtI,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACU,CAAC,CAACX,CAAC,CAAC,GAACA,CAAC,CAACuI,MAAM,GAAC,IAAI;MAACnI,CAAC,GAAC,IAAI,CAACoI,cAAc,CAAC;QAACC,cAAc,EAAC,CAAC,iBAAiB;MAAC,CAAC,EAACzI,CAAC,CAAC,CAAC0I,KAAK,CAACzH,CAAC,CAAC,CAAC0H,IAAI,CAAE,YAAS;QAAC,IAAG,CAAC,IAAI,CAACN,GAAG,EAAC,MAAM,IAAInI,CAAC,CAAC,0CAA0C,EAAC,sEAAsE,CAAC;QAAC,IAAG,IAAI,IAAE,IAAI,CAAC0I,OAAO,EAAC,MAAM,IAAI1I,CAAC,CAAC,oCAAoC,EAAC,8DAA8D,CAAC;QAAC,OAAO,IAAI,CAAC2I,oBAAoB,CAAC,MAAM,IAAI,CAACC,oBAAoB,CAAC7I,CAAC,CAAC,CAAC;MAAA,CAAC,CAAE,CAAC0I,IAAI,CAAE,MAAI,IAAI,CAACI,kBAAkB,CAAC,IAAI,CAACC,aAAa,EAAChJ,CAAC,CAAC,CAAE,CAAC2I,IAAI,CAAE,MAAIxE,CAAC,CAAC,IAAI,EAACnE,CAAC,CAAC,CAAE;IAAC,OAAO,IAAI,CAACiJ,mBAAmB,CAAC7I,CAAC,CAAC,EAAC8I,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;EAAA;EAAC,IAAIC,kBAAkBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,cAAc,CAAC,sBAAsB,CAAC,EAAC,IAAI,CAACA,cAAc,CAAC,YAAY,CAAC,EAAC,IAAI,CAACA,cAAc,CAAC,YAAY,CAAC,EAAC,IAAI,CAACA,cAAc,CAAC,cAAc,CAAC,EAAC,IAAI,CAACA,cAAc,CAAC,YAAY,CAAC,EAAC,IAAI,CAACA,cAAc,CAAC,gBAAgB,CAAC,EAAC,IAAI,CAACA,cAAc,CAAC,SAAS,CAAC,EAAC,IAAI,CAACA,cAAc,CAAC,cAAc,CAAC,EAAC,IAAI,CAACA,cAAc,CAAC,SAAS,CAAC,EAAC,CAAC,IAAI,CAACC,IAAI,CAAC,oBAAoB,CAAC,IAAE,CAAC,IAAE,CAAC;EAAA;EAAC,IAAIC,cAAcA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,MAAM,IAAE,IAAI,IAAE,IAAI,CAACC,YAAY,IAAE,IAAI,CAACA,YAAY,CAACC,UAAU,CAACC,eAAe,IAAE,IAAI,CAACC,wBAAwB;EAAA;EAAC,IAAIC,uBAAuBA,CAAA,EAAE;IAAC,OAAOxF,CAAC,CAAC,IAAI,CAAC;EAAA;EAAC,IAAIyF,SAASA,CAAA,EAAE;IAAC,MAAM9J,CAAC,GAAC2B,CAAC,CAAC,IAAI,CAAC0G,GAAG,CAAC;IAAC,OAAO,IAAI,IAAErI,CAAC,IAAE,IAAI,IAAE,IAAI,CAAC4I,OAAO,KAAG5I,CAAC,CAAC+J,IAAI,GAAClI,CAAC,CAAC7B,CAAC,CAAC+J,IAAI,EAAC,IAAI,CAACnB,OAAO,CAACoB,QAAQ,EAAE,CAAC,CAAC,EAAChK,CAAC;EAAA;EAAC,IAAImI,MAAMA,CAACnI,CAAC,EAAC;IAAC,IAAI,CAACsJ,IAAI,CAAC,QAAQ,CAAC,KAAGtJ,CAAC,IAAE,IAAI,CAACiK,IAAI,CAAC,QAAQ,EAACjK,CAAC,CAAC;EAAA;EAACkK,oBAAoBA,CAAClK,CAAC,EAAAmK,IAAA,EAAU;IAAA,IAAT;MAACC,IAAI,EAACnK;IAAC,CAAC,GAAAkK,IAAA;IAAE,OAAO,IAAI,CAAC9B,GAAG,GAACtE,CAAC,CAAC,IAAI,CAACsE,GAAG,EAACpI,CAAC,CAAC,GAACA,CAAC;EAAA;EAAC,MAAMqE,aAAaA,CAACtE,CAAC,EAACC,CAAC,EAAC;IAAC,OAAOsE,CAAC,CAAC,IAAI,EAACvE,CAAC,EAACC,CAAC,EAACyG,EAAE,CAAC;EAAA;EAAC,MAAMlC,gBAAgBA,CAACxE,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAAC,OAAOuE,CAAC,CAAC,IAAI,EAACzE,CAAC,EAACC,CAAC,EAACC,CAAC,EAACwG,EAAE,CAAC;EAAA;EAAC,MAAMhC,UAAUA,CAAC1E,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO0E,CAAC,CAAC,IAAI,EAAC3E,CAAC,EAACC,CAAC,CAAC;EAAA;EAACoK,EAAEA,CAACrK,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,KAAK,CAACoK,EAAE,CAACrK,CAAC,EAACC,CAAC,CAAC;EAAA;EAAC,MAAM6I,oBAAoBA,CAAC9I,CAAC,EAAC;IAAC,MAAK;MAACsK,OAAO,EAACrK;IAAC,CAAC,GAAC,MAAMkB,CAAC,CAAC,MAAM,CAAC,0CAA0C,CAAC,EAACnB,CAAC,CAAC;IAAC,OAAO,IAAIC,CAAC,CAAC;MAAC8G,KAAK,EAAC;IAAI,CAAC,CAAC,CAACuB,IAAI,CAAC;MAACC,MAAM,EAACvI;IAAC,CAAC,CAAC;EAAA;EAAC4E,WAAWA,CAAA,EAAE;IAAC,MAAM5E,CAAC,GAAC6E,CAAC,CAAC,IAAI,CAAC;MAAC5E,CAAC,GAAC,IAAI,CAAC2H,SAAS,CAAC2C,GAAG,CAAEvK,CAAC,IAAEA,CAAC,CAACwK,WAAW,CAAE;IAAC,OAAOxK,CAAC,CAACyK,KAAK,GAAChJ,CAAC,CAAE,GAAE,IAAI,CAACiJ,YAAa,QAAOzK,CAAC,CAAC2B,IAAI,CAAC,GAAG,CAAE,GAAE,EAAC,IAAI,CAAC+I,oBAAoB,CAAC,EAAC3K,CAAC;EAAA;EAAC,MAAM8E,iBAAiBA,CAAC9E,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO8E,CAAC,CAAC,IAAI,EAAC/E,CAAC,EAACC,CAAC,EAACyG,EAAE,CAAC;EAAA;EAAC,MAAM1B,sBAAsBA,CAAChF,CAAC,EAAC;IAAC,OAAOiF,CAAC,CAAC,IAAI,EAACjF,CAAC,EAAC0G,EAAE,CAAC;EAAA;EAACkE,cAAcA,CAAC5K,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,IAAI,CAAC4K,eAAe,CAAC7K,CAAC,CAAC;EAAA;EAAC8K,QAAQA,CAAC9K,CAAC,EAAC;IAAC,OAAO,IAAI,CAACyH,WAAW,CAACsD,GAAG,CAAC/K,CAAC,CAAC;EAAA;EAACgL,sBAAsBA,CAAChL,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACwH,WAAW,CAACsD,GAAG,CAAC,IAAI,CAACL,YAAY,CAAC;MAACxK,CAAC,GAACF,CAAC,CAACiL,UAAU,CAAChL,CAAC,CAACmK,IAAI,CAAC;IAAC,OAAO,IAAI,CAAC9C,eAAe,CAACyD,GAAG,CAAC7K,CAAC,CAAC;EAAA;EAACI,OAAOA,CAAA,EAAE;IAAC,OAAOC,CAAC,CAAC,IAAI,EAAEP,CAAC,IAAE;MAACA,CAAC,CAAC,IAAI,CAAC4H,SAAS,CAAC;IAAA,CAAC,CAAE;EAAA;EAAC,MAAM1C,gBAAgBA,CAAClF,CAAC,EAACC,CAAC,EAAC;IAAC,OAAOkF,CAAC,CAAC,IAAI,EAACnF,CAAC,EAACC,CAAC,EAACyG,EAAE,CAAC;EAAA;EAAC,MAAMwE,aAAaA,CAAClL,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,MAAM,IAAI,CAACoI,IAAI,EAAE;MAAClI,CAAC,GAACqG,EAAE,CAAC0E,IAAI,CAACnL,CAAC,CAAC,IAAEE,CAAC,CAAC0E,WAAW,EAAE;MAACvE,CAAC,GAACQ,CAAC,CAACT,CAAC,CAACsH,SAAS,EAAC,EAAE,CAAC;IAACrH,CAAC,CAAC+K,QAAQ,CAAC,IAAI,CAACV,YAAY,CAAC,KAAGrK,CAAC,CAACgL,IAAI,CAAC,IAAI,CAACX,YAAY,CAAC,EAACtK,CAAC,CAACsH,SAAS,GAACrH,CAAC,CAAC;IAAC,MAAME,CAAC,GAAC,MAAML,CAAC,CAACiI,MAAM,CAAC+C,aAAa,CAAC9K,CAAC,EAACH,CAAC,CAAC;IAAC,IAAGM,CAAC,EAAE+K,QAAQ,EAAC,KAAI,MAAM7K,CAAC,IAAIF,CAAC,CAAC+K,QAAQ,EAAC7K,CAAC,CAACsG,KAAK,GAACtG,CAAC,CAAC8K,WAAW,GAAC,IAAI,CAACP,sBAAsB,CAACvK,CAAC,CAAC;IAAC,OAAOF,CAAC;EAAA;EAAC,MAAM6E,cAAcA,CAACpF,CAAC,EAACC,CAAC,EAAC;IAAC,OAAOoF,CAAC,CAAC,IAAI,EAACrF,CAAC,EAACC,CAAC,EAACyG,EAAE,CAAC;EAAA;EAAC,MAAMpB,iBAAiBA,CAACtF,CAAC,EAACC,CAAC,EAAC;IAAC,OAAOsF,CAAC,CAAC,IAAI,EAACvF,CAAC,EAACC,CAAC,EAACyG,EAAE,CAAC;EAAA;EAAC,MAAMlB,WAAWA,CAACxF,CAAC,EAACC,CAAC,EAAC;IAAC,OAAOwF,CAAC,CAAC,IAAI,EAACzF,CAAC,EAACC,CAAC,EAACyG,EAAE,CAAC;EAAA;EAAC,MAAMhB,oBAAoBA,CAAC1F,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO0F,CAAC,CAAC,IAAI,EAAC3F,CAAC,EAACC,CAAC,EAACyG,EAAE,CAAC;EAAA;EAAC,MAAMd,yBAAyBA,CAAC5F,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO4F,CAAC,CAAC,IAAI,EAAC7F,CAAC,EAACC,CAAC,EAACyG,EAAE,CAAC;EAAA;EAAC8E,KAAKA,CAACxL,CAAC,EAACC,CAAC,EAAC;IAAC,MAAK;MAACwL,MAAM,EAACrL,CAAC;MAACsL,kBAAkB,EAACrL,CAAC;MAACsL,QAAQ,EAACpL;IAAC,CAAC,GAACN,CAAC;IAAC,IAAG,IAAI,CAAC2L,OAAO,EAAC;MAAC,IAAG,WAAW,KAAGxL,CAAC,IAAE,SAAS,KAAGA,CAAC,IAAE,QAAQ,KAAGC,CAAC,EAAC,OAAOE,CAAC,EAAE8K,IAAI,CAACzE,EAAE,CAAC,IAAI,EAAC,mEAAmE,CAAC,CAAC,EAAC,IAAI;IAAA,CAAC,MAAK,IAAG,IAAI,CAAC4C,MAAM,IAAE,SAAS,KAAGpJ,CAAC,IAAE,QAAQ,KAAGC,CAAC,EAAC,OAAOE,CAAC,EAAE8K,IAAI,CAACzE,EAAE,CAAC,IAAI,EAAC,kEAAkE,CAAC,CAAC,EAAC,IAAI;IAAC,OAAO,IAAI,CAACgB,SAAS,EAAEiE,MAAM,GAAC,KAAK,CAACL,KAAK,CAACxL,CAAC,EAACC,CAAC,CAAC,IAAEM,CAAC,EAAE8K,IAAI,CAAC,IAAInL,CAAC,CAAC,qCAAqC,EAAE,UAAS,IAAI,CAAC2G,KAAM,KAAI,IAAI,CAAC7C,EAAG,cAAa,IAAI,CAAC8C,aAAc,2GAA0G,EAAC;MAACC,KAAK,EAAC;IAAI,CAAC,CAAC,CAAC,EAAC,IAAI,CAAC;EAAA;EAACR,+BAA+BA,CAACvG,CAAC,EAAC;IAAC,OAAM,CAAC,CAAC,IAAI,CAACwJ,MAAM,IAAEhD,EAAE,CAAC,IAAI,EAACxG,CAAC,CAAC;EAAA;EAAC6K,eAAeA,CAAC7K,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACwH,WAAW,CAACsD,GAAG,CAAC/K,CAAC,CAAC;IAAC,OAAOC,CAAC,GAACA,CAAC,CAAC6L,MAAM,GAAC,IAAI;EAAA;EAAC,MAAMjD,oBAAoBA,CAAC7I,CAAC,EAAC;IAAC,IAAI,CAACiK,IAAI,CAAC,QAAQ,EAACjK,CAAC,CAAC;IAAC,MAAK;MAAC+L,UAAU,EAAC9L;IAAC,CAAC,GAACD,CAAC;IAAC,IAAGC,CAAC,KAAG,IAAI,CAAC8L,UAAU,GAAC9L,CAAC,EAAC,IAAI,CAAC+L,IAAI,CAAC/L,CAAC,EAAC;MAACwL,MAAM,EAAC,SAAS;MAACpD,GAAG,EAAC,IAAI,CAACyB;IAAS,CAAC,CAAC,CAAC,EAAC,IAAI,CAAC8B,OAAO,EAAC,MAAM,IAAI1L,CAAC,CAAC,uCAAuC,EAAC,qEAAqE,CAAC;IAAC,IAAG,CAAC,IAAI,CAACyH,QAAQ,EAAEkE,MAAM,EAAC,MAAM,IAAI3L,CAAC,CAAC,qCAAqC,EAAC,+DAA+D,CAAC;IAAC,IAAI,CAAC+L,aAAa,EAAE,EAAC9F,CAAC,CAAC,IAAI,CAAC2B,QAAQ,EAAC,IAAI,CAACL,WAAW,CAAC;EAAA;EAAC,MAAM3B,cAAcA,CAAA,EAAE;IAAC,OAAOC,CAAC,CAAC,IAAI,CAAC;EAAA;EAACkG,aAAaA,CAAA,EAAE;IAAC,MAAMjM,CAAC,GAAC,IAAI,CAAC8J,SAAS,EAAEC,IAAI,IAAE,WAAW;IAAC,IAAI,CAACmC,aAAa,IAAEC,OAAO,CAACC,GAAG,CAAC,mEAAmE,GAACpM,CAAC,GAAC,GAAG,CAAC,EAAC,IAAI,CAAC4L,OAAO,IAAE,CAAC,CAAC,KAAG5L,CAAC,CAACqM,MAAM,CAAC,oBAAoB,CAAC,IAAE,IAAI,CAAC7E,MAAM,EAAE8E,IAAI,CAAEtM,CAAC,IAAE,UAAU,KAAGA,CAAC,CAAC+H,IAAI,CAAE,IAAEoE,OAAO,CAACC,GAAG,CAAC,qKAAqK,GAACpM,CAAC,GAAC,GAAG,CAAC;EAAA;EAACiI,sBAAsBA,CAACjI,CAAC,EAACC,CAAC,EAAC;IAACA,CAAC,KAAGA,CAAC,CAACsM,OAAO,CAAEvM,CAAC,IAAE;MAACA,CAAC,CAACwM,MAAM,GAAC,IAAI;IAAA,CAAC,CAAE,EAAC,IAAI,CAACC,OAAO,CAACC,MAAM,CAAC,iBAAiB,CAAC,EAAC,IAAI,CAACpF,eAAe,CAACqF,KAAK,EAAE,CAAC,EAAC3M,CAAC,KAAGA,CAAC,CAACuM,OAAO,CAAEvM,CAAC,IAAE;MAACA,CAAC,CAACwM,MAAM,GAAC,IAAI,EAAC,IAAI,CAAClF,eAAe,CAACsF,GAAG,CAAC5M,CAAC,CAACwK,WAAW,EAACxK,CAAC,CAAC;IAAA,CAAC,CAAE,EAAC,IAAI,CAACqH,2BAA2B,GAAC,CAAC,CAAC,EAAC,IAAI,CAACoF,OAAO,CAACI,GAAG,CAAC,CAAC7M,CAAC,CAACqK,EAAE,CAAC,WAAW,EAAEyC,KAAA,IAAY;MAAA,IAAX;QAACC,IAAI,EAAC/M;MAAC,CAAC,GAAA8M,KAAA;MAAI9M,CAAC,CAACwM,MAAM,GAAC,IAAI,EAAC,IAAI,CAAClF,eAAe,CAACsF,GAAG,CAAC5M,CAAC,CAACwK,WAAW,EAACxK,CAAC,CAAC;IAAA,CAAC,CAAE,EAACA,CAAC,CAACqK,EAAE,CAAC,cAAc,EAAE2C,KAAA,IAAY;MAAA,IAAX;QAACD,IAAI,EAAC/M;MAAC,CAAC,GAAAgN,KAAA;MAAIhN,CAAC,CAACwM,MAAM,GAAC,IAAI,EAAC,IAAI,CAAClF,eAAe,CAAC2F,MAAM,CAACjN,CAAC,CAACwK,WAAW,CAAC;IAAA,CAAC,CAAE,EAACxK,CAAC,CAACqK,EAAE,CAAC,eAAe,EAAE,MAAI;MAAC,IAAI,CAAChD,2BAA2B,GAAC,CAAC,CAAC;IAAA,CAAC,CAAE,CAAC,EAAC,iBAAiB,CAAC,CAAC;EAAA;AAAC,CAAC;AAACrH,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACmL,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACjG,EAAE,CAACkG,SAAS,EAAC,oBAAoB,EAAC,IAAI,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACmL,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACjG,EAAE,CAACkG,SAAS,EAAC,gBAAgB,EAAC,IAAI,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACmL,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACjG,EAAE,CAACkG,SAAS,EAAC,yBAAyB,EAAC,IAAI,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAAC,GAAGiF,EAAE,CAACQ,MAAM;EAAC0F,QAAQ,EAAC,CAAC,CAAC;EAACE,IAAI,EAAC;IAACC,OAAO,EAAC;MAACC,OAAO,EAAC;QAACtB,IAAI,EAAC,CAAC;MAAC;IAAC,CAAC;IAACA,IAAI,EAAC,CAAC;EAAC;AAAC,CAAC,CAAC,CAAC,EAAC/E,EAAE,CAACkG,SAAS,EAAC,QAAQ,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAACiF,EAAE,CAACS,WAAW,CAAC,CAAC,EAACR,EAAE,CAACkG,SAAS,EAAC,aAAa,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAACkC,CAAC,CAAC,CAAC,EAACgD,EAAE,CAACkG,SAAS,EAAC,IAAI,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACgG,IAAI,EAAC,CAAC,MAAM,EAAC,MAAM,EAAC,eAAe;AAAC,CAAC,CAAC,CAAC,EAACd,EAAE,CAACkG,SAAS,EAAC,UAAU,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACwL,KAAK,EAAC,mBAAmB;EAACxF,IAAI,EAAC,CAAC,mBAAmB;AAAC,CAAC,CAAC,CAAC,EAACd,EAAE,CAACkG,SAAS,EAAC,sBAAsB,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAACiF,EAAE,CAACU,SAAS,CAAC,CAAC,EAACT,EAAE,CAACkG,SAAS,EAAC,WAAW,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACmL,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACjG,EAAE,CAACkG,SAAS,EAAC,WAAW,EAAC,IAAI,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,EAAE,CAAC,EAACkF,EAAE,CAACkG,SAAS,EAAC,QAAQ,EAAC,IAAI,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACgG,IAAI,EAAC,CAAC3B,CAAC,CAAC;EAAC8G,QAAQ,EAAC,CAAC,CAAC;EAACE,IAAI,EAAC;IAACpB,IAAI,EAAC,CAAC,CAAC;IAACqB,OAAO,EAAC;MAACC,OAAO,EAAC;QAACtB,IAAI,EAAC,CAAC;MAAC;IAAC;EAAC;AAAC,CAAC,CAAC,CAAC,EAAC/E,EAAE,CAACkG,SAAS,EAAC,UAAU,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACgG,IAAI,EAAC9H,CAAC,CAAC4H,MAAM,CAACxB,EAAE,CAAC;EAAC+G,IAAI,EAAC;IAACC,OAAO,EAAC;MAACC,OAAO,EAAC;QAACtB,IAAI,EAAC;UAAC7D,MAAM,EAAC,UAAU;UAACnG,MAAM,EAACA,CAAChC,CAAC,EAACE,CAAC,EAACE,CAAC,KAAG;YAAC,MAAMC,CAAC,GAACL,CAAC,CAACuK,GAAG,CAAEiD,KAAA,IAAY;cAAA,IAAX;gBAACC,IAAI,EAACzN;cAAC,CAAC,GAAAwN,KAAA;cAAI,MAAMvN,CAAC,GAAC,IAAIoG,EAAE,CAAC;gBAACmE,WAAW,EAACxK;cAAC,CAAC,CAAC;cAAC,OAAOC,CAAC,CAAC+L,IAAI,CAAC9L,CAAC,EAACE,CAAC,CAAC,EAACH,CAAC;YAAA,CAAC,CAAE;YAAC,OAAO,KAAIA,CAAC,CAAC4H,MAAM,CAACxB,EAAE,CAAC,EAAEhG,CAAC,CAAC;UAAA;QAAC;MAAC;IAAC,CAAC;IAAC+J,IAAI,EAAC,QAAQ;IAACoB,KAAK,EAAC;MAACkC,cAAcA,CAAC1N,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;QAAC,MAAME,CAAC,GAAC,IAAI,CAACuN,QAAQ,CAAC,WAAW,CAAC;UAACtN,CAAC,GAACgC,CAAC,CAACuL,WAAW;QAAC,IAAIrN,CAAC,GAAC,CAAC,CAAC;QAAC,IAAGgC,CAAC,CAACnC,CAAC,CAAC,KAAGC,CAAC,IAAEkC,CAAC,CAACrC,CAAC,CAACuL,MAAM,CAAC,GAACpL,CAAC,EAAC;UAAC,MAAMJ,CAAC,GAACD,CAAC,CAACsM,IAAI,CAAEtM,CAAC,IAAEA,CAAC,CAAC6N,gBAAgB,EAAE,CAAE;UAACtN,CAAC,GAAC,IAAI,CAAC8G,2BAA2B,IAAEpH,CAAC;QAAA;QAAC,OAAM;UAAC6N,OAAO,EAACvN,CAAC;UAACwN,YAAY,EAAC,CAAC;QAAC,CAAC;MAAA;IAAC;EAAC;AAAC,CAAC,CAAC,CAAC,EAAC9G,EAAE,CAACkG,SAAS,EAAC,WAAW,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACgG,IAAI,EAACzB;AAAE,CAAC,CAAC,CAAC,EAACW,EAAE,CAACkG,SAAS,EAAC,UAAU,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACqL,IAAI,EAAC;IAACC,OAAO,EAAC;MAAC,aAAa,EAAC;QAAC7B,KAAK,EAAC;UAACuC,YAAY,EAAC,CAAC,CAAC;UAACC,oBAAoB,EAAC,CAAC;QAAC;MAAC;IAAC;EAAC;AAAC,CAAC,CAAC,CAAC,EAAC/G,EAAE,CAACkG,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAACnN,CAAC,CAAC,CAACiC,CAAC,CAAC,SAAS,EAAC,OAAO,EAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAACgF,EAAE,CAACkG,SAAS,EAAC,sBAAsB,EAAC,IAAI,CAAC,EAACnN,CAAC,CAAC,CAAC+B,CAAC,CAAC;EAACqL,IAAI,EAAC;IAACpB,IAAI,EAAC,CAAC;EAAC;AAAC,CAAC,CAAC,CAAC,EAAC/E,EAAE,CAACkG,SAAS,EAAC,MAAM,EAAC,KAAK,CAAC,CAAC,EAAClG,EAAE,GAACjH,CAAC,CAAC,CAACmC,CAAC,CAACwE,EAAE,CAAC,CAAC,EAACM,EAAE,CAAC;AAAC,MAAMgH,EAAE,GAAChH,EAAE;AAAC,SAAOgH,EAAE,IAAI3D,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}