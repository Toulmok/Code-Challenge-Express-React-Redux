{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { c as e } from \"./vec4f64.js\";\nimport { ScreenSizeScaling as o } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";\nimport { ShaderOutput as r } from \"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";\nimport { SliceDraw as i } from \"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";\nimport { Transform as a } from \"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";\nimport { multipassTerrainTest as l } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";\nimport { symbolAlphaCutoff as d } from \"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";\nimport { ColorConversion as n } from \"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";\nimport { addProjViewLocalOrigin as s, addViewNormal as t } from \"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";\nimport { Float3PassUniform as c } from \"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";\nimport { Float4PassUniform as g } from \"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";\nimport { glsl as m } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as v } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { TransparencyPassType as u } from \"../views/3d/webgl-engine/lib/TransparencyPassType.js\";\nimport { VertexAttribute as p } from \"../views/3d/webgl-engine/lib/VertexAttribute.js\";\nfunction f(e) {\n  const f = new v(),\n    b = e.hasMultipassTerrain && (e.output === r.Color || e.output === r.Alpha);\n  f.include(a, e), f.include(o, e), f.include(i, e);\n  const {\n    vertex: h,\n    fragment: C\n  } = f;\n  return C.include(n), s(h, e), C.uniforms.add(new g(\"uColor\", e => e.color)), f.attributes.add(p.POSITION, \"vec3\"), f.varyings.add(\"vWorldPosition\", \"vec3\"), b && f.varyings.add(\"depth\", \"float\"), e.screenSizeEnabled && f.attributes.add(p.OFFSET, \"vec3\"), e.shadingEnabled && (t(h), f.attributes.add(p.NORMAL, \"vec3\"), f.varyings.add(\"vViewNormal\", \"vec3\")), h.code.add(m`\n    void main(void) {\n      vWorldPosition = ${e.screenSizeEnabled ? \"screenSizeScaling(offset, position)\" : \"position\"};\n  `), e.shadingEnabled && h.code.add(m`vec3 worldNormal = normal;\nvViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`), h.code.add(m`\n    ${b ? \"depth = (view * vec4(vWorldPosition, 1.0)).z;\" : \"\"}\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `), b && f.include(l, e), C.code.add(m`\n    void main() {\n      discardBySlice(vWorldPosition);\n      ${b ? \"terrainDepthTest(gl_FragCoord, depth);\" : \"\"}\n    `), e.shadingEnabled ? (C.uniforms.add(new c(\"shadingDirection\", e => e.shadingDirection)), C.uniforms.add(new g(\"shadedColor\", e => w(e.shadingTint, e.color))), C.code.add(m`vec3 viewNormalNorm = normalize(vViewNormal);\nfloat shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\nvec4 finalColor = mix(uColor, shadedColor, shadingFactor);`)) : C.code.add(m`vec4 finalColor = uColor;`), C.code.add(m`\n      ${e.output === r.ObjectAndLayerIdColor ? m`finalColor.a = 1.0;` : \"\"}\n      if (finalColor.a < ${m.float(d)}) {\n        discard;\n      }\n      ${e.output === r.Alpha ? m`gl_FragColor = vec4(finalColor.a);` : \"\"}\n\n      ${e.output === r.Color ? m`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${e.transparencyPassType === u.Color ? \"gl_FragColor = premultiplyAlpha(gl_FragColor);\" : \"\"}` : \"\"}\n    }\n    `), f;\n}\nfunction w(e, o) {\n  const r = 1 - e[3],\n    i = e[3] + o[3] * r;\n  return 0 === i ? (b[3] = i, b) : (b[0] = (e[0] * e[3] + o[0] * o[3] * r) / i, b[1] = (e[1] * e[3] + o[1] * o[3] * r) / i, b[2] = (e[2] * e[3] + o[2] * o[3] * r) / i, b[3] = o[3], b);\n}\nconst b = e(),\n  h = Object.freeze(Object.defineProperty({\n    __proto__: null,\n    build: f\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nexport { h as S, f as b };","map":{"version":3,"names":["c","e","ScreenSizeScaling","o","ShaderOutput","r","SliceDraw","i","Transform","a","multipassTerrainTest","l","symbolAlphaCutoff","d","ColorConversion","n","addProjViewLocalOrigin","s","addViewNormal","t","Float3PassUniform","Float4PassUniform","g","glsl","m","ShaderBuilder","v","TransparencyPassType","u","VertexAttribute","p","f","b","hasMultipassTerrain","output","Color","Alpha","include","vertex","h","fragment","C","uniforms","add","color","attributes","POSITION","varyings","screenSizeEnabled","OFFSET","shadingEnabled","NORMAL","code","shadingDirection","w","shadingTint","ObjectAndLayerIdColor","float","transparencyPassType","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","S"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/chunks/ShadedColorMaterial.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{c as e}from\"./vec4f64.js\";import{ScreenSizeScaling as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{ShaderOutput as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{multipassTerrainTest as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{symbolAlphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{ColorConversion as n}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as s,addViewNormal as t}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float3PassUniform as c}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{glsl as m}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as v}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{TransparencyPassType as u}from\"../views/3d/webgl-engine/lib/TransparencyPassType.js\";import{VertexAttribute as p}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function f(e){const f=new v,b=e.hasMultipassTerrain&&(e.output===r.Color||e.output===r.Alpha);f.include(a,e),f.include(o,e),f.include(i,e);const{vertex:h,fragment:C}=f;return C.include(n),s(h,e),C.uniforms.add(new g(\"uColor\",(e=>e.color))),f.attributes.add(p.POSITION,\"vec3\"),f.varyings.add(\"vWorldPosition\",\"vec3\"),b&&f.varyings.add(\"depth\",\"float\"),e.screenSizeEnabled&&f.attributes.add(p.OFFSET,\"vec3\"),e.shadingEnabled&&(t(h),f.attributes.add(p.NORMAL,\"vec3\"),f.varyings.add(\"vViewNormal\",\"vec3\")),h.code.add(m`\n    void main(void) {\n      vWorldPosition = ${e.screenSizeEnabled?\"screenSizeScaling(offset, position)\":\"position\"};\n  `),e.shadingEnabled&&h.code.add(m`vec3 worldNormal = normal;\nvViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`),h.code.add(m`\n    ${b?\"depth = (view * vec4(vWorldPosition, 1.0)).z;\":\"\"}\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `),b&&f.include(l,e),C.code.add(m`\n    void main() {\n      discardBySlice(vWorldPosition);\n      ${b?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    `),e.shadingEnabled?(C.uniforms.add(new c(\"shadingDirection\",(e=>e.shadingDirection))),C.uniforms.add(new g(\"shadedColor\",(e=>w(e.shadingTint,e.color)))),C.code.add(m`vec3 viewNormalNorm = normalize(vViewNormal);\nfloat shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\nvec4 finalColor = mix(uColor, shadedColor, shadingFactor);`)):C.code.add(m`vec4 finalColor = uColor;`),C.code.add(m`\n      ${e.output===r.ObjectAndLayerIdColor?m`finalColor.a = 1.0;`:\"\"}\n      if (finalColor.a < ${m.float(d)}) {\n        discard;\n      }\n      ${e.output===r.Alpha?m`gl_FragColor = vec4(finalColor.a);`:\"\"}\n\n      ${e.output===r.Color?m`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${e.transparencyPassType===u.Color?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}`:\"\"}\n    }\n    `),f}function w(e,o){const r=1-e[3],i=e[3]+o[3]*r;return 0===i?(b[3]=i,b):(b[0]=(e[0]*e[3]+o[0]*o[3]*r)/i,b[1]=(e[1]*e[3]+o[1]*o[3]*r)/i,b[2]=(e[2]*e[3]+o[2]*o[3]*r)/i,b[3]=o[3],b)}const b=e(),h=Object.freeze(Object.defineProperty({__proto__:null,build:f},Symbol.toStringTag,{value:\"Module\"}));export{h as S,f as b};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}