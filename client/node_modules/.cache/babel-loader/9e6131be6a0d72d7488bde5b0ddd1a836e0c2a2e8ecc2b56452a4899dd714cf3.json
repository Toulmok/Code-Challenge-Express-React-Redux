{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Error.js\";\nimport { isNone as r, isSome as i } from \"../../../core/maybe.js\";\nimport { whenOnce as a } from \"../../../core/reactiveUtils.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as l } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { updatingProgress as o, updatingProgressValue as n } from \"../support/updatingProperties.js\";\nimport { checkIfTileInfoSupportedForView as p } from \"../terrain/terrainUtils.js\";\nconst c = c => {\n  let m = class extends c {\n    get imageFormatIsOpaque() {\n      return !1;\n    }\n    get fullExtent() {\n      return this.layer.fullExtent;\n    }\n    get isOpaque() {\n      return this.fullOpacity >= 1 && this.imageFormatIsOpaque;\n    }\n    get dataLevelRange() {\n      const e = this.tileInfo.lods,\n        t = e[0].scale,\n        r = e[e.length - 1].scale;\n      return this.levelRangeFromScaleRange(t, r);\n    }\n    get displayLevelRange() {\n      const e = this.tileInfo.lods,\n        t = this.layer.minScale || e[0].scale,\n        r = this.layer.maxScale || e[e.length - 1].scale,\n        i = this.levelRangeFromScaleRange(t, r);\n      return this.layer.maxScale && i.maxLevel++, i;\n    }\n    getTileUrl(e, t, r) {\n      return this.layer.getTileUrl(e, t, r);\n    }\n    _addTilingSchemeMatchPromise() {\n      if (r(this.fullExtent)) return this.addResolvingPromise(Promise.reject(new t(\"tilingscheme:extent-not-defined\", \"This layer doesn't define a fullExtent.\")));\n      const e = this._getTileInfoSupportError(this.tileInfo, this.fullExtent);\n      if (i(e)) return this.addResolvingPromise(Promise.reject(e));\n      const s = a(() => this.view?.basemapTerrain?.tilingSchemeLocked).then(() => {\n        const e = this.view.basemapTerrain.tilingScheme,\n          t = this._getTileInfoCompatibilityError(this.tileInfo, e);\n        if (t) throw t;\n      });\n      this.addResolvingPromise(s);\n    }\n    _getTileInfoSupportError(e, r) {\n      const i = p(e, r, this.view.spatialReference, this.view.state.viewingMode);\n      if (i) {\n        const e = {\n          layer: this.layer,\n          error: i\n        };\n        let r;\n        switch (i.name) {\n          case \"tilingscheme:spatial-reference-mismatch\":\n          case \"tilingscheme:global-unsupported-spatial-reference\":\n          case \"tilingscheme:local-unsupported-spatial-reference\":\n            r = new t(\"layerview:spatial-reference-incompatible\", \"The spatial reference of this layer does not meet the requirements of the view\", e);\n            break;\n          default:\n            r = new t(\"layerview:tiling-scheme-unsupported\", \"The tiling scheme of this layer is not supported by SceneView\", e);\n        }\n        return r;\n      }\n      return null;\n    }\n    _getTileInfoCompatibilityError(e, i) {\n      return r(e) || !i.compatibleWith(e) ? new t(\"layerview:tiling-scheme-incompatible\", \"The tiling scheme of this layer is incompatible with the tiling scheme of the surface\") : null;\n    }\n    levelRangeFromScaleRange(e, t) {\n      const r = {\n          minLevel: 0,\n          maxLevel: 1 / 0\n        },\n        i = this.view && this.view.basemapTerrain && this.view.basemapTerrain.tilingScheme;\n      if (!i) return r;\n      const a = i.levels[0],\n        s = e => {\n          const t = Math.log(a.scale / e) / Math.LN2;\n          return .5 - Math.abs(.5 - t % 1) < 1e-9 ? Math.round(t) : Math.ceil(t);\n        };\n      return null != e && e > 0 && (r.minLevel = Math.max(0, s(e))), null != t && t > 0 && (r.maxLevel = Math.max(0, s(t))), r;\n    }\n    isUpdating() {\n      return !!(this.view && this.view.basemapTerrain && this.view.basemapTerrain.updating);\n    }\n  };\n  return e([s({\n    readOnly: !0\n  })], m.prototype, \"imageFormatIsOpaque\", null), e([s({\n    readOnly: !0\n  })], m.prototype, \"updating\", void 0), e([s(o)], m.prototype, \"updatingProgress\", void 0), e([s(n)], m.prototype, \"updatingProgressValue\", void 0), e([s()], m.prototype, \"fullExtent\", null), e([s({\n    readOnly: !0\n  })], m.prototype, \"isOpaque\", null), e([s({\n    readOnly: !0\n  })], m.prototype, \"dataLevelRange\", null), e([s({\n    readOnly: !0\n  })], m.prototype, \"displayLevelRange\", null), e([s()], m.prototype, \"layer\", void 0), e([s()], m.prototype, \"tileInfo\", void 0), m = e([l(\"esri.views.3d.layers.TiledLayerView3D\")], m), m;\n};\nexport { c as TiledLayerView3D };","map":{"version":3,"names":["_","e","t","isNone","r","isSome","i","whenOnce","a","property","s","subclass","l","updatingProgress","o","updatingProgressValue","n","checkIfTileInfoSupportedForView","p","c","m","imageFormatIsOpaque","fullExtent","layer","isOpaque","fullOpacity","dataLevelRange","tileInfo","lods","scale","length","levelRangeFromScaleRange","displayLevelRange","minScale","maxScale","maxLevel","getTileUrl","_addTilingSchemeMatchPromise","addResolvingPromise","Promise","reject","_getTileInfoSupportError","view","basemapTerrain","tilingSchemeLocked","then","tilingScheme","_getTileInfoCompatibilityError","spatialReference","state","viewingMode","error","name","compatibleWith","minLevel","levels","Math","log","LN2","abs","round","ceil","max","isUpdating","updating","readOnly","prototype","TiledLayerView3D"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/TiledLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{isNone as r,isSome as i}from\"../../../core/maybe.js\";import{whenOnce as a}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{updatingProgress as o,updatingProgressValue as n}from\"../support/updatingProperties.js\";import{checkIfTileInfoSupportedForView as p}from\"../terrain/terrainUtils.js\";const c=c=>{let m=class extends c{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,r)}get displayLevelRange(){const e=this.tileInfo.lods,t=this.layer.minScale||e[0].scale,r=this.layer.maxScale||e[e.length-1].scale,i=this.levelRangeFromScaleRange(t,r);return this.layer.maxScale&&i.maxLevel++,i}getTileUrl(e,t,r){return this.layer.getTileUrl(e,t,r)}_addTilingSchemeMatchPromise(){if(r(this.fullExtent))return this.addResolvingPromise(Promise.reject(new t(\"tilingscheme:extent-not-defined\",\"This layer doesn't define a fullExtent.\")));const e=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if(i(e))return this.addResolvingPromise(Promise.reject(e));const s=a((()=>this.view?.basemapTerrain?.tilingSchemeLocked)).then((()=>{const e=this.view.basemapTerrain.tilingScheme,t=this._getTileInfoCompatibilityError(this.tileInfo,e);if(t)throw t}));this.addResolvingPromise(s)}_getTileInfoSupportError(e,r){const i=p(e,r,this.view.spatialReference,this.view.state.viewingMode);if(i){const e={layer:this.layer,error:i};let r;switch(i.name){case\"tilingscheme:spatial-reference-mismatch\":case\"tilingscheme:global-unsupported-spatial-reference\":case\"tilingscheme:local-unsupported-spatial-reference\":r=new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",e);break;default:r=new t(\"layerview:tiling-scheme-unsupported\",\"The tiling scheme of this layer is not supported by SceneView\",e)}return r}return null}_getTileInfoCompatibilityError(e,i){return r(e)||!i.compatibleWith(e)?new t(\"layerview:tiling-scheme-incompatible\",\"The tiling scheme of this layer is incompatible with the tiling scheme of the surface\"):null}levelRangeFromScaleRange(e,t){const r={minLevel:0,maxLevel:1/0},i=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!i)return r;const a=i.levels[0],s=e=>{const t=Math.log(a.scale/e)/Math.LN2;return.5-Math.abs(.5-t%1)<1e-9?Math.round(t):Math.ceil(t)};return null!=e&&e>0&&(r.minLevel=Math.max(0,s(e))),null!=t&&t>0&&(r.maxLevel=Math.max(0,s(t))),r}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return e([s({readOnly:!0})],m.prototype,\"imageFormatIsOpaque\",null),e([s({readOnly:!0})],m.prototype,\"updating\",void 0),e([s(o)],m.prototype,\"updatingProgress\",void 0),e([s(n)],m.prototype,\"updatingProgressValue\",void 0),e([s()],m.prototype,\"fullExtent\",null),e([s({readOnly:!0})],m.prototype,\"isOpaque\",null),e([s({readOnly:!0})],m.prototype,\"dataLevelRange\",null),e([s({readOnly:!0})],m.prototype,\"displayLevelRange\",null),e([s()],m.prototype,\"layer\",void 0),e([s()],m.prototype,\"tileInfo\",void 0),m=e([l(\"esri.views.3d.layers.TiledLayerView3D\")],m),m};export{c as TiledLayerView3D};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}