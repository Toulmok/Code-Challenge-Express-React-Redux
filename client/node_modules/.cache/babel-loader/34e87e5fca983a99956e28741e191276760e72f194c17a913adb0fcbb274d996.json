{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { addFrameTask as e } from \"../../../core/scheduling.js\";\nimport t from \"./GamepadInputDevice.js\";\nimport { extractState as s, stateIdle as i, stateEqual as n } from \"./GamepadState.js\";\nclass a {\n  constructor(e, t) {\n    this._element = e, this._input = t, this._hasEventListeners = !1, this._onConnectGamepad = e => {\n      this._connectGamepad(e.gamepad);\n    }, this._onDisconnectGamepad = e => {\n      const t = e.gamepad,\n        i = t.index,\n        n = this._inputDevices[i];\n      n && (this._emitGamepadEvent(t, s(n), !1), this._inputDevices.splice(i, 1), this._latestUpdate.splice(i, 1), this._input.gamepad.devices.remove(n), this.ensurePollingState());\n    }, this._frameTask = null, this._latestUpdate = new Array(), this._inputDevices = new Array(), this._callback = null;\n    const i = (\"getGamepads\" in window.navigator),\n      n = window.isSecureContext;\n    this.supported = i && n, this.supported && (this._forEachGamepad(e => this._connectGamepad(e)), window.addEventListener(\"gamepadconnected\", this._onConnectGamepad), window.addEventListener(\"gamepaddisconnected\", this._onDisconnectGamepad), this.ensurePollingState());\n  }\n  destroy() {\n    this.hasEventListeners = !1, this.supported && (window.removeEventListener(\"gamepadconnected\", this._onConnectGamepad), window.removeEventListener(\"gamepaddisconnected\", this._onDisconnectGamepad));\n  }\n  set hasEventListeners(e) {\n    this._hasEventListeners !== e && (this._hasEventListeners = e, this.ensurePollingState());\n  }\n  get _eventsEnabled() {\n    return this.supported && this._inputDevices.length > 0 && this._hasEventListeners;\n  }\n  set onEvent(e) {\n    this._callback = e;\n  }\n  _connectGamepad(e) {\n    const s = new t(e);\n    \"unknown\" !== s.deviceType && (this._inputDevices[e.index] = s, this._input.gamepad.devices.add(s)), this.ensurePollingState();\n  }\n  ensurePollingState() {\n    this._eventsEnabled ? this._startPolling() : this._stopPolling();\n  }\n  _startPolling() {\n    null == this._frameTask && (this._frameTask = e({\n      update: () => this._readGamepadState()\n    }));\n  }\n  _stopPolling() {\n    null != this._frameTask && (this._frameTask.remove(), this._frameTask = null, this._latestUpdate = new Array());\n  }\n  _readGamepadState() {\n    const e = document.hasFocus(),\n      t = this._element.contains(document.activeElement),\n      a = \"document\" === this._input.gamepad.enabledFocusMode && !e || \"view\" === this._input.gamepad.enabledFocusMode && !t;\n    this._forEachGamepad(e => {\n      const t = this._inputDevices[e.index];\n      if (!t) return;\n      const d = this._latestUpdate[e.index],\n        o = s(t),\n        r = a || i(o);\n      if (d) {\n        if (d.timestamp === e.timestamp) return;\n        if (!d.active && r) return;\n        if (n(d.state, o)) return;\n      }\n      this._emitGamepadEvent(e, o, !r);\n    });\n  }\n  _forEachGamepad(e) {\n    const t = window.navigator.getGamepads();\n    for (let s = 0; s < t.length; s++) {\n      const i = t[s];\n      this._validate(i) && e(i);\n    }\n  }\n  _emitGamepadEvent(e, t, s) {\n    const i = this._latestUpdate[e.index],\n      n = i && i.active;\n    if (!n && !s) return;\n    const a = !n && s ? \"start\" : n && s ? \"update\" : \"end\";\n    this._latestUpdate[e.index] = {\n      timestamp: e.timestamp,\n      state: t,\n      active: s\n    }, this._callback && this._callback({\n      device: this._inputDevices[e.index],\n      state: t,\n      action: a\n    });\n  }\n  _validate(e) {\n    if (!e) return !1;\n    if (!e.connected) return !1;\n    for (let t = 0; t < e.axes.length; t++) if (isNaN(e.axes[t])) return !1;\n    return !0;\n  }\n}\nexport { a as GamepadSource };","map":{"version":3,"names":["addFrameTask","e","t","extractState","s","stateIdle","i","stateEqual","n","a","constructor","_element","_input","_hasEventListeners","_onConnectGamepad","_connectGamepad","gamepad","_onDisconnectGamepad","index","_inputDevices","_emitGamepadEvent","splice","_latestUpdate","devices","remove","ensurePollingState","_frameTask","Array","_callback","window","navigator","isSecureContext","supported","_forEachGamepad","addEventListener","destroy","hasEventListeners","removeEventListener","_eventsEnabled","length","onEvent","deviceType","add","_startPolling","_stopPolling","update","_readGamepadState","document","hasFocus","contains","activeElement","enabledFocusMode","d","o","r","timestamp","active","state","getGamepads","_validate","device","action","connected","axes","isNaN","GamepadSource"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/input/gamepad/GamepadSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{addFrameTask as e}from\"../../../core/scheduling.js\";import t from\"./GamepadInputDevice.js\";import{extractState as s,stateIdle as i,stateEqual as n}from\"./GamepadState.js\";class a{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=e=>{this._connectGamepad(e.gamepad)},this._onDisconnectGamepad=e=>{const t=e.gamepad,i=t.index,n=this._inputDevices[i];n&&(this._emitGamepadEvent(t,s(n),!1),this._inputDevices.splice(i,1),this._latestUpdate.splice(i,1),this._input.gamepad.devices.remove(n),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i=\"getGamepads\"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(this._forEachGamepad((e=>this._connectGamepad(e))),window.addEventListener(\"gamepadconnected\",this._onConnectGamepad),window.addEventListener(\"gamepaddisconnected\",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener(\"gamepadconnected\",this._onConnectGamepad),window.removeEventListener(\"gamepaddisconnected\",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const s=new t(e);\"unknown\"!==s.deviceType&&(this._inputDevices[e.index]=s,this._input.gamepad.devices.add(s)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=e({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),a=\"document\"===this._input.gamepad.enabledFocusMode&&!e||\"view\"===this._input.gamepad.enabledFocusMode&&!t;this._forEachGamepad((e=>{const t=this._inputDevices[e.index];if(!t)return;const d=this._latestUpdate[e.index],o=s(t),r=a||i(o);if(d){if(d.timestamp===e.timestamp)return;if(!d.active&&r)return;if(n(d.state,o))return}this._emitGamepadEvent(e,o,!r)}))}_forEachGamepad(e){const t=window.navigator.getGamepads();for(let s=0;s<t.length;s++){const i=t[s];this._validate(i)&&e(i)}}_emitGamepadEvent(e,t,s){const i=this._latestUpdate[e.index],n=i&&i.active;if(!n&&!s)return;const a=!n&&s?\"start\":n&&s?\"update\":\"end\";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:a})}_validate(e){if(!e)return!1;if(!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}}export{a as GamepadSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}