{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { removeMaybe as r, destroyMaybe as s } from \"../../../core/maybe.js\";\nimport { watch as o, sync as a } from \"../../../core/reactiveUtils.js\";\nimport { addFrameTask as i } from \"../../../core/scheduling.js\";\nimport { secondsFromMilliseconds as m } from \"../../../core/time.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as d } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { maxDownloadSlots as n, downloadSlotsPerClient as h } from \"./index.js\";\nimport { newMemoryController as u } from \"./MemoryController.js\";\nimport { StreamDataLoader as p } from \"./StreamDataLoader.js\";\nimport { ImmediateTask as _, newScheduler as c, TaskPriority as y } from \"../../support/Scheduler.js\";\nlet g = class extends t {\n  constructor() {\n    super(...arguments), this.updating = !1;\n  }\n};\nfunction T(e) {\n  return new f({\n    view: e\n  });\n}\ne([l({\n  readOnly: !0\n})], g.prototype, \"updating\", void 0), g = e([d(\"esri.views.3d.support.ResourceControllerMain\")], g);\nlet f = class extends g {\n  constructor() {\n    super(...arguments), this._immediateTask = _, this._normalTask = _, this._frameTask = null;\n  }\n  get immediate() {\n    return this._immediateTask;\n  }\n  get normal() {\n    return this._normalTask;\n  }\n  initialize() {\n    this._scheduler = c(), this._memoryController = u(this.view), this._streamDataLoader = new p(), this._streamDataLoader.setup(n, h, this._scheduler), this.addHandles([o(() => this.view.state?.mode, e => {\n      null != e && (this._scheduler.state = e);\n    }, a), o(() => this.view.stationary, () => this._stationaryChangedHandler())]), this._frameTask = i({\n      update: e => this._frame(e)\n    }), this._immediateTask = this._scheduler.registerTask(y.RESOURCE_CONTROLLER_IMMEDIATE), this._normalTask = this._scheduler.registerTask(y.RESOURCE_CONTROLLER);\n  }\n  destroy() {\n    this._immediateTask.remove(), this._normalTask.remove(), this._frameTask = r(this._frameTask), this._streamDataLoader = s(this._streamDataLoader), this._memoryController = s(this._memoryController), this._scheduler = s(this._scheduler);\n  }\n  get updating() {\n    return !!(this._memoryController?.updating || this._streamDataLoader?.updating || this._immediateTask?.updating);\n  }\n  get scheduler() {\n    return this._scheduler;\n  }\n  get memoryController() {\n    return this._memoryController;\n  }\n  createStreamDataRequester(e) {\n    const t = this._streamDataLoader;\n    return {\n      request: (r, s, o) => t.request(r, s, e, o),\n      get busy() {\n        return !t.hasDownloadSlots(e);\n      }\n    };\n  }\n  _frame(e) {\n    this.view.suspended || this.view.stateManager && (this.view.stateManager.step(m(e.deltaTime)), !this._scheduler) || (this._scheduler.updateBudget(e) ? (this._memoryController.update(), this._scheduler.frame()) : this._memoryController.updating && this._memoryController.update());\n  }\n  _stationaryChangedHandler() {\n    this.memoryController.resetStableQuality();\n  }\n  get test() {\n    return {\n      getQueueStats: e => this._streamDataLoader.test.loadQueue.getStatsForType(e)\n    };\n  }\n};\ne([l({\n  constructOnly: !0\n})], f.prototype, \"view\", void 0), e([l()], f.prototype, \"_scheduler\", void 0), e([l()], f.prototype, \"_memoryController\", void 0), e([l()], f.prototype, \"_streamDataLoader\", void 0), e([l()], f.prototype, \"_immediateTask\", void 0), e([l()], f.prototype, \"_normalTask\", void 0), e([l({\n  readOnly: !0\n})], f.prototype, \"updating\", null), f = e([d(\"esri.views.3d.support.ResourceControllerImpl\")], f);\nexport { T as newResourceController };","map":{"version":3,"names":["_","e","t","removeMaybe","r","destroyMaybe","s","watch","o","sync","a","addFrameTask","i","secondsFromMilliseconds","m","property","l","subclass","d","maxDownloadSlots","n","downloadSlotsPerClient","h","newMemoryController","u","StreamDataLoader","p","ImmediateTask","newScheduler","c","TaskPriority","y","g","constructor","arguments","updating","T","f","view","readOnly","prototype","_immediateTask","_normalTask","_frameTask","immediate","normal","initialize","_scheduler","_memoryController","_streamDataLoader","setup","addHandles","state","mode","stationary","_stationaryChangedHandler","update","_frame","registerTask","RESOURCE_CONTROLLER_IMMEDIATE","RESOURCE_CONTROLLER","destroy","remove","scheduler","memoryController","createStreamDataRequester","request","busy","hasDownloadSlots","suspended","stateManager","step","deltaTime","updateBudget","frame","resetStableQuality","test","getQueueStats","loadQueue","getStatsForType","constructOnly","newResourceController"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/ResourceController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{removeMaybe as r,destroyMaybe as s}from\"../../../core/maybe.js\";import{watch as o,sync as a}from\"../../../core/reactiveUtils.js\";import{addFrameTask as i}from\"../../../core/scheduling.js\";import{secondsFromMilliseconds as m}from\"../../../core/time.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{maxDownloadSlots as n,downloadSlotsPerClient as h}from\"./index.js\";import{newMemoryController as u}from\"./MemoryController.js\";import{StreamDataLoader as p}from\"./StreamDataLoader.js\";import{ImmediateTask as _,newScheduler as c,TaskPriority as y}from\"../../support/Scheduler.js\";let g=class extends t{constructor(){super(...arguments),this.updating=!1}};function T(e){return new f({view:e})}e([l({readOnly:!0})],g.prototype,\"updating\",void 0),g=e([d(\"esri.views.3d.support.ResourceControllerMain\")],g);let f=class extends g{constructor(){super(...arguments),this._immediateTask=_,this._normalTask=_,this._frameTask=null}get immediate(){return this._immediateTask}get normal(){return this._normalTask}initialize(){this._scheduler=c(),this._memoryController=u(this.view),this._streamDataLoader=new p,this._streamDataLoader.setup(n,h,this._scheduler),this.addHandles([o((()=>this.view.state?.mode),(e=>{null!=e&&(this._scheduler.state=e)}),a),o((()=>this.view.stationary),(()=>this._stationaryChangedHandler()))]),this._frameTask=i({update:e=>this._frame(e)}),this._immediateTask=this._scheduler.registerTask(y.RESOURCE_CONTROLLER_IMMEDIATE),this._normalTask=this._scheduler.registerTask(y.RESOURCE_CONTROLLER)}destroy(){this._immediateTask.remove(),this._normalTask.remove(),this._frameTask=r(this._frameTask),this._streamDataLoader=s(this._streamDataLoader),this._memoryController=s(this._memoryController),this._scheduler=s(this._scheduler)}get updating(){return!!(this._memoryController?.updating||this._streamDataLoader?.updating||this._immediateTask?.updating)}get scheduler(){return this._scheduler}get memoryController(){return this._memoryController}createStreamDataRequester(e){const t=this._streamDataLoader;return{request:(r,s,o)=>t.request(r,s,e,o),get busy(){return!t.hasDownloadSlots(e)}}}_frame(e){this.view.suspended||this.view.stateManager&&(this.view.stateManager.step(m(e.deltaTime)),!this._scheduler)||(this._scheduler.updateBudget(e)?(this._memoryController.update(),this._scheduler.frame()):this._memoryController.updating&&this._memoryController.update())}_stationaryChangedHandler(){this.memoryController.resetStableQuality()}get test(){return{getQueueStats:e=>this._streamDataLoader.test.loadQueue.getStatsForType(e)}}};e([l({constructOnly:!0})],f.prototype,\"view\",void 0),e([l()],f.prototype,\"_scheduler\",void 0),e([l()],f.prototype,\"_memoryController\",void 0),e([l()],f.prototype,\"_streamDataLoader\",void 0),e([l()],f.prototype,\"_immediateTask\",void 0),e([l()],f.prototype,\"_normalTask\",void 0),e([l({readOnly:!0})],f.prototype,\"updating\",null),f=e([d(\"esri.views.3d.support.ResourceControllerImpl\")],f);export{T as newResourceController};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}