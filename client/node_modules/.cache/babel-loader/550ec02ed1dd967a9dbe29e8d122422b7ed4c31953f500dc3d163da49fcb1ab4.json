{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { unwrap as e } from \"../../../core/maybe.js\";\nimport { absoluteHeightElevationInfo as t } from \"../../../support/elevationInfoUtils.js\";\nimport { SnappingAlgorithm as s } from \"./SnappingAlgorithm.js\";\nimport { anyMapPointToSnappingPoint as r, asSnappingPoint as i } from \"./SnappingPoint.js\";\nimport { editEdgeToSnappingEdge as o, squaredScreenDistance as n } from \"./snappingUtils.js\";\nimport { LineSnappingCandidate as d } from \"./candidates/LineSnappingCandidate.js\";\nimport { vectorToScreenPoint as p } from \"../support/viewUtils.js\";\nimport { projectPointToLineLike as a } from \"../../support/geometry3dUtils.js\";\nimport { LineType as h } from \"../../support/geometry2dUtils.js\";\nclass l extends s {\n  snapNewVertex(e, s) {\n    const r = s.editGeometryOperations.data.components[0],\n      i = r.edges.length,\n      n = [];\n    if (i < 1) return n;\n    const {\n        spatialReference: d\n      } = s,\n      a = p(e, d, t, this.view),\n      {\n        view: h\n      } = this,\n      l = r.edges[i - 1];\n    let g = l;\n    do {\n      if (this.edgeExceedsShortLineThreshold(g, s)) {\n        const t = o(g, h, s);\n        this._processCandidateProposal(t.left, t.right, e, a, s, n);\n      }\n      g = g.leftVertex.leftEdge;\n    } while (g && g !== l);\n    return n;\n  }\n  snapExistingVertex(s, i) {\n    const n = [],\n      d = e(i.vertexHandle),\n      a = d.component;\n    if (a.edges.length < 2) return n;\n    const {\n        view: h\n      } = this,\n      {\n        spatialReference: l\n      } = i,\n      g = p(s, l, t, h),\n      m = d.leftEdge,\n      f = d.rightEdge;\n    m && f && this.edgeExceedsShortLineThreshold(m, i) && this.edgeExceedsShortLineThreshold(f, i) && this._processCandidateProposal(r(m.leftVertex.pos, h, i), r(f.rightVertex.pos, h, i), s, g, i, n);\n    const c = a.edges[0];\n    let x = c;\n    do {\n      if (x !== d.leftEdge && x !== d.rightEdge && this.edgeExceedsShortLineThreshold(x, i)) {\n        const e = o(x, h, i);\n        this._processCandidateProposal(e.left, e.right, s, g, i, n);\n      }\n      x = x.rightVertex.rightEdge;\n    } while (x && x !== c);\n    return n;\n  }\n  _processCandidateProposal(e, s, r, o, l, g) {\n    const {\n        spatialReference: m,\n        pointer: f\n      } = l,\n      c = i(a(r, {\n        start: e,\n        end: s,\n        type: h.LINE\n      }));\n    n(o, p(c, m, t, this.view)) < this.squaredProximityThreshold(f) && g.push(new d({\n      lineStart: e,\n      lineEnd: s,\n      targetPoint: c,\n      isDraped: \"on-the-ground\" === l.elevationInfo?.mode\n    }));\n  }\n}\nexport { l as LineSnapper };","map":{"version":3,"names":["unwrap","e","absoluteHeightElevationInfo","t","SnappingAlgorithm","s","anyMapPointToSnappingPoint","r","asSnappingPoint","i","editEdgeToSnappingEdge","o","squaredScreenDistance","n","LineSnappingCandidate","d","vectorToScreenPoint","p","projectPointToLineLike","a","LineType","h","l","snapNewVertex","editGeometryOperations","data","components","edges","length","spatialReference","view","g","edgeExceedsShortLineThreshold","_processCandidateProposal","left","right","leftVertex","leftEdge","snapExistingVertex","vertexHandle","component","m","f","rightEdge","pos","rightVertex","c","x","pointer","start","end","type","LINE","squaredProximityThreshold","push","lineStart","lineEnd","targetPoint","isDraped","elevationInfo","mode","LineSnapper"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/LineSnapper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../../../core/maybe.js\";import{absoluteHeightElevationInfo as t}from\"../../../support/elevationInfoUtils.js\";import{SnappingAlgorithm as s}from\"./SnappingAlgorithm.js\";import{anyMapPointToSnappingPoint as r,asSnappingPoint as i}from\"./SnappingPoint.js\";import{editEdgeToSnappingEdge as o,squaredScreenDistance as n}from\"./snappingUtils.js\";import{LineSnappingCandidate as d}from\"./candidates/LineSnappingCandidate.js\";import{vectorToScreenPoint as p}from\"../support/viewUtils.js\";import{projectPointToLineLike as a}from\"../../support/geometry3dUtils.js\";import{LineType as h}from\"../../support/geometry2dUtils.js\";class l extends s{snapNewVertex(e,s){const r=s.editGeometryOperations.data.components[0],i=r.edges.length,n=[];if(i<1)return n;const{spatialReference:d}=s,a=p(e,d,t,this.view),{view:h}=this,l=r.edges[i-1];let g=l;do{if(this.edgeExceedsShortLineThreshold(g,s)){const t=o(g,h,s);this._processCandidateProposal(t.left,t.right,e,a,s,n)}g=g.leftVertex.leftEdge}while(g&&g!==l);return n}snapExistingVertex(s,i){const n=[],d=e(i.vertexHandle),a=d.component;if(a.edges.length<2)return n;const{view:h}=this,{spatialReference:l}=i,g=p(s,l,t,h),m=d.leftEdge,f=d.rightEdge;m&&f&&this.edgeExceedsShortLineThreshold(m,i)&&this.edgeExceedsShortLineThreshold(f,i)&&this._processCandidateProposal(r(m.leftVertex.pos,h,i),r(f.rightVertex.pos,h,i),s,g,i,n);const c=a.edges[0];let x=c;do{if(x!==d.leftEdge&&x!==d.rightEdge&&this.edgeExceedsShortLineThreshold(x,i)){const e=o(x,h,i);this._processCandidateProposal(e.left,e.right,s,g,i,n)}x=x.rightVertex.rightEdge}while(x&&x!==c);return n}_processCandidateProposal(e,s,r,o,l,g){const{spatialReference:m,pointer:f}=l,c=i(a(r,{start:e,end:s,type:h.LINE}));n(o,p(c,m,t,this.view))<this.squaredProximityThreshold(f)&&g.push(new d({lineStart:e,lineEnd:s,targetPoint:c,isDraped:\"on-the-ground\"===l.elevationInfo?.mode}))}}export{l as LineSnapper};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}