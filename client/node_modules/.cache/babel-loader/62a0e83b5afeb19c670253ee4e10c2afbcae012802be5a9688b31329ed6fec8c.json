{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { packFloatRGBA as t } from \"../../../../core/floatRGBA.js\";\nimport { disposeMaybe as e, isNone as r, isSome as o } from \"../../../../core/maybe.js\";\nimport { NoParameters as n } from \"../core/shaderModules/interfaces.js\";\nimport { PixelFormat as s, PixelType as i, TextureWrapMode as c } from \"../../../webgl/enums.js\";\nimport { Texture as a } from \"../../../webgl/Texture.js\";\nclass u {\n  constructor(t) {\n    this._rctx = t, this._cache = new Map();\n  }\n  destroy() {\n    this._cache.forEach(t => e(t.stippleTexture)), this._cache.clear();\n  }\n  _acquire(t) {\n    if (r(t)) return null;\n    const e = this._patternId(t),\n      o = this._cache.get(e);\n    if (o) return o.refCount++, o;\n    const {\n        encodedData: n,\n        paddedPixels: u\n      } = p(t),\n      l = new h(new a(this._rctx, {\n        width: u,\n        height: 1,\n        internalFormat: s.RGBA,\n        pixelFormat: s.RGBA,\n        dataType: i.UNSIGNED_BYTE,\n        wrapMode: c.CLAMP_TO_EDGE\n      }, n));\n    return this._cache.set(e, l), l;\n  }\n  release(t) {\n    if (r(t)) return;\n    const e = this._patternId(t),\n      n = this._cache.get(e);\n    n && (n.refCount--, 0 === n.refCount && (o(n.stippleTexture) && n.stippleTexture.dispose(), this._cache.delete(e)));\n  }\n  swap(t, e) {\n    const r = this._acquire(e);\n    return this.release(t), r;\n  }\n  _patternId(t) {\n    return `${t.pattern.join(\",\")}-r${t.pixelRatio}`;\n  }\n}\nclass h extends n {\n  constructor(t) {\n    super(), this.stippleTexture = t, this.refCount = 1;\n  }\n}\nfunction p(e) {\n  const r = l(e),\n    o = 1 / e.pixelRatio,\n    n = f(e),\n    s = d(e),\n    i = (Math.floor(.5 * (s - 1)) + .5) * o,\n    c = [];\n  let a = 1;\n  for (const t of r) {\n    for (let e = 0; e < t; e++) {\n      const r = a * (Math.min(e, t - 1 - e) + .5) * o / i * .5 + .5;\n      c.push(r);\n    }\n    a = -a;\n  }\n  const u = Math.round(r[0] / 2),\n    h = [...c.slice(u), ...c.slice(0, u)],\n    p = n + m,\n    x = new Uint8Array(4 * p);\n  let _ = 4;\n  for (const l of h) t(l, x, _), _ += 4;\n  return x.copyWithin(0, _ - 4, _), x.copyWithin(_, 4, 8), {\n    encodedData: x,\n    paddedPixels: p\n  };\n}\nfunction l(t) {\n  return t.pattern.map(e => Math.round(e * t.pixelRatio));\n}\nfunction f(t) {\n  if (r(t)) return 1;\n  const e = l(t);\n  return Math.floor(e.reduce((t, e) => t + e));\n}\nfunction d(t) {\n  return l(t).reduce((t, e) => Math.max(t, e));\n}\nconst m = 2;\nexport { m as STIPPLE_TEXTURE_PADDING, u as StippleTextureRepository, d as computeLongestPattern, f as computeTextureSize };","map":{"version":3,"names":["packFloatRGBA","t","disposeMaybe","e","isNone","r","isSome","o","NoParameters","n","PixelFormat","s","PixelType","i","TextureWrapMode","c","Texture","a","u","constructor","_rctx","_cache","Map","destroy","forEach","stippleTexture","clear","_acquire","_patternId","get","refCount","encodedData","paddedPixels","p","l","h","width","height","internalFormat","RGBA","pixelFormat","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","set","release","dispose","delete","swap","pattern","join","pixelRatio","f","d","Math","floor","min","push","round","slice","m","x","Uint8Array","_","copyWithin","map","reduce","max","STIPPLE_TEXTURE_PADDING","StippleTextureRepository","computeLongestPattern","computeTextureSize"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/materials/StippleTextureRepository.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as t}from\"../../../../core/floatRGBA.js\";import{disposeMaybe as e,isNone as r,isSome as o}from\"../../../../core/maybe.js\";import{NoParameters as n}from\"../core/shaderModules/interfaces.js\";import{PixelFormat as s,PixelType as i,TextureWrapMode as c}from\"../../../webgl/enums.js\";import{Texture as a}from\"../../../webgl/Texture.js\";class u{constructor(t){this._rctx=t,this._cache=new Map}destroy(){this._cache.forEach((t=>e(t.stippleTexture))),this._cache.clear()}_acquire(t){if(r(t))return null;const e=this._patternId(t),o=this._cache.get(e);if(o)return o.refCount++,o;const{encodedData:n,paddedPixels:u}=p(t),l=new h(new a(this._rctx,{width:u,height:1,internalFormat:s.RGBA,pixelFormat:s.RGBA,dataType:i.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE},n));return this._cache.set(e,l),l}release(t){if(r(t))return;const e=this._patternId(t),n=this._cache.get(e);n&&(n.refCount--,0===n.refCount&&(o(n.stippleTexture)&&n.stippleTexture.dispose(),this._cache.delete(e)))}swap(t,e){const r=this._acquire(e);return this.release(t),r}_patternId(t){return`${t.pattern.join(\",\")}-r${t.pixelRatio}`}}class h extends n{constructor(t){super(),this.stippleTexture=t,this.refCount=1}}function p(e){const r=l(e),o=1/e.pixelRatio,n=f(e),s=d(e),i=(Math.floor(.5*(s-1))+.5)*o,c=[];let a=1;for(const t of r){for(let e=0;e<t;e++){const r=a*(Math.min(e,t-1-e)+.5)*o/i*.5+.5;c.push(r)}a=-a}const u=Math.round(r[0]/2),h=[...c.slice(u),...c.slice(0,u)],p=n+m,x=new Uint8Array(4*p);let _=4;for(const l of h)t(l,x,_),_+=4;return x.copyWithin(0,_-4,_),x.copyWithin(_,4,8),{encodedData:x,paddedPixels:p}}function l(t){return t.pattern.map((e=>Math.round(e*t.pixelRatio)))}function f(t){if(r(t))return 1;const e=l(t);return Math.floor(e.reduce(((t,e)=>t+e)))}function d(t){return l(t).reduce(((t,e)=>Math.max(t,e)))}const m=2;export{m as STIPPLE_TEXTURE_PADDING,u as StippleTextureRepository,d as computeLongestPattern,f as computeTextureSize};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,aAAa,IAAIC,CAAC,QAAK,+BAA+B;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,qCAAqC;AAAC,SAAOC,WAAW,IAAIC,CAAC,EAACC,SAAS,IAAIC,CAAC,EAACC,eAAe,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,OAAO,IAAIC,CAAC,QAAK,2BAA2B;AAAC,MAAMC,CAAC;EAACC,WAAWA,CAAClB,CAAC,EAAC;IAAC,IAAI,CAACmB,KAAK,GAACnB,CAAC,EAAC,IAAI,CAACoB,MAAM,GAAC,IAAIC,GAAG;EAAA;EAACC,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACF,MAAM,CAACG,OAAO,CAAEvB,CAAC,IAAEE,CAAC,CAACF,CAAC,CAACwB,cAAc,CAAC,CAAE,EAAC,IAAI,CAACJ,MAAM,CAACK,KAAK,EAAE;EAAA;EAACC,QAAQA,CAAC1B,CAAC,EAAC;IAAC,IAAGI,CAAC,CAACJ,CAAC,CAAC,EAAC,OAAO,IAAI;IAAC,MAAME,CAAC,GAAC,IAAI,CAACyB,UAAU,CAAC3B,CAAC,CAAC;MAACM,CAAC,GAAC,IAAI,CAACc,MAAM,CAACQ,GAAG,CAAC1B,CAAC,CAAC;IAAC,IAAGI,CAAC,EAAC,OAAOA,CAAC,CAACuB,QAAQ,EAAE,EAACvB,CAAC;IAAC,MAAK;QAACwB,WAAW,EAACtB,CAAC;QAACuB,YAAY,EAACd;MAAC,CAAC,GAACe,CAAC,CAAChC,CAAC,CAAC;MAACiC,CAAC,GAAC,IAAIC,CAAC,CAAC,IAAIlB,CAAC,CAAC,IAAI,CAACG,KAAK,EAAC;QAACgB,KAAK,EAAClB,CAAC;QAACmB,MAAM,EAAC,CAAC;QAACC,cAAc,EAAC3B,CAAC,CAAC4B,IAAI;QAACC,WAAW,EAAC7B,CAAC,CAAC4B,IAAI;QAACE,QAAQ,EAAC5B,CAAC,CAAC6B,aAAa;QAACC,QAAQ,EAAC5B,CAAC,CAAC6B;MAAa,CAAC,EAACnC,CAAC,CAAC,CAAC;IAAC,OAAO,IAAI,CAACY,MAAM,CAACwB,GAAG,CAAC1C,CAAC,EAAC+B,CAAC,CAAC,EAACA,CAAC;EAAA;EAACY,OAAOA,CAAC7C,CAAC,EAAC;IAAC,IAAGI,CAAC,CAACJ,CAAC,CAAC,EAAC;IAAO,MAAME,CAAC,GAAC,IAAI,CAACyB,UAAU,CAAC3B,CAAC,CAAC;MAACQ,CAAC,GAAC,IAAI,CAACY,MAAM,CAACQ,GAAG,CAAC1B,CAAC,CAAC;IAACM,CAAC,KAAGA,CAAC,CAACqB,QAAQ,EAAE,EAAC,CAAC,KAAGrB,CAAC,CAACqB,QAAQ,KAAGvB,CAAC,CAACE,CAAC,CAACgB,cAAc,CAAC,IAAEhB,CAAC,CAACgB,cAAc,CAACsB,OAAO,EAAE,EAAC,IAAI,CAAC1B,MAAM,CAAC2B,MAAM,CAAC7C,CAAC,CAAC,CAAC,CAAC;EAAA;EAAC8C,IAAIA,CAAChD,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAACsB,QAAQ,CAACxB,CAAC,CAAC;IAAC,OAAO,IAAI,CAAC2C,OAAO,CAAC7C,CAAC,CAAC,EAACI,CAAC;EAAA;EAACuB,UAAUA,CAAC3B,CAAC,EAAC;IAAC,OAAO,GAAEA,CAAC,CAACiD,OAAO,CAACC,IAAI,CAAC,GAAG,CAAE,KAAIlD,CAAC,CAACmD,UAAW,EAAC;EAAA;AAAC;AAAC,MAAMjB,CAAC,SAAS1B,CAAC;EAACU,WAAWA,CAAClB,CAAC,EAAC;IAAC,KAAK,EAAE,EAAC,IAAI,CAACwB,cAAc,GAACxB,CAAC,EAAC,IAAI,CAAC6B,QAAQ,GAAC,CAAC;EAAA;AAAC;AAAC,SAASG,CAACA,CAAC9B,CAAC,EAAC;EAAC,MAAME,CAAC,GAAC6B,CAAC,CAAC/B,CAAC,CAAC;IAACI,CAAC,GAAC,CAAC,GAACJ,CAAC,CAACiD,UAAU;IAAC3C,CAAC,GAAC4C,CAAC,CAAClD,CAAC,CAAC;IAACQ,CAAC,GAAC2C,CAAC,CAACnD,CAAC,CAAC;IAACU,CAAC,GAAC,CAAC0C,IAAI,CAACC,KAAK,CAAC,EAAE,IAAE7C,CAAC,GAAC,CAAC,CAAC,CAAC,GAAC,EAAE,IAAEJ,CAAC;IAACQ,CAAC,GAAC,EAAE;EAAC,IAAIE,CAAC,GAAC,CAAC;EAAC,KAAI,MAAMhB,CAAC,IAAII,CAAC,EAAC;IAAC,KAAI,IAAIF,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,CAAC,EAACE,CAAC,EAAE,EAAC;MAAC,MAAME,CAAC,GAACY,CAAC,IAAEsC,IAAI,CAACE,GAAG,CAACtD,CAAC,EAACF,CAAC,GAAC,CAAC,GAACE,CAAC,CAAC,GAAC,EAAE,CAAC,GAACI,CAAC,GAACM,CAAC,GAAC,EAAE,GAAC,EAAE;MAACE,CAAC,CAAC2C,IAAI,CAACrD,CAAC,CAAC;IAAA;IAACY,CAAC,GAAC,CAACA,CAAC;EAAA;EAAC,MAAMC,CAAC,GAACqC,IAAI,CAACI,KAAK,CAACtD,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC;IAAC8B,CAAC,GAAC,CAAC,GAAGpB,CAAC,CAAC6C,KAAK,CAAC1C,CAAC,CAAC,EAAC,GAAGH,CAAC,CAAC6C,KAAK,CAAC,CAAC,EAAC1C,CAAC,CAAC,CAAC;IAACe,CAAC,GAACxB,CAAC,GAACoD,CAAC;IAACC,CAAC,GAAC,IAAIC,UAAU,CAAC,CAAC,GAAC9B,CAAC,CAAC;EAAC,IAAI+B,CAAC,GAAC,CAAC;EAAC,KAAI,MAAM9B,CAAC,IAAIC,CAAC,EAAClC,CAAC,CAACiC,CAAC,EAAC4B,CAAC,EAACE,CAAC,CAAC,EAACA,CAAC,IAAE,CAAC;EAAC,OAAOF,CAAC,CAACG,UAAU,CAAC,CAAC,EAACD,CAAC,GAAC,CAAC,EAACA,CAAC,CAAC,EAACF,CAAC,CAACG,UAAU,CAACD,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,EAAC;IAACjC,WAAW,EAAC+B,CAAC;IAAC9B,YAAY,EAACC;EAAC,CAAC;AAAA;AAAC,SAASC,CAACA,CAACjC,CAAC,EAAC;EAAC,OAAOA,CAAC,CAACiD,OAAO,CAACgB,GAAG,CAAE/D,CAAC,IAAEoD,IAAI,CAACI,KAAK,CAACxD,CAAC,GAACF,CAAC,CAACmD,UAAU,CAAC,CAAE;AAAA;AAAC,SAASC,CAACA,CAACpD,CAAC,EAAC;EAAC,IAAGI,CAAC,CAACJ,CAAC,CAAC,EAAC,OAAO,CAAC;EAAC,MAAME,CAAC,GAAC+B,CAAC,CAACjC,CAAC,CAAC;EAAC,OAAOsD,IAAI,CAACC,KAAK,CAACrD,CAAC,CAACgE,MAAM,CAAE,CAAClE,CAAC,EAACE,CAAC,KAAGF,CAAC,GAACE,CAAC,CAAE,CAAC;AAAA;AAAC,SAASmD,CAACA,CAACrD,CAAC,EAAC;EAAC,OAAOiC,CAAC,CAACjC,CAAC,CAAC,CAACkE,MAAM,CAAE,CAAClE,CAAC,EAACE,CAAC,KAAGoD,IAAI,CAACa,GAAG,CAACnE,CAAC,EAACE,CAAC,CAAC,CAAE;AAAA;AAAC,MAAM0D,CAAC,GAAC,CAAC;AAAC,SAAOA,CAAC,IAAIQ,uBAAuB,EAACnD,CAAC,IAAIoD,wBAAwB,EAAChB,CAAC,IAAIiB,qBAAqB,EAAClB,CAAC,IAAImB,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}