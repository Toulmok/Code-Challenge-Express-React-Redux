{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../request.js\";\nimport { throwIfAborted as s } from \"../../core/promiseUtils.js\";\nimport { urlToObject as t } from \"../../core/urlUtils.js\";\nimport { Version as o } from \"../../core/Version.js\";\nimport { property as i } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { reader as p } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport l from \"../../geometry/Extent.js\";\nimport n from \"../../geometry/SpatialReference.js\";\nimport { id as u, popupEnabled as c } from \"../support/commonProperties.js\";\nconst y = y => {\n  let d = class extends y {\n    constructor() {\n      super(...arguments), this.capabilities = void 0, this.copyright = null, this.fullExtent = null, this.legendEnabled = !0, this.spatialReference = null, this.version = void 0, this._allLayersAndTablesPromise = null, this._allLayersAndTablesMap = null;\n    }\n    readCapabilities(e, r) {\n      const s = r.capabilities && r.capabilities.split(\",\").map(e => e.toLowerCase().trim());\n      if (!s) return {\n        operations: {\n          supportsExportMap: !1,\n          supportsExportTiles: !1,\n          supportsIdentify: !1,\n          supportsQuery: !1,\n          supportsTileMap: !1\n        },\n        exportMap: null,\n        exportTiles: null\n      };\n      const t = this.type,\n        i = \"tile\" !== t && !!r.supportsDynamicLayers,\n        p = s.includes(\"query\"),\n        a = s.includes(\"map\"),\n        l = !!r.exportTilesAllowed,\n        n = s.includes(\"tilemap\"),\n        u = s.includes(\"data\"),\n        c = \"tile\" !== t && (!r.tileInfo || i),\n        y = \"tile\" !== t && (!r.tileInfo || i),\n        d = \"tile\" !== t,\n        m = r.cimVersion && o.parse(r.cimVersion),\n        h = m?.since(1, 4) ?? !1,\n        b = m?.since(2, 0) ?? !1;\n      return {\n        operations: {\n          supportsExportMap: a,\n          supportsExportTiles: l,\n          supportsIdentify: p,\n          supportsQuery: u,\n          supportsTileMap: n\n        },\n        exportMap: a ? {\n          supportsArcadeExpressionForLabeling: h,\n          supportsSublayersChanges: d,\n          supportsDynamicLayers: i,\n          supportsSublayerVisibility: c,\n          supportsSublayerDefinitionExpression: y,\n          supportsCIMSymbols: b\n        } : null,\n        exportTiles: l ? {\n          maxExportTilesCount: +r.maxExportTilesCount\n        } : null\n      };\n    }\n    readVersion(e, r) {\n      let s = r.currentVersion;\n      return s || (s = r.hasOwnProperty(\"capabilities\") || r.hasOwnProperty(\"tables\") ? 10 : r.hasOwnProperty(\"supportedImageFormatTypes\") ? 9.31 : 9.3), s;\n    }\n    async fetchSublayerInfo(e, r) {\n      try {\n        return await this.fetchAllLayersAndTables(r), this._allLayersAndTablesMap?.get(e);\n      } catch {\n        return;\n      }\n    }\n    async fetchAllLayersAndTables(e) {\n      await this.load(e), this._allLayersAndTablesPromise || (this._allLayersAndTablesPromise = r(t(this.url).path + \"/layers\", {\n        responseType: \"json\",\n        query: {\n          f: \"json\",\n          ...this.customParameters,\n          token: this.apiKey\n        }\n      }).then(e => {\n        this._allLayersAndTablesMap = new Map();\n        for (const r of e.data.layers) this._allLayersAndTablesMap.set(r.id, r);\n        return {\n          result: e.data\n        };\n      }, e => ({\n        error: e\n      })));\n      const o = await this._allLayersAndTablesPromise;\n      if (s(e), \"result\" in o) return o.result;\n      throw o.error;\n    }\n  };\n  return e([i({\n    readOnly: !0\n  })], d.prototype, \"capabilities\", void 0), e([p(\"service\", \"capabilities\", [\"capabilities\", \"exportTilesAllowed\", \"maxExportTilesCount\", \"supportsDynamicLayers\", \"tileInfo\"])], d.prototype, \"readCapabilities\", null), e([i({\n    json: {\n      read: {\n        source: \"copyrightText\"\n      }\n    }\n  })], d.prototype, \"copyright\", void 0), e([i({\n    type: l\n  })], d.prototype, \"fullExtent\", void 0), e([i(u)], d.prototype, \"id\", void 0), e([i({\n    type: Boolean,\n    json: {\n      origins: {\n        service: {\n          read: {\n            enabled: !1\n          }\n        }\n      },\n      read: {\n        source: \"showLegend\"\n      },\n      write: {\n        target: \"showLegend\"\n      }\n    }\n  })], d.prototype, \"legendEnabled\", void 0), e([i(c)], d.prototype, \"popupEnabled\", void 0), e([i({\n    type: n\n  })], d.prototype, \"spatialReference\", void 0), e([i({\n    readOnly: !0\n  })], d.prototype, \"version\", void 0), e([p(\"version\", [\"currentVersion\", \"capabilities\", \"tables\", \"supportedImageFormatTypes\"])], d.prototype, \"readVersion\", null), d = e([a(\"esri.layers.mixins.ArcGISMapService\")], d), d;\n};\nexport { y as ArcGISMapService };","map":{"version":3,"names":["_","e","r","throwIfAborted","s","urlToObject","t","Version","o","property","i","reader","p","subclass","a","l","n","id","u","popupEnabled","c","y","d","constructor","arguments","capabilities","copyright","fullExtent","legendEnabled","spatialReference","version","_allLayersAndTablesPromise","_allLayersAndTablesMap","readCapabilities","split","map","toLowerCase","trim","operations","supportsExportMap","supportsExportTiles","supportsIdentify","supportsQuery","supportsTileMap","exportMap","exportTiles","type","supportsDynamicLayers","includes","exportTilesAllowed","tileInfo","m","cimVersion","parse","h","since","b","supportsArcadeExpressionForLabeling","supportsSublayersChanges","supportsSublayerVisibility","supportsSublayerDefinitionExpression","supportsCIMSymbols","maxExportTilesCount","readVersion","currentVersion","hasOwnProperty","fetchSublayerInfo","fetchAllLayersAndTables","get","load","url","path","responseType","query","f","customParameters","token","apiKey","then","Map","data","layers","set","result","error","readOnly","prototype","json","read","source","Boolean","origins","service","enabled","write","target","ArcGISMapService"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/mixins/ArcGISMapService.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../request.js\";import{throwIfAborted as s}from\"../../core/promiseUtils.js\";import{urlToObject as t}from\"../../core/urlUtils.js\";import{Version as o}from\"../../core/Version.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{reader as p}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"../../geometry/Extent.js\";import n from\"../../geometry/SpatialReference.js\";import{id as u,popupEnabled as c}from\"../support/commonProperties.js\";const y=y=>{let d=class extends y{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesPromise=null,this._allLayersAndTablesMap=null}readCapabilities(e,r){const s=r.capabilities&&r.capabilities.split(\",\").map((e=>e.toLowerCase().trim()));if(!s)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const t=this.type,i=\"tile\"!==t&&!!r.supportsDynamicLayers,p=s.includes(\"query\"),a=s.includes(\"map\"),l=!!r.exportTilesAllowed,n=s.includes(\"tilemap\"),u=s.includes(\"data\"),c=\"tile\"!==t&&(!r.tileInfo||i),y=\"tile\"!==t&&(!r.tileInfo||i),d=\"tile\"!==t,m=r.cimVersion&&o.parse(r.cimVersion),h=m?.since(1,4)??!1,b=m?.since(2,0)??!1;return{operations:{supportsExportMap:a,supportsExportTiles:l,supportsIdentify:p,supportsQuery:u,supportsTileMap:n},exportMap:a?{supportsArcadeExpressionForLabeling:h,supportsSublayersChanges:d,supportsDynamicLayers:i,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:y,supportsCIMSymbols:b}:null,exportTiles:l?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(e,r){let s=r.currentVersion;return s||(s=r.hasOwnProperty(\"capabilities\")||r.hasOwnProperty(\"tables\")?10:r.hasOwnProperty(\"supportedImageFormatTypes\")?9.31:9.3),s}async fetchSublayerInfo(e,r){try{return await this.fetchAllLayersAndTables(r),this._allLayersAndTablesMap?.get(e)}catch{return}}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=r(t(this.url).path+\"/layers\",{responseType:\"json\",query:{f:\"json\",...this.customParameters,token:this.apiKey}}).then((e=>{this._allLayersAndTablesMap=new Map;for(const r of e.data.layers)this._allLayersAndTablesMap.set(r.id,r);return{result:e.data}}),(e=>({error:e}))));const o=await this._allLayersAndTablesPromise;if(s(e),\"result\"in o)return o.result;throw o.error}};return e([i({readOnly:!0})],d.prototype,\"capabilities\",void 0),e([p(\"service\",\"capabilities\",[\"capabilities\",\"exportTilesAllowed\",\"maxExportTilesCount\",\"supportsDynamicLayers\",\"tileInfo\"])],d.prototype,\"readCapabilities\",null),e([i({json:{read:{source:\"copyrightText\"}}})],d.prototype,\"copyright\",void 0),e([i({type:l})],d.prototype,\"fullExtent\",void 0),e([i(u)],d.prototype,\"id\",void 0),e([i({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\"}}})],d.prototype,\"legendEnabled\",void 0),e([i(c)],d.prototype,\"popupEnabled\",void 0),e([i({type:n})],d.prototype,\"spatialReference\",void 0),e([i({readOnly:!0})],d.prototype,\"version\",void 0),e([p(\"version\",[\"currentVersion\",\"capabilities\",\"tables\",\"supportedImageFormatTypes\"])],d.prototype,\"readVersion\",null),d=e([a(\"esri.layers.mixins.ArcGISMapService\")],d),d};export{y as ArcGISMapService};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}