{"ast":null,"code":"import _objectSpread from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Evented.js\";\nimport i from \"../../../../../core/Handles.js\";\nimport { isSome as s } from \"../../../../../core/maybe.js\";\nimport { createDeferred as r, throwIfAborted as n } from \"../../../../../core/promiseUtils.js\";\nimport { watch as a, whenOnce as o, sync as l } from \"../../../../../core/reactiveUtils.js\";\nimport { property as d } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport { subclass as p } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { WatchUpdatingTracking as u } from \"../../../../../core/support/WatchUpdatingTracking.js\";\nimport c from \"../../../../../geometry/SpatialReference.js\";\nimport h from \"../../../../../layers/graphics/data/FeatureStore.js\";\nimport { QueryEngine as f } from \"../../../../../layers/graphics/data/QueryEngine.js\";\nimport g from \"../../../../../layers/support/TileInfo.js\";\nimport m from \"../../../../../rest/support/Query.js\";\nimport y from \"../../../../../symbols/support/ElevationInfo.js\";\nimport { getSnappingCandidateElevationAligner as _ } from \"../snappingCandidateElevationAlignment.js\";\nimport { getSnappingCandidateElevationFilter as S } from \"../snappingCandidateElevationFilter.js\";\nimport { getSymbologySnappingCandidatesFetcher as v } from \"../symbologySnappingCandidates.js\";\nimport { FeatureServiceTiledFetcher as F } from \"./FeatureServiceTiledFetcher.js\";\nimport { FeatureServiceTileStore as I } from \"./FeatureServiceTileStore.js\";\nvar w = /*#__PURE__*/function (_t$EventedAccessor) {\n  _inherits(w, _t$EventedAccessor);\n  var _super = _createSuper(w);\n  function w() {\n    var _this;\n    _classCallCheck(this, w);\n    _this = _super.apply(this, arguments), _this._isInitializing = !0, _this.remoteClient = null, _this._whenSetup = r(), _this._elevationAligner = _(), _this._elevationFilter = S(), _this._symbologyCandidatesFetcher = v(), _this._handles = new i(), _this._updatingHandles = new u(), _this._editsUpdatingHandles = new u(), _this._pendingApplyEdits = new Map(), _this._alignPointsInFeatures = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e, t) {\n        var i, s;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              i = {\n                points: e\n              };\n              _context.next = 3;\n              return _this.remoteClient.invoke(\"alignElevation\", i, {\n                signal: t\n              });\n            case 3:\n              s = _context.sent;\n              return _context.abrupt(\"return\", (n(t), s));\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }(), _this._getSymbologyCandidates = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e, t) {\n        var i, s;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              i = {\n                candidates: e,\n                spatialReference: _this._spatialReference.toJSON()\n              };\n              _context2.next = 3;\n              return _this.remoteClient.invoke(\"getSymbologyCandidates\", i, {\n                signal: t\n              });\n            case 3:\n              s = _context2.sent;\n              return _context2.abrupt(\"return\", (n(t), s));\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    return _this;\n  }\n  _createClass(w, [{\n    key: \"updating\",\n    get: function get() {\n      return this.updatingExcludingEdits || this._editsUpdatingHandles.updating || this._featureFetcher.updating;\n    }\n  }, {\n    key: \"updatingExcludingEdits\",\n    get: function get() {\n      return this._featureFetcher.updatingExcludingEdits || this._isInitializing || this._updatingHandles.updating;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this$_featureFetcher, _this$_queryEngine, _this$_featureStore, _this$_handles;\n      (_this$_featureFetcher = this._featureFetcher) !== null && _this$_featureFetcher !== void 0 && _this$_featureFetcher.destroy(), (_this$_queryEngine = this._queryEngine) !== null && _this$_queryEngine !== void 0 && _this$_queryEngine.destroy(), (_this$_featureStore = this._featureStore) !== null && _this$_featureStore !== void 0 && _this$_featureStore.clear(), (_this$_handles = this._handles) === null || _this$_handles === void 0 ? void 0 : _this$_handles.destroy();\n    }\n  }, {\n    key: \"setup\",\n    value: function () {\n      var _setup = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e) {\n        var _this2 = this;\n        var _e$serviceInfo, t, i, r, n, o, d, p;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!this.destroyed) {\n                _context3.next = 2;\n                break;\n              }\n              return _context3.abrupt(\"return\", {\n                result: {}\n              });\n            case 2:\n              _e$serviceInfo = e.serviceInfo, t = _e$serviceInfo.geometryType, i = _e$serviceInfo.objectIdField, r = _e$serviceInfo.timeInfo, n = _e$serviceInfo.fields, o = e.hasZ, d = c.fromJSON(e.spatialReference);\n              this._spatialReference = d, this._featureStore = new h(_objectSpread(_objectSpread({}, e.serviceInfo), {}, {\n                hasZ: o,\n                hasM: !1\n              })), this._queryEngine = new f({\n                spatialReference: e.spatialReference,\n                featureStore: this._featureStore,\n                geometryType: t,\n                fields: n,\n                hasZ: o,\n                hasM: !1,\n                objectIdField: i,\n                timeInfo: r\n              }), this._featureFetcher = new F({\n                store: new I({\n                  featureStore: this._featureStore\n                }),\n                url: e.serviceInfo.url,\n                objectIdField: e.serviceInfo.objectIdField,\n                globalIdField: e.serviceInfo.globalIdField,\n                capabilities: e.serviceInfo.capabilities,\n                spatialReference: d,\n                sourceSpatialReference: c.fromJSON(e.serviceInfo.spatialReference)\n              });\n              p = \"3d\" === e.configuration.viewType;\n              return _context3.abrupt(\"return\", (this._elevationAligner = _(p, {\n                elevationInfo: s(e.elevationInfo) ? y.fromJSON(e.elevationInfo) : null,\n                alignPointsInFeatures: this._alignPointsInFeatures,\n                spatialReference: d\n              }), this._elevationFilter = S(p), this._handles.add([a(function () {\n                return _this2._featureFetcher.availability;\n              }, function (e) {\n                return _this2.emit(\"notify-availability\", {\n                  availability: e\n                });\n              }, l), a(function () {\n                return _this2.updating;\n              }, function () {\n                return _this2._notifyUpdating();\n              })]), this._whenSetup.resolve(), this._isInitializing = !1, this.configure(e.configuration)));\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function setup(_x5) {\n        return _setup.apply(this, arguments);\n      }\n      return setup;\n    }()\n  }, {\n    key: \"configure\",\n    value: function () {\n      var _configure = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e) {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return this._updatingHandles.addPromise(this._whenSetup.promise);\n            case 2:\n              this._updateFeatureFetcherConfiguration(e);\n              return _context4.abrupt(\"return\", {\n                result: {}\n              });\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function configure(_x6) {\n        return _configure.apply(this, arguments);\n      }\n      return configure;\n    }()\n  }, {\n    key: \"fetchCandidates\",\n    value: function () {\n      var _fetchCandidates = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(e, t) {\n        var i, r, a, o, l, d;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return this._whenSetup.promise;\n            case 2:\n              n(t);\n              i = E(e);\n              r = s(t) ? t.signal : null;\n              _context5.next = 7;\n              return this._queryEngine.executeQueryForSnapping(i, r);\n            case 7:\n              a = _context5.sent;\n              n(r);\n              _context5.next = 11;\n              return this._elevationAligner.alignCandidates(a.candidates, r);\n            case 11:\n              o = _context5.sent;\n              n(r);\n              _context5.next = 15;\n              return this._symbologyCandidatesFetcher.fetch(o, r);\n            case 15:\n              l = _context5.sent;\n              n(r);\n              d = 0 === l.length ? o : o.concat(l);\n              return _context5.abrupt(\"return\", {\n                result: {\n                  candidates: this._elevationFilter.filter(i, d)\n                }\n              });\n            case 19:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function fetchCandidates(_x7, _x8) {\n        return _fetchCandidates.apply(this, arguments);\n      }\n      return fetchCandidates;\n    }()\n  }, {\n    key: \"updateTiles\",\n    value: function () {\n      var _updateTiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(e, t) {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return this._updatingHandles.addPromise(this._whenSetup.promise);\n            case 2:\n              n(t);\n              this._featureFetcher.tileSize = e.tileSize;\n              this._featureFetcher.tilesOfInterest = e.tiles;\n              this._featureFetcher.tileInfo = s(e.tileInfo) ? g.fromJSON(e.tileInfo) : null;\n              return _context6.abrupt(\"return\", j);\n            case 7:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function updateTiles(_x9, _x10) {\n        return _updateTiles.apply(this, arguments);\n      }\n      return updateTiles;\n    }()\n  }, {\n    key: \"refresh\",\n    value: function () {\n      var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(e, t) {\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return this._updatingHandles.addPromise(this._whenSetup.promise);\n            case 2:\n              n(t);\n              this._featureFetcher.refresh();\n              return _context7.abrupt(\"return\", j);\n            case 5:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function refresh(_x11, _x12) {\n        return _refresh.apply(this, arguments);\n      }\n      return refresh;\n    }()\n  }, {\n    key: \"whenNotUpdating\",\n    value: function () {\n      var _whenNotUpdating = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(e, t) {\n        var _this3 = this;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return this._updatingHandles.addPromise(this._whenSetup.promise);\n            case 2:\n              n(t);\n              _context8.next = 5;\n              return o(function () {\n                return !_this3.updatingExcludingEdits;\n              }, t);\n            case 5:\n              n(t);\n              return _context8.abrupt(\"return\", j);\n            case 7:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function whenNotUpdating(_x13, _x14) {\n        return _whenNotUpdating.apply(this, arguments);\n      }\n      return whenNotUpdating;\n    }()\n  }, {\n    key: \"getDebugInfo\",\n    value: function () {\n      var _getDebugInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(e, t) {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              return _context9.abrupt(\"return\", (n(t), {\n                result: this._featureFetcher.debugInfo\n              }));\n            case 1:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function getDebugInfo(_x15, _x16) {\n        return _getDebugInfo.apply(this, arguments);\n      }\n      return getDebugInfo;\n    }()\n  }, {\n    key: \"beginApplyEdits\",\n    value: function () {\n      var _beginApplyEdits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(e, t) {\n        var i;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              this._updatingHandles.addPromise(this._whenSetup.promise), n(t);\n              i = r();\n              return _context10.abrupt(\"return\", (this._pendingApplyEdits.set(e.id, i), this._featureFetcher.applyEdits(i.promise), this._editsUpdatingHandles.addPromise(i.promise), j));\n            case 3:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this);\n      }));\n      function beginApplyEdits(_x17, _x18) {\n        return _beginApplyEdits.apply(this, arguments);\n      }\n      return beginApplyEdits;\n    }()\n  }, {\n    key: \"endApplyEdits\",\n    value: function () {\n      var _endApplyEdits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(e, t) {\n        var i;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              i = this._pendingApplyEdits.get(e.id);\n              return _context11.abrupt(\"return\", (i && i.resolve(e.edits), n(t), j));\n            case 2:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, this);\n      }));\n      function endApplyEdits(_x19, _x20) {\n        return _endApplyEdits.apply(this, arguments);\n      }\n      return endApplyEdits;\n    }()\n  }, {\n    key: \"notifyElevationSourceChange\",\n    value: function () {\n      var _notifyElevationSourceChange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(e, t) {\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              return _context12.abrupt(\"return\", (this._elevationAligner.notifyElevationSourceChange(), j));\n            case 1:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12, this);\n      }));\n      function notifyElevationSourceChange(_x21, _x22) {\n        return _notifyElevationSourceChange.apply(this, arguments);\n      }\n      return notifyElevationSourceChange;\n    }()\n  }, {\n    key: \"notifySymbologyChange\",\n    value: function () {\n      var _notifySymbologyChange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(e, t) {\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              return _context13.abrupt(\"return\", (this._symbologyCandidatesFetcher.notifySymbologyChange(), j));\n            case 1:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13, this);\n      }));\n      function notifySymbologyChange(_x23, _x24) {\n        return _notifySymbologyChange.apply(this, arguments);\n      }\n      return notifySymbologyChange;\n    }()\n  }, {\n    key: \"setSymbologySnappingSupported\",\n    value: function () {\n      var _setSymbologySnappingSupported = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(e) {\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) switch (_context14.prev = _context14.next) {\n            case 0:\n              return _context14.abrupt(\"return\", (this._symbologyCandidatesFetcher = v(e, this._getSymbologyCandidates), j));\n            case 1:\n            case \"end\":\n              return _context14.stop();\n          }\n        }, _callee14, this);\n      }));\n      function setSymbologySnappingSupported(_x25) {\n        return _setSymbologySnappingSupported.apply(this, arguments);\n      }\n      return setSymbologySnappingSupported;\n    }()\n  }, {\n    key: \"_updateFeatureFetcherConfiguration\",\n    value: function _updateFeatureFetcherConfiguration(e) {\n      this._featureFetcher.filter = s(e.filter) ? m.fromJSON(e.filter) : null, this._featureFetcher.customParameters = e.customParameters;\n    }\n  }, {\n    key: \"_notifyUpdating\",\n    value: function _notifyUpdating() {\n      this.emit(\"notify-updating\", {\n        updating: this.updating\n      });\n    }\n  }]);\n  return w;\n}(t.EventedAccessor);\ne([d({\n  readOnly: !0\n})], w.prototype, \"updating\", null), e([d({\n  readOnly: !0\n})], w.prototype, \"updatingExcludingEdits\", null), e([d()], w.prototype, \"_isInitializing\", void 0), w = e([p(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker\")], w);\nvar b = w;\nfunction E(e) {\n  return {\n    point: e.point,\n    mode: e.mode,\n    distance: e.distance,\n    types: e.types,\n    query: s(e.filter) ? e.filter : {\n      where: \"1=1\"\n    }\n  };\n}\nvar j = {\n  result: {}\n};\nexport { b as default };","map":{"version":3,"names":["_","e","t","i","isSome","s","createDeferred","r","throwIfAborted","n","watch","a","whenOnce","o","sync","l","property","d","subclass","p","WatchUpdatingTracking","u","c","h","QueryEngine","f","g","m","y","getSnappingCandidateElevationAligner","getSnappingCandidateElevationFilter","S","getSymbologySnappingCandidatesFetcher","v","FeatureServiceTiledFetcher","F","FeatureServiceTileStore","I","w","_t$EventedAccessor","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","_isInitializing","remoteClient","_whenSetup","_elevationAligner","_elevationFilter","_symbologyCandidatesFetcher","_handles","_updatingHandles","_editsUpdatingHandles","_pendingApplyEdits","Map","_alignPointsInFeatures","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","points","invoke","signal","sent","abrupt","stop","_x","_x2","_getSymbologyCandidates","_ref2","_callee2","_callee2$","_context2","candidates","spatialReference","_spatialReference","toJSON","_x3","_x4","_createClass","key","get","updatingExcludingEdits","updating","_featureFetcher","value","destroy","_this$_featureFetcher","_this$_queryEngine","_this$_featureStore","_this$_handles","_queryEngine","_featureStore","clear","_setup","_callee3","_this2","_e$serviceInfo","_callee3$","_context3","destroyed","result","serviceInfo","geometryType","objectIdField","timeInfo","fields","hasZ","fromJSON","_objectSpread","hasM","featureStore","store","url","globalIdField","capabilities","sourceSpatialReference","configuration","viewType","elevationInfo","alignPointsInFeatures","add","availability","emit","_notifyUpdating","resolve","configure","setup","_x5","_configure","_callee4","_callee4$","_context4","addPromise","promise","_updateFeatureFetcherConfiguration","_x6","_fetchCandidates","_callee5","_callee5$","_context5","E","executeQueryForSnapping","alignCandidates","fetch","length","concat","filter","fetchCandidates","_x7","_x8","_updateTiles","_callee6","_callee6$","_context6","tileSize","tilesOfInterest","tiles","tileInfo","j","updateTiles","_x9","_x10","_refresh","_callee7","_callee7$","_context7","refresh","_x11","_x12","_whenNotUpdating","_callee8","_this3","_callee8$","_context8","whenNotUpdating","_x13","_x14","_getDebugInfo","_callee9","_callee9$","_context9","debugInfo","getDebugInfo","_x15","_x16","_beginApplyEdits","_callee10","_callee10$","_context10","set","id","applyEdits","beginApplyEdits","_x17","_x18","_endApplyEdits","_callee11","_callee11$","_context11","edits","endApplyEdits","_x19","_x20","_notifyElevationSourceChange","_callee12","_callee12$","_context12","notifyElevationSourceChange","_x21","_x22","_notifySymbologyChange","_callee13","_callee13$","_context13","notifySymbologyChange","_x23","_x24","_setSymbologySnappingSupported","_callee14","_callee14$","_context14","setSymbologySnappingSupported","_x25","customParameters","EventedAccessor","readOnly","prototype","b","point","mode","distance","types","query","where","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Evented.js\";import i from\"../../../../../core/Handles.js\";import{isSome as s}from\"../../../../../core/maybe.js\";import{createDeferred as r,throwIfAborted as n}from\"../../../../../core/promiseUtils.js\";import{watch as a,whenOnce as o,sync as l}from\"../../../../../core/reactiveUtils.js\";import{property as d}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import{subclass as p}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{WatchUpdatingTracking as u}from\"../../../../../core/support/WatchUpdatingTracking.js\";import c from\"../../../../../geometry/SpatialReference.js\";import h from\"../../../../../layers/graphics/data/FeatureStore.js\";import{QueryEngine as f}from\"../../../../../layers/graphics/data/QueryEngine.js\";import g from\"../../../../../layers/support/TileInfo.js\";import m from\"../../../../../rest/support/Query.js\";import y from\"../../../../../symbols/support/ElevationInfo.js\";import{getSnappingCandidateElevationAligner as _}from\"../snappingCandidateElevationAlignment.js\";import{getSnappingCandidateElevationFilter as S}from\"../snappingCandidateElevationFilter.js\";import{getSymbologySnappingCandidatesFetcher as v}from\"../symbologySnappingCandidates.js\";import{FeatureServiceTiledFetcher as F}from\"./FeatureServiceTiledFetcher.js\";import{FeatureServiceTileStore as I}from\"./FeatureServiceTileStore.js\";let w=class extends t.EventedAccessor{constructor(){super(...arguments),this._isInitializing=!0,this.remoteClient=null,this._whenSetup=r(),this._elevationAligner=_(),this._elevationFilter=S(),this._symbologyCandidatesFetcher=v(),this._handles=new i,this._updatingHandles=new u,this._editsUpdatingHandles=new u,this._pendingApplyEdits=new Map,this._alignPointsInFeatures=async(e,t)=>{const i={points:e},s=await this.remoteClient.invoke(\"alignElevation\",i,{signal:t});return n(t),s},this._getSymbologyCandidates=async(e,t)=>{const i={candidates:e,spatialReference:this._spatialReference.toJSON()},s=await this.remoteClient.invoke(\"getSymbologyCandidates\",i,{signal:t});return n(t),s}}get updating(){return this.updatingExcludingEdits||this._editsUpdatingHandles.updating||this._featureFetcher.updating}get updatingExcludingEdits(){return this._featureFetcher.updatingExcludingEdits||this._isInitializing||this._updatingHandles.updating}destroy(){this._featureFetcher?.destroy(),this._queryEngine?.destroy(),this._featureStore?.clear(),this._handles?.destroy()}async setup(e){if(this.destroyed)return{result:{}};const{geometryType:t,objectIdField:i,timeInfo:r,fields:n}=e.serviceInfo,{hasZ:o}=e,d=c.fromJSON(e.spatialReference);this._spatialReference=d,this._featureStore=new h({...e.serviceInfo,hasZ:o,hasM:!1}),this._queryEngine=new f({spatialReference:e.spatialReference,featureStore:this._featureStore,geometryType:t,fields:n,hasZ:o,hasM:!1,objectIdField:i,timeInfo:r}),this._featureFetcher=new F({store:new I({featureStore:this._featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,globalIdField:e.serviceInfo.globalIdField,capabilities:e.serviceInfo.capabilities,spatialReference:d,sourceSpatialReference:c.fromJSON(e.serviceInfo.spatialReference)});const p=\"3d\"===e.configuration.viewType;return this._elevationAligner=_(p,{elevationInfo:s(e.elevationInfo)?y.fromJSON(e.elevationInfo):null,alignPointsInFeatures:this._alignPointsInFeatures,spatialReference:d}),this._elevationFilter=S(p),this._handles.add([a((()=>this._featureFetcher.availability),(e=>this.emit(\"notify-availability\",{availability:e})),l),a((()=>this.updating),(()=>this._notifyUpdating()))]),this._whenSetup.resolve(),this._isInitializing=!1,this.configure(e.configuration)}async configure(e){return await this._updatingHandles.addPromise(this._whenSetup.promise),this._updateFeatureFetcherConfiguration(e),{result:{}}}async fetchCandidates(e,t){await this._whenSetup.promise,n(t);const i=E(e),r=s(t)?t.signal:null,a=await this._queryEngine.executeQueryForSnapping(i,r);n(r);const o=await this._elevationAligner.alignCandidates(a.candidates,r);n(r);const l=await this._symbologyCandidatesFetcher.fetch(o,r);n(r);const d=0===l.length?o:o.concat(l);return{result:{candidates:this._elevationFilter.filter(i,d)}}}async updateTiles(e,t){return await this._updatingHandles.addPromise(this._whenSetup.promise),n(t),this._featureFetcher.tileSize=e.tileSize,this._featureFetcher.tilesOfInterest=e.tiles,this._featureFetcher.tileInfo=s(e.tileInfo)?g.fromJSON(e.tileInfo):null,j}async refresh(e,t){return await this._updatingHandles.addPromise(this._whenSetup.promise),n(t),this._featureFetcher.refresh(),j}async whenNotUpdating(e,t){return await this._updatingHandles.addPromise(this._whenSetup.promise),n(t),await o((()=>!this.updatingExcludingEdits),t),n(t),j}async getDebugInfo(e,t){return n(t),{result:this._featureFetcher.debugInfo}}async beginApplyEdits(e,t){this._updatingHandles.addPromise(this._whenSetup.promise),n(t);const i=r();return this._pendingApplyEdits.set(e.id,i),this._featureFetcher.applyEdits(i.promise),this._editsUpdatingHandles.addPromise(i.promise),j}async endApplyEdits(e,t){const i=this._pendingApplyEdits.get(e.id);return i&&i.resolve(e.edits),n(t),j}async notifyElevationSourceChange(e,t){return this._elevationAligner.notifyElevationSourceChange(),j}async notifySymbologyChange(e,t){return this._symbologyCandidatesFetcher.notifySymbologyChange(),j}async setSymbologySnappingSupported(e){return this._symbologyCandidatesFetcher=v(e,this._getSymbologyCandidates),j}_updateFeatureFetcherConfiguration(e){this._featureFetcher.filter=s(e.filter)?m.fromJSON(e.filter):null,this._featureFetcher.customParameters=e.customParameters}_notifyUpdating(){this.emit(\"notify-updating\",{updating:this.updating})}};e([d({readOnly:!0})],w.prototype,\"updating\",null),e([d({readOnly:!0})],w.prototype,\"updatingExcludingEdits\",null),e([d()],w.prototype,\"_isInitializing\",void 0),w=e([p(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker\")],w);const b=w;function E(e){return{point:e.point,mode:e.mode,distance:e.distance,types:e.types,query:s(e.filter)?e.filter:{where:\"1=1\"}}}const j={result:{}};export{b as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}