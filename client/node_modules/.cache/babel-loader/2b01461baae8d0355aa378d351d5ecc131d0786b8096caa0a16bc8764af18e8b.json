{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport r from \"../../../../core/Handles.js\";\nimport { isNone as o } from \"../../../../core/maybe.js\";\nimport { isAbortError as s } from \"../../../../core/promiseUtils.js\";\nimport { watch as i, on as a } from \"../../../../core/reactiveUtils.js\";\nimport { property as n } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as l } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c } from \"../../../../chunks/vec3f64.js\";\nimport u from \"../../../../geometry/Point.js\";\nimport { center as p } from \"../../../../geometry/support/aaBoundingRect.js\";\nlet h = class extends t {\n  get surface() {\n    return this.view.map?.ground;\n  }\n  get surfaceView() {\n    return this.view.basemapTerrain;\n  }\n  get renderLocation() {\n    if (!this.location) return null;\n    const e = c();\n    return this.view.renderCoordsHelper.toRenderCoords(this.location, e), e;\n  }\n  constructor(e) {\n    super(e), this.location = null, this._updateController = null, this._handles = new r();\n  }\n  initialize() {\n    this.view.state.isLocal && (this._handles.add([i(() => [this.surfaceView?.spatialReference, this.surfaceView?.extent], () => this._update()), a(() => this.surface?.layers, \"change\", () => this._update())]), this._update());\n  }\n  destroy() {\n    this._handles.destroy();\n  }\n  _update() {\n    if (this._updateController && (this._updateController.abort(), this._updateController = null), !this.surfaceView || o(this.surfaceView.extent) || o(this.surfaceView.spatialReference)) return void this._set(\"location\", null);\n    const e = p(this.surfaceView.extent),\n      t = new u({\n        x: e[0],\n        y: e[1],\n        z: 0,\n        spatialReference: this.surfaceView.spatialReference\n      });\n    this.surface && this.surface.layers.length > 0 ? (this._set(\"location\", null), this._updateController = new AbortController(), this.surface.queryElevation(t, {\n      noDataValue: 0,\n      signal: this._updateController.signal,\n      cache: this.cache\n    }).then(e => {\n      this._updateController = null, this._set(\"location\", e.geometry);\n    }).catch(e => {\n      s(e) || e && \"elevation-query:invalid-layer\" === e.name || console.error(\"StableSurfaceCenter failed to update: \", e);\n    })) : this._set(\"location\", t);\n  }\n};\ne([n({\n  constructOnly: !0\n})], h.prototype, \"view\", void 0), e([n({\n  constructOnly: !0\n})], h.prototype, \"cache\", void 0), e([n()], h.prototype, \"surface\", null), e([n()], h.prototype, \"surfaceView\", null), e([n({\n  readOnly: !0\n})], h.prototype, \"location\", void 0), e([n({\n  readOnly: !0\n})], h.prototype, \"renderLocation\", null), h = e([l(\"esri.views.3d.terrain.StableSurfaceCenter\")], h);\nexport { h as StableSurfaceCenter };","map":{"version":3,"names":["_","e","t","r","isNone","o","isAbortError","s","watch","i","on","a","property","n","subclass","l","c","u","center","p","h","surface","view","map","ground","surfaceView","basemapTerrain","renderLocation","location","renderCoordsHelper","toRenderCoords","constructor","_updateController","_handles","initialize","state","isLocal","add","spatialReference","extent","_update","layers","destroy","abort","_set","x","y","z","length","AbortController","queryElevation","noDataValue","signal","cache","then","geometry","catch","name","console","error","constructOnly","prototype","readOnly","StableSurfaceCenter"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/pointsOfInterest/StableSurfaceCenter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Handles.js\";import{isNone as o}from\"../../../../core/maybe.js\";import{isAbortError as s}from\"../../../../core/promiseUtils.js\";import{watch as i,on as a}from\"../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c}from\"../../../../chunks/vec3f64.js\";import u from\"../../../../geometry/Point.js\";import{center as p}from\"../../../../geometry/support/aaBoundingRect.js\";let h=class extends t{get surface(){return this.view.map?.ground}get surfaceView(){return this.view.basemapTerrain}get renderLocation(){if(!this.location)return null;const e=c();return this.view.renderCoordsHelper.toRenderCoords(this.location,e),e}constructor(e){super(e),this.location=null,this._updateController=null,this._handles=new r}initialize(){this.view.state.isLocal&&(this._handles.add([i((()=>[this.surfaceView?.spatialReference,this.surfaceView?.extent]),(()=>this._update())),a((()=>this.surface?.layers),\"change\",(()=>this._update()))]),this._update())}destroy(){this._handles.destroy()}_update(){if(this._updateController&&(this._updateController.abort(),this._updateController=null),!this.surfaceView||o(this.surfaceView.extent)||o(this.surfaceView.spatialReference))return void this._set(\"location\",null);const e=p(this.surfaceView.extent),t=new u({x:e[0],y:e[1],z:0,spatialReference:this.surfaceView.spatialReference});this.surface&&this.surface.layers.length>0?(this._set(\"location\",null),this._updateController=new AbortController,this.surface.queryElevation(t,{noDataValue:0,signal:this._updateController.signal,cache:this.cache}).then((e=>{this._updateController=null,this._set(\"location\",e.geometry)})).catch((e=>{s(e)||e&&\"elevation-query:invalid-layer\"===e.name||console.error(\"StableSurfaceCenter failed to update: \",e)}))):this._set(\"location\",t)}};e([n({constructOnly:!0})],h.prototype,\"view\",void 0),e([n({constructOnly:!0})],h.prototype,\"cache\",void 0),e([n()],h.prototype,\"surface\",null),e([n()],h.prototype,\"surfaceView\",null),e([n({readOnly:!0})],h.prototype,\"location\",void 0),e([n({readOnly:!0})],h.prototype,\"renderLocation\",null),h=e([l(\"esri.views.3d.terrain.StableSurfaceCenter\")],h);export{h as StableSurfaceCenter};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}