{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../Color.js\";\nimport has from \"../../../../core/has.js\";\nimport { isSome as t, get as s, none as r, isNone as i, unwrapOr as a } from \"../../../../core/maybe.js\";\nimport { throwIfAborted as o } from \"../../../../core/promiseUtils.js\";\nimport { pt2px as n } from \"../../../../core/screenUtils.js\";\nimport { c, i as l, k as h, w as d } from \"../../../../chunks/mat4.js\";\nimport { c as p } from \"../../../../chunks/mat4f64.js\";\nimport { l as m, o as u, c as y, B as f, a as _, s as b } from \"../../../../chunks/vec3.js\";\nimport { d as g, O as P, Z as x, f as R, c as v } from \"../../../../chunks/vec3f64.js\";\nimport { O as L, c as S } from \"../../../../chunks/vec4f64.js\";\nimport { projectPointToVector as C, computeTranslationToOriginAndRotation as j } from \"../../../../geometry/projection.js\";\nimport { create as w, size as U, containsPoint as E, center as T } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { defaultPrimitive as A } from \"../../../../symbols/support/ObjectSymbol3DLayerResource.js\";\nimport { objectSymbolLayerPrimitiveBoundingBox as B, objectSymbolLayerSizeWithResourceSize as I } from \"../../../../symbols/support/symbolLayerUtils3D.js\";\nimport { perLodInstanceElevationAligner as O } from \"./ElevationAligners.js\";\nimport { needsElevationUpdates3D as G, evaluateElevationInfoAtPoint as D, SampleElevationInfo as M } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as z } from \"./ElevationContext.js\";\nimport F from \"./Graphics3DLodInstanceGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as V } from \"./Graphics3DSymbolLayer.js\";\nimport { validateSymbolLayerSize as k, mixinColorAndOpacity as H, computeObjectScale as W, computeObjectRotation as q } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as N } from \"./interfaces.js\";\nimport { LoadStatus as $ } from \"./Loadable.js\";\nimport { makeLodResources as Z } from \"./lodResourceUtils.js\";\nimport { fetch as J } from \"./objectResourceUtils.js\";\nimport { placePointOnGeometry as K, extendPointGraphicElevationContext as Q } from \"./pointUtils.js\";\nimport { isValidPrimitive as X, primitiveLodResources as Y } from \"./primitiveObjectSymbolUtils.js\";\nimport { defaultSymbolLayerMemoryComplexity as ee } from \"./symbolComplexity.js\";\nimport { initFastSymbolUpdatesState as te, updateFastSymbolUpdatesState as se, evaluateModelTransform as re, evaluateModelTransformScale as ie } from \"../support/FastSymbolUpdates.js\";\nimport { CullFaceOptions as ae } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { VertexAttribute as oe } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { LodRenderer as ne } from \"../../webgl-engine/lib/lodRendering/LodRenderer.js\";\nimport { materialsFromLodResources as ce, texturesFromLodResources as le, geometriesFromLodResources as he, geometriesFromLodLevelResources as de } from \"../../webgl-engine/lib/lodRendering/LodResources.js\";\nimport { DefaultMaterial as pe } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nclass me {\n  constructor(e, t, s, r, i, a, o, n, c, l, h, d) {\n    this.lodResources = e, this.lodRenderer = t, this.stageResources = s, this.originalMaterialParameters = r, this.resourceSize = i, this.isEsriSymbolResource = a, this.isWosr = o, this.resourceBoundingBox = n, this.symbolSize = c, this.extentPadding = l, this.physicalBasedRenderingEnabled = h, this.pivotOffset = d;\n  }\n}\nclass ue extends V {\n  getCachedSize() {\n    const [e, s, r] = t(this._resources) ? this._resources.symbolSize : [1, 1, 1];\n    return {\n      width: e,\n      depth: s,\n      height: r\n    };\n  }\n  constructor(e, t, s, r) {\n    super(e, t, s, r), this._resources = null, this._optionalFields = new Array(), this._instanceIndexToGraphicUid = new Map(), this._hasLoadedPBRTextures = !1, this._disposeResourceHandles = new Array(), this.ensureDrapedStatus(!1), this._hasLoadedPBRTextures = s.physicalBasedRenderingEnabled;\n  }\n  async doLoad(e) {\n    if (!this._drivenProperties.size) {\n      if (k(this.symbolLayer)) throw new Error();\n    }\n    const t = this.symbolLayer;\n    if (this._isPrimitive) {\n      const s = t.resource ? t.resource.primitive : A;\n      this._resources = await this._createResourcesForPrimitive(s, e);\n    } else this._resources = await this._createResourcesForUrl(t.resource.href, e);\n    this.layerOpacityChanged(), this.slicePlaneEnabledChanged(), this.physicalBasedRenderingChanged(), this.complexity = this.computeComplexity();\n  }\n  get extentPadding() {\n    return t(this._resources) ? this._resources.extentPadding : 0;\n  }\n  get _isPrimitive() {\n    return !(this.symbolLayer.resource && this.symbolLayer.resource.href);\n  }\n  get lodRenderer() {\n    return t(this._resources) ? this._resources.lodRenderer : null;\n  }\n  _setMaterialTransparencyParams(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : s(this.symbolLayer, \"material\", \"color\");\n    const r = this._getCombinedOpacity(t),\n      i = r < 1 || this.needsDrivenTransparentPass;\n    return e.transparent = i, e.opacity = r, e.cullFace = i ? ae.None : ae.Back, e;\n  }\n  async _createResourcesForPrimitive(s, i) {\n    if (!X(s)) throw new Error(`Unknown object symbol primitive: ${s}`);\n    const a = this.symbolLayer,\n      o = w(B(s)),\n      c = g(U(o)),\n      l = g(I(c, a)),\n      h = m(l),\n      d = !1,\n      p = !1,\n      u = {\n        usePBR: this._context.physicalBasedRenderingEnabled,\n        isSchematic: !0,\n        ambient: P,\n        diffuse: P,\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        hasSliceHighlight: !1,\n        castShadows: this.symbolLayer.castShadows,\n        offsetTransparentBackfaces: !this.symbolLayer.isPrimitive\n      },\n      y = !!u.usePBR;\n    this._setMaterialTransparencyParams(u);\n    const f = this.symbol;\n    if (\"point-3d\" === f.type && f.verticalOffset) {\n      const {\n        screenLength: e,\n        minWorldLength: s,\n        maxWorldLength: r\n      } = f.verticalOffset;\n      u.verticalOffset = {\n        screenLength: n(e),\n        minWorldLength: s || 0,\n        maxWorldLength: t(r) ? r : 1 / 0\n      }, u.castShadows = !1;\n    }\n    if (this._context.screenSizePerspectiveEnabled && (u.screenSizePerspective = this._context.sharedResources.screenSizePerspectiveSettings), this._drivenProperties.color) u.externalColor = L;else {\n      const s = t(a.material) ? a.material.color : null,\n        r = t(s) ? e.toUnitRGBA(s) : L;\n      u.externalColor = r;\n    }\n    this._fastUpdates = te(this._context.renderer, this._fastVisualVariableConvertOptions(o, l, c, r)), u.instanced = [\"transformation\"], this._fastUpdates.enabled ? (Object.assign(u, this._fastUpdates.materialParameters), u.instanced.push(\"featureAttribute\"), this._optionalFields.push(\"featureAttribute\")) : this._hasPerInstanceColor() && (u.instanced.push(\"color\"), this._optionalFields.push(\"color\")), has(\"enable-feature:objectAndLayerId-rendering\") && (u.instanced.push(\"objectAndLayerIdColor\"), this._optionalFields.push(\"objectAndLayerIdColor\"));\n    const _ = new pe(u),\n      b = Y(s, _);\n    if (!b) throw new Error(`Unknown object symbol primitive: ${s}`);\n    const x = ce(b).map(e => ({\n        opacity: 1,\n        transparent: e.parameters.transparent\n      })),\n      R = await this._createStageResources(b, y, i),\n      v = await this._createLodRenderer(b, i);\n    return new me(b, v, R, x, c, d, p, o, l, h, y, r);\n  }\n  async _createResourcesForUrl(e, i) {\n    const a = [\"transformation\"],\n      o = {\n        materialParamsMixin: {\n          instanced: a,\n          hasSlicePlane: this._context.slicePlaneEnabled,\n          castShadows: this.symbolLayer.castShadows\n        },\n        streamDataRequester: this._context.streamDataRequester,\n        cache: this._context.sharedResources.objectResourceCache\n      };\n    this._fastUpdates = te(this._context.renderer, this._fastVisualVariableConvertOptions(r, r, r, r)), this._fastUpdates.enabled ? (Object.assign(o.materialParamsMixin, this._fastUpdates.materialParameters), a.push(\"featureAttribute\"), this._optionalFields.push(\"featureAttribute\")) : this._hasPerInstanceColor() && (a.push(\"color\"), this._optionalFields.push(\"color\")), has(\"enable-feature:objectAndLayerId-rendering\") && (a.push(\"objectAndLayerIdColor\"), this._optionalFields.push(\"objectAndLayerIdColor\"));\n    const c = this.symbol;\n    if (\"point-3d\" === c.type && c.verticalOffset) {\n      const {\n        screenLength: e,\n        minWorldLength: s,\n        maxWorldLength: r\n      } = c.verticalOffset;\n      o.materialParamsMixin.verticalOffset = {\n        screenLength: n(e),\n        minWorldLength: s || 0,\n        maxWorldLength: t(r) ? r : 1 / 0\n      }, o.materialParamsMixin.castShadows = !1;\n    }\n    o.signal = i, o.usePBR = this._context.physicalBasedRenderingEnabled, o.skipHighLods = this._context.skipHighSymbolLods;\n    const l = o.usePBR,\n      h = await J(e, o),\n      d = h.isEsriSymbolResource,\n      p = h.isWosr,\n      u = Z(h.lods);\n    u.levels.sort((e, t) => e.minScreenSpaceRadius - t.minScreenSpaceRadius);\n    const y = this._context,\n      f = this.symbolLayer.material,\n      _ = this._getExternalColorParameters(f),\n      b = s(this.symbolLayer, \"material\", \"color\"),\n      P = this._getCombinedOpacity(b, {\n        hasIntrinsicColor: !0\n      }),\n      x = this.needsDrivenTransparentPass,\n      R = ce(u),\n      v = ce(u).map(e => ({\n        opacity: e.parameters.opacity || 1,\n        transparent: e.parameters.transparent\n      }));\n    R.forEach(e => {\n      const t = e.parameters;\n      e.setParameters(_);\n      const s = t.opacity * P,\n        r = s < 1 || x || t.transparent;\n      e.setParameters({\n        opacity: s,\n        transparent: r\n      }), y.screenSizePerspectiveEnabled && e.setParameters({\n        screenSizePerspective: y.sharedResources.screenSizePerspectiveSettings\n      });\n    });\n    const L = h.referenceBoundingBox,\n      S = g(U(L)),\n      C = g(u.levels[0].pivotOffset),\n      j = g(I(S, this.symbolLayer)),\n      w = m(j);\n    se(this._fastUpdates, this._context.renderer, this._fastVisualVariableConvertOptions(L, j, S, C)) && R.forEach(e => e.setParameters(this._fastUpdates.materialParameters));\n    const E = await this._createStageResources(u, l, i),\n      T = await this._createLodRenderer(u, i);\n    return new me(u, T, E, v, S, d, p, L, j, w, l, C);\n  }\n  _addDisposeResource(e) {\n    this._disposeResourceHandles.push(e);\n  }\n  async _createStageResources(e, t, s) {\n    const r = this._context.stage,\n      i = ce(e);\n    t !== this._context.physicalBasedRenderingEnabled && this.physicalBasedRenderingChanged(), r.addMany(i), this._addDisposeResource(() => r.removeMany(i));\n    const a = le(e);\n    r.addMany(a), this._addDisposeResource(() => r.removeMany(a)), await r.load(a, s), o(s);\n    const n = he(e);\n    return r.addMany(n), this._addDisposeResource(() => r.removeMany(n)), {\n      materials: i,\n      textures: a,\n      geometries: n\n    };\n  }\n  async _createLodRenderer(e, t) {\n    const s = this._context.stage,\n      r = {\n        layerUid: this._context.layer.uid,\n        graphicUid: e => this._instanceIndexToGraphicUid.get(e),\n        notifyGraphicGeometryChanged: e => this._context.notifyGraphicGeometryChanged(this._instanceIndexToGraphicUid.get(e)),\n        notifyGraphicVisibilityChanged: e => this._context.notifyGraphicVisibilityChanged(this._instanceIndexToGraphicUid.get(e))\n      },\n      i = this._fastUpdates.enabled ? {\n        applyTransform: (e, t, s) => {\n          e.getFeatureAttribute(t, be), c(s, re(this._fastUpdates.materialParameters, be, s));\n        },\n        scaleFactor: (e, t, s) => (t.getFeatureAttribute(s, be), ie(e, this._fastUpdates.materialParameters, be))\n      } : null,\n      a = new ne({\n        symbol: e,\n        optionalFields: this._optionalFields,\n        metadata: r,\n        shaderTransformation: i\n      }, this._context.scheduler);\n    return a.slicePlaneEnabled = this._context.slicePlaneEnabled, this._addDisposeResource(() => {\n      s.removeRenderPlugin(a), a.destroy();\n    }), await s.addRenderPlugin(a.slots, a, t), a;\n  }\n  _getExternalColorParameters(s) {\n    const r = {};\n    return this._drivenProperties.color ? r.externalColor = L : t(s) && t(s.color) ? r.externalColor = e.toUnitRGBA(s.color) : (r.externalColor = L, r.colorMixMode = \"ignore\"), r;\n  }\n  destroy() {\n    super.destroy(), this._cleanupResources();\n  }\n  _cleanupResources() {\n    this._disposeResourceHandles.forEach(e => e()), this._disposeResourceHandles.length = 0, this._resources = null;\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry)) return null;\n    const s = K(t.geometry);\n    if (i(s)) return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`), null;\n    const r = this.setGraphicElevationContext(t, new z()),\n      a = e.renderingInfo;\n    return this._createAs3DShape(t, s, a, r, t.uid, e.layer.uid);\n  }\n  notifyDestroyGraphicLayer(e) {\n    this._instanceIndexToGraphicUid.delete(e.instanceIndex);\n  }\n  graphicLayerToGraphicId() {\n    return 0;\n  }\n  layerOpacityChanged() {\n    if (i(this._resources)) return;\n    const e = this._drivenProperties.opacity,\n      t = !this._isPrimitive,\n      r = this._resources.stageResources.materials,\n      a = this._resources.originalMaterialParameters;\n    for (let i = 0; i < r.length; i++) {\n      const o = r[i],\n        n = s(this.symbolLayer, \"material\", \"color\"),\n        c = a[i],\n        l = this._getCombinedOpacity(n, {\n          hasIntrinsicColor: t\n        }) * c.opacity,\n        h = l < 1 || e || c.transparent;\n      o.setParameters({\n        opacity: l,\n        transparent: h\n      }), this._isPrimitive && o.setParameters({\n        cullFace: h ? ae.None : ae.Back\n      });\n    }\n  }\n  layerElevationInfoChanged(e, t) {\n    return this.updateGraphics3DGraphicElevationInfo(e, t, G);\n  }\n  slicePlaneEnabledChanged() {\n    if (i(this._resources)) return !0;\n    this._resources.lodRenderer.slicePlaneEnabled = this._context.slicePlaneEnabled;\n    for (const e of this._resources.stageResources.materials) e.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    });\n    return !0;\n  }\n  physicalBasedRenderingChanged() {\n    if (i(this._resources)) return !0;\n    const {\n      stageResources: e,\n      isWosr: t\n    } = this._resources;\n    for (const s of e.materials) this._isPrimitive ? s.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }) : t || s.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !1\n    });\n    return !1 !== this._hasLoadedPBRTextures || !0 !== this._context.physicalBasedRenderingEnabled || (this._hasLoadedPBRTextures = !0, !1);\n  }\n  pixelRatioChanged() {\n    return !0;\n  }\n  skipHighSymbolLodsChanged() {\n    return !1;\n  }\n  applyRendererDiff(e, t) {\n    if (i(this._resources)) return N.Recreate_Symbol;\n    const {\n      stageResources: {\n        materials: s\n      },\n      lodRenderer: r,\n      resourceBoundingBox: a,\n      symbolSize: o,\n      resourceSize: n,\n      pivotOffset: c\n    } = this._resources;\n    for (const i in e.diff) {\n      if (\"visualVariables\" !== i) return N.Recreate_Symbol;\n      if (!se(this._fastUpdates, t, this._fastVisualVariableConvertOptions(a, o, n, c))) return N.Recreate_Symbol;\n      for (const e of s) e.setParameters(this._fastUpdates.materialParameters);\n      r.notifyShaderTransformationChanged();\n    }\n    return N.Fast_Update;\n  }\n  computeComplexity() {\n    if (i(this._resources)) return super.computeComplexity();\n    const e = this._resources.lodResources,\n      t = de(e.levels[0]).reduce((e, t) => e + t.indices.get(oe.POSITION).length, 0) / 3,\n      s = e => Array.from(e.vertexAttributes.values()).reduce((e, t) => e + (t.data.buffer?.byteLength ?? 0), 0) + Array.from(e.indices.values()).reduce((e, t) => e + (Array.isArray(t) ? 12 * t.length : t.buffer.byteLength), 0),\n      r = le(e).reduce((e, t) => e + (t.params.encoding && \"image/ktx2\" === t.params.encoding ? t.estimatedTexMemRequired : t.estimatedTexMemRequired / 4), 0) + he(e).reduce((e, t) => e + s(t), 0);\n    return {\n      primitivesPerFeature: t,\n      primitivesPerCoordinate: 0,\n      drawCallsPerFeature: 0,\n      estimated: !1,\n      memory: {\n        ...ee(this.symbol, this.symbolLayer),\n        resourceBytes: r\n      }\n    };\n  }\n  _hasLodRenderer() {\n    return t(this._resources);\n  }\n  _createAs3DShape(e, s, r, a, o, n) {\n    if (!this._hasLodRenderer() || i(this._resources)) return null;\n    const c = this.getFastUpdateAttrValues(e),\n      l = !this._fastUpdates.enabled && this._hasPerInstanceColor() ? H(r.color, r.opacity) : null,\n      h = this._context.clippingExtent;\n    if (C(s, ye, this._context.elevationProvider.spatialReference), t(h) && !E(h, ye)) return null;\n    const d = this._requiresTerrainElevation(a),\n      p = this._computeGlobalTransform(s, a, _e, ge),\n      m = this._computeLocalTransform(this._resources, this.symbolLayer, r, fe),\n      u = this._resources.lodRenderer.instanceData,\n      y = u.addInstance();\n    this._instanceIndexToGraphicUid.set(y, o), u.setLocalTransform(y, m, !1), u.setGlobalTransform(y, p), c && u.setFeatureAttribute(y, c), l && u.setColor(y, l), t(this._context.stage.renderView.objectAndLayerIdRenderHelper) && u.setObjectAndLayerIdColor(y, this._context.stage.renderView.objectAndLayerIdRenderHelper.getObjectAndLayerIdColor({\n      graphicUid: o,\n      layerUid: n\n    }));\n    const f = new F(this, y, O, a);\n    return d && (f.alignedSampledElevation = ge.sampledElevation), f.needsElevationUpdates = G(a.mode), Q(f, s, this._context.elevationProvider), f;\n  }\n  _computeGlobalTransform(e, t, s, r) {\n    return D(e, this._context.elevationProvider, t, this._context.renderCoordsHelper, r), ye[0] = e.x, ye[1] = e.y, ye[2] = r.z, j(e.spatialReference, ye, s, this._context.renderCoordsHelper.spatialReference), s;\n  }\n  _computeLocalTransform(e, t, s, r) {\n    return l(r), this._applyObjectRotation(s, !1, r), this._applyObjectRotation(t, !0, r), this._applyObjectScale(e, s, r), this._applyAnchor(e, t, r), r;\n  }\n  _applyObjectScale(e, t, s) {\n    if (this._fastUpdates.enabled && this._fastUpdates.requiresShaderTransformation) return;\n    const r = this._drivenProperties.size && t.size ? t.size : e.symbolSize,\n      i = W(r, e.symbolSize, e.resourceSize, this._context.renderCoordsHelper.unitInMeters);\n    1 === i[0] && 1 === i[1] && 1 === i[2] || h(s, s, i);\n  }\n  prepareSymbolLayerPatch(e) {\n    if (\"partial\" !== e.diff.type) return;\n    const t = e.diff.diff;\n    this._preparePatchTransform(e, t), this._preparePatchColor(e, t);\n  }\n  updateGeometry(e, t) {\n    if (i(this._resources)) return !0;\n    const s = t && K(t);\n    if (i(s)) return !1;\n    const r = this.getGeometryElevationMode(t);\n    return e.elevationContext.mode === r && (this._computeGlobalTransform(s, e.elevationContext, _e, ge), this._requiresTerrainElevation(e.elevationContext) && (e.alignedSampledElevation = ge.sampledElevation), this._resources.lodRenderer.instanceData.setGlobalTransform(e.instanceIndex, _e, !0), Q(e, s, this._context.elevationProvider), !0);\n  }\n  _preparePatchTransform(e, t) {\n    if (!(t.heading || t.tilt || t.roll || t.width || t.height || t.depth || t.anchor || t.anchorPosition)) return;\n    if (i(this._resources)) return;\n    const s = (e, t, s) => a(null != e && \"complete\" === e.type ? e.newValue : t, s),\n      r = s(t.heading, this.symbolLayer.heading, 0),\n      o = s(t.tilt, this.symbolLayer.tilt, 0),\n      n = s(t.roll, this.symbolLayer.roll, 0),\n      c = s(t.width, this.symbolLayer.width, void 0),\n      l = s(t.height, this.symbolLayer.height, void 0),\n      h = s(t.depth, this.symbolLayer.depth, void 0),\n      d = s(t.anchor, this.symbolLayer.anchor, void 0),\n      p = s(t.anchorPosition, this.symbolLayer.anchorPosition, void 0);\n    delete t.heading, delete t.tilt, delete t.roll, delete t.width, delete t.height, delete t.depth, delete t.anchor, delete t.anchorPosition;\n    const m = {\n        heading: r,\n        tilt: o,\n        roll: n,\n        anchor: d,\n        anchorPosition: p\n      },\n      u = this._resources;\n    this.loadStatus === $.LOADED && e.symbolLayerStatePatches.push(() => {\n      u.symbolSize = g(I(u.resourceSize, {\n        width: c,\n        height: l,\n        depth: h,\n        isPrimitive: this.symbolLayer.isPrimitive\n      }));\n    }), e.graphics3DGraphicPatches.push((e, t) => {\n      const s = this._computeLocalTransform(u, m, t, fe),\n        r = e.instanceIndex;\n      u.lodRenderer.instanceData.setLocalTransform(r, s, !0);\n    });\n  }\n  _preparePatchColor(s, r) {\n    if (!r.material || \"partial\" !== r.material.type) return;\n    const a = r.material.diff;\n    if (!a.color || \"complete\" !== a.color.type || null == a.color.newValue || null == a.color.oldValue) return;\n    const o = a.color.newValue,\n      n = t(o) ? e.toUnitRGBA(o) : L;\n    delete a.color;\n    const c = this._resources;\n    i(c) || s.graphics3DGraphicPatches.push(e => {\n      let t;\n      this._hasPerInstanceColor() ? (c.lodRenderer.instanceData.setColor(e.instanceIndex, n), t = this._setMaterialTransparencyParams({}, o)) : t = this._setMaterialTransparencyParams({\n        externalColor: n\n      }, o);\n      for (const s of c.stageResources.materials) s.setParameters(t);\n    });\n  }\n  _requiresTerrainElevation(e) {\n    return \"absolute-height\" !== e.mode;\n  }\n  _applyObjectRotation(e, t, s) {\n    if (!(this._fastUpdates.enabled && this._fastUpdates.requiresShaderTransformation && t)) return q(e.heading, e.tilt, e.roll, s);\n  }\n  _computeAnchor(e, s, r) {\n    const i = v();\n    switch (r.anchor) {\n      case \"center\":\n        y(i, T(e)), u(i, i);\n        break;\n      case \"top\":\n        {\n          const t = T(e);\n          b(i, -t[0], -t[1], -e[5]);\n          break;\n        }\n      case \"bottom\":\n        {\n          const t = T(e);\n          b(i, -t[0], -t[1], -e[2]);\n          break;\n        }\n      case \"relative\":\n        {\n          const t = T(e),\n            s = U(e),\n            a = r.anchorPosition,\n            o = a ? R(a.x, a.y, a.z) : x;\n          f(i, s, o), _(i, i, t), u(i, i);\n          break;\n        }\n      default:\n        t(s) ? u(i, s) : y(i, x);\n    }\n    return i;\n  }\n  _applyAnchor(e, t, s) {\n    if (this._fastUpdates.enabled && this._fastUpdates.requiresShaderTransformation) return;\n    const r = this._computeAnchor(e.resourceBoundingBox, e.pivotOffset, t);\n    r && d(s, s, r);\n  }\n  _hasPerInstanceColor() {\n    return this._drivenProperties.color || this._drivenProperties.opacity;\n  }\n  _fastVisualVariableConvertOptions(e, s, r, i) {\n    const a = t(e) ? g(U(e)) : P,\n      o = t(e) ? this._computeAnchor(e, i, this.symbolLayer) : x,\n      n = this._context.renderCoordsHelper.unitInMeters,\n      c = W(t(s) ? s : void 0, s, r, n),\n      l = R(this.symbolLayer.tilt || 0, this.symbolLayer.roll || 0, this.symbolLayer.heading || 0);\n    return {\n      modelSize: a,\n      symbolSize: t(s) ? s : P,\n      unitInMeters: n,\n      transformation: {\n        anchor: o,\n        scale: c,\n        rotation: l\n      }\n    };\n  }\n}\nconst ye = v(),\n  fe = p(),\n  _e = p(),\n  be = S(),\n  ge = new M();\nexport { ue as Graphics3DObjectSymbolLayer };","map":{"version":3,"names":["e","has","isSome","t","get","s","none","r","isNone","i","unwrapOr","a","throwIfAborted","o","pt2px","n","c","l","k","h","w","d","p","m","u","y","B","f","_","b","g","O","P","Z","x","R","v","L","S","projectPointToVector","C","computeTranslationToOriginAndRotation","j","create","size","U","containsPoint","E","center","T","defaultPrimitive","A","objectSymbolLayerPrimitiveBoundingBox","objectSymbolLayerSizeWithResourceSize","I","perLodInstanceElevationAligner","needsElevationUpdates3D","G","evaluateElevationInfoAtPoint","D","SampleElevationInfo","M","ElevationContext","z","F","Graphics3DSymbolLayer","V","validateSymbolLayerSize","mixinColorAndOpacity","H","computeObjectScale","W","computeObjectRotation","q","ApplyRendererDiffResult","N","LoadStatus","$","makeLodResources","fetch","J","placePointOnGeometry","K","extendPointGraphicElevationContext","Q","isValidPrimitive","X","primitiveLodResources","Y","defaultSymbolLayerMemoryComplexity","ee","initFastSymbolUpdatesState","te","updateFastSymbolUpdatesState","se","evaluateModelTransform","re","evaluateModelTransformScale","ie","CullFaceOptions","ae","VertexAttribute","oe","LodRenderer","ne","materialsFromLodResources","ce","texturesFromLodResources","le","geometriesFromLodResources","he","geometriesFromLodLevelResources","de","DefaultMaterial","pe","me","constructor","lodResources","lodRenderer","stageResources","originalMaterialParameters","resourceSize","isEsriSymbolResource","isWosr","resourceBoundingBox","symbolSize","extentPadding","physicalBasedRenderingEnabled","pivotOffset","ue","getCachedSize","_resources","width","depth","height","_optionalFields","Array","_instanceIndexToGraphicUid","Map","_hasLoadedPBRTextures","_disposeResourceHandles","ensureDrapedStatus","doLoad","_drivenProperties","symbolLayer","Error","_isPrimitive","resource","primitive","_createResourcesForPrimitive","_createResourcesForUrl","href","layerOpacityChanged","slicePlaneEnabledChanged","physicalBasedRenderingChanged","complexity","computeComplexity","_setMaterialTransparencyParams","arguments","length","undefined","_getCombinedOpacity","needsDrivenTransparentPass","transparent","opacity","cullFace","None","Back","usePBR","_context","isSchematic","ambient","diffuse","hasSlicePlane","slicePlaneEnabled","hasSliceHighlight","castShadows","offsetTransparentBackfaces","isPrimitive","symbol","type","verticalOffset","screenLength","minWorldLength","maxWorldLength","screenSizePerspectiveEnabled","screenSizePerspective","sharedResources","screenSizePerspectiveSettings","color","externalColor","material","toUnitRGBA","_fastUpdates","renderer","_fastVisualVariableConvertOptions","instanced","enabled","Object","assign","materialParameters","push","_hasPerInstanceColor","map","parameters","_createStageResources","_createLodRenderer","materialParamsMixin","streamDataRequester","cache","objectResourceCache","signal","skipHighLods","skipHighSymbolLods","lods","levels","sort","minScreenSpaceRadius","_getExternalColorParameters","hasIntrinsicColor","forEach","setParameters","referenceBoundingBox","_addDisposeResource","stage","addMany","removeMany","load","materials","textures","geometries","layerUid","layer","uid","graphicUid","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","applyTransform","getFeatureAttribute","be","scaleFactor","optionalFields","metadata","shaderTransformation","scheduler","removeRenderPlugin","destroy","addRenderPlugin","slots","colorMixMode","_cleanupResources","createGraphics3DGraphic","graphic","_validateGeometry","geometry","logger","warn","setGraphicElevationContext","renderingInfo","_createAs3DShape","notifyDestroyGraphicLayer","delete","instanceIndex","graphicLayerToGraphicId","layerElevationInfoChanged","updateGraphics3DGraphicElevationInfo","pixelRatioChanged","skipHighSymbolLodsChanged","applyRendererDiff","Recreate_Symbol","diff","notifyShaderTransformationChanged","Fast_Update","reduce","indices","POSITION","from","vertexAttributes","values","data","buffer","byteLength","isArray","params","encoding","estimatedTexMemRequired","primitivesPerFeature","primitivesPerCoordinate","drawCallsPerFeature","estimated","memory","resourceBytes","_hasLodRenderer","getFastUpdateAttrValues","clippingExtent","ye","elevationProvider","spatialReference","_requiresTerrainElevation","_computeGlobalTransform","_e","ge","_computeLocalTransform","fe","instanceData","addInstance","set","setLocalTransform","setGlobalTransform","setFeatureAttribute","setColor","renderView","objectAndLayerIdRenderHelper","setObjectAndLayerIdColor","getObjectAndLayerIdColor","alignedSampledElevation","sampledElevation","needsElevationUpdates","mode","renderCoordsHelper","_applyObjectRotation","_applyObjectScale","_applyAnchor","requiresShaderTransformation","unitInMeters","prepareSymbolLayerPatch","_preparePatchTransform","_preparePatchColor","updateGeometry","getGeometryElevationMode","elevationContext","heading","tilt","roll","anchor","anchorPosition","newValue","loadStatus","LOADED","symbolLayerStatePatches","graphics3DGraphicPatches","oldValue","_computeAnchor","modelSize","transformation","scale","rotation","Graphics3DObjectSymbolLayer"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectSymbolLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import has from\"../../../../core/has.js\";import{isSome as t,get as s,none as r,isNone as i,unwrapOr as a}from\"../../../../core/maybe.js\";import{throwIfAborted as o}from\"../../../../core/promiseUtils.js\";import{pt2px as n}from\"../../../../core/screenUtils.js\";import{c,i as l,k as h,w as d}from\"../../../../chunks/mat4.js\";import{c as p}from\"../../../../chunks/mat4f64.js\";import{l as m,o as u,c as y,B as f,a as _,s as b}from\"../../../../chunks/vec3.js\";import{d as g,O as P,Z as x,f as R,c as v}from\"../../../../chunks/vec3f64.js\";import{O as L,c as S}from\"../../../../chunks/vec4f64.js\";import{projectPointToVector as C,computeTranslationToOriginAndRotation as j}from\"../../../../geometry/projection.js\";import{create as w,size as U,containsPoint as E,center as T}from\"../../../../geometry/support/aaBoundingBox.js\";import{defaultPrimitive as A}from\"../../../../symbols/support/ObjectSymbol3DLayerResource.js\";import{objectSymbolLayerPrimitiveBoundingBox as B,objectSymbolLayerSizeWithResourceSize as I}from\"../../../../symbols/support/symbolLayerUtils3D.js\";import{perLodInstanceElevationAligner as O}from\"./ElevationAligners.js\";import{needsElevationUpdates3D as G,evaluateElevationInfoAtPoint as D,SampleElevationInfo as M}from\"./elevationAlignmentUtils.js\";import{ElevationContext as z}from\"./ElevationContext.js\";import F from\"./Graphics3DLodInstanceGraphicLayer.js\";import{Graphics3DSymbolLayer as V}from\"./Graphics3DSymbolLayer.js\";import{validateSymbolLayerSize as k,mixinColorAndOpacity as H,computeObjectScale as W,computeObjectRotation as q}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as N}from\"./interfaces.js\";import{LoadStatus as $}from\"./Loadable.js\";import{makeLodResources as Z}from\"./lodResourceUtils.js\";import{fetch as J}from\"./objectResourceUtils.js\";import{placePointOnGeometry as K,extendPointGraphicElevationContext as Q}from\"./pointUtils.js\";import{isValidPrimitive as X,primitiveLodResources as Y}from\"./primitiveObjectSymbolUtils.js\";import{defaultSymbolLayerMemoryComplexity as ee}from\"./symbolComplexity.js\";import{initFastSymbolUpdatesState as te,updateFastSymbolUpdatesState as se,evaluateModelTransform as re,evaluateModelTransformScale as ie}from\"../support/FastSymbolUpdates.js\";import{CullFaceOptions as ae}from\"../../webgl-engine/lib/basicInterfaces.js\";import{VertexAttribute as oe}from\"../../webgl-engine/lib/VertexAttribute.js\";import{LodRenderer as ne}from\"../../webgl-engine/lib/lodRendering/LodRenderer.js\";import{materialsFromLodResources as ce,texturesFromLodResources as le,geometriesFromLodResources as he,geometriesFromLodLevelResources as de}from\"../../webgl-engine/lib/lodRendering/LodResources.js\";import{DefaultMaterial as pe}from\"../../webgl-engine/materials/DefaultMaterial.js\";class me{constructor(e,t,s,r,i,a,o,n,c,l,h,d){this.lodResources=e,this.lodRenderer=t,this.stageResources=s,this.originalMaterialParameters=r,this.resourceSize=i,this.isEsriSymbolResource=a,this.isWosr=o,this.resourceBoundingBox=n,this.symbolSize=c,this.extentPadding=l,this.physicalBasedRenderingEnabled=h,this.pivotOffset=d}}class ue extends V{getCachedSize(){const[e,s,r]=t(this._resources)?this._resources.symbolSize:[1,1,1];return{width:e,depth:s,height:r}}constructor(e,t,s,r){super(e,t,s,r),this._resources=null,this._optionalFields=new Array,this._instanceIndexToGraphicUid=new Map,this._hasLoadedPBRTextures=!1,this._disposeResourceHandles=new Array,this.ensureDrapedStatus(!1),this._hasLoadedPBRTextures=s.physicalBasedRenderingEnabled}async doLoad(e){if(!this._drivenProperties.size){if(k(this.symbolLayer))throw new Error}const t=this.symbolLayer;if(this._isPrimitive){const s=t.resource?t.resource.primitive:A;this._resources=await this._createResourcesForPrimitive(s,e)}else this._resources=await this._createResourcesForUrl(t.resource.href,e);this.layerOpacityChanged(),this.slicePlaneEnabledChanged(),this.physicalBasedRenderingChanged(),this.complexity=this.computeComplexity()}get extentPadding(){return t(this._resources)?this._resources.extentPadding:0}get _isPrimitive(){return!(this.symbolLayer.resource&&this.symbolLayer.resource.href)}get lodRenderer(){return t(this._resources)?this._resources.lodRenderer:null}_setMaterialTransparencyParams(e,t=s(this.symbolLayer,\"material\",\"color\")){const r=this._getCombinedOpacity(t),i=r<1||this.needsDrivenTransparentPass;return e.transparent=i,e.opacity=r,e.cullFace=i?ae.None:ae.Back,e}async _createResourcesForPrimitive(s,i){if(!X(s))throw new Error(`Unknown object symbol primitive: ${s}`);const a=this.symbolLayer,o=w(B(s)),c=g(U(o)),l=g(I(c,a)),h=m(l),d=!1,p=!1,u={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,ambient:P,diffuse:P,hasSlicePlane:this._context.slicePlaneEnabled,hasSliceHighlight:!1,castShadows:this.symbolLayer.castShadows,offsetTransparentBackfaces:!this.symbolLayer.isPrimitive},y=!!u.usePBR;this._setMaterialTransparencyParams(u);const f=this.symbol;if(\"point-3d\"===f.type&&f.verticalOffset){const{screenLength:e,minWorldLength:s,maxWorldLength:r}=f.verticalOffset;u.verticalOffset={screenLength:n(e),minWorldLength:s||0,maxWorldLength:t(r)?r:1/0},u.castShadows=!1}if(this._context.screenSizePerspectiveEnabled&&(u.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings),this._drivenProperties.color)u.externalColor=L;else{const s=t(a.material)?a.material.color:null,r=t(s)?e.toUnitRGBA(s):L;u.externalColor=r}this._fastUpdates=te(this._context.renderer,this._fastVisualVariableConvertOptions(o,l,c,r)),u.instanced=[\"transformation\"],this._fastUpdates.enabled?(Object.assign(u,this._fastUpdates.materialParameters),u.instanced.push(\"featureAttribute\"),this._optionalFields.push(\"featureAttribute\")):this._hasPerInstanceColor()&&(u.instanced.push(\"color\"),this._optionalFields.push(\"color\")),has(\"enable-feature:objectAndLayerId-rendering\")&&(u.instanced.push(\"objectAndLayerIdColor\"),this._optionalFields.push(\"objectAndLayerIdColor\"));const _=new pe(u),b=Y(s,_);if(!b)throw new Error(`Unknown object symbol primitive: ${s}`);const x=ce(b).map((e=>({opacity:1,transparent:e.parameters.transparent}))),R=await this._createStageResources(b,y,i),v=await this._createLodRenderer(b,i);return new me(b,v,R,x,c,d,p,o,l,h,y,r)}async _createResourcesForUrl(e,i){const a=[\"transformation\"],o={materialParamsMixin:{instanced:a,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows},streamDataRequester:this._context.streamDataRequester,cache:this._context.sharedResources.objectResourceCache};this._fastUpdates=te(this._context.renderer,this._fastVisualVariableConvertOptions(r,r,r,r)),this._fastUpdates.enabled?(Object.assign(o.materialParamsMixin,this._fastUpdates.materialParameters),a.push(\"featureAttribute\"),this._optionalFields.push(\"featureAttribute\")):this._hasPerInstanceColor()&&(a.push(\"color\"),this._optionalFields.push(\"color\")),has(\"enable-feature:objectAndLayerId-rendering\")&&(a.push(\"objectAndLayerIdColor\"),this._optionalFields.push(\"objectAndLayerIdColor\"));const c=this.symbol;if(\"point-3d\"===c.type&&c.verticalOffset){const{screenLength:e,minWorldLength:s,maxWorldLength:r}=c.verticalOffset;o.materialParamsMixin.verticalOffset={screenLength:n(e),minWorldLength:s||0,maxWorldLength:t(r)?r:1/0},o.materialParamsMixin.castShadows=!1}o.signal=i,o.usePBR=this._context.physicalBasedRenderingEnabled,o.skipHighLods=this._context.skipHighSymbolLods;const l=o.usePBR,h=await J(e,o),d=h.isEsriSymbolResource,p=h.isWosr,u=Z(h.lods);u.levels.sort(((e,t)=>e.minScreenSpaceRadius-t.minScreenSpaceRadius));const y=this._context,f=this.symbolLayer.material,_=this._getExternalColorParameters(f),b=s(this.symbolLayer,\"material\",\"color\"),P=this._getCombinedOpacity(b,{hasIntrinsicColor:!0}),x=this.needsDrivenTransparentPass,R=ce(u),v=ce(u).map((e=>({opacity:e.parameters.opacity||1,transparent:e.parameters.transparent})));R.forEach((e=>{const t=e.parameters;e.setParameters(_);const s=t.opacity*P,r=s<1||x||t.transparent;e.setParameters({opacity:s,transparent:r}),y.screenSizePerspectiveEnabled&&e.setParameters({screenSizePerspective:y.sharedResources.screenSizePerspectiveSettings})}));const L=h.referenceBoundingBox,S=g(U(L)),C=g(u.levels[0].pivotOffset),j=g(I(S,this.symbolLayer)),w=m(j);se(this._fastUpdates,this._context.renderer,this._fastVisualVariableConvertOptions(L,j,S,C))&&R.forEach((e=>e.setParameters(this._fastUpdates.materialParameters)));const E=await this._createStageResources(u,l,i),T=await this._createLodRenderer(u,i);return new me(u,T,E,v,S,d,p,L,j,w,l,C)}_addDisposeResource(e){this._disposeResourceHandles.push(e)}async _createStageResources(e,t,s){const r=this._context.stage,i=ce(e);t!==this._context.physicalBasedRenderingEnabled&&this.physicalBasedRenderingChanged(),r.addMany(i),this._addDisposeResource((()=>r.removeMany(i)));const a=le(e);r.addMany(a),this._addDisposeResource((()=>r.removeMany(a))),await r.load(a,s),o(s);const n=he(e);return r.addMany(n),this._addDisposeResource((()=>r.removeMany(n))),{materials:i,textures:a,geometries:n}}async _createLodRenderer(e,t){const s=this._context.stage,r={layerUid:this._context.layer.uid,graphicUid:e=>this._instanceIndexToGraphicUid.get(e),notifyGraphicGeometryChanged:e=>this._context.notifyGraphicGeometryChanged(this._instanceIndexToGraphicUid.get(e)),notifyGraphicVisibilityChanged:e=>this._context.notifyGraphicVisibilityChanged(this._instanceIndexToGraphicUid.get(e))},i=this._fastUpdates.enabled?{applyTransform:(e,t,s)=>{e.getFeatureAttribute(t,be),c(s,re(this._fastUpdates.materialParameters,be,s))},scaleFactor:(e,t,s)=>(t.getFeatureAttribute(s,be),ie(e,this._fastUpdates.materialParameters,be))}:null,a=new ne({symbol:e,optionalFields:this._optionalFields,metadata:r,shaderTransformation:i},this._context.scheduler);return a.slicePlaneEnabled=this._context.slicePlaneEnabled,this._addDisposeResource((()=>{s.removeRenderPlugin(a),a.destroy()})),await s.addRenderPlugin(a.slots,a,t),a}_getExternalColorParameters(s){const r={};return this._drivenProperties.color?r.externalColor=L:t(s)&&t(s.color)?r.externalColor=e.toUnitRGBA(s.color):(r.externalColor=L,r.colorMixMode=\"ignore\"),r}destroy(){super.destroy(),this._cleanupResources()}_cleanupResources(){this._disposeResourceHandles.forEach((e=>e())),this._disposeResourceHandles.length=0,this._resources=null}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry))return null;const s=K(t.geometry);if(i(s))return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`),null;const r=this.setGraphicElevationContext(t,new z),a=e.renderingInfo;return this._createAs3DShape(t,s,a,r,t.uid,e.layer.uid)}notifyDestroyGraphicLayer(e){this._instanceIndexToGraphicUid.delete(e.instanceIndex)}graphicLayerToGraphicId(){return 0}layerOpacityChanged(){if(i(this._resources))return;const e=this._drivenProperties.opacity,t=!this._isPrimitive,r=this._resources.stageResources.materials,a=this._resources.originalMaterialParameters;for(let i=0;i<r.length;i++){const o=r[i],n=s(this.symbolLayer,\"material\",\"color\"),c=a[i],l=this._getCombinedOpacity(n,{hasIntrinsicColor:t})*c.opacity,h=l<1||e||c.transparent;o.setParameters({opacity:l,transparent:h}),this._isPrimitive&&o.setParameters({cullFace:h?ae.None:ae.Back})}}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,G)}slicePlaneEnabledChanged(){if(i(this._resources))return!0;this._resources.lodRenderer.slicePlaneEnabled=this._context.slicePlaneEnabled;for(const e of this._resources.stageResources.materials)e.setParameters({hasSlicePlane:this._context.slicePlaneEnabled});return!0}physicalBasedRenderingChanged(){if(i(this._resources))return!0;const{stageResources:e,isWosr:t}=this._resources;for(const s of e.materials)this._isPrimitive?s.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}):t||s.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!1});return!1!==this._hasLoadedPBRTextures||!0!==this._context.physicalBasedRenderingEnabled||(this._hasLoadedPBRTextures=!0,!1)}pixelRatioChanged(){return!0}skipHighSymbolLodsChanged(){return!1}applyRendererDiff(e,t){if(i(this._resources))return N.Recreate_Symbol;const{stageResources:{materials:s},lodRenderer:r,resourceBoundingBox:a,symbolSize:o,resourceSize:n,pivotOffset:c}=this._resources;for(const i in e.diff){if(\"visualVariables\"!==i)return N.Recreate_Symbol;if(!se(this._fastUpdates,t,this._fastVisualVariableConvertOptions(a,o,n,c)))return N.Recreate_Symbol;for(const e of s)e.setParameters(this._fastUpdates.materialParameters);r.notifyShaderTransformationChanged()}return N.Fast_Update}computeComplexity(){if(i(this._resources))return super.computeComplexity();const e=this._resources.lodResources,t=de(e.levels[0]).reduce(((e,t)=>e+t.indices.get(oe.POSITION).length),0)/3,s=e=>Array.from(e.vertexAttributes.values()).reduce(((e,t)=>e+(t.data.buffer?.byteLength??0)),0)+Array.from(e.indices.values()).reduce(((e,t)=>e+(Array.isArray(t)?12*t.length:t.buffer.byteLength)),0),r=le(e).reduce(((e,t)=>e+(t.params.encoding&&\"image/ktx2\"===t.params.encoding?t.estimatedTexMemRequired:t.estimatedTexMemRequired/4)),0)+he(e).reduce(((e,t)=>e+s(t)),0);return{primitivesPerFeature:t,primitivesPerCoordinate:0,drawCallsPerFeature:0,estimated:!1,memory:{...ee(this.symbol,this.symbolLayer),resourceBytes:r}}}_hasLodRenderer(){return t(this._resources)}_createAs3DShape(e,s,r,a,o,n){if(!this._hasLodRenderer()||i(this._resources))return null;const c=this.getFastUpdateAttrValues(e),l=!this._fastUpdates.enabled&&this._hasPerInstanceColor()?H(r.color,r.opacity):null,h=this._context.clippingExtent;if(C(s,ye,this._context.elevationProvider.spatialReference),t(h)&&!E(h,ye))return null;const d=this._requiresTerrainElevation(a),p=this._computeGlobalTransform(s,a,_e,ge),m=this._computeLocalTransform(this._resources,this.symbolLayer,r,fe),u=this._resources.lodRenderer.instanceData,y=u.addInstance();this._instanceIndexToGraphicUid.set(y,o),u.setLocalTransform(y,m,!1),u.setGlobalTransform(y,p),c&&u.setFeatureAttribute(y,c),l&&u.setColor(y,l),t(this._context.stage.renderView.objectAndLayerIdRenderHelper)&&u.setObjectAndLayerIdColor(y,this._context.stage.renderView.objectAndLayerIdRenderHelper.getObjectAndLayerIdColor({graphicUid:o,layerUid:n}));const f=new F(this,y,O,a);return d&&(f.alignedSampledElevation=ge.sampledElevation),f.needsElevationUpdates=G(a.mode),Q(f,s,this._context.elevationProvider),f}_computeGlobalTransform(e,t,s,r){return D(e,this._context.elevationProvider,t,this._context.renderCoordsHelper,r),ye[0]=e.x,ye[1]=e.y,ye[2]=r.z,j(e.spatialReference,ye,s,this._context.renderCoordsHelper.spatialReference),s}_computeLocalTransform(e,t,s,r){return l(r),this._applyObjectRotation(s,!1,r),this._applyObjectRotation(t,!0,r),this._applyObjectScale(e,s,r),this._applyAnchor(e,t,r),r}_applyObjectScale(e,t,s){if(this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation)return;const r=this._drivenProperties.size&&t.size?t.size:e.symbolSize,i=W(r,e.symbolSize,e.resourceSize,this._context.renderCoordsHelper.unitInMeters);1===i[0]&&1===i[1]&&1===i[2]||h(s,s,i)}prepareSymbolLayerPatch(e){if(\"partial\"!==e.diff.type)return;const t=e.diff.diff;this._preparePatchTransform(e,t),this._preparePatchColor(e,t)}updateGeometry(e,t){if(i(this._resources))return!0;const s=t&&K(t);if(i(s))return!1;const r=this.getGeometryElevationMode(t);return e.elevationContext.mode===r&&(this._computeGlobalTransform(s,e.elevationContext,_e,ge),this._requiresTerrainElevation(e.elevationContext)&&(e.alignedSampledElevation=ge.sampledElevation),this._resources.lodRenderer.instanceData.setGlobalTransform(e.instanceIndex,_e,!0),Q(e,s,this._context.elevationProvider),!0)}_preparePatchTransform(e,t){if(!(t.heading||t.tilt||t.roll||t.width||t.height||t.depth||t.anchor||t.anchorPosition))return;if(i(this._resources))return;const s=(e,t,s)=>a(null!=e&&\"complete\"===e.type?e.newValue:t,s),r=s(t.heading,this.symbolLayer.heading,0),o=s(t.tilt,this.symbolLayer.tilt,0),n=s(t.roll,this.symbolLayer.roll,0),c=s(t.width,this.symbolLayer.width,void 0),l=s(t.height,this.symbolLayer.height,void 0),h=s(t.depth,this.symbolLayer.depth,void 0),d=s(t.anchor,this.symbolLayer.anchor,void 0),p=s(t.anchorPosition,this.symbolLayer.anchorPosition,void 0);delete t.heading,delete t.tilt,delete t.roll,delete t.width,delete t.height,delete t.depth,delete t.anchor,delete t.anchorPosition;const m={heading:r,tilt:o,roll:n,anchor:d,anchorPosition:p},u=this._resources;this.loadStatus===$.LOADED&&e.symbolLayerStatePatches.push((()=>{u.symbolSize=g(I(u.resourceSize,{width:c,height:l,depth:h,isPrimitive:this.symbolLayer.isPrimitive}))})),e.graphics3DGraphicPatches.push(((e,t)=>{const s=this._computeLocalTransform(u,m,t,fe),r=e.instanceIndex;u.lodRenderer.instanceData.setLocalTransform(r,s,!0)}))}_preparePatchColor(s,r){if(!r.material||\"partial\"!==r.material.type)return;const a=r.material.diff;if(!a.color||\"complete\"!==a.color.type||null==a.color.newValue||null==a.color.oldValue)return;const o=a.color.newValue,n=t(o)?e.toUnitRGBA(o):L;delete a.color;const c=this._resources;i(c)||s.graphics3DGraphicPatches.push((e=>{let t;this._hasPerInstanceColor()?(c.lodRenderer.instanceData.setColor(e.instanceIndex,n),t=this._setMaterialTransparencyParams({},o)):t=this._setMaterialTransparencyParams({externalColor:n},o);for(const s of c.stageResources.materials)s.setParameters(t)}))}_requiresTerrainElevation(e){return\"absolute-height\"!==e.mode}_applyObjectRotation(e,t,s){if(!(this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation&&t))return q(e.heading,e.tilt,e.roll,s)}_computeAnchor(e,s,r){const i=v();switch(r.anchor){case\"center\":y(i,T(e)),u(i,i);break;case\"top\":{const t=T(e);b(i,-t[0],-t[1],-e[5]);break}case\"bottom\":{const t=T(e);b(i,-t[0],-t[1],-e[2]);break}case\"relative\":{const t=T(e),s=U(e),a=r.anchorPosition,o=a?R(a.x,a.y,a.z):x;f(i,s,o),_(i,i,t),u(i,i);break}default:t(s)?u(i,s):y(i,x)}return i}_applyAnchor(e,t,s){if(this._fastUpdates.enabled&&this._fastUpdates.requiresShaderTransformation)return;const r=this._computeAnchor(e.resourceBoundingBox,e.pivotOffset,t);r&&d(s,s,r)}_hasPerInstanceColor(){return this._drivenProperties.color||this._drivenProperties.opacity}_fastVisualVariableConvertOptions(e,s,r,i){const a=t(e)?g(U(e)):P,o=t(e)?this._computeAnchor(e,i,this.symbolLayer):x,n=this._context.renderCoordsHelper.unitInMeters,c=W(t(s)?s:void 0,s,r,n),l=R(this.symbolLayer.tilt||0,this.symbolLayer.roll||0,this.symbolLayer.heading||0);return{modelSize:a,symbolSize:t(s)?s:P,unitInMeters:n,transformation:{anchor:o,scale:c,rotation:l}}}}const ye=v(),fe=p(),_e=p(),be=S(),ge=new M;export{ue as Graphics3DObjectSymbolLayer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}