{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Color.js\";\nimport i from \"../../../core/Accessor.js\";\nimport { difference as r } from \"../../../core/arrayUtils.js\";\nimport s from \"../../../core/CollectionFlattener.js\";\nimport a from \"../../../core/Evented.js\";\nimport n from \"../../../core/Handles.js\";\nimport l from \"../../../core/Logger.js\";\nimport { clamp as o } from \"../../../core/mathUtils.js\";\nimport { releaseMaybe as h, destroyMaybe as d, isNone as p, isSome as u } from \"../../../core/maybe.js\";\nimport c from \"../../../core/ObjectPool.js\";\nimport _ from \"../../../core/PooledArray.js\";\nimport { throwIfAborted as g, isAbortError as m, isAborted as T, createAbortError as y } from \"../../../core/promiseUtils.js\";\nimport { watch as f, syncAndInitial as v, sync as w, initial as E } from \"../../../core/reactiveUtils.js\";\nimport { property as S } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as L } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { m as D } from \"../../../chunks/mat4.js\";\nimport { c as P } from \"../../../chunks/mat4f64.js\";\nimport { c as b } from \"../../../chunks/vec3.js\";\nimport { c as C } from \"../../../chunks/vec3f64.js\";\nimport { c as U } from \"../../../chunks/vec4f64.js\";\nimport { WatchUpdatingTracking as R } from \"../../../core/support/WatchUpdatingTracking.js\";\nimport { getReferenceEllipsoid as x } from \"../../../geometry/ellipsoidUtils.js\";\nimport { projectVectorToVector as M, projectPointToVector as j } from \"../../../geometry/projection.js\";\nimport A from \"../../../geometry/SpatialReference.js\";\nimport { create as I, equals as O, intersection as V, empty as k, expand as B, intersectsSphere as N } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { create as F, copy as q } from \"../../../geometry/support/frustum.js\";\nimport { isPlateCarree as G } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { isRefreshableLayer as W } from \"../../../layers/mixins/RefreshableLayer.js\";\nimport { ElevationQueryTileCache as H } from \"../../../layers/support/ElevationQueryTileCache.js\";\nimport { ElevationTileData as Q } from \"../../../layers/support/ElevationTileData.js\";\nimport { isBaseLayer as z } from \"../../../layers/support/layerUtils.js\";\nimport { acquireDecoder as X } from \"../../../layers/support/LercDecoder.js\";\nimport { printAllocations as Y } from \"../../2d/engine/vectorTiles/VectorTile.js\";\nimport { directionToHeadingTilt as $ } from \"../support/cameraUtils.js\";\nimport K from \"../support/debugFlags.js\";\nimport { toBoundingRect as J } from \"../support/extentUtils.js\";\nimport { ClientType as Z } from \"../support/index.js\";\nimport { updatingProgress as ee } from \"../support/updatingProperties.js\";\nimport { ElevationBounds as te } from \"./ElevationBounds.js\";\nimport { ElevationData as ie, sampleElevation as re } from \"./ElevationData.js\";\nimport { create as se } from \"./ExtentHelper.js\";\nimport { LODSnapping as ae, TextureUpdate as ne } from \"./interfaces.js\";\nimport { LayerClass as le, LayerClasses as oe } from \"./LayerClass.js\";\nimport { OverlayManager as he } from \"./OverlayManager.js\";\nimport { PlanarPatch as de } from \"./PlanarPatch.js\";\nimport { RenderOrder as pe } from \"./RenderOrder.js\";\nimport { ScaleRangeQueries as ue } from \"./ScaleRangeQueries.js\";\nimport { SphericalPatch as ce } from \"./SphericalPatch.js\";\nimport { SplitLimits as _e } from \"./SplitLimits.js\";\nimport { MAX_ROOT_TILES as ge, TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR as me, TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR as Te, MAX_MEMORY_LOD_BIAS as ye, ELEVATION_NODATA_VALUE as fe } from \"./TerrainConst.js\";\nimport { TerrainRenderer as ve, TransparencyMode as we } from \"./TerrainRenderer.js\";\nimport Ee from \"./TerrainSurfacePerformanceInfo.js\";\nimport { weakAssert as Se, internalAssert as Le, oppositeEdge as De, isSurfaceLayerView as Pe, isGroupLayerView as be, isMapTileLayerView as Ce, isBlendableLayerView as Ue, isElevationLayerView as Re, isVectorTileLayerView as xe, useFetchTileForLayer as Me, isImageryTileLayerView as je, isTileLayerView as Ae, releaseTileData as Ie, neighborEdgeIndices as Oe, ENABLE_TERRAIN_INTERNAL_CHECKS as Ve, ENABLE_WATERPROOFNESS_TESTS as ke, enableTerrainInternalChecks as Be, enableTerrainWaterproofnessChecks as Ne } from \"./terrainUtils.js\";\nimport { Tile as Fe } from \"./Tile.js\";\nimport { printAllocations as qe } from \"./TilePerLayerInfo.js\";\nimport { TileUpdate as Ge } from \"./TileUpdate.js\";\nimport { IteratorPreorder as We, IteratorPostorder as He, compareTilesByLij as Qe, hasLoadableSiblings as ze, sortTilesByPOI as Xe, sortTiles as Ye } from \"./tileUtils.js\";\nimport { TilingSchemeLogic as $e } from \"./TilingSchemeLogic.js\";\nimport { UpsampleInfo as Ke } from \"./UpsampleInfo.js\";\nimport { isCompositeBlendMode as Je, blendModeFromString as Ze } from \"../webgl-engine/core/shaderLibrary/output/BlendOptions.js\";\nimport { PBRMode as et } from \"../webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";\nimport { RenderRequestType as tt } from \"../webgl-engine/lib/basicInterfaces.js\";\nimport { RenderState as it } from \"../../support/RenderState.js\";\nimport { ImmediateTask as rt, TaskPriority as st, noBudget as at } from \"../../support/Scheduler.js\";\nlet nt = class extends a.EventedMixin(i) {\n  constructor(e) {\n    super(e), this._scaleRangeQueries = new ue(), this._iteratorPool = new c(We, e => e.remove = () => this._iteratorPool.release(e)), this._postorderIterator = new He(), this._hasPendingUpdates = !1, this._pendingUpdates = 0, this._asyncWorkItems = 0, this._allTilesDirty = !0, this._allTilesSorted = !0, this._visibleCached = !1, this._usedMemory = null, this._performanceInfo = new Ee(), this._viewChanged = !1, this._inFrameTask = !1, this._viewChangeUpdateDirty = !1, this._eyePosRenderSR = C(), this._eyePosSurfaceSR = C(), this._splitLimits = new _e(), this._frustum = F(), this._viewProjectionMatrix = P(), this._layerViews = [new Array(), new Array()], this._layerIndexByUid = [new Map(), new Map()], this._basemapLayerViewHandles = new Map(), this._handles = new n(), this._watchUpdatingTracking = new R(), this._frameTask = rt, this._allTiles = new _(), this._upsampleInfoPool = new c(Ke), this._rootTilesExtent = I(), this.updatingProgress = 0, this._maxNumUpdating = 1, this.maxTextureScale = 1.2, this._spatialReference = A.WebMercator, this.visibleElevationBounds = new te(1 / 0, -1 / 0), this.rootTileElevationBounds = new te(1 / 0, -1 / 0), this._updatingRootTiles = !1, this._pendingTilesForElevationUpdateEvent = new Set(), this._pendingTilesToUpdate = new Set(), this.totalGeometryUpdates = 0, this.totalTileUpdates = 0, this.oneBatchPerFrameTask = !0, this._layerViewsDirty = !1, this._shading = !0, this._isWebMercator = !1, this._isWebMercatorOnPlateeCarree = !1, this._isGlobal = !e.view?.state?.isLocal;\n  }\n  initialize() {\n    this._lercDecoder = X(this.view.resourceController), this._tilePool = this.view.state.isLocal ? new c(de) : new c(ce);\n    const e = this.view.resourceController.memoryController;\n    this._upsampleMapCache = e.newCache(\"esri.views.3d.terrain.upsample\", e => e.unloadMapData()), this._elevationQueryCache = new H(e.newCache(\"elevation-query\")), this._set(\"overlayManager\", new he({\n      surface: this\n    })), this._handles.add([f(() => this.overlayManager.hasHighlights, e => this._renderer.setNeedsHighlight(e)), f(() => this.overlayManager.rendersOccluded, e => this._renderer.setRenderOccludedOverlay(e)), f(() => this.overlayManager.renderer.isEmpty, () => this._evaluateTransparency())], \"overlayManager\"), this._renderer = new ve({\n      _overlayRenderer: this.overlayManager.renderer,\n      _ellipsoidRadius: x(this.view.spatialReference).radius,\n      _stage: this.view._stage,\n      _allTiles: this._allTiles\n    }), this._handles.add([f(() => this.baseOpacity, () => {\n      this._handleLayerViewChanges(), this._updateTileTextures(this._evaluateTransparency() ? ne.UNFADED : ne.IMMEDIATE);\n    }, v), f(() => this.hasCompositeBlendMode, () => this._updateTileTextures(this._evaluateTransparency() ? ne.UNFADED : ne.IMMEDIATE), v), f(() => this.renderingDisabled, () => this.view?._stage?.renderer.setParameters({\n      terrainRenderingEnabled: !this.renderingDisabled\n    }), w), f(() => this.backgroundColor, e => {\n      this._handleLayerViewChanges(), this._renderer.updateTileBackground(e);\n    }, v), f(() => this.snapLevel, () => this._viewChanged = !0, w), f(() => this.view.pointsOfInterest, e => {\n      this._renderer.pointsOfInterest = e, this._watchUpdatingTracking.removeAll(), e && this._watchUpdatingTracking.add(() => e.focus.renderLocation, () => this._allTilesSorted = !1);\n    }), f(() => K.TERRAIN_TILE_TREE_SHOW_TILES, e => {\n      e && !this._treeDebugger ? import(\"../layers/support/TerrainTileTree3DDebugger.js\").then(_ref => {\n        let {\n          TerrainTileTree3DDebugger: e\n        } = _ref;\n        !this._treeDebugger && K.TERRAIN_TILE_TREE_SHOW_TILES && (this._treeDebugger = new e({\n          view: this.view\n        }));\n      }) : e || (this._treeDebugger = d(this._treeDebugger));\n    }, E)]);\n    const {\n      spatialReference: t\n    } = this.view;\n    this._extentHelper = se(this.viewingMode, {\n      layers: this.view.map.allLayers,\n      layerViews: this.view.allLayerViews,\n      viewSpatialReference: t\n    });\n    const i = new s({\n        getCollections: () => this.view?.defaultsFromMap?.mapCollections?.map(_ref2 => {\n          let {\n            layers: e\n          } = _ref2;\n          return e;\n        }),\n        getChildrenFunction: e => e && \"layers\" in e ? e.layers : null\n      }),\n      r = new $e({\n        layers: i,\n        extentHelper: this._extentHelper,\n        viewingMode: this.viewingMode,\n        viewSpatialReference: t\n      });\n    this._set(\"tilingSchemeLogic\", r), this._updateTilingScheme(), this._elevationDataRequester = this.view.resourceController.createStreamDataRequester(Z.ELEVATION), this._mapDataRequester = this.view.resourceController.createStreamDataRequester(Z.BASEMAP);\n    const a = this.view.resourceController.scheduler;\n    this._frameTask = a.registerTask(st.TERRAIN_SURFACE, this), this._handles.add([f(() => this._extentHelper.stencilEnabledExtents, e => this._renderer.setStencilEnabledLayerExtents(e), E), f(() => this.tilingSchemeLogic.tilingScheme, () => this._updateTilingScheme(), w), f(() => this.extent, () => this._updateRootTiles(), E), this.view.on(\"resize\", () => this._viewChangeUpdate()), f(() => {\n      const e = this.view,\n        t = e.state;\n      return [this._lodBias, this.lodSnapping, e.resourceController?.memoryController?.memoryFactor, t.camera, t.contentCamera, t.fixedContentCamera];\n    }, () => this._viewChangeUpdate(), v), f(() => this.view.qualitySettings?.tiledSurface?.textureFadeDuration, e => this._renderer.textureFadingEnabled = e > 0, E), f(() => this.view.qualitySettings?.physicallyBasedRenderingEnabled, e => this._renderer.pbrMode = e ? et.Terrain : et.Disabled, E), f(() => this._userClippingExtent, () => this._updateClippingExtent(), w)]), this._handles.add(this.view.allLayerViews.on(\"after-changes\", () => this._layerViewsDirty = !0)), this._handles.add([f(() => this.view?.map.ground.shading, () => {\n      this._updateShadingIfChanged();\n    })]), this._updateShading(), this._layerViewsDirty = !0, this._handleLayerViewChanges();\n  }\n  destroy() {\n    this._frameTask.remove(), this._handles.destroy(), this._watchUpdatingTracking.destroy(), this._lercDecoder = h(this._lercDecoder), this._removeAllTiles(), this._upsampleMapCache = d(this._upsampleMapCache), this._elevationQueryCache = d(this._elevationQueryCache);\n    const e = this.tilingSchemeLogic.layers;\n    this._set(\"tilingSchemeLogic\", d(this.tilingSchemeLogic)), e.destroy(), this._basemapLayerViewHandles.forEach((e, t) => this._unregisterTiledLayerView(t)), this._elevationDataRequester = null, this._mapDataRequester = null, this._set(\"overlayManager\", d(this.overlayManager)), this._tilePool = d(this._tilePool), Fe.prune(), this._treeDebugger = d(this._treeDebugger), this._renderer = d(this._renderer), this._iteratorPool = d(this._iteratorPool), this._set(\"view\", null), this._upsampleInfoPool = d(this._upsampleInfoPool), Y(), qe();\n  }\n  get renderer() {\n    return this._renderer;\n  }\n  get frustum() {\n    return this._frustum;\n  }\n  get snapLevel() {\n    if (this.lodSnapping === ae.ON) {\n      const e = this.view,\n        t = this.tilingScheme,\n        i = e.pointsOfInterest?.cameraOnSurface?.scale;\n      if (i && t) {\n        const r = e.state.contentCamera;\n        let s = $(e, r.eye, r.viewForward, r.up).tilt;\n        s > 90 && (s = 180 - s);\n        const a = 2 * (s / 90) ** 2,\n          n = t.levelAtScale(i) - a;\n        return Math.round(n);\n      }\n    }\n    return null;\n  }\n  get lodSnapping() {\n    return this.view.qualitySettings.tiledSurface.reduceTileLevelDifferences ? ae.ON : ae.OFF;\n  }\n  get upsampleInfoPool() {\n    return this._upsampleInfoPool;\n  }\n  get upsampleMapCache() {\n    return this._upsampleMapCache;\n  }\n  get elevationQueryCache() {\n    return this._elevationQueryCache;\n  }\n  get mapTileRequester() {\n    return this._mapDataRequester;\n  }\n  get _userClippingExtent() {\n    const {\n        spatialReference: e\n      } = this,\n      {\n        clippingArea: t\n      } = this.view;\n    if (p(t) || p(e)) return null;\n    const i = I(),\n      r = J(t, i, e) ? i : null,\n      s = this._get(\"extent\");\n    return O(r, s) ? s : r;\n  }\n  get rootTilesExtent() {\n    return this._rootTilesExtent;\n  }\n  get extent() {\n    const e = V(this.groundExtent, this._userClippingExtent, I()),\n      t = this._get(\"extent\");\n    return O(e, t) ? t : e;\n  }\n  get groundExtent() {\n    return u(this._tilingSchemeExtent) ? this._tilingSchemeExtent : this._rootTilesExtent;\n  }\n  get _tilingSchemeExtent() {\n    return this.tilingSchemeLogic?.extent;\n  }\n  get updating() {\n    return this._hasPendingUpdates || (this._maxNumUpdating = 1), !!((this.running || this._watchUpdatingTracking.updating || this._asyncWorkItems > 0) && this.ready && !this.suspended || this.overlayManager.updating);\n  }\n  get running() {\n    return (this._hasPendingUpdates || this._viewChanged || this._allTilesDirty || !this._allTilesSorted || this._layerViewsDirty || this._scaleRangeQueries.updating || this._frameTask.updating) && this.ready && !this.suspended;\n  }\n  get updatingProgressValue() {\n    return this._maxNumUpdating = Math.max(this._pendingUpdates, this._maxNumUpdating), 1 - this._pendingUpdates / this._maxNumUpdating;\n  }\n  get baseOpacity() {\n    return this.view.map.ground.opacity;\n  }\n  set baseOpacity(e) {\n    this.view.map.ground.opacity = e;\n  }\n  get viewingMode() {\n    return this.view.state.viewingMode;\n  }\n  get ready() {\n    return u(this._rootTiles);\n  }\n  set renderOrder(e) {\n    this._renderer.renderOrder = e, this._set(\"renderOrder\", e);\n  }\n  get rootTiles() {\n    return this._rootTiles;\n  }\n  get spatialReference() {\n    return this.tilingScheme?.spatialReference ?? null;\n  }\n  get backgroundColor() {\n    return this.view.map.ground.surfaceColor;\n  }\n  set backgroundColor(e) {\n    this.view.map.ground.surfaceColor = e;\n  }\n  set slicePlaneEnabled(e) {\n    this._renderer.slicePlaneEnabled = e, this._set(\"slicePlaneEnabled\", e), this._evaluateTransparency();\n  }\n  get tilingSchemeLocked() {\n    return this.tilingSchemeLogic?.tilingSchemeLocked ?? !1;\n  }\n  set velvetOverground(e) {\n    this._renderer.velvetOverground = e, this._set(\"velvetOverground\", e);\n  }\n  get wireframe() {\n    return this._renderer.wireframe;\n  }\n  set wireframe(e) {\n    e !== this._renderer.wireframe && (this._renderer.wireframe = e, this._updateAllTileGeometries());\n  }\n  set _visible(e) {\n    e !== this._visibleCached && (this._visibleCached = e, this._renderer.setVisibility(e), this.suspended = !e);\n  }\n  get opaque() {\n    return this._renderer.transparency === we.Opaque;\n  }\n  set suspended(e) {\n    this._set(\"suspended\", e), this._viewChangeUpdate();\n  }\n  get textureFadeDuration() {\n    return this.view.qualitySettings.tiledSurface.textureFadeDuration ?? 0;\n  }\n  intersect(e, t, i, r) {\n    this._renderer.intersect(e, t, i, r);\n  }\n  getElevation(e, t, i, r) {\n    const s = this._rootTiles;\n    if (p(s) || !s.length) return null;\n    if (0 === s[0].layerInfo[le.ELEVATION].length) return null;\n    const a = pt;\n    if (a[0] = e, a[1] = t, a[2] = i, !M(a, r, a, this._spatialReference)) return l.getLogger(this.declaredClass).error(\"TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system\"), null;\n    return Tt(s, a[0], a[1]);\n  }\n  getElevations(e, t, i) {\n    const r = this._rootTiles,\n      s = r ? r[0].layerInfo[le.ELEVATION].length : 0;\n    if (!p(r) && r.length && 0 !== s) for (let a = 0; a < t; ++a) {\n      const t = 3 * a;\n      i(a, Tt(r, e[t + 0], e[t + 1]));\n    } else for (let a = 0; a < t; ++a) i(a, null);\n  }\n  getScale(e) {\n    if (!this.tilingScheme) return null;\n    if (!j(e, pt, this.spatialReference)) return l.getLogger(this.declaredClass).error(\"TerrainSurface.getScale(): could not project given point to tiling scheme coordinate system\"), null;\n    const t = this._rootTiles;\n    if (u(t)) for (const i of t) if (i?.containsPoint(pt)) {\n      let e = i;\n      for (; e.children[0] && !e.rendered;) {\n        const t = e.children[0].extent;\n        let i = 0;\n        pt[0] > t[2] && (i += 1), pt[1] < t[1] && (i += 2), e = e.children[i];\n      }\n      return this._getLodBiasCorrectedScale(e.level);\n    }\n    return 1 / 0;\n  }\n  getSphereElevationBounds(e, t, i, r, s) {\n    if (pt[0] = e, pt[1] = t, pt[2] = i, pt[3] = r, !M(pt, s, pt, this.tilingScheme?.spatialReference)) return l.getLogger(this.declaredClass).error(\"TerrainSurface.getSphereElevationBounds(): could not project given point to tiling scheme coordinate system\"), null;\n    let a = 1 / 0,\n      n = -1 / 0;\n    const o = e => {\n        if (e && N(e.extent, pt)) if (e.isLeaf || e.rendered) a = Math.min(a, e.elevationBounds[0]), n = Math.max(n, e.elevationBounds[1]);else for (const t of e.children) o(t);\n      },\n      h = this._rootTiles;\n    if (u(h)) for (const l of h) o(l);\n    return {\n      min: a,\n      max: n\n    };\n  }\n  getSphereScale(e, t) {\n    if (!this.tilingScheme) return null;\n    if (!j(e, pt, this.spatialReference)) return l.getLogger(this.declaredClass).error(\"TerrainSurface.getSphereScale(): could not project given point to tiling scheme coordinate system\"), null;\n    pt[3] = t;\n    let i = null;\n    const r = e => {\n        if (e && N(e.extent, pt)) {\n          const t = e.children;\n          if (t[0] && !e.rendered) for (const e of t) r(e);else {\n            const t = this._getLodBiasCorrectedScale(e.level);\n            i = null == i ? t : Math.min(i, t);\n          }\n        }\n      },\n      s = this._rootTiles;\n    if (u(s)) for (const a of s) r(a);\n    return i;\n  }\n  queryVisibleScaleRange(e, t, i, r) {\n    const s = t ? this.tilingScheme.levelAtScale(t) : 0,\n      a = i ? this.tilingScheme.levelAtScale(i) : 1 / 0,\n      n = this._lodBias;\n    this._scaleRangeQueries.queryVisibleLevelRange(e, s + n, a + n, r);\n  }\n  _evaluateTransparency() {\n    const e = this.baseOpacity,\n      t = this.overlayManager.renderer.isEmpty,\n      i = this._renderer.transparency,\n      r = this._allSurfaceLayersTransparent() ? t ? we.Empty : we.TransparentWithDraped : e >= 1 && !this.hasCompositeBlendMode && !this._renderer.slicePlaneEnabled ? we.Opaque : we.Semitransparent,\n      s = i !== r;\n    return s && (this._renderer.transparency = r, this.view?._stage?.renderer.setParameters({\n      terrainTransparency: this._renderer.transparency\n    })), s;\n  }\n  _updateTilingScheme() {\n    const e = this.tilingSchemeLogic.tilingScheme;\n    if (!(e !== this.tilingScheme)) return;\n    Se(!!e, \"tiling scheme cannot be reset to undefined\"), this._isGlobal = !this.view?.state?.isLocal, this.tilingScheme && this._removeAllTiles();\n    const t = e?.spatialReference ?? A.WebMercator;\n    this._spatialReference = t, this._isWebMercator = !!t?.isWebMercator, this._isWebMercatorOnPlateeCarree = this._isWebMercator && G(this.view?.renderSpatialReference), this._set(\"tilingScheme\", e), this._updateClippingExtent(), e && (this._updateTiledLayers(), this._renderer.setTileSize(e.pixelSize), this.overlayManager.setSpatialReference(e.spatialReference), this._updateRootTiles());\n  }\n  _acquireTile(e, t, i, r) {\n    const s = this._tilePool.acquire();\n    return ct[0] = e, ct[1] = t, ct[2] = i, s.init(ct, r, this), s;\n  }\n  get updatingRootTiles() {\n    return this._updatingRootTiles;\n  }\n  _updateRootTiles() {\n    const {\n      extent: e,\n      tilingScheme: t\n    } = this;\n    if (!t) return;\n    const i = ut;\n    let s = t.rootTilesInExtent(e, i, 5 * ge);\n    if (u(this._rootTiles)) {\n      if (s.length > ge) return void l.getLogger(this.declaredClass).warn(me);\n      const e = this._rootTiles.map(e => e.lij),\n        t = r(e, s, ot);\n      if (this._updatingRootTiles = !0, t.removed.length > 0 || t.added.length > 0) {\n        const e = this._rootTiles.filter(e => !(t.removed.findIndex(t => ot(t, e.lij)) > -1) || (this._purgeTile(e), !1));\n        t.added.forEach(t => e.push(this._newRootTile(t))), this._setRootTiles(e);\n      }\n    } else this._updatingRootTiles = !0, s.length > ge && (l.getLogger(this.declaredClass).warn(Te), s = t.rootTilesInExtent(e, i, ge)), this._setRootTiles(s.map(e => this._newRootTile(e)));\n    O(i, this._rootTilesExtent) || (this._rootTilesExtent = I(i)), this._visible = !0, this._viewChangeUpdate(), this.overlayManager.setPlacementDirty(), this.notifyChange(\"ready\"), this._updateAllTileGeometries(), this._updatingRootTiles = !1, this.checkAllTilesWaterproofness();\n  }\n  _updateAllTileGeometries() {\n    const e = this._allTiles.filter(e => e.isLoaded && e.intersectsClippingArea);\n    e.forEach(e => this._renderer.updateTileGeometryState(e)), e.forEach(e => e.renderData.updateNeighborData()), this._updateTilesGeometries(e), this._pendingTilesToUpdate.clear();\n  }\n  _updateTilesGeometries(e) {\n    if (0 === e.length) return;\n    e.sort(Qe);\n    const t = this.renderer;\n    e.forEach(e => t.updateGeometryIfNeeded(e)), e.forEach(e => this._pendingTilesForElevationUpdateEvent.add(e));\n  }\n  _shouldSplit(e) {\n    return e.shouldSplit(this._splitLimits, this._eyePosRenderSR, this.snapLevel) === Ge.SPLIT;\n  }\n  _newRootTile(e) {\n    const t = this._acquireTile(0, e[1], e[2], null);\n    return this._shouldSplit(t) && t.setPendingUpdate(Ge.SPLIT), this._loadTile(t), this._markTileToUpdate(t), this._updateRootTileElevationBounds(), t;\n  }\n  _setRootTiles(e) {\n    if (this._rootTiles = e, this._allTiles.clear(), u(e)) {\n      const t = this._iteratorPool.acquire();\n      for (t.reset(e); !t.done;) this._allTiles.push(t.next());\n      t.remove();\n    }\n    this._renderer.setRootTiles(this._rootTiles), this._updateTilesVisibility(e);\n  }\n  _runViewChangeUpdateIfDirty() {\n    this._viewChangeUpdateDirty && (this._viewChangeUpdateDirty = !1, this._viewChangeUpdate());\n  }\n  _viewChangeUpdate() {\n    this.view && !this.suspended && this.tilingScheme && this._visibleCached && (this._inFrameTask ? this._viewChangeUpdateDirty = !0 : (this._viewChangeUpdateDirty = !1, this._updateViewDependentParameters(), this._updateTilesVisibility(this._rootTiles)));\n  }\n  _updateClippingStatus(e) {\n    e.updateClippingStatus(this.extent) && e.resetPendingUpdate(Ge.GEOMETRY) && this._updateTileGeometryState(e);\n  }\n  _updateTilesVisibility(e) {\n    if (p(e)) return;\n    const t = ze(e),\n      i = this.visibleElevationBounds;\n    let r = t ? i.min : 1 / 0,\n      s = t ? i.max : -1 / 0;\n    const a = this.extent,\n      n = this._viewProjectionMatrix;\n    this.setTileTreeDirty();\n    const l = this._iteratorPool.acquire();\n    for (l.reset(e); !l.done;) {\n      const e = l.next();\n      e.updateClippingStatus(a) && e.resetPendingUpdate(Ge.GEOMETRY) && this._updateTileGeometryState(e), e.setPendingUpdate(Ge.RENDERDATA), e.computeVisibility(), e.updateScreenDepth(n), e.renderData && (r = Math.min(e.elevationBounds[0], r), s = Math.max(e.elevationBounds[1], s));\n    }\n    l.remove(), this._viewChanged = !0, this._allTilesDirty = !0, this._batchUpdatePendingTileGeometries(), isFinite(r) && isFinite(s) && (i.min !== r || i.max !== s) && (this.visibleElevationBounds = new te(r, s));\n  }\n  _updateRootTileElevationBounds() {\n    let e = 1 / 0,\n      t = -1 / 0;\n    const i = this._rootTiles;\n    u(i) && i.forEach(_ref3 => {\n      let {\n        elevationBounds: i\n      } = _ref3;\n      e = Math.min(e, i[0]), t = Math.max(t, i[1]);\n    });\n    const r = this.rootTileElevationBounds;\n    r.min === e && r.max === t || (this.rootTileElevationBounds = new te(e, t));\n  }\n  _updateViewDependentParameters() {\n    const {\n        camera: e,\n        contentCamera: t\n      } = this.view.state,\n      i = Math.tan(.5 * t.fovX),\n      r = Math.tan(.5 * t.fovY),\n      s = this.tilingScheme.pixelSize,\n      a = 2 ** -this._lodBias * e.pixelRatio;\n    this._splitLimits.aboveGround = e.aboveGround, this._splitLimits.fovX = i, this._splitLimits.fovY = r, this._splitLimits.relativeWidthLimit = s / e.width * this.maxTextureScale * a, this._splitLimits.relativeHeightLimit = s / e.height * this.maxTextureScale * a, this._splitLimits.maxLod = this.tilingScheme.getMaxLod(), this._splitLimits.angledSplitBias = this.view.qualitySettings.tiledSurface.angledSplitBias, this.view.state.fixedContentCamera ? (p(this._splitLimits.frustum) && (this._splitLimits.frustum = F()), q(this._splitLimits.frustum, t.frustum)) : this._splitLimits.frustum = null, q(this._frustum, e.frustum), D(this._viewProjectionMatrix, t.projectionMatrix, t.viewMatrix), b(this._eyePosRenderSR, t.eye), M(e.eye, this.view.renderSpatialReference, this._eyePosSurfaceSR, this.spatialReference);\n  }\n  _updateRenderData(e) {\n    e.rendered && !e.shouldLoad && (ht(e) ? this._loadChildren(e) : dt(e) && this._loadParent(e));\n  }\n  _updateTileGeometryState(e) {\n    e.updateVisibility();\n    this._renderer.updateTileGeometryState(e) && this._markTileToUpdate(e), this._usedMemory = null;\n  }\n  _markAllTileNeighborsForGeometryUpdate(e) {\n    const t = this._pendingTilesToUpdate;\n    e.forEachLoadedNeighbor(e => {\n      t.add(e);\n    });\n  }\n  _updateTileTexture(e, t) {\n    const i = e.resetPendingUpdate(Ge.TEXTURE_FADING) ? Ge.TEXTURE_FADING : !!e.resetPendingUpdate(Ge.TEXTURE_NOFADING) && Ge.TEXTURE_NOFADING;\n    i && (this._renderer.updateTileTexture(e, i), this._usedMemory = null, t.madeProgress());\n  }\n  _emitElevationUpdateEventForTiles() {\n    const e = gt.extent;\n    k(e), this._pendingTilesForElevationUpdateEvent.forEach(t => B(e, t.extent, e)), this._pendingTilesForElevationUpdateEvent.clear(), gt.spatialReference = this.spatialReference, this.emit(\"elevation-change\", gt);\n  }\n  runTask(e) {\n    this._handleLayerViewChanges(e), this._frameTask.processQueue(e), this.renderer.processScaleRangeQueries(this._scaleRangeQueries, e), this._inFrameTask = !0, this._pendingUpdates = 0, this._hasPendingUpdates = !1, this._updateAllTilesStatus(e), this._sortTiles(e);\n    const t = !this.view.state.fixedContentCamera;\n    this._mergeAndSplit(e, t), this._updateElevation(e), this._updateTextures(e), t || this._mergeAndSplit(e, !0), this._inFrameTask = !1, this._runViewChangeUpdateIfDirty(), this._batchUpdatePendingTileGeometries(), this._emitElevationUpdateEventForTiles(), e.done && e.hasProgressed ? this.requestUpdate() : this.getUsedMemory(), this.notifyChange(\"updatingProgressValue\");\n  }\n  _updateAllTilesStatus(e) {\n    if (!this._viewChanged || !this._rootTiles || e.done) return;\n    this._viewChanged = !1;\n    const t = this._iteratorPool.acquire();\n    t.reset(this._rootTiles);\n    const i = this.snapLevel,\n      r = this._splitLimits,\n      s = this._eyePosRenderSR;\n    for (; !t.done;) {\n      const e = t.next(),\n        a = e.shouldSplit(r, s, i);\n      if (a !== Ge.SPLIT) {\n        if (e.resetPendingUpdate(Ge.SPLIT) && e.updateAgentSuspension(), a === Ge.VSPLITMERGE && e.updateAgents(le.ELEVATION), t.skipSubtree(), !e.isLeaf) {\n          e.setPendingUpdate(Ge.MERGE), e.resetPendingUpdate(Ge.SPLIT);\n          const t = this._iteratorPool.acquire();\n          t.resetOne(e);\n          const i = this._viewProjectionMatrix;\n          for (let e = t.next(); !t.done; e = t.next()) this._updateClippingStatus(e), e.updateVisibility(), e.updateScreenDepth(i);\n          t.remove();\n        }\n      } else e.resetPendingUpdate(Ge.MERGE), e.isLeaf && (e.setPendingUpdate(Ge.SPLIT), t.skipSubtree()), e.rendered && e.setPendingUpdate(Ge.RENDERDATA);\n    }\n    t.remove(), this.requestUpdate(), (this.shortBatches || !this.oneBatchPerFrameTask) && this._batchUpdatePendingTileGeometries(), e.madeProgress();\n  }\n  _sortTiles(e) {\n    e.done || this._allTilesSorted || (Xe(this._allTiles, this.view.pointsOfInterest.focus.renderLocation), this._allTilesSorted = !0, this._treeDebugger && this._treeDebugger.update(), e.madeProgress());\n  }\n  _markTileToUpdate(e) {\n    Le(e.isLoaded), e.intersectsClippingArea && (this._pendingTilesToUpdate.add(e), this._markAllTileNeighborsForGeometryUpdate(e));\n  }\n  _batchUpdatePendingTileGeometries() {\n    const e = this._pendingTilesToUpdate;\n    if (0 === e.size) return;\n    const t = Array.from(this._pendingTilesToUpdate.keys()).filter(e => e.isLoaded && e.intersectsClippingArea),\n      i = (i, r) => {\n        !r?.isLoaded || !r.intersectsClippingArea || r.level < i.level || e.has(r) || (e.add(r), t.push(r), r.renderData.updateNeighborData());\n      };\n    t.sort(Qe);\n    const r = t.length;\n    for (let s = 0; s < r; ++s) {\n      const r = t[s];\n      Le(r.isLoaded), Le(r.intersectsClippingArea);\n      const a = r.renderData;\n      a.updateNeighborData();\n      const n = a._dirtyEdgeResolutions,\n        l = a.geometryState.neighborData;\n      for (let t = 0; t < 4; ++t) if (n & 1 << t) {\n        const s = a.geometryState.neighborData.edgePeerNeighbors[t];\n        s && s?.level >= r.level && s.forAllSubtreeOnSide(De(Oe[t]), t => !(!t.isLoaded || !t.intersectsClippingArea) && (Le(e.has(t) || Qe(r, t) < 0), i(r, t), !0)), i(r, l.cornerPeerNeighbors[t]), i(r, l.cornerPeerNeighbors[(t + 1) % 4]);\n      }\n    }\n    e.clear(), this._updateTilesGeometries(t), Ve && ke && this.checkAllTilesWaterproofness();\n  }\n  _mergeAndSplit(e, t) {\n    if (this.suspended || e.done || !this._allTilesDirty) return;\n    this._allTilesDirty = !1, this.requestUpdate();\n    let i = !1;\n    const r = this.view.state.fixedContentCamera;\n    let s = !1;\n    for (; !e.done;) {\n      s = !0;\n      let a = !1;\n      const n = !this._allTiles.some(s => {\n        if (!i && !r && !s.visible) return e.done;\n        let n = s;\n        if (s.resetPendingUpdate(Ge.MERGE)) {\n          if (!t) return s.setPendingUpdate(Ge.MERGE), e.done;\n          for (; n.parent?.resetPendingUpdate(Ge.MERGE);) n = n.parent;\n          this._mergeTile(n), a = !0, e.madeProgress();\n        } else s.resetPendingUpdate(Ge.SPLIT) && (this._splitTile(s), a = !0, e.madeProgress());\n        return !e.done && n === s && s.resetPendingUpdate(Ge.RENDERDATA) && (this._updateRenderData(s), e.madeProgress()), e.done;\n      });\n      if (a && (this._allTilesSorted = !1, this._allTilesDirty = !0), n) {\n        if (!i) {\n          i = !0;\n          continue;\n        }\n        if (!a) break;\n      } else this._allTilesDirty = !0;\n    }\n    s ? e.madeProgress() : this._allTilesDirty = !0, !this.oneBatchPerFrameTask && this._batchUpdatePendingTileGeometries(), this._sortTiles(e);\n  }\n  _updateElevation(e) {\n    e.done || (this._allTiles.some(t => (t.resetPendingUpdate(Ge.GEOMETRY) && (this._updateTileGeometryState(t), this._updateTileTexture(t, e), this.shortBatches && this._batchUpdatePendingTileGeometries(), e.madeProgress()), e.done)), !this.oneBatchPerFrameTask && this._batchUpdatePendingTileGeometries());\n  }\n  _updateTextures(e) {\n    e.done || this._allTiles.some(t => (this._updateTileTexture(t, e), e.done));\n  }\n  _updateClippingExtent() {\n    this.spatialReference && (this.updateTileOverlayParams(tt.UPDATE), this.overlayManager.setPlacementDirty(), this._updateRootTiles());\n  }\n  get _lodBias() {\n    const e = this.view.resourceController.memoryController.memoryFactor;\n    return this.view.qualitySettings.tiledSurface.lodBias - (1 - e) * ye;\n  }\n  _getLodBiasCorrectedScale(e) {\n    const t = this.tilingScheme.levels,\n      i = o(e - this._lodBias, 0, t.length - 1),\n      r = i - Math.floor(i);\n    return t[Math.floor(i)].scale * (1 - r) + t[Math.ceil(i)].scale * r;\n  }\n  _removeAllTiles() {\n    u(this._rootTiles) && (this._rootTiles.forEach(e => this._purgeTile(e)), this._setRootTiles(null), this.notifyChange(\"ready\")), this._allTiles.clear(), this._visible = !1;\n  }\n  _purgeDescendantTiles(e) {\n    if (!e.children[0]) return !1;\n    let t = !1;\n    for (let i = 0; i < 4; ++i) t = this._purgeTile(e.children[i]) || t;\n    return e.unsetChildren(), t;\n  }\n  _purgeTile(e) {\n    const t = this._purgeDescendantTiles(e) || e.rendered;\n    return this._allTiles.removeUnordered(e), this._unloadTile(e), this._tilePool.release(e), t;\n  }\n  _unloadTile(e) {\n    this._pendingTilesToUpdate.delete(e), this._pendingTilesForElevationUpdateEvent.delete(e), e.unload(this._renderer);\n  }\n  _splitTile(e) {\n    Se(e.isLeaf, \"tile that is already split should not be split again!\");\n    const t = e.level + 1,\n      i = 2 * e.lij[1],\n      r = 2 * e.lij[2];\n    e.setChildren(this._createTile(t, i, r, e), this._createTile(t, i, r + 1, e), this._createTile(t, i + 1, r, e), this._createTile(t, i + 1, r + 1, e)), e.setPendingUpdate(Ge.RENDERDATA), e.updateAgentSuspension(), this._allTiles.pushArray(e.children), this._allTilesDirty = !0, ++this._performanceInfo.numSplit;\n  }\n  _emitTileScaleChange(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : e.level;\n    mt.spatialReference = this.spatialReference, mt.extent = e.extent, mt.scale = this._getLodBiasCorrectedScale(t), this.emit(\"scale-change\", mt);\n  }\n  _createTile(e, t, i, r) {\n    Se(!!r, \"_createTile sanity check\");\n    const s = this._acquireTile(e, t, i, r);\n    return s.updateClippingStatus(this.extent), s.updateScreenDepth(this._viewProjectionMatrix), this._shouldSplit(s) && s.setPendingUpdate(Ge.SPLIT), s;\n  }\n  get shortBatches() {\n    return this.view.state.mode !== it.IDLE;\n  }\n  _mergeTile(e) {\n    Se(!e.hasPendingUpdate(Ge.SPLIT), \"_mergeTile sanity check\"), this._purgeDescendantTiles(e) && (Se(!e.renderData, \"_mergeTile sanity check\"), this._loadTile(e), this._markTileToUpdate(e), this._emitTileScaleChange(e), this.shortBatches && this._batchUpdatePendingTileGeometries()), this._allTilesDirty = !0, ++this._performanceInfo.numMerged;\n  }\n  _loadChildren(e) {\n    Se(e.rendered, \"parent should be rendered\"), this._unloadTile(e);\n    const t = e.children;\n    t.forEach(e => this._loadTile(e)), t.forEach(e => this._pendingTilesToUpdate.add(e)), this._markAllTileNeighborsForGeometryUpdate(e), this._emitTileScaleChange(e, e.level + 1), this.shortBatches && this._batchUpdatePendingTileGeometries();\n  }\n  _loadParent(e) {\n    const t = e.parent;\n    this._unloadChildren(t), this._loadTile(t), this._markTileToUpdate(t), this._emitTileScaleChange(t, t.level), this.shortBatches && this._batchUpdatePendingTileGeometries();\n  }\n  _unloadChildren(e) {\n    const t = e.children;\n    if (t[0]) for (let i = 0; i < 4; ++i) {\n      const e = t[i];\n      this._unloadChildren(e), this._unloadTile(e);\n    }\n  }\n  _loadTile(e) {\n    e.load(), e.setPendingUpdate(Ge.RENDERDATA), this.requestUpdate(), this._allTilesDirty = !0, this.overlayManager && this.overlayManager.hasOverlays && this.overlayManager.setTileParameters(e);\n  }\n  _elevationDataArrived(e, t, i) {\n    const r = new ie(e.lij, e.extent, i);\n    e.dataArrived(t, le.ELEVATION, r);\n    const s = [e],\n      a = e.level,\n      n = this._iteratorPool.acquire();\n    for (n.reset(s); !n.done;) {\n      const e = n.next();\n      e.findElevationBoundsForLayer(t, a), e.computeElevationBounds();\n    }\n    0 === a && this._updateRootTileElevationBounds(), n.remove(), this._updateTilesVisibility(s);\n  }\n  _handleLayerViewChanges() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : at;\n    if (!this._layerViewsDirty) return;\n    this._layerViewsDirty = !1;\n    let t = !1;\n    const i = new Set();\n    let r = -1;\n    for (const s of this.view.allLayerViews.items) if (i.add(s.uid), Pe(s) || be(s)) if (this._basemapLayerViewHandles.has(s.uid) && !be(s)) {\n      const e = this._layerClassFromLayerView(s),\n        i = this._getLayerIdxByUID(e, s.uid);\n      u(i) && ((i < r || p(r)) && (t = !0), r = i);\n    } else this._registerTiledLayerView(s), s.layer.loaded && (t = !0);\n    this._basemapLayerViewHandles.forEach((e, r) => {\n      i.has(r) || (this._unregisterTiledLayerView(r), t = !0);\n    }), t && this._updateTiledLayers(), this.hasCompositeBlendMode = this._hasCompositeBlendMode(), this._evaluateTransparency(), e.madeProgress();\n  }\n  _allSurfaceLayersTransparent() {\n    let e = 0 === this.view.map?.ground?.opacity;\n    for (const t of this.view.allLayerViews.items) if (Ce(t) && !z(t.layer) && 0 !== t.fullOpacity) return e = !1, e;\n    return e;\n  }\n  _hasCompositeBlendMode() {\n    for (const e of this.view.allLayerViews.items) if ((Ue(e) || be(e)) && Je(Ze[e.layer.blendMode])) return !0;\n    return !1;\n  }\n  _layerClassFromLayerView(e) {\n    return Re(e) ? le.ELEVATION : le.MAP;\n  }\n  _registerTiledLayerView(e) {\n    const t = [];\n    if ((Ue(e) || be(e)) && t.push(f(() => e.layer.blendMode, () => {\n      this.hasCompositeBlendMode = this._hasCompositeBlendMode(), this._updateTileTextures(ne.UNFADED);\n    })), be(e)) return;\n    const i = this._layerClassFromLayerView(e);\n    t.push(f(() => e.suspended, () => this._updateTiledLayers())), t.push(f(() => e.fullOpacity, () => this._updateTileTextures(ne.UNFADED))), t.push(f(() => \"effectiveScaleRange\" in e.layer ? e.layer.effectiveScaleRange : null, () => this._restartAllAgents(i))), e.on(\"data-changed\", () => {\n      const t = this._getLayerIdxByUID(i, e.uid);\n      u(t) && this._invalidateLayerData(t, i);\n    }), this._basemapLayerViewHandles.set(e.uid, t);\n  }\n  _unregisterTiledLayerView(e) {\n    const t = this._basemapLayerViewHandles.get(e);\n    if (t) {\n      for (let e = 0; e < t.length; e++) t[e].remove();\n      this._basemapLayerViewHandles.delete(e);\n    }\n  }\n  _updateTiledLayers() {\n    if (!this.tilingScheme || this.view.suspended) return;\n    const e = this.view.allLayerViews,\n      t = [[], []];\n    let i = null;\n    e.forEach(e => {\n      if (!e.layer || e.suspended || !Pe(e) || !e.fullExtent) return;\n      const r = this._layerClassFromLayerView(e);\n      if (r === le.MAP) {\n        const t = e.displayLevelRange.maxLevel;\n        t !== 1 / 0 && (null === i || t > i) && (i = t);\n      }\n      t[r].push(e);\n    });\n    for (const r of oe) {\n      const e = this._layerViews[r],\n        i = t[r];\n      i.reverse();\n      const s = i.length;\n      let a = e.length !== s;\n      const n = new Array(s),\n        l = new Array(e.length);\n      this._layerIndexByUid[r].clear();\n      for (let t = 0; t < s; t++) {\n        const s = i[t].uid;\n        this._layerIndexByUid[r].set(s, t);\n        const o = e.indexOf(i[t]);\n        n[t] = o, t !== o && (a = !0), o > -1 && (l[o] = t);\n      }\n      if (a) {\n        const e = this._postorderIterator;\n        for (e.reset(this._rootTiles); !e.done;) e.next().modifyLayers(l, n, r);\n        this._layerViews[r] = i, this._restartAllAgents(r), this._updateTilesVisibility(this._rootTiles);\n      }\n    }\n    this.tilingScheme.ensureMaxLod(i) && this._viewChangeUpdate();\n  }\n  _restartAllAgents(e) {\n    const t = this._postorderIterator;\n    for (t.reset(this._rootTiles); !t.done;) {\n      const i = t.next();\n      i.restartAgents(e), e === le.ELEVATION && i.computeElevationBounds();\n    }\n    this._updateRootTileElevationBounds();\n  }\n  layerViewByIndex(e, t) {\n    return this._layerViews[t][e];\n  }\n  numLayers(e) {\n    return this._layerViews[e].length;\n  }\n  _updateTileTextures(e) {\n    this._allTiles.forAll(t => {\n      t.updateAgents(le.MAP), e === ne.IMMEDIATE ? this.renderer.updateTileTexture(t, Ge.TEXTURE_NOFADING) : t.updateRenderData(le.MAP, e);\n    }), this._evaluateTransparency();\n  }\n  _invalidateLayerData(e, t) {\n    this._allTiles.forAll(i => i.removeLayerAgent(e, t)), this._allTiles.forAll(i => i.invalidateLayerData(e, t));\n  }\n  setTileTreeDirty() {\n    this._allTilesDirty = !0;\n  }\n  requestRender() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : tt.UPDATE;\n    this.renderer.setNeedsRender(e);\n  }\n  requestUpdate() {\n    1 == ++this._pendingUpdates && (this._hasPendingUpdates = !0);\n  }\n  requestTileData(e, t, i, r) {\n    const s = this.layerViewByIndex(t, i),\n      a = s.layer;\n    return !a.tilemapCache || xe(s) ? this._requestTileData(e, i, s, r) : (++this._asyncWorkItems, a.tilemapCache.fetchAvailability(e.lij[0], e.lij[1], e.lij[2], {\n      ...r,\n      timeout: 6e3\n    }).then(() => --this._asyncWorkItems).catch(t => {\n      throw --this._asyncWorkItems, g(r), m(t) || this._dataMissing(e, i, s, {\n        notInTilemap: !0\n      }), t;\n    }).then(() => this._frameTask.schedule(() => this._requestTileData(e, i, s, r), r.signal)));\n  }\n  _requestTileData(e, t, i, r) {\n    return t === le.ELEVATION ? Re(i) ? this._requestElevationTileData(e, i, r) : Promise.reject() : Ce(i) ? this._requestMapTileData(e, i, r) : Promise.reject();\n  }\n  _requestElevationTileData(e, t, i) {\n    ++this._asyncWorkItems;\n    const r = r => {\n        if (T(i)) return;\n        const s = this._layerIndexByUid[le.ELEVATION].get(t.uid);\n        null != s ? (this._usedMemory = null, this.requestUpdate(), this._elevationDataArrived(e, s, r)) : l.getLogger(this.declaredClass).warn(\"TerrainSurface: received data from unknown layer %d %s\", le.ELEVATION, e.lij.toString());\n      },\n      s = i => {\n        m(i) || (this._dataMissing(e, le.ELEVATION, t, i), this.requestUpdate());\n      };\n    if (Me(t.layer)) return t.layer.fetchTile(e.lij[0], e.lij[1], e.lij[2], {\n      noDataValue: fe,\n      signal: i.signal\n    }).then(e => {\n      if (!T(i)) return this._frameTask.schedule(() => r(e), i.signal, s);\n      l.getLogger(this.declaredClass).warnOnce(\"A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true.\");\n    }, s).finally(() => {\n      --this._asyncWorkItems;\n    });\n    const a = t.getTileUrl(e.lij[0], e.lij[1], e.lij[2]);\n    return this._elevationDataRequester.request(a, \"binary\", i).then(e => this._lercDecoder.decode(e, {\n      noDataValue: fe\n    }, i.signal)).then(e => {\n      e ? r(new Q(e)) : s(new Error(\"LERC decoding failed\"));\n    }, s).finally(() => {\n      --this._asyncWorkItems;\n    });\n  }\n  _requestMapTileData(e, t, i) {\n    var _this = this;\n    ++this._asyncWorkItems;\n    const r = (r, s) => {\n        --this._asyncWorkItems, Ie(s), T(i) || (this._dataMissing(e, le.MAP, t, r), this.requestUpdate());\n      },\n      s = e => t => r(t, e),\n      a = r => this._frameTask.schedule(() => {\n        --this._asyncWorkItems, this.requestUpdate(), T(i) ? Ie(r) : this._mapTileDataArrived(e, t, r);\n      }, i.signal, s(r)).catch(s(r)),\n      n = function (e) {\n        let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        return _this._frameTask.schedule(() => r(e, t));\n      };\n    if (xe(t)) {\n      const r = t.schemaHelper.getLevelRowColumn(e.lij);\n      return t.fetchTile(r[0], r[1], r[2], i).then(a, n);\n    }\n    if (je(t)) return t.fetchTile(e.lij[0], e.lij[1], e.lij[2], i).then(a, n);\n    if (Ae(t) && Me(t.layer)) return t.layer.fetchTile(e.lij[0], e.lij[1], e.lij[2], i).then(e => {\n      if (T(i)) return l.getLogger(this.declaredClass).warnOnce(\"A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true.\"), void n(y());\n      a(e);\n    }, n);\n    let o = t.getTileUrl(e.lij[0], e.lij[1], e.lij[2]);\n    W(t.layer) && t.layer.refreshTimestamp && (o += `${o.includes(\"?\") ? \"&\" : \"?\"}_ts=${t.layer.refreshTimestamp}`);\n    const h = t.hasMixedImageFormats ? \"image+type\" : \"image\";\n    return this._mapDataRequester.request(o, h, i).then(a, n);\n  }\n  _mapTileDataArrived(e, t, i) {\n    const r = this._getLayerIdxByUID(le.MAP, t.uid);\n    u(r) ? e.dataArrived(r, le.MAP, i) : (Ie(i), l.getLogger(this.declaredClass).warn(\"TerrainSurface: received data from unknown layer\"));\n  }\n  _getLayerIdxByUID(e, t) {\n    return this._layerIndexByUid[e].get(t);\n  }\n  _dataMissing(e, t, i, r) {\n    const s = this._getLayerIdxByUID(t, i.uid);\n    u(s) ? e.dataMissing(s, t, r) : l.getLogger(this.declaredClass).warn(\"TerrainSurface: received data from unknown layer\");\n  }\n  updateTileOverlayParams(e) {\n    this._rootTiles && this.overlayManager && (this._allTiles.forAll(e => {\n      e.renderData && this.overlayManager.setTileParameters(e);\n    }), this._renderer.setNeedsRender(e));\n  }\n  get performanceInfo() {\n    const e = this._performanceInfo;\n    return e.numNodes = this._allTiles.length, e.numLeaves = e.numVisible = e.numRendered = e.numLoadedPerLevel.length = e.numRenderedPerLevel.length = 0, this._allTiles.forAll(t => {\n      t.isLeaf && e.numLeaves++;\n      const i = t.level;\n      t.renderData && (e.numLoadedPerLevel[i] = (e.numLoadedPerLevel[i] || 0) + 1), t.visible && (e.numVisible++, t.rendered && (e.numRenderedPerLevel[i] = (e.numRenderedPerLevel[i] || 0) + 1, e.numRendered++));\n    }), e;\n  }\n  getUsedMemory() {\n    return this.tilingScheme ? (p(this._usedMemory) && (this._usedMemory = this._recalculateUsedMemory()), u(this._usedMemory) ? this._usedMemory : 0) : 0;\n  }\n  _recalculateUsedMemory() {\n    return this.tilingScheme ? this._allTiles.reduce((e, t) => e + t.usedMemory, 0) : null;\n  }\n  getUsedMemoryForLayerView(e) {\n    let t = 0;\n    const i = this._layerClassFromLayerView(e),\n      r = this._getLayerIdxByUID(i, e.uid);\n    return u(r) && this._allTiles.forAll(e => t += e.getUsedMemoryForLayer(i, r)), t;\n  }\n  getTile(e) {\n    if (p(e) || p(this._rootTiles)) return null;\n    const t = e.split(\"/\").map(e => +e);\n    if (0 === t[0]) return this._rootTiles.find(e => e.lij[1] === t[1] && e.lij[2] === t[2]);\n    const i = 2 ** t[0],\n      r = Math.floor(t[1] / i),\n      s = Math.floor(t[2] / i);\n    let a;\n    if (this._rootTiles.some(e => e.lij[1] === r && e.lij[2] === s && (a = e, !0)), a) {\n      let e = 1 << t[0] - 1;\n      for (; a.lij[0] < t[0];) {\n        let i = t[1] & e ? 2 : 0;\n        if ((t[2] & e) > 0 && i++, !a.children[i]) return null;\n        a = a.children[i], e >>= 1;\n      }\n      return Se(a.lij[0] === t[0] && a.lij[1] === t[1] && a.lij[2] === t[2], \"not the right tile?\"), a;\n    }\n    return null;\n  }\n  get renderPatchBorders() {\n    return this._renderer.renderPatchBorders;\n  }\n  set renderPatchBorders(e) {\n    this._renderer.renderPatchBorders = e;\n  }\n  get visualizeNormals() {\n    return this._renderer.visualizeNormals;\n  }\n  set visualizeNormals(e) {\n    this._renderer.visualizeNormals = e;\n  }\n  get renderingDisabled() {\n    return this._renderer.renderingDisabled;\n  }\n  set renderingDisabled(e) {\n    this._renderer.renderingDisabled = e;\n  }\n  get test() {\n    const e = this;\n    return {\n      renderer: e._renderer,\n      lercDecoder: e._lercDecoder,\n      forceReload: () => {\n        u(e._rootTiles) && e._rootTiles.length > 0 && (e._mergeTile(e._rootTiles[0]), e._viewChangeUpdate());\n      },\n      getTiles: () => e._allTiles.toArray(),\n      getRenderedTiles() {\n        _t.clear(), e._allTiles.forAll(e => {\n          e.visible && e.rendered && _t.push(e);\n        });\n        const t = _t.toArray();\n        return Ye(e.renderOrder, t), t;\n      },\n      lockTilingScheme(t, i) {\n        e._extentHelper.defaultTiledLayersExtent = i, e.tilingSchemeLogic.test.lockTilingScheme(t);\n      }\n    };\n  }\n  checkAllTilesWaterproofness() {\n    if (!ke) return;\n    const e = this._rootTiles;\n    if (p(e)) return;\n    const t = e => e?.renderData?.geometryInfo?.indices?.length > 0,\n      i = (e, i) => {\n        t(e) && console.error(\"Tile[\", e.lij, \"] has geometry although parent[\", i.lij, \"] has geom\");\n      },\n      r = e => {\n        if (e.intersectsClippingArea) if (e.renderData && !e.renderData.geometryState && console.error(\"Tile[\", e.lij, \"] has renderData but not geometryState\"), e.renderData && !e.renderData.geometryInfo && console.error(\"Tile[\", e.lij, \"] has renderData but not geometryInfo\"), !e.renderData?.geometryInfo || (e.renderData.geometryInfo.indices?.length ?? 0) > 0 || console.error(\"Tile[\", e.lij, \"] has renderData but no indices - geometryInfo: \", e.renderData.geometryInfo), t(e)) {\n          e.checkGeometryWaterproofness();\n          for (const t of e.children) i(t, e);\n        } else if (e.isLeaf) console.error(\"Tile[\", e.lij, \"] has no geometry and no children, from root to leaf\");else for (const t of e.children) r(t);\n      },\n      s = e => {\n        const t = e.parent?.visible ?? !0,\n          i = e.visible;\n        e.computeVisibility();\n        const r = e.visible;\n        if (i !== r && t && console.error(\" Tile[\", e.lij, \"] has out of date visibility: \", i, \" instead of \", r), !e.isLeaf) for (const a of e.children) s(a);\n      };\n    for (const a of e) r(a), s(a);\n  }\n  get isGlobal() {\n    return this._isGlobal;\n  }\n  get shading() {\n    return this._shading;\n  }\n  _updateShadingIfChanged() {\n    const e = this.view?.map?.ground?.shading;\n    e !== this._shading && this._updateShading();\n  }\n  _updateShading() {\n    const e = this.view?.map?.ground?.shading;\n    this._shading = e, this.renderer && (this.renderer.shading = e, this.renderer.setNeedsRender()), this._updateAllTileGeometries();\n  }\n  get isWebMercator() {\n    return this._isWebMercator;\n  }\n  get isWebMercatorOnPlateeCarree() {\n    return this._isWebMercatorOnPlateeCarree;\n  }\n  isEastEndWrap(e) {\n    return this.isGlobal && e[2] === this.lijEastEnd(e[0]) - 1;\n  }\n  isWestEndWrap(e) {\n    return this.isGlobal && 0 === e[2];\n  }\n  lijEastEnd(e) {\n    return 2 ** (e + (u(this.spatialReference) && this.spatialReference.isGeographic ? 1 : 0));\n  }\n  wrapEastWest(e) {\n    const t = this.lijEastEnd(e[0]),\n      i = e[2];\n    if (0 <= i && i < t) return e;\n    if (!this.isGlobal) return null;\n    const r = (i + (i < 0 ? t : 0)) % t;\n    return [e[0], e[1], r];\n  }\n  enableInternalChecks(e) {\n    Be(e);\n  }\n  enableWaterproofnessChecks(e) {\n    Ne(e);\n  }\n};\ne([S()], nt.prototype, \"_renderer\", void 0), e([S({\n  constructOnly: !0\n})], nt.prototype, \"_scaleRangeQueries\", void 0), e([S()], nt.prototype, \"_hasPendingUpdates\", void 0), e([S()], nt.prototype, \"_asyncWorkItems\", void 0), e([S()], nt.prototype, \"_allTilesDirty\", void 0), e([S()], nt.prototype, \"_allTilesSorted\", void 0), e([S()], nt.prototype, \"_viewChanged\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"_watchUpdatingTracking\", void 0), e([S()], nt.prototype, \"_frameTask\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"snapLevel\", null), e([S({\n  readOnly: !0\n})], nt.prototype, \"lodSnapping\", null), e([S({\n  constructOnly: !0\n})], nt.prototype, \"view\", void 0), e([S()], nt.prototype, \"_userClippingExtent\", null), e([S()], nt.prototype, \"_rootTilesExtent\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"extent\", null), e([S({\n  readOnly: !0\n})], nt.prototype, \"groundExtent\", null), e([S({\n  readOnly: !0\n})], nt.prototype, \"_tilingSchemeExtent\", null), e([S({\n  readOnly: !0\n})], nt.prototype, \"updating\", null), e([S({\n  readOnly: !0\n})], nt.prototype, \"running\", null), e([S(ee)], nt.prototype, \"updatingProgress\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"updatingProgressValue\", null), e([S()], nt.prototype, \"_maxNumUpdating\", void 0), e([S()], nt.prototype, \"baseOpacity\", null), e([S()], nt.prototype, \"hasCompositeBlendMode\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"overlayManager\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"viewingMode\", null), e([S()], nt.prototype, \"maxTextureScale\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"ready\", null), e([S({\n  value: pe.FRONT_TO_BACK\n})], nt.prototype, \"renderOrder\", null), e([S({\n  readOnly: !0\n})], nt.prototype, \"rootTiles\", null), e([S()], nt.prototype, \"_rootTiles\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"spatialReference\", null), e([S({\n  type: t\n})], nt.prototype, \"backgroundColor\", null), e([S({\n  value: !1\n})], nt.prototype, \"slicePlaneEnabled\", null), e([S({\n  readOnly: !0\n})], nt.prototype, \"tilingScheme\", void 0), e([S({\n  readOnly: !0\n})], nt.prototype, \"tilingSchemeLocked\", null), e([S({\n  readOnly: !0\n})], nt.prototype, \"tilingSchemeLogic\", void 0), e([S({\n  value: !0\n})], nt.prototype, \"velvetOverground\", null), e([S()], nt.prototype, \"wireframe\", null), e([S({\n  value: !1\n})], nt.prototype, \"suspended\", null), e([S()], nt.prototype, \"textureFadeDuration\", null), e([S()], nt.prototype, \"visibleElevationBounds\", void 0), e([S()], nt.prototype, \"rootTileElevationBounds\", void 0), e([S()], nt.prototype, \"_layerViewsDirty\", void 0), e([S()], nt.prototype, \"renderPatchBorders\", null), e([S()], nt.prototype, \"visualizeNormals\", null), e([S()], nt.prototype, \"renderingDisabled\", null), nt = e([L(\"esri.views.3d.terrain.TerrainSurface\")], nt);\nconst lt = nt;\nfunction ot(e, t) {\n  return e[0] === t[0] && e[1] === t[1] && e[2] === t[2];\n}\nfunction ht(e) {\n  const t = e.children;\n  if (!t[0]) return !1;\n  for (const i of t) if (i.shouldLoad) return !0;\n  for (const i of t) if (ht(i)) return !0;\n  return !1;\n}\nfunction dt(e) {\n  return e.isLeaf && (e.parent?.shouldLoad ?? !1);\n}\nconst pt = U(),\n  ut = I(),\n  ct = [0, 0, 0],\n  _t = new _(),\n  gt = {\n    spatialReference: null,\n    extent: I(),\n    context: \"ground\"\n  },\n  mt = {\n    spatialReference: null,\n    extent: null,\n    scale: 0\n  };\nfunction Tt(e, t, i) {\n  for (const r of e) {\n    if (!r.containsPointXY(t, i)) continue;\n    let e = r;\n    for (; e && !e.renderData;) {\n      const r = (t > e.extentMidX ? 1 : 0) + (i < e.extentMidY ? 2 : 0);\n      e = e.children[r];\n    }\n    const s = e?.renderData?.geometryState.samplerData ?? null;\n    return re(t, i, s);\n  }\n  return null;\n}\nexport { lt as default };","map":{"version":3,"names":["_","e","t","i","difference","r","s","a","n","l","clamp","o","releaseMaybe","h","destroyMaybe","d","isNone","p","isSome","u","c","throwIfAborted","g","isAbortError","m","isAborted","T","createAbortError","y","watch","f","syncAndInitial","v","sync","w","initial","E","property","S","subclass","L","D","P","b","C","U","WatchUpdatingTracking","R","getReferenceEllipsoid","x","projectVectorToVector","M","projectPointToVector","j","A","create","I","equals","O","intersection","V","empty","k","expand","B","intersectsSphere","N","F","copy","q","isPlateCarree","G","isRefreshableLayer","W","ElevationQueryTileCache","H","ElevationTileData","Q","isBaseLayer","z","acquireDecoder","X","printAllocations","Y","directionToHeadingTilt","$","K","toBoundingRect","J","ClientType","Z","updatingProgress","ee","ElevationBounds","te","ElevationData","ie","sampleElevation","re","se","LODSnapping","ae","TextureUpdate","ne","LayerClass","le","LayerClasses","oe","OverlayManager","he","PlanarPatch","de","RenderOrder","pe","ScaleRangeQueries","ue","SphericalPatch","ce","SplitLimits","_e","MAX_ROOT_TILES","ge","TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR","me","TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR","Te","MAX_MEMORY_LOD_BIAS","ye","ELEVATION_NODATA_VALUE","fe","TerrainRenderer","ve","TransparencyMode","we","Ee","weakAssert","Se","internalAssert","Le","oppositeEdge","De","isSurfaceLayerView","Pe","isGroupLayerView","be","isMapTileLayerView","Ce","isBlendableLayerView","Ue","isElevationLayerView","Re","isVectorTileLayerView","xe","useFetchTileForLayer","Me","isImageryTileLayerView","je","isTileLayerView","Ae","releaseTileData","Ie","neighborEdgeIndices","Oe","ENABLE_TERRAIN_INTERNAL_CHECKS","Ve","ENABLE_WATERPROOFNESS_TESTS","ke","enableTerrainInternalChecks","Be","enableTerrainWaterproofnessChecks","Ne","Tile","Fe","qe","TileUpdate","Ge","IteratorPreorder","We","IteratorPostorder","He","compareTilesByLij","Qe","hasLoadableSiblings","ze","sortTilesByPOI","Xe","sortTiles","Ye","TilingSchemeLogic","$e","UpsampleInfo","Ke","isCompositeBlendMode","Je","blendModeFromString","Ze","PBRMode","et","RenderRequestType","tt","RenderState","it","ImmediateTask","rt","TaskPriority","st","noBudget","at","nt","EventedMixin","constructor","_scaleRangeQueries","_iteratorPool","remove","release","_postorderIterator","_hasPendingUpdates","_pendingUpdates","_asyncWorkItems","_allTilesDirty","_allTilesSorted","_visibleCached","_usedMemory","_performanceInfo","_viewChanged","_inFrameTask","_viewChangeUpdateDirty","_eyePosRenderSR","_eyePosSurfaceSR","_splitLimits","_frustum","_viewProjectionMatrix","_layerViews","Array","_layerIndexByUid","Map","_basemapLayerViewHandles","_handles","_watchUpdatingTracking","_frameTask","_allTiles","_upsampleInfoPool","_rootTilesExtent","_maxNumUpdating","maxTextureScale","_spatialReference","WebMercator","visibleElevationBounds","rootTileElevationBounds","_updatingRootTiles","_pendingTilesForElevationUpdateEvent","Set","_pendingTilesToUpdate","totalGeometryUpdates","totalTileUpdates","oneBatchPerFrameTask","_layerViewsDirty","_shading","_isWebMercator","_isWebMercatorOnPlateeCarree","_isGlobal","view","state","isLocal","initialize","_lercDecoder","resourceController","_tilePool","memoryController","_upsampleMapCache","newCache","unloadMapData","_elevationQueryCache","_set","surface","add","overlayManager","hasHighlights","_renderer","setNeedsHighlight","rendersOccluded","setRenderOccludedOverlay","renderer","isEmpty","_evaluateTransparency","_overlayRenderer","_ellipsoidRadius","spatialReference","radius","_stage","baseOpacity","_handleLayerViewChanges","_updateTileTextures","UNFADED","IMMEDIATE","hasCompositeBlendMode","renderingDisabled","setParameters","terrainRenderingEnabled","backgroundColor","updateTileBackground","snapLevel","pointsOfInterest","removeAll","focus","renderLocation","TERRAIN_TILE_TREE_SHOW_TILES","_treeDebugger","then","_ref","TerrainTileTree3DDebugger","_extentHelper","viewingMode","layers","map","allLayers","layerViews","allLayerViews","viewSpatialReference","getCollections","defaultsFromMap","mapCollections","_ref2","getChildrenFunction","extentHelper","_updateTilingScheme","_elevationDataRequester","createStreamDataRequester","ELEVATION","_mapDataRequester","BASEMAP","scheduler","registerTask","TERRAIN_SURFACE","stencilEnabledExtents","setStencilEnabledLayerExtents","tilingSchemeLogic","tilingScheme","extent","_updateRootTiles","on","_viewChangeUpdate","_lodBias","lodSnapping","memoryFactor","camera","contentCamera","fixedContentCamera","qualitySettings","tiledSurface","textureFadeDuration","textureFadingEnabled","physicallyBasedRenderingEnabled","pbrMode","Terrain","Disabled","_userClippingExtent","_updateClippingExtent","ground","shading","_updateShadingIfChanged","_updateShading","destroy","_removeAllTiles","forEach","_unregisterTiledLayerView","prune","frustum","ON","cameraOnSurface","scale","eye","viewForward","up","tilt","levelAtScale","Math","round","reduceTileLevelDifferences","OFF","upsampleInfoPool","upsampleMapCache","elevationQueryCache","mapTileRequester","clippingArea","_get","rootTilesExtent","groundExtent","_tilingSchemeExtent","updating","running","ready","suspended","updatingProgressValue","max","opacity","_rootTiles","renderOrder","rootTiles","surfaceColor","slicePlaneEnabled","tilingSchemeLocked","velvetOverground","wireframe","_updateAllTileGeometries","_visible","setVisibility","opaque","transparency","Opaque","intersect","getElevation","length","layerInfo","pt","getLogger","declaredClass","error","Tt","getElevations","getScale","containsPoint","children","rendered","_getLodBiasCorrectedScale","level","getSphereElevationBounds","isLeaf","min","elevationBounds","getSphereScale","queryVisibleScaleRange","queryVisibleLevelRange","_allSurfaceLayersTransparent","Empty","TransparentWithDraped","Semitransparent","terrainTransparency","isWebMercator","renderSpatialReference","_updateTiledLayers","setTileSize","pixelSize","setSpatialReference","_acquireTile","acquire","ct","init","updatingRootTiles","ut","rootTilesInExtent","warn","lij","ot","removed","added","filter","findIndex","_purgeTile","push","_newRootTile","_setRootTiles","setPlacementDirty","notifyChange","checkAllTilesWaterproofness","isLoaded","intersectsClippingArea","updateTileGeometryState","renderData","updateNeighborData","_updateTilesGeometries","clear","sort","updateGeometryIfNeeded","_shouldSplit","shouldSplit","SPLIT","setPendingUpdate","_loadTile","_markTileToUpdate","_updateRootTileElevationBounds","reset","done","next","setRootTiles","_updateTilesVisibility","_runViewChangeUpdateIfDirty","_updateViewDependentParameters","_updateClippingStatus","updateClippingStatus","resetPendingUpdate","GEOMETRY","_updateTileGeometryState","setTileTreeDirty","RENDERDATA","computeVisibility","updateScreenDepth","_batchUpdatePendingTileGeometries","isFinite","_ref3","tan","fovX","fovY","pixelRatio","aboveGround","relativeWidthLimit","width","relativeHeightLimit","height","maxLod","getMaxLod","angledSplitBias","projectionMatrix","viewMatrix","_updateRenderData","shouldLoad","ht","_loadChildren","dt","_loadParent","updateVisibility","_markAllTileNeighborsForGeometryUpdate","forEachLoadedNeighbor","_updateTileTexture","TEXTURE_FADING","TEXTURE_NOFADING","updateTileTexture","madeProgress","_emitElevationUpdateEventForTiles","gt","emit","runTask","processQueue","processScaleRangeQueries","_updateAllTilesStatus","_sortTiles","_mergeAndSplit","_updateElevation","_updateTextures","hasProgressed","requestUpdate","getUsedMemory","updateAgentSuspension","VSPLITMERGE","updateAgents","skipSubtree","MERGE","resetOne","shortBatches","update","size","from","keys","has","_dirtyEdgeResolutions","geometryState","neighborData","edgePeerNeighbors","forAllSubtreeOnSide","cornerPeerNeighbors","some","visible","parent","_mergeTile","_splitTile","updateTileOverlayParams","UPDATE","lodBias","levels","floor","ceil","_purgeDescendantTiles","unsetChildren","removeUnordered","_unloadTile","delete","unload","setChildren","_createTile","pushArray","numSplit","_emitTileScaleChange","arguments","undefined","mt","mode","IDLE","hasPendingUpdate","numMerged","_unloadChildren","load","hasOverlays","setTileParameters","_elevationDataArrived","dataArrived","findElevationBoundsForLayer","computeElevationBounds","items","uid","_layerClassFromLayerView","_getLayerIdxByUID","_registerTiledLayerView","layer","loaded","_hasCompositeBlendMode","fullOpacity","blendMode","MAP","effectiveScaleRange","_restartAllAgents","_invalidateLayerData","set","get","fullExtent","displayLevelRange","maxLevel","reverse","indexOf","modifyLayers","ensureMaxLod","restartAgents","layerViewByIndex","numLayers","forAll","updateRenderData","removeLayerAgent","invalidateLayerData","requestRender","setNeedsRender","requestTileData","tilemapCache","_requestTileData","fetchAvailability","timeout","catch","_dataMissing","notInTilemap","schedule","signal","_requestElevationTileData","Promise","reject","_requestMapTileData","toString","fetchTile","noDataValue","warnOnce","finally","getTileUrl","request","decode","Error","_this","_mapTileDataArrived","schemaHelper","getLevelRowColumn","refreshTimestamp","includes","hasMixedImageFormats","dataMissing","performanceInfo","numNodes","numLeaves","numVisible","numRendered","numLoadedPerLevel","numRenderedPerLevel","_recalculateUsedMemory","reduce","usedMemory","getUsedMemoryForLayerView","getUsedMemoryForLayer","getTile","split","find","renderPatchBorders","visualizeNormals","test","lercDecoder","forceReload","getTiles","toArray","getRenderedTiles","_t","lockTilingScheme","defaultTiledLayersExtent","geometryInfo","indices","console","checkGeometryWaterproofness","isGlobal","isWebMercatorOnPlateeCarree","isEastEndWrap","lijEastEnd","isWestEndWrap","isGeographic","wrapEastWest","enableInternalChecks","enableWaterproofnessChecks","prototype","constructOnly","readOnly","value","FRONT_TO_BACK","type","lt","context","containsPointXY","extentMidX","extentMidY","samplerData","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/terrain/TerrainSurface.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import i from\"../../../core/Accessor.js\";import{difference as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/CollectionFlattener.js\";import a from\"../../../core/Evented.js\";import n from\"../../../core/Handles.js\";import l from\"../../../core/Logger.js\";import{clamp as o}from\"../../../core/mathUtils.js\";import{releaseMaybe as h,destroyMaybe as d,isNone as p,isSome as u}from\"../../../core/maybe.js\";import c from\"../../../core/ObjectPool.js\";import _ from\"../../../core/PooledArray.js\";import{throwIfAborted as g,isAbortError as m,isAborted as T,createAbortError as y}from\"../../../core/promiseUtils.js\";import{watch as f,syncAndInitial as v,sync as w,initial as E}from\"../../../core/reactiveUtils.js\";import{property as S}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as L}from\"../../../core/accessorSupport/decorators/subclass.js\";import{m as D}from\"../../../chunks/mat4.js\";import{c as P}from\"../../../chunks/mat4f64.js\";import{c as b}from\"../../../chunks/vec3.js\";import{c as C}from\"../../../chunks/vec3f64.js\";import{c as U}from\"../../../chunks/vec4f64.js\";import{WatchUpdatingTracking as R}from\"../../../core/support/WatchUpdatingTracking.js\";import{getReferenceEllipsoid as x}from\"../../../geometry/ellipsoidUtils.js\";import{projectVectorToVector as M,projectPointToVector as j}from\"../../../geometry/projection.js\";import A from\"../../../geometry/SpatialReference.js\";import{create as I,equals as O,intersection as V,empty as k,expand as B,intersectsSphere as N}from\"../../../geometry/support/aaBoundingRect.js\";import{create as F,copy as q}from\"../../../geometry/support/frustum.js\";import{isPlateCarree as G}from\"../../../geometry/support/spatialReferenceUtils.js\";import{isRefreshableLayer as W}from\"../../../layers/mixins/RefreshableLayer.js\";import{ElevationQueryTileCache as H}from\"../../../layers/support/ElevationQueryTileCache.js\";import{ElevationTileData as Q}from\"../../../layers/support/ElevationTileData.js\";import{isBaseLayer as z}from\"../../../layers/support/layerUtils.js\";import{acquireDecoder as X}from\"../../../layers/support/LercDecoder.js\";import{printAllocations as Y}from\"../../2d/engine/vectorTiles/VectorTile.js\";import{directionToHeadingTilt as $}from\"../support/cameraUtils.js\";import K from\"../support/debugFlags.js\";import{toBoundingRect as J}from\"../support/extentUtils.js\";import{ClientType as Z}from\"../support/index.js\";import{updatingProgress as ee}from\"../support/updatingProperties.js\";import{ElevationBounds as te}from\"./ElevationBounds.js\";import{ElevationData as ie,sampleElevation as re}from\"./ElevationData.js\";import{create as se}from\"./ExtentHelper.js\";import{LODSnapping as ae,TextureUpdate as ne}from\"./interfaces.js\";import{LayerClass as le,LayerClasses as oe}from\"./LayerClass.js\";import{OverlayManager as he}from\"./OverlayManager.js\";import{PlanarPatch as de}from\"./PlanarPatch.js\";import{RenderOrder as pe}from\"./RenderOrder.js\";import{ScaleRangeQueries as ue}from\"./ScaleRangeQueries.js\";import{SphericalPatch as ce}from\"./SphericalPatch.js\";import{SplitLimits as _e}from\"./SplitLimits.js\";import{MAX_ROOT_TILES as ge,TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR as me,TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR as Te,MAX_MEMORY_LOD_BIAS as ye,ELEVATION_NODATA_VALUE as fe}from\"./TerrainConst.js\";import{TerrainRenderer as ve,TransparencyMode as we}from\"./TerrainRenderer.js\";import Ee from\"./TerrainSurfacePerformanceInfo.js\";import{weakAssert as Se,internalAssert as Le,oppositeEdge as De,isSurfaceLayerView as Pe,isGroupLayerView as be,isMapTileLayerView as Ce,isBlendableLayerView as Ue,isElevationLayerView as Re,isVectorTileLayerView as xe,useFetchTileForLayer as Me,isImageryTileLayerView as je,isTileLayerView as Ae,releaseTileData as Ie,neighborEdgeIndices as Oe,ENABLE_TERRAIN_INTERNAL_CHECKS as Ve,ENABLE_WATERPROOFNESS_TESTS as ke,enableTerrainInternalChecks as Be,enableTerrainWaterproofnessChecks as Ne}from\"./terrainUtils.js\";import{Tile as Fe}from\"./Tile.js\";import{printAllocations as qe}from\"./TilePerLayerInfo.js\";import{TileUpdate as Ge}from\"./TileUpdate.js\";import{IteratorPreorder as We,IteratorPostorder as He,compareTilesByLij as Qe,hasLoadableSiblings as ze,sortTilesByPOI as Xe,sortTiles as Ye}from\"./tileUtils.js\";import{TilingSchemeLogic as $e}from\"./TilingSchemeLogic.js\";import{UpsampleInfo as Ke}from\"./UpsampleInfo.js\";import{isCompositeBlendMode as Je,blendModeFromString as Ze}from\"../webgl-engine/core/shaderLibrary/output/BlendOptions.js\";import{PBRMode as et}from\"../webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{RenderRequestType as tt}from\"../webgl-engine/lib/basicInterfaces.js\";import{RenderState as it}from\"../../support/RenderState.js\";import{ImmediateTask as rt,TaskPriority as st,noBudget as at}from\"../../support/Scheduler.js\";let nt=class extends(a.EventedMixin(i)){constructor(e){super(e),this._scaleRangeQueries=new ue,this._iteratorPool=new c(We,(e=>e.remove=()=>this._iteratorPool.release(e))),this._postorderIterator=new He,this._hasPendingUpdates=!1,this._pendingUpdates=0,this._asyncWorkItems=0,this._allTilesDirty=!0,this._allTilesSorted=!0,this._visibleCached=!1,this._usedMemory=null,this._performanceInfo=new Ee,this._viewChanged=!1,this._inFrameTask=!1,this._viewChangeUpdateDirty=!1,this._eyePosRenderSR=C(),this._eyePosSurfaceSR=C(),this._splitLimits=new _e,this._frustum=F(),this._viewProjectionMatrix=P(),this._layerViews=[new Array,new Array],this._layerIndexByUid=[new Map,new Map],this._basemapLayerViewHandles=new Map,this._handles=new n,this._watchUpdatingTracking=new R,this._frameTask=rt,this._allTiles=new _,this._upsampleInfoPool=new c(Ke),this._rootTilesExtent=I(),this.updatingProgress=0,this._maxNumUpdating=1,this.maxTextureScale=1.2,this._spatialReference=A.WebMercator,this.visibleElevationBounds=new te(1/0,-1/0),this.rootTileElevationBounds=new te(1/0,-1/0),this._updatingRootTiles=!1,this._pendingTilesForElevationUpdateEvent=new Set,this._pendingTilesToUpdate=new Set,this.totalGeometryUpdates=0,this.totalTileUpdates=0,this.oneBatchPerFrameTask=!0,this._layerViewsDirty=!1,this._shading=!0,this._isWebMercator=!1,this._isWebMercatorOnPlateeCarree=!1,this._isGlobal=!e.view?.state?.isLocal}initialize(){this._lercDecoder=X(this.view.resourceController),this._tilePool=this.view.state.isLocal?new c(de):new c(ce);const e=this.view.resourceController.memoryController;this._upsampleMapCache=e.newCache(\"esri.views.3d.terrain.upsample\",(e=>e.unloadMapData())),this._elevationQueryCache=new H(e.newCache(\"elevation-query\")),this._set(\"overlayManager\",new he({surface:this})),this._handles.add([f((()=>this.overlayManager.hasHighlights),(e=>this._renderer.setNeedsHighlight(e))),f((()=>this.overlayManager.rendersOccluded),(e=>this._renderer.setRenderOccludedOverlay(e))),f((()=>this.overlayManager.renderer.isEmpty),(()=>this._evaluateTransparency()))],\"overlayManager\"),this._renderer=new ve({_overlayRenderer:this.overlayManager.renderer,_ellipsoidRadius:x(this.view.spatialReference).radius,_stage:this.view._stage,_allTiles:this._allTiles}),this._handles.add([f((()=>this.baseOpacity),(()=>{this._handleLayerViewChanges(),this._updateTileTextures(this._evaluateTransparency()?ne.UNFADED:ne.IMMEDIATE)}),v),f((()=>this.hasCompositeBlendMode),(()=>this._updateTileTextures(this._evaluateTransparency()?ne.UNFADED:ne.IMMEDIATE)),v),f((()=>this.renderingDisabled),(()=>this.view?._stage?.renderer.setParameters({terrainRenderingEnabled:!this.renderingDisabled})),w),f((()=>this.backgroundColor),(e=>{this._handleLayerViewChanges(),this._renderer.updateTileBackground(e)}),v),f((()=>this.snapLevel),(()=>this._viewChanged=!0),w),f((()=>this.view.pointsOfInterest),(e=>{this._renderer.pointsOfInterest=e,this._watchUpdatingTracking.removeAll(),e&&this._watchUpdatingTracking.add((()=>e.focus.renderLocation),(()=>this._allTilesSorted=!1))})),f((()=>K.TERRAIN_TILE_TREE_SHOW_TILES),(e=>{e&&!this._treeDebugger?import(\"../layers/support/TerrainTileTree3DDebugger.js\").then((({TerrainTileTree3DDebugger:e})=>{!this._treeDebugger&&K.TERRAIN_TILE_TREE_SHOW_TILES&&(this._treeDebugger=new e({view:this.view}))})):e||(this._treeDebugger=d(this._treeDebugger))}),E)]);const{spatialReference:t}=this.view;this._extentHelper=se(this.viewingMode,{layers:this.view.map.allLayers,layerViews:this.view.allLayerViews,viewSpatialReference:t});const i=new s({getCollections:()=>this.view?.defaultsFromMap?.mapCollections?.map((({layers:e})=>e)),getChildrenFunction:e=>e&&\"layers\"in e?e.layers:null}),r=new $e({layers:i,extentHelper:this._extentHelper,viewingMode:this.viewingMode,viewSpatialReference:t});this._set(\"tilingSchemeLogic\",r),this._updateTilingScheme(),this._elevationDataRequester=this.view.resourceController.createStreamDataRequester(Z.ELEVATION),this._mapDataRequester=this.view.resourceController.createStreamDataRequester(Z.BASEMAP);const a=this.view.resourceController.scheduler;this._frameTask=a.registerTask(st.TERRAIN_SURFACE,this),this._handles.add([f((()=>this._extentHelper.stencilEnabledExtents),(e=>this._renderer.setStencilEnabledLayerExtents(e)),E),f((()=>this.tilingSchemeLogic.tilingScheme),(()=>this._updateTilingScheme()),w),f((()=>this.extent),(()=>this._updateRootTiles()),E),this.view.on(\"resize\",(()=>this._viewChangeUpdate())),f((()=>{const e=this.view,t=e.state;return[this._lodBias,this.lodSnapping,e.resourceController?.memoryController?.memoryFactor,t.camera,t.contentCamera,t.fixedContentCamera]}),(()=>this._viewChangeUpdate()),v),f((()=>this.view.qualitySettings?.tiledSurface?.textureFadeDuration),(e=>this._renderer.textureFadingEnabled=e>0),E),f((()=>this.view.qualitySettings?.physicallyBasedRenderingEnabled),(e=>this._renderer.pbrMode=e?et.Terrain:et.Disabled),E),f((()=>this._userClippingExtent),(()=>this._updateClippingExtent()),w)]),this._handles.add(this.view.allLayerViews.on(\"after-changes\",(()=>this._layerViewsDirty=!0))),this._handles.add([f((()=>this.view?.map.ground.shading),(()=>{this._updateShadingIfChanged()}))]),this._updateShading(),this._layerViewsDirty=!0,this._handleLayerViewChanges()}destroy(){this._frameTask.remove(),this._handles.destroy(),this._watchUpdatingTracking.destroy(),this._lercDecoder=h(this._lercDecoder),this._removeAllTiles(),this._upsampleMapCache=d(this._upsampleMapCache),this._elevationQueryCache=d(this._elevationQueryCache);const e=this.tilingSchemeLogic.layers;this._set(\"tilingSchemeLogic\",d(this.tilingSchemeLogic)),e.destroy(),this._basemapLayerViewHandles.forEach(((e,t)=>this._unregisterTiledLayerView(t))),this._elevationDataRequester=null,this._mapDataRequester=null,this._set(\"overlayManager\",d(this.overlayManager)),this._tilePool=d(this._tilePool),Fe.prune(),this._treeDebugger=d(this._treeDebugger),this._renderer=d(this._renderer),this._iteratorPool=d(this._iteratorPool),this._set(\"view\",null),this._upsampleInfoPool=d(this._upsampleInfoPool),Y(),qe()}get renderer(){return this._renderer}get frustum(){return this._frustum}get snapLevel(){if(this.lodSnapping===ae.ON){const e=this.view,t=this.tilingScheme,i=e.pointsOfInterest?.cameraOnSurface?.scale;if(i&&t){const r=e.state.contentCamera;let s=$(e,r.eye,r.viewForward,r.up).tilt;s>90&&(s=180-s);const a=2*(s/90)**2,n=t.levelAtScale(i)-a;return Math.round(n)}}return null}get lodSnapping(){return this.view.qualitySettings.tiledSurface.reduceTileLevelDifferences?ae.ON:ae.OFF}get upsampleInfoPool(){return this._upsampleInfoPool}get upsampleMapCache(){return this._upsampleMapCache}get elevationQueryCache(){return this._elevationQueryCache}get mapTileRequester(){return this._mapDataRequester}get _userClippingExtent(){const{spatialReference:e}=this,{clippingArea:t}=this.view;if(p(t)||p(e))return null;const i=I(),r=J(t,i,e)?i:null,s=this._get(\"extent\");return O(r,s)?s:r}get rootTilesExtent(){return this._rootTilesExtent}get extent(){const e=V(this.groundExtent,this._userClippingExtent,I()),t=this._get(\"extent\");return O(e,t)?t:e}get groundExtent(){return u(this._tilingSchemeExtent)?this._tilingSchemeExtent:this._rootTilesExtent}get _tilingSchemeExtent(){return this.tilingSchemeLogic?.extent}get updating(){return this._hasPendingUpdates||(this._maxNumUpdating=1),!!((this.running||this._watchUpdatingTracking.updating||this._asyncWorkItems>0)&&this.ready&&!this.suspended||this.overlayManager.updating)}get running(){return(this._hasPendingUpdates||this._viewChanged||this._allTilesDirty||!this._allTilesSorted||this._layerViewsDirty||this._scaleRangeQueries.updating||this._frameTask.updating)&&this.ready&&!this.suspended}get updatingProgressValue(){return this._maxNumUpdating=Math.max(this._pendingUpdates,this._maxNumUpdating),1-this._pendingUpdates/this._maxNumUpdating}get baseOpacity(){return this.view.map.ground.opacity}set baseOpacity(e){this.view.map.ground.opacity=e}get viewingMode(){return this.view.state.viewingMode}get ready(){return u(this._rootTiles)}set renderOrder(e){this._renderer.renderOrder=e,this._set(\"renderOrder\",e)}get rootTiles(){return this._rootTiles}get spatialReference(){return this.tilingScheme?.spatialReference??null}get backgroundColor(){return this.view.map.ground.surfaceColor}set backgroundColor(e){this.view.map.ground.surfaceColor=e}set slicePlaneEnabled(e){this._renderer.slicePlaneEnabled=e,this._set(\"slicePlaneEnabled\",e),this._evaluateTransparency()}get tilingSchemeLocked(){return this.tilingSchemeLogic?.tilingSchemeLocked??!1}set velvetOverground(e){this._renderer.velvetOverground=e,this._set(\"velvetOverground\",e)}get wireframe(){return this._renderer.wireframe}set wireframe(e){e!==this._renderer.wireframe&&(this._renderer.wireframe=e,this._updateAllTileGeometries())}set _visible(e){e!==this._visibleCached&&(this._visibleCached=e,this._renderer.setVisibility(e),this.suspended=!e)}get opaque(){return this._renderer.transparency===we.Opaque}set suspended(e){this._set(\"suspended\",e),this._viewChangeUpdate()}get textureFadeDuration(){return this.view.qualitySettings.tiledSurface.textureFadeDuration??0}intersect(e,t,i,r){this._renderer.intersect(e,t,i,r)}getElevation(e,t,i,r){const s=this._rootTiles;if(p(s)||!s.length)return null;if(0===s[0].layerInfo[le.ELEVATION].length)return null;const a=pt;if(a[0]=e,a[1]=t,a[2]=i,!M(a,r,a,this._spatialReference))return l.getLogger(this.declaredClass).error(\"TerrainSurface.getElevation(): could not project given point to tiling scheme coordinate system\"),null;return Tt(s,a[0],a[1])}getElevations(e,t,i){const r=this._rootTiles,s=r?r[0].layerInfo[le.ELEVATION].length:0;if(!p(r)&&r.length&&0!==s)for(let a=0;a<t;++a){const t=3*a;i(a,Tt(r,e[t+0],e[t+1]))}else for(let a=0;a<t;++a)i(a,null)}getScale(e){if(!this.tilingScheme)return null;if(!j(e,pt,this.spatialReference))return l.getLogger(this.declaredClass).error(\"TerrainSurface.getScale(): could not project given point to tiling scheme coordinate system\"),null;const t=this._rootTiles;if(u(t))for(const i of t)if(i?.containsPoint(pt)){let e=i;for(;e.children[0]&&!e.rendered;){const t=e.children[0].extent;let i=0;pt[0]>t[2]&&(i+=1),pt[1]<t[1]&&(i+=2),e=e.children[i]}return this._getLodBiasCorrectedScale(e.level)}return 1/0}getSphereElevationBounds(e,t,i,r,s){if(pt[0]=e,pt[1]=t,pt[2]=i,pt[3]=r,!M(pt,s,pt,this.tilingScheme?.spatialReference))return l.getLogger(this.declaredClass).error(\"TerrainSurface.getSphereElevationBounds(): could not project given point to tiling scheme coordinate system\"),null;let a=1/0,n=-1/0;const o=e=>{if(e&&N(e.extent,pt))if(e.isLeaf||e.rendered)a=Math.min(a,e.elevationBounds[0]),n=Math.max(n,e.elevationBounds[1]);else for(const t of e.children)o(t)},h=this._rootTiles;if(u(h))for(const l of h)o(l);return{min:a,max:n}}getSphereScale(e,t){if(!this.tilingScheme)return null;if(!j(e,pt,this.spatialReference))return l.getLogger(this.declaredClass).error(\"TerrainSurface.getSphereScale(): could not project given point to tiling scheme coordinate system\"),null;pt[3]=t;let i=null;const r=e=>{if(e&&N(e.extent,pt)){const t=e.children;if(t[0]&&!e.rendered)for(const e of t)r(e);else{const t=this._getLodBiasCorrectedScale(e.level);i=null==i?t:Math.min(i,t)}}},s=this._rootTiles;if(u(s))for(const a of s)r(a);return i}queryVisibleScaleRange(e,t,i,r){const s=t?this.tilingScheme.levelAtScale(t):0,a=i?this.tilingScheme.levelAtScale(i):1/0,n=this._lodBias;this._scaleRangeQueries.queryVisibleLevelRange(e,s+n,a+n,r)}_evaluateTransparency(){const e=this.baseOpacity,t=this.overlayManager.renderer.isEmpty,i=this._renderer.transparency,r=this._allSurfaceLayersTransparent()?t?we.Empty:we.TransparentWithDraped:e>=1&&!this.hasCompositeBlendMode&&!this._renderer.slicePlaneEnabled?we.Opaque:we.Semitransparent,s=i!==r;return s&&(this._renderer.transparency=r,this.view?._stage?.renderer.setParameters({terrainTransparency:this._renderer.transparency})),s}_updateTilingScheme(){const e=this.tilingSchemeLogic.tilingScheme;if(!(e!==this.tilingScheme))return;Se(!!e,\"tiling scheme cannot be reset to undefined\"),this._isGlobal=!this.view?.state?.isLocal,this.tilingScheme&&this._removeAllTiles();const t=e?.spatialReference??A.WebMercator;this._spatialReference=t,this._isWebMercator=!!t?.isWebMercator,this._isWebMercatorOnPlateeCarree=this._isWebMercator&&G(this.view?.renderSpatialReference),this._set(\"tilingScheme\",e),this._updateClippingExtent(),e&&(this._updateTiledLayers(),this._renderer.setTileSize(e.pixelSize),this.overlayManager.setSpatialReference(e.spatialReference),this._updateRootTiles())}_acquireTile(e,t,i,r){const s=this._tilePool.acquire();return ct[0]=e,ct[1]=t,ct[2]=i,s.init(ct,r,this),s}get updatingRootTiles(){return this._updatingRootTiles}_updateRootTiles(){const{extent:e,tilingScheme:t}=this;if(!t)return;const i=ut;let s=t.rootTilesInExtent(e,i,5*ge);if(u(this._rootTiles)){if(s.length>ge)return void l.getLogger(this.declaredClass).warn(me);const e=this._rootTiles.map((e=>e.lij)),t=r(e,s,ot);if(this._updatingRootTiles=!0,t.removed.length>0||t.added.length>0){const e=this._rootTiles.filter((e=>!(t.removed.findIndex((t=>ot(t,e.lij)))>-1)||(this._purgeTile(e),!1)));t.added.forEach((t=>e.push(this._newRootTile(t)))),this._setRootTiles(e)}}else this._updatingRootTiles=!0,s.length>ge&&(l.getLogger(this.declaredClass).warn(Te),s=t.rootTilesInExtent(e,i,ge)),this._setRootTiles(s.map((e=>this._newRootTile(e))));O(i,this._rootTilesExtent)||(this._rootTilesExtent=I(i)),this._visible=!0,this._viewChangeUpdate(),this.overlayManager.setPlacementDirty(),this.notifyChange(\"ready\"),this._updateAllTileGeometries(),this._updatingRootTiles=!1,this.checkAllTilesWaterproofness()}_updateAllTileGeometries(){const e=this._allTiles.filter((e=>e.isLoaded&&e.intersectsClippingArea));e.forEach((e=>this._renderer.updateTileGeometryState(e))),e.forEach((e=>e.renderData.updateNeighborData())),this._updateTilesGeometries(e),this._pendingTilesToUpdate.clear()}_updateTilesGeometries(e){if(0===e.length)return;e.sort(Qe);const t=this.renderer;e.forEach((e=>t.updateGeometryIfNeeded(e))),e.forEach((e=>this._pendingTilesForElevationUpdateEvent.add(e)))}_shouldSplit(e){return e.shouldSplit(this._splitLimits,this._eyePosRenderSR,this.snapLevel)===Ge.SPLIT}_newRootTile(e){const t=this._acquireTile(0,e[1],e[2],null);return this._shouldSplit(t)&&t.setPendingUpdate(Ge.SPLIT),this._loadTile(t),this._markTileToUpdate(t),this._updateRootTileElevationBounds(),t}_setRootTiles(e){if(this._rootTiles=e,this._allTiles.clear(),u(e)){const t=this._iteratorPool.acquire();for(t.reset(e);!t.done;)this._allTiles.push(t.next());t.remove()}this._renderer.setRootTiles(this._rootTiles),this._updateTilesVisibility(e)}_runViewChangeUpdateIfDirty(){this._viewChangeUpdateDirty&&(this._viewChangeUpdateDirty=!1,this._viewChangeUpdate())}_viewChangeUpdate(){this.view&&!this.suspended&&this.tilingScheme&&this._visibleCached&&(this._inFrameTask?this._viewChangeUpdateDirty=!0:(this._viewChangeUpdateDirty=!1,this._updateViewDependentParameters(),this._updateTilesVisibility(this._rootTiles)))}_updateClippingStatus(e){e.updateClippingStatus(this.extent)&&e.resetPendingUpdate(Ge.GEOMETRY)&&this._updateTileGeometryState(e)}_updateTilesVisibility(e){if(p(e))return;const t=ze(e),i=this.visibleElevationBounds;let r=t?i.min:1/0,s=t?i.max:-1/0;const a=this.extent,n=this._viewProjectionMatrix;this.setTileTreeDirty();const l=this._iteratorPool.acquire();for(l.reset(e);!l.done;){const e=l.next();e.updateClippingStatus(a)&&e.resetPendingUpdate(Ge.GEOMETRY)&&this._updateTileGeometryState(e),e.setPendingUpdate(Ge.RENDERDATA),e.computeVisibility(),e.updateScreenDepth(n),e.renderData&&(r=Math.min(e.elevationBounds[0],r),s=Math.max(e.elevationBounds[1],s))}l.remove(),this._viewChanged=!0,this._allTilesDirty=!0,this._batchUpdatePendingTileGeometries(),isFinite(r)&&isFinite(s)&&(i.min!==r||i.max!==s)&&(this.visibleElevationBounds=new te(r,s))}_updateRootTileElevationBounds(){let e=1/0,t=-1/0;const i=this._rootTiles;u(i)&&i.forEach((({elevationBounds:i})=>{e=Math.min(e,i[0]),t=Math.max(t,i[1])}));const r=this.rootTileElevationBounds;r.min===e&&r.max===t||(this.rootTileElevationBounds=new te(e,t))}_updateViewDependentParameters(){const{camera:e,contentCamera:t}=this.view.state,i=Math.tan(.5*t.fovX),r=Math.tan(.5*t.fovY),s=this.tilingScheme.pixelSize,a=2**-this._lodBias*e.pixelRatio;this._splitLimits.aboveGround=e.aboveGround,this._splitLimits.fovX=i,this._splitLimits.fovY=r,this._splitLimits.relativeWidthLimit=s/e.width*this.maxTextureScale*a,this._splitLimits.relativeHeightLimit=s/e.height*this.maxTextureScale*a,this._splitLimits.maxLod=this.tilingScheme.getMaxLod(),this._splitLimits.angledSplitBias=this.view.qualitySettings.tiledSurface.angledSplitBias,this.view.state.fixedContentCamera?(p(this._splitLimits.frustum)&&(this._splitLimits.frustum=F()),q(this._splitLimits.frustum,t.frustum)):this._splitLimits.frustum=null,q(this._frustum,e.frustum),D(this._viewProjectionMatrix,t.projectionMatrix,t.viewMatrix),b(this._eyePosRenderSR,t.eye),M(e.eye,this.view.renderSpatialReference,this._eyePosSurfaceSR,this.spatialReference)}_updateRenderData(e){e.rendered&&!e.shouldLoad&&(ht(e)?this._loadChildren(e):dt(e)&&this._loadParent(e))}_updateTileGeometryState(e){e.updateVisibility();this._renderer.updateTileGeometryState(e)&&this._markTileToUpdate(e),this._usedMemory=null}_markAllTileNeighborsForGeometryUpdate(e){const t=this._pendingTilesToUpdate;e.forEachLoadedNeighbor((e=>{t.add(e)}))}_updateTileTexture(e,t){const i=e.resetPendingUpdate(Ge.TEXTURE_FADING)?Ge.TEXTURE_FADING:!!e.resetPendingUpdate(Ge.TEXTURE_NOFADING)&&Ge.TEXTURE_NOFADING;i&&(this._renderer.updateTileTexture(e,i),this._usedMemory=null,t.madeProgress())}_emitElevationUpdateEventForTiles(){const e=gt.extent;k(e),this._pendingTilesForElevationUpdateEvent.forEach((t=>B(e,t.extent,e))),this._pendingTilesForElevationUpdateEvent.clear(),gt.spatialReference=this.spatialReference,this.emit(\"elevation-change\",gt)}runTask(e){this._handleLayerViewChanges(e),this._frameTask.processQueue(e),this.renderer.processScaleRangeQueries(this._scaleRangeQueries,e),this._inFrameTask=!0,this._pendingUpdates=0,this._hasPendingUpdates=!1,this._updateAllTilesStatus(e),this._sortTiles(e);const t=!this.view.state.fixedContentCamera;this._mergeAndSplit(e,t),this._updateElevation(e),this._updateTextures(e),t||this._mergeAndSplit(e,!0),this._inFrameTask=!1,this._runViewChangeUpdateIfDirty(),this._batchUpdatePendingTileGeometries(),this._emitElevationUpdateEventForTiles(),e.done&&e.hasProgressed?this.requestUpdate():this.getUsedMemory(),this.notifyChange(\"updatingProgressValue\")}_updateAllTilesStatus(e){if(!this._viewChanged||!this._rootTiles||e.done)return;this._viewChanged=!1;const t=this._iteratorPool.acquire();t.reset(this._rootTiles);const i=this.snapLevel,r=this._splitLimits,s=this._eyePosRenderSR;for(;!t.done;){const e=t.next(),a=e.shouldSplit(r,s,i);if(a!==Ge.SPLIT){if(e.resetPendingUpdate(Ge.SPLIT)&&e.updateAgentSuspension(),a===Ge.VSPLITMERGE&&e.updateAgents(le.ELEVATION),t.skipSubtree(),!e.isLeaf){e.setPendingUpdate(Ge.MERGE),e.resetPendingUpdate(Ge.SPLIT);const t=this._iteratorPool.acquire();t.resetOne(e);const i=this._viewProjectionMatrix;for(let e=t.next();!t.done;e=t.next())this._updateClippingStatus(e),e.updateVisibility(),e.updateScreenDepth(i);t.remove()}}else e.resetPendingUpdate(Ge.MERGE),e.isLeaf&&(e.setPendingUpdate(Ge.SPLIT),t.skipSubtree()),e.rendered&&e.setPendingUpdate(Ge.RENDERDATA)}t.remove(),this.requestUpdate(),(this.shortBatches||!this.oneBatchPerFrameTask)&&this._batchUpdatePendingTileGeometries(),e.madeProgress()}_sortTiles(e){e.done||this._allTilesSorted||(Xe(this._allTiles,this.view.pointsOfInterest.focus.renderLocation),this._allTilesSorted=!0,this._treeDebugger&&this._treeDebugger.update(),e.madeProgress())}_markTileToUpdate(e){Le(e.isLoaded),e.intersectsClippingArea&&(this._pendingTilesToUpdate.add(e),this._markAllTileNeighborsForGeometryUpdate(e))}_batchUpdatePendingTileGeometries(){const e=this._pendingTilesToUpdate;if(0===e.size)return;const t=Array.from(this._pendingTilesToUpdate.keys()).filter((e=>e.isLoaded&&e.intersectsClippingArea)),i=(i,r)=>{!r?.isLoaded||!r.intersectsClippingArea||r.level<i.level||e.has(r)||(e.add(r),t.push(r),r.renderData.updateNeighborData())};t.sort(Qe);const r=t.length;for(let s=0;s<r;++s){const r=t[s];Le(r.isLoaded),Le(r.intersectsClippingArea);const a=r.renderData;a.updateNeighborData();const n=a._dirtyEdgeResolutions,l=a.geometryState.neighborData;for(let t=0;t<4;++t)if(n&1<<t){const s=a.geometryState.neighborData.edgePeerNeighbors[t];s&&s?.level>=r.level&&s.forAllSubtreeOnSide(De(Oe[t]),(t=>!(!t.isLoaded||!t.intersectsClippingArea)&&(Le(e.has(t)||Qe(r,t)<0),i(r,t),!0))),i(r,l.cornerPeerNeighbors[t]),i(r,l.cornerPeerNeighbors[(t+1)%4])}}e.clear(),this._updateTilesGeometries(t),Ve&&ke&&this.checkAllTilesWaterproofness()}_mergeAndSplit(e,t){if(this.suspended||e.done||!this._allTilesDirty)return;this._allTilesDirty=!1,this.requestUpdate();let i=!1;const r=this.view.state.fixedContentCamera;let s=!1;for(;!e.done;){s=!0;let a=!1;const n=!this._allTiles.some((s=>{if(!i&&!r&&!s.visible)return e.done;let n=s;if(s.resetPendingUpdate(Ge.MERGE)){if(!t)return s.setPendingUpdate(Ge.MERGE),e.done;for(;n.parent?.resetPendingUpdate(Ge.MERGE);)n=n.parent;this._mergeTile(n),a=!0,e.madeProgress()}else s.resetPendingUpdate(Ge.SPLIT)&&(this._splitTile(s),a=!0,e.madeProgress());return!e.done&&n===s&&s.resetPendingUpdate(Ge.RENDERDATA)&&(this._updateRenderData(s),e.madeProgress()),e.done}));if(a&&(this._allTilesSorted=!1,this._allTilesDirty=!0),n){if(!i){i=!0;continue}if(!a)break}else this._allTilesDirty=!0}s?e.madeProgress():this._allTilesDirty=!0,!this.oneBatchPerFrameTask&&this._batchUpdatePendingTileGeometries(),this._sortTiles(e)}_updateElevation(e){e.done||(this._allTiles.some((t=>(t.resetPendingUpdate(Ge.GEOMETRY)&&(this._updateTileGeometryState(t),this._updateTileTexture(t,e),this.shortBatches&&this._batchUpdatePendingTileGeometries(),e.madeProgress()),e.done))),!this.oneBatchPerFrameTask&&this._batchUpdatePendingTileGeometries())}_updateTextures(e){e.done||this._allTiles.some((t=>(this._updateTileTexture(t,e),e.done)))}_updateClippingExtent(){this.spatialReference&&(this.updateTileOverlayParams(tt.UPDATE),this.overlayManager.setPlacementDirty(),this._updateRootTiles())}get _lodBias(){const e=this.view.resourceController.memoryController.memoryFactor;return this.view.qualitySettings.tiledSurface.lodBias-(1-e)*ye}_getLodBiasCorrectedScale(e){const t=this.tilingScheme.levels,i=o(e-this._lodBias,0,t.length-1),r=i-Math.floor(i);return t[Math.floor(i)].scale*(1-r)+t[Math.ceil(i)].scale*r}_removeAllTiles(){u(this._rootTiles)&&(this._rootTiles.forEach((e=>this._purgeTile(e))),this._setRootTiles(null),this.notifyChange(\"ready\")),this._allTiles.clear(),this._visible=!1}_purgeDescendantTiles(e){if(!e.children[0])return!1;let t=!1;for(let i=0;i<4;++i)t=this._purgeTile(e.children[i])||t;return e.unsetChildren(),t}_purgeTile(e){const t=this._purgeDescendantTiles(e)||e.rendered;return this._allTiles.removeUnordered(e),this._unloadTile(e),this._tilePool.release(e),t}_unloadTile(e){this._pendingTilesToUpdate.delete(e),this._pendingTilesForElevationUpdateEvent.delete(e),e.unload(this._renderer)}_splitTile(e){Se(e.isLeaf,\"tile that is already split should not be split again!\");const t=e.level+1,i=2*e.lij[1],r=2*e.lij[2];e.setChildren(this._createTile(t,i,r,e),this._createTile(t,i,r+1,e),this._createTile(t,i+1,r,e),this._createTile(t,i+1,r+1,e)),e.setPendingUpdate(Ge.RENDERDATA),e.updateAgentSuspension(),this._allTiles.pushArray(e.children),this._allTilesDirty=!0,++this._performanceInfo.numSplit}_emitTileScaleChange(e,t=e.level){mt.spatialReference=this.spatialReference,mt.extent=e.extent,mt.scale=this._getLodBiasCorrectedScale(t),this.emit(\"scale-change\",mt)}_createTile(e,t,i,r){Se(!!r,\"_createTile sanity check\");const s=this._acquireTile(e,t,i,r);return s.updateClippingStatus(this.extent),s.updateScreenDepth(this._viewProjectionMatrix),this._shouldSplit(s)&&s.setPendingUpdate(Ge.SPLIT),s}get shortBatches(){return this.view.state.mode!==it.IDLE}_mergeTile(e){Se(!e.hasPendingUpdate(Ge.SPLIT),\"_mergeTile sanity check\"),this._purgeDescendantTiles(e)&&(Se(!e.renderData,\"_mergeTile sanity check\"),this._loadTile(e),this._markTileToUpdate(e),this._emitTileScaleChange(e),this.shortBatches&&this._batchUpdatePendingTileGeometries()),this._allTilesDirty=!0,++this._performanceInfo.numMerged}_loadChildren(e){Se(e.rendered,\"parent should be rendered\"),this._unloadTile(e);const t=e.children;t.forEach((e=>this._loadTile(e))),t.forEach((e=>this._pendingTilesToUpdate.add(e))),this._markAllTileNeighborsForGeometryUpdate(e),this._emitTileScaleChange(e,e.level+1),this.shortBatches&&this._batchUpdatePendingTileGeometries()}_loadParent(e){const t=e.parent;this._unloadChildren(t),this._loadTile(t),this._markTileToUpdate(t),this._emitTileScaleChange(t,t.level),this.shortBatches&&this._batchUpdatePendingTileGeometries()}_unloadChildren(e){const t=e.children;if(t[0])for(let i=0;i<4;++i){const e=t[i];this._unloadChildren(e),this._unloadTile(e)}}_loadTile(e){e.load(),e.setPendingUpdate(Ge.RENDERDATA),this.requestUpdate(),this._allTilesDirty=!0,this.overlayManager&&this.overlayManager.hasOverlays&&this.overlayManager.setTileParameters(e)}_elevationDataArrived(e,t,i){const r=new ie(e.lij,e.extent,i);e.dataArrived(t,le.ELEVATION,r);const s=[e],a=e.level,n=this._iteratorPool.acquire();for(n.reset(s);!n.done;){const e=n.next();e.findElevationBoundsForLayer(t,a),e.computeElevationBounds()}0===a&&this._updateRootTileElevationBounds(),n.remove(),this._updateTilesVisibility(s)}_handleLayerViewChanges(e=at){if(!this._layerViewsDirty)return;this._layerViewsDirty=!1;let t=!1;const i=new Set;let r=-1;for(const s of this.view.allLayerViews.items)if(i.add(s.uid),Pe(s)||be(s))if(this._basemapLayerViewHandles.has(s.uid)&&!be(s)){const e=this._layerClassFromLayerView(s),i=this._getLayerIdxByUID(e,s.uid);u(i)&&((i<r||p(r))&&(t=!0),r=i)}else this._registerTiledLayerView(s),s.layer.loaded&&(t=!0);this._basemapLayerViewHandles.forEach(((e,r)=>{i.has(r)||(this._unregisterTiledLayerView(r),t=!0)})),t&&this._updateTiledLayers(),this.hasCompositeBlendMode=this._hasCompositeBlendMode(),this._evaluateTransparency(),e.madeProgress()}_allSurfaceLayersTransparent(){let e=0===this.view.map?.ground?.opacity;for(const t of this.view.allLayerViews.items)if(Ce(t)&&!z(t.layer)&&0!==t.fullOpacity)return e=!1,e;return e}_hasCompositeBlendMode(){for(const e of this.view.allLayerViews.items)if((Ue(e)||be(e))&&Je(Ze[e.layer.blendMode]))return!0;return!1}_layerClassFromLayerView(e){return Re(e)?le.ELEVATION:le.MAP}_registerTiledLayerView(e){const t=[];if((Ue(e)||be(e))&&t.push(f((()=>e.layer.blendMode),(()=>{this.hasCompositeBlendMode=this._hasCompositeBlendMode(),this._updateTileTextures(ne.UNFADED)}))),be(e))return;const i=this._layerClassFromLayerView(e);t.push(f((()=>e.suspended),(()=>this._updateTiledLayers()))),t.push(f((()=>e.fullOpacity),(()=>this._updateTileTextures(ne.UNFADED)))),t.push(f((()=>\"effectiveScaleRange\"in e.layer?e.layer.effectiveScaleRange:null),(()=>this._restartAllAgents(i)))),e.on(\"data-changed\",(()=>{const t=this._getLayerIdxByUID(i,e.uid);u(t)&&this._invalidateLayerData(t,i)})),this._basemapLayerViewHandles.set(e.uid,t)}_unregisterTiledLayerView(e){const t=this._basemapLayerViewHandles.get(e);if(t){for(let e=0;e<t.length;e++)t[e].remove();this._basemapLayerViewHandles.delete(e)}}_updateTiledLayers(){if(!this.tilingScheme||this.view.suspended)return;const e=this.view.allLayerViews,t=[[],[]];let i=null;e.forEach((e=>{if(!e.layer||e.suspended||!Pe(e)||!e.fullExtent)return;const r=this._layerClassFromLayerView(e);if(r===le.MAP){const t=e.displayLevelRange.maxLevel;t!==1/0&&(null===i||t>i)&&(i=t)}t[r].push(e)}));for(const r of oe){const e=this._layerViews[r],i=t[r];i.reverse();const s=i.length;let a=e.length!==s;const n=new Array(s),l=new Array(e.length);this._layerIndexByUid[r].clear();for(let t=0;t<s;t++){const s=i[t].uid;this._layerIndexByUid[r].set(s,t);const o=e.indexOf(i[t]);n[t]=o,t!==o&&(a=!0),o>-1&&(l[o]=t)}if(a){const e=this._postorderIterator;for(e.reset(this._rootTiles);!e.done;)e.next().modifyLayers(l,n,r);this._layerViews[r]=i,this._restartAllAgents(r),this._updateTilesVisibility(this._rootTiles)}}this.tilingScheme.ensureMaxLod(i)&&this._viewChangeUpdate()}_restartAllAgents(e){const t=this._postorderIterator;for(t.reset(this._rootTiles);!t.done;){const i=t.next();i.restartAgents(e),e===le.ELEVATION&&i.computeElevationBounds()}this._updateRootTileElevationBounds()}layerViewByIndex(e,t){return this._layerViews[t][e]}numLayers(e){return this._layerViews[e].length}_updateTileTextures(e){this._allTiles.forAll((t=>{t.updateAgents(le.MAP),e===ne.IMMEDIATE?this.renderer.updateTileTexture(t,Ge.TEXTURE_NOFADING):t.updateRenderData(le.MAP,e)})),this._evaluateTransparency()}_invalidateLayerData(e,t){this._allTiles.forAll((i=>i.removeLayerAgent(e,t))),this._allTiles.forAll((i=>i.invalidateLayerData(e,t)))}setTileTreeDirty(){this._allTilesDirty=!0}requestRender(e=tt.UPDATE){this.renderer.setNeedsRender(e)}requestUpdate(){1==++this._pendingUpdates&&(this._hasPendingUpdates=!0)}requestTileData(e,t,i,r){const s=this.layerViewByIndex(t,i),a=s.layer;return!a.tilemapCache||xe(s)?this._requestTileData(e,i,s,r):(++this._asyncWorkItems,a.tilemapCache.fetchAvailability(e.lij[0],e.lij[1],e.lij[2],{...r,timeout:6e3}).then((()=>--this._asyncWorkItems)).catch((t=>{throw--this._asyncWorkItems,g(r),m(t)||this._dataMissing(e,i,s,{notInTilemap:!0}),t})).then((()=>this._frameTask.schedule((()=>this._requestTileData(e,i,s,r)),r.signal))))}_requestTileData(e,t,i,r){return t===le.ELEVATION?Re(i)?this._requestElevationTileData(e,i,r):Promise.reject():Ce(i)?this._requestMapTileData(e,i,r):Promise.reject()}_requestElevationTileData(e,t,i){++this._asyncWorkItems;const r=r=>{if(T(i))return;const s=this._layerIndexByUid[le.ELEVATION].get(t.uid);null!=s?(this._usedMemory=null,this.requestUpdate(),this._elevationDataArrived(e,s,r)):l.getLogger(this.declaredClass).warn(\"TerrainSurface: received data from unknown layer %d %s\",le.ELEVATION,e.lij.toString())},s=i=>{m(i)||(this._dataMissing(e,le.ELEVATION,t,i),this.requestUpdate())};if(Me(t.layer))return t.layer.fetchTile(e.lij[0],e.lij[1],e.lij[2],{noDataValue:fe,signal:i.signal}).then((e=>{if(!T(i))return this._frameTask.schedule((()=>r(e)),i.signal,s);l.getLogger(this.declaredClass).warnOnce(\"A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true.\")}),s).finally((()=>{--this._asyncWorkItems}));const a=t.getTileUrl(e.lij[0],e.lij[1],e.lij[2]);return this._elevationDataRequester.request(a,\"binary\",i).then((e=>this._lercDecoder.decode(e,{noDataValue:fe},i.signal))).then((e=>{e?r(new Q(e)):s(new Error(\"LERC decoding failed\"))}),s).finally((()=>{--this._asyncWorkItems}))}_requestMapTileData(e,t,i){++this._asyncWorkItems;const r=(r,s)=>{--this._asyncWorkItems,Ie(s),T(i)||(this._dataMissing(e,le.MAP,t,r),this.requestUpdate())},s=e=>t=>r(t,e),a=r=>this._frameTask.schedule((()=>{--this._asyncWorkItems,this.requestUpdate(),T(i)?Ie(r):this._mapTileDataArrived(e,t,r)}),i.signal,s(r)).catch(s(r)),n=(e,t=null)=>this._frameTask.schedule((()=>r(e,t)));if(xe(t)){const r=t.schemaHelper.getLevelRowColumn(e.lij);return t.fetchTile(r[0],r[1],r[2],i).then(a,n)}if(je(t))return t.fetchTile(e.lij[0],e.lij[1],e.lij[2],i).then(a,n);if(Ae(t)&&Me(t.layer))return t.layer.fetchTile(e.lij[0],e.lij[1],e.lij[2],i).then((e=>{if(T(i))return l.getLogger(this.declaredClass).warnOnce(\"A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true.\"),void n(y());a(e)}),n);let o=t.getTileUrl(e.lij[0],e.lij[1],e.lij[2]);W(t.layer)&&t.layer.refreshTimestamp&&(o+=`${o.includes(\"?\")?\"&\":\"?\"}_ts=${t.layer.refreshTimestamp}`);const h=t.hasMixedImageFormats?\"image+type\":\"image\";return this._mapDataRequester.request(o,h,i).then(a,n)}_mapTileDataArrived(e,t,i){const r=this._getLayerIdxByUID(le.MAP,t.uid);u(r)?e.dataArrived(r,le.MAP,i):(Ie(i),l.getLogger(this.declaredClass).warn(\"TerrainSurface: received data from unknown layer\"))}_getLayerIdxByUID(e,t){return this._layerIndexByUid[e].get(t)}_dataMissing(e,t,i,r){const s=this._getLayerIdxByUID(t,i.uid);u(s)?e.dataMissing(s,t,r):l.getLogger(this.declaredClass).warn(\"TerrainSurface: received data from unknown layer\")}updateTileOverlayParams(e){this._rootTiles&&this.overlayManager&&(this._allTiles.forAll((e=>{e.renderData&&this.overlayManager.setTileParameters(e)})),this._renderer.setNeedsRender(e))}get performanceInfo(){const e=this._performanceInfo;return e.numNodes=this._allTiles.length,e.numLeaves=e.numVisible=e.numRendered=e.numLoadedPerLevel.length=e.numRenderedPerLevel.length=0,this._allTiles.forAll((t=>{t.isLeaf&&e.numLeaves++;const i=t.level;t.renderData&&(e.numLoadedPerLevel[i]=(e.numLoadedPerLevel[i]||0)+1),t.visible&&(e.numVisible++,t.rendered&&(e.numRenderedPerLevel[i]=(e.numRenderedPerLevel[i]||0)+1,e.numRendered++))})),e}getUsedMemory(){return this.tilingScheme?(p(this._usedMemory)&&(this._usedMemory=this._recalculateUsedMemory()),u(this._usedMemory)?this._usedMemory:0):0}_recalculateUsedMemory(){return this.tilingScheme?this._allTiles.reduce(((e,t)=>e+t.usedMemory),0):null}getUsedMemoryForLayerView(e){let t=0;const i=this._layerClassFromLayerView(e),r=this._getLayerIdxByUID(i,e.uid);return u(r)&&this._allTiles.forAll((e=>t+=e.getUsedMemoryForLayer(i,r))),t}getTile(e){if(p(e)||p(this._rootTiles))return null;const t=e.split(\"/\").map((e=>+e));if(0===t[0])return this._rootTiles.find((e=>e.lij[1]===t[1]&&e.lij[2]===t[2]));const i=2**t[0],r=Math.floor(t[1]/i),s=Math.floor(t[2]/i);let a;if(this._rootTiles.some((e=>e.lij[1]===r&&e.lij[2]===s&&(a=e,!0))),a){let e=1<<t[0]-1;for(;a.lij[0]<t[0];){let i=t[1]&e?2:0;if((t[2]&e)>0&&i++,!a.children[i])return null;a=a.children[i],e>>=1}return Se(a.lij[0]===t[0]&&a.lij[1]===t[1]&&a.lij[2]===t[2],\"not the right tile?\"),a}return null}get renderPatchBorders(){return this._renderer.renderPatchBorders}set renderPatchBorders(e){this._renderer.renderPatchBorders=e}get visualizeNormals(){return this._renderer.visualizeNormals}set visualizeNormals(e){this._renderer.visualizeNormals=e}get renderingDisabled(){return this._renderer.renderingDisabled}set renderingDisabled(e){this._renderer.renderingDisabled=e}get test(){const e=this;return{renderer:e._renderer,lercDecoder:e._lercDecoder,forceReload:()=>{u(e._rootTiles)&&e._rootTiles.length>0&&(e._mergeTile(e._rootTiles[0]),e._viewChangeUpdate())},getTiles:()=>e._allTiles.toArray(),getRenderedTiles(){_t.clear(),e._allTiles.forAll((e=>{e.visible&&e.rendered&&_t.push(e)}));const t=_t.toArray();return Ye(e.renderOrder,t),t},lockTilingScheme(t,i){e._extentHelper.defaultTiledLayersExtent=i,e.tilingSchemeLogic.test.lockTilingScheme(t)}}}checkAllTilesWaterproofness(){if(!ke)return;const e=this._rootTiles;if(p(e))return;const t=e=>e?.renderData?.geometryInfo?.indices?.length>0,i=(e,i)=>{t(e)&&console.error(\"Tile[\",e.lij,\"] has geometry although parent[\",i.lij,\"] has geom\")},r=e=>{if(e.intersectsClippingArea)if(e.renderData&&!e.renderData.geometryState&&console.error(\"Tile[\",e.lij,\"] has renderData but not geometryState\"),e.renderData&&!e.renderData.geometryInfo&&console.error(\"Tile[\",e.lij,\"] has renderData but not geometryInfo\"),!e.renderData?.geometryInfo||(e.renderData.geometryInfo.indices?.length??0)>0||console.error(\"Tile[\",e.lij,\"] has renderData but no indices - geometryInfo: \",e.renderData.geometryInfo),t(e)){e.checkGeometryWaterproofness();for(const t of e.children)i(t,e)}else if(e.isLeaf)console.error(\"Tile[\",e.lij,\"] has no geometry and no children, from root to leaf\");else for(const t of e.children)r(t)},s=e=>{const t=e.parent?.visible??!0,i=e.visible;e.computeVisibility();const r=e.visible;if(i!==r&&t&&console.error(\" Tile[\",e.lij,\"] has out of date visibility: \",i,\" instead of \",r),!e.isLeaf)for(const a of e.children)s(a)};for(const a of e)r(a),s(a)}get isGlobal(){return this._isGlobal}get shading(){return this._shading}_updateShadingIfChanged(){const e=this.view?.map?.ground?.shading;e!==this._shading&&this._updateShading()}_updateShading(){const e=this.view?.map?.ground?.shading;this._shading=e,this.renderer&&(this.renderer.shading=e,this.renderer.setNeedsRender()),this._updateAllTileGeometries()}get isWebMercator(){return this._isWebMercator}get isWebMercatorOnPlateeCarree(){return this._isWebMercatorOnPlateeCarree}isEastEndWrap(e){return this.isGlobal&&e[2]===this.lijEastEnd(e[0])-1}isWestEndWrap(e){return this.isGlobal&&0===e[2]}lijEastEnd(e){return 2**(e+(u(this.spatialReference)&&this.spatialReference.isGeographic?1:0))}wrapEastWest(e){const t=this.lijEastEnd(e[0]),i=e[2];if(0<=i&&i<t)return e;if(!this.isGlobal)return null;const r=(i+(i<0?t:0))%t;return[e[0],e[1],r]}enableInternalChecks(e){Be(e)}enableWaterproofnessChecks(e){Ne(e)}};e([S()],nt.prototype,\"_renderer\",void 0),e([S({constructOnly:!0})],nt.prototype,\"_scaleRangeQueries\",void 0),e([S()],nt.prototype,\"_hasPendingUpdates\",void 0),e([S()],nt.prototype,\"_asyncWorkItems\",void 0),e([S()],nt.prototype,\"_allTilesDirty\",void 0),e([S()],nt.prototype,\"_allTilesSorted\",void 0),e([S()],nt.prototype,\"_viewChanged\",void 0),e([S({readOnly:!0})],nt.prototype,\"_watchUpdatingTracking\",void 0),e([S()],nt.prototype,\"_frameTask\",void 0),e([S({readOnly:!0})],nt.prototype,\"snapLevel\",null),e([S({readOnly:!0})],nt.prototype,\"lodSnapping\",null),e([S({constructOnly:!0})],nt.prototype,\"view\",void 0),e([S()],nt.prototype,\"_userClippingExtent\",null),e([S()],nt.prototype,\"_rootTilesExtent\",void 0),e([S({readOnly:!0})],nt.prototype,\"extent\",null),e([S({readOnly:!0})],nt.prototype,\"groundExtent\",null),e([S({readOnly:!0})],nt.prototype,\"_tilingSchemeExtent\",null),e([S({readOnly:!0})],nt.prototype,\"updating\",null),e([S({readOnly:!0})],nt.prototype,\"running\",null),e([S(ee)],nt.prototype,\"updatingProgress\",void 0),e([S({readOnly:!0})],nt.prototype,\"updatingProgressValue\",null),e([S()],nt.prototype,\"_maxNumUpdating\",void 0),e([S()],nt.prototype,\"baseOpacity\",null),e([S()],nt.prototype,\"hasCompositeBlendMode\",void 0),e([S({readOnly:!0})],nt.prototype,\"overlayManager\",void 0),e([S({readOnly:!0})],nt.prototype,\"viewingMode\",null),e([S()],nt.prototype,\"maxTextureScale\",void 0),e([S({readOnly:!0})],nt.prototype,\"ready\",null),e([S({value:pe.FRONT_TO_BACK})],nt.prototype,\"renderOrder\",null),e([S({readOnly:!0})],nt.prototype,\"rootTiles\",null),e([S()],nt.prototype,\"_rootTiles\",void 0),e([S({readOnly:!0})],nt.prototype,\"spatialReference\",null),e([S({type:t})],nt.prototype,\"backgroundColor\",null),e([S({value:!1})],nt.prototype,\"slicePlaneEnabled\",null),e([S({readOnly:!0})],nt.prototype,\"tilingScheme\",void 0),e([S({readOnly:!0})],nt.prototype,\"tilingSchemeLocked\",null),e([S({readOnly:!0})],nt.prototype,\"tilingSchemeLogic\",void 0),e([S({value:!0})],nt.prototype,\"velvetOverground\",null),e([S()],nt.prototype,\"wireframe\",null),e([S({value:!1})],nt.prototype,\"suspended\",null),e([S()],nt.prototype,\"textureFadeDuration\",null),e([S()],nt.prototype,\"visibleElevationBounds\",void 0),e([S()],nt.prototype,\"rootTileElevationBounds\",void 0),e([S()],nt.prototype,\"_layerViewsDirty\",void 0),e([S()],nt.prototype,\"renderPatchBorders\",null),e([S()],nt.prototype,\"visualizeNormals\",null),e([S()],nt.prototype,\"renderingDisabled\",null),nt=e([L(\"esri.views.3d.terrain.TerrainSurface\")],nt);const lt=nt;function ot(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function ht(e){const t=e.children;if(!t[0])return!1;for(const i of t)if(i.shouldLoad)return!0;for(const i of t)if(ht(i))return!0;return!1}function dt(e){return e.isLeaf&&(e.parent?.shouldLoad??!1)}const pt=U(),ut=I(),ct=[0,0,0],_t=new _,gt={spatialReference:null,extent:I(),context:\"ground\"},mt={spatialReference:null,extent:null,scale:0};function Tt(e,t,i){for(const r of e){if(!r.containsPointXY(t,i))continue;let e=r;for(;e&&!e.renderData;){const r=(t>e.extentMidX?1:0)+(i<e.extentMidY?2:0);e=e.children[r]}const s=e?.renderData?.geometryState.samplerData??null;return re(t,i,s)}return null}export{lt as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}