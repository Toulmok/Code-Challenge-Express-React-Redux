{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport e from \"../../../Graphic.js\";\nimport o from \"../../../core/Accessor.js\";\nimport { HandleOwnerMixin as r } from \"../../../core/HandleOwner.js\";\nimport { watch as n, initial as s } from \"../../../core/reactiveUtils.js\";\nimport { throttle as i } from \"../../../core/throttle.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as p } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport \"../../../popup/content/AttachmentsContent.js\";\nimport \"../../../popup/content/Content.js\";\nimport \"../../../popup/content/CustomContent.js\";\nimport \"../../../popup/content/ExpressionContent.js\";\nimport a from \"../../../popup/content/FieldsContent.js\";\nimport c from \"../../../popup/content/MediaContent.js\";\nimport \"../../../popup/content/RelationshipContent.js\";\nimport m from \"../../../popup/content/TextContent.js\";\nimport h from \"../../../popup/ElementExpressionInfo.js\";\nimport u from \"../FeatureContent/FeatureContentViewModel.js\";\nimport d from \"../FeatureFields/FeatureFieldsViewModel.js\";\nimport f from \"../FeatureMedia/FeatureMediaViewModel.js\";\nimport { loadArcadeUtils as y, createCompiledExpression as _ } from \"../support/arcadeFeatureUtils.js\";\nconst w = 1;\nlet j = class extends r(o) {\n  constructor(t) {\n    super(t), this._abortController = null, this.expressionInfo = null, this.graphic = null, this.contentElement = null, this.contentElementViewModel = null, this.interceptor = null, this.view = null, this._cancelQuery = () => {\n      const {\n        _abortController: t\n      } = this;\n      t && t.abort(), this._abortController = null;\n    }, this._createVM = () => {\n      const t = this.contentElement?.type;\n      this.contentElementViewModel?.destroy();\n      const e = \"fields\" === t ? new d() : \"media\" === t ? new f() : \"text\" === t ? new u() : null;\n      this._set(\"contentElementViewModel\", e);\n    }, this._compile = async () => {\n      this._cancelQuery();\n      const t = new AbortController();\n      this._abortController = t, await this._compileExpression(), this._abortController === t && (this._abortController = null);\n    }, this._compileThrottled = i(this._compile, w, this), this._compileExpression = async () => {\n      const {\n        expressionInfo: t,\n        graphic: e,\n        interceptor: o,\n        spatialReference: r,\n        map: n,\n        view: s,\n        _abortController: i\n      } = this;\n      if (!(t && e && r && n)) return void this._set(\"contentElement\", null);\n      const l = await y();\n      if (i !== this._abortController) return;\n      const p = await _({\n        arcadeUtils: l,\n        expressionInfo: t,\n        graphic: e,\n        interceptor: o,\n        map: n,\n        spatialReference: r,\n        view: s\n      });\n      if (!p || \"esri.arcade.Dictionary\" !== p.declaredClass) return void this._set(\"contentElement\", null);\n      const h = await p.castAsJsonAsync(i?.signal),\n        u = h?.type,\n        d = \"media\" === u ? c.fromJSON(h) : \"text\" === u ? m.fromJSON(h) : \"fields\" === u ? a.fromJSON(h) : null;\n      this._set(\"contentElement\", d);\n    }, this.handles.add([n(() => [this.expressionInfo, this.graphic, this.map, this.spatialReference, this.view], () => this._compileThrottled(), s), n(() => [this.contentElement], () => this._createVM(), s)]);\n  }\n  destroy() {\n    this._cancelQuery(), this.contentElementViewModel?.destroy(), this._set(\"contentElementViewModel\", null), this._set(\"contentElement\", null);\n  }\n  get spatialReference() {\n    return this.view?.spatialReference ?? null;\n  }\n  set spatialReference(t) {\n    this._override(\"spatialReference\", t);\n  }\n  get state() {\n    const {\n      _abortController: t,\n      contentElement: e,\n      contentElementViewModel: o\n    } = this;\n    return t ? \"loading\" : e || o ? \"ready\" : \"disabled\";\n  }\n  get map() {\n    return this.view?.map ?? null;\n  }\n  set map(t) {\n    this._override(\"map\", t);\n  }\n};\nt([l()], j.prototype, \"_abortController\", void 0), t([l({\n  type: h\n})], j.prototype, \"expressionInfo\", void 0), t([l({\n  type: e\n})], j.prototype, \"graphic\", void 0), t([l({\n  readOnly: !0\n})], j.prototype, \"contentElement\", void 0), t([l({\n  readOnly: !0\n})], j.prototype, \"contentElementViewModel\", void 0), t([l()], j.prototype, \"interceptor\", void 0), t([l()], j.prototype, \"spatialReference\", null), t([l({\n  readOnly: !0\n})], j.prototype, \"state\", null), t([l()], j.prototype, \"map\", null), t([l()], j.prototype, \"view\", void 0), j = t([p(\"esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel\")], j);\nconst C = j;\nexport { C as default };","map":{"version":3,"names":["_","t","e","o","HandleOwnerMixin","r","watch","n","initial","s","throttle","i","property","l","subclass","p","a","c","m","h","u","d","f","loadArcadeUtils","y","createCompiledExpression","w","j","constructor","_abortController","expressionInfo","graphic","contentElement","contentElementViewModel","interceptor","view","_cancelQuery","abort","_createVM","type","destroy","_set","_compile","AbortController","_compileExpression","_compileThrottled","spatialReference","map","arcadeUtils","declaredClass","castAsJsonAsync","signal","fromJSON","handles","add","_override","state","prototype","readOnly","C","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/widgets/Feature/FeatureExpression/FeatureExpressionViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../Graphic.js\";import o from\"../../../core/Accessor.js\";import{HandleOwnerMixin as r}from\"../../../core/HandleOwner.js\";import{watch as n,initial as s}from\"../../../core/reactiveUtils.js\";import{throttle as i}from\"../../../core/throttle.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../popup/content/AttachmentsContent.js\";import\"../../../popup/content/Content.js\";import\"../../../popup/content/CustomContent.js\";import\"../../../popup/content/ExpressionContent.js\";import a from\"../../../popup/content/FieldsContent.js\";import c from\"../../../popup/content/MediaContent.js\";import\"../../../popup/content/RelationshipContent.js\";import m from\"../../../popup/content/TextContent.js\";import h from\"../../../popup/ElementExpressionInfo.js\";import u from\"../FeatureContent/FeatureContentViewModel.js\";import d from\"../FeatureFields/FeatureFieldsViewModel.js\";import f from\"../FeatureMedia/FeatureMediaViewModel.js\";import{loadArcadeUtils as y,createCompiledExpression as _}from\"../support/arcadeFeatureUtils.js\";const w=1;let j=class extends(r(o)){constructor(t){super(t),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{const t=this.contentElement?.type;this.contentElementViewModel?.destroy();const e=\"fields\"===t?new d:\"media\"===t?new f:\"text\"===t?new u:null;this._set(\"contentElementViewModel\",e)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=i(this._compile,w,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:e,interceptor:o,spatialReference:r,map:n,view:s,_abortController:i}=this;if(!(t&&e&&r&&n))return void this._set(\"contentElement\",null);const l=await y();if(i!==this._abortController)return;const p=await _({arcadeUtils:l,expressionInfo:t,graphic:e,interceptor:o,map:n,spatialReference:r,view:s});if(!p||\"esri.arcade.Dictionary\"!==p.declaredClass)return void this._set(\"contentElement\",null);const h=await p.castAsJsonAsync(i?.signal),u=h?.type,d=\"media\"===u?c.fromJSON(h):\"text\"===u?m.fromJSON(h):\"fields\"===u?a.fromJSON(h):null;this._set(\"contentElement\",d)},this.handles.add([n((()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view]),(()=>this._compileThrottled()),s),n((()=>[this.contentElement]),(()=>this._createVM()),s)])}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set(\"contentElementViewModel\",null),this._set(\"contentElement\",null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(t){this._override(\"spatialReference\",t)}get state(){const{_abortController:t,contentElement:e,contentElementViewModel:o}=this;return t?\"loading\":e||o?\"ready\":\"disabled\"}get map(){return this.view?.map??null}set map(t){this._override(\"map\",t)}};t([l()],j.prototype,\"_abortController\",void 0),t([l({type:h})],j.prototype,\"expressionInfo\",void 0),t([l({type:e})],j.prototype,\"graphic\",void 0),t([l({readOnly:!0})],j.prototype,\"contentElement\",void 0),t([l({readOnly:!0})],j.prototype,\"contentElementViewModel\",void 0),t([l()],j.prototype,\"interceptor\",void 0),t([l()],j.prototype,\"spatialReference\",null),t([l({readOnly:!0})],j.prototype,\"state\",null),t([l()],j.prototype,\"map\",null),t([l()],j.prototype,\"view\",void 0),j=t([p(\"esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel\")],j);const C=j;export{C as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}