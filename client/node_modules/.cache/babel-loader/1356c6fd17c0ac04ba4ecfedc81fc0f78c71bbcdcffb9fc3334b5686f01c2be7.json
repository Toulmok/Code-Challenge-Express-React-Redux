{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as o, removeMaybe as t } from \"../../../../core/maybe.js\";\nimport { throwIfAborted as e, onAbort as r } from \"../../../../core/promiseUtils.js\";\nimport { DefaultLoadingContext as s } from \"../../glTF/DefaultLoadingContext.js\";\nimport { loadGLTF as a } from \"../../glTF/loader.js\";\nimport { load as i } from \"./wosrLoader.js\";\nclass l {\n  constructor(o) {\n    this._gltfLoading = new Map(), this._wosrLoading = new Map(), this._gltfMemCache = o(\"gltf-resources\", () => {}), this._wosrMemCache = o(\"wosr-resources\", () => {});\n  }\n  destroy() {\n    this._gltfLoading.forEach(o => o.abortController.abort()), this._wosrLoading.forEach(o => o.abortController.abort()), this._gltfMemCache.destroy(), this._wosrMemCache.destroy();\n  }\n  loadGLTF(t, e, r) {\n    const i = r ? `gltfPBR:${t}` : `gltf:${t}`,\n      l = this._gltfMemCache.get(i);\n    return o(l) ? Promise.resolve(l) : this._loadOnce(this._gltfLoading, this._gltfMemCache, i, o => a(new s(o.streamDataRequester), t, o, r), e);\n  }\n  loadWOSR(t, e) {\n    const r = `wosr:${t}:${e.disableTextures}`,\n      s = this._wosrMemCache.get(r);\n    return o(s) ? Promise.resolve(s) : this._loadOnce(this._wosrLoading, this._wosrMemCache, r, o => i(t, o), e);\n  }\n  async _loadOnce(o, s, a, i, l) {\n    e(l);\n    const n = r(l, () => this._abortLoad(o, a));\n    let c = o.get(a);\n    if (c) c.refCount++;else {\n      const t = new AbortController();\n      c = {\n        refCount: 1,\n        abortController: t,\n        promise: i({\n          ...l,\n          signal: t.signal\n        })\n      }, o.set(a, c);\n    }\n    try {\n      const r = await c.promise;\n      return s.put(a, r, r.size), o.delete(a), e(l), r;\n    } finally {\n      t(n);\n    }\n  }\n  _abortLoad(t, e) {\n    const r = t.get(e);\n    if (o(r)) {\n      if (--r.refCount > 0) return;\n    }\n    t.delete(e), o(r) && r.abortController.abort();\n  }\n}\nexport { l as ObjectResourceCache };","map":{"version":3,"names":["isSome","o","removeMaybe","t","throwIfAborted","e","onAbort","r","DefaultLoadingContext","s","loadGLTF","a","load","i","l","constructor","_gltfLoading","Map","_wosrLoading","_gltfMemCache","_wosrMemCache","destroy","forEach","abortController","abort","get","Promise","resolve","_loadOnce","streamDataRequester","loadWOSR","disableTextures","n","_abortLoad","c","refCount","AbortController","promise","signal","set","put","size","delete","ObjectResourceCache"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/ObjectResourceCache.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as o,removeMaybe as t}from\"../../../../core/maybe.js\";import{throwIfAborted as e,onAbort as r}from\"../../../../core/promiseUtils.js\";import{DefaultLoadingContext as s}from\"../../glTF/DefaultLoadingContext.js\";import{loadGLTF as a}from\"../../glTF/loader.js\";import{load as i}from\"./wosrLoader.js\";class l{constructor(o){this._gltfLoading=new Map,this._wosrLoading=new Map,this._gltfMemCache=o(\"gltf-resources\",(()=>{})),this._wosrMemCache=o(\"wosr-resources\",(()=>{}))}destroy(){this._gltfLoading.forEach((o=>o.abortController.abort())),this._wosrLoading.forEach((o=>o.abortController.abort())),this._gltfMemCache.destroy(),this._wosrMemCache.destroy()}loadGLTF(t,e,r){const i=r?`gltfPBR:${t}`:`gltf:${t}`,l=this._gltfMemCache.get(i);return o(l)?Promise.resolve(l):this._loadOnce(this._gltfLoading,this._gltfMemCache,i,(o=>a(new s(o.streamDataRequester),t,o,r)),e)}loadWOSR(t,e){const r=`wosr:${t}:${e.disableTextures}`,s=this._wosrMemCache.get(r);return o(s)?Promise.resolve(s):this._loadOnce(this._wosrLoading,this._wosrMemCache,r,(o=>i(t,o)),e)}async _loadOnce(o,s,a,i,l){e(l);const n=r(l,(()=>this._abortLoad(o,a)));let c=o.get(a);if(c)c.refCount++;else{const t=new AbortController;c={refCount:1,abortController:t,promise:i({...l,signal:t.signal})},o.set(a,c)}try{const r=await c.promise;return s.put(a,r,r.size),o.delete(a),e(l),r}finally{t(n)}}_abortLoad(t,e){const r=t.get(e);if(o(r)){if(--r.refCount>0)return}t.delete(e),o(r)&&r.abortController.abort()}}export{l as ObjectResourceCache};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}