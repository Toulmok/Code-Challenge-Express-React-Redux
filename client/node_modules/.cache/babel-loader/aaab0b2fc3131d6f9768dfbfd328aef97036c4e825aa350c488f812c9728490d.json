{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as t, isNone as o } from \"../../../../../core/maybe.js\";\nimport { t as s } from \"../../../../../chunks/vec3.js\";\nimport { c as n } from \"../../../../../chunks/vec3f64.js\";\nimport { create as e } from \"../../../../../geometry/support/aaBoundingBox.js\";\nimport { BufferViewVec3f as i } from \"../../../../../geometry/support/buffer/BufferView.js\";\nimport { componentMinimalSizeForIntersectionData as r, ComponentIntersectionData as p } from \"./ComponentIntersectionData.js\";\nimport { Attribute as m } from \"../../lib/Attribute.js\";\nimport { getVisibility as a } from \"../../lib/ComponentUtils.js\";\nimport { generateDefaultIndexArray as c } from \"../../lib/Indices.js\";\nimport { computeInvDir as h, intersectAabbInvDir as f, intersectTriangles as b } from \"../../materials/internal/MaterialUtil.js\";\nclass _ {\n  constructor(o, s) {\n    this._indices = t(o.indices) ? o.indices : c(o.positions.length / 3), this._positions = new i(o.positions), this._components = s, this._componentIntersectionData = new Array(s.count);\n  }\n  getComponentAabb(o, s) {\n    if (t(this._perComponentAabbs)) {\n      for (let t = 0; t < 6; t++) s[t] = this._perComponentAabbs[6 * o + t];\n      return s;\n    }\n    return this._computePerComponentAabbs(), this.getComponentAabb(o, s);\n  }\n  getComponentPositions(t, o) {\n    o.indices = this._indices, o.data = this._positions.typedBuffer, o.stride = this._positions.typedBufferStride, o.startIndex = this._components.offsets[t], o.endIndex = this._components.offsets[t + 1];\n  }\n  intersect(n, e, i, c, _, l, A) {\n    const C = new m(this._positions.typedBuffer, 3, !1, this._positions.typedBufferStride),\n      y = this._indices,\n      g = this._components.offsets,\n      j = h(n, e, d),\n      B = n[2],\n      I = e[2];\n    this._components.visibility.forEachComponent(m => {\n      if (!a(this._components.pickability, m)) return !0;\n      const h = this.getComponentAabb(m, u);\n      if (t(l)) {\n        const o = l[m];\n        t(_) ? _.componentOffset = o : (n[2] = B - o, e[2] = I - o);\n      }\n      if (t(_) && _.applyToAabb(h), !f(h, n, j, i)) return !0;\n      const d = g[m] / 3,\n        x = g[m + 1] / 3,\n        M = x - d,\n        w = (t, o, n) => A(m, t, s(o, o, c), n);\n      return o(_) && M > r ? (null == this._componentIntersectionData[m] && (this._componentIntersectionData[m] = new p(this._indices, d, x, C)), this._componentIntersectionData[m].intersectRay({\n        r0: n,\n        r1: e\n      }, w)) : b(n, e, d, x, y, C, void 0, _, w), !0;\n    });\n  }\n  _computePerComponentAabbs() {\n    const t = this._components.count;\n    this._perComponentAabbs = new Float32Array(6 * t);\n    const o = this._indices,\n      s = this._positions.typedBuffer,\n      n = this._positions.typedBufferStride,\n      e = this._components.offsets;\n    let i = 0;\n    for (let r = 0; r < t; r++) {\n      const t = e[r],\n        p = e[r + 1];\n      let m = 1 / 0,\n        a = 1 / 0,\n        c = 1 / 0,\n        h = -1 / 0,\n        f = -1 / 0,\n        b = -1 / 0;\n      for (let e = t; e < p; e++) {\n        const t = o[e] * n,\n          i = s[t],\n          r = s[t + 1],\n          p = s[t + 2];\n        m = Math.min(m, i), a = Math.min(a, r), c = Math.min(c, p), h = Math.max(h, i), f = Math.max(f, r), b = Math.max(b, p);\n      }\n      this._perComponentAabbs[i++] = m, this._perComponentAabbs[i++] = a, this._perComponentAabbs[i++] = c, this._perComponentAabbs[i++] = h, this._perComponentAabbs[i++] = f, this._perComponentAabbs[i++] = b;\n    }\n  }\n  get positions() {\n    return this._positions;\n  }\n  get indices() {\n    return this._indices;\n  }\n}\nconst d = n(),\n  u = e();\nexport { _ as default };","map":{"version":3,"names":["isSome","t","isNone","o","s","c","n","create","e","BufferViewVec3f","i","componentMinimalSizeForIntersectionData","r","ComponentIntersectionData","p","Attribute","m","getVisibility","a","generateDefaultIndexArray","computeInvDir","h","intersectAabbInvDir","f","intersectTriangles","b","_","constructor","_indices","indices","positions","length","_positions","_components","_componentIntersectionData","Array","count","getComponentAabb","_perComponentAabbs","_computePerComponentAabbs","getComponentPositions","data","typedBuffer","stride","typedBufferStride","startIndex","offsets","endIndex","intersect","l","A","C","y","g","j","d","B","I","visibility","forEachComponent","pickability","u","componentOffset","applyToAabb","x","M","w","intersectRay","r0","r1","Float32Array","Math","min","max","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/IntersectionGeometry.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as o}from\"../../../../../core/maybe.js\";import{t as s}from\"../../../../../chunks/vec3.js\";import{c as n}from\"../../../../../chunks/vec3f64.js\";import{create as e}from\"../../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as i}from\"../../../../../geometry/support/buffer/BufferView.js\";import{componentMinimalSizeForIntersectionData as r,ComponentIntersectionData as p}from\"./ComponentIntersectionData.js\";import{Attribute as m}from\"../../lib/Attribute.js\";import{getVisibility as a}from\"../../lib/ComponentUtils.js\";import{generateDefaultIndexArray as c}from\"../../lib/Indices.js\";import{computeInvDir as h,intersectAabbInvDir as f,intersectTriangles as b}from\"../../materials/internal/MaterialUtil.js\";class _{constructor(o,s){this._indices=t(o.indices)?o.indices:c(o.positions.length/3),this._positions=new i(o.positions),this._components=s,this._componentIntersectionData=new Array(s.count)}getComponentAabb(o,s){if(t(this._perComponentAabbs)){for(let t=0;t<6;t++)s[t]=this._perComponentAabbs[6*o+t];return s}return this._computePerComponentAabbs(),this.getComponentAabb(o,s)}getComponentPositions(t,o){o.indices=this._indices,o.data=this._positions.typedBuffer,o.stride=this._positions.typedBufferStride,o.startIndex=this._components.offsets[t],o.endIndex=this._components.offsets[t+1]}intersect(n,e,i,c,_,l,A){const C=new m(this._positions.typedBuffer,3,!1,this._positions.typedBufferStride),y=this._indices,g=this._components.offsets,j=h(n,e,d),B=n[2],I=e[2];this._components.visibility.forEachComponent((m=>{if(!a(this._components.pickability,m))return!0;const h=this.getComponentAabb(m,u);if(t(l)){const o=l[m];t(_)?_.componentOffset=o:(n[2]=B-o,e[2]=I-o)}if(t(_)&&_.applyToAabb(h),!f(h,n,j,i))return!0;const d=g[m]/3,x=g[m+1]/3,M=x-d,w=(t,o,n)=>A(m,t,s(o,o,c),n);return o(_)&&M>r?(null==this._componentIntersectionData[m]&&(this._componentIntersectionData[m]=new p(this._indices,d,x,C)),this._componentIntersectionData[m].intersectRay({r0:n,r1:e},w)):b(n,e,d,x,y,C,void 0,_,w),!0}))}_computePerComponentAabbs(){const t=this._components.count;this._perComponentAabbs=new Float32Array(6*t);const o=this._indices,s=this._positions.typedBuffer,n=this._positions.typedBufferStride,e=this._components.offsets;let i=0;for(let r=0;r<t;r++){const t=e[r],p=e[r+1];let m=1/0,a=1/0,c=1/0,h=-1/0,f=-1/0,b=-1/0;for(let e=t;e<p;e++){const t=o[e]*n,i=s[t],r=s[t+1],p=s[t+2];m=Math.min(m,i),a=Math.min(a,r),c=Math.min(c,p),h=Math.max(h,i),f=Math.max(f,r),b=Math.max(b,p)}this._perComponentAabbs[i++]=m,this._perComponentAabbs[i++]=a,this._perComponentAabbs[i++]=c,this._perComponentAabbs[i++]=h,this._perComponentAabbs[i++]=f,this._perComponentAabbs[i++]=b}}get positions(){return this._positions}get indices(){return this._indices}}const d=n(),u=e();export{_ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}