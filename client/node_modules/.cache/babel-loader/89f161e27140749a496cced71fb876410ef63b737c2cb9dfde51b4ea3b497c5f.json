{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../core/has.js\";\nconst e = new Set([\"+\", \"-\", \"*\", \"/\", \"(\", \")\"]);\nfunction t(t, n) {\n  (t = t.replace(/ /g, \"\")).startsWith(\"-\") && (t = \"0\" + t), t.startsWith(\"+\") && (t = t.slice(1, t.length));\n  const r = t.split(\"\"),\n    l = [],\n    o = [];\n  let s = \"\";\n  for (let a = 0; a < r.length; a++) {\n    const t = r[a];\n    if (e.has(t)) \"\" !== s && o.push(parseFloat(s)), l.push(t), s = \"\";else {\n      if (\"b\" === t.toLowerCase()) {\n        a++, s = t.concat(r[a]), o.push(n[parseInt(s[1], 10) - 1]), s = \"\";\n        continue;\n      }\n      s = s.concat(t), a === r.length - 1 && o.push(parseFloat(s));\n    }\n  }\n  return {\n    ops: l,\n    nums: o\n  };\n}\nfunction n(e, t, n, r) {\n  if (\"number\" == typeof n && \"number\" == typeof r) return n + r;\n  let l;\n  if (\"number\" == typeof n) {\n    l = r.length;\n    const e = n;\n    (n = new Float32Array(l)).fill(e);\n  } else if (l = n.length, r.constructor === Number) {\n    const e = r;\n    (r = new Float32Array(l)).fill(e);\n  }\n  const o = new Float32Array(l);\n  switch (t) {\n    case \"+\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (o[t] = n[t] + r[t]);\n      break;\n    case \"-\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (o[t] = n[t] - r[t]);\n      break;\n    case \"*\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (o[t] = n[t] * r[t]);\n      break;\n    case \"/\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && r[t] && (o[t] = n[t] / r[t]);\n      break;\n    case \"(\":\n    case \")\":\n      throw new Error(\"encountered error with custom band index equation\");\n  }\n  return o;\n}\nfunction r(e, t) {\n  e.splice(t, 1);\n  let n = 0,\n    r = 0;\n  do {\n    n = 0, r = 0;\n    for (let t = 0; t < e.length; t++) if (\"(\" === e[t]) n = t;else if (\")\" === e[t]) {\n      r = t;\n      break;\n    }\n    r === n + 1 && e.splice(n, 2);\n  } while (r === n + 1);\n  return e;\n}\nfunction l(e) {\n  if (1 === e.length) return {\n    opIndex: 0,\n    numIndex: 0\n  };\n  let t = 0,\n    n = 0;\n  for (let s = 0; s < e.length; s++) if (\"(\" === e[s]) t = s;else if (\")\" === e[s]) {\n    n = s;\n    break;\n  }\n  const r = 0 === n ? e : e.slice(t + 1, n);\n  let l = -1;\n  for (let s = 0; s < r.length; s++) if (\"*\" === r[s] || \"/\" === r[s]) {\n    l = s;\n    break;\n  }\n  if (l > -1) n > 0 && (l += t + 1);else {\n    for (let e = 0; e < r.length; e++) if (\"+\" === r[e] || \"-\" === r[e]) {\n      l = e;\n      break;\n    }\n    n > 0 && (l += t + 1);\n  }\n  let o = 0;\n  for (let s = 0; s < l; s++) \"(\" === e[s] && o++;\n  return {\n    opIndex: l,\n    numIndex: l - o\n  };\n}\nfunction o(e, o, s) {\n  let a,\n    {\n      ops: f,\n      nums: i\n    } = t(s, o);\n  if (0 === f.length) {\n    const e = 1 === i.length ? i[0] : o[0];\n    if (e instanceof Float32Array) return [e];\n    const t = new Float32Array(o[0].length);\n    return \"number\" == typeof e ? t.fill(e) : t.set(e), [t];\n  }\n  for (; f.length > 0;) {\n    const {\n      numIndex: t,\n      opIndex: o\n    } = l(f);\n    if (a = n(e, f[o], i[t], i[t + 1]), 1 === f.length) break;\n    f = r(f, o), i.splice(t, 2, a);\n  }\n  return [a];\n}\nexport { o as calculateCustomBandIndex };","map":{"version":3,"names":["e","Set","t","n","replace","startsWith","slice","length","r","split","l","o","s","a","has","push","parseFloat","toLowerCase","concat","parseInt","ops","nums","Float32Array","fill","constructor","Number","Error","splice","opIndex","numIndex","f","i","set","calculateCustomBandIndex"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/support/rasterFunctions/customBandIndexUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";const e=new Set([\"+\",\"-\",\"*\",\"/\",\"(\",\")\"]);function t(t,n){(t=t.replace(/ /g,\"\")).startsWith(\"-\")&&(t=\"0\"+t),t.startsWith(\"+\")&&(t=t.slice(1,t.length));const r=t.split(\"\"),l=[],o=[];let s=\"\";for(let a=0;a<r.length;a++){const t=r[a];if(e.has(t))\"\"!==s&&o.push(parseFloat(s)),l.push(t),s=\"\";else{if(\"b\"===t.toLowerCase()){a++,s=t.concat(r[a]),o.push(n[parseInt(s[1],10)-1]),s=\"\";continue}s=s.concat(t),a===r.length-1&&o.push(parseFloat(s))}}return{ops:l,nums:o}}function n(e,t,n,r){if(\"number\"==typeof n&&\"number\"==typeof r)return n+r;let l;if(\"number\"==typeof n){l=r.length;const e=n;(n=new Float32Array(l)).fill(e)}else if(l=n.length,r.constructor===Number){const e=r;(r=new Float32Array(l)).fill(e)}const o=new Float32Array(l);switch(t){case\"+\":for(let t=0;t<l;t++)(null==e||e[t])&&(o[t]=n[t]+r[t]);break;case\"-\":for(let t=0;t<l;t++)(null==e||e[t])&&(o[t]=n[t]-r[t]);break;case\"*\":for(let t=0;t<l;t++)(null==e||e[t])&&(o[t]=n[t]*r[t]);break;case\"/\":for(let t=0;t<l;t++)(null==e||e[t])&&r[t]&&(o[t]=n[t]/r[t]);break;case\"(\":case\")\":throw new Error(\"encountered error with custom band index equation\")}return o}function r(e,t){e.splice(t,1);let n=0,r=0;do{n=0,r=0;for(let t=0;t<e.length;t++)if(\"(\"===e[t])n=t;else if(\")\"===e[t]){r=t;break}r===n+1&&e.splice(n,2)}while(r===n+1);return e}function l(e){if(1===e.length)return{opIndex:0,numIndex:0};let t=0,n=0;for(let s=0;s<e.length;s++)if(\"(\"===e[s])t=s;else if(\")\"===e[s]){n=s;break}const r=0===n?e:e.slice(t+1,n);let l=-1;for(let s=0;s<r.length;s++)if(\"*\"===r[s]||\"/\"===r[s]){l=s;break}if(l>-1)n>0&&(l+=t+1);else{for(let e=0;e<r.length;e++)if(\"+\"===r[e]||\"-\"===r[e]){l=e;break}n>0&&(l+=t+1)}let o=0;for(let s=0;s<l;s++)\"(\"===e[s]&&o++;return{opIndex:l,numIndex:l-o}}function o(e,o,s){let a,{ops:f,nums:i}=t(s,o);if(0===f.length){const e=1===i.length?i[0]:o[0];if(e instanceof Float32Array)return[e];const t=new Float32Array(o[0].length);return\"number\"==typeof e?t.fill(e):t.set(e),[t]}for(;f.length>0;){const{numIndex:t,opIndex:o}=l(f);if(a=n(e,f[o],i[t],i[t+1]),1===f.length)break;f=r(f,o),i.splice(t,2,a)}return[a]}export{o as calculateCustomBandIndex};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}