{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { assert as t } from \"../webgl-engine/lib/Util.js\";\nclass s {\n  constructor(t) {\n    this.client = t, this._cancelled = !1, this.size = 0, this.duration = 0;\n  }\n}\nclass e {\n  constructor(t) {\n    this.typeWorkerQuota = t, this.tasks = new Array(), this.numWorkers = 0, this.statistics = new r();\n  }\n}\nclass r {\n  constructor() {\n    this.requests = 0, this.size = 0, this.duration = 0, this.speed = 0;\n  }\n}\nclass i {\n  constructor(t, s, r, i) {\n    this._workerFunc = t, this._callbackFunc = s, this._maxTotalNumWorkers = r, this._totalNumWorkers = 0, this._clients = i.map(t => new e(t));\n  }\n  destroy() {\n    this._clients.length = 0;\n  }\n  hasQuota(t) {\n    const s = this._clients[t];\n    return !!s && (this._totalNumWorkers < this._maxTotalNumWorkers || s.numWorkers + s.tasks.length < s.typeWorkerQuota);\n  }\n  push(t) {\n    const s = this._clients[t.client];\n    s && (this._totalNumWorkers < this._maxTotalNumWorkers ? (s.numWorkers++, this._totalNumWorkers++, this._workerFunc(t, (t, s) => this._taskCallback(t, s))) : s.tasks.push(t));\n  }\n  cancel(t) {\n    this._taskFinished(t), t._cancelled = !0;\n  }\n  _taskFinished(s) {\n    const e = this._clients[s.client];\n    this._totalNumWorkers--, e.numWorkers--, e.statistics.requests++, e.statistics.size += s.size || 0, e.statistics.duration += s.duration || 0, e.statistics.speed = e.statistics.duration > 0 ? e.statistics.size / e.statistics.duration : 0, t(e.numWorkers >= 0), this._next();\n  }\n  _next() {\n    for (const t of this._clients) if (t && t.numWorkers < t.typeWorkerQuota && this._processQueue(t)) return;\n    for (const t of this._clients) if (t && this._processQueue(t)) return;\n  }\n  _processQueue(t) {\n    for (; t.tasks.length > 0;) if (this._workerFunc(t.tasks.shift(), (t, s) => this._taskCallback(t, s))) return t.numWorkers++, this._totalNumWorkers++, !0;\n    return !1;\n  }\n  _taskCallback(t, s) {\n    t._cancelled || (this._callbackFunc(t, s), this._taskFinished(t));\n  }\n  getStatsForType(t) {\n    const s = this._clients[t];\n    return s ? {\n      quota: s.typeWorkerQuota,\n      workers: s.numWorkers,\n      queueSize: s.tasks.length,\n      requestStats: s.statistics\n    } : null;\n  }\n  get test() {\n    const t = this;\n    return {\n      set workerFunc(s) {\n        t._workerFunc = s;\n      }\n    };\n  }\n}\nexport { i as AsyncWorkerQueue, s as BaseTask };","map":{"version":3,"names":["assert","t","s","constructor","client","_cancelled","size","duration","e","typeWorkerQuota","tasks","Array","numWorkers","statistics","r","requests","speed","i","_workerFunc","_callbackFunc","_maxTotalNumWorkers","_totalNumWorkers","_clients","map","destroy","length","hasQuota","push","_taskCallback","cancel","_taskFinished","_next","_processQueue","shift","getStatsForType","quota","workers","queueSize","requestStats","test","workerFunc","AsyncWorkerQueue","BaseTask"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/AsyncWorkerQueue.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{assert as t}from\"../webgl-engine/lib/Util.js\";class s{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0}}class e{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new r}}class r{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class i{constructor(t,s,r,i){this._workerFunc=t,this._callbackFunc=s,this._maxTotalNumWorkers=r,this._totalNumWorkers=0,this._clients=i.map((t=>new e(t)))}destroy(){this._clients.length=0}hasQuota(t){const s=this._clients[t];return!!s&&(this._totalNumWorkers<this._maxTotalNumWorkers||s.numWorkers+s.tasks.length<s.typeWorkerQuota)}push(t){const s=this._clients[t.client];s&&(this._totalNumWorkers<this._maxTotalNumWorkers?(s.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,((t,s)=>this._taskCallback(t,s)))):s.tasks.push(t))}cancel(t){this._taskFinished(t),t._cancelled=!0}_taskFinished(s){const e=this._clients[s.client];this._totalNumWorkers--,e.numWorkers--,e.statistics.requests++,e.statistics.size+=s.size||0,e.statistics.duration+=s.duration||0,e.statistics.speed=e.statistics.duration>0?e.statistics.size/e.statistics.duration:0,t(e.numWorkers>=0),this._next()}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),((t,s)=>this._taskCallback(t,s))))return t.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(t,s){t._cancelled||(this._callbackFunc(t,s),this._taskFinished(t))}getStatsForType(t){const s=this._clients[t];return s?{quota:s.typeWorkerQuota,workers:s.numWorkers,queueSize:s.tasks.length,requestStats:s.statistics}:null}get test(){const t=this;return{set workerFunc(s){t._workerFunc=s}}}}export{i as AsyncWorkerQueue,s as BaseTask};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}