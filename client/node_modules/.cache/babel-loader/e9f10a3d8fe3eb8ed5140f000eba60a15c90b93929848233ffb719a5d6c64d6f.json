{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { k as e } from \"../../../chunks/vec2.js\";\nclass t {\n  constructor(e, t, i) {\n    this.maxSize = e, this._tileInfoView = t, this._removedFunc = i, this._tilePerId = new Map(), this._tileKeysPerLevel = [];\n  }\n  has(e) {\n    return this._tilePerId.has(e);\n  }\n  get(e) {\n    return this._tilePerId.get(e);\n  }\n  pop(e) {\n    const t = this._tilePerId.get(e);\n    if (!t) return;\n    const s = t.key.level,\n      r = this._tileKeysPerLevel[s];\n    i(this._tilePerId, e);\n    for (let i = 0; i < r.length; i++) if (r[i].id === e) {\n      r.splice(i, 1);\n      break;\n    }\n    return t.visible = !0, t;\n  }\n  add(e) {\n    e.visible = !1;\n    const t = e.key,\n      i = t.id;\n    if (this._tilePerId.has(i)) return;\n    this._tilePerId.set(i, e);\n    const s = t.level;\n    this._tileKeysPerLevel[s] || (this._tileKeysPerLevel[s] = []), this._tileKeysPerLevel[s].push(t);\n  }\n  prune(e, t, i) {\n    let s = this._tilePerId.size;\n    if (s <= this.maxSize) return;\n    let r = this._tileKeysPerLevel.length - 1;\n    for (; s > this.maxSize && r >= 0;) r !== e && (s = this._pruneAroundCenterTile(s, t, i, r)), r--;\n    s > this.maxSize && (s = this._pruneAroundCenterTile(s, t, i, e));\n  }\n  _pruneAroundCenterTile(t, i, s, r) {\n    const l = this._tileKeysPerLevel[r];\n    if (!l || 0 === l.length) return t;\n    const {\n        size: n,\n        origin: h\n      } = this._tileInfoView.tileInfo,\n      o = s * n[0],\n      _ = s * n[1],\n      d = [0, 0],\n      u = [0, 0];\n    for (l.sort((t, s) => (d[0] = h.x + o * (t.col + .5), d[1] = h.y - _ * (t.row + .5), u[0] = h.x + o * (s.col + .5), u[1] = h.y - _ * (s.row + .5), e(d, i) - e(u, i))); l.length > 0;) {\n      const e = l.pop();\n      if (this._removeTile(e.id), --t === this.maxSize) break;\n    }\n    return t;\n  }\n  _removeTile(e) {\n    const t = this._tilePerId.get(e);\n    this._removedFunc && t && this._removedFunc(t), i(this._tilePerId, e);\n  }\n}\nfunction i(e, t) {\n  e.delete(t);\n}\nexport { t as default };","map":{"version":3,"names":["k","e","t","constructor","i","maxSize","_tileInfoView","_removedFunc","_tilePerId","Map","_tileKeysPerLevel","has","get","pop","s","key","level","r","length","id","splice","visible","add","set","push","prune","size","_pruneAroundCenterTile","l","n","origin","h","tileInfo","o","_","d","u","sort","x","col","y","row","_removeTile","delete","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/views/2d/tiling/TileCache.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{k as e}from\"../../../chunks/vec2.js\";class t{constructor(e,t,i){this.maxSize=e,this._tileInfoView=t,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return;const s=t.key.level,r=this._tileKeysPerLevel[s];i(this._tilePerId,e);for(let i=0;i<r.length;i++)if(r[i].id===e){r.splice(i,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=t.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(t)}prune(e,t,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let r=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&r>=0;)r!==e&&(s=this._pruneAroundCenterTile(s,t,i,r)),r--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,t,i,e))}_pruneAroundCenterTile(t,i,s,r){const l=this._tileKeysPerLevel[r];if(!l||0===l.length)return t;const{size:n,origin:h}=this._tileInfoView.tileInfo,o=s*n[0],_=s*n[1],d=[0,0],u=[0,0];for(l.sort(((t,s)=>(d[0]=h.x+o*(t.col+.5),d[1]=h.y-_*(t.row+.5),u[0]=h.x+o*(s.col+.5),u[1]=h.y-_*(s.row+.5),e(d,i)-e(u,i))));l.length>0;){const e=l.pop();if(this._removeTile(e.id),--t===this.maxSize)break}return t}_removeTile(e){const t=this._tilePerId.get(e);this._removedFunc&&t&&this._removedFunc(t),i(this._tilePerId,e)}}function i(e,t){e.delete(t)}export{t as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}