{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../Basemap.js\";\nimport i from \"../Viewpoint.js\";\nimport { result as n } from \"../core/asyncUtils.js\";\nimport r from \"../core/Collection.js\";\nimport { referenceSetter as o } from \"../core/collectionUtils.js\";\nimport { JSONSupport as s } from \"../core/JSONSupport.js\";\nimport a from \"../core/Logger.js\";\nimport { destroyMaybe as l, isSome as p, isNone as m, removeMaybe as h } from \"../core/maybe.js\";\nimport { eachAlways as c, onAbortOrThrow as d, isAbortError as u } from \"../core/promiseUtils.js\";\nimport { when as g } from \"../core/reactiveUtils.js\";\nimport { property as y } from \"../core/accessorSupport/decorators/property.js\";\nimport { cast as v } from \"../core/accessorSupport/decorators/cast.js\";\nimport \"../core/arrayUtils.js\";\nimport { subclass as b } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { ensureType as w } from \"../core/accessorSupport/ensureType.js\";\nimport { d as f } from \"../chunks/vec3.js\";\nimport { c as T } from \"../chunks/vec3f64.js\";\nimport L from \"../layers/Layer.js\";\nimport { isOperationalLayer as C } from \"../layers/mixins/OperationalLayer.js\";\nimport { ensureType as j, clonePreservingTiledLayers as _ } from \"../support/basemapUtils.js\";\nimport { moduloPositive as S } from \"../views/3d/support/mathUtils.js\";\nimport { toCamera as E } from \"../views/3d/support/viewpointUtils.js\";\nimport { TaskPriority as k } from \"../views/support/Scheduler.js\";\nimport { SlideThumbnail as U } from \"../webdoc/support/SlideThumbnail.js\";\nimport V from \"./SunLighting.js\";\nimport I from \"./VirtualLighting.js\";\nimport x from \"./support/Description.js\";\nimport { SlideEnvironment as D } from \"./support/SlideEnvironment.js\";\nimport R from \"./support/SlideGround.js\";\nimport { SlideVisibleLayer as A } from \"./support/SlideVisibleLayer.js\";\nimport O from \"./support/Title.js\";\nlet q = 0;\nconst M = r.ofType(A);\nlet B = class extends s {\n  constructor(e) {\n    super(e), this.id = Date.now().toString(16) + \"-slide-\" + q++, this.title = new O(), this.description = new x(), this.thumbnail = new U(), this.viewpoint = null, this.basemap = null, this.ground = null, this.environment = new D(), this.visibleLayers = new M();\n  }\n  destroy() {\n    this.visibleLayers.removeAll(), this.basemap = null, this.thumbnail = l(this.thumbnail), this.description = null, this.title = null, this.thumbnail = null;\n  }\n  castTitle(e) {\n    return \"string\" == typeof e ? new O({\n      text: e\n    }) : w(O, e);\n  }\n  castDescription(e) {\n    return \"string\" == typeof e ? new x({\n      text: e\n    }) : w(x, e);\n  }\n  castThumbnail(e) {\n    return \"string\" == typeof e ? new U({\n      url: e\n    }) : w(U, e);\n  }\n  castBasemap(e) {\n    return j(e);\n  }\n  set visibleLayers(e) {\n    this._set(\"visibleLayers\", o(e, this._get(\"visibleLayers\"), M));\n  }\n  castVisibleLayers(e) {\n    return e && \"function\" == typeof e.map ? e.map(e => {\n      if (\"string\" == typeof e) return {\n        id: e\n      };\n      if (e instanceof L) {\n        const t = G(e);\n        return {\n          id: e.id,\n          sublayerIds: t\n        };\n      }\n      return e.id ? {\n        id: e.id,\n        sublayerIds: \"sublayerIds\" in e ? e.sublayerIds : void 0\n      } : (a.getLogger(this.declaredClass).warn('Invalid visible layer, expected { id }, Layer or \"id\"'), e);\n    }) : null;\n  }\n  clone() {\n    return new (0, this.constructor)({\n      id: this.id,\n      title: this.title.clone(),\n      thumbnail: this.thumbnail.clone(),\n      description: this.description && this.description.clone() || null,\n      viewpoint: this.viewpoint && this.viewpoint.clone() || null,\n      basemap: this.basemap && this.basemap.clone() || null,\n      ground: this.ground && this.ground.clone() || null,\n      visibleLayers: this.visibleLayers.clone(),\n      environment: this.environment && this.environment.clone() || null\n    });\n  }\n  _updateVisibleLayersFrom(e) {\n    const t = [];\n    return c(this._getLayers(e.map).map(i => e.whenLayerView(i).then(e => {\n      if (e.visible) {\n        const n = G(i);\n        t.push(new A({\n          id: e.layer.id,\n          sublayerIds: n\n        }));\n      }\n    })).toArray()).then(() => {\n      this.visibleLayers.removeAll(), this.visibleLayers.addMany(t);\n    });\n  }\n  updateFrom(e, t) {\n    const i = {\n      format: \"png\",\n      quality: 80,\n      width: 120,\n      height: 75,\n      disableDecorations: !0,\n      ...(t && t.screenshot)\n    };\n    return e.when(() => (this.viewpoint = e.viewpoint.clone(), this.environment.lighting = \"virtual\" === e.environment.lighting.type ? I.prototype.clone.apply(e.environment.lighting) : V.prototype.clone.apply(e.environment.lighting), this.environment.weather = e.environment.weather.clone(), this.basemap = e.map.basemap && e.map.basemap.clone() || null, this.ground = e.map.ground ? R.fromGround(e.map.ground) : null, this._updateVisibleLayersFrom(e))).then(() => e.takeScreenshot(i)).then(e => (this.thumbnail = new U({\n      url: e.dataUrl\n    }), this));\n  }\n  async applyTo(e, t) {\n    p(this._applyToController) && this._applyToController.abort();\n    let i = new AbortController();\n    this._applyToController = i;\n    const r = d(t, () => i?.abort()),\n      o = e.resourceController.scheduler.registerTask(k.SLIDE);\n    let s = !1;\n    const a = {\n        animate: !0,\n        ...t,\n        signal: this._applyToController.signal\n      },\n      l = async () => {\n        await Promise.all([o.schedule(() => s = this._setViewpointOfInterest(e, a)), o.schedule(() => this._applyBasemap(e, a), a.signal)]), await Promise.all([o.schedule(() => this._applyLayerVisibility(e), a.signal), o.schedule(() => this._applyGround(e), a.signal), o.schedule(() => this._applyViewpoint(e, a), a.signal)]), await o.schedule(() => e.environment.weather = this.environment.weather.clone());\n      },\n      m = await n(e.addUpdatingPromise(l()));\n    if (s && (e.contentCamera = null), o.remove(), this._applyToController === i && (this._applyToController = null), i = null, r?.remove(), !1 === m.ok) throw m.error;\n    return this;\n  }\n  async _applyBasemap(e, t) {\n    if (this.basemap) {\n      try {\n        await this.basemap.load(t);\n      } catch (i) {\n        if (u(i)) throw i;\n      }\n      e.map.basemap = _(this.basemap, e.map.basemap);\n    }\n  }\n  _applyGround(e) {\n    this.ground && (e.map.ground = this.ground.cloneAndApplyTo(e.map.ground));\n  }\n  _getLayers(e) {\n    const t = new r();\n    return this._collectLayers(e, t), this._collectLayers(e.ground, t), t;\n  }\n  _collectLayers(e, t) {\n    e.layers.forEach(e => {\n      C(e) && (t.add(e), \"layers\" in e && this._collectLayers(e, t));\n    });\n  }\n  _applyLayerVisibility(e) {\n    if (!this.visibleLayers) return;\n    this._getLayers(e.map).forEach(e => {\n      const t = this.visibleLayers.find(t => t.id === e.id);\n      e.visible = null != t;\n      const i = t && t.sublayerIds,\n        n = F(e);\n      i && n && n.forEach(e => e.visible = i.includes(e.id));\n    });\n  }\n  _setViewpointOfInterest(e, t) {\n    if (e.state.fixedContentCamera || !this.viewpoint || t?.ignoreViewpoint || !t?.useDestinationCamera) return !1;\n    const i = E(e, this.viewpoint);\n    return e.contentCamera = i, p(i);\n  }\n  async _applyViewpoint(e, t) {\n    if (this._applyCachedCameraTrackingEnabled(e), this.viewpoint && !t.ignoreViewpoint) {\n      if (p(this.viewpoint.camera) && (this.viewpoint.camera.fov = e.camera.fov), t.animate && this.get(\"environment.lighting.date\")) return this._animateToLighting(e, t);\n      t.animate && (e.environment.applyLighting(this.environment.lighting.clone()), await e.goTo(this.viewpoint, t)), e.viewpoint = this.viewpoint;\n    }\n    e.environment.applyLighting(this.environment.lighting.clone());\n  }\n  async _animateToLighting(e, t) {\n    let i = null;\n    \"virtual\" !== e.environment.lighting.type && \"virtual\" !== this.environment.lighting.type && (\"global\" === e.viewingMode && (i = this._animateLightingWithCamera(e, e.environment.lighting, this.environment.lighting)), e.environment.cachedCameraTrackingEnabled = e.environment.lighting.cameraTrackingEnabled, e.environment.lighting.cameraTrackingEnabled = !1), e.environment.lighting.directShadowsEnabled = this.environment.lighting.directShadowsEnabled, \"virtual\" === this.environment.lighting.type || \"virtual\" === e.environment.lighting.type ? (e.environment.applyLighting(this.environment.lighting.clone()), \"virtual\" !== e.environment.lighting.type && (e.environment.cachedCameraTrackingEnabled = e.environment.lighting.cameraTrackingEnabled, e.environment.lighting.cameraTrackingEnabled = !1)) : null != this.environment.lighting.displayUTCOffset && (e.environment.lighting.displayUTCOffset = this.environment.lighting.displayUTCOffset);\n    return e.goTo(this.viewpoint, t).then(() => {\n      this._applyCachedCameraTrackingEnabled(e), e.environment.applyLighting(this.environment.lighting.clone());\n    }).catch(t => {\n      throw m(e.animation) && this._applyCachedCameraTrackingEnabled(e), t;\n    }).finally(() => {\n      h(i);\n    });\n  }\n  _applyCachedCameraTrackingEnabled(e) {\n    p(e.environment.cachedCameraTrackingEnabled) && (e.environment.lighting.cameraTrackingEnabled = e.environment.cachedCameraTrackingEnabled, e.environment.cachedCameraTrackingEnabled = null);\n  }\n  _getTime(e) {\n    return [e.getTime(), 3600 * e.getUTCHours() + 60 * e.getUTCMinutes() + e.getUTCSeconds()];\n  }\n  _setTime(e, t, i) {\n    return e.setTime(t), e.setUTCHours(i / 3600), e.setUTCMinutes(i % 3600 / 60), e.setUTCSeconds(i % 3600 % 60), e;\n  }\n  _animateLightingWithCamera(e, t, i) {\n    const n = new Date(t.date.toString()),\n      [r, o] = this._getTime(n),\n      [s, a] = this._getTime(i.date),\n      l = N(o, a),\n      m = e.renderCoordsHelper,\n      h = T();\n    m.toRenderCoords(e.camera.position, h);\n    const c = T(),\n      d = T();\n    p(this.viewpoint.camera) && m.toRenderCoords(this.viewpoint.camera.position, c);\n    const u = new Date();\n    return g(() => e.camera, e => {\n      m.toRenderCoords(e.position, d);\n      const i = f(h, d),\n        n = f(c, d);\n      let a = 0;\n      i + n !== 0 && (a = i / (i + n));\n      const p = r + (s - r) * a,\n        g = W(o, l * a);\n      t.date = this._setTime(u, p, g);\n    });\n  }\n  static createFrom(e, t) {\n    return new this().updateFrom(e, t);\n  }\n};\nfunction F(e) {\n  if (\"building-scene\" === e.type || \"map-image\" === e.type) return e.allSublayers.toArray();\n}\nfunction G(e) {\n  const t = F(e);\n  if (t) return t.filter(e => e.visible).map(e => e.id);\n}\ne([y({\n  type: String,\n  json: {\n    write: {\n      isRequired: !0\n    }\n  }\n})], B.prototype, \"id\", void 0), e([y({\n  type: O,\n  json: {\n    default: () => new O({\n      text: \"\"\n    }),\n    write: {\n      isRequired: !0\n    }\n  }\n})], B.prototype, \"title\", void 0), e([v(\"title\")], B.prototype, \"castTitle\", null), e([y({\n  type: x,\n  json: {\n    write: {\n      overridePolicy: e => ({\n        enabled: !(!e || !e.text)\n      })\n    }\n  }\n})], B.prototype, \"description\", void 0), e([v(\"description\")], B.prototype, \"castDescription\", null), e([y({\n  type: U,\n  json: {\n    default: () => new U({\n      url: \"\"\n    }),\n    write: {\n      isRequired: !0\n    }\n  }\n})], B.prototype, \"thumbnail\", void 0), e([v(\"thumbnail\")], B.prototype, \"castThumbnail\", null), e([y({\n  type: i,\n  nonNullable: !0,\n  json: {\n    write: {\n      isRequired: !0\n    }\n  }\n})], B.prototype, \"viewpoint\", void 0), e([y({\n  type: t,\n  json: {\n    read: {\n      source: \"baseMap\"\n    },\n    write: {\n      target: \"baseMap\"\n    }\n  }\n})], B.prototype, \"basemap\", void 0), e([v(\"basemap\")], B.prototype, \"castBasemap\", null), e([y({\n  type: R,\n  json: {\n    write: !0\n  }\n})], B.prototype, \"ground\", void 0), e([y({\n  type: M,\n  json: {\n    write: {\n      isRequired: !0\n    }\n  }\n})], B.prototype, \"visibleLayers\", null), e([v(\"visibleLayers\")], B.prototype, \"castVisibleLayers\", null), e([y({\n  type: D,\n  json: {\n    write: !0\n  }\n})], B.prototype, \"environment\", void 0), B = e([b(\"esri.webscene.Slide\")], B);\nconst P = 86400,\n  H = 43200;\nfunction N(e, t) {\n  let i = t - e;\n  return i > H && (i -= P), i < -H && (i += P), i;\n}\nfunction W(e, t) {\n  return S(e + t, P);\n}\nconst J = B;\nexport { J as default };","map":{"version":3,"names":["_","e","t","i","result","n","r","referenceSetter","o","JSONSupport","s","a","destroyMaybe","l","isSome","p","isNone","m","removeMaybe","h","eachAlways","c","onAbortOrThrow","d","isAbortError","u","when","g","property","y","cast","v","subclass","b","ensureType","w","f","T","L","isOperationalLayer","C","j","clonePreservingTiledLayers","moduloPositive","S","toCamera","E","TaskPriority","k","SlideThumbnail","U","V","I","x","SlideEnvironment","D","R","SlideVisibleLayer","A","O","q","M","ofType","B","constructor","id","Date","now","toString","title","description","thumbnail","viewpoint","basemap","ground","environment","visibleLayers","destroy","removeAll","castTitle","text","castDescription","castThumbnail","url","castBasemap","_set","_get","castVisibleLayers","map","G","sublayerIds","getLogger","declaredClass","warn","clone","_updateVisibleLayersFrom","_getLayers","whenLayerView","then","visible","push","layer","toArray","addMany","updateFrom","format","quality","width","height","disableDecorations","screenshot","lighting","type","prototype","apply","weather","fromGround","takeScreenshot","dataUrl","applyTo","_applyToController","abort","AbortController","resourceController","scheduler","registerTask","SLIDE","animate","signal","Promise","all","schedule","_setViewpointOfInterest","_applyBasemap","_applyLayerVisibility","_applyGround","_applyViewpoint","addUpdatingPromise","contentCamera","remove","ok","error","load","cloneAndApplyTo","_collectLayers","layers","forEach","add","find","F","includes","state","fixedContentCamera","ignoreViewpoint","useDestinationCamera","_applyCachedCameraTrackingEnabled","camera","fov","get","_animateToLighting","applyLighting","goTo","viewingMode","_animateLightingWithCamera","cachedCameraTrackingEnabled","cameraTrackingEnabled","directShadowsEnabled","displayUTCOffset","catch","animation","finally","_getTime","getTime","getUTCHours","getUTCMinutes","getUTCSeconds","_setTime","setTime","setUTCHours","setUTCMinutes","setUTCSeconds","date","N","renderCoordsHelper","toRenderCoords","position","W","createFrom","allSublayers","filter","String","json","write","isRequired","default","overridePolicy","enabled","nonNullable","read","source","target","P","H","J"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/webscene/Slide.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../Basemap.js\";import i from\"../Viewpoint.js\";import{result as n}from\"../core/asyncUtils.js\";import r from\"../core/Collection.js\";import{referenceSetter as o}from\"../core/collectionUtils.js\";import{JSONSupport as s}from\"../core/JSONSupport.js\";import a from\"../core/Logger.js\";import{destroyMaybe as l,isSome as p,isNone as m,removeMaybe as h}from\"../core/maybe.js\";import{eachAlways as c,onAbortOrThrow as d,isAbortError as u}from\"../core/promiseUtils.js\";import{when as g}from\"../core/reactiveUtils.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import{cast as v}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/arrayUtils.js\";import{subclass as b}from\"../core/accessorSupport/decorators/subclass.js\";import{ensureType as w}from\"../core/accessorSupport/ensureType.js\";import{d as f}from\"../chunks/vec3.js\";import{c as T}from\"../chunks/vec3f64.js\";import L from\"../layers/Layer.js\";import{isOperationalLayer as C}from\"../layers/mixins/OperationalLayer.js\";import{ensureType as j,clonePreservingTiledLayers as _}from\"../support/basemapUtils.js\";import{moduloPositive as S}from\"../views/3d/support/mathUtils.js\";import{toCamera as E}from\"../views/3d/support/viewpointUtils.js\";import{TaskPriority as k}from\"../views/support/Scheduler.js\";import{SlideThumbnail as U}from\"../webdoc/support/SlideThumbnail.js\";import V from\"./SunLighting.js\";import I from\"./VirtualLighting.js\";import x from\"./support/Description.js\";import{SlideEnvironment as D}from\"./support/SlideEnvironment.js\";import R from\"./support/SlideGround.js\";import{SlideVisibleLayer as A}from\"./support/SlideVisibleLayer.js\";import O from\"./support/Title.js\";let q=0;const M=r.ofType(A);let B=class extends s{constructor(e){super(e),this.id=Date.now().toString(16)+\"-slide-\"+q++,this.title=new O,this.description=new x,this.thumbnail=new U,this.viewpoint=null,this.basemap=null,this.ground=null,this.environment=new D,this.visibleLayers=new M}destroy(){this.visibleLayers.removeAll(),this.basemap=null,this.thumbnail=l(this.thumbnail),this.description=null,this.title=null,this.thumbnail=null}castTitle(e){return\"string\"==typeof e?new O({text:e}):w(O,e)}castDescription(e){return\"string\"==typeof e?new x({text:e}):w(x,e)}castThumbnail(e){return\"string\"==typeof e?new U({url:e}):w(U,e)}castBasemap(e){return j(e)}set visibleLayers(e){this._set(\"visibleLayers\",o(e,this._get(\"visibleLayers\"),M))}castVisibleLayers(e){return e&&\"function\"==typeof e.map?e.map((e=>{if(\"string\"==typeof e)return{id:e};if(e instanceof L){const t=G(e);return{id:e.id,sublayerIds:t}}return e.id?{id:e.id,sublayerIds:\"sublayerIds\"in e?e.sublayerIds:void 0}:(a.getLogger(this.declaredClass).warn('Invalid visible layer, expected { id }, Layer or \"id\"'),e)})):null}clone(){return new(0,this.constructor)({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})}_updateVisibleLayersFrom(e){const t=[];return c(this._getLayers(e.map).map((i=>e.whenLayerView(i).then((e=>{if(e.visible){const n=G(i);t.push(new A({id:e.layer.id,sublayerIds:n}))}})))).toArray()).then((()=>{this.visibleLayers.removeAll(),this.visibleLayers.addMany(t)}))}updateFrom(e,t){const i={format:\"png\",quality:80,width:120,height:75,disableDecorations:!0,...t&&t.screenshot};return e.when((()=>(this.viewpoint=e.viewpoint.clone(),this.environment.lighting=\"virtual\"===e.environment.lighting.type?I.prototype.clone.apply(e.environment.lighting):V.prototype.clone.apply(e.environment.lighting),this.environment.weather=e.environment.weather.clone(),this.basemap=e.map.basemap&&e.map.basemap.clone()||null,this.ground=e.map.ground?R.fromGround(e.map.ground):null,this._updateVisibleLayersFrom(e)))).then((()=>e.takeScreenshot(i))).then((e=>(this.thumbnail=new U({url:e.dataUrl}),this)))}async applyTo(e,t){p(this._applyToController)&&this._applyToController.abort();let i=new AbortController;this._applyToController=i;const r=d(t,(()=>i?.abort())),o=e.resourceController.scheduler.registerTask(k.SLIDE);let s=!1;const a={animate:!0,...t,signal:this._applyToController.signal},l=async()=>{await Promise.all([o.schedule((()=>s=this._setViewpointOfInterest(e,a))),o.schedule((()=>this._applyBasemap(e,a)),a.signal)]),await Promise.all([o.schedule((()=>this._applyLayerVisibility(e)),a.signal),o.schedule((()=>this._applyGround(e)),a.signal),o.schedule((()=>this._applyViewpoint(e,a)),a.signal)]),await o.schedule((()=>e.environment.weather=this.environment.weather.clone()))},m=await n(e.addUpdatingPromise(l()));if(s&&(e.contentCamera=null),o.remove(),this._applyToController===i&&(this._applyToController=null),i=null,r?.remove(),!1===m.ok)throw m.error;return this}async _applyBasemap(e,t){if(this.basemap){try{await this.basemap.load(t)}catch(i){if(u(i))throw i}e.map.basemap=_(this.basemap,e.map.basemap)}}_applyGround(e){this.ground&&(e.map.ground=this.ground.cloneAndApplyTo(e.map.ground))}_getLayers(e){const t=new r;return this._collectLayers(e,t),this._collectLayers(e.ground,t),t}_collectLayers(e,t){e.layers.forEach((e=>{C(e)&&(t.add(e),\"layers\"in e&&this._collectLayers(e,t))}))}_applyLayerVisibility(e){if(!this.visibleLayers)return;this._getLayers(e.map).forEach((e=>{const t=this.visibleLayers.find((t=>t.id===e.id));e.visible=null!=t;const i=t&&t.sublayerIds,n=F(e);i&&n&&n.forEach((e=>e.visible=i.includes(e.id)))}))}_setViewpointOfInterest(e,t){if(e.state.fixedContentCamera||!this.viewpoint||t?.ignoreViewpoint||!t?.useDestinationCamera)return!1;const i=E(e,this.viewpoint);return e.contentCamera=i,p(i)}async _applyViewpoint(e,t){if(this._applyCachedCameraTrackingEnabled(e),this.viewpoint&&!t.ignoreViewpoint){if(p(this.viewpoint.camera)&&(this.viewpoint.camera.fov=e.camera.fov),t.animate&&this.get(\"environment.lighting.date\"))return this._animateToLighting(e,t);t.animate&&(e.environment.applyLighting(this.environment.lighting.clone()),await e.goTo(this.viewpoint,t)),e.viewpoint=this.viewpoint}e.environment.applyLighting(this.environment.lighting.clone())}async _animateToLighting(e,t){let i=null;\"virtual\"!==e.environment.lighting.type&&\"virtual\"!==this.environment.lighting.type&&(\"global\"===e.viewingMode&&(i=this._animateLightingWithCamera(e,e.environment.lighting,this.environment.lighting)),e.environment.cachedCameraTrackingEnabled=e.environment.lighting.cameraTrackingEnabled,e.environment.lighting.cameraTrackingEnabled=!1),e.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled,\"virtual\"===this.environment.lighting.type||\"virtual\"===e.environment.lighting.type?(e.environment.applyLighting(this.environment.lighting.clone()),\"virtual\"!==e.environment.lighting.type&&(e.environment.cachedCameraTrackingEnabled=e.environment.lighting.cameraTrackingEnabled,e.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(e.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return e.goTo(this.viewpoint,t).then((()=>{this._applyCachedCameraTrackingEnabled(e),e.environment.applyLighting(this.environment.lighting.clone())})).catch((t=>{throw m(e.animation)&&this._applyCachedCameraTrackingEnabled(e),t})).finally((()=>{h(i)}))}_applyCachedCameraTrackingEnabled(e){p(e.environment.cachedCameraTrackingEnabled)&&(e.environment.lighting.cameraTrackingEnabled=e.environment.cachedCameraTrackingEnabled,e.environment.cachedCameraTrackingEnabled=null)}_getTime(e){return[e.getTime(),3600*e.getUTCHours()+60*e.getUTCMinutes()+e.getUTCSeconds()]}_setTime(e,t,i){return e.setTime(t),e.setUTCHours(i/3600),e.setUTCMinutes(i%3600/60),e.setUTCSeconds(i%3600%60),e}_animateLightingWithCamera(e,t,i){const n=new Date(t.date.toString()),[r,o]=this._getTime(n),[s,a]=this._getTime(i.date),l=N(o,a),m=e.renderCoordsHelper,h=T();m.toRenderCoords(e.camera.position,h);const c=T(),d=T();p(this.viewpoint.camera)&&m.toRenderCoords(this.viewpoint.camera.position,c);const u=new Date;return g((()=>e.camera),(e=>{m.toRenderCoords(e.position,d);const i=f(h,d),n=f(c,d);let a=0;i+n!==0&&(a=i/(i+n));const p=r+(s-r)*a,g=W(o,l*a);t.date=this._setTime(u,p,g)}))}static createFrom(e,t){return(new this).updateFrom(e,t)}};function F(e){if(\"building-scene\"===e.type||\"map-image\"===e.type)return e.allSublayers.toArray()}function G(e){const t=F(e);if(t)return t.filter((e=>e.visible)).map((e=>e.id))}e([y({type:String,json:{write:{isRequired:!0}}})],B.prototype,\"id\",void 0),e([y({type:O,json:{default:()=>new O({text:\"\"}),write:{isRequired:!0}}})],B.prototype,\"title\",void 0),e([v(\"title\")],B.prototype,\"castTitle\",null),e([y({type:x,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.text)})}}})],B.prototype,\"description\",void 0),e([v(\"description\")],B.prototype,\"castDescription\",null),e([y({type:U,json:{default:()=>new U({url:\"\"}),write:{isRequired:!0}}})],B.prototype,\"thumbnail\",void 0),e([v(\"thumbnail\")],B.prototype,\"castThumbnail\",null),e([y({type:i,nonNullable:!0,json:{write:{isRequired:!0}}})],B.prototype,\"viewpoint\",void 0),e([y({type:t,json:{read:{source:\"baseMap\"},write:{target:\"baseMap\"}}})],B.prototype,\"basemap\",void 0),e([v(\"basemap\")],B.prototype,\"castBasemap\",null),e([y({type:R,json:{write:!0}})],B.prototype,\"ground\",void 0),e([y({type:M,json:{write:{isRequired:!0}}})],B.prototype,\"visibleLayers\",null),e([v(\"visibleLayers\")],B.prototype,\"castVisibleLayers\",null),e([y({type:D,json:{write:!0}})],B.prototype,\"environment\",void 0),B=e([b(\"esri.webscene.Slide\")],B);const P=86400,H=43200;function N(e,t){let i=t-e;return i>H&&(i-=P),i<-H&&(i+=P),i}function W(e,t){return S(e+t,P)}const J=B;export{J as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}