{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { isSome as r, releaseMaybe as s, disposeMaybe as i, isNone as h } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { c as n } from \"../../../chunks/vec2.js\";\nimport { N as c } from \"../../../chunks/NoiseTextureAtlas.glsl.js\";\nimport { NoiseTextureRenderMode as u, NoiseTextureAtlasTechniqueConfiguration as p } from \"./NoiseTextureAtlasConfiguration.js\";\nimport { ATLAS_SIZE as l } from \"./NoiseTextureAtlasDimensions.js\";\nimport { NoiseTextureAtlasTechnique as _ } from \"./NoiseTextureAtlasTechnique.js\";\nimport { createQuadVAO as m } from \"../webgl-engine/lib/glUtil3D.js\";\nimport { TargetType as f, TextureType as d, PixelFormat as T, PixelType as w, TextureWrapMode as q, TextureSamplingMode as x } from \"../../webgl/enums.js\";\nimport { FramebufferObject as g } from \"../../webgl/FramebufferObject.js\";\nlet y = class extends t {\n  constructor(e) {\n    super(e), this._needsRender = !0, this._passParameters = new c(), this._frameBuffer = new g(e.context.renderContext.rctx, {\n      colorTarget: f.TEXTURE,\n      width: l,\n      height: l\n    }, {\n      target: d.TEXTURE_2D,\n      pixelFormat: T.RGBA,\n      dataType: w.UNSIGNED_BYTE,\n      wrapMode: q.CLAMP_TO_EDGE,\n      samplingMode: x.LINEAR,\n      hasMipmap: !1,\n      width: l,\n      height: l\n    }), this._vao = m(e.context.renderContext.rctx);\n  }\n  get _techniqueRepository() {\n    return this.context.techniqueRepository;\n  }\n  get textureAtlas() {\n    return r(this._texture) ? r(this._weatherMapTechnique) && this._weatherMapTechnique.compiled && this._needsRender && (this._texture = this._render(u.WeatherMap)) : r(this._fullTechnique) && this._fullTechnique.compiled && (this._texture = this._render(u.Full)), this._texture;\n  }\n  _setDirty() {\n    this._needsRender = !0;\n  }\n  updateWeatherMap(e) {\n    this._passParameters.weatherTile[0] === e[0] && this._passParameters.weatherTile[1] === e[1] || (n(this._passParameters.weatherTile, e), this._setDirty());\n  }\n  destroy() {\n    this._fullTechniqueCached = s(this._fullTechniqueCached), this._weatherMapTechniqueCached = s(this._weatherMapTechniqueCached), this._frameBuffer = i(this._frameBuffer), this._vao = i(this._vao);\n  }\n  get _fullTechnique() {\n    if (h(this._fullTechniqueCached)) {\n      const e = new p();\n      e.mode = u.Full, this._fullTechniqueCached = this._techniqueRepository.acquire(_, e);\n    }\n    return this._fullTechniqueCached;\n  }\n  get _weatherMapTechnique() {\n    if (h(this._weatherMapTechniqueCached)) {\n      const e = new p();\n      e.mode = u.WeatherMap, this._weatherMapTechniqueCached = this._techniqueRepository.acquire(_, e);\n    }\n    return this._weatherMapTechniqueCached;\n  }\n  _render(e) {\n    if (h(this._vao) || h(this._frameBuffer)) return null;\n    const t = e === u.Full ? this._fullTechnique : this._weatherMapTechnique,\n      r = this.context.renderContext.rctx,\n      s = r.getViewport();\n    r.setViewport(0, 0, l, l), r.bindFramebuffer(this._frameBuffer);\n    const i = r.bindTechnique(t, this._passParameters, null);\n    return r.bindVAO(this._vao), i.assertCompatibleVertexAttributeLocations(this._vao), r.gl.drawArrays(r.gl.TRIANGLE_STRIP, 0, 4), r.setViewport(s.x, s.y, s.width, s.height), this._needsRender = !1, this._frameBuffer.colorTexture;\n  }\n};\ne([o({\n  constructOnly: !0\n})], y.prototype, \"context\", void 0), e([o({\n  readOnly: !0\n})], y.prototype, \"_techniqueRepository\", null), y = e([a(\"esri.views.3d.environment.NoiseTextureAtlas\")], y);\nexport { y as NoiseTextureAtlas };","map":{"version":3,"names":["_","e","t","isSome","r","releaseMaybe","s","disposeMaybe","i","isNone","h","property","o","subclass","a","c","n","N","NoiseTextureRenderMode","u","NoiseTextureAtlasTechniqueConfiguration","p","ATLAS_SIZE","l","NoiseTextureAtlasTechnique","createQuadVAO","m","TargetType","f","TextureType","d","PixelFormat","T","PixelType","w","TextureWrapMode","q","TextureSamplingMode","x","FramebufferObject","g","y","constructor","_needsRender","_passParameters","_frameBuffer","context","renderContext","rctx","colorTarget","TEXTURE","width","height","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","samplingMode","LINEAR","hasMipmap","_vao","_techniqueRepository","techniqueRepository","textureAtlas","_texture","_weatherMapTechnique","compiled","_render","WeatherMap","_fullTechnique","Full","_setDirty","updateWeatherMap","weatherTile","destroy","_fullTechniqueCached","_weatherMapTechniqueCached","mode","acquire","getViewport","setViewport","bindFramebuffer","bindTechnique","bindVAO","assertCompatibleVertexAttributeLocations","gl","drawArrays","TRIANGLE_STRIP","colorTexture","constructOnly","prototype","readOnly","NoiseTextureAtlas"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/environment/NoiseTextureAtlas.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r,releaseMaybe as s,disposeMaybe as i,isNone as h}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{c as n}from\"../../../chunks/vec2.js\";import{N as c}from\"../../../chunks/NoiseTextureAtlas.glsl.js\";import{NoiseTextureRenderMode as u,NoiseTextureAtlasTechniqueConfiguration as p}from\"./NoiseTextureAtlasConfiguration.js\";import{ATLAS_SIZE as l}from\"./NoiseTextureAtlasDimensions.js\";import{NoiseTextureAtlasTechnique as _}from\"./NoiseTextureAtlasTechnique.js\";import{createQuadVAO as m}from\"../webgl-engine/lib/glUtil3D.js\";import{TargetType as f,TextureType as d,PixelFormat as T,PixelType as w,TextureWrapMode as q,TextureSamplingMode as x}from\"../../webgl/enums.js\";import{FramebufferObject as g}from\"../../webgl/FramebufferObject.js\";let y=class extends t{constructor(e){super(e),this._needsRender=!0,this._passParameters=new c,this._frameBuffer=new g(e.context.renderContext.rctx,{colorTarget:f.TEXTURE,width:l,height:l},{target:d.TEXTURE_2D,pixelFormat:T.RGBA,dataType:w.UNSIGNED_BYTE,wrapMode:q.CLAMP_TO_EDGE,samplingMode:x.LINEAR,hasMipmap:!1,width:l,height:l}),this._vao=m(e.context.renderContext.rctx)}get _techniqueRepository(){return this.context.techniqueRepository}get textureAtlas(){return r(this._texture)?r(this._weatherMapTechnique)&&this._weatherMapTechnique.compiled&&this._needsRender&&(this._texture=this._render(u.WeatherMap)):r(this._fullTechnique)&&this._fullTechnique.compiled&&(this._texture=this._render(u.Full)),this._texture}_setDirty(){this._needsRender=!0}updateWeatherMap(e){this._passParameters.weatherTile[0]===e[0]&&this._passParameters.weatherTile[1]===e[1]||(n(this._passParameters.weatherTile,e),this._setDirty())}destroy(){this._fullTechniqueCached=s(this._fullTechniqueCached),this._weatherMapTechniqueCached=s(this._weatherMapTechniqueCached),this._frameBuffer=i(this._frameBuffer),this._vao=i(this._vao)}get _fullTechnique(){if(h(this._fullTechniqueCached)){const e=new p;e.mode=u.Full,this._fullTechniqueCached=this._techniqueRepository.acquire(_,e)}return this._fullTechniqueCached}get _weatherMapTechnique(){if(h(this._weatherMapTechniqueCached)){const e=new p;e.mode=u.WeatherMap,this._weatherMapTechniqueCached=this._techniqueRepository.acquire(_,e)}return this._weatherMapTechniqueCached}_render(e){if(h(this._vao)||h(this._frameBuffer))return null;const t=e===u.Full?this._fullTechnique:this._weatherMapTechnique,r=this.context.renderContext.rctx,s=r.getViewport();r.setViewport(0,0,l,l),r.bindFramebuffer(this._frameBuffer);const i=r.bindTechnique(t,this._passParameters,null);return r.bindVAO(this._vao),i.assertCompatibleVertexAttributeLocations(this._vao),r.gl.drawArrays(r.gl.TRIANGLE_STRIP,0,4),r.setViewport(s.x,s.y,s.width,s.height),this._needsRender=!1,this._frameBuffer.colorTexture}};e([o({constructOnly:!0})],y.prototype,\"context\",void 0),e([o({readOnly:!0})],y.prototype,\"_techniqueRepository\",null),y=e([a(\"esri.views.3d.environment.NoiseTextureAtlas\")],y);export{y as NoiseTextureAtlas};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}