{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { PathTransformationCursor as t, getCoord2D as e } from \"../CIMCursor.js\";\nimport { CurveHelper as s } from \"../CurveHelper.js\";\nimport { ExtremityPlacement as i } from \"../enums.js\";\nclass n {\n  static local() {\n    return null === n.instance && (n.instance = new n()), n.instance;\n  }\n  execute(t, e, s, i, n) {\n    return new r(t, e, s);\n  }\n}\nn.instance = null;\nclass r extends t {\n  constructor(t, e, i) {\n    super(t, !1, !0), this._curveHelper = new s(), this._angleToLine = void 0 === e.angleToLine || e.angleToLine, this._offset = void 0 !== e.offset ? e.offset * i : 0, this._type = e.extremityPlacement, this._position = void 0 !== e.offsetAlongLine ? e.offsetAlongLine * i : 0, this._beginProcessed = !1;\n  }\n  processPath(t) {\n    let e;\n    switch (this._type) {\n      case i.Both:\n      default:\n        this._beginProcessed ? (e = this._atExtremities(t, this._position, !1), this._beginProcessed = !1, this.iteratePath = !1) : (e = this._atExtremities(t, this._position, !0), this._beginProcessed = !0, this.iteratePath = !0);\n        break;\n      case i.JustBegin:\n        e = this._atExtremities(t, this._position, !0);\n        break;\n      case i.JustEnd:\n        e = this._atExtremities(t, this._position, !1);\n      case i.None:\n    }\n    return e;\n  }\n  _atExtremities(t, s, i) {\n    const n = t.length;\n    if (n < 2) return null;\n    const r = i ? 1 : n - 2,\n      o = i ? n : -1,\n      a = i ? 1 : -1;\n    let l,\n      h = 0,\n      c = i ? t[0] : t[n - 1];\n    for (let _ = r; _ !== o; _ += a) {\n      l = c, c = t[_];\n      const i = this._curveHelper.calculateLength(l, c);\n      if (h + i > s) {\n        const t = (s - h) / i,\n          [n, r] = this._curveHelper.getAngleCS(l, c, t),\n          o = e(l, c, t);\n        return this.internalPlacement.setTranslate(o[0] - this._offset * r, o[1] + this._offset * n), this._angleToLine && this.internalPlacement.setRotateCS(-n, -r), this.internalPlacement;\n      }\n      h += i;\n    }\n    return null;\n  }\n}\nexport { n as PlacementAtExtremities };","map":{"version":3,"names":["PathTransformationCursor","t","getCoord2D","e","CurveHelper","s","ExtremityPlacement","i","n","local","instance","execute","r","constructor","_curveHelper","_angleToLine","angleToLine","_offset","offset","_type","extremityPlacement","_position","offsetAlongLine","_beginProcessed","processPath","Both","_atExtremities","iteratePath","JustBegin","JustEnd","None","length","o","a","l","h","c","_","calculateLength","getAngleCS","internalPlacement","setTranslate","setRotateCS","PlacementAtExtremities"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/symbols/cim/placements/PlacementAtExtremities.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{PathTransformationCursor as t,getCoord2D as e}from\"../CIMCursor.js\";import{CurveHelper as s}from\"../CurveHelper.js\";import{ExtremityPlacement as i}from\"../enums.js\";class n{static local(){return null===n.instance&&(n.instance=new n),n.instance}execute(t,e,s,i,n){return new r(t,e,s)}}n.instance=null;class r extends t{constructor(t,e,i){super(t,!1,!0),this._curveHelper=new s,this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*i:0,this._type=e.extremityPlacement,this._position=void 0!==e.offsetAlongLine?e.offsetAlongLine*i:0,this._beginProcessed=!1}processPath(t){let e;switch(this._type){case i.Both:default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case i.JustBegin:e=this._atExtremities(t,this._position,!0);break;case i.JustEnd:e=this._atExtremities(t,this._position,!1);case i.None:}return e}_atExtremities(t,s,i){const n=t.length;if(n<2)return null;const r=i?1:n-2,o=i?n:-1,a=i?1:-1;let l,h=0,c=i?t[0]:t[n-1];for(let _=r;_!==o;_+=a){l=c,c=t[_];const i=this._curveHelper.calculateLength(l,c);if(h+i>s){const t=(s-h)/i,[n,r]=this._curveHelper.getAngleCS(l,c,t),o=e(l,c,t);return this.internalPlacement.setTranslate(o[0]-this._offset*r,o[1]+this._offset*n),this._angleToLine&&this.internalPlacement.setRotateCS(-n,-r),this.internalPlacement}h+=i}return null}}export{n as PlacementAtExtremities};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}