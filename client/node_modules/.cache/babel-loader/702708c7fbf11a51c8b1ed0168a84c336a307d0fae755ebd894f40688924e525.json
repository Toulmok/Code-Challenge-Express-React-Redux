{"ast":null,"code":"import _slicedToArray from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { isNone as s } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as e } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { localOperators as r } from \"../rasterFunctionConstants.js\";\nimport { getPixelValueRange as n } from \"../rasterFormats/pixelRangeUtils.js\";\nimport i from \"./BaseRasterFunction.js\";\nimport u from \"./LocalFunctionArguments.js\";\nimport { operandsCount as a, getOutputDomain as c, local as p } from \"./localUtils.js\";\nvar m = /*#__PURE__*/function (_i) {\n  _inherits(m, _i);\n  var _super = _createSuper(m);\n  function m() {\n    var _this;\n    _classCallCheck(this, m);\n    _this = _super.apply(this, arguments), _this.functionName = \"Local\", _this.functionArguments = null, _this.rasterArgumentNames = [\"rasters\"];\n    return _this;\n  }\n  _createClass(m, [{\n    key: \"_bindSourceRasters\",\n    value: function _bindSourceRasters() {\n      var t = this.sourceRasterInfos,\n        s = t[0],\n        o = s.bandCount,\n        e = this.functionArguments.processAsMultiband;\n      if (t.some(function (t) {\n        return t.bandCount !== o;\n      })) return {\n        success: !1,\n        supportsGPU: !1,\n        error: \"local-function: input rasters do not have same band count\"\n      };\n      var _this$functionArgumen = this.functionArguments,\n        r = _this$functionArgumen.operation,\n        n = _this$functionArgumen.rasters,\n        i = a[r];\n      if (!(999 === i || n.length === i || n.length <= 1 && 1 === i)) return {\n        success: !1,\n        supportsGPU: !1,\n        error: \"local-function: the length of functionArguments.rasters does not match operation's requirement: \".concat(i)\n      };\n      this.outputPixelType = this._getOutputPixelType(\"f32\");\n      var u = s.clone();\n      u.pixelType = this.outputPixelType, u.statistics = null, u.histograms = null, u.colormap = null, u.attributeTable = null, u.bandCount = 999 !== i || e ? o : 1;\n      var p = c(r);\n      if (p) {\n        u.statistics = [];\n        for (var _t = 0; _t < u.bandCount; _t++) u.statistics[_t] = {\n          min: p[0],\n          max: p[1],\n          avg: (p[0] + p[1]) / 2,\n          stddev: (p[0] + p[1]) / 10\n        };\n      }\n      this.rasterInfo = u;\n      return {\n        success: !0,\n        supportsGPU: 1 === u.bandCount && i <= 3 && (r < 11 || r > 16)\n      };\n    }\n  }, {\n    key: \"_processPixels\",\n    value: function _processPixels(t) {\n      var _this$outputPixelType;\n      var o = t.pixelBlocks;\n      return s(o) || o.some(function (t) {\n        return s(t);\n      }) ? null : p(o, this.functionArguments.operation, {\n        processAsMultiband: this.functionArguments.processAsMultiband,\n        outputPixelType: (_this$outputPixelType = this.outputPixelType) !== null && _this$outputPixelType !== void 0 ? _this$outputPixelType : void 0\n      });\n    }\n  }, {\n    key: \"_getWebGLParameters\",\n    value: function _getWebGLParameters() {\n      var _Object$keys$find$toL, _Object$keys$find, _this$outputPixelType2;\n      var t = this.functionArguments.operation,\n        s = a[t],\n        o = (_Object$keys$find$toL = (_Object$keys$find = Object.keys(r).find(function (s) {\n          return r[s] === t;\n        })) === null || _Object$keys$find === void 0 ? void 0 : _Object$keys$find.toLowerCase()) !== null && _Object$keys$find$toL !== void 0 ? _Object$keys$find$toL : \"undefined\",\n        e = (_this$outputPixelType2 = this.outputPixelType) !== null && _this$outputPixelType2 !== void 0 ? _this$outputPixelType2 : \"f32\";\n      var _n = n(e),\n        _n2 = _slicedToArray(_n, 2),\n        i = _n2[0],\n        u = _n2[1];\n      var c = e.startsWith(\"u\") || e.startsWith(\"s\");\n      return c && (i -= 1e-4, u += 1e-4), {\n        imageCount: s,\n        operationName: o,\n        domainRange: [i, u],\n        isOutputRounded: c\n      };\n    }\n  }]);\n  return m;\n}(i);\nt([o({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], m.prototype, \"functionName\", void 0), t([o({\n  type: u,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], m.prototype, \"functionArguments\", void 0), t([o()], m.prototype, \"rasterArgumentNames\", void 0), m = t([e(\"esri.layers.support.rasterFunctions.LocalFunction\")], m);\nvar l = m;\nexport { l as default };","map":{"version":3,"names":["_","t","isNone","s","property","o","subclass","e","localOperators","r","getPixelValueRange","n","i","u","operandsCount","a","getOutputDomain","c","local","p","m","_i","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","functionName","functionArguments","rasterArgumentNames","_createClass","key","value","_bindSourceRasters","sourceRasterInfos","bandCount","processAsMultiband","some","success","supportsGPU","error","_this$functionArgumen","operation","rasters","length","concat","outputPixelType","_getOutputPixelType","clone","pixelType","statistics","histograms","colormap","attributeTable","min","max","avg","stddev","rasterInfo","_processPixels","_this$outputPixelType","pixelBlocks","_getWebGLParameters","_Object$keys$find$toL","_Object$keys$find","_this$outputPixelType2","Object","keys","find","toLowerCase","_n","_n2","_slicedToArray","startsWith","imageCount","operationName","domainRange","isOutputRounded","json","write","name","prototype","type","l","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/support/rasterFunctions/LocalFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{isNone as s}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import{localOperators as r}from\"../rasterFunctionConstants.js\";import{getPixelValueRange as n}from\"../rasterFormats/pixelRangeUtils.js\";import i from\"./BaseRasterFunction.js\";import u from\"./LocalFunctionArguments.js\";import{operandsCount as a,getOutputDomain as c,local as p}from\"./localUtils.js\";let m=class extends i{constructor(){super(...arguments),this.functionName=\"Local\",this.functionArguments=null,this.rasterArgumentNames=[\"rasters\"]}_bindSourceRasters(){const{sourceRasterInfos:t}=this,s=t[0],{bandCount:o}=s,{processAsMultiband:e}=this.functionArguments;if(t.some((t=>t.bandCount!==o)))return{success:!1,supportsGPU:!1,error:\"local-function: input rasters do not have same band count\"};const{operation:r,rasters:n}=this.functionArguments,i=a[r];if(!(999===i||n.length===i||n.length<=1&&1===i))return{success:!1,supportsGPU:!1,error:`local-function: the length of functionArguments.rasters does not match operation's requirement: ${i}`};this.outputPixelType=this._getOutputPixelType(\"f32\");const u=s.clone();u.pixelType=this.outputPixelType,u.statistics=null,u.histograms=null,u.colormap=null,u.attributeTable=null,u.bandCount=999!==i||e?o:1;const p=c(r);if(p){u.statistics=[];for(let t=0;t<u.bandCount;t++)u.statistics[t]={min:p[0],max:p[1],avg:(p[0]+p[1])/2,stddev:(p[0]+p[1])/10}}this.rasterInfo=u;return{success:!0,supportsGPU:1===u.bandCount&&i<=3&&(r<11||r>16)}}_processPixels(t){const{pixelBlocks:o}=t;return s(o)||o.some((t=>s(t)))?null:p(o,this.functionArguments.operation,{processAsMultiband:this.functionArguments.processAsMultiband,outputPixelType:this.outputPixelType??void 0})}_getWebGLParameters(){const{operation:t}=this.functionArguments,s=a[t],o=Object.keys(r).find((s=>r[s]===t))?.toLowerCase()??\"undefined\",e=this.outputPixelType??\"f32\";let[i,u]=n(e);const c=e.startsWith(\"u\")||e.startsWith(\"s\");return c&&(i-=1e-4,u+=1e-4),{imageCount:s,operationName:o,domainRange:[i,u],isOutputRounded:c}}};t([o({json:{write:!0,name:\"rasterFunction\"}})],m.prototype,\"functionName\",void 0),t([o({type:u,json:{write:!0,name:\"rasterFunctionArguments\"}})],m.prototype,\"functionArguments\",void 0),t([o()],m.prototype,\"rasterArgumentNames\",void 0),m=t([e(\"esri.layers.support.rasterFunctions.LocalFunction\")],m);const l=m;export{l as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}