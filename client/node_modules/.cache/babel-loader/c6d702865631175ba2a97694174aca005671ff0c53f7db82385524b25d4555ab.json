{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { handlesGroup as e } from \"../handleUtils.js\";\nimport t from \"../Logger.js\";\nimport { isPromiseLike as s, createAbortError as n, createDeferred as i, throwIfAborted as o } from \"../promiseUtils.js\";\nimport r from \"../Queue.js\";\nimport l from \"./RemoteClient.js\";\nvar h = /*#__PURE__*/function () {\n  function h() {\n    _classCallCheck(this, h);\n    this._inUseClients = new Array(), this._clients = new Array(), this._clientPromises = new Array(), this._ongoingJobsQueue = new r();\n  }\n  _createClass(h, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.close();\n    }\n  }, {\n    key: \"closed\",\n    get: function get() {\n      return !this._clients || !this._clients.length;\n    }\n  }, {\n    key: \"open\",\n    value: function open(e, t) {\n      var _this = this;\n      return new Promise(function (n, i) {\n        var r = !0;\n        var _h = function _h(e) {\n          o(t.signal), r && (r = !1, e());\n        };\n        _this._clients.length = e.length, _this._clientPromises.length = e.length, _this._inUseClients.length = e.length;\n        var _loop = function _loop(_o) {\n          var r = e[_o];\n          s(r) ? _this._clientPromises[_o] = r.then(function (e) {\n            return _this._clients[_o] = new l(e, t, function () {\n              var _this$_ongoingJobsQue;\n              return (_this$_ongoingJobsQue = _this._ongoingJobsQueue.pop()) !== null && _this$_ongoingJobsQue !== void 0 ? _this$_ongoingJobsQue : null;\n            }), _h(n), _this._clients[_o];\n          }, function () {\n            return _h(i), null;\n          }) : (_this._clients[_o] = new l(r, t, function () {\n            var _this$_ongoingJobsQue2;\n            return (_this$_ongoingJobsQue2 = _this._ongoingJobsQueue.pop()) !== null && _this$_ongoingJobsQue2 !== void 0 ? _this$_ongoingJobsQue2 : null;\n          }), _this._clientPromises[_o] = Promise.resolve(_this._clients[_o]), _h(n));\n        };\n        for (var _o = 0; _o < e.length; ++_o) {\n          _loop(_o);\n        }\n      });\n    }\n  }, {\n    key: \"broadcast\",\n    value: function broadcast(e, t, s) {\n      var n = new Array(this._clientPromises.length);\n      for (var _i = 0; _i < this._clientPromises.length; ++_i) {\n        var _o2 = this._clientPromises[_i];\n        n[_i] = _o2.then(function (n) {\n          return n === null || n === void 0 ? void 0 : n.invoke(e, t, s);\n        });\n      }\n      return n;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var e;\n      for (; e = this._ongoingJobsQueue.pop();) e.deferred.reject(n(\"Worker closing, aborting job calling '\".concat(e.methodName, \"'\")));\n      var _iterator = _createForOfIteratorHelper(this._clientPromises),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _t = _step.value;\n          _t.then(function (e) {\n            return e === null || e === void 0 ? void 0 : e.close();\n          });\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      this._clients.length = 0, this._clientPromises.length = 0;\n    }\n  }, {\n    key: \"invoke\",\n    value: function invoke(e, s, n) {\n      var o;\n      Array.isArray(n) ? (t.getLogger(\"esri.core.workers.Connection\").warn(\"invoke()\", \"The transferList parameter is deprecated, use the options object instead\"), o = {\n        transferList: n\n      }) : o = n;\n      var r = i();\n      this._ongoingJobsQueue.push({\n        methodName: e,\n        data: s,\n        invokeOptions: o,\n        deferred: r\n      });\n      for (var _t2 = 0; _t2 < this._clientPromises.length; _t2++) {\n        var _e = this._clients[_t2];\n        _e ? _e.jobAdded() : this._clientPromises[_t2].then(function (e) {\n          return e === null || e === void 0 ? void 0 : e.jobAdded();\n        });\n      }\n      return r.promise;\n    }\n  }, {\n    key: \"on\",\n    value: function on(t, s) {\n      var _this2 = this;\n      return Promise.all(this._clientPromises).then(function () {\n        return e(_this2._clients.map(function (e) {\n          return e.on(t, s);\n        }));\n      });\n    }\n  }, {\n    key: \"openPorts\",\n    value: function openPorts() {\n      var _this3 = this;\n      return new Promise(function (e) {\n        var t = new Array(_this3._clientPromises.length);\n        var s = t.length;\n        var _loop2 = function _loop2(_n) {\n          _this3._clientPromises[_n].then(function (i) {\n            i && (t[_n] = i.openPort()), 0 == --s && e(t);\n          });\n        };\n        for (var _n = 0; _n < _this3._clientPromises.length; ++_n) {\n          _loop2(_n);\n        }\n      });\n    }\n  }, {\n    key: \"test\",\n    get: function get() {\n      return {\n        numClients: this._clients.length\n      };\n    }\n  }]);\n  return h;\n}();\nexport { h as default };","map":{"version":3,"names":["handlesGroup","e","t","isPromiseLike","s","createAbortError","n","createDeferred","i","throwIfAborted","o","r","l","h","_classCallCheck","_inUseClients","Array","_clients","_clientPromises","_ongoingJobsQueue","_createClass","key","value","destroy","close","get","length","open","_this","Promise","signal","_loop","_o","then","_this$_ongoingJobsQue","pop","_this$_ongoingJobsQue2","resolve","broadcast","invoke","deferred","reject","concat","methodName","_iterator","_createForOfIteratorHelper","_step","done","err","f","isArray","getLogger","warn","transferList","push","data","invokeOptions","jobAdded","promise","on","_this2","all","map","openPorts","_this3","_loop2","_n","openPort","numClients","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/core/workers/Connection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{handlesGroup as e}from\"../handleUtils.js\";import t from\"../Logger.js\";import{isPromiseLike as s,createAbortError as n,createDeferred as i,throwIfAborted as o}from\"../promiseUtils.js\";import r from\"../Queue.js\";import l from\"./RemoteClient.js\";class h{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new r}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise(((n,i)=>{let r=!0;const h=e=>{o(t.signal),r&&(r=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let o=0;o<e.length;++o){const r=e[o];s(r)?this._clientPromises[o]=r.then((e=>(this._clients[o]=new l(e,t,(()=>this._ongoingJobsQueue.pop()??null)),h(n),this._clients[o])),(()=>(h(i),null))):(this._clients[o]=new l(r,t,(()=>this._ongoingJobsQueue.pop()??null)),this._clientPromises[o]=Promise.resolve(this._clients[o]),h(n))}}))}broadcast(e,t,s){const n=new Array(this._clientPromises.length);for(let i=0;i<this._clientPromises.length;++i){const o=this._clientPromises[i];n[i]=o.then((n=>n?.invoke(e,t,s)))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.deferred.reject(n(`Worker closing, aborting job calling '${e.methodName}'`));for(const t of this._clientPromises)t.then((e=>e?.close()));this._clients.length=0,this._clientPromises.length=0}invoke(e,s,n){let o;Array.isArray(n)?(t.getLogger(\"esri.core.workers.Connection\").warn(\"invoke()\",\"The transferList parameter is deprecated, use the options object instead\"),o={transferList:n}):o=n;const r=i();this._ongoingJobsQueue.push({methodName:e,data:s,invokeOptions:o,deferred:r});for(let t=0;t<this._clientPromises.length;t++){const e=this._clients[t];e?e.jobAdded():this._clientPromises[t].then((e=>e?.jobAdded()))}return r.promise}on(t,s){return Promise.all(this._clientPromises).then((()=>e(this._clients.map((e=>e.on(t,s))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let n=0;n<this._clientPromises.length;++n){this._clientPromises[n].then((i=>{i&&(t[n]=i.openPort()),0==--s&&e(t)}))}}))}get test(){return{numClients:this._clients.length}}}export{h as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}