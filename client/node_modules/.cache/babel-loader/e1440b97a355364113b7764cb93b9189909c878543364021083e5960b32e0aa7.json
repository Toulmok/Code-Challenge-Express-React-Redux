{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { removeUnordered as e } from \"../../../core/arrayUtils.js\";\nimport t from \"../../../core/Handles.js\";\nimport { makeHandle as s } from \"../../../core/handleUtils.js\";\nimport { destroyMaybe as r } from \"../../../core/maybe.js\";\nimport { watch as i, sync as n } from \"../../../core/reactiveUtils.js\";\nimport { getReferenceEllipsoid as c } from \"../../../geometry/ellipsoidUtils.js\";\nimport { ObjectResourceCache as a } from \"../layers/graphics/ObjectResourceCache.js\";\nimport { ClientType as o } from \"./index.js\";\nimport { StreamTextureCollection as l } from \"./StreamTextureCollection.js\";\nimport { getSettings as p, getLabelSettings as h } from \"../webgl-engine/lib/screenSizePerspectiveUtils.js\";\nimport { TextureWrapMode as S } from \"../../webgl/enums.js\";\nclass u {\n  constructor(e) {\n    this.textures = null, this.streamDataRequester = null, this._graphicsOwners = [], this._screenSizePerspectiveHandles = null, this.cimSymbolRasterizer = null, this._viewState = e.viewState, this._view = e.view, this._pointsOfInterest = e.pointsOfInterest, this.streamDataRequester = e.resourceController.createStreamDataRequester(o.SYMBOLOGY), this.objectResourceCache = new a((t, s) => e.resourceController.memoryController.newCache(t, s)), this.textures = new l(this.streamDataRequester, e.view._stage, {\n      preMultiplyAlpha: !0,\n      wrap: {\n        s: S.CLAMP_TO_EDGE,\n        t: S.CLAMP_TO_EDGE\n      }\n    }, e.resourceController.scheduler);\n    const t = c(this._view.spatialReference).radius;\n    this.screenSizePerspectiveSettings = p(e.viewingMode, t), this.screenSizePerspectiveSettingsLabels = h(e.viewingMode, t);\n  }\n  destroy() {\n    r(this.textures), this.textures = null, this.streamDataRequester = null;\n  }\n  addGraphicsOwner(t) {\n    if (!t) return s();\n    this._graphicsOwners.push(t);\n    const r = i(() => t.layer?.screenSizePerspectiveEnabled, () => this._updateScreenSizePerspectiveEnabled());\n    return this._updateScreenSizePerspectiveEnabled(), s(() => {\n      r.remove(), e(this._graphicsOwners, t), this._updateScreenSizePerspectiveEnabled();\n    });\n  }\n  _updateScreenSizePerspectiveEnabled() {\n    const e = this._graphicsOwners.some(e => !0 === e.layer?.screenSizePerspectiveEnabled);\n    if (e && !this._screenSizePerspectiveHandles) {\n      this._screenSizePerspectiveHandles = new t();\n      const e = () => this._updateScreenSizePerspectiveSettings();\n      this._screenSizePerspectiveHandles.add([i(() => this._pointsOfInterest.centerOnSurfaceInfrequent.distance, e, n), this._viewState.events.on(\"camera-projection-changed\", e)]), this._updateScreenSizePerspectiveSettings();\n    } else e || (this._screenSizePerspectiveHandles = r(this._screenSizePerspectiveHandles));\n  }\n  _updateScreenSizePerspectiveSettings() {\n    const e = this._pointsOfInterest;\n    d.distance = e.centerOnSurfaceInfrequent.distance, d.fovY = this._viewState.camera.fovY, this.screenSizePerspectiveSettings.update(d), this.screenSizePerspectiveSettingsLabels.update(d), this._view._stage.renderView.requestRender();\n  }\n  get test() {\n    return {\n      screenSizePerspectiveHandles: this._screenSizePerspectiveHandles\n    };\n  }\n}\nconst d = {\n  distance: 0,\n  fovY: 0\n};\nexport { u as SharedSymbolResources };","map":{"version":3,"names":["removeUnordered","e","t","makeHandle","s","destroyMaybe","r","watch","i","sync","n","getReferenceEllipsoid","c","ObjectResourceCache","a","ClientType","o","StreamTextureCollection","l","getSettings","p","getLabelSettings","h","TextureWrapMode","S","u","constructor","textures","streamDataRequester","_graphicsOwners","_screenSizePerspectiveHandles","cimSymbolRasterizer","_viewState","viewState","_view","view","_pointsOfInterest","pointsOfInterest","resourceController","createStreamDataRequester","SYMBOLOGY","objectResourceCache","memoryController","newCache","_stage","preMultiplyAlpha","wrap","CLAMP_TO_EDGE","scheduler","spatialReference","radius","screenSizePerspectiveSettings","viewingMode","screenSizePerspectiveSettingsLabels","destroy","addGraphicsOwner","push","layer","screenSizePerspectiveEnabled","_updateScreenSizePerspectiveEnabled","remove","some","_updateScreenSizePerspectiveSettings","add","centerOnSurfaceInfrequent","distance","events","on","d","fovY","camera","update","renderView","requestRender","test","screenSizePerspectiveHandles","SharedSymbolResources"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/SharedSymbolResources.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{removeUnordered as e}from\"../../../core/arrayUtils.js\";import t from\"../../../core/Handles.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{destroyMaybe as r}from\"../../../core/maybe.js\";import{watch as i,sync as n}from\"../../../core/reactiveUtils.js\";import{getReferenceEllipsoid as c}from\"../../../geometry/ellipsoidUtils.js\";import{ObjectResourceCache as a}from\"../layers/graphics/ObjectResourceCache.js\";import{ClientType as o}from\"./index.js\";import{StreamTextureCollection as l}from\"./StreamTextureCollection.js\";import{getSettings as p,getLabelSettings as h}from\"../webgl-engine/lib/screenSizePerspectiveUtils.js\";import{TextureWrapMode as S}from\"../../webgl/enums.js\";class u{constructor(e){this.textures=null,this.streamDataRequester=null,this._graphicsOwners=[],this._screenSizePerspectiveHandles=null,this.cimSymbolRasterizer=null,this._viewState=e.viewState,this._view=e.view,this._pointsOfInterest=e.pointsOfInterest,this.streamDataRequester=e.resourceController.createStreamDataRequester(o.SYMBOLOGY),this.objectResourceCache=new a(((t,s)=>e.resourceController.memoryController.newCache(t,s))),this.textures=new l(this.streamDataRequester,e.view._stage,{preMultiplyAlpha:!0,wrap:{s:S.CLAMP_TO_EDGE,t:S.CLAMP_TO_EDGE}},e.resourceController.scheduler);const t=c(this._view.spatialReference).radius;this.screenSizePerspectiveSettings=p(e.viewingMode,t),this.screenSizePerspectiveSettingsLabels=h(e.viewingMode,t)}destroy(){r(this.textures),this.textures=null,this.streamDataRequester=null}addGraphicsOwner(t){if(!t)return s();this._graphicsOwners.push(t);const r=i((()=>t.layer?.screenSizePerspectiveEnabled),(()=>this._updateScreenSizePerspectiveEnabled()));return this._updateScreenSizePerspectiveEnabled(),s((()=>{r.remove(),e(this._graphicsOwners,t),this._updateScreenSizePerspectiveEnabled()}))}_updateScreenSizePerspectiveEnabled(){const e=this._graphicsOwners.some((e=>!0===e.layer?.screenSizePerspectiveEnabled));if(e&&!this._screenSizePerspectiveHandles){this._screenSizePerspectiveHandles=new t;const e=()=>this._updateScreenSizePerspectiveSettings();this._screenSizePerspectiveHandles.add([i((()=>this._pointsOfInterest.centerOnSurfaceInfrequent.distance),e,n),this._viewState.events.on(\"camera-projection-changed\",e)]),this._updateScreenSizePerspectiveSettings()}else e||(this._screenSizePerspectiveHandles=r(this._screenSizePerspectiveHandles))}_updateScreenSizePerspectiveSettings(){const e=this._pointsOfInterest;d.distance=e.centerOnSurfaceInfrequent.distance,d.fovY=this._viewState.camera.fovY,this.screenSizePerspectiveSettings.update(d),this.screenSizePerspectiveSettingsLabels.update(d),this._view._stage.renderView.requestRender()}get test(){return{screenSizePerspectiveHandles:this._screenSizePerspectiveHandles}}}const d={distance:0,fovY:0};export{u as SharedSymbolResources};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}