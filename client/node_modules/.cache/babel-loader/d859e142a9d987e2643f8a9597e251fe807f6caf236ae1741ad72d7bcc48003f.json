{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../analysis/SlicePlane.js\";\nimport { clock as i } from \"../../../../core/clock.js\";\nimport a from \"../../../../core/Handles.js\";\nimport { releaseMaybe as s, destroyMaybe as n, isSome as r, isNone as l, removeMaybe as o } from \"../../../../core/maybe.js\";\nimport { watch as h, sync as p, syncAndInitial as u } from \"../../../../core/reactiveUtils.js\";\nimport { addFrameTask as c } from \"../../../../core/scheduling.js\";\nimport { createScreenPoint as d, screenPointObjectToArray as _, createScreenPointArray as v } from \"../../../../core/screenUtils.js\";\nimport { property as P } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as y } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { d as m, E as g, m as w } from \"../../../../chunks/mat4.js\";\nimport { e as f, l as M, c as D, g as T, a as V, m as b, n as k, s as E } from \"../../../../chunks/vec3.js\";\nimport { a as S, c as H } from \"../../../../chunks/vec3f64.js\";\nimport { a as x, c as I, n as R, f as j } from \"../../../../chunks/boundedPlane.js\";\nimport { signedDistance as O, create as C, intersectRay as z, normal as G } from \"../../../../geometry/support/plane.js\";\nimport { create as U } from \"../../../../geometry/support/ray.js\";\nimport { sv3d as L, sm4d as K, sv2d as A } from \"../../../../geometry/support/vectorStacks.js\";\nimport { POINTER_MOVE_TIMER_MS as B, PLANE_PREVIEW_OUTLINE_WIDTH as F, forceVerticalModifier as N, forceHorizontalModifier as q, PLANE_OUTLINE_COLOR as Z, PLANE_BACKGROUND_COLOR as J, PREVIEW_FADE_DOT_THRESHOLD as Q, PREVIEW_FADE_DURATION_SECONDS as W, INITIAL_DEPTH_OFFSET_FRAC as X } from \"./sliceToolConfig.js\";\nimport { createShiftManipulator as Y, createRotateManipulator as $, createResizeManipulator as tt, createGridVisualElement as et, createOutlineVisualElement as it, planeToShape as at, createRotatePlane as st, RotationAxis as nt, resizePlane as rt, calculatePlaneHalfSize as lt, SliceOrientation as ot, createPlane as ht, DidPointerMoveRecentlyFlag as pt, calculateBoundedPlaneTranslateRotate as ut, updateShiftRestartHandle as ct, updateRotateHeadingHandle as dt, updateRotateTiltHandle as _t, updateResizeHandle as vt, createShiftPlane as Pt } from \"./sliceToolUtils.js\";\nimport { getRotateHeadingTexture as yt, getTiltRotateTexture as mt } from \"./images/Factory.js\";\nimport { calculateInputRotationTransform as gt } from \"../../interactive/manipulatorUtils.js\";\nimport { screenToRenderPlane as wt } from \"../../interactive/editingTools/dragEventPipeline3D.js\";\nimport { fromScreen as ft } from \"../../support/geometryUtils/ray.js\";\nimport { newIntersector as Mt } from \"../../webgl-engine/lib/Intersector.js\";\nimport { StoreResults as Dt } from \"../../webgl-engine/lib/IntersectorInterfaces.js\";\nimport { AnalysisToolBase as Tt } from \"../../../interactive/AnalysisToolBase.js\";\nimport { createManipulatorDragEventPipeline as Vt } from \"../../../interactive/dragEventPipeline.js\";\nimport { createScreenPointFromEvent as bt } from \"../../../support/screenUtils.js\";\nvar kt;\nlet Et = kt = class extends Tt {\n  constructor(t) {\n    super(t), this._clock = i, this._previewPlaneOpacity = 1, this.removeIncompleteOnCancel = !1, this.layersMode = \"none\", this.shiftManipulator = null, this.rotateHeadingManipulator = null, this.rotateTiltManipulator = null, this.resizeManipulators = null, this._handles = new a(), this._viewHandles = new a(), this._frameTask = null, this._pointerMoveTimerMs = B, this._prevPointerMoveTimeout = null, this._previewPlaneGridVisualElement = null, this._previewPlaneOutlineVisualElement = null, this._startPlane = x(), this._previewPlane = null, this._activeKeyModifiers = {}, this._lastCursorPosition = d(), this._resizeHandles = [{\n      direction: [1, 0]\n    }, {\n      direction: [1, 1]\n    }, {\n      direction: [0, 1]\n    }, {\n      direction: [-1, 1]\n    }, {\n      direction: [-1, 0]\n    }, {\n      direction: [-1, -1]\n    }, {\n      direction: [0, -1]\n    }, {\n      direction: [1, -1]\n    }], this._intersector = Mt(t.view.state.viewingMode), this._intersector.options.store = Dt.MIN;\n  }\n  initialize() {\n    if (null == this.analysis) throw new Error(\"SliceTool requires valid analysis, but null was provided.\");\n    this._rotateHeadingImage = yt(this.view.toolViewManager.textures), this._rotateTiltImage = mt(this.view.toolViewManager.textures);\n    const t = t => {\n      this._updateManipulatorsInteractive(t), t.grabbing || (r(this.analysisViewData.plane) && I(this.analysisViewData.plane, this._startPlane), this.inputState = null);\n    };\n    this.shiftManipulator = Y(this.view), this.manipulators.add(this.shiftManipulator), this.shiftManipulator.events.on(\"grab-changed\", e => {\n      this._onShiftGrab(e), t(this.shiftManipulator);\n    }), this._handles.add(this._createShiftDragPipeline(this.shiftManipulator)), this.rotateHeadingManipulator = $(this.view, this._rotateHeadingImage.texture), this.manipulators.add(this.rotateHeadingManipulator), this.rotateHeadingManipulator.events.on(\"grab-changed\", e => {\n      this._onRotateHeadingGrab(e), t(this.rotateHeadingManipulator);\n    }), this._handles.add(this._createRotateHeadingDragPipeline(this.rotateHeadingManipulator)), this.rotateTiltManipulator = $(this.view, this._rotateTiltImage.texture), this.manipulators.add(this.rotateTiltManipulator), this.rotateTiltManipulator.events.on(\"grab-changed\", e => {\n      this._onRotateTiltGrab(e), t(this.rotateTiltManipulator);\n    }), this._handles.add(this._createRotateTiltDragPipeline(this.rotateTiltManipulator)), this.resizeManipulators = this._resizeHandles.map((e, i) => {\n      const a = tt(this.view, e);\n      return a.events.on(\"grab-changed\", e => {\n        this._onResizeGrab(e, i), t(a);\n      }), this._handles.add(this._createResizeDragPipeline(a)), a;\n    }), this.manipulators.addMany(this.resizeManipulators), this._previewPlaneGridVisualElement = et(this.view), this._previewPlaneOutlineVisualElement = it(this.view), this._previewPlaneOutlineVisualElement.width = F, this._handles.add(h(() => this.analysisViewData.plane, () => this._updateManipulators(), p));\n    const e = h(() => this.state, t => {\n      \"sliced\" === t && this.finishToolCreation();\n    }, u);\n    this._handles.add([e, h(() => this.view.state.camera, () => this._onCameraChange())]);\n  }\n  destroy() {\n    this._rotateHeadingImage = s(this._rotateHeadingImage), this._rotateTiltImage = s(this._rotateTiltImage), this._handles = n(this._handles), this._viewHandles = n(this._viewHandles), this._removeFrameTask(), this._clearPointerMoveTimeout(), this._previewPlaneOutlineVisualElement = n(this._previewPlaneOutlineVisualElement), this._previewPlaneGridVisualElement = n(this._previewPlaneGridVisualElement);\n  }\n  get state() {\n    const t = !!this.analysisViewData.plane,\n      e = !!this.inputState;\n    return t ? t && e ? \"slicing\" : t && !e ? \"sliced\" : \"ready\" : \"ready\";\n  }\n  get cursor() {\n    return this._isPlacingSlicePlane || \"exclude\" === this.layersMode ? \"crosshair\" : r(this._creatingPointerId) ? \"grabbing\" : null;\n  }\n  set analysis(t) {\n    if (null == t) throw new Error(\"SliceTool requires valid analysis, but null was provided.\");\n    this._handles.remove(\"analysis\"), this._set(\"analysis\", t);\n  }\n  get inputState() {\n    return this._get(\"inputState\");\n  }\n  set inputState(t) {\n    this._set(\"inputState\", t), this.analysisViewData.showGrid = r(t) && \"resize\" === t.type, this._updateMaterials();\n  }\n  get _isPlacingSlicePlane() {\n    return !this.inputState && !this.analysisViewData.plane && this.active;\n  }\n  get _creatingPointerId() {\n    return r(this.inputState) && \"shift\" === this.inputState.type ? this.inputState.creatingPointerId : null;\n  }\n  enterExcludeLayerMode() {\n    l(this.analysisViewData.plane) || (this._set(\"layersMode\", \"exclude\"), this.active || (this.view.activeTool = this));\n  }\n  exitExcludeLayerMode() {\n    l(this.analysisViewData.plane) || (this._set(\"layersMode\", \"none\"), this.active && (this.view.activeTool = null));\n  }\n  onDeactivate() {\n    this._set(\"layersMode\", \"none\"), this._updatePreviewPlane(null);\n  }\n  onShow() {\n    this._updateVisibility(!0);\n  }\n  onHide() {\n    this._updateVisibility(!1);\n  }\n  _updateVisibility(t) {\n    this._updateManipulators(), t || this._clearPointerMoveTimeout();\n  }\n  onInputEvent(t) {\n    switch (t.type) {\n      case \"pointer-drag\":\n        if (!Ht(t)) return;\n        this._isPlacingSlicePlane ? this._onClickPlacePlane(t) && t.stopPropagation() : this._onPointerDrag(t) && t.stopPropagation();\n        break;\n      case \"pointer-move\":\n        this._onPointerMove(t);\n        break;\n      case \"pointer-up\":\n        this._onPointerUp(t) && t.stopPropagation();\n        break;\n      case \"immediate-click\":\n        if (!Ht(t)) return;\n        this._onClickPlacePlane(t) && t.stopPropagation();\n        break;\n      case \"click\":\n        if (!Ht(t)) return;\n        this._onClickExcludeLayer(t) && t.stopPropagation();\n        break;\n      case \"drag\":\n        this.inputState && t.stopPropagation();\n        break;\n      case \"key-down\":\n        this._onKeyDown(t) && t.stopPropagation();\n        break;\n      case \"key-up\":\n        this._onKeyUp(t) && t.stopPropagation();\n    }\n  }\n  onEditableChange() {\n    this.analysisViewData.editable = this.internallyEditable;\n  }\n  _onPointerDrag(t) {\n    const e = this.inputState;\n    if (t.pointerId === this._creatingPointerId && r(e) && \"shift\" === e.type) {\n      const i = bt(t);\n      return this.shiftManipulator.events.emit(\"drag\", {\n        action: e.hasBeenDragged ? \"update\" : \"start\",\n        pointerType: t.pointerType,\n        start: i,\n        screenPoint: i\n      }), e.hasBeenDragged = !0, !0;\n    }\n    return !1;\n  }\n  _onPointerMove(t) {\n    this._lastCursorPosition.x = t.x, this._lastCursorPosition.y = t.y, this._resetPointerMoveTimeout(), \"touch\" !== t.pointerType && this._updatePreviewPlane(bt(t), this._activeKeyModifiers);\n  }\n  _onCameraChange() {\n    this._updatePreviewPlane(this._lastCursorPosition, this._activeKeyModifiers), this._updateManipulators();\n  }\n  _onPointerUp(t) {\n    if (t.pointerId === this._creatingPointerId && r(this.analysisViewData.plane)) {\n      const e = bt(t);\n      return this.shiftManipulator.events.emit(\"drag\", {\n        action: \"end\",\n        start: e,\n        screenPoint: e\n      }), I(this.analysisViewData.plane, this._startPlane), this.inputState = null, !0;\n    }\n    return !1;\n  }\n  _onClickPlacePlane(t) {\n    if (\"exclude\" === this.layersMode) return !1;\n    if (this._isPlacingSlicePlane) {\n      const i = bt(t),\n        a = x();\n      if (this._pickPlane(i, !1, this._activeKeyModifiers, a)) {\n        if (I(a, this._startPlane), this.analysis.shape = at(a, this.view, this.view.spatialReference, new e()), \"pointer-drag\" === t.type) {\n          const e = this._calculatePickRay(i);\n          this.inputState = St(e, t.pointerId, a.origin, a);\n        }\n        return !0;\n      }\n    }\n    return !1;\n  }\n  _onClickExcludeLayer(t) {\n    return !(\"exclude\" !== this.layersMode || !this.created) && (this.view.hitTest(bt(t)).then(t => {\n      if (t.results.length) {\n        const e = t.results[0],\n          i = \"graphic\" === e?.type && e.graphic;\n        if (i) {\n          const t = i.sourceLayer || i.layer;\n          t && this.analysis.excludedLayers.push(t);\n        }\n      } else t.ground.layer ? this.analysis.excludedLayers.push(t.ground.layer) : this.analysis.excludeGroundSurface = !0;\n    }), this._set(\"layersMode\", \"none\"), this.active && (this.view.activeTool = null), !0);\n  }\n  _onKeyDown(t) {\n    return (t.key === N || t.key === q) && (this._activeKeyModifiers[t.key] = !0, r(this._previewPlane) && this._updatePreviewPlane(this._lastCursorPosition, this._activeKeyModifiers), !0);\n  }\n  _onKeyUp(t) {\n    return !(t.key !== N && t.key !== q || !this._activeKeyModifiers[t.key]) && (delete this._activeKeyModifiers[t.key], r(this._previewPlane) && this._updatePreviewPlane(this._lastCursorPosition, this._activeKeyModifiers), !0);\n  }\n  _onShiftGrab(t) {\n    if (\"start\" !== t.action || l(this.analysisViewData.plane) || !t.screenPoint) return;\n    const e = this._calculatePickRay(t.screenPoint);\n    I(this.analysisViewData.plane, this._startPlane), this.inputState = St(e, null, this.shiftManipulator.renderLocation, this.analysisViewData.plane);\n  }\n  _createShiftDragPipeline(t) {\n    return Vt(t, (t, e, i) => {\n      const a = this.inputState;\n      if (l(a) || \"shift\" !== a.type) return;\n      const s = r(this.analysisViewData.plane) ? I(this.analysisViewData.plane, x()) : null;\n      e.next(wt(this.view, a.shiftPlane)).next(this._shiftDragAdjustSensitivity(a)).next(this._shiftDragUpdatePlane(a)), i.next(() => {\n        r(s) && this._updateBoundedPlane(s);\n      });\n    });\n  }\n  _shiftDragAdjustSensitivity(t) {\n    return e => {\n      if (l(this.analysisViewData.plane)) return null;\n      const i = .001,\n        a = Math.min((1 - Math.abs(f(R(this.analysisViewData.plane), e.ray.direction) / M(e.ray.direction))) / i, 1),\n        s = -O(this._startPlane.plane, e.renderEnd),\n        n = -O(this._startPlane.plane, t.startPoint);\n      return t.depth = t.depth * (1 - a) + s * a - n, e;\n    };\n  }\n  _shiftDragUpdatePlane(t) {\n    return () => {\n      if (l(this.analysisViewData.plane)) return;\n      const e = D(L.get(), this._startPlane.origin),\n        i = D(L.get(), R(this._startPlane));\n      T(i, i, -t.depth), V(i, i, e);\n      const a = j(i, this.analysisViewData.plane.basis1, this.analysisViewData.plane.basis2, x());\n      this._updateBoundedPlane(a);\n    };\n  }\n  _onRotateHeadingGrab(t) {\n    if (\"start\" !== t.action || l(this.analysisViewData.plane) || !t.screenPoint) return;\n    const e = st(this.analysisViewData.plane, this.view.renderCoordsHelper, nt.HEADING, C()),\n      i = this._calculatePickRay(t.screenPoint),\n      a = H();\n    z(e, i, a) && (I(this.analysisViewData.plane, this._startPlane), this.inputState = {\n      type: \"rotate\",\n      rotatePlane: e,\n      startPoint: a\n    });\n  }\n  _createRotateHeadingDragPipeline(t) {\n    return Vt(t, (t, e, i) => {\n      const a = this.inputState;\n      if (l(a) || \"rotate\" !== a.type) return;\n      const s = r(this.analysisViewData.plane) ? I(this.analysisViewData.plane, x()) : null;\n      e.next(wt(this.view, a.rotatePlane)).next(this._rotateDragRenderPlaneToRotate(a)).next(this._rotateDragUpdatePlaneFromRotate()), i.next(() => {\n        r(s) && this._updateBoundedPlane(s);\n      });\n    });\n  }\n  _onRotateTiltGrab(t) {\n    if (\"start\" !== t.action || l(this.analysisViewData.plane) || !t.screenPoint) return;\n    const e = st(this.analysisViewData.plane, this.view.renderCoordsHelper, nt.TILT, C()),\n      i = this._calculatePickRay(t.screenPoint),\n      a = H();\n    z(e, i, a) && (I(this.analysisViewData.plane, this._startPlane), this.inputState = {\n      type: \"rotate\",\n      rotatePlane: e,\n      startPoint: a\n    });\n  }\n  _createRotateTiltDragPipeline(t) {\n    return Vt(t, (t, e, i) => {\n      const a = this.inputState;\n      if (l(a) || \"rotate\" !== a.type) return;\n      const s = r(this.analysisViewData.plane) ? I(this.analysisViewData.plane, x()) : null;\n      e.next(wt(this.view, a.rotatePlane)).next(this._rotateDragRenderPlaneToRotate(a)).next(this._rotateDragUpdatePlaneFromRotate()), i.next(() => {\n        r(s) && this._updateBoundedPlane(s);\n      });\n    });\n  }\n  _rotateDragRenderPlaneToRotate(t) {\n    return e => {\n      if (l(this.analysisViewData.plane)) return null;\n      const i = G(t.rotatePlane),\n        a = gt(t.startPoint, e.renderEnd, this.analysisViewData.plane.origin, i);\n      return {\n        ...e,\n        rotateAxis: i,\n        rotateAngle: a\n      };\n    };\n  }\n  _rotateDragUpdatePlaneFromRotate() {\n    return t => {\n      if (l(this.analysisViewData.plane)) return;\n      const e = m(K.get(), t.rotateAngle, t.rotateAxis);\n      if (l(e)) return;\n      const i = b(L.get(), this._startPlane.basis1, e),\n        a = b(L.get(), this._startPlane.basis2, e),\n        s = j(this.analysisViewData.plane.origin, i, a, x());\n      this._updateBoundedPlane(s);\n    };\n  }\n  _onResizeGrab(t, e) {\n    if (\"start\" !== t.action || l(this.analysisViewData.plane) || !t.screenPoint) return;\n    const i = this._calculatePickRay(t.screenPoint),\n      a = L.get();\n    z(this.analysisViewData.plane.plane, i, a) && (I(this.analysisViewData.plane, this._startPlane), this.inputState = {\n      type: \"resize\",\n      activeHandleIdx: e,\n      startPoint: S(a)\n    });\n  }\n  _createResizeDragPipeline(t) {\n    return Vt(t, (t, e, i) => {\n      const a = this.inputState;\n      if (l(a) || \"resize\" !== a.type || l(this.analysisViewData.plane)) return;\n      const s = I(this.analysisViewData.plane, x());\n      e.next(wt(this.view, this.analysisViewData.plane.plane)).next(this._resizeDragUpdatePlane(a)), i.next(() => {\n        this._updateBoundedPlane(s);\n      });\n    });\n  }\n  _resizeDragUpdatePlane(t) {\n    return e => {\n      if (l(this.analysisViewData.plane)) return;\n      const i = this._resizeHandles[t.activeHandleIdx],\n        a = rt(i, t.startPoint, e.renderEnd, this.view.state.camera, this._startPlane, I(this.analysisViewData.plane));\n      this._updateBoundedPlane(a);\n    };\n  }\n  _updateBoundedPlane(t) {\n    const e = this.analysisViewData;\n    if (!r(e)) throw new Error(\"valid internal object expected\");\n    e.plane = t;\n  }\n  _updatePreviewPlane(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let i = this._previewPlane;\n    if (this._previewPlane = null, l(t)) return this._removeFrameTask(), void this._updateManipulators();\n    if (!this.analysisViewData.plane && this.active) {\n      const a = r(i) ? i : x();\n      if (i = r(i) ? I(i, xt) : null, this._pickPlane(t, !0, e, a)) {\n        const t = Q;\n        let e = !1;\n        r(i) && (e = f(i.plane, a.plane) < t || f(k(L.get(), i.basis1), k(L.get(), a.basis1)) < t), e && (this._previewPlaneOpacity = 0), this._previewPlane = a;\n      }\n    }\n    r(this._previewPlane) && l(this._frameTask) && 0 === this._previewPlaneOpacity ? this._frameTask = c({\n      update: _ref => {\n        let {\n          deltaTime: t\n        } = _ref;\n        this._previewPlaneOpacity = Math.min(this._previewPlaneOpacity + t / (1e3 * W), 1), this._updateManipulators(), 1 === this._previewPlaneOpacity && this._removeFrameTask();\n      }\n    }) : l(this._previewPlane) && r(this._frameTask) ? this._removeFrameTask() : r(this._previewPlane) && this._updateManipulators();\n  }\n  _removeFrameTask() {\n    this._frameTask = o(this._frameTask);\n  }\n  _calculatePickRay(t) {\n    const e = U(),\n      i = _(t, It);\n    return ft(this.view.state.camera, i, e), k(e.direction, e.direction), e;\n  }\n  _pickMinResult(t) {\n    const e = _(t, A.get());\n    return this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(e, this._intersector), this._intersector.results.min;\n  }\n  _pickPlane(t, e, i, a) {\n    const s = this._pickMinResult(t),\n      n = L.get();\n    if (!s.getIntersectionPoint(n)) return !1;\n    const r = s.getTransformedNormal(L.get()),\n      l = this.view.state.camera;\n    f(r, l.viewForward) > 0 && T(r, r, -1);\n    const o = lt(n, l),\n      h = (e ? 1 : -1) * o * X,\n      p = T(L.get(), r, h);\n    V(p, p, n);\n    const u = this.analysis.tiltEnabled ? ot.TILTED : ot.HORIZONTAL_OR_VERTICAL,\n      c = i[N] ? ot.VERTICAL : i[q] ? ot.HORIZONTAL : u;\n    return ht(p, r, o, o, l, c, this.view.renderCoordsHelper, a), !0;\n  }\n  _clearPointerMoveTimeout() {\n    this._prevPointerMoveTimeout = o(this._prevPointerMoveTimeout);\n  }\n  _resetPointerMoveTimeout() {\n    this._clearPointerMoveTimeout(), this.shiftManipulator.state |= pt, this.rotateHeadingManipulator.state |= pt, this.rotateTiltManipulator.state |= pt, this._prevPointerMoveTimeout = this._clock.setTimeout(() => {\n      this.shiftManipulator.state &= ~pt, this.rotateHeadingManipulator.state &= ~pt, this.rotateTiltManipulator.state &= ~pt;\n    }, this._pointerMoveTimerMs);\n  }\n  _updateManipulators() {\n    if (kt.disableEngineLayers) return;\n    let t,\n      e = !1;\n    if (r(this.analysisViewData.plane)) t = this.analysisViewData.plane, e = !1;else {\n      if (!r(this._previewPlane)) return this.shiftManipulator.available = !1, this.rotateHeadingManipulator.available = !1, this.rotateTiltManipulator.available = !1, this.resizeManipulators.forEach(t => t.available = !1), this._previewPlaneOutlineVisualElement.visible = !1, void (this._previewPlaneGridVisualElement.visible = !1);\n      t = this._previewPlane, e = !0;\n    }\n    const i = ut(t, K.get());\n    e ? (this.shiftManipulator.available = !1, this.rotateHeadingManipulator.available = !1, this.rotateTiltManipulator.available = !1, this.resizeManipulators.forEach(t => t.available = !1), this._previewPlaneOutlineVisualElement.attached = !0, this._previewPlaneGridVisualElement.attached = !0, this._previewPlaneOutlineVisualElement.visible = !0, this._previewPlaneGridVisualElement.visible = !0) : (this.shiftManipulator.available = !0, this.rotateHeadingManipulator.available = !0, this.rotateTiltManipulator.available = this.analysis.tiltEnabled, this.resizeManipulators.forEach(t => t.available = !0), ct(this.shiftManipulator, i, t, this.view.state.camera), dt(this.rotateHeadingManipulator, i, t, this.view.renderCoordsHelper), _t(this.rotateTiltManipulator, i, t), this.resizeManipulators.forEach((e, a) => vt(e, this._resizeHandles[a], i, t)), this._previewPlaneOutlineVisualElement.visible = !1, this._previewPlaneGridVisualElement.visible = !1);\n    const a = E(L.get(), M(t.basis1), M(t.basis2), 1),\n      s = g(K.get(), a),\n      n = w(s, i, s);\n    this._previewPlaneOutlineVisualElement.transform = n, this._previewPlaneGridVisualElement.transform = n, this._updateMaterials();\n  }\n  _updateMaterials() {\n    const t = [Z[0], Z[1], Z[2], Z[3] * this._previewPlaneOpacity];\n    this._previewPlaneOutlineVisualElement.color = t;\n    const e = [J[0], J[1], J[2], J[3] * this._previewPlaneOpacity],\n      i = [0, 0, 0, 0];\n    this._previewPlaneGridVisualElement.backgroundColor = e, this._previewPlaneGridVisualElement.gridColor = i;\n  }\n  _updateManipulatorsInteractive(t) {\n    if (!t.grabbing) return this.shiftManipulator.interactive = !0, this.rotateHeadingManipulator.interactive = !0, this.rotateTiltManipulator.interactive = !0, void this.resizeManipulators.forEach(t => {\n      t.interactive = !0;\n    });\n    this.shiftManipulator.interactive = this.shiftManipulator === t, this.rotateHeadingManipulator.interactive = this.rotateHeadingManipulator === t, this.rotateTiltManipulator.interactive = this.rotateTiltManipulator === t, this.resizeManipulators.forEach(e => {\n      e.interactive = e === t;\n    });\n  }\n  testData() {\n    return {\n      plane: this.analysisViewData.plane,\n      setPointerMoveTimerMs: t => {\n        this._pointerMoveTimerMs = t;\n      }\n    };\n  }\n};\nfunction St(t, e, i, a) {\n  const s = Pt(i, R(a), t.direction, C()),\n    n = H();\n  return z(s, t, n) ? {\n    type: \"shift\",\n    creatingPointerId: e,\n    hasBeenDragged: !1,\n    shiftPlane: s,\n    depth: 0,\n    startPoint: n\n  } : null;\n}\nfunction Ht(t) {\n  return \"mouse\" !== t.pointerType || 0 === t.button;\n}\nEt.disableEngineLayers = !1, t([P()], Et.prototype, \"_clock\", void 0), t([P({\n  constructOnly: !0\n})], Et.prototype, \"view\", void 0), t([P()], Et.prototype, \"analysisViewData\", void 0), t([P({\n  readOnly: !0\n})], Et.prototype, \"state\", null), t([P({\n  readOnly: !0\n})], Et.prototype, \"cursor\", null), t([P()], Et.prototype, \"analysis\", null), t([P()], Et.prototype, \"removeIncompleteOnCancel\", void 0), t([P({\n  readOnly: !0\n})], Et.prototype, \"layersMode\", void 0), t([P({\n  value: null\n})], Et.prototype, \"inputState\", null), t([P()], Et.prototype, \"_isPlacingSlicePlane\", null), t([P()], Et.prototype, \"_creatingPointerId\", null), Et = kt = t([y(\"esri.views.3d.analysis.Slice.SliceTool\")], Et);\nconst xt = x(),\n  It = v(),\n  Rt = Et;\nexport { Rt as default };","map":{"version":3,"names":["_","t","e","clock","i","a","releaseMaybe","s","destroyMaybe","n","isSome","r","isNone","l","removeMaybe","o","watch","h","sync","p","syncAndInitial","u","addFrameTask","c","createScreenPoint","d","screenPointObjectToArray","createScreenPointArray","v","property","P","subclass","y","m","E","g","w","f","M","D","T","V","b","k","S","H","x","I","R","j","signedDistance","O","create","C","intersectRay","z","normal","G","U","sv3d","L","sm4d","K","sv2d","A","POINTER_MOVE_TIMER_MS","B","PLANE_PREVIEW_OUTLINE_WIDTH","F","forceVerticalModifier","N","forceHorizontalModifier","q","PLANE_OUTLINE_COLOR","Z","PLANE_BACKGROUND_COLOR","J","PREVIEW_FADE_DOT_THRESHOLD","Q","PREVIEW_FADE_DURATION_SECONDS","W","INITIAL_DEPTH_OFFSET_FRAC","X","createShiftManipulator","Y","createRotateManipulator","$","createResizeManipulator","tt","createGridVisualElement","et","createOutlineVisualElement","it","planeToShape","at","createRotatePlane","st","RotationAxis","nt","resizePlane","rt","calculatePlaneHalfSize","lt","SliceOrientation","ot","createPlane","ht","DidPointerMoveRecentlyFlag","pt","calculateBoundedPlaneTranslateRotate","ut","updateShiftRestartHandle","ct","updateRotateHeadingHandle","dt","updateRotateTiltHandle","_t","updateResizeHandle","vt","createShiftPlane","Pt","getRotateHeadingTexture","yt","getTiltRotateTexture","mt","calculateInputRotationTransform","gt","screenToRenderPlane","wt","fromScreen","ft","newIntersector","Mt","StoreResults","Dt","AnalysisToolBase","Tt","createManipulatorDragEventPipeline","Vt","createScreenPointFromEvent","bt","kt","Et","constructor","_clock","_previewPlaneOpacity","removeIncompleteOnCancel","layersMode","shiftManipulator","rotateHeadingManipulator","rotateTiltManipulator","resizeManipulators","_handles","_viewHandles","_frameTask","_pointerMoveTimerMs","_prevPointerMoveTimeout","_previewPlaneGridVisualElement","_previewPlaneOutlineVisualElement","_startPlane","_previewPlane","_activeKeyModifiers","_lastCursorPosition","_resizeHandles","direction","_intersector","view","state","viewingMode","options","store","MIN","initialize","analysis","Error","_rotateHeadingImage","toolViewManager","textures","_rotateTiltImage","_updateManipulatorsInteractive","grabbing","analysisViewData","plane","inputState","manipulators","add","events","on","_onShiftGrab","_createShiftDragPipeline","texture","_onRotateHeadingGrab","_createRotateHeadingDragPipeline","_onRotateTiltGrab","_createRotateTiltDragPipeline","map","_onResizeGrab","_createResizeDragPipeline","addMany","width","_updateManipulators","finishToolCreation","camera","_onCameraChange","destroy","_removeFrameTask","_clearPointerMoveTimeout","cursor","_isPlacingSlicePlane","_creatingPointerId","remove","_set","_get","showGrid","type","_updateMaterials","active","creatingPointerId","enterExcludeLayerMode","activeTool","exitExcludeLayerMode","onDeactivate","_updatePreviewPlane","onShow","_updateVisibility","onHide","onInputEvent","Ht","_onClickPlacePlane","stopPropagation","_onPointerDrag","_onPointerMove","_onPointerUp","_onClickExcludeLayer","_onKeyDown","_onKeyUp","onEditableChange","editable","internallyEditable","pointerId","emit","action","hasBeenDragged","pointerType","start","screenPoint","_resetPointerMoveTimeout","_pickPlane","shape","spatialReference","_calculatePickRay","St","origin","created","hitTest","then","results","length","graphic","sourceLayer","layer","excludedLayers","push","ground","excludeGroundSurface","key","renderLocation","next","shiftPlane","_shiftDragAdjustSensitivity","_shiftDragUpdatePlane","_updateBoundedPlane","Math","min","abs","ray","renderEnd","startPoint","depth","get","basis1","basis2","renderCoordsHelper","HEADING","rotatePlane","_rotateDragRenderPlaneToRotate","_rotateDragUpdatePlaneFromRotate","TILT","rotateAxis","rotateAngle","activeHandleIdx","_resizeDragUpdatePlane","arguments","undefined","xt","update","_ref","deltaTime","It","_pickMinResult","sceneIntersectionHelper","intersectToolIntersectorScreen","getIntersectionPoint","getTransformedNormal","viewForward","tiltEnabled","TILTED","HORIZONTAL_OR_VERTICAL","VERTICAL","HORIZONTAL","setTimeout","disableEngineLayers","available","forEach","visible","attached","transform","color","backgroundColor","gridColor","interactive","testData","setPointerMoveTimerMs","button","prototype","constructOnly","readOnly","value","Rt","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/analysis/Slice/SliceTool.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../analysis/SlicePlane.js\";import{clock as i}from\"../../../../core/clock.js\";import a from\"../../../../core/Handles.js\";import{releaseMaybe as s,destroyMaybe as n,isSome as r,isNone as l,removeMaybe as o}from\"../../../../core/maybe.js\";import{watch as h,sync as p,syncAndInitial as u}from\"../../../../core/reactiveUtils.js\";import{addFrameTask as c}from\"../../../../core/scheduling.js\";import{createScreenPoint as d,screenPointObjectToArray as _,createScreenPointArray as v}from\"../../../../core/screenUtils.js\";import{property as P}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as y}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{d as m,E as g,m as w}from\"../../../../chunks/mat4.js\";import{e as f,l as M,c as D,g as T,a as V,m as b,n as k,s as E}from\"../../../../chunks/vec3.js\";import{a as S,c as H}from\"../../../../chunks/vec3f64.js\";import{a as x,c as I,n as R,f as j}from\"../../../../chunks/boundedPlane.js\";import{signedDistance as O,create as C,intersectRay as z,normal as G}from\"../../../../geometry/support/plane.js\";import{create as U}from\"../../../../geometry/support/ray.js\";import{sv3d as L,sm4d as K,sv2d as A}from\"../../../../geometry/support/vectorStacks.js\";import{POINTER_MOVE_TIMER_MS as B,PLANE_PREVIEW_OUTLINE_WIDTH as F,forceVerticalModifier as N,forceHorizontalModifier as q,PLANE_OUTLINE_COLOR as Z,PLANE_BACKGROUND_COLOR as J,PREVIEW_FADE_DOT_THRESHOLD as Q,PREVIEW_FADE_DURATION_SECONDS as W,INITIAL_DEPTH_OFFSET_FRAC as X}from\"./sliceToolConfig.js\";import{createShiftManipulator as Y,createRotateManipulator as $,createResizeManipulator as tt,createGridVisualElement as et,createOutlineVisualElement as it,planeToShape as at,createRotatePlane as st,RotationAxis as nt,resizePlane as rt,calculatePlaneHalfSize as lt,SliceOrientation as ot,createPlane as ht,DidPointerMoveRecentlyFlag as pt,calculateBoundedPlaneTranslateRotate as ut,updateShiftRestartHandle as ct,updateRotateHeadingHandle as dt,updateRotateTiltHandle as _t,updateResizeHandle as vt,createShiftPlane as Pt}from\"./sliceToolUtils.js\";import{getRotateHeadingTexture as yt,getTiltRotateTexture as mt}from\"./images/Factory.js\";import{calculateInputRotationTransform as gt}from\"../../interactive/manipulatorUtils.js\";import{screenToRenderPlane as wt}from\"../../interactive/editingTools/dragEventPipeline3D.js\";import{fromScreen as ft}from\"../../support/geometryUtils/ray.js\";import{newIntersector as Mt}from\"../../webgl-engine/lib/Intersector.js\";import{StoreResults as Dt}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{AnalysisToolBase as Tt}from\"../../../interactive/AnalysisToolBase.js\";import{createManipulatorDragEventPipeline as Vt}from\"../../../interactive/dragEventPipeline.js\";import{createScreenPointFromEvent as bt}from\"../../../support/screenUtils.js\";var kt;let Et=kt=class extends Tt{constructor(t){super(t),this._clock=i,this._previewPlaneOpacity=1,this.removeIncompleteOnCancel=!1,this.layersMode=\"none\",this.shiftManipulator=null,this.rotateHeadingManipulator=null,this.rotateTiltManipulator=null,this.resizeManipulators=null,this._handles=new a,this._viewHandles=new a,this._frameTask=null,this._pointerMoveTimerMs=B,this._prevPointerMoveTimeout=null,this._previewPlaneGridVisualElement=null,this._previewPlaneOutlineVisualElement=null,this._startPlane=x(),this._previewPlane=null,this._activeKeyModifiers={},this._lastCursorPosition=d(),this._resizeHandles=[{direction:[1,0]},{direction:[1,1]},{direction:[0,1]},{direction:[-1,1]},{direction:[-1,0]},{direction:[-1,-1]},{direction:[0,-1]},{direction:[1,-1]}],this._intersector=Mt(t.view.state.viewingMode),this._intersector.options.store=Dt.MIN}initialize(){if(null==this.analysis)throw new Error(\"SliceTool requires valid analysis, but null was provided.\");this._rotateHeadingImage=yt(this.view.toolViewManager.textures),this._rotateTiltImage=mt(this.view.toolViewManager.textures);const t=t=>{this._updateManipulatorsInteractive(t),t.grabbing||(r(this.analysisViewData.plane)&&I(this.analysisViewData.plane,this._startPlane),this.inputState=null)};this.shiftManipulator=Y(this.view),this.manipulators.add(this.shiftManipulator),this.shiftManipulator.events.on(\"grab-changed\",(e=>{this._onShiftGrab(e),t(this.shiftManipulator)})),this._handles.add(this._createShiftDragPipeline(this.shiftManipulator)),this.rotateHeadingManipulator=$(this.view,this._rotateHeadingImage.texture),this.manipulators.add(this.rotateHeadingManipulator),this.rotateHeadingManipulator.events.on(\"grab-changed\",(e=>{this._onRotateHeadingGrab(e),t(this.rotateHeadingManipulator)})),this._handles.add(this._createRotateHeadingDragPipeline(this.rotateHeadingManipulator)),this.rotateTiltManipulator=$(this.view,this._rotateTiltImage.texture),this.manipulators.add(this.rotateTiltManipulator),this.rotateTiltManipulator.events.on(\"grab-changed\",(e=>{this._onRotateTiltGrab(e),t(this.rotateTiltManipulator)})),this._handles.add(this._createRotateTiltDragPipeline(this.rotateTiltManipulator)),this.resizeManipulators=this._resizeHandles.map(((e,i)=>{const a=tt(this.view,e);return a.events.on(\"grab-changed\",(e=>{this._onResizeGrab(e,i),t(a)})),this._handles.add(this._createResizeDragPipeline(a)),a})),this.manipulators.addMany(this.resizeManipulators),this._previewPlaneGridVisualElement=et(this.view),this._previewPlaneOutlineVisualElement=it(this.view),this._previewPlaneOutlineVisualElement.width=F,this._handles.add(h((()=>this.analysisViewData.plane),(()=>this._updateManipulators()),p));const e=h((()=>this.state),(t=>{\"sliced\"===t&&this.finishToolCreation()}),u);this._handles.add([e,h((()=>this.view.state.camera),(()=>this._onCameraChange()))])}destroy(){this._rotateHeadingImage=s(this._rotateHeadingImage),this._rotateTiltImage=s(this._rotateTiltImage),this._handles=n(this._handles),this._viewHandles=n(this._viewHandles),this._removeFrameTask(),this._clearPointerMoveTimeout(),this._previewPlaneOutlineVisualElement=n(this._previewPlaneOutlineVisualElement),this._previewPlaneGridVisualElement=n(this._previewPlaneGridVisualElement)}get state(){const t=!!this.analysisViewData.plane,e=!!this.inputState;return t?t&&e?\"slicing\":t&&!e?\"sliced\":\"ready\":\"ready\"}get cursor(){return this._isPlacingSlicePlane||\"exclude\"===this.layersMode?\"crosshair\":r(this._creatingPointerId)?\"grabbing\":null}set analysis(t){if(null==t)throw new Error(\"SliceTool requires valid analysis, but null was provided.\");this._handles.remove(\"analysis\"),this._set(\"analysis\",t)}get inputState(){return this._get(\"inputState\")}set inputState(t){this._set(\"inputState\",t),this.analysisViewData.showGrid=r(t)&&\"resize\"===t.type,this._updateMaterials()}get _isPlacingSlicePlane(){return!this.inputState&&!this.analysisViewData.plane&&this.active}get _creatingPointerId(){return r(this.inputState)&&\"shift\"===this.inputState.type?this.inputState.creatingPointerId:null}enterExcludeLayerMode(){l(this.analysisViewData.plane)||(this._set(\"layersMode\",\"exclude\"),this.active||(this.view.activeTool=this))}exitExcludeLayerMode(){l(this.analysisViewData.plane)||(this._set(\"layersMode\",\"none\"),this.active&&(this.view.activeTool=null))}onDeactivate(){this._set(\"layersMode\",\"none\"),this._updatePreviewPlane(null)}onShow(){this._updateVisibility(!0)}onHide(){this._updateVisibility(!1)}_updateVisibility(t){this._updateManipulators(),t||this._clearPointerMoveTimeout()}onInputEvent(t){switch(t.type){case\"pointer-drag\":if(!Ht(t))return;this._isPlacingSlicePlane?this._onClickPlacePlane(t)&&t.stopPropagation():this._onPointerDrag(t)&&t.stopPropagation();break;case\"pointer-move\":this._onPointerMove(t);break;case\"pointer-up\":this._onPointerUp(t)&&t.stopPropagation();break;case\"immediate-click\":if(!Ht(t))return;this._onClickPlacePlane(t)&&t.stopPropagation();break;case\"click\":if(!Ht(t))return;this._onClickExcludeLayer(t)&&t.stopPropagation();break;case\"drag\":this.inputState&&t.stopPropagation();break;case\"key-down\":this._onKeyDown(t)&&t.stopPropagation();break;case\"key-up\":this._onKeyUp(t)&&t.stopPropagation()}}onEditableChange(){this.analysisViewData.editable=this.internallyEditable}_onPointerDrag(t){const e=this.inputState;if(t.pointerId===this._creatingPointerId&&r(e)&&\"shift\"===e.type){const i=bt(t);return this.shiftManipulator.events.emit(\"drag\",{action:e.hasBeenDragged?\"update\":\"start\",pointerType:t.pointerType,start:i,screenPoint:i}),e.hasBeenDragged=!0,!0}return!1}_onPointerMove(t){this._lastCursorPosition.x=t.x,this._lastCursorPosition.y=t.y,this._resetPointerMoveTimeout(),\"touch\"!==t.pointerType&&this._updatePreviewPlane(bt(t),this._activeKeyModifiers)}_onCameraChange(){this._updatePreviewPlane(this._lastCursorPosition,this._activeKeyModifiers),this._updateManipulators()}_onPointerUp(t){if(t.pointerId===this._creatingPointerId&&r(this.analysisViewData.plane)){const e=bt(t);return this.shiftManipulator.events.emit(\"drag\",{action:\"end\",start:e,screenPoint:e}),I(this.analysisViewData.plane,this._startPlane),this.inputState=null,!0}return!1}_onClickPlacePlane(t){if(\"exclude\"===this.layersMode)return!1;if(this._isPlacingSlicePlane){const i=bt(t),a=x();if(this._pickPlane(i,!1,this._activeKeyModifiers,a)){if(I(a,this._startPlane),this.analysis.shape=at(a,this.view,this.view.spatialReference,new e),\"pointer-drag\"===t.type){const e=this._calculatePickRay(i);this.inputState=St(e,t.pointerId,a.origin,a)}return!0}}return!1}_onClickExcludeLayer(t){return!(\"exclude\"!==this.layersMode||!this.created)&&(this.view.hitTest(bt(t)).then((t=>{if(t.results.length){const e=t.results[0],i=\"graphic\"===e?.type&&e.graphic;if(i){const t=i.sourceLayer||i.layer;t&&this.analysis.excludedLayers.push(t)}}else t.ground.layer?this.analysis.excludedLayers.push(t.ground.layer):this.analysis.excludeGroundSurface=!0})),this._set(\"layersMode\",\"none\"),this.active&&(this.view.activeTool=null),!0)}_onKeyDown(t){return(t.key===N||t.key===q)&&(this._activeKeyModifiers[t.key]=!0,r(this._previewPlane)&&this._updatePreviewPlane(this._lastCursorPosition,this._activeKeyModifiers),!0)}_onKeyUp(t){return!(t.key!==N&&t.key!==q||!this._activeKeyModifiers[t.key])&&(delete this._activeKeyModifiers[t.key],r(this._previewPlane)&&this._updatePreviewPlane(this._lastCursorPosition,this._activeKeyModifiers),!0)}_onShiftGrab(t){if(\"start\"!==t.action||l(this.analysisViewData.plane)||!t.screenPoint)return;const e=this._calculatePickRay(t.screenPoint);I(this.analysisViewData.plane,this._startPlane),this.inputState=St(e,null,this.shiftManipulator.renderLocation,this.analysisViewData.plane)}_createShiftDragPipeline(t){return Vt(t,((t,e,i)=>{const a=this.inputState;if(l(a)||\"shift\"!==a.type)return;const s=r(this.analysisViewData.plane)?I(this.analysisViewData.plane,x()):null;e.next(wt(this.view,a.shiftPlane)).next(this._shiftDragAdjustSensitivity(a)).next(this._shiftDragUpdatePlane(a)),i.next((()=>{r(s)&&this._updateBoundedPlane(s)}))}))}_shiftDragAdjustSensitivity(t){return e=>{if(l(this.analysisViewData.plane))return null;const i=.001,a=Math.min((1-Math.abs(f(R(this.analysisViewData.plane),e.ray.direction)/M(e.ray.direction)))/i,1),s=-O(this._startPlane.plane,e.renderEnd),n=-O(this._startPlane.plane,t.startPoint);return t.depth=t.depth*(1-a)+s*a-n,e}}_shiftDragUpdatePlane(t){return()=>{if(l(this.analysisViewData.plane))return;const e=D(L.get(),this._startPlane.origin),i=D(L.get(),R(this._startPlane));T(i,i,-t.depth),V(i,i,e);const a=j(i,this.analysisViewData.plane.basis1,this.analysisViewData.plane.basis2,x());this._updateBoundedPlane(a)}}_onRotateHeadingGrab(t){if(\"start\"!==t.action||l(this.analysisViewData.plane)||!t.screenPoint)return;const e=st(this.analysisViewData.plane,this.view.renderCoordsHelper,nt.HEADING,C()),i=this._calculatePickRay(t.screenPoint),a=H();z(e,i,a)&&(I(this.analysisViewData.plane,this._startPlane),this.inputState={type:\"rotate\",rotatePlane:e,startPoint:a})}_createRotateHeadingDragPipeline(t){return Vt(t,((t,e,i)=>{const a=this.inputState;if(l(a)||\"rotate\"!==a.type)return;const s=r(this.analysisViewData.plane)?I(this.analysisViewData.plane,x()):null;e.next(wt(this.view,a.rotatePlane)).next(this._rotateDragRenderPlaneToRotate(a)).next(this._rotateDragUpdatePlaneFromRotate()),i.next((()=>{r(s)&&this._updateBoundedPlane(s)}))}))}_onRotateTiltGrab(t){if(\"start\"!==t.action||l(this.analysisViewData.plane)||!t.screenPoint)return;const e=st(this.analysisViewData.plane,this.view.renderCoordsHelper,nt.TILT,C()),i=this._calculatePickRay(t.screenPoint),a=H();z(e,i,a)&&(I(this.analysisViewData.plane,this._startPlane),this.inputState={type:\"rotate\",rotatePlane:e,startPoint:a})}_createRotateTiltDragPipeline(t){return Vt(t,((t,e,i)=>{const a=this.inputState;if(l(a)||\"rotate\"!==a.type)return;const s=r(this.analysisViewData.plane)?I(this.analysisViewData.plane,x()):null;e.next(wt(this.view,a.rotatePlane)).next(this._rotateDragRenderPlaneToRotate(a)).next(this._rotateDragUpdatePlaneFromRotate()),i.next((()=>{r(s)&&this._updateBoundedPlane(s)}))}))}_rotateDragRenderPlaneToRotate(t){return e=>{if(l(this.analysisViewData.plane))return null;const i=G(t.rotatePlane),a=gt(t.startPoint,e.renderEnd,this.analysisViewData.plane.origin,i);return{...e,rotateAxis:i,rotateAngle:a}}}_rotateDragUpdatePlaneFromRotate(){return t=>{if(l(this.analysisViewData.plane))return;const e=m(K.get(),t.rotateAngle,t.rotateAxis);if(l(e))return;const i=b(L.get(),this._startPlane.basis1,e),a=b(L.get(),this._startPlane.basis2,e),s=j(this.analysisViewData.plane.origin,i,a,x());this._updateBoundedPlane(s)}}_onResizeGrab(t,e){if(\"start\"!==t.action||l(this.analysisViewData.plane)||!t.screenPoint)return;const i=this._calculatePickRay(t.screenPoint),a=L.get();z(this.analysisViewData.plane.plane,i,a)&&(I(this.analysisViewData.plane,this._startPlane),this.inputState={type:\"resize\",activeHandleIdx:e,startPoint:S(a)})}_createResizeDragPipeline(t){return Vt(t,((t,e,i)=>{const a=this.inputState;if(l(a)||\"resize\"!==a.type||l(this.analysisViewData.plane))return;const s=I(this.analysisViewData.plane,x());e.next(wt(this.view,this.analysisViewData.plane.plane)).next(this._resizeDragUpdatePlane(a)),i.next((()=>{this._updateBoundedPlane(s)}))}))}_resizeDragUpdatePlane(t){return e=>{if(l(this.analysisViewData.plane))return;const i=this._resizeHandles[t.activeHandleIdx],a=rt(i,t.startPoint,e.renderEnd,this.view.state.camera,this._startPlane,I(this.analysisViewData.plane));this._updateBoundedPlane(a)}}_updateBoundedPlane(t){const e=this.analysisViewData;if(!r(e))throw new Error(\"valid internal object expected\");e.plane=t}_updatePreviewPlane(t,e={}){let i=this._previewPlane;if(this._previewPlane=null,l(t))return this._removeFrameTask(),void this._updateManipulators();if(!this.analysisViewData.plane&&this.active){const a=r(i)?i:x();if(i=r(i)?I(i,xt):null,this._pickPlane(t,!0,e,a)){const t=Q;let e=!1;r(i)&&(e=f(i.plane,a.plane)<t||f(k(L.get(),i.basis1),k(L.get(),a.basis1))<t),e&&(this._previewPlaneOpacity=0),this._previewPlane=a}}r(this._previewPlane)&&l(this._frameTask)&&0===this._previewPlaneOpacity?this._frameTask=c({update:({deltaTime:t})=>{this._previewPlaneOpacity=Math.min(this._previewPlaneOpacity+t/(1e3*W),1),this._updateManipulators(),1===this._previewPlaneOpacity&&this._removeFrameTask()}}):l(this._previewPlane)&&r(this._frameTask)?this._removeFrameTask():r(this._previewPlane)&&this._updateManipulators()}_removeFrameTask(){this._frameTask=o(this._frameTask)}_calculatePickRay(t){const e=U(),i=_(t,It);return ft(this.view.state.camera,i,e),k(e.direction,e.direction),e}_pickMinResult(t){const e=_(t,A.get());return this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(e,this._intersector),this._intersector.results.min}_pickPlane(t,e,i,a){const s=this._pickMinResult(t),n=L.get();if(!s.getIntersectionPoint(n))return!1;const r=s.getTransformedNormal(L.get()),l=this.view.state.camera;f(r,l.viewForward)>0&&T(r,r,-1);const o=lt(n,l),h=(e?1:-1)*o*X,p=T(L.get(),r,h);V(p,p,n);const u=this.analysis.tiltEnabled?ot.TILTED:ot.HORIZONTAL_OR_VERTICAL,c=i[N]?ot.VERTICAL:i[q]?ot.HORIZONTAL:u;return ht(p,r,o,o,l,c,this.view.renderCoordsHelper,a),!0}_clearPointerMoveTimeout(){this._prevPointerMoveTimeout=o(this._prevPointerMoveTimeout)}_resetPointerMoveTimeout(){this._clearPointerMoveTimeout(),this.shiftManipulator.state|=pt,this.rotateHeadingManipulator.state|=pt,this.rotateTiltManipulator.state|=pt,this._prevPointerMoveTimeout=this._clock.setTimeout((()=>{this.shiftManipulator.state&=~pt,this.rotateHeadingManipulator.state&=~pt,this.rotateTiltManipulator.state&=~pt}),this._pointerMoveTimerMs)}_updateManipulators(){if(kt.disableEngineLayers)return;let t,e=!1;if(r(this.analysisViewData.plane))t=this.analysisViewData.plane,e=!1;else{if(!r(this._previewPlane))return this.shiftManipulator.available=!1,this.rotateHeadingManipulator.available=!1,this.rotateTiltManipulator.available=!1,this.resizeManipulators.forEach((t=>t.available=!1)),this._previewPlaneOutlineVisualElement.visible=!1,void(this._previewPlaneGridVisualElement.visible=!1);t=this._previewPlane,e=!0}const i=ut(t,K.get());e?(this.shiftManipulator.available=!1,this.rotateHeadingManipulator.available=!1,this.rotateTiltManipulator.available=!1,this.resizeManipulators.forEach((t=>t.available=!1)),this._previewPlaneOutlineVisualElement.attached=!0,this._previewPlaneGridVisualElement.attached=!0,this._previewPlaneOutlineVisualElement.visible=!0,this._previewPlaneGridVisualElement.visible=!0):(this.shiftManipulator.available=!0,this.rotateHeadingManipulator.available=!0,this.rotateTiltManipulator.available=this.analysis.tiltEnabled,this.resizeManipulators.forEach((t=>t.available=!0)),ct(this.shiftManipulator,i,t,this.view.state.camera),dt(this.rotateHeadingManipulator,i,t,this.view.renderCoordsHelper),_t(this.rotateTiltManipulator,i,t),this.resizeManipulators.forEach(((e,a)=>vt(e,this._resizeHandles[a],i,t))),this._previewPlaneOutlineVisualElement.visible=!1,this._previewPlaneGridVisualElement.visible=!1);const a=E(L.get(),M(t.basis1),M(t.basis2),1),s=g(K.get(),a),n=w(s,i,s);this._previewPlaneOutlineVisualElement.transform=n,this._previewPlaneGridVisualElement.transform=n,this._updateMaterials()}_updateMaterials(){const t=[Z[0],Z[1],Z[2],Z[3]*this._previewPlaneOpacity];this._previewPlaneOutlineVisualElement.color=t;const e=[J[0],J[1],J[2],J[3]*this._previewPlaneOpacity],i=[0,0,0,0];this._previewPlaneGridVisualElement.backgroundColor=e,this._previewPlaneGridVisualElement.gridColor=i}_updateManipulatorsInteractive(t){if(!t.grabbing)return this.shiftManipulator.interactive=!0,this.rotateHeadingManipulator.interactive=!0,this.rotateTiltManipulator.interactive=!0,void this.resizeManipulators.forEach((t=>{t.interactive=!0}));this.shiftManipulator.interactive=this.shiftManipulator===t,this.rotateHeadingManipulator.interactive=this.rotateHeadingManipulator===t,this.rotateTiltManipulator.interactive=this.rotateTiltManipulator===t,this.resizeManipulators.forEach((e=>{e.interactive=e===t}))}testData(){return{plane:this.analysisViewData.plane,setPointerMoveTimerMs:t=>{this._pointerMoveTimerMs=t}}}};function St(t,e,i,a){const s=Pt(i,R(a),t.direction,C()),n=H();return z(s,t,n)?{type:\"shift\",creatingPointerId:e,hasBeenDragged:!1,shiftPlane:s,depth:0,startPoint:n}:null}function Ht(t){return\"mouse\"!==t.pointerType||0===t.button}Et.disableEngineLayers=!1,t([P()],Et.prototype,\"_clock\",void 0),t([P({constructOnly:!0})],Et.prototype,\"view\",void 0),t([P()],Et.prototype,\"analysisViewData\",void 0),t([P({readOnly:!0})],Et.prototype,\"state\",null),t([P({readOnly:!0})],Et.prototype,\"cursor\",null),t([P()],Et.prototype,\"analysis\",null),t([P()],Et.prototype,\"removeIncompleteOnCancel\",void 0),t([P({readOnly:!0})],Et.prototype,\"layersMode\",void 0),t([P({value:null})],Et.prototype,\"inputState\",null),t([P()],Et.prototype,\"_isPlacingSlicePlane\",null),t([P()],Et.prototype,\"_creatingPointerId\",null),Et=kt=t([y(\"esri.views.3d.analysis.Slice.SliceTool\")],Et);const xt=x(),It=v(),Rt=Et;export{Rt as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}