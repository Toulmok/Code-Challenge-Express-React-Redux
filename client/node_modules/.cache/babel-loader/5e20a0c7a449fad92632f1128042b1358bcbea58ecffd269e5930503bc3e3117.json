{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../geometry.js\";\nimport e from \"../core/Error.js\";\nimport r from \"../core/Logger.js\";\nimport { isSome as t } from \"../core/maybe.js\";\nimport a from \"../geometry/SpatialReference.js\";\nconst s = r.getLogger(\"esri.support.arcadeOnDemand\");\nlet c;\nfunction i() {\n  return c || (c = (async () => {\n    const e = await import(\"./arcadeUtils.js\");\n    return {\n      arcade: e.arcade,\n      arcadeUtils: e,\n      Dictionary: e.Dictionary,\n      Feature: e.arcadeFeature\n    };\n  })()), c;\n}\nconst n = (e, r, t) => u.create(e, r, t, null, [\"$feature\"]),\n  o = (e, r, t) => u.create(e, r, t, null, [\"$feature\", \"$view\"]),\n  l = o,\n  p = (e, r, t, a) => u.create(e, r, t, a, [\"$feature\", \"$view\"]);\nclass u {\n  constructor(e, r, t, a, s, c, i) {\n    this.script = e, this.evaluate = a;\n    const n = Array.isArray(c) ? c : c.fields;\n    this.fields = n, this._syntaxTree = t, this._arcade = r, this._arcadeFeature = s, this._spatialReference = i, this._referencesGeometry = r.scriptTouchesGeometry(this._syntaxTree), this._referencesScale = this._arcade.referencesMember(this._syntaxTree, \"scale\");\n  }\n  static async create(r, c, n, o, l, p) {\n    const {\n        arcade: m,\n        Feature: f,\n        Dictionary: d\n      } = await i(),\n      y = a.fromJSON(c);\n    let h;\n    try {\n      h = m.parseScript(r, p);\n    } catch (A) {\n      return s.error(new e(\"arcade-bad-expression\", \"Failed to parse arcade script\", {\n        script: r,\n        error: A\n      })), null;\n    }\n    const w = l.reduce((e, r) => ({\n      ...e,\n      [r]: null\n    }), {});\n    let g = null;\n    t(o) && (g = new d(o), g.immutable = !0, w.$config = null);\n    const _ = m.scriptUsesGeometryEngine(h),\n      F = _ && m.enableGeometrySupport(),\n      S = m.scriptUsesFeatureSet(h) && m.enableFeatureSetSupport(),\n      $ = m.scriptIsAsync(h),\n      b = $ && m.enableAsyncSupport(),\n      v = {\n        vars: w,\n        spatialReference: y,\n        useAsync: !!b\n      };\n    await Promise.all([F, S, b]);\n    const j = new Set();\n    await m.loadDependentModules(j, h, null, $, _);\n    const G = new d();\n    G.immutable = !1, G.setField(\"scale\", 0);\n    const R = m.compileScript(h, v),\n      x = e => (\"$view\" in e && e.$view && (G.setField(\"scale\", \"object\" == typeof e.$view ? e.$view.scale : void 0), e.$view = G), g && (e.$config = g), R({\n        vars: e,\n        spatialReference: y\n      }));\n    return new u(r, m, h, x, new f(), n, y);\n  }\n  repurposeFeature(e) {\n    return e.geometry && !e.geometry.spatialReference && (e.geometry.spatialReference = this._spatialReference), this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry, e.attributes, {\n      fields: this.fields\n    }), this._arcadeFeature;\n  }\n  referencesGeometry() {\n    return this._referencesGeometry;\n  }\n  referencesScale() {\n    return this._referencesScale;\n  }\n}\nexport { u as ArcadeExpression, p as createDictionaryExpression, n as createLabelExpression, o as createRendererExpression, l as createVVExpression, i as loadArcade };","map":{"version":3,"names":["e","r","isSome","t","a","s","getLogger","c","i","arcade","arcadeUtils","Dictionary","Feature","arcadeFeature","n","u","create","o","l","p","constructor","script","evaluate","Array","isArray","fields","_syntaxTree","_arcade","_arcadeFeature","_spatialReference","_referencesGeometry","scriptTouchesGeometry","_referencesScale","referencesMember","m","f","d","y","fromJSON","h","parseScript","A","error","w","reduce","g","immutable","$config","_","scriptUsesGeometryEngine","F","enableGeometrySupport","S","scriptUsesFeatureSet","enableFeatureSetSupport","$","scriptIsAsync","b","enableAsyncSupport","v","vars","spatialReference","useAsync","Promise","all","j","Set","loadDependentModules","G","setField","R","compileScript","x","$view","scale","repurposeFeature","geometry","repurposeFromGraphicLikeObject","attributes","referencesGeometry","referencesScale","ArcadeExpression","createDictionaryExpression","createLabelExpression","createRendererExpression","createVVExpression","loadArcade"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/support/arcadeOnDemand.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../geometry.js\";import e from\"../core/Error.js\";import r from\"../core/Logger.js\";import{isSome as t}from\"../core/maybe.js\";import a from\"../geometry/SpatialReference.js\";const s=r.getLogger(\"esri.support.arcadeOnDemand\");let c;function i(){return c||(c=(async()=>{const e=await import(\"./arcadeUtils.js\");return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),c}const n=(e,r,t)=>u.create(e,r,t,null,[\"$feature\"]),o=(e,r,t)=>u.create(e,r,t,null,[\"$feature\",\"$view\"]),l=o,p=(e,r,t,a)=>u.create(e,r,t,a,[\"$feature\",\"$view\"]);class u{constructor(e,r,t,a,s,c,i){this.script=e,this.evaluate=a;const n=Array.isArray(c)?c:c.fields;this.fields=n,this._syntaxTree=t,this._arcade=r,this._arcadeFeature=s,this._spatialReference=i,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,\"scale\")}static async create(r,c,n,o,l,p){const{arcade:m,Feature:f,Dictionary:d}=await i(),y=a.fromJSON(c);let h;try{h=m.parseScript(r,p)}catch(A){return s.error(new e(\"arcade-bad-expression\",\"Failed to parse arcade script\",{script:r,error:A})),null}const w=l.reduce(((e,r)=>({...e,[r]:null})),{});let g=null;t(o)&&(g=new d(o),g.immutable=!0,w.$config=null);const _=m.scriptUsesGeometryEngine(h),F=_&&m.enableGeometrySupport(),S=m.scriptUsesFeatureSet(h)&&m.enableFeatureSetSupport(),$=m.scriptIsAsync(h),b=$&&m.enableAsyncSupport(),v={vars:w,spatialReference:y,useAsync:!!b};await Promise.all([F,S,b]);const j=new Set;await m.loadDependentModules(j,h,null,$,_);const G=new d;G.immutable=!1,G.setField(\"scale\",0);const R=m.compileScript(h,v),x=e=>(\"$view\"in e&&e.$view&&(G.setField(\"scale\",\"object\"==typeof e.$view?e.$view.scale:void 0),e.$view=G),g&&(e.$config=g),R({vars:e,spatialReference:y}));return new u(r,m,h,x,new f,n,y)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}}export{u as ArcadeExpression,p as createDictionaryExpression,n as createLabelExpression,o as createRendererExpression,l as createVVExpression,i as loadArcade};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}