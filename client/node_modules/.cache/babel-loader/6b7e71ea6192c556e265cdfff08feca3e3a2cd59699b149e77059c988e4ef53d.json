{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport has from \"../../../core/has.js\";\nimport { isSome as e } from \"../../../core/maybe.js\";\nimport { PooledRBush as t } from \"../../../core/libs/rbush/PooledRBush.js\";\nimport { georeferenceApplyTransform as r } from \"./georeference.js\";\nclass n {\n  async createIndex(r, n) {\n    const o = new Array();\n    if (!r.vertexAttributes || !r.vertexAttributes.position) return new t();\n    const s = this._createMeshData(r),\n      a = e(n) ? await n.invoke(\"createIndexThread\", s, {\n        transferList: o\n      }) : this.createIndexThread(s).result;\n    return this._createPooledRBush().fromJSON(a);\n  }\n  createIndexThread(e) {\n    const t = new Float64Array(e.position),\n      r = this._createPooledRBush();\n    return e.components ? this._createIndexComponentsThread(r, t, e.components.map(e => new Uint32Array(e))) : this._createIndexAllThread(r, t);\n  }\n  _createIndexAllThread(e, t) {\n    const r = new Array(t.length / 9);\n    let n = 0;\n    for (let s = 0; s < t.length; s += 9) r[n++] = o(t, s + 0, s + 3, s + 6);\n    return e.load(r), {\n      result: e.toJSON()\n    };\n  }\n  _createIndexComponentsThread(e, t, r) {\n    let n = 0;\n    for (const o of r) n += o.length / 3;\n    const s = new Array(n);\n    let a = 0;\n    for (const i of r) for (let e = 0; e < i.length; e += 3) s[a++] = o(t, 3 * i[e + 0], 3 * i[e + 1], 3 * i[e + 2]);\n    return e.load(s), {\n      result: e.toJSON()\n    };\n  }\n  _createMeshData(e) {\n    const t = (e.transform ? r({\n      position: e.vertexAttributes.position,\n      normal: null,\n      tangent: null\n    }, e.transform, e.spatialReference).position : e.vertexAttributes.position).buffer;\n    return !e.components || e.components.some(e => !e.faces) ? {\n      position: t\n    } : {\n      position: t,\n      components: e.components.map(e => e.faces)\n    };\n  }\n  _createPooledRBush() {\n    return new t(9, has(\"esri-csp-restrictions\") ? e => e : [\".minX\", \".minY\", \".maxX\", \".maxY\"]);\n  }\n}\nfunction o(e, t, r, n) {\n  return {\n    minX: Math.min(e[t + 0], e[r + 0], e[n + 0]),\n    maxX: Math.max(e[t + 0], e[r + 0], e[n + 0]),\n    minY: Math.min(e[t + 1], e[r + 1], e[n + 1]),\n    maxY: Math.max(e[t + 1], e[r + 1], e[n + 1]),\n    p0: [e[t + 0], e[t + 1], e[t + 2]],\n    p1: [e[r + 0], e[r + 1], e[r + 2]],\n    p2: [e[n + 0], e[n + 1], e[n + 2]]\n  };\n}\nexport { n as default };","map":{"version":3,"names":["has","isSome","e","PooledRBush","t","georeferenceApplyTransform","r","n","createIndex","o","Array","vertexAttributes","position","s","_createMeshData","a","invoke","transferList","createIndexThread","result","_createPooledRBush","fromJSON","Float64Array","components","_createIndexComponentsThread","map","Uint32Array","_createIndexAllThread","length","load","toJSON","i","transform","normal","tangent","spatialReference","buffer","some","faces","minX","Math","min","maxX","max","minY","maxY","p0","p1","p2","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/geometry/support/meshUtils/ElevationSamplerWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport has from\"../../../core/has.js\";import{isSome as e}from\"../../../core/maybe.js\";import{PooledRBush as t}from\"../../../core/libs/rbush/PooledRBush.js\";import{georeferenceApplyTransform as r}from\"./georeference.js\";class n{async createIndex(r,n){const o=new Array;if(!r.vertexAttributes||!r.vertexAttributes.position)return new t;const s=this._createMeshData(r),a=e(n)?await n.invoke(\"createIndexThread\",s,{transferList:o}):this.createIndexThread(s).result;return this._createPooledRBush().fromJSON(a)}createIndexThread(e){const t=new Float64Array(e.position),r=this._createPooledRBush();return e.components?this._createIndexComponentsThread(r,t,e.components.map((e=>new Uint32Array(e)))):this._createIndexAllThread(r,t)}_createIndexAllThread(e,t){const r=new Array(t.length/9);let n=0;for(let s=0;s<t.length;s+=9)r[n++]=o(t,s+0,s+3,s+6);return e.load(r),{result:e.toJSON()}}_createIndexComponentsThread(e,t,r){let n=0;for(const o of r)n+=o.length/3;const s=new Array(n);let a=0;for(const i of r)for(let e=0;e<i.length;e+=3)s[a++]=o(t,3*i[e+0],3*i[e+1],3*i[e+2]);return e.load(s),{result:e.toJSON()}}_createMeshData(e){const t=(e.transform?r({position:e.vertexAttributes.position,normal:null,tangent:null},e.transform,e.spatialReference).position:e.vertexAttributes.position).buffer;return!e.components||e.components.some((e=>!e.faces))?{position:t}:{position:t,components:e.components.map((e=>e.faces))}}_createPooledRBush(){return new t(9,has(\"esri-csp-restrictions\")?e=>e:[\".minX\",\".minY\",\".maxX\",\".maxY\"])}}function o(e,t,r,n){return{minX:Math.min(e[t+0],e[r+0],e[n+0]),maxX:Math.max(e[t+0],e[r+0],e[n+0]),minY:Math.min(e[t+1],e[r+1],e[n+1]),maxY:Math.max(e[t+1],e[r+1],e[n+1]),p0:[e[t+0],e[t+1],e[t+2]],p1:[e[r+0],e[r+1],e[r+2]],p2:[e[n+0],e[n+1],e[n+2]]}}export{n as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,GAAG,MAAK,sBAAsB;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,WAAW,IAAIC,CAAC,QAAK,yCAAyC;AAAC,SAAOC,0BAA0B,IAAIC,CAAC,QAAK,mBAAmB;AAAC,MAAMC,CAAC;EAAC,MAAMC,WAAWA,CAACF,CAAC,EAACC,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAIC,KAAK;IAAC,IAAG,CAACJ,CAAC,CAACK,gBAAgB,IAAE,CAACL,CAAC,CAACK,gBAAgB,CAACC,QAAQ,EAAC,OAAO,IAAIR,CAAC;IAAC,MAAMS,CAAC,GAAC,IAAI,CAACC,eAAe,CAACR,CAAC,CAAC;MAACS,CAAC,GAACb,CAAC,CAACK,CAAC,CAAC,GAAC,MAAMA,CAAC,CAACS,MAAM,CAAC,mBAAmB,EAACH,CAAC,EAAC;QAACI,YAAY,EAACR;MAAC,CAAC,CAAC,GAAC,IAAI,CAACS,iBAAiB,CAACL,CAAC,CAAC,CAACM,MAAM;IAAC,OAAO,IAAI,CAACC,kBAAkB,EAAE,CAACC,QAAQ,CAACN,CAAC,CAAC;EAAA;EAACG,iBAAiBA,CAAChB,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAIkB,YAAY,CAACpB,CAAC,CAACU,QAAQ,CAAC;MAACN,CAAC,GAAC,IAAI,CAACc,kBAAkB,EAAE;IAAC,OAAOlB,CAAC,CAACqB,UAAU,GAAC,IAAI,CAACC,4BAA4B,CAAClB,CAAC,EAACF,CAAC,EAACF,CAAC,CAACqB,UAAU,CAACE,GAAG,CAAEvB,CAAC,IAAE,IAAIwB,WAAW,CAACxB,CAAC,CAAC,CAAE,CAAC,GAAC,IAAI,CAACyB,qBAAqB,CAACrB,CAAC,EAACF,CAAC,CAAC;EAAA;EAACuB,qBAAqBA,CAACzB,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAII,KAAK,CAACN,CAAC,CAACwB,MAAM,GAAC,CAAC,CAAC;IAAC,IAAIrB,CAAC,GAAC,CAAC;IAAC,KAAI,IAAIM,CAAC,GAAC,CAAC,EAACA,CAAC,GAACT,CAAC,CAACwB,MAAM,EAACf,CAAC,IAAE,CAAC,EAACP,CAAC,CAACC,CAAC,EAAE,CAAC,GAACE,CAAC,CAACL,CAAC,EAACS,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,CAAC,CAAC;IAAC,OAAOX,CAAC,CAAC2B,IAAI,CAACvB,CAAC,CAAC,EAAC;MAACa,MAAM,EAACjB,CAAC,CAAC4B,MAAM;IAAE,CAAC;EAAA;EAACN,4BAA4BA,CAACtB,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAIC,CAAC,GAAC,CAAC;IAAC,KAAI,MAAME,CAAC,IAAIH,CAAC,EAACC,CAAC,IAAEE,CAAC,CAACmB,MAAM,GAAC,CAAC;IAAC,MAAMf,CAAC,GAAC,IAAIH,KAAK,CAACH,CAAC,CAAC;IAAC,IAAIQ,CAAC,GAAC,CAAC;IAAC,KAAI,MAAMgB,CAAC,IAAIzB,CAAC,EAAC,KAAI,IAAIJ,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC6B,CAAC,CAACH,MAAM,EAAC1B,CAAC,IAAE,CAAC,EAACW,CAAC,CAACE,CAAC,EAAE,CAAC,GAACN,CAAC,CAACL,CAAC,EAAC,CAAC,GAAC2B,CAAC,CAAC7B,CAAC,GAAC,CAAC,CAAC,EAAC,CAAC,GAAC6B,CAAC,CAAC7B,CAAC,GAAC,CAAC,CAAC,EAAC,CAAC,GAAC6B,CAAC,CAAC7B,CAAC,GAAC,CAAC,CAAC,CAAC;IAAC,OAAOA,CAAC,CAAC2B,IAAI,CAAChB,CAAC,CAAC,EAAC;MAACM,MAAM,EAACjB,CAAC,CAAC4B,MAAM;IAAE,CAAC;EAAA;EAAChB,eAAeA,CAACZ,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,CAACF,CAAC,CAAC8B,SAAS,GAAC1B,CAAC,CAAC;MAACM,QAAQ,EAACV,CAAC,CAACS,gBAAgB,CAACC,QAAQ;MAACqB,MAAM,EAAC,IAAI;MAACC,OAAO,EAAC;IAAI,CAAC,EAAChC,CAAC,CAAC8B,SAAS,EAAC9B,CAAC,CAACiC,gBAAgB,CAAC,CAACvB,QAAQ,GAACV,CAAC,CAACS,gBAAgB,CAACC,QAAQ,EAAEwB,MAAM;IAAC,OAAM,CAAClC,CAAC,CAACqB,UAAU,IAAErB,CAAC,CAACqB,UAAU,CAACc,IAAI,CAAEnC,CAAC,IAAE,CAACA,CAAC,CAACoC,KAAK,CAAE,GAAC;MAAC1B,QAAQ,EAACR;IAAC,CAAC,GAAC;MAACQ,QAAQ,EAACR,CAAC;MAACmB,UAAU,EAACrB,CAAC,CAACqB,UAAU,CAACE,GAAG,CAAEvB,CAAC,IAAEA,CAAC,CAACoC,KAAK;IAAE,CAAC;EAAA;EAAClB,kBAAkBA,CAAA,EAAE;IAAC,OAAO,IAAIhB,CAAC,CAAC,CAAC,EAACJ,GAAG,CAAC,uBAAuB,CAAC,GAACE,CAAC,IAAEA,CAAC,GAAC,CAAC,OAAO,EAAC,OAAO,EAAC,OAAO,EAAC,OAAO,CAAC,CAAC;EAAA;AAAC;AAAC,SAASO,CAACA,CAACP,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAAC;EAAC,OAAM;IAACgC,IAAI,EAACC,IAAI,CAACC,GAAG,CAACvC,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,EAACF,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC,EAACJ,CAAC,CAACK,CAAC,GAAC,CAAC,CAAC,CAAC;IAACmC,IAAI,EAACF,IAAI,CAACG,GAAG,CAACzC,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,EAACF,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC,EAACJ,CAAC,CAACK,CAAC,GAAC,CAAC,CAAC,CAAC;IAACqC,IAAI,EAACJ,IAAI,CAACC,GAAG,CAACvC,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,EAACF,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC,EAACJ,CAAC,CAACK,CAAC,GAAC,CAAC,CAAC,CAAC;IAACsC,IAAI,EAACL,IAAI,CAACG,GAAG,CAACzC,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,EAACF,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC,EAACJ,CAAC,CAACK,CAAC,GAAC,CAAC,CAAC,CAAC;IAACuC,EAAE,EAAC,CAAC5C,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,EAACF,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,EAACF,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,CAAC;IAAC2C,EAAE,EAAC,CAAC7C,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC,EAACJ,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC,EAACJ,CAAC,CAACI,CAAC,GAAC,CAAC,CAAC,CAAC;IAAC0C,EAAE,EAAC,CAAC9C,CAAC,CAACK,CAAC,GAAC,CAAC,CAAC,EAACL,CAAC,CAACK,CAAC,GAAC,CAAC,CAAC,EAACL,CAAC,CAACK,CAAC,GAAC,CAAC,CAAC;EAAC,CAAC;AAAA;AAAC,SAAOA,CAAC,IAAI0C,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}