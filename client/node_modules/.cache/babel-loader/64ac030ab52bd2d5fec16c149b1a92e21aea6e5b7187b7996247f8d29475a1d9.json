{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Error.js\";\nimport { isNone as t, isSome as i } from \"../../../../core/maybe.js\";\nimport { getJsonType as s, isPoint as r } from \"../../../../geometry/support/jsonUtils.js\";\nimport { WGS84 as n } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport { convertFromFeatures as a, convertToFeature as o, convertFromFeature as l } from \"../../featureConversionUtils.js\";\nimport { initialObjectId as d, findLastObjectIdFromFeatures as u } from \"../../objectIdUtils.js\";\nimport p from \"../../data/FeatureStore.js\";\nimport { checkProjectionSupport as f, project as c } from \"../../data/projectionSupport.js\";\nimport { QueryEngine as y } from \"../../data/QueryEngine.js\";\nimport { createDefaultAttributesFunction as m, createDrawingInfo as h, createDefaultTemplate as g } from \"./clientSideDefaults.js\";\nimport { loadGeometryEngineForSimplify as I, createFeatureEditErrorResult as b, mixAttributes as F, createFeatureEditSuccessResult as j, simplify as _ } from \"./sourceUtils.js\";\nimport E from \"../../../support/FieldsIndex.js\";\nimport { kebabDict as x } from \"../../../support/fieldType.js\";\nimport { getFieldDefaultValue as T } from \"../../../support/fieldUtils.js\";\nconst R = n,\n  q = {\n    xmin: -180,\n    ymin: -90,\n    xmax: 180,\n    ymax: 90,\n    spatialReference: n\n  },\n  w = {\n    hasAttachments: !1,\n    capabilities: \"query, editing, create, delete, update\",\n    useStandardizedQueries: !0,\n    supportsCoordinatesQuantization: !0,\n    supportsReturningQueryGeometry: !0,\n    advancedQueryCapabilities: {\n      supportsQueryAttachments: !1,\n      supportsStatistics: !0,\n      supportsPercentileStatistics: !0,\n      supportsReturningGeometryCentroid: !0,\n      supportsQueryWithDistance: !0,\n      supportsDistinct: !0,\n      supportsReturningQueryExtent: !0,\n      supportsReturningGeometryProperties: !1,\n      supportsHavingClause: !0,\n      supportsOrderBy: !0,\n      supportsPagination: !0,\n      supportsQueryWithResultType: !1,\n      supportsSqlExpression: !0,\n      supportsDisjointSpatialRel: !0\n    }\n  };\nfunction D(e) {\n  return r(e) ? null != e.z : !!e.hasZ;\n}\nfunction O(e) {\n  return r(e) ? null != e.m : !!e.hasM;\n}\nclass S {\n  constructor() {\n    this._queryEngine = null, this._nextObjectId = null;\n  }\n  destroy() {\n    this._queryEngine && this._queryEngine && this._queryEngine.destroy(), this._queryEngine = this._fieldsIndex = this._createDefaultAttributes = null;\n  }\n  async load(t) {\n    const i = [],\n      {\n        features: s\n      } = t,\n      r = this._inferLayerProperties(s, t.fields),\n      n = t.fields || [],\n      a = null != t.hasM ? t.hasM : !!r.hasM,\n      o = null != t.hasZ ? t.hasZ : !!r.hasZ,\n      l = !t.spatialReference && !r.spatialReference,\n      c = l ? R : t.spatialReference || r.spatialReference,\n      I = l ? q : null,\n      b = t.geometryType || r.geometryType,\n      F = !b;\n    let j = t.objectIdField || r.objectIdField,\n      _ = t.timeInfo;\n    if (!F && (l && i.push({\n      name: \"feature-layer:spatial-reference-not-found\",\n      message: \"Spatial reference not provided or found in features. Defaults to WGS84\"\n    }), !b)) throw new e(\"feature-layer:missing-property\", \"geometryType not set and couldn't be inferred from the provided features\");\n    if (!j) throw new e(\"feature-layer:missing-property\", \"objectIdField not set and couldn't be found in the provided fields\");\n    if (r.objectIdField && j !== r.objectIdField && (i.push({\n      name: \"feature-layer:duplicated-oid-field\",\n      message: `Provided objectIdField \"${j}\" doesn't match the field name \"${r.objectIdField}\", found in the provided fields`\n    }), j = r.objectIdField), j && !r.objectIdField) {\n      let e = null;\n      n.some(t => t.name === j && (e = t, !0)) ? (e.type = \"esriFieldTypeOID\", e.editable = !1, e.nullable = !1) : n.unshift({\n        alias: j,\n        name: j,\n        type: \"esriFieldTypeOID\",\n        editable: !1,\n        nullable: !1\n      });\n    }\n    for (const d of n) {\n      if (null == d.name && (d.name = d.alias), null == d.alias && (d.alias = d.name), !d.name) throw new e(\"feature-layer:invalid-field-name\", \"field name is missing\", {\n        field: d\n      });\n      if (d.name === j && (d.type = \"esriFieldTypeOID\"), !x.jsonValues.includes(d.type)) throw new e(\"feature-layer:invalid-field-type\", `invalid type for field \"${d.name}\"`, {\n        field: d\n      });\n    }\n    const D = {};\n    for (const e of n) if (\"esriFieldTypeOID\" !== e.type && \"esriFieldTypeGlobalID\" !== e.type) {\n      const t = T(e);\n      void 0 !== t && (D[e.name] = t);\n    }\n    if (this._fieldsIndex = new E(n), this._createDefaultAttributes = m(D, j), _) {\n      if (_.startTimeField) {\n        const e = this._fieldsIndex.get(_.startTimeField);\n        e ? (_.startTimeField = e.name, e.type = \"esriFieldTypeDate\") : _.startTimeField = null;\n      }\n      if (_.endTimeField) {\n        const e = this._fieldsIndex.get(_.endTimeField);\n        e ? (_.endTimeField = e.name, e.type = \"esriFieldTypeDate\") : _.endTimeField = null;\n      }\n      if (_.trackIdField) {\n        const e = this._fieldsIndex.get(_.trackIdField);\n        e ? _.trackIdField = e.name : (_.trackIdField = null, i.push({\n          name: \"feature-layer:invalid-timeInfo-trackIdField\",\n          message: \"trackIdField is missing\",\n          details: {\n            timeInfo: _\n          }\n        }));\n      }\n      _.startTimeField || _.endTimeField || (i.push({\n        name: \"feature-layer:invalid-timeInfo\",\n        message: \"startTimeField and endTimeField are missing or invalid\",\n        details: {\n          timeInfo: _\n        }\n      }), _ = null);\n    }\n    const O = {\n      warnings: i,\n      featureErrors: [],\n      layerDefinition: {\n        ...w,\n        drawingInfo: h(b),\n        templates: g(D),\n        extent: I,\n        geometryType: b,\n        objectIdField: j,\n        fields: n,\n        hasZ: o,\n        hasM: a,\n        timeInfo: _\n      },\n      assignedObjectIds: {}\n    };\n    if (this._queryEngine = new y({\n      fields: n,\n      geometryType: b,\n      hasM: a,\n      hasZ: o,\n      objectIdField: j,\n      spatialReference: c,\n      featureStore: new p({\n        geometryType: b,\n        hasM: a,\n        hasZ: o\n      }),\n      timeInfo: _,\n      cacheSpatialQueries: !0\n    }), !s || !s.length) return this._nextObjectId = d, O;\n    const S = u(j, s);\n    return this._nextObjectId = S + 1, await f(s, c), this._loadInitialFeatures(O, s);\n  }\n  async applyEdits(e) {\n    const {\n      spatialReference: t,\n      geometryType: i\n    } = this._queryEngine;\n    return await Promise.all([I(t, i), f(e.adds, t), f(e.updates, t)]), this._applyEdits(e);\n  }\n  queryFeatures(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQuery(e, t.signal);\n  }\n  queryFeatureCount(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQueryForCount(e, t.signal);\n  }\n  queryObjectIds(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQueryForIds(e, t.signal);\n  }\n  queryExtent(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQueryForExtent(e, t.signal);\n  }\n  querySnapping(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._queryEngine.executeQueryForSnapping(e, t.signal);\n  }\n  _inferLayerProperties(e, i) {\n    let r,\n      n,\n      a = null,\n      o = null,\n      l = null;\n    for (const d of e) {\n      const e = d.geometry;\n      if (!t(e) && (a || (a = s(e)), o || (o = e.spatialReference), null == r && (r = D(e)), null == n && (n = O(e)), a && o && null != r && null != n)) break;\n    }\n    if (i && i.length) {\n      let e = null;\n      i.some(t => {\n        const i = \"esriFieldTypeOID\" === t.type,\n          s = !t.type && t.name && \"objectid\" === t.name.toLowerCase();\n        return e = t, i || s;\n      }) && (l = e.name);\n    }\n    return {\n      geometryType: a,\n      spatialReference: o,\n      objectIdField: l,\n      hasM: n,\n      hasZ: r\n    };\n  }\n  async _loadInitialFeatures(e, t) {\n    const {\n        geometryType: r,\n        hasM: n,\n        hasZ: o,\n        objectIdField: l,\n        spatialReference: d,\n        featureStore: u\n      } = this._queryEngine,\n      p = [];\n    for (const a of t) {\n      if (null != a.uid && (e.assignedObjectIds[a.uid] = -1), a.geometry && r !== s(a.geometry)) {\n        e.featureErrors.push(b(\"Incorrect geometry type.\"));\n        continue;\n      }\n      const t = this._createDefaultAttributes(),\n        n = F(this._fieldsIndex, t, a.attributes, !0, e.warnings);\n      n ? e.featureErrors.push(n) : (this._assignObjectId(t, a.attributes, !0), a.attributes = t, null != a.uid && (e.assignedObjectIds[a.uid] = a.attributes[l]), i(a.geometry) && (a.geometry = c(a.geometry, a.geometry.spatialReference, d)), p.push(a));\n    }\n    u.addMany(a([], p, r, o, n, l));\n    const {\n      fullExtent: f,\n      timeExtent: y\n    } = await this._queryEngine.fetchRecomputedExtents();\n    if (e.layerDefinition.extent = f, y) {\n      const {\n        start: t,\n        end: i\n      } = y;\n      e.layerDefinition.timeInfo.timeExtent = [t, i];\n    }\n    return e;\n  }\n  async _applyEdits(e) {\n    const {\n        adds: t,\n        updates: i,\n        deletes: s\n      } = e,\n      r = {\n        addResults: [],\n        deleteResults: [],\n        updateResults: [],\n        uidToObjectId: {}\n      };\n    if (t && t.length && this._applyAddEdits(r, t), i && i.length && this._applyUpdateEdits(r, i), s && s.length) {\n      for (const e of s) r.deleteResults.push(j(e));\n      this._queryEngine.featureStore.removeManyById(s);\n    }\n    const {\n      fullExtent: n,\n      timeExtent: a\n    } = await this._queryEngine.fetchRecomputedExtents();\n    return {\n      extent: n,\n      timeExtent: a,\n      featureEditResults: r\n    };\n  }\n  _applyAddEdits(e, t) {\n    const {\n        addResults: r\n      } = e,\n      {\n        geometryType: n,\n        hasM: o,\n        hasZ: l,\n        objectIdField: d,\n        spatialReference: u,\n        featureStore: p\n      } = this._queryEngine,\n      f = [];\n    for (const a of t) {\n      if (a.geometry && n !== s(a.geometry)) {\n        r.push(b(\"Incorrect geometry type.\"));\n        continue;\n      }\n      const t = this._createDefaultAttributes(),\n        o = F(this._fieldsIndex, t, a.attributes);\n      if (o) r.push(o);else {\n        if (this._assignObjectId(t, a.attributes), a.attributes = t, null != a.uid) {\n          const t = a.attributes[d];\n          e.uidToObjectId[a.uid] = t;\n        }\n        if (i(a.geometry)) {\n          const e = a.geometry.spatialReference ?? u;\n          a.geometry = c(_(a.geometry, e), e, u);\n        }\n        f.push(a), r.push(j(a.attributes[d]));\n      }\n    }\n    p.addMany(a([], f, n, l, o, d));\n  }\n  _applyUpdateEdits(_ref, t) {\n    let {\n      updateResults: e\n    } = _ref;\n    const {\n      geometryType: r,\n      hasM: n,\n      hasZ: a,\n      objectIdField: d,\n      spatialReference: u,\n      featureStore: p\n    } = this._queryEngine;\n    for (const f of t) {\n      const {\n          attributes: t,\n          geometry: y\n        } = f,\n        m = t && t[d];\n      if (null == m) {\n        e.push(b(`Identifier field ${d} missing`));\n        continue;\n      }\n      if (!p.has(m)) {\n        e.push(b(`Feature with object id ${m} missing`));\n        continue;\n      }\n      const h = o(p.getFeature(m), r, a, n);\n      if (i(y)) {\n        if (r !== s(y)) {\n          e.push(b(\"Incorrect geometry type.\"));\n          continue;\n        }\n        const t = y.spatialReference ?? u;\n        h.geometry = c(_(y, t), t, u);\n      }\n      if (t) {\n        const i = F(this._fieldsIndex, h.attributes, t);\n        if (i) {\n          e.push(i);\n          continue;\n        }\n      }\n      p.add(l(h, r, a, n, d)), e.push(j(m));\n    }\n  }\n  _assignObjectId(e, t) {\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    const s = this._queryEngine.objectIdField;\n    i && t && isFinite(t[s]) ? e[s] = t[s] : e[s] = this._nextObjectId++;\n  }\n}\nexport { S as default };","map":{"version":3,"names":["e","isNone","t","isSome","i","getJsonType","s","isPoint","r","WGS84","n","convertFromFeatures","a","convertToFeature","o","convertFromFeature","l","initialObjectId","d","findLastObjectIdFromFeatures","u","p","checkProjectionSupport","f","project","c","QueryEngine","y","createDefaultAttributesFunction","m","createDrawingInfo","h","createDefaultTemplate","g","loadGeometryEngineForSimplify","I","createFeatureEditErrorResult","b","mixAttributes","F","createFeatureEditSuccessResult","j","simplify","_","E","kebabDict","x","getFieldDefaultValue","T","R","q","xmin","ymin","xmax","ymax","spatialReference","w","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","D","z","hasZ","O","hasM","S","constructor","_queryEngine","_nextObjectId","destroy","_fieldsIndex","_createDefaultAttributes","load","features","_inferLayerProperties","fields","geometryType","objectIdField","timeInfo","push","name","message","some","type","editable","nullable","unshift","alias","field","jsonValues","includes","startTimeField","get","endTimeField","trackIdField","details","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","assignedObjectIds","featureStore","cacheSpatialQueries","length","_loadInitialFeatures","applyEdits","Promise","all","adds","updates","_applyEdits","queryFeatures","arguments","undefined","executeQuery","signal","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","queryExtent","executeQueryForExtent","querySnapping","executeQueryForSnapping","geometry","toLowerCase","uid","attributes","_assignObjectId","addMany","fullExtent","timeExtent","fetchRecomputedExtents","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","_ref","has","getFeature","add","isFinite","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/graphics/sources/support/MemorySourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{isNone as t,isSome as i}from\"../../../../core/maybe.js\";import{getJsonType as s,isPoint as r}from\"../../../../geometry/support/jsonUtils.js\";import{WGS84 as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromFeatures as a,convertToFeature as o,convertFromFeature as l}from\"../../featureConversionUtils.js\";import{initialObjectId as d,findLastObjectIdFromFeatures as u}from\"../../objectIdUtils.js\";import p from\"../../data/FeatureStore.js\";import{checkProjectionSupport as f,project as c}from\"../../data/projectionSupport.js\";import{QueryEngine as y}from\"../../data/QueryEngine.js\";import{createDefaultAttributesFunction as m,createDrawingInfo as h,createDefaultTemplate as g}from\"./clientSideDefaults.js\";import{loadGeometryEngineForSimplify as I,createFeatureEditErrorResult as b,mixAttributes as F,createFeatureEditSuccessResult as j,simplify as _}from\"./sourceUtils.js\";import E from\"../../../support/FieldsIndex.js\";import{kebabDict as x}from\"../../../support/fieldType.js\";import{getFieldDefaultValue as T}from\"../../../support/fieldUtils.js\";const R=n,q={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:n},w={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function D(e){return r(e)?null!=e.z:!!e.hasZ}function O(e){return r(e)?null!=e.m:!!e.hasM}class S{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const i=[],{features:s}=t,r=this._inferLayerProperties(s,t.fields),n=t.fields||[],a=null!=t.hasM?t.hasM:!!r.hasM,o=null!=t.hasZ?t.hasZ:!!r.hasZ,l=!t.spatialReference&&!r.spatialReference,c=l?R:t.spatialReference||r.spatialReference,I=l?q:null,b=t.geometryType||r.geometryType,F=!b;let j=t.objectIdField||r.objectIdField,_=t.timeInfo;if(!F&&(l&&i.push({name:\"feature-layer:spatial-reference-not-found\",message:\"Spatial reference not provided or found in features. Defaults to WGS84\"}),!b))throw new e(\"feature-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(!j)throw new e(\"feature-layer:missing-property\",\"objectIdField not set and couldn't be found in the provided fields\");if(r.objectIdField&&j!==r.objectIdField&&(i.push({name:\"feature-layer:duplicated-oid-field\",message:`Provided objectIdField \"${j}\" doesn't match the field name \"${r.objectIdField}\", found in the provided fields`}),j=r.objectIdField),j&&!r.objectIdField){let e=null;n.some((t=>t.name===j&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):n.unshift({alias:j,name:j,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const d of n){if(null==d.name&&(d.name=d.alias),null==d.alias&&(d.alias=d.name),!d.name)throw new e(\"feature-layer:invalid-field-name\",\"field name is missing\",{field:d});if(d.name===j&&(d.type=\"esriFieldTypeOID\"),!x.jsonValues.includes(d.type))throw new e(\"feature-layer:invalid-field-type\",`invalid type for field \"${d.name}\"`,{field:d})}const D={};for(const e of n)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){const t=T(e);void 0!==t&&(D[e.name]=t)}if(this._fieldsIndex=new E(n),this._createDefaultAttributes=m(D,j),_){if(_.startTimeField){const e=this._fieldsIndex.get(_.startTimeField);e?(_.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):_.startTimeField=null}if(_.endTimeField){const e=this._fieldsIndex.get(_.endTimeField);e?(_.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):_.endTimeField=null}if(_.trackIdField){const e=this._fieldsIndex.get(_.trackIdField);e?_.trackIdField=e.name:(_.trackIdField=null,i.push({name:\"feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:_}}))}_.startTimeField||_.endTimeField||(i.push({name:\"feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing or invalid\",details:{timeInfo:_}}),_=null)}const O={warnings:i,featureErrors:[],layerDefinition:{...w,drawingInfo:h(b),templates:g(D),extent:I,geometryType:b,objectIdField:j,fields:n,hasZ:o,hasM:a,timeInfo:_},assignedObjectIds:{}};if(this._queryEngine=new y({fields:n,geometryType:b,hasM:a,hasZ:o,objectIdField:j,spatialReference:c,featureStore:new p({geometryType:b,hasM:a,hasZ:o}),timeInfo:_,cacheSpatialQueries:!0}),!s||!s.length)return this._nextObjectId=d,O;const S=u(j,s);return this._nextObjectId=S+1,await f(s,c),this._loadInitialFeatures(O,s)}async applyEdits(e){const{spatialReference:t,geometryType:i}=this._queryEngine;return await Promise.all([I(t,i),f(e.adds,t),f(e.updates,t)]),this._applyEdits(e)}queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return this._queryEngine.executeQueryForSnapping(e,t.signal)}_inferLayerProperties(e,i){let r,n,a=null,o=null,l=null;for(const d of e){const e=d.geometry;if(!t(e)&&(a||(a=s(e)),o||(o=e.spatialReference),null==r&&(r=D(e)),null==n&&(n=O(e)),a&&o&&null!=r&&null!=n))break}if(i&&i.length){let e=null;i.some((t=>{const i=\"esriFieldTypeOID\"===t.type,s=!t.type&&t.name&&\"objectid\"===t.name.toLowerCase();return e=t,i||s}))&&(l=e.name)}return{geometryType:a,spatialReference:o,objectIdField:l,hasM:n,hasZ:r}}async _loadInitialFeatures(e,t){const{geometryType:r,hasM:n,hasZ:o,objectIdField:l,spatialReference:d,featureStore:u}=this._queryEngine,p=[];for(const a of t){if(null!=a.uid&&(e.assignedObjectIds[a.uid]=-1),a.geometry&&r!==s(a.geometry)){e.featureErrors.push(b(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),n=F(this._fieldsIndex,t,a.attributes,!0,e.warnings);n?e.featureErrors.push(n):(this._assignObjectId(t,a.attributes,!0),a.attributes=t,null!=a.uid&&(e.assignedObjectIds[a.uid]=a.attributes[l]),i(a.geometry)&&(a.geometry=c(a.geometry,a.geometry.spatialReference,d)),p.push(a))}u.addMany(a([],p,r,o,n,l));const{fullExtent:f,timeExtent:y}=await this._queryEngine.fetchRecomputedExtents();if(e.layerDefinition.extent=f,y){const{start:t,end:i}=y;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}async _applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(j(e));this._queryEngine.featureStore.removeManyById(s)}const{fullExtent:n,timeExtent:a}=await this._queryEngine.fetchRecomputedExtents();return{extent:n,timeExtent:a,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:r}=e,{geometryType:n,hasM:o,hasZ:l,objectIdField:d,spatialReference:u,featureStore:p}=this._queryEngine,f=[];for(const a of t){if(a.geometry&&n!==s(a.geometry)){r.push(b(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),o=F(this._fieldsIndex,t,a.attributes);if(o)r.push(o);else{if(this._assignObjectId(t,a.attributes),a.attributes=t,null!=a.uid){const t=a.attributes[d];e.uidToObjectId[a.uid]=t}if(i(a.geometry)){const e=a.geometry.spatialReference??u;a.geometry=c(_(a.geometry,e),e,u)}f.push(a),r.push(j(a.attributes[d]))}}p.addMany(a([],f,n,l,o,d))}_applyUpdateEdits({updateResults:e},t){const{geometryType:r,hasM:n,hasZ:a,objectIdField:d,spatialReference:u,featureStore:p}=this._queryEngine;for(const f of t){const{attributes:t,geometry:y}=f,m=t&&t[d];if(null==m){e.push(b(`Identifier field ${d} missing`));continue}if(!p.has(m)){e.push(b(`Feature with object id ${m} missing`));continue}const h=o(p.getFeature(m),r,a,n);if(i(y)){if(r!==s(y)){e.push(b(\"Incorrect geometry type.\"));continue}const t=y.spatialReference??u;h.geometry=c(_(y,t),t,u)}if(t){const i=F(this._fieldsIndex,h.attributes,t);if(i){e.push(i);continue}}p.add(l(h,r,a,n,d)),e.push(j(m))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&t&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}}export{S as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}