{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport r from \"../../core/Error.js\";\nimport { isSome as t } from \"../../core/maybe.js\";\nimport { throwIfAbortError as o } from \"../../core/promiseUtils.js\";\nimport { normalize as s, removeFile as n } from \"../../core/urlUtils.js\";\nimport l from \"../../portal/Portal.js\";\nimport a from \"../../portal/PortalQueryParams.js\";\nimport { enableWebStyleForceWOSR as u } from \"../../support/featureFlags.js\";\nlet f = {};\nasync function m(e, r) {\n  try {\n    return {\n      data: (await j(e, r)).data,\n      baseUrl: n(e),\n      styleUrl: e\n    };\n  } catch (t) {\n    return o(t), null;\n  }\n}\nfunction i(e, r, o) {\n  const s = t(r.portal) ? r.portal : l.getDefault();\n  let n;\n  const a = `${s.url} - ${s.user && s.user.username} - ${e}`;\n  return f[a] || (f[a] = c(e, s, o).then(e => (n = e, e.fetchData())).then(r => ({\n    data: r,\n    baseUrl: n.itemUrl ?? \"\",\n    styleName: e\n  }))), f[a];\n}\nfunction y() {\n  f && (f = {});\n}\nfunction c(e, t, o) {\n  return t.load(o).then(() => {\n    const r = new a({\n      disableExtraQuery: !0,\n      query: `owner:${h} AND type:${w} AND typekeywords:\"${e}\"`\n    });\n    return t.queryItems(r, o);\n  }).then(_ref => {\n    let {\n      results: t\n    } = _ref;\n    let s = null;\n    const n = e.toLowerCase();\n    if (t && Array.isArray(t)) for (const e of t) {\n      const r = e.typeKeywords?.some(e => e.toLowerCase() === n);\n      if (r && e.type === w && e.owner === h) {\n        s = e;\n        break;\n      }\n    }\n    if (!s) throw new r(\"symbolstyleutils:style-not-found\", `The style '${e}' could not be found`, {\n      styleName: e\n    });\n    return s.load(o);\n  });\n}\nfunction p(e, o, s) {\n  return e && t(e.styleUrl) ? m(e.styleUrl, s) : e && t(e.styleName) ? i(e.styleName, o, s) : Promise.reject(new r(\"symbolstyleutils:style-url-and-name-missing\", \"Either styleUrl or styleName is required to resolve a style\"));\n}\nfunction d(e) {\n  return null === e || \"CIMSymbolReference\" === e.type ? e : {\n    type: \"CIMSymbolReference\",\n    symbol: e\n  };\n}\nfunction b(e, r) {\n  if (\"cimRef\" === r) return e.cimRef;\n  if (e.formatInfos && !u()) for (const t of e.formatInfos) if (\"gltf\" === t.type) return t.href;\n  return e.webRef;\n}\nfunction j(r, t) {\n  const o = {\n    responseType: \"json\",\n    query: {\n      f: \"json\"\n    },\n    ...t\n  };\n  return e(s(r), o);\n}\nconst h = \"esri_en\",\n  w = \"Style\",\n  U = \"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";\nexport { U as Style2DUrlTemplate, f as cachedStyles, y as cleanupStyleUtilsCache, p as fetchStyle, d as makeCIMSymbolRef, j as requestJSON, b as symbolUrlFromStyleItem };","map":{"version":3,"names":["e","r","isSome","t","throwIfAbortError","o","normalize","s","removeFile","n","l","a","enableWebStyleForceWOSR","u","f","m","data","j","baseUrl","styleUrl","i","portal","getDefault","url","user","username","c","then","fetchData","itemUrl","styleName","y","load","disableExtraQuery","query","h","w","queryItems","_ref","results","toLowerCase","Array","isArray","typeKeywords","some","type","owner","p","Promise","reject","d","symbol","b","cimRef","formatInfos","href","webRef","responseType","U","Style2DUrlTemplate","cachedStyles","cleanupStyleUtilsCache","fetchStyle","makeCIMSymbolRef","requestJSON","symbolUrlFromStyleItem"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/symbols/support/styleUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{throwIfAbortError as o}from\"../../core/promiseUtils.js\";import{normalize as s,removeFile as n}from\"../../core/urlUtils.js\";import l from\"../../portal/Portal.js\";import a from\"../../portal/PortalQueryParams.js\";import{enableWebStyleForceWOSR as u}from\"../../support/featureFlags.js\";let f={};async function m(e,r){try{return{data:(await j(e,r)).data,baseUrl:n(e),styleUrl:e}}catch(t){return o(t),null}}function i(e,r,o){const s=t(r.portal)?r.portal:l.getDefault();let n;const a=`${s.url} - ${s.user&&s.user.username} - ${e}`;return f[a]||(f[a]=c(e,s,o).then((e=>(n=e,e.fetchData()))).then((r=>({data:r,baseUrl:n.itemUrl??\"\",styleName:e})))),f[a]}function y(){f&&(f={})}function c(e,t,o){return t.load(o).then((()=>{const r=new a({disableExtraQuery:!0,query:`owner:${h} AND type:${w} AND typekeywords:\"${e}\"`});return t.queryItems(r,o)})).then((({results:t})=>{let s=null;const n=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t){const r=e.typeKeywords?.some((e=>e.toLowerCase()===n));if(r&&e.type===w&&e.owner===h){s=e;break}}if(!s)throw new r(\"symbolstyleutils:style-not-found\",`The style '${e}' could not be found`,{styleName:e});return s.load(o)}))}function p(e,o,s){return e&&t(e.styleUrl)?m(e.styleUrl,s):e&&t(e.styleName)?i(e.styleName,o,s):Promise.reject(new r(\"symbolstyleutils:style-url-and-name-missing\",\"Either styleUrl or styleName is required to resolve a style\"))}function d(e){return null===e||\"CIMSymbolReference\"===e.type?e:{type:\"CIMSymbolReference\",symbol:e}}function b(e,r){if(\"cimRef\"===r)return e.cimRef;if(e.formatInfos&&!u())for(const t of e.formatInfos)if(\"gltf\"===t.type)return t.href;return e.webRef}function j(r,t){const o={responseType:\"json\",query:{f:\"json\"},...t};return e(s(r),o)}const h=\"esri_en\",w=\"Style\",U=\"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";export{U as Style2DUrlTemplate,f as cachedStyles,y as cleanupStyleUtilsCache,p as fetchStyle,d as makeCIMSymbolRef,j as requestJSON,b as symbolUrlFromStyleItem};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}