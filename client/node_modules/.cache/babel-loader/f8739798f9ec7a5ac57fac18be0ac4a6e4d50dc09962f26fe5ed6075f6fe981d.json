{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _slicedToArray from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../../core/Error.js\";\nimport t from \"../../../../../../core/Logger.js\";\nimport { clamp as i } from \"../../../../../../core/mathUtils.js\";\nimport { unwrap as o, isNone as r } from \"../../../../../../core/maybe.js\";\nimport { pt2px as n } from \"../../../../../../core/screenUtils.js\";\nimport { b as s } from \"../../../../../../chunks/mat2d.js\";\nimport { c as a } from \"../../../../../../chunks/mat2df32.js\";\nimport { Alignment as l } from \"../../../../../../symbols/cim/enums.js\";\nimport { isMapAligned as h, getAlignmentFromPlacement as c, getXDirection as m, getYDirection as _ } from \"../../alignmentUtils.js\";\nimport { premultiplyAlphaRGBAArray as g } from \"../../color.js\";\nimport { TEXT_PLACEMENT_PADDING as d } from \"../../definitions.js\";\nimport { WGLGeometryType as f } from \"../../enums.js\";\nimport { i8888to32 as u } from \"../../number.js\";\nimport { LabelMaterialKey as p } from \"../../materialKey/MaterialKey.js\";\nimport { smoothPaths as b, pathDivide as y } from \"./segmentUtils.js\";\nimport x from \"./WGLTextTemplate.js\";\nvar L = t.getLogger(\"esri.views.2d.engine.webgl.WGLLabelTemplate\"),\n  S = function S(t) {\n    var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"mapview-labeling\";\n    return L.error(new e(i, t));\n  },\n  v = 1,\n  P = 0,\n  w = 4,\n  M = 25;\nfunction Z(e, t) {\n  var o = !!e.minScale && t.scaleToZoom(e.minScale) || 0;\n  return i(o, 0, 25.5);\n}\nfunction k(e, t) {\n  var o = !!e.maxScale && t.scaleToZoom(e.maxScale) || 255;\n  return i(o, 0, 25.5);\n}\nfunction A(e) {\n  var t = new Map();\n  return function (i) {\n    return t.has(i) || t.set(i, e(i)), t.get(i);\n  };\n}\nvar B = A(function (e) {\n    var t = 0;\n    if (0 === e) return 1 / 0;\n    for (; !(e % 2);) t++, e /= 2;\n    return t;\n  }),\n  z = function z(e) {\n    return Math.floor(127 * e + 127);\n  },\n  C = function C(e) {\n    return Math.floor(10 * e);\n  },\n  W = function W(e) {\n    return Math.round(e * (254 / 360));\n  };\nvar G = /*#__PURE__*/function (_x) {\n  _inherits(G, _x);\n  var _super = _createSuper(G);\n  function G(e, t, i, o) {\n    var _i$font, _i$font2, _i$font3, _t$allowOverrun, _t$repeatLabel, _t$labelPosition;\n    var _this;\n    _classCallCheck(this, G);\n    _this = _super.call(this, e, (_i$font = i.font) === null || _i$font === void 0 ? void 0 : _i$font.size, i.haloSize || 0, (_i$font2 = i.font) === null || _i$font2 === void 0 ? void 0 : _i$font2.size, i.color && g(i.color) || 0, i.haloColor && g(i.haloColor) || 0, i.horizontalAlignment, i.verticalAlignment, h(t.labelPlacement) ? l.MAP : l.SCREEN, (_i$font3 = i.font) === null || _i$font3 === void 0 ? void 0 : _i$font3.decoration, !1, i.angle || 0, i.xoffset, i.yoffset, i.lineWidth, i.lineHeight, null, null, !1, null, null, i.backgroundColor && g(i.backgroundColor), i.borderLineColor && g(i.borderLineColor), i.borderLineSize), _this._outLineLabelAngle = 0, _this._refPlacementPadding = 0, _this._refPlacementDirX = 0, _this._refPlacementDirY = 0, _this._refOffsetX = 0, _this._refOffsetY = 0, _this._zoomLevel = 0, _this.geometryType = f.LABEL, _this._allowOverrun = (_t$allowOverrun = t.allowOverrun) !== null && _t$allowOverrun !== void 0 ? _t$allowOverrun : !1, _this._repeatLabel = (_t$repeatLabel = t.repeatLabel) !== null && _t$repeatLabel !== void 0 ? _t$repeatLabel : !0, _this._labelPosition = (_t$labelPosition = t.labelPosition) !== null && _t$labelPosition !== void 0 ? _t$labelPosition : \"curved\";\n    var r = Z(t, o),\n      s = k(t, o),\n      a = t.labelPlacement,\n      _c = c(a),\n      _c2 = _slicedToArray(_c, 2),\n      m = _c2[0],\n      _ = _c2[1];\n    _this._xAlignD = m, _this._yAlignD = _, _this._minZoom = r, _this._maxZoom = s, _this._minBackgroundZoom = r, _this._maxBackgroundZoom = s, _this._refPlacementPadding = n(i.haloSize) + d, _this._repeatLabelDistance = t.repeatLabelDistance ? n(t.repeatLabelDistance) : 128;\n    var u = p.load(e);\n    u.sdf = !0, _this._materialKey = u.data;\n    return _this;\n  }\n  _createClass(G, [{\n    key: \"_shapedBox\",\n    get: function get() {\n      return o(this._shapingInfo).bounds;\n    }\n  }, {\n    key: \"setZoomLevel\",\n    value: function setZoomLevel(e) {\n      this._zoomLevel = e;\n    }\n  }, {\n    key: \"bindReferenceTemplate\",\n    value: function bindReferenceTemplate(e) {\n      var t = m(this._xAlignD),\n        i = _(this._yAlignD);\n      if (this._refOffsetX = 0, this._refOffsetY = 0, r(e)) return void (this._refSymbolAndPlacementOffset = u(0, 0, z(t), z(i)));\n      if (\"circle\" === e.boundsType && (t || i)) {\n        var _e = Math.sqrt(t * t + i * i);\n        t /= _e, i /= _e;\n      }\n      var o = Math.max(e.height, e.width),\n        n = this._refPlacementPadding * w;\n      this._refSymbolAndPlacementOffset = u(n, o, z(t), z(i)), this._referenceSize = o, this._refPlacementDirX = t, this._refPlacementDirY = i, this._refOffsetX = e.xOffset, this._refOffsetY = e.yOffset;\n    }\n  }, {\n    key: \"_write\",\n    value: function _write(e, t) {\n      if (r(this._shapingInfo)) return;\n      var i = this._shapingInfo,\n        o = t.getDisplayId(),\n        n = \"esriGeometryPolygon\" === t.geometryType ? t.readLegacyCentroid() : t.readLegacyGeometry();\n      if (n) switch (this._current = {\n        out: e,\n        inId: o,\n        inShaping: i,\n        zoomLevel: this._zoomLevel\n      }, \"esriGeometryPolyline\" === t.geometryType && \"curved\" === this._labelPosition && (this._borderLineColor || this._backgroundColor) && L.warnOnce(\"TextSymbol properties 'borderLineColor', 'borderLineSize', and 'backgroundColor' are not supported in curved labels\"), t.geometryType) {\n        case \"esriGeometryPolyline\":\n          this._placeLineLabels(n);\n          break;\n        case \"esriGeometryPoint\":\n        case \"esriGeometryPolygon\":\n          this._placePointLabels(n);\n          break;\n        default:\n          S(\"Geometry of type \".concat(t.geometryType, \" is not supported\"));\n      }\n    }\n  }, {\n    key: \"_isVisible\",\n    value: function _isVisible(e, t) {\n      var i = C(this._current.zoomLevel);\n      return C(e) <= i && i <= C(t);\n    }\n  }, {\n    key: \"_placePointLabels\",\n    value: function _placePointLabels(e) {\n      var _this$_current = this._current,\n        t = _this$_current.out,\n        i = _this$_current.inId,\n        o = _this$_current.inShaping;\n      this._writeGlyphs(t, i, e, o);\n    }\n  }, {\n    key: \"_placeLineLabels\",\n    value: function _placeLineLabels(e) {\n      var t = b(e.paths, this._current.inShaping.bounds.width),\n        i = this._placeSubdivGlyphs.bind(this),\n        o = (this._shapedBox.width + this._repeatLabelDistance) / (1 << v);\n      var _iterator = _createForOfIteratorHelper(t),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _r = _step.value;\n          y(_r, o, i, this._repeatLabel);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"_placeSubdivGlyphs\",\n    value: function _placeSubdivGlyphs(e, t, i, o) {\n      var r = B(t),\n        n = this._shapedBox.width / (1 << v),\n        s = Math.sqrt(this._repeatLabelDistance) / (1 << v),\n        a = Math.min(i, o - i),\n        l = this._current.inShaping.isMultiline ? M : Math.log2(a / (s + n / 2)),\n        h = 0 === t ? l : Math.min(r, l),\n        c = Math.max(this._minZoom, this._current.zoomLevel + v - h),\n        m = this._current.zoomLevel - c,\n        _ = this._shapedBox.width / 2 * Math.pow(2, m);\n      this._current.inShaping.isMultiline ? 0 === t && this._placeStraight(e, c) : this._allowOverrun && m < 0 ? this._placeStraightAlong(e, this._minZoom) : \"parallel\" === this._labelPosition ? this._placeStraightAlong(e, c) : \"curved\" === this._labelPosition && this._placeCurved(e, c, _);\n    }\n  }, {\n    key: \"_placeStraight\",\n    value: function _placeStraight(e, t) {\n      var _this$_current2 = this._current,\n        i = _this$_current2.out,\n        o = _this$_current2.inId,\n        r = _this$_current2.inShaping,\n        n = Math.ceil(e.angle * (180 / Math.PI) % 360),\n        s = Math.ceil((e.angle * (180 / Math.PI) + 180) % 360);\n      this._outLineLabelAngle = W(n), this._writeGlyphs(i, o, e, r, t), this._outLineLabelAngle = W(s), this._writeGlyphs(i, o, e, r, t);\n    }\n  }, {\n    key: \"_placeCurved\",\n    value: function _placeCurved(e, t, i) {\n      var _this$_current3 = this._current,\n        o = _this$_current3.out,\n        r = _this$_current3.inId;\n      o.metricStart(r, t, e.x, e.y, 0, 0, 0, 0);\n      var n = e.clone(),\n        s = e.angle * (180 / Math.PI) % 360,\n        a = (e.angle * (180 / Math.PI) + 180) % 360;\n      this._outLineLabelAngle = W(s), this._placeFirst(n, t, 1), this._placeBack(e, n, t, i, 1), this._placeForward(e, n, t, i, 1), this._outLineLabelAngle = W(a), this._placeFirst(n, t, 0), this._placeBack(e, n, t, i, 0), this._placeForward(e, n, t, i, 0), o.metricEnd();\n    }\n  }, {\n    key: \"_placeStraightAlong\",\n    value: function _placeStraightAlong(e, t) {\n      var _this$_current4 = this._current,\n        i = _this$_current4.out,\n        o = _this$_current4.inId,\n        r = _this$_current4.inShaping;\n      i.metricStart(o, t, e.x, e.y, 0, 0, 0, 0);\n      var n = e.clone(),\n        l = e.angle * (180 / Math.PI) % 360,\n        h = (e.angle * (180 / Math.PI) + 180) % 360,\n        c = r.glyphs.length > 0 && (this._borderLineColor || this._backgroundColor);\n      if (this._maxBackgroundZoom = M, this._minBackgroundZoom = Math.max(t, 0), c) {\n        var _t = p.load(this._materialKey);\n        _t.textureBinding = r.glyphs[0].textureBinding;\n        var _n = s(a(), -e.angle),\n          _r$shapeBackground = r.shapeBackground(_n),\n          _r$shapeBackground2 = _slicedToArray(_r$shapeBackground, 2),\n          _c3 = _r$shapeBackground2[0],\n          _m = _r$shapeBackground2[1];\n        this._outLineLabelAngle = W(l), i.recordStart(o, _t.data, this.geometryType, !0), this._writeBackgroundGeometry(i, o, e, _c3, _m), i.recordEnd(), this._outLineLabelAngle = W(h), i.recordStart(o, _t.data, this.geometryType, !0), this._writeBackgroundGeometry(i, o, e, _c3, _m), i.recordEnd();\n      }\n      this._outLineLabelAngle = W(l), this._placeFirst(n, t, 1, !0), this._outLineLabelAngle = W(h), this._placeFirst(n, t, 0, !0), i.metricEnd();\n    }\n  }, {\n    key: \"_placeBack\",\n    value: function _placeBack(e, t, i, o, r) {\n      var n = e.clone();\n      var s = e.backwardLength + P;\n      for (; n.prev() && !(s >= o);) this._placeOnSegment(n, t, s, i, -1, r), s += n.length + P;\n    }\n  }, {\n    key: \"_placeForward\",\n    value: function _placeForward(e, t, i, o, r) {\n      var n = e.clone();\n      var s = e.remainingLength + P;\n      for (; n.next() && !(s >= o);) this._placeOnSegment(n, t, s, i, 1, r), s += n.length + P;\n    }\n  }, {\n    key: \"_placeFirst\",\n    value: function _placeFirst(e, t, i) {\n      var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n      var r = e,\n        n = this._current.inShaping,\n        s = n.glyphs,\n        a = this._current.zoomLevel,\n        _this$_current5 = this._current,\n        l = _this$_current5.out,\n        h = _this$_current5.inId;\n      var _iterator2 = _createForOfIteratorHelper(s),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _c4 = _step2.value;\n          var _s = _c4.x > n.bounds.x ? i : 1 - i,\n            _m2 = _s * e.remainingLength + (1 - _s) * e.backwardLength,\n            _2 = Math.abs(_c4.x + _c4.width / 2 - n.bounds.x),\n            _g = Math.max(0, a + Math.log2(_2 / (_m2 + P))),\n            _d = Math.max(t, o ? 0 : _g);\n          if (_c4.maxZoom = M, _c4.angle = e.angle + (1 - i) * Math.PI, _c4.minZoom = _d, this._writeGlyph(l, h, r.x, r.y, _c4), i && this._isVisible(_c4.minZoom, _c4.maxZoom)) {\n            var _e2 = _c4.bounds;\n            l.metricBoxWrite(_e2.center[0], _e2.center[1], _e2.width, _e2.height);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"_placeOnSegment\",\n    value: function _placeOnSegment(e, t, i, o, r, n) {\n      var s = this._current.inShaping.glyphs,\n        _this$_current6 = this._current,\n        a = _this$_current6.out,\n        l = _this$_current6.inId,\n        h = this._current.inShaping,\n        c = this._current.zoomLevel,\n        m = e.dx / e.length,\n        _ = e.dy / e.length,\n        g = {\n          x: e.x + i * -r * m,\n          y: e.y + i * -r * _\n        };\n      var _iterator3 = _createForOfIteratorHelper(s),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _d2 = _step3.value;\n          var _s2 = _d2.x > h.bounds.x ? n : 1 - n;\n          if (!(_s2 && 1 === r || !_s2 && -1 === r)) continue;\n          var _m3 = Math.abs(_d2.x + _d2.width / 2 - h.bounds.x),\n            _3 = Math.max(0, c + Math.log2(_m3 / i) - .1),\n            _f = Math.max(o, c + Math.log2(_m3 / (i + e.length + P)));\n          if (0 !== _3 && (_d2.angle = e.angle + (1 - n) * Math.PI, _d2.minZoom = _f, _d2.maxZoom = _3, this._writeGlyph(a, l, g.x, g.y, _d2), n && this._isVisible(_d2.minZoom, _d2.maxZoom))) {\n            var _i = _d2.bounds,\n              _o = e.x - t.x,\n              _r2 = e.y - t.y;\n            a.metricBoxWrite(_i.center[0] + _o, _i.center[1] + _r2, _i.width, _i.height);\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_writeGlyphs\",\n    value: function _writeGlyphs(e, t, i, o) {\n      var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this._minZoom;\n      if (i.x < 0 || i.x >= 512 || i.y < 0 || i.y >= 512) return;\n      if (o.glyphs.length > 0 && (this._borderLineColor || this._backgroundColor)) {\n        var _r3 = p.load(this._materialKey);\n        _r3.textureBinding = o.glyphs[0].textureBinding, e.recordStart(t, _r3.data, this.geometryType, !0), this._writeBackgroundGeometry(e, t, i, o.bounds, o.background), e.recordEnd();\n      }\n      var n = i.x + this._refOffsetX,\n        s = i.y - this._refOffsetY;\n      var _iterator4 = _createForOfIteratorHelper(o.glyphs),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _c5 = _step4.value;\n          _c5.minZoom = r, _c5.maxZoom = this._maxZoom, this._writeGlyph(e, t, n, s, _c5);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      var a = this._refPlacementDirX,\n        l = this._refPlacementDirY,\n        h = o.boundsT;\n      e.metricStart(t, r, n, s, a, l, this._referenceSize, this._materialKey), e.metricBoxWrite(h.center[0], h.center[1], h.width, h.height), e.metricEnd();\n    }\n  }, {\n    key: \"_writeVertexCommon\",\n    value: function _writeVertexCommon(e, t, i, o) {\n      var r = this._color,\n        n = this._haloColor,\n        s = u(0, 0, this._size, this._haloSize),\n        a = Math.max(o.minZoom, this._minZoom),\n        l = Math.min(o.maxZoom, this._maxZoom),\n        h = u(C(a), C(l), this._outLineLabelAngle, 0);\n      e.vertexWrite(i), e.vertexWrite(t), e.vertexWrite(r), e.vertexWrite(n), e.vertexWrite(s), e.vertexWrite(this._refSymbolAndPlacementOffset), e.vertexWrite(h);\n    }\n  }, {\n    key: \"_writeBackgroundVertex\",\n    value: function _writeBackgroundVertex(e, t, i, o, r, n) {\n      var s = u(0, 0, this._size, this._haloSize),\n        a = u(0, 0, 0, 0),\n        l = u(C(this._minBackgroundZoom), C(this._maxBackgroundZoom), this._outLineLabelAngle, 1);\n      e.vertexWrite(i), e.vertexWrite(t), e.vertexWrite(o), e.vertexWrite(a), e.vertexWrite(s), e.vertexWrite(this._refSymbolAndPlacementOffset), e.vertexWrite(l), e.vertexWrite(r), e.vertexWrite(n), e.vertexEnd();\n    }\n  }], [{\n    key: \"fromLabelClass\",\n    value: function fromLabelClass(e, t) {\n      if (\"esriServerLinePlacementCenterAlong\" === e.labelPlacement) {\n        var _t2 = e.symbol;\n        _t2.xoffset = 0, _t2.yoffset = 0, _t2.angle = 0, _t2.font.decoration = \"none\";\n      }\n      return new G(e.materialKey, e, e.symbol, t);\n    }\n  }]);\n  return G;\n}(x);\nexport { G as default };","map":{"version":3,"names":["e","t","clamp","i","unwrap","o","isNone","r","pt2px","n","b","s","c","a","Alignment","l","isMapAligned","h","getAlignmentFromPlacement","getXDirection","m","getYDirection","_","premultiplyAlphaRGBAArray","g","TEXT_PLACEMENT_PADDING","d","WGLGeometryType","f","i8888to32","u","LabelMaterialKey","p","smoothPaths","pathDivide","y","x","L","getLogger","S","arguments","length","undefined","error","v","P","w","M","Z","minScale","scaleToZoom","k","maxScale","A","Map","has","set","get","B","z","Math","floor","C","W","round","G","_x","_inherits","_super","_createSuper","_i$font","_i$font2","_i$font3","_t$allowOverrun","_t$repeatLabel","_t$labelPosition","_this","_classCallCheck","call","font","size","haloSize","color","haloColor","horizontalAlignment","verticalAlignment","labelPlacement","MAP","SCREEN","decoration","angle","xoffset","yoffset","lineWidth","lineHeight","backgroundColor","borderLineColor","borderLineSize","_outLineLabelAngle","_refPlacementPadding","_refPlacementDirX","_refPlacementDirY","_refOffsetX","_refOffsetY","_zoomLevel","geometryType","LABEL","_allowOverrun","allowOverrun","_repeatLabel","repeatLabel","_labelPosition","labelPosition","_c","_c2","_slicedToArray","_xAlignD","_yAlignD","_minZoom","_maxZoom","_minBackgroundZoom","_maxBackgroundZoom","_repeatLabelDistance","repeatLabelDistance","load","sdf","_materialKey","data","_createClass","key","_shapingInfo","bounds","value","setZoomLevel","bindReferenceTemplate","_refSymbolAndPlacementOffset","boundsType","sqrt","max","height","width","_referenceSize","xOffset","yOffset","_write","getDisplayId","readLegacyCentroid","readLegacyGeometry","_current","out","inId","inShaping","zoomLevel","_borderLineColor","_backgroundColor","warnOnce","_placeLineLabels","_placePointLabels","concat","_isVisible","_this$_current","_writeGlyphs","paths","_placeSubdivGlyphs","bind","_shapedBox","_iterator","_createForOfIteratorHelper","_step","done","err","min","isMultiline","log2","pow","_placeStraight","_placeStraightAlong","_placeCurved","_this$_current2","ceil","PI","_this$_current3","metricStart","clone","_placeFirst","_placeBack","_placeForward","metricEnd","_this$_current4","glyphs","textureBinding","_r$shapeBackground","shapeBackground","_r$shapeBackground2","recordStart","_writeBackgroundGeometry","recordEnd","backwardLength","prev","_placeOnSegment","remainingLength","next","_this$_current5","_iterator2","_step2","abs","maxZoom","minZoom","_writeGlyph","metricBoxWrite","center","_this$_current6","dx","dy","_iterator3","_step3","background","_iterator4","_step4","boundsT","_writeVertexCommon","_color","_haloColor","_size","_haloSize","vertexWrite","_writeBackgroundVertex","vertexEnd","fromLabelClass","symbol","materialKey","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Error.js\";import t from\"../../../../../../core/Logger.js\";import{clamp as i}from\"../../../../../../core/mathUtils.js\";import{unwrap as o,isNone as r}from\"../../../../../../core/maybe.js\";import{pt2px as n}from\"../../../../../../core/screenUtils.js\";import{b as s}from\"../../../../../../chunks/mat2d.js\";import{c as a}from\"../../../../../../chunks/mat2df32.js\";import{Alignment as l}from\"../../../../../../symbols/cim/enums.js\";import{isMapAligned as h,getAlignmentFromPlacement as c,getXDirection as m,getYDirection as _}from\"../../alignmentUtils.js\";import{premultiplyAlphaRGBAArray as g}from\"../../color.js\";import{TEXT_PLACEMENT_PADDING as d}from\"../../definitions.js\";import{WGLGeometryType as f}from\"../../enums.js\";import{i8888to32 as u}from\"../../number.js\";import{LabelMaterialKey as p}from\"../../materialKey/MaterialKey.js\";import{smoothPaths as b,pathDivide as y}from\"./segmentUtils.js\";import x from\"./WGLTextTemplate.js\";const L=t.getLogger(\"esri.views.2d.engine.webgl.WGLLabelTemplate\"),S=(t,i=\"mapview-labeling\")=>L.error(new e(i,t)),v=1,P=0,w=4,M=25;function Z(e,t){const o=!!e.minScale&&t.scaleToZoom(e.minScale)||0;return i(o,0,25.5)}function k(e,t){const o=!!e.maxScale&&t.scaleToZoom(e.maxScale)||255;return i(o,0,25.5)}function A(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const B=A((e=>{let t=0;if(0===e)return 1/0;for(;!(e%2);)t++,e/=2;return t})),z=e=>Math.floor(127*e+127),C=e=>Math.floor(10*e),W=e=>Math.round(e*(254/360));class G extends x{constructor(e,t,i,o){super(e,i.font?.size,i.haloSize||0,i.font?.size,i.color&&g(i.color)||0,i.haloColor&&g(i.haloColor)||0,i.horizontalAlignment,i.verticalAlignment,h(t.labelPlacement)?l.MAP:l.SCREEN,i.font?.decoration,!1,i.angle||0,i.xoffset,i.yoffset,i.lineWidth,i.lineHeight,null,null,!1,null,null,i.backgroundColor&&g(i.backgroundColor),i.borderLineColor&&g(i.borderLineColor),i.borderLineSize),this._outLineLabelAngle=0,this._refPlacementPadding=0,this._refPlacementDirX=0,this._refPlacementDirY=0,this._refOffsetX=0,this._refOffsetY=0,this._zoomLevel=0,this.geometryType=f.LABEL,this._allowOverrun=t.allowOverrun??!1,this._repeatLabel=t.repeatLabel??!0,this._labelPosition=t.labelPosition??\"curved\";const r=Z(t,o),s=k(t,o),a=t.labelPlacement,[m,_]=c(a);this._xAlignD=m,this._yAlignD=_,this._minZoom=r,this._maxZoom=s,this._minBackgroundZoom=r,this._maxBackgroundZoom=s,this._refPlacementPadding=n(i.haloSize)+d,this._repeatLabelDistance=t.repeatLabelDistance?n(t.repeatLabelDistance):128;const u=p.load(e);u.sdf=!0,this._materialKey=u.data}static fromLabelClass(e,t){if(\"esriServerLinePlacementCenterAlong\"===e.labelPlacement){const t=e.symbol;t.xoffset=0,t.yoffset=0,t.angle=0,t.font.decoration=\"none\"}return new G(e.materialKey,e,e.symbol,t)}get _shapedBox(){return o(this._shapingInfo).bounds}setZoomLevel(e){this._zoomLevel=e}bindReferenceTemplate(e){let t=m(this._xAlignD),i=_(this._yAlignD);if(this._refOffsetX=0,this._refOffsetY=0,r(e))return void(this._refSymbolAndPlacementOffset=u(0,0,z(t),z(i)));if(\"circle\"===e.boundsType&&(t||i)){const e=Math.sqrt(t*t+i*i);t/=e,i/=e}const o=Math.max(e.height,e.width),n=this._refPlacementPadding*w;this._refSymbolAndPlacementOffset=u(n,o,z(t),z(i)),this._referenceSize=o,this._refPlacementDirX=t,this._refPlacementDirY=i,this._refOffsetX=e.xOffset,this._refOffsetY=e.yOffset}_write(e,t){if(r(this._shapingInfo))return;const i=this._shapingInfo,o=t.getDisplayId(),n=\"esriGeometryPolygon\"===t.geometryType?t.readLegacyCentroid():t.readLegacyGeometry();if(n)switch(this._current={out:e,inId:o,inShaping:i,zoomLevel:this._zoomLevel},\"esriGeometryPolyline\"===t.geometryType&&\"curved\"===this._labelPosition&&(this._borderLineColor||this._backgroundColor)&&L.warnOnce(\"TextSymbol properties 'borderLineColor', 'borderLineSize', and 'backgroundColor' are not supported in curved labels\"),t.geometryType){case\"esriGeometryPolyline\":this._placeLineLabels(n);break;case\"esriGeometryPoint\":case\"esriGeometryPolygon\":this._placePointLabels(n);break;default:S(`Geometry of type ${t.geometryType} is not supported`)}}_isVisible(e,t){const i=C(this._current.zoomLevel);return C(e)<=i&&i<=C(t)}_placePointLabels(e){const{out:t,inId:i,inShaping:o}=this._current;this._writeGlyphs(t,i,e,o)}_placeLineLabels(e){const t=b(e.paths,this._current.inShaping.bounds.width),i=this._placeSubdivGlyphs.bind(this),o=(this._shapedBox.width+this._repeatLabelDistance)/(1<<v);for(const r of t)y(r,o,i,this._repeatLabel)}_placeSubdivGlyphs(e,t,i,o){const r=B(t),n=this._shapedBox.width/(1<<v),s=Math.sqrt(this._repeatLabelDistance)/(1<<v),a=Math.min(i,o-i),l=this._current.inShaping.isMultiline?M:Math.log2(a/(s+n/2)),h=0===t?l:Math.min(r,l),c=Math.max(this._minZoom,this._current.zoomLevel+v-h),m=this._current.zoomLevel-c,_=this._shapedBox.width/2*2**m;this._current.inShaping.isMultiline?0===t&&this._placeStraight(e,c):this._allowOverrun&&m<0?this._placeStraightAlong(e,this._minZoom):\"parallel\"===this._labelPosition?this._placeStraightAlong(e,c):\"curved\"===this._labelPosition&&this._placeCurved(e,c,_)}_placeStraight(e,t){const{out:i,inId:o,inShaping:r}=this._current,n=Math.ceil(e.angle*(180/Math.PI)%360),s=Math.ceil((e.angle*(180/Math.PI)+180)%360);this._outLineLabelAngle=W(n),this._writeGlyphs(i,o,e,r,t),this._outLineLabelAngle=W(s),this._writeGlyphs(i,o,e,r,t)}_placeCurved(e,t,i){const{out:o,inId:r}=this._current;o.metricStart(r,t,e.x,e.y,0,0,0,0);const n=e.clone(),s=e.angle*(180/Math.PI)%360,a=(e.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=W(s),this._placeFirst(n,t,1),this._placeBack(e,n,t,i,1),this._placeForward(e,n,t,i,1),this._outLineLabelAngle=W(a),this._placeFirst(n,t,0),this._placeBack(e,n,t,i,0),this._placeForward(e,n,t,i,0),o.metricEnd()}_placeStraightAlong(e,t){const{out:i,inId:o,inShaping:r}=this._current;i.metricStart(o,t,e.x,e.y,0,0,0,0);const n=e.clone(),l=e.angle*(180/Math.PI)%360,h=(e.angle*(180/Math.PI)+180)%360,c=r.glyphs.length>0&&(this._borderLineColor||this._backgroundColor);if(this._maxBackgroundZoom=M,this._minBackgroundZoom=Math.max(t,0),c){const t=p.load(this._materialKey);t.textureBinding=r.glyphs[0].textureBinding;const n=s(a(),-e.angle),[c,m]=r.shapeBackground(n);this._outLineLabelAngle=W(l),i.recordStart(o,t.data,this.geometryType,!0),this._writeBackgroundGeometry(i,o,e,c,m),i.recordEnd(),this._outLineLabelAngle=W(h),i.recordStart(o,t.data,this.geometryType,!0),this._writeBackgroundGeometry(i,o,e,c,m),i.recordEnd()}this._outLineLabelAngle=W(l),this._placeFirst(n,t,1,!0),this._outLineLabelAngle=W(h),this._placeFirst(n,t,0,!0),i.metricEnd()}_placeBack(e,t,i,o,r){const n=e.clone();let s=e.backwardLength+P;for(;n.prev()&&!(s>=o);)this._placeOnSegment(n,t,s,i,-1,r),s+=n.length+P}_placeForward(e,t,i,o,r){const n=e.clone();let s=e.remainingLength+P;for(;n.next()&&!(s>=o);)this._placeOnSegment(n,t,s,i,1,r),s+=n.length+P}_placeFirst(e,t,i,o=!1){const r=e,n=this._current.inShaping,s=n.glyphs,a=this._current.zoomLevel,{out:l,inId:h}=this._current;for(const c of s){const s=c.x>n.bounds.x?i:1-i,m=s*e.remainingLength+(1-s)*e.backwardLength,_=Math.abs(c.x+c.width/2-n.bounds.x),g=Math.max(0,a+Math.log2(_/(m+P))),d=Math.max(t,o?0:g);if(c.maxZoom=M,c.angle=e.angle+(1-i)*Math.PI,c.minZoom=d,this._writeGlyph(l,h,r.x,r.y,c),i&&this._isVisible(c.minZoom,c.maxZoom)){const e=c.bounds;l.metricBoxWrite(e.center[0],e.center[1],e.width,e.height)}}}_placeOnSegment(e,t,i,o,r,n){const s=this._current.inShaping.glyphs,{out:a,inId:l}=this._current,h=this._current.inShaping,c=this._current.zoomLevel,m=e.dx/e.length,_=e.dy/e.length,g={x:e.x+i*-r*m,y:e.y+i*-r*_};for(const d of s){const s=d.x>h.bounds.x?n:1-n;if(!(s&&1===r||!s&&-1===r))continue;const m=Math.abs(d.x+d.width/2-h.bounds.x),_=Math.max(0,c+Math.log2(m/i)-.1),f=Math.max(o,c+Math.log2(m/(i+e.length+P)));if(0!==_&&(d.angle=e.angle+(1-n)*Math.PI,d.minZoom=f,d.maxZoom=_,this._writeGlyph(a,l,g.x,g.y,d),n&&this._isVisible(d.minZoom,d.maxZoom))){const i=d.bounds,o=e.x-t.x,r=e.y-t.y;a.metricBoxWrite(i.center[0]+o,i.center[1]+r,i.width,i.height)}}}_writeGlyphs(e,t,i,o,r=this._minZoom){if(i.x<0||i.x>=512||i.y<0||i.y>=512)return;if(o.glyphs.length>0&&(this._borderLineColor||this._backgroundColor)){const r=p.load(this._materialKey);r.textureBinding=o.glyphs[0].textureBinding,e.recordStart(t,r.data,this.geometryType,!0),this._writeBackgroundGeometry(e,t,i,o.bounds,o.background),e.recordEnd()}const n=i.x+this._refOffsetX,s=i.y-this._refOffsetY;for(const c of o.glyphs)c.minZoom=r,c.maxZoom=this._maxZoom,this._writeGlyph(e,t,n,s,c);const a=this._refPlacementDirX,l=this._refPlacementDirY,h=o.boundsT;e.metricStart(t,r,n,s,a,l,this._referenceSize,this._materialKey),e.metricBoxWrite(h.center[0],h.center[1],h.width,h.height),e.metricEnd()}_writeVertexCommon(e,t,i,o){const r=this._color,n=this._haloColor,s=u(0,0,this._size,this._haloSize),a=Math.max(o.minZoom,this._minZoom),l=Math.min(o.maxZoom,this._maxZoom),h=u(C(a),C(l),this._outLineLabelAngle,0);e.vertexWrite(i),e.vertexWrite(t),e.vertexWrite(r),e.vertexWrite(n),e.vertexWrite(s),e.vertexWrite(this._refSymbolAndPlacementOffset),e.vertexWrite(h)}_writeBackgroundVertex(e,t,i,o,r,n){const s=u(0,0,this._size,this._haloSize),a=u(0,0,0,0),l=u(C(this._minBackgroundZoom),C(this._maxBackgroundZoom),this._outLineLabelAngle,1);e.vertexWrite(i),e.vertexWrite(t),e.vertexWrite(o),e.vertexWrite(a),e.vertexWrite(s),e.vertexWrite(this._refSymbolAndPlacementOffset),e.vertexWrite(l),e.vertexWrite(r),e.vertexWrite(n),e.vertexEnd()}}export{G as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}