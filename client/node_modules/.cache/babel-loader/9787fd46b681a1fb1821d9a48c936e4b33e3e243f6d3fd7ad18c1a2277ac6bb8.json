{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from \"../../core/Logger.js\";\nimport { isSome as e, isNone as i } from \"../../core/maybe.js\";\nimport { BufferObject as r } from \"./BufferObject.js\";\nimport { webglDebugEnabled as h } from \"./checkWebGLError.js\";\nimport { ContextType as s } from \"./context-util.js\";\nimport { ResourceType as n, ColorAttachment as c, DepthStencilTargetType as o, PixelFormat as _, PixelType as a, DepthStencilAttachment as l, RenderbufferFormat as T, FramebufferTarget as E, TextureType as d, Usage as u, BufferType as f, TargetType as m, SizedPixelFormat as A, TextureSamplingMode as p, TextureWrapMode as R } from \"./enums.js\";\nimport { Renderbuffer as g } from \"./Renderbuffer.js\";\nimport { Texture as N } from \"./Texture.js\";\nimport { getGpuMemoryUsage as F } from \"./Util.js\";\nclass x {\n  constructor(t, i) {\n    let r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let h = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    if (this._context = t, this._glName = null, this._depthAttachment = null, this._stencilAttachment = null, this._colorAttachments = new Map(), this._depthStencilTexture = null, this._initialized = !1, this._desc = {\n      ...i\n    }, t.instanceCounter.increment(n.FramebufferObject, this), e(r)) {\n      Array.isArray(r) || (r = [r]);\n      for (let t = 0; t < r.length; ++t) {\n        const e = r[t],\n          i = c.COLOR_ATTACHMENT0 + t;\n        let h;\n        C(e) ? (b(e) ? (h = e.descriptor, this._colorAttachments.set(i, e)) : (h = e, this._colorAttachments.set(i, new N(this._context, h))), U(h, this._desc)) : (D(e) ? (h = e.descriptor, this._colorAttachments.set(i, e)) : (h = e, this._colorAttachments.set(i, new g(this._context, h))), H(h, this._desc)), this._validateColorAttachmentPoint(i);\n      }\n    }\n    if (e(h)) {\n      let t, e;\n      if (C(h)) this._context.capabilities.depthTexture || console.error(\"Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2\"), b(h) ? (e = h.descriptor, this._depthStencilTexture = h) : (e = h, this._depthStencilTexture = new N(this._context, e)), U(e, this._desc);else {\n        D(h) ? (e = h.descriptor, t = h) : (e = h, t = new g(this._context, e));\n        const i = this._desc.depthStencilTarget ?? o.DEPTH_STENCIL_RENDER_BUFFER;\n        i === o.STENCIL_RENDER_BUFFER ? this._stencilAttachment = t : i === o.DEPTH_RENDER_BUFFER || i === o.DEPTH_STENCIL_RENDER_BUFFER ? this._depthAttachment = t : console.error('If a Renderbuffer is provided, \"depthStencilTarget\" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'), this._desc.depthStencilTarget = i, H(e, this._desc);\n      }\n    }\n  }\n  dispose() {\n    if (!this._desc) return;\n    const t = this._context.getBoundFramebufferObject();\n    if (this._disposeColorAttachments(), this._disposeDepthStencilAttachments(), this._glName) {\n      this._context.gl.deleteFramebuffer(this._glName), this._glName = null;\n    }\n    this._context.bindFramebuffer(t), this._context.instanceCounter.decrement(n.FramebufferObject, this), this._desc = null;\n  }\n  get glName() {\n    return this._glName;\n  }\n  get descriptor() {\n    return this._desc;\n  }\n  get colorTexture() {\n    const t = this._colorAttachments.get(c.COLOR_ATTACHMENT0);\n    return t && b(t) ? t : null;\n  }\n  get colorAttachment() {\n    return this._colorAttachments.get(c.COLOR_ATTACHMENT0);\n  }\n  get depthStencilAttachment() {\n    return this._depthStencilTexture || this._depthAttachment || this._stencilAttachment;\n  }\n  get depthStencilTexture() {\n    return this._depthStencilTexture;\n  }\n  get width() {\n    return this._desc.width ?? 0;\n  }\n  get height() {\n    return this._desc.height ?? 0;\n  }\n  get gpuMemoryUsage() {\n    return [...this._colorAttachments].reduce((t, _ref) => {\n      let [e, i] = _ref;\n      return t + F(i);\n    }, 0) + F(this.depthStencilAttachment);\n  }\n  getColorTexture(t) {\n    const e = this._colorAttachments.get(t);\n    return e && b(e) ? e : null;\n  }\n  attachColorTexture(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : c.COLOR_ATTACHMENT0;\n    if (!t) return;\n    this._validateColorAttachmentPoint(e);\n    U(t.descriptor, this._desc), this._disposeColorAttachments(), this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(t.glName, e)), this._colorAttachments.set(e, t);\n  }\n  detachColorTexture() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : c.COLOR_ATTACHMENT0;\n    const e = this._colorAttachments.get(t);\n    if (b(e)) {\n      const i = e;\n      return this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(null, t)), this._colorAttachments.delete(t), i;\n    }\n  }\n  setColorTextureTarget(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : c.COLOR_ATTACHMENT0;\n    const i = this._colorAttachments.get(e);\n    b(i) && this._framebufferTexture2D(i.glName, e, t);\n  }\n  attachDepthStencilTexture(t) {\n    if (i(t)) return;\n    const e = t.descriptor;\n    e.pixelFormat !== _.DEPTH_STENCIL && console.error(\"Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!\"), e.dataType !== a.UNSIGNED_INT_24_8 && console.error(\"Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!\"), this._context.capabilities.depthTexture || console.error(\"Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!\"), U(e, this._desc), this._desc.depthStencilTarget && this._desc.depthStencilTarget !== o.DEPTH_STENCIL_TEXTURE && (this._desc.depthStencilTarget = o.DEPTH_STENCIL_TEXTURE), this._disposeDepthStencilAttachments(), this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(t.glName, l)), this._depthStencilTexture = t;\n  }\n  detachDepthStencilTexture() {\n    const t = this._depthStencilTexture;\n    return t && this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(null, l)), this._depthStencilTexture = null, t;\n  }\n  attachDepthStencilBuffer(t) {\n    if (i(t)) return;\n    const e = t.descriptor;\n    if (e.internalFormat !== T.DEPTH_STENCIL && e.internalFormat !== T.DEPTH_COMPONENT16 && console.error(\"Depth/Stencil buffer must have correct internalFormat\"), H(e, this._desc), this._disposeDepthStencilAttachments(), this._desc.depthStencilTarget = e.internalFormat === T.DEPTH_STENCIL ? o.DEPTH_STENCIL_RENDER_BUFFER : o.DEPTH_RENDER_BUFFER, this._initialized) {\n      this._context.bindFramebuffer(this);\n      const e = this._context.gl,\n        i = this._desc.depthStencilTarget === o.DEPTH_RENDER_BUFFER ? e.DEPTH_ATTACHMENT : e.DEPTH_STENCIL_ATTACHMENT;\n      e.framebufferRenderbuffer(E.FRAMEBUFFER, i, e.RENDERBUFFER, t.glName);\n    }\n    this._depthAttachment = t;\n  }\n  detachDepthStencilBuffer() {\n    const t = this._context.gl,\n      e = this._depthAttachment;\n    if (e && this._initialized) {\n      this._context.bindFramebuffer(this);\n      const e = this._desc.depthStencilTarget === o.DEPTH_RENDER_BUFFER ? t.DEPTH_ATTACHMENT : t.DEPTH_STENCIL_ATTACHMENT;\n      t.framebufferRenderbuffer(E.FRAMEBUFFER, e, t.RENDERBUFFER, null);\n    }\n    return this._depthAttachment = null, e;\n  }\n  detachAll() {\n    this._colorAttachments.forEach((t, e) => this._detachColorAttachment(e)), this.detachDepthStencilBuffer(), this.detachDepthStencilTexture();\n  }\n  copyToTexture(t, e, i, r, h, s, n) {\n    (t < 0 || e < 0 || h < 0 || s < 0) && console.error(\"Offsets cannot be negative!\"), (i <= 0 || r <= 0) && console.error(\"Copy width and height must be greater than zero!\");\n    const c = this._desc,\n      o = n.descriptor;\n    n.descriptor.target !== d.TEXTURE_2D && console.error(\"Texture target must be TEXTURE_2D!\"), (null == c?.width || null == c?.height || null == o?.width || null == o?.height || t + i > c.width || e + r > c.height || h + i > o.width || s + r > o.height) && console.error(\"Bad dimensions, the current input values will attempt to read or copy out of bounds!\");\n    const _ = this._context,\n      a = _.bindTexture(n, N.TEXTURE_UNIT_FOR_UPDATES);\n    _.setActiveTexture(N.TEXTURE_UNIT_FOR_UPDATES), _.bindFramebuffer(this), _.gl.copyTexSubImage2D(d.TEXTURE_2D, 0, h, s, t, e, i, r), _.bindTexture(a, N.TEXTURE_UNIT_FOR_UPDATES);\n  }\n  readPixels(t, e, i, r, h, s, n) {\n    (i <= 0 || r <= 0) && console.error(\"Copy width and height must be greater than zero!\"), n || console.error(\"Target memory is not initialized!\"), this._context.bindFramebuffer(this);\n    this._context.gl.readPixels(t, e, i, r, h, s, n);\n  }\n  async readPixelsAsync(t, e, i, n, c, o, _) {\n    if (this._context.type !== s.WEBGL2) return h() && console.warn(\"Attempting to read pixels using pixel buffer object without WebGL2\"), void this.readPixels(t, e, i, n, c, o, _);\n    const a = this._context.gl,\n      l = r.createPixelPack(this._context, u.STREAM_READ, _.byteLength);\n    this._context.bindBuffer(l), this._context.bindFramebuffer(this), a.readPixels(t, e, i, n, c, o, 0), this._context.unbindBuffer(f.PIXEL_PACK_BUFFER), await l.getSubDataAsync(_), l.dispose();\n  }\n  resize(t, e) {\n    const i = this._desc;\n    if (i.width !== t || i.height !== e) {\n      if (i.width = t, i.height = e, !this._initialized) return this._colorAttachments.forEach(i => {\n        i && i.resize(t, e);\n      }), void (this._depthStencilTexture && this._depthStencilTexture.resize(t, e));\n      this._colorAttachments.forEach(i => {\n        i && i.resize(t, e);\n      }), null != this._depthStencilTexture ? this._depthStencilTexture.resize(t, e) : (this._depthAttachment || this._stencilAttachment) && (this._depthAttachment && this._depthAttachment.resize(t, e), this._stencilAttachment && this._stencilAttachment.resize(t, e)), this._context.getBoundFramebufferObject() === this && this._context.bindFramebuffer(null), this._initialized = !1;\n    }\n  }\n  initializeAndBind() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : E.FRAMEBUFFER;\n    const e = this._context.gl;\n    if (this._initialized) return void e.bindFramebuffer(t, this.glName);\n    this._glName && e.deleteFramebuffer(this._glName);\n    const i = this._context,\n      r = e.createFramebuffer(),\n      s = this._desc,\n      n = s.colorTarget ?? m.RENDER_BUFFER,\n      l = s.width ?? 1,\n      u = s.height ?? 1;\n    if (e.bindFramebuffer(t, r), 0 === this._colorAttachments.size) if (n === m.TEXTURE || n === m.CUBEMAP) this._colorAttachments.set(c.COLOR_ATTACHMENT0, S(i, s, this.descriptor.colorTarget === m.CUBEMAP ? d.TEXTURE_CUBE_MAP : d.TEXTURE_2D));else {\n      const t = new g(i, {\n        internalFormat: A.RGBA4,\n        width: l,\n        height: u\n      });\n      this._colorAttachments.set(c.COLOR_ATTACHMENT0, t);\n    }\n    this._colorAttachments.forEach((i, r) => {\n      i && (b(i) ? this._framebufferTexture2D(i.glName, r, P(i), t) : e.framebufferRenderbuffer(t, r, e.RENDERBUFFER, i.glName));\n    });\n    const f = s.depthStencilTarget ?? o.NONE;\n    switch (f) {\n      case o.DEPTH_RENDER_BUFFER:\n      case o.DEPTH_STENCIL_RENDER_BUFFER:\n        {\n          this._depthAttachment || (this._depthAttachment = new g(i, {\n            internalFormat: s.depthStencilTarget === o.DEPTH_RENDER_BUFFER ? T.DEPTH_COMPONENT16 : T.DEPTH_STENCIL,\n            width: l,\n            height: u\n          }));\n          const r = f === o.DEPTH_RENDER_BUFFER ? e.DEPTH_ATTACHMENT : e.DEPTH_STENCIL_ATTACHMENT;\n          e.framebufferRenderbuffer(t, r, e.RENDERBUFFER, this._depthAttachment.glName);\n          break;\n        }\n      case o.STENCIL_RENDER_BUFFER:\n        this._stencilAttachment || (this._stencilAttachment = new g(i, {\n          internalFormat: T.STENCIL_INDEX8,\n          width: l,\n          height: u\n        })), e.framebufferRenderbuffer(t, e.STENCIL_ATTACHMENT, e.RENDERBUFFER, this._stencilAttachment.glName);\n        break;\n      case o.DEPTH_STENCIL_TEXTURE:\n        if (!this._depthStencilTexture) {\n          i.capabilities.depthTexture || console.error(\"Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!\");\n          const t = {\n            target: d.TEXTURE_2D,\n            pixelFormat: _.DEPTH_STENCIL,\n            dataType: a.UNSIGNED_INT_24_8,\n            samplingMode: p.NEAREST,\n            wrapMode: R.CLAMP_TO_EDGE,\n            width: l,\n            height: u\n          };\n          this._depthStencilTexture = new N(i, t);\n        }\n        this._framebufferTexture2D(this._depthStencilTexture.glName, e.DEPTH_STENCIL_ATTACHMENT, P(this._depthStencilTexture), t);\n    }\n    if (h()) {\n      e.checkFramebufferStatus(t) !== e.FRAMEBUFFER_COMPLETE && console.error(\"Framebuffer is incomplete!\");\n    }\n    this._glName = r, this._initialized = !0;\n  }\n  _framebufferTexture2D(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : c.COLOR_ATTACHMENT0;\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : d.TEXTURE_2D;\n    let r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : E.FRAMEBUFFER;\n    let h = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    this._context.gl.framebufferTexture2D(r, e, i, t, h);\n  }\n  _detachColorAttachment(t) {\n    h() && console.warn(\"Detaching an FBO attachment can be a slow due to invalidating framebuffer completeness!\");\n    const e = this._context.gl,\n      i = this._colorAttachments.get(t);\n    return b(i) ? this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(null, t)) : this._initialized && (this._context.bindFramebuffer(this), e.framebufferRenderbuffer(E.FRAMEBUFFER, t, e.RENDERBUFFER, null)), this._colorAttachments.delete(t), i;\n  }\n  _disposeColorAttachments() {\n    this._colorAttachments.forEach((t, e) => {\n      this._detachColorAttachment(e), t.dispose();\n    }), this._colorAttachments.clear();\n  }\n  _disposeDepthStencilAttachments() {\n    const t = this._context.gl;\n    if (this._depthAttachment) {\n      if (this._initialized) {\n        this._context.bindFramebuffer(this);\n        const e = this._desc.depthStencilTarget === o.DEPTH_RENDER_BUFFER ? t.DEPTH_ATTACHMENT : t.DEPTH_STENCIL_ATTACHMENT;\n        t.framebufferRenderbuffer(E.FRAMEBUFFER, e, t.RENDERBUFFER, null);\n      }\n      this._depthAttachment.dispose(), this._depthAttachment = null;\n    }\n    this._stencilAttachment && (this._initialized && (this._context.bindFramebuffer(this), t.framebufferRenderbuffer(E.FRAMEBUFFER, t.STENCIL_ATTACHMENT, t.RENDERBUFFER, null)), this._stencilAttachment.dispose(), this._stencilAttachment = null), this._depthStencilTexture && (this._initialized && (this._context.bindFramebuffer(this), this._framebufferTexture2D(null, t.DEPTH_STENCIL_ATTACHMENT)), this._depthStencilTexture.dispose(), this._depthStencilTexture = null);\n  }\n  _validateColorAttachmentPoint(e) {\n    if (-1 === x._MAX_COLOR_ATTACHMENTS) {\n      const t = this._context.capabilities.drawBuffers;\n      if (t) {\n        const e = this._context.gl;\n        x._MAX_COLOR_ATTACHMENTS = e.getParameter(t.MAX_COLOR_ATTACHMENTS);\n      } else x._MAX_COLOR_ATTACHMENTS = 1;\n    }\n    const i = e - c.COLOR_ATTACHMENT0;\n    i + 1 > x._MAX_COLOR_ATTACHMENTS && t.getLogger(\"esri.views.webgl.FrameBufferObject\").error(\"esri.FrameBufferObject\", `illegal attachment point for color attachment: ${i + 1}. Implementation supports up to ${x._MAX_COLOR_ATTACHMENTS} color attachments`);\n  }\n}\nfunction b(t) {\n  return null != t && \"type\" in t && \"texture\" === t.type;\n}\nfunction D(t) {\n  return null != t && \"type\" in t && \"renderbuffer\" === t.type;\n}\nfunction C(t) {\n  return b(t) || null != t && \"pixelFormat\" in t;\n}\nfunction S(t, e, i) {\n  return new N(t, {\n    target: i,\n    pixelFormat: _.RGBA,\n    dataType: a.UNSIGNED_BYTE,\n    samplingMode: p.NEAREST,\n    wrapMode: R.CLAMP_TO_EDGE,\n    width: e.width,\n    height: e.height\n  });\n}\nfunction U(t, e) {\n  t.target !== d.TEXTURE_2D && t.target !== d.TEXTURE_CUBE_MAP && console.error(\"Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!\"), void 0 !== e.width && e.width >= 0 && void 0 !== e.height && e.height >= 0 ? e.width === t.width && e.height === t.height || console.error(\"Color attachment texture must match the framebuffer's!\") : (e.width = t.width, e.height = t.height);\n}\nfunction H(t, e) {\n  void 0 !== e.width && e.width >= 0 && void 0 !== e.height && e.height >= 0 ? e.width === t.width && e.height === t.height || console.error(\"Renderbuffer dimensions must match the framebuffer's!\") : (e.width = t.width, e.height = t.height);\n}\nfunction P(t) {\n  return t.descriptor.target === d.TEXTURE_CUBE_MAP ? d.TEXTURE_CUBE_MAP_POSITIVE_X : d.TEXTURE_2D;\n}\nx._MAX_COLOR_ATTACHMENTS = -1;\nexport { x as FramebufferObject };","map":{"version":3,"names":["t","isSome","e","isNone","i","BufferObject","r","webglDebugEnabled","h","ContextType","s","ResourceType","n","ColorAttachment","c","DepthStencilTargetType","o","PixelFormat","_","PixelType","a","DepthStencilAttachment","l","RenderbufferFormat","T","FramebufferTarget","E","TextureType","d","Usage","u","BufferType","f","TargetType","m","SizedPixelFormat","A","TextureSamplingMode","p","TextureWrapMode","R","Renderbuffer","g","Texture","N","getGpuMemoryUsage","F","x","constructor","arguments","length","undefined","_context","_glName","_depthAttachment","_stencilAttachment","_colorAttachments","Map","_depthStencilTexture","_initialized","_desc","instanceCounter","increment","FramebufferObject","Array","isArray","COLOR_ATTACHMENT0","C","b","descriptor","set","U","D","H","_validateColorAttachmentPoint","capabilities","depthTexture","console","error","depthStencilTarget","DEPTH_STENCIL_RENDER_BUFFER","STENCIL_RENDER_BUFFER","DEPTH_RENDER_BUFFER","dispose","getBoundFramebufferObject","_disposeColorAttachments","_disposeDepthStencilAttachments","gl","deleteFramebuffer","bindFramebuffer","decrement","glName","colorTexture","get","colorAttachment","depthStencilAttachment","depthStencilTexture","width","height","gpuMemoryUsage","reduce","_ref","getColorTexture","attachColorTexture","_framebufferTexture2D","detachColorTexture","delete","setColorTextureTarget","attachDepthStencilTexture","pixelFormat","DEPTH_STENCIL","dataType","UNSIGNED_INT_24_8","DEPTH_STENCIL_TEXTURE","detachDepthStencilTexture","attachDepthStencilBuffer","internalFormat","DEPTH_COMPONENT16","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","framebufferRenderbuffer","FRAMEBUFFER","RENDERBUFFER","detachDepthStencilBuffer","detachAll","forEach","_detachColorAttachment","copyToTexture","target","TEXTURE_2D","bindTexture","TEXTURE_UNIT_FOR_UPDATES","setActiveTexture","copyTexSubImage2D","readPixels","readPixelsAsync","type","WEBGL2","warn","createPixelPack","STREAM_READ","byteLength","bindBuffer","unbindBuffer","PIXEL_PACK_BUFFER","getSubDataAsync","resize","initializeAndBind","createFramebuffer","colorTarget","RENDER_BUFFER","size","TEXTURE","CUBEMAP","S","TEXTURE_CUBE_MAP","RGBA4","P","NONE","STENCIL_INDEX8","STENCIL_ATTACHMENT","samplingMode","NEAREST","wrapMode","CLAMP_TO_EDGE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","framebufferTexture2D","clear","_MAX_COLOR_ATTACHMENTS","drawBuffers","getParameter","MAX_COLOR_ATTACHMENTS","getLogger","RGBA","UNSIGNED_BYTE","TEXTURE_CUBE_MAP_POSITIVE_X"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/webgl/FramebufferObject.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Logger.js\";import{isSome as e,isNone as i}from\"../../core/maybe.js\";import{BufferObject as r}from\"./BufferObject.js\";import{webglDebugEnabled as h}from\"./checkWebGLError.js\";import{ContextType as s}from\"./context-util.js\";import{ResourceType as n,ColorAttachment as c,DepthStencilTargetType as o,PixelFormat as _,PixelType as a,DepthStencilAttachment as l,RenderbufferFormat as T,FramebufferTarget as E,TextureType as d,Usage as u,BufferType as f,TargetType as m,SizedPixelFormat as A,TextureSamplingMode as p,TextureWrapMode as R}from\"./enums.js\";import{Renderbuffer as g}from\"./Renderbuffer.js\";import{Texture as N}from\"./Texture.js\";import{getGpuMemoryUsage as F}from\"./Util.js\";class x{constructor(t,i,r=null,h=null){if(this._context=t,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachments=new Map,this._depthStencilTexture=null,this._initialized=!1,this._desc={...i},t.instanceCounter.increment(n.FramebufferObject,this),e(r)){Array.isArray(r)||(r=[r]);for(let t=0;t<r.length;++t){const e=r[t],i=c.COLOR_ATTACHMENT0+t;let h;C(e)?(b(e)?(h=e.descriptor,this._colorAttachments.set(i,e)):(h=e,this._colorAttachments.set(i,new N(this._context,h))),U(h,this._desc)):(D(e)?(h=e.descriptor,this._colorAttachments.set(i,e)):(h=e,this._colorAttachments.set(i,new g(this._context,h))),H(h,this._desc)),this._validateColorAttachmentPoint(i)}}if(e(h)){let t,e;if(C(h))this._context.capabilities.depthTexture||console.error(\"Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2\"),b(h)?(e=h.descriptor,this._depthStencilTexture=h):(e=h,this._depthStencilTexture=new N(this._context,e)),U(e,this._desc);else{D(h)?(e=h.descriptor,t=h):(e=h,t=new g(this._context,e));const i=this._desc.depthStencilTarget??o.DEPTH_STENCIL_RENDER_BUFFER;i===o.STENCIL_RENDER_BUFFER?this._stencilAttachment=t:i===o.DEPTH_RENDER_BUFFER||i===o.DEPTH_STENCIL_RENDER_BUFFER?this._depthAttachment=t:console.error('If a Renderbuffer is provided, \"depthStencilTarget\" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),this._desc.depthStencilTarget=i,H(e,this._desc)}}}dispose(){if(!this._desc)return;const t=this._context.getBoundFramebufferObject();if(this._disposeColorAttachments(),this._disposeDepthStencilAttachments(),this._glName){this._context.gl.deleteFramebuffer(this._glName),this._glName=null}this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(n.FramebufferObject,this),this._desc=null}get glName(){return this._glName}get descriptor(){return this._desc}get colorTexture(){const t=this._colorAttachments.get(c.COLOR_ATTACHMENT0);return t&&b(t)?t:null}get colorAttachment(){return this._colorAttachments.get(c.COLOR_ATTACHMENT0)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._desc.width??0}get height(){return this._desc.height??0}get gpuMemoryUsage(){return[...this._colorAttachments].reduce(((t,[e,i])=>t+F(i)),0)+F(this.depthStencilAttachment)}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&b(e)?e:null}attachColorTexture(t,e=c.COLOR_ATTACHMENT0){if(!t)return;this._validateColorAttachmentPoint(e);U(t.descriptor,this._desc),this._disposeColorAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=c.COLOR_ATTACHMENT0){const e=this._colorAttachments.get(t);if(b(e)){const i=e;return this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t)),this._colorAttachments.delete(t),i}}setColorTextureTarget(t,e=c.COLOR_ATTACHMENT0){const i=this._colorAttachments.get(e);b(i)&&this._framebufferTexture2D(i.glName,e,t)}attachDepthStencilTexture(t){if(i(t))return;const e=t.descriptor;e.pixelFormat!==_.DEPTH_STENCIL&&console.error(\"Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!\"),e.dataType!==a.UNSIGNED_INT_24_8&&console.error(\"Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!\"),this._context.capabilities.depthTexture||console.error(\"Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!\"),U(e,this._desc),this._desc.depthStencilTarget&&this._desc.depthStencilTarget!==o.DEPTH_STENCIL_TEXTURE&&(this._desc.depthStencilTarget=o.DEPTH_STENCIL_TEXTURE),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,l)),this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;return t&&this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,l)),this._depthStencilTexture=null,t}attachDepthStencilBuffer(t){if(i(t))return;const e=t.descriptor;if(e.internalFormat!==T.DEPTH_STENCIL&&e.internalFormat!==T.DEPTH_COMPONENT16&&console.error(\"Depth/Stencil buffer must have correct internalFormat\"),H(e,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=e.internalFormat===T.DEPTH_STENCIL?o.DEPTH_STENCIL_RENDER_BUFFER:o.DEPTH_RENDER_BUFFER,this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,i=this._desc.depthStencilTarget===o.DEPTH_RENDER_BUFFER?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(E.FRAMEBUFFER,i,e.RENDERBUFFER,t.glName)}this._depthAttachment=t}detachDepthStencilBuffer(){const t=this._context.gl,e=this._depthAttachment;if(e&&this._initialized){this._context.bindFramebuffer(this);const e=this._desc.depthStencilTarget===o.DEPTH_RENDER_BUFFER?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(E.FRAMEBUFFER,e,t.RENDERBUFFER,null)}return this._depthAttachment=null,e}detachAll(){this._colorAttachments.forEach(((t,e)=>this._detachColorAttachment(e))),this.detachDepthStencilBuffer(),this.detachDepthStencilTexture()}copyToTexture(t,e,i,r,h,s,n){(t<0||e<0||h<0||s<0)&&console.error(\"Offsets cannot be negative!\"),(i<=0||r<=0)&&console.error(\"Copy width and height must be greater than zero!\");const c=this._desc,o=n.descriptor;n.descriptor.target!==d.TEXTURE_2D&&console.error(\"Texture target must be TEXTURE_2D!\"),(null==c?.width||null==c?.height||null==o?.width||null==o?.height||t+i>c.width||e+r>c.height||h+i>o.width||s+r>o.height)&&console.error(\"Bad dimensions, the current input values will attempt to read or copy out of bounds!\");const _=this._context,a=_.bindTexture(n,N.TEXTURE_UNIT_FOR_UPDATES);_.setActiveTexture(N.TEXTURE_UNIT_FOR_UPDATES),_.bindFramebuffer(this),_.gl.copyTexSubImage2D(d.TEXTURE_2D,0,h,s,t,e,i,r),_.bindTexture(a,N.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,i,r,h,s,n){(i<=0||r<=0)&&console.error(\"Copy width and height must be greater than zero!\"),n||console.error(\"Target memory is not initialized!\"),this._context.bindFramebuffer(this);this._context.gl.readPixels(t,e,i,r,h,s,n)}async readPixelsAsync(t,e,i,n,c,o,_){if(this._context.type!==s.WEBGL2)return h()&&console.warn(\"Attempting to read pixels using pixel buffer object without WebGL2\"),void this.readPixels(t,e,i,n,c,o,_);const a=this._context.gl,l=r.createPixelPack(this._context,u.STREAM_READ,_.byteLength);this._context.bindBuffer(l),this._context.bindFramebuffer(this),a.readPixels(t,e,i,n,c,o,0),this._context.unbindBuffer(f.PIXEL_PACK_BUFFER),await l.getSubDataAsync(_),l.dispose()}resize(t,e){const i=this._desc;if(i.width!==t||i.height!==e){if(i.width=t,i.height=e,!this._initialized)return this._colorAttachments.forEach((i=>{i&&i.resize(t,e)})),void(this._depthStencilTexture&&this._depthStencilTexture.resize(t,e));this._colorAttachments.forEach((i=>{i&&i.resize(t,e)})),null!=this._depthStencilTexture?this._depthStencilTexture.resize(t,e):(this._depthAttachment||this._stencilAttachment)&&(this._depthAttachment&&this._depthAttachment.resize(t,e),this._stencilAttachment&&this._stencilAttachment.resize(t,e)),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}}initializeAndBind(t=E.FRAMEBUFFER){const e=this._context.gl;if(this._initialized)return void e.bindFramebuffer(t,this.glName);this._glName&&e.deleteFramebuffer(this._glName);const i=this._context,r=e.createFramebuffer(),s=this._desc,n=s.colorTarget??m.RENDER_BUFFER,l=s.width??1,u=s.height??1;if(e.bindFramebuffer(t,r),0===this._colorAttachments.size)if(n===m.TEXTURE||n===m.CUBEMAP)this._colorAttachments.set(c.COLOR_ATTACHMENT0,S(i,s,this.descriptor.colorTarget===m.CUBEMAP?d.TEXTURE_CUBE_MAP:d.TEXTURE_2D));else{const t=new g(i,{internalFormat:A.RGBA4,width:l,height:u});this._colorAttachments.set(c.COLOR_ATTACHMENT0,t)}this._colorAttachments.forEach(((i,r)=>{i&&(b(i)?this._framebufferTexture2D(i.glName,r,P(i),t):e.framebufferRenderbuffer(t,r,e.RENDERBUFFER,i.glName))}));const f=s.depthStencilTarget??o.NONE;switch(f){case o.DEPTH_RENDER_BUFFER:case o.DEPTH_STENCIL_RENDER_BUFFER:{this._depthAttachment||(this._depthAttachment=new g(i,{internalFormat:s.depthStencilTarget===o.DEPTH_RENDER_BUFFER?T.DEPTH_COMPONENT16:T.DEPTH_STENCIL,width:l,height:u}));const r=f===o.DEPTH_RENDER_BUFFER?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(t,r,e.RENDERBUFFER,this._depthAttachment.glName);break}case o.STENCIL_RENDER_BUFFER:this._stencilAttachment||(this._stencilAttachment=new g(i,{internalFormat:T.STENCIL_INDEX8,width:l,height:u})),e.framebufferRenderbuffer(t,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,this._stencilAttachment.glName);break;case o.DEPTH_STENCIL_TEXTURE:if(!this._depthStencilTexture){i.capabilities.depthTexture||console.error(\"Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!\");const t={target:d.TEXTURE_2D,pixelFormat:_.DEPTH_STENCIL,dataType:a.UNSIGNED_INT_24_8,samplingMode:p.NEAREST,wrapMode:R.CLAMP_TO_EDGE,width:l,height:u};this._depthStencilTexture=new N(i,t)}this._framebufferTexture2D(this._depthStencilTexture.glName,e.DEPTH_STENCIL_ATTACHMENT,P(this._depthStencilTexture),t)}if(h()){e.checkFramebufferStatus(t)!==e.FRAMEBUFFER_COMPLETE&&console.error(\"Framebuffer is incomplete!\")}this._glName=r,this._initialized=!0}_framebufferTexture2D(t,e=c.COLOR_ATTACHMENT0,i=d.TEXTURE_2D,r=E.FRAMEBUFFER,h=0){this._context.gl.framebufferTexture2D(r,e,i,t,h)}_detachColorAttachment(t){h()&&console.warn(\"Detaching an FBO attachment can be a slow due to invalidating framebuffer completeness!\");const e=this._context.gl,i=this._colorAttachments.get(t);return b(i)?this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t)):this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(E.FRAMEBUFFER,t,e.RENDERBUFFER,null)),this._colorAttachments.delete(t),i}_disposeColorAttachments(){this._colorAttachments.forEach(((t,e)=>{this._detachColorAttachment(e),t.dispose()})),this._colorAttachments.clear()}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);const e=this._desc.depthStencilTarget===o.DEPTH_RENDER_BUFFER?t.DEPTH_ATTACHMENT:t.DEPTH_STENCIL_ATTACHMENT;t.framebufferRenderbuffer(E.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(E.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)}_validateColorAttachmentPoint(e){if(-1===x._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;x._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else x._MAX_COLOR_ATTACHMENTS=1}const i=e-c.COLOR_ATTACHMENT0;i+1>x._MAX_COLOR_ATTACHMENTS&&t.getLogger(\"esri.views.webgl.FrameBufferObject\").error(\"esri.FrameBufferObject\",`illegal attachment point for color attachment: ${i+1}. Implementation supports up to ${x._MAX_COLOR_ATTACHMENTS} color attachments`)}}function b(t){return null!=t&&\"type\"in t&&\"texture\"===t.type}function D(t){return null!=t&&\"type\"in t&&\"renderbuffer\"===t.type}function C(t){return b(t)||null!=t&&\"pixelFormat\"in t}function S(t,e,i){return new N(t,{target:i,pixelFormat:_.RGBA,dataType:a.UNSIGNED_BYTE,samplingMode:p.NEAREST,wrapMode:R.CLAMP_TO_EDGE,width:e.width,height:e.height})}function U(t,e){t.target!==d.TEXTURE_2D&&t.target!==d.TEXTURE_CUBE_MAP&&console.error(\"Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!\"),void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error(\"Color attachment texture must match the framebuffer's!\"):(e.width=t.width,e.height=t.height)}function H(t,e){void 0!==e.width&&e.width>=0&&void 0!==e.height&&e.height>=0?e.width===t.width&&e.height===t.height||console.error(\"Renderbuffer dimensions must match the framebuffer's!\"):(e.width=t.width,e.height=t.height)}function P(t){return t.descriptor.target===d.TEXTURE_CUBE_MAP?d.TEXTURE_CUBE_MAP_POSITIVE_X:d.TEXTURE_2D}x._MAX_COLOR_ATTACHMENTS=-1;export{x as FramebufferObject};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}