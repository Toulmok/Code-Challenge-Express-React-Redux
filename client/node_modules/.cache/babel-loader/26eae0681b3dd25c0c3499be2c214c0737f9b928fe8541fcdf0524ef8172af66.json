{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { unwrap as e } from \"../../../core/maybe.js\";\nimport { k as t } from \"../../../chunks/vec2.js\";\nimport { a as r } from \"../../../chunks/vec2f64.js\";\nimport { f as i } from \"../../../chunks/vec3f64.js\";\nimport { absoluteHeightElevationInfo as s } from \"../../../support/elevationInfoUtils.js\";\nimport { defaults as o } from \"./Settings.js\";\nimport { SnappingAlgorithm as n } from \"./SnappingAlgorithm.js\";\nimport { anyMapPointToSnappingPoint as l, asSnappingPoint as a } from \"./SnappingPoint.js\";\nimport { editEdgeToSnappingEdge as c, squaredScreenDistance as h } from \"./snappingUtils.js\";\nimport { ParallelLineSnappingCandidate as p } from \"./candidates/ParallelLineSnappingCandidate.js\";\nimport { vectorToScreenPoint as d } from \"../support/viewUtils.js\";\nimport { projectPointToLine as f } from \"../../support/geometry2dUtils.js\";\nclass g extends n {\n  snapNewVertex(e, t) {\n    const r = t.editGeometryOperations.data.components[0],\n      i = r.edges.length,\n      o = r.vertices.length,\n      n = [];\n    if (i < 2) return n;\n    const {\n        view: a\n      } = this,\n      h = d(e, t.spatialReference, s, a),\n      p = l(r.vertices[o - 1].pos, a, t),\n      f = l(r.vertices[0].pos, a, t),\n      g = r.edges[i - 1];\n    let m = g;\n    do {\n      if (this.edgeExceedsShortLineThreshold(m, t)) {\n        const r = c(m, a, t);\n        this._checkEdgeForParallelLines(r, p, e, h, t, n), this._checkEdgeForParallelLines(r, f, e, h, t, n);\n      }\n      m = m.leftVertex.leftEdge;\n    } while (m && m !== g);\n    return n;\n  }\n  snapExistingVertex(t, r) {\n    const i = [],\n      o = e(r.vertexHandle),\n      n = o.component;\n    if (n.edges.length < 3) return i;\n    const {\n        view: a\n      } = this,\n      h = d(t, r.spatialReference, s, a),\n      p = o.leftEdge,\n      f = o.rightEdge,\n      g = n.vertices[0],\n      m = l(g.pos, a, r),\n      u = n.vertices.length,\n      v = n.vertices[u - 1],\n      E = l(v.pos, a, r),\n      L = n.edges[0];\n    let x = L;\n    do {\n      if (x !== p && x !== f && this.edgeExceedsShortLineThreshold(x, r)) {\n        const e = c(x, a, r);\n        p && this._checkEdgeForParallelLines(e, l(p.leftVertex.pos, a, r), t, h, r, i), f && this._checkEdgeForParallelLines(e, l(f.rightVertex.pos, a, r), t, h, r, i), o === g ? this._checkEdgeForParallelLines(e, E, t, h, r, i) : o === v && this._checkEdgeForParallelLines(e, m, t, h, r, i);\n      }\n      x = x.rightVertex.rightEdge;\n    } while (x && x !== L);\n    return i;\n  }\n  _checkEdgeForParallelLines(e, r, n, l, c, g) {\n    const u = e.left,\n      v = e.right;\n    if (f(m, r, u, v), t(m, r) < o.parallelLineThreshold) return;\n    f(m, n, u, v, r);\n    const {\n        spatialReference: E,\n        pointer: L\n      } = c,\n      x = a(i(m[0], m[1], n[2]));\n    if (h(l, d(x, E, s, this.view)) < this.squaredProximityThreshold(L)) {\n      if (this.isVertical(x, r) || this.isVertical(u, v)) return;\n      if (this._parallelToPreviousCandidate(e, g)) return;\n      g.push(new p({\n        referenceLine: e,\n        lineStart: r,\n        targetPoint: x,\n        isDraped: \"on-the-ground\" === c.elevationInfo?.mode\n      }));\n    }\n  }\n  _parallelToPreviousCandidate(e, r) {\n    const i = e.left,\n      s = e.right;\n    for (const n of r) if (f(m, s, n.constraint.start, n.constraint.end, i), t(m, s) < o.parallelLineThreshold) return n.addReferenceLine(e), !0;\n    return !1;\n  }\n}\nconst m = r();\nexport { g as ParallelLineSnapper };","map":{"version":3,"names":["unwrap","e","k","t","a","r","f","i","absoluteHeightElevationInfo","s","defaults","o","SnappingAlgorithm","n","anyMapPointToSnappingPoint","l","asSnappingPoint","editEdgeToSnappingEdge","c","squaredScreenDistance","h","ParallelLineSnappingCandidate","p","vectorToScreenPoint","d","projectPointToLine","g","snapNewVertex","editGeometryOperations","data","components","edges","length","vertices","view","spatialReference","pos","m","edgeExceedsShortLineThreshold","_checkEdgeForParallelLines","leftVertex","leftEdge","snapExistingVertex","vertexHandle","component","rightEdge","u","v","E","L","x","rightVertex","left","right","parallelLineThreshold","pointer","squaredProximityThreshold","isVertical","_parallelToPreviousCandidate","push","referenceLine","lineStart","targetPoint","isDraped","elevationInfo","mode","constraint","start","end","addReferenceLine","ParallelLineSnapper"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/ParallelLineSnapper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../../../core/maybe.js\";import{k as t}from\"../../../chunks/vec2.js\";import{a as r}from\"../../../chunks/vec2f64.js\";import{f as i}from\"../../../chunks/vec3f64.js\";import{absoluteHeightElevationInfo as s}from\"../../../support/elevationInfoUtils.js\";import{defaults as o}from\"./Settings.js\";import{SnappingAlgorithm as n}from\"./SnappingAlgorithm.js\";import{anyMapPointToSnappingPoint as l,asSnappingPoint as a}from\"./SnappingPoint.js\";import{editEdgeToSnappingEdge as c,squaredScreenDistance as h}from\"./snappingUtils.js\";import{ParallelLineSnappingCandidate as p}from\"./candidates/ParallelLineSnappingCandidate.js\";import{vectorToScreenPoint as d}from\"../support/viewUtils.js\";import{projectPointToLine as f}from\"../../support/geometry2dUtils.js\";class g extends n{snapNewVertex(e,t){const r=t.editGeometryOperations.data.components[0],i=r.edges.length,o=r.vertices.length,n=[];if(i<2)return n;const{view:a}=this,h=d(e,t.spatialReference,s,a),p=l(r.vertices[o-1].pos,a,t),f=l(r.vertices[0].pos,a,t),g=r.edges[i-1];let m=g;do{if(this.edgeExceedsShortLineThreshold(m,t)){const r=c(m,a,t);this._checkEdgeForParallelLines(r,p,e,h,t,n),this._checkEdgeForParallelLines(r,f,e,h,t,n)}m=m.leftVertex.leftEdge}while(m&&m!==g);return n}snapExistingVertex(t,r){const i=[],o=e(r.vertexHandle),n=o.component;if(n.edges.length<3)return i;const{view:a}=this,h=d(t,r.spatialReference,s,a),p=o.leftEdge,f=o.rightEdge,g=n.vertices[0],m=l(g.pos,a,r),u=n.vertices.length,v=n.vertices[u-1],E=l(v.pos,a,r),L=n.edges[0];let x=L;do{if(x!==p&&x!==f&&this.edgeExceedsShortLineThreshold(x,r)){const e=c(x,a,r);p&&this._checkEdgeForParallelLines(e,l(p.leftVertex.pos,a,r),t,h,r,i),f&&this._checkEdgeForParallelLines(e,l(f.rightVertex.pos,a,r),t,h,r,i),o===g?this._checkEdgeForParallelLines(e,E,t,h,r,i):o===v&&this._checkEdgeForParallelLines(e,m,t,h,r,i)}x=x.rightVertex.rightEdge}while(x&&x!==L);return i}_checkEdgeForParallelLines(e,r,n,l,c,g){const u=e.left,v=e.right;if(f(m,r,u,v),t(m,r)<o.parallelLineThreshold)return;f(m,n,u,v,r);const{spatialReference:E,pointer:L}=c,x=a(i(m[0],m[1],n[2]));if(h(l,d(x,E,s,this.view))<this.squaredProximityThreshold(L)){if(this.isVertical(x,r)||this.isVertical(u,v))return;if(this._parallelToPreviousCandidate(e,g))return;g.push(new p({referenceLine:e,lineStart:r,targetPoint:x,isDraped:\"on-the-ground\"===c.elevationInfo?.mode}))}}_parallelToPreviousCandidate(e,r){const i=e.left,s=e.right;for(const n of r)if(f(m,s,n.constraint.start,n.constraint.end,i),t(m,s)<o.parallelLineThreshold)return n.addReferenceLine(e),!0;return!1}}const m=r();export{g as ParallelLineSnapper};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}