{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport { extentContainsPoint as r, extentContainsMultipoint as t } from \"../../../geometry/support/contains.js\";\nimport { getExtentIntersector as i } from \"../../../geometry/support/intersects.js\";\nimport { isPolygon as s, isExtent as o, getJsonType as n } from \"../../../geometry/support/jsonUtils.js\";\nimport { isValid as l } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { polygonContainsPoint as a, polygonContainsMultipoint as p } from \"../contains.js\";\nimport { convertFromPolygon as u } from \"../featureConversionUtils.js\";\nimport m from \"../OptimizedGeometry.js\";\nimport { checkProjectionSupport as y } from \"./projectionSupport.js\";\nimport { getGeometry as f } from \"./utils.js\";\nconst c = \"feature-store:unsupported-query\",\n  R = {\n    esriSpatialRelIntersects: \"intersects\",\n    esriSpatialRelContains: \"contains\",\n    esriSpatialRelCrosses: \"crosses\",\n    esriSpatialRelDisjoint: \"disjoint\",\n    esriSpatialRelEnvelopeIntersects: \"intersects\",\n    esriSpatialRelIndexIntersects: null,\n    esriSpatialRelOverlaps: \"overlaps\",\n    esriSpatialRelTouches: \"touches\",\n    esriSpatialRelWithin: \"within\",\n    esriSpatialRelRelation: null\n  },\n  S = {\n    spatialRelationship: {\n      esriSpatialRelIntersects: !0,\n      esriSpatialRelContains: !0,\n      esriSpatialRelWithin: !0,\n      esriSpatialRelCrosses: !0,\n      esriSpatialRelDisjoint: !0,\n      esriSpatialRelTouches: !0,\n      esriSpatialRelOverlaps: !0,\n      esriSpatialRelEnvelopeIntersects: !0,\n      esriSpatialRelIndexIntersects: !1,\n      esriSpatialRelRelation: !1\n    },\n    queryGeometry: {\n      esriGeometryPoint: !0,\n      esriGeometryMultipoint: !0,\n      esriGeometryPolyline: !0,\n      esriGeometryPolygon: !0,\n      esriGeometryEnvelope: !0\n    },\n    layerGeometry: {\n      esriGeometryPoint: !0,\n      esriGeometryMultipoint: !0,\n      esriGeometryPolyline: !0,\n      esriGeometryPolygon: !0,\n      esriGeometryEnvelope: !1\n    }\n  };\nfunction G(e) {\n  return null != e && !0 === S.spatialRelationship[e];\n}\nfunction g(e) {\n  return null != e && !0 === S.queryGeometry[n(e)];\n}\nfunction j(e) {\n  return null != e && !0 === S.layerGeometry[e];\n}\nfunction h() {\n  return import(\"../../../geometry/geometryEngineJSON.js\");\n}\nfunction v(e, n, l, y, c) {\n  if (s(n) && \"esriGeometryPoint\" === l && (\"esriSpatialRelIntersects\" === e || \"esriSpatialRelContains\" === e)) {\n    const e = u(new m(), n, !1, !1);\n    return Promise.resolve(r => a(e, !1, !1, r));\n  }\n  if (s(n) && \"esriGeometryMultipoint\" === l) {\n    const r = u(new m(), n, !1, !1);\n    if (\"esriSpatialRelContains\" === e) return Promise.resolve(e => p(r, !1, !1, e, y, c));\n  }\n  if (o(n) && \"esriGeometryPoint\" === l && (\"esriSpatialRelIntersects\" === e || \"esriSpatialRelContains\" === e)) return Promise.resolve(e => r(n, f(l, y, c, e)));\n  if (o(n) && \"esriGeometryMultipoint\" === l && \"esriSpatialRelContains\" === e) return Promise.resolve(e => t(n, f(l, y, c, e)));\n  if (o(n) && \"esriSpatialRelIntersects\" === e) {\n    const e = i(l);\n    return Promise.resolve(r => e(n, f(l, y, c, r)));\n  }\n  return h().then(r => {\n    const t = r[R[e]].bind(null, n.spatialReference, n);\n    return e => t(f(l, y, c, e));\n  });\n}\nasync function P(r, t, i) {\n  const {\n    spatialRel: s,\n    geometry: o\n  } = r;\n  if (o) {\n    if (!G(s)) throw new e(c, \"Unsupported query spatial relationship\", {\n      query: r\n    });\n    if (l(o.spatialReference) && l(i)) {\n      if (!g(o)) throw new e(c, \"Unsupported query geometry type\", {\n        query: r\n      });\n      if (!j(t)) throw new e(c, \"Unsupported layer geometry type\", {\n        query: r\n      });\n      if (r.outSR) return y(r.geometry && r.geometry.spatialReference, r.outSR);\n    }\n  }\n}\nfunction I(e) {\n  if (o(e)) return !0;\n  if (s(e)) {\n    for (const r of e.rings) {\n      if (5 !== r.length) return !1;\n      if (r[0][0] !== r[1][0] || r[0][0] !== r[4][0] || r[2][0] !== r[3][0] || r[0][1] !== r[3][1] || r[0][1] !== r[4][1] || r[1][1] !== r[2][1]) return !1;\n    }\n    return !0;\n  }\n  return !1;\n}\nexport { I as canQueryWithRBush, P as checkSpatialQuerySupport, v as getSpatialQueryOperator };","map":{"version":3,"names":["e","extentContainsPoint","r","extentContainsMultipoint","t","getExtentIntersector","i","isPolygon","s","isExtent","o","getJsonType","n","isValid","l","polygonContainsPoint","a","polygonContainsMultipoint","p","convertFromPolygon","u","m","checkProjectionSupport","y","getGeometry","f","c","R","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","S","spatialRelationship","queryGeometry","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","layerGeometry","G","g","j","h","v","Promise","resolve","then","bind","spatialReference","P","spatialRel","geometry","query","outSR","I","rings","length","canQueryWithRBush","checkSpatialQuerySupport","getSpatialQueryOperator"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{extentContainsPoint as r,extentContainsMultipoint as t}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as i}from\"../../../geometry/support/intersects.js\";import{isPolygon as s,isExtent as o,getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{isValid as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{polygonContainsPoint as a,polygonContainsMultipoint as p}from\"../contains.js\";import{convertFromPolygon as u}from\"../featureConversionUtils.js\";import m from\"../OptimizedGeometry.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return null!=e&&!0===S.spatialRelationship[e]}function g(e){return null!=e&&!0===S.queryGeometry[n(e)]}function j(e){return null!=e&&!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,n,l,y,c){if(s(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=u(new m,n,!1,!1);return Promise.resolve((r=>a(e,!1,!1,r)))}if(s(n)&&\"esriGeometryMultipoint\"===l){const r=u(new m,n,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>p(r,!1,!1,e,y,c)))}if(o(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>r(n,f(l,y,c,e))));if(o(n)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>t(n,f(l,y,c,e))));if(o(n)&&\"esriSpatialRelIntersects\"===e){const e=i(l);return Promise.resolve((r=>e(n,f(l,y,c,r))))}return h().then((r=>{const t=r[R[e]].bind(null,n.spatialReference,n);return e=>t(f(l,y,c,e))}))}async function P(r,t,i){const{spatialRel:s,geometry:o}=r;if(o){if(!G(s))throw new e(c,\"Unsupported query spatial relationship\",{query:r});if(l(o.spatialReference)&&l(i)){if(!g(o))throw new e(c,\"Unsupported query geometry type\",{query:r});if(!j(t))throw new e(c,\"Unsupported layer geometry type\",{query:r});if(r.outSR)return y(r.geometry&&r.geometry.spatialReference,r.outSR)}}}function I(e){if(o(e))return!0;if(s(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}