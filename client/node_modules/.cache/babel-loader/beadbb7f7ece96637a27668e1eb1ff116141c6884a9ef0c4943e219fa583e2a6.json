{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { difference as e } from \"../../core/arrayUtils.js\";\nimport t from \"../../core/Error.js\";\nimport r from \"../../core/Logger.js\";\nimport { isNone as a, isSome as o } from \"../../core/maybe.js\";\nimport { debounce as s, eachAlways as l } from \"../../core/promiseUtils.js\";\nimport { updateOrigins as i } from \"../../core/accessorSupport/originUtils.js\";\nimport n from \"../FeatureLayer.js\";\nimport { parse as u } from \"../support/arcgisLayerUrl.js\";\nimport { fetchFeatureService as p } from \"../support/fetchService.js\";\nimport { isFeatureCollectionLayer as c, isFeatureServiceLayer as y } from \"../support/layerUtils.js\";\nimport d from \"../../portal/Portal.js\";\nimport m from \"../../portal/PortalItem.js\";\nimport { createForItemWrite as f } from \"../../portal/support/jsonContext.js\";\nimport { addTypeKeyword as w, TypeKeyword as h, getWGS84ExtentForItem as v, removeTypeKeyword as b } from \"../../portal/support/portalItemUtils.js\";\nconst I = r.getLogger(\"esri.layers.FeatureLayer\"),\n  S = \"Feature Service\";\nfunction g(e, t) {\n  return `Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`;\n}\nfunction j(e, r) {\n  if (r.type !== S) throw new t(\"feature-layer:portal-item-wrong-type\", g(e, `should have portal item of type \"${S}\"`));\n}\nasync function L(e) {\n  if (await e.load(), c(e)) throw new t(\"feature-layer:save\", g(e, \"using an in-memory source cannot be saved to a portal item\"));\n}\nfunction P(e, r) {\n  let a = (e.messages ?? []).filter(_ref => {\n    let {\n      type: e\n    } = _ref;\n    return \"error\" === e;\n  }).map(_ref2 => {\n    let {\n      name: e,\n      message: r,\n      details: a\n    } = _ref2;\n    return new t(e, r, a);\n  });\n  if (r?.ignoreUnsupported && (a = a.filter(_ref3 => {\n    let {\n      name: e\n    } = _ref3;\n    return \"layer:unsupported\" !== e && \"symbol:unsupported\" !== e && \"symbol-layer:unsupported\" !== e && \"property:unsupported\" !== e && \"url:unsupported\" !== e;\n  })), a.length > 0) throw new t(\"feature-layer:save\", \"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\", {\n    errors: a\n  });\n}\nasync function J(e, t, r) {\n  \"beforeSave\" in e && \"function\" == typeof e.beforeSave && (await e.beforeSave());\n  const a = e.write({}, t);\n  return P(t, r), a;\n}\nfunction N(e) {\n  const {\n    layer: t,\n    layerJSON: r\n  } = e;\n  return t.isTable ? {\n    layers: [],\n    tables: [r]\n  } : {\n    layers: [r],\n    tables: []\n  };\n}\nfunction O(e) {\n  w(e, h.JSAPI), e.typeKeywords && (e.typeKeywords = e.typeKeywords.filter((e, t, r) => r.indexOf(e) === t));\n}\nfunction E(e) {\n  const r = e.portalItem;\n  if (!r) throw I.error(\"save: requires the portalItem property to be set\"), new t(\"feature-layer:portal-item-not-set\", g(e, \"requires the portalItem property to be set\"));\n  if (!r.loaded) throw new t(\"feature-layer:portal-item-not-loaded\", g(e, \"cannot be saved to a portal item that does not exist or is inaccessible\"));\n  j(e, r);\n}\nasync function T(e, t) {\n  return /\\/\\d+\\/?$/.test(e.url ?? \"\") ? N(t[0]) : $(e, t);\n}\nasync function $(e, t) {\n  const {\n    layer: {\n      url: r,\n      customParameters: a,\n      apiKey: o\n    }\n  } = t[0];\n  let s = await e.fetchData(\"json\");\n  s && null != s.layers && null != s.tables || (s = await x(s, {\n    url: r ?? \"\",\n    customParameters: a,\n    apiKey: o\n  }, t.map(e => e.layer.layerId)));\n  for (const l of t) K(l.layer, l.layerJSON, s);\n  return s;\n}\nasync function x(e, t, r) {\n  var a, o;\n  e || (e = {}), (a = e).layers || (a.layers = []), (o = e).tables || (o.tables = []);\n  const {\n      url: s,\n      customParameters: l,\n      apiKey: i\n    } = t,\n    {\n      serviceJSON: n,\n      layersJSON: u\n    } = await p(s, {\n      customParameters: l,\n      apiKey: i\n    }),\n    c = A(e.layers, n.layers, r),\n    y = A(e.tables, n.tables, r);\n  e.layers = c.itemResources, e.tables = y.itemResources;\n  const d = [...c.added, ...y.added],\n    m = u ? [...u.layers, ...u.tables] : [];\n  return await U(e, d, s, m), e;\n}\nfunction A(t, r, a) {\n  const o = e(t, r, (e, t) => e.id === t.id);\n  t = t.filter(e => !o.removed.some(t => t.id === e.id));\n  const s = o.added.map(_ref4 => {\n    let {\n      id: e\n    } = _ref4;\n    return {\n      id: e\n    };\n  });\n  return s.forEach(_ref5 => {\n    let {\n      id: e\n    } = _ref5;\n    t.push({\n      id: e\n    });\n  }), {\n    itemResources: t,\n    added: s.filter(_ref6 => {\n      let {\n        id: e\n      } = _ref6;\n      return !a.includes(e);\n    })\n  };\n}\nasync function U(e, t, r, o) {\n  const s = t.map(_ref7 => {\n    let {\n      id: e\n    } = _ref7;\n    return new n({\n      url: r,\n      layerId: e,\n      sourceJSON: o.find(_ref8 => {\n        let {\n          id: t\n        } = _ref8;\n        return t === e;\n      })\n    });\n  });\n  await l(s.map(e => e.load())), s.forEach(t => {\n    const {\n      layerId: r,\n      loaded: o,\n      defaultPopupTemplate: s\n    } = t;\n    if (!o || a(s)) return;\n    K(t, {\n      id: r,\n      popupInfo: s.toJSON()\n    }, e);\n  });\n}\nfunction K(e, t, r) {\n  e.isTable ? F(r.tables, t) : F(r.layers, t);\n}\nfunction F(e, t) {\n  if (!e) return;\n  const r = e.findIndex(_ref9 => {\n    let {\n      id: e\n    } = _ref9;\n    return e === t.id;\n  });\n  -1 === r ? e.push(t) : e[r] = t;\n}\nfunction R(e) {\n  const {\n    portalItem: t\n  } = e;\n  return y(e) && !e.dynamicDataSource && !!t?.loaded && t.type === S;\n}\nasync function D(e) {\n  if (!e?.length) throw new t(\"feature-layer-utils-saveall:missing-parameters\", \"'layers' array should contain at least one feature layer\");\n  await Promise.all(e.map(e => e.load()));\n  for (const o of e) if (!R(o)) throw new t(\"feature-layer-utils-saveall:invalid-parameters\", `'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o, \"does not conform\")}`, {\n    layer: o\n  });\n  const r = e.map(e => e.portalItem.id);\n  if (new Set(r).size > 1) throw new t(\"feature-layer-utils-saveall:invalid-parameters\", \"All layers in the 'layers' array should be loaded from the same portal item\");\n  const a = e.map(e => e.layerId);\n  if (new Set(a).size !== a.length) throw new t(\"feature-layer-utils-saveall:invalid-parameters\", \"'layers' array should contain only one instance each of layer or table in a feature service\");\n}\nfunction q(e, t) {\n  var r, a;\n  let o = m.from(t);\n  return o.id && (o = o.clone(), o.id = null), (r = o).type ?? (r.type = S), (a = o).portal ?? (a.portal = d.getDefault()), j(e, o), o;\n}\nasync function z(e, t) {\n  const {\n      url: r,\n      layerId: a,\n      title: s,\n      fullExtent: l,\n      isTable: i\n    } = e,\n    n = u(r),\n    p = o(n) && \"FeatureServer\" === n.serverType;\n  t.url = p ? r : `${r}/${a}`, t.title || (t.title = s), t.extent = null, !i && o(l) && (t.extent = await v(l)), b(t, h.METADATA), b(t, h.MULTI_LAYER), w(t, h.SINGLE_LAYER), i && w(t, h.TABLE), O(t);\n}\nasync function C(e, t, r) {\n  const a = e.portal;\n  await a?.signIn(), await a?.user?.addItem({\n    item: e,\n    data: t,\n    folder: r?.folder\n  });\n}\nconst M = s(Y);\nasync function Y(e, t) {\n  await L(e), E(e);\n  const r = e.portalItem,\n    a = f(r),\n    o = await J(e, a, t),\n    s = await T(r, [{\n      layer: e,\n      layerJSON: o\n    }]);\n  return O(r), await r.update({\n    data: s\n  }), i(a), r;\n}\nconst _ = s(async (e, t) => {\n    await D(e);\n    const r = e[0].portalItem,\n      a = f(r),\n      o = await Promise.all(e.map(e => J(e, a, t))),\n      s = await T(r, e.map((e, t) => ({\n        layer: e,\n        layerJSON: o[t]\n      })));\n    return O(r), await r.update({\n      data: s\n    }), await Promise.all(e.slice(1).map(e => e.portalItem.reload())), i(a), r.clone();\n  }),\n  B = s(G);\nasync function G(e, t, r) {\n  await L(e);\n  const a = q(e, t),\n    o = f(a),\n    s = N({\n      layer: e,\n      layerJSON: await J(e, o, r)\n    });\n  return await z(e, a), await C(a, s, r), e.portalItem = a, i(o), a;\n}\nexport { M as save, _ as saveAll, B as saveAs };","map":{"version":3,"names":["difference","e","t","r","isNone","a","isSome","o","debounce","s","eachAlways","l","updateOrigins","i","n","parse","u","fetchFeatureService","p","isFeatureCollectionLayer","c","isFeatureServiceLayer","y","d","m","createForItemWrite","f","addTypeKeyword","w","TypeKeyword","h","getWGS84ExtentForItem","v","removeTypeKeyword","b","I","getLogger","S","g","title","id","declaredClass","j","type","L","load","P","messages","filter","_ref","map","_ref2","name","message","details","ignoreUnsupported","_ref3","length","errors","J","beforeSave","write","N","layer","layerJSON","isTable","layers","tables","O","JSAPI","typeKeywords","indexOf","E","portalItem","error","loaded","T","test","url","$","customParameters","apiKey","fetchData","x","layerId","K","serviceJSON","layersJSON","A","itemResources","added","U","removed","some","_ref4","forEach","_ref5","push","_ref6","includes","_ref7","sourceJSON","find","_ref8","defaultPopupTemplate","popupInfo","toJSON","F","findIndex","_ref9","R","dynamicDataSource","D","Promise","all","Set","size","q","from","clone","portal","getDefault","z","fullExtent","serverType","extent","METADATA","MULTI_LAYER","SINGLE_LAYER","TABLE","C","signIn","user","addItem","item","data","folder","M","Y","update","_","slice","reload","B","G","save","saveAll","saveAs"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/save/featureLayerUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{debounce as s,eachAlways as l}from\"../../core/promiseUtils.js\";import{updateOrigins as i}from\"../../core/accessorSupport/originUtils.js\";import n from\"../FeatureLayer.js\";import{parse as u}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as p}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as c,isFeatureServiceLayer as y}from\"../support/layerUtils.js\";import d from\"../../portal/Portal.js\";import m from\"../../portal/PortalItem.js\";import{createForItemWrite as f}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as w,TypeKeyword as h,getWGS84ExtentForItem as v,removeTypeKeyword as b}from\"../../portal/support/portalItemUtils.js\";const I=r.getLogger(\"esri.layers.FeatureLayer\"),S=\"Feature Service\";function g(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function j(e,r){if(r.type!==S)throw new t(\"feature-layer:portal-item-wrong-type\",g(e,`should have portal item of type \"${S}\"`))}async function L(e){if(await e.load(),c(e))throw new t(\"feature-layer:save\",g(e,\"using an in-memory source cannot be saved to a portal item\"))}function P(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new t(e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function J(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return P(t,r),a}function N(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function O(e){w(e,h.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function E(e){const r=e.portalItem;if(!r)throw I.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",g(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",g(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));j(e,r)}async function T(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?N(t[0]):$(e,t)}async function $(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let s=await e.fetchData(\"json\");s&&null!=s.layers&&null!=s.tables||(s=await x(s,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const l of t)K(l.layer,l.layerJSON,s);return s}async function x(e,t,r){var a,o;e||(e={}),(a=e).layers||(a.layers=[]),(o=e).tables||(o.tables=[]);const{url:s,customParameters:l,apiKey:i}=t,{serviceJSON:n,layersJSON:u}=await p(s,{customParameters:l,apiKey:i}),c=A(e.layers,n.layers,r),y=A(e.tables,n.tables,r);e.layers=c.itemResources,e.tables=y.itemResources;const d=[...c.added,...y.added],m=u?[...u.layers,...u.tables]:[];return await U(e,d,s,m),e}function A(t,r,a){const o=e(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const s=o.added.map((({id:e})=>({id:e})));return s.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:s.filter((({id:e})=>!a.includes(e)))}}async function U(e,t,r,o){const s=t.map((({id:e})=>new n({url:r,layerId:e,sourceJSON:o.find((({id:t})=>t===e))})));await l(s.map((e=>e.load()))),s.forEach((t=>{const{layerId:r,loaded:o,defaultPopupTemplate:s}=t;if(!o||a(s))return;K(t,{id:r,popupInfo:s.toJSON()},e)}))}function K(e,t,r){e.isTable?F(r.tables,t):F(r.layers,t)}function F(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function R(e){const{portalItem:t}=e;return y(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===S}async function D(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!R(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function q(e,t){var r,a;let o=m.from(t);return o.id&&(o=o.clone(),o.id=null),(r=o).type??(r.type=S),(a=o).portal??(a.portal=d.getDefault()),j(e,o),o}async function z(e,t){const{url:r,layerId:a,title:s,fullExtent:l,isTable:i}=e,n=u(r),p=o(n)&&\"FeatureServer\"===n.serverType;t.url=p?r:`${r}/${a}`,t.title||(t.title=s),t.extent=null,!i&&o(l)&&(t.extent=await v(l)),b(t,h.METADATA),b(t,h.MULTI_LAYER),w(t,h.SINGLE_LAYER),i&&w(t,h.TABLE),O(t)}async function C(e,t,r){const a=e.portal;await(a?.signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const M=s(Y);async function Y(e,t){await L(e),E(e);const r=e.portalItem,a=f(r),o=await J(e,a,t),s=await T(r,[{layer:e,layerJSON:o}]);return O(r),await r.update({data:s}),i(a),r}const _=s((async(e,t)=>{await D(e);const r=e[0].portalItem,a=f(r),o=await Promise.all(e.map((e=>J(e,a,t)))),s=await T(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return O(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),i(a),r.clone()})),B=s(G);async function G(e,t,r){await L(e);const a=q(e,t),o=f(a),s=N({layer:e,layerJSON:await J(e,o,r)});return await z(e,a),await C(a,s,r),e.portalItem=a,i(o),a}export{M as save,_ as saveAll,B as saveAs};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}