{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport { LengthDimensionMeasureType as e } from \"../../../../analysis/dimensionUtils.js\";\nimport s from \"../../../../core/Accessor.js\";\nimport o from \"../../../../core/Handles.js\";\nimport r from \"../../../../core/Logger.js\";\nimport { destroyMaybe as i } from \"../../../../core/maybe.js\";\nimport { watch as n, syncAndInitial as a } from \"../../../../core/reactiveUtils.js\";\nimport { convertUnit as l } from \"../../../../core/unitUtils.js\";\nimport { property as m } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as d } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { getDefaultUnitForView as p } from \"../../../../support/getDefaultUnitForView.js\";\nimport { isGeodesicDimension as c, GEODESIC_DISTANCE_THRESHOLD as u, computeGeometryFromDimension as h, computeLength as y, computationToGeometryDependencies as f } from \"./lengthDimensionUtils.js\";\nlet g = class extends s {\n  constructor(t) {\n    super(t), this._handles = new o();\n  }\n  initialize() {\n    const {\n      computations: t\n    } = this.analysisViewData;\n    for (const e of t) this._addComputation(e);\n    this.addHandles(t.on(\"change\", _ref => {\n      let {\n        added: t,\n        removed: e\n      } = _ref;\n      for (const s of e) this._removeComputation(s);\n      for (const s of t) this._addComputation(s);\n    }));\n  }\n  destroy() {\n    this._handles = i(this._handles);\n  }\n  get analysis() {\n    return this.analysisViewData.analysis;\n  }\n  get _defaultUnit() {\n    return p(this.view);\n  }\n  _addComputation(t) {\n    this._handles.has(t) || this._handles.add(n(() => f(t), s => {\n      const {\n        measureType: o\n      } = s;\n      if (c(s) && o !== e.Direct) {\n        const e = Math.round(l(u, \"meters\", \"kilometers\"));\n        return r.getLogger(this.declaredClass).warnOnce(`A ${o} dimension in the analysis (id: '${this.analysis.id}') will not display, because only direct dimensions can measure lengths greater than ${e} km. Update the measureType of the affected dimension to \"direct\" to display it.`), void (t.geometry = null);\n      }\n      const i = h(s, this.view.renderCoordsHelper, t.geometry);\n      t.geometry = i, t.result.length = y(i, o, this._defaultUnit);\n    }, a), t);\n  }\n  _removeComputation(t) {\n    this._handles.remove(t);\n  }\n};\nt([m({\n  constructOnly: !0\n})], g.prototype, \"analysisViewData\", void 0), t([m({\n  constructOnly: !0\n})], g.prototype, \"view\", void 0), t([m()], g.prototype, \"analysis\", null), t([m()], g.prototype, \"_defaultUnit\", null), g = t([d(\"esri.views.3d.analysis.Dimension.support.DimensionController\")], g);\nexport { g as DimensionController };","map":{"version":3,"names":["_","t","LengthDimensionMeasureType","e","s","o","r","destroyMaybe","i","watch","n","syncAndInitial","a","convertUnit","l","property","m","subclass","d","getDefaultUnitForView","p","isGeodesicDimension","c","GEODESIC_DISTANCE_THRESHOLD","u","computeGeometryFromDimension","h","computeLength","y","computationToGeometryDependencies","f","g","constructor","_handles","initialize","computations","analysisViewData","_addComputation","addHandles","on","_ref","added","removed","_removeComputation","destroy","analysis","_defaultUnit","view","has","add","measureType","Direct","Math","round","getLogger","declaredClass","warnOnce","id","geometry","renderCoordsHelper","result","length","remove","constructOnly","prototype","DimensionController"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/analysis/Dimension/DimensionController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{LengthDimensionMeasureType as e}from\"../../../../analysis/dimensionUtils.js\";import s from\"../../../../core/Accessor.js\";import o from\"../../../../core/Handles.js\";import r from\"../../../../core/Logger.js\";import{destroyMaybe as i}from\"../../../../core/maybe.js\";import{watch as n,syncAndInitial as a}from\"../../../../core/reactiveUtils.js\";import{convertUnit as l}from\"../../../../core/unitUtils.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getDefaultUnitForView as p}from\"../../../../support/getDefaultUnitForView.js\";import{isGeodesicDimension as c,GEODESIC_DISTANCE_THRESHOLD as u,computeGeometryFromDimension as h,computeLength as y,computationToGeometryDependencies as f}from\"./lengthDimensionUtils.js\";let g=class extends s{constructor(t){super(t),this._handles=new o}initialize(){const{computations:t}=this.analysisViewData;for(const e of t)this._addComputation(e);this.addHandles(t.on(\"change\",(({added:t,removed:e})=>{for(const s of e)this._removeComputation(s);for(const s of t)this._addComputation(s)})))}destroy(){this._handles=i(this._handles)}get analysis(){return this.analysisViewData.analysis}get _defaultUnit(){return p(this.view)}_addComputation(t){this._handles.has(t)||this._handles.add(n((()=>f(t)),(s=>{const{measureType:o}=s;if(c(s)&&o!==e.Direct){const e=Math.round(l(u,\"meters\",\"kilometers\"));return r.getLogger(this.declaredClass).warnOnce(`A ${o} dimension in the analysis (id: '${this.analysis.id}') will not display, because only direct dimensions can measure lengths greater than ${e} km. Update the measureType of the affected dimension to \"direct\" to display it.`),void(t.geometry=null)}const i=h(s,this.view.renderCoordsHelper,t.geometry);t.geometry=i,t.result.length=y(i,o,this._defaultUnit)}),a),t)}_removeComputation(t){this._handles.remove(t)}};t([m({constructOnly:!0})],g.prototype,\"analysisViewData\",void 0),t([m({constructOnly:!0})],g.prototype,\"view\",void 0),t([m()],g.prototype,\"analysis\",null),t([m()],g.prototype,\"_defaultUnit\",null),g=t([d(\"esri.views.3d.analysis.Dimension.support.DimensionController\")],g);export{g as DimensionController};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}