{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport { bidiText as t } from \"../../../../../core/BidiText.js\";\nimport \"../../../../../core/Error.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/Logger.js\";\nimport { applySome as s, isNone as r, isSome as i, unwrapOrThrow as a, unwrap as o } from \"../../../../../core/maybe.js\";\nimport { throwIfAborted as n, isAbortError as l } from \"../../../../../core/promiseUtils.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport { subclass as c } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { diff as d, hasDiff as h } from \"../../../../../core/accessorSupport/diffUtils.js\";\nimport f from \"../../../../../geometry/SpatialReference.js\";\nimport { isAggregateId as m } from \"../../../engine/webgl/DisplayId.js\";\nimport { WGLSymbologyType as u } from \"../../../engine/webgl/enums.js\";\nimport { MeshData as g } from \"../../../engine/webgl/mesh/MeshData.js\";\nimport { WGLMeshFactory as p } from \"../../../engine/webgl/mesh/factories/WGLMeshFactory.js\";\nimport { WGLTemplateStore as y } from \"../../../engine/webgl/mesh/templates/WGLTemplateStore.js\";\nimport { createMatcher as _ } from \"../../../engine/webgl/util/Matcher.js\";\nimport { codepoints as b } from \"../textUtils.js\";\nimport S from \"./BaseProcessor.js\";\nimport w from \"../support/ResourceManagerProxy.js\";\nfunction I(e, t) {\n  return (!e.minScale || e.minScale >= t) && (!e.maxScale || e.maxScale <= t);\n}\nfunction v(e) {\n  var t = e.message,\n    r = {\n      message: {\n        data: {},\n        tileKey: t.tileKey,\n        tileKeyOrigin: t.tileKeyOrigin,\n        version: t.version\n      },\n      transferList: new Array()\n    };\n  for (var _a in t.data) {\n    var _e = t.data[_a];\n    if (r.message.data[_a] = null, i(_e)) {\n      var _t = _e.stride,\n        _i = _e.indices.slice(0),\n        _o = _e.vertices.slice(0),\n        _n = _e.records.slice(0),\n        _l = {\n          stride: _t,\n          indices: _i,\n          vertices: _o,\n          records: _n,\n          metrics: s(_e.metrics, function (e) {\n            return e.slice(0);\n          })\n        };\n      r.transferList.push(_i, _o, _n), r.message.data[_a] = _l;\n    }\n  }\n  return r;\n}\nvar M = /*#__PURE__*/function (_S) {\n  _inherits(M, _S);\n  var _super = _createSuper(M);\n  function M() {\n    var _this;\n    _classCallCheck(this, M);\n    _this = _super.apply(this, arguments), _this.type = \"symbol\", _this._matchers = {\n      feature: null,\n      aggregate: null\n    }, _this._bufferData = new Map(), _this._bufferIds = new Map();\n    return _this;\n  }\n  _createClass(M, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.handles.add([this.tileStore.on(\"update\", this.onTileUpdate.bind(this))]), this._resourceManagerProxy = new w(this.remoteClient);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this._resourceManagerProxy.destroy();\n    }\n  }, {\n    key: \"supportsTileUpdates\",\n    get: function get() {\n      return !0;\n    }\n  }, {\n    key: \"forEachBufferId\",\n    value: function forEachBufferId(e) {\n      this._bufferIds.forEach(function (t) {\n        t.forEach(e);\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function () {\n      var _update = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e, t) {\n        var _e$why;\n        var s, r;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              s = t.schema.processors[0];\n              if (!(\"symbol\" !== s.type)) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 3:\n              r = d(this._schema, s);\n              (h(r, \"mesh\") || h(r, \"target\")) && (e.mesh = !0, (_e$why = e.why) !== null && _e$why !== void 0 && _e$why.mesh.push(\"Symbology changed\"), this._schema = s, this._factory = this._createFactory(s), this._factory.update(s, this.tileStore.tileScheme.tileInfo));\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function update(_x, _x2) {\n        return _update.apply(this, arguments);\n      }\n      return update;\n    }()\n  }, {\n    key: \"onTileMessage\",\n    value: function onTileMessage(e, t, s, r) {\n      return n(r), this._onTileData(e, t, s, r);\n    }\n  }, {\n    key: \"onTileClear\",\n    value: function onTileClear(e) {\n      var t = {\n        clear: !0\n      };\n      return this._bufferData.delete(e.key.id), this._bufferIds.delete(e.key.id), this.remoteClient.invoke(\"tileRenderer.onTileData\", {\n        tileKey: e.id,\n        data: t\n      });\n    }\n  }, {\n    key: \"onTileError\",\n    value: function onTileError(e, t, s) {\n      var r = s.signal,\n        i = {\n          tileKey: e.id,\n          error: t\n        };\n      return this.remoteClient.invoke(\"tileRenderer.onTileError\", i, {\n        signal: r\n      });\n    }\n  }, {\n    key: \"onTileUpdate\",\n    value: function onTileUpdate(e) {\n      var _this2 = this;\n      var _iterator = _createForOfIteratorHelper(e.removed),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _t2 = _step.value;\n          this._bufferData.has(_t2.key.id) && this._bufferData.delete(_t2.key.id), this._bufferIds.has(_t2.key.id) && this._bufferIds.delete(_t2.key.id);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var _iterator2 = _createForOfIteratorHelper(e.added),\n        _step2;\n      try {\n        var _loop = function _loop() {\n          var t = _step2.value;\n          _this2._bufferData.forEach(function (e) {\n            var _iterator3 = _createForOfIteratorHelper(e),\n              _step3;\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var _s = _step3.value;\n                _s.message.tileKey === t.id && _this2._updateTileMesh(\"append\", t, v(_s), [], !1, !1, null);\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n          });\n        };\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"_addBufferData\",\n    value: function _addBufferData(e, t) {\n      var _this$_bufferData$get;\n      this._bufferData.has(e) || this._bufferData.set(e, []), (_this$_bufferData$get = this._bufferData.get(e)) === null || _this$_bufferData$get === void 0 ? void 0 : _this$_bufferData$get.push(v(t));\n    }\n  }, {\n    key: \"_createFactory\",\n    value: function _createFactory(e) {\n      var _this3 = this;\n      var _this$service = this.service,\n        t = _this$service.geometryType,\n        r = _this$service.objectIdField,\n        i = _this$service.fields,\n        a = function a(e, t) {\n          return _this3.remoteClient.invoke(\"tileRenderer.getMaterialItems\", e, t);\n        },\n        o = {\n          geometryType: t,\n          fields: i,\n          spatialReference: f.fromJSON(this.spatialReference)\n        },\n        n = new y(a, this.tileStore.tileScheme.tileInfo),\n        _e$mesh = e.mesh,\n        l = _e$mesh.matcher,\n        c = _e$mesh.aggregateMatcher;\n      return this._store = n, this._matchers.feature = _(l, n, o, this._resourceManagerProxy), this._matchers.aggregate = s(c, function (e) {\n        return _(e, n, o, _this3._resourceManagerProxy);\n      }), new p(t, r, n);\n    }\n  }, {\n    key: \"_onTileData\",\n    value: function () {\n      var _onTileData2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e, t, s, a) {\n        var _t$status,\n          _this4 = this;\n        var o, l, c, d, h, f, _t3, m, _s2, _t4, _n2, _iterator4, _step4, _t5, _s3, _r, _a2, _o2, _e2, _i2, _i4, _i3, _t6;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              n(a);\n              o = t.type, l = t.addOrUpdate, c = t.remove, d = t.clear, h = t.end, f = !!this._schema.mesh.sortKey;\n              if (l) {\n                _context2.next = 5;\n                break;\n              }\n              _t3 = {\n                type: o,\n                addOrUpdate: null,\n                remove: c,\n                clear: d,\n                end: h,\n                sort: f\n              };\n              return _context2.abrupt(\"return\", this.remoteClient.invoke(\"tileRenderer.onTileData\", {\n                tileKey: e.id,\n                data: _t3\n              }, a));\n            case 5:\n              m = this._processFeatures(e, l, s, a, (_t$status = t.status) === null || _t$status === void 0 ? void 0 : _t$status.version);\n              _context2.prev = 6;\n              _context2.next = 9;\n              return m;\n            case 9:\n              _s2 = _context2.sent;\n              if (!r(_s2)) {\n                _context2.next = 13;\n                break;\n              }\n              _t4 = {\n                type: o,\n                addOrUpdate: null,\n                remove: c,\n                clear: d,\n                end: h,\n                sort: f\n              };\n              return _context2.abrupt(\"return\", this.remoteClient.invoke(\"tileRenderer.onTileData\", {\n                tileKey: e.id,\n                data: _t4\n              }, a));\n            case 13:\n              _n2 = [];\n              _iterator4 = _createForOfIteratorHelper(_s2);\n              _context2.prev = 15;\n              _iterator4.s();\n            case 17:\n              if ((_step4 = _iterator4.n()).done) {\n                _context2.next = 41;\n                break;\n              }\n              _t5 = _step4.value;\n              _s3 = !1;\n              _r = _t5.message.bufferIds, _a2 = e.key.id, _o2 = _t5.message.tileKey;\n              if (!(_a2 !== _o2 && i(_r))) {\n                _context2.next = 38;\n                break;\n              }\n              if (this.tileStore.get(_o2)) {\n                _context2.next = 25;\n                break;\n              }\n              this._addBufferData(_a2, _t5), _n2.push(_t5);\n              return _context2.abrupt(\"continue\", 39);\n            case 25:\n              _e2 = this._bufferIds.get(_o2);\n              _e2 || (_e2 = new Set(), this._bufferIds.set(_o2, _e2));\n              _i2 = Array.from(_r);\n              _i4 = 0, _i3 = _i2;\n            case 29:\n              if (!(_i4 < _i3.length)) {\n                _context2.next = 38;\n                break;\n              }\n              _t6 = _i3[_i4];\n              if (!_e2.has(_t6)) {\n                _context2.next = 34;\n                break;\n              }\n              _s3 = !0;\n              return _context2.abrupt(\"break\", 38);\n            case 34:\n              _e2.add(_t6);\n            case 35:\n              _i4++;\n              _context2.next = 29;\n              break;\n            case 38:\n              _s3 || (this._addBufferData(_a2, _t5), _n2.push(_t5));\n            case 39:\n              _context2.next = 17;\n              break;\n            case 41:\n              _context2.next = 46;\n              break;\n            case 43:\n              _context2.prev = 43;\n              _context2.t0 = _context2[\"catch\"](15);\n              _iterator4.e(_context2.t0);\n            case 46:\n              _context2.prev = 46;\n              _iterator4.f();\n              return _context2.finish(46);\n            case 49:\n              _context2.next = 51;\n              return Promise.all(_n2.map(function (s) {\n                var r = e.key.id === s.message.tileKey,\n                  i = r ? t.remove : [],\n                  n = r && t.end;\n                return _this4._updateTileMesh(o, e, s, i, n, !!t.clear, a.signal);\n              }));\n            case 51:\n              _context2.next = 56;\n              break;\n            case 53:\n              _context2.prev = 53;\n              _context2.t1 = _context2[\"catch\"](6);\n              this._handleError(e, _context2.t1, a);\n            case 56:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this, [[6, 53], [15, 43, 46, 49]]);\n      }));\n      function _onTileData(_x3, _x4, _x5, _x6) {\n        return _onTileData2.apply(this, arguments);\n      }\n      return _onTileData;\n    }()\n  }, {\n    key: \"_updateTileMesh\",\n    value: function () {\n      var _updateTileMesh2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e, t, r, i, a, l, c) {\n        var d, h, f, m, u, g, p;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              d = e, h = r.message.tileKey, f = !!this._schema.mesh.sortKey;\n              h !== t.key.id && (a = !1);\n              m = s(r, function (e) {\n                return e.message;\n              }), u = s(r, function (e) {\n                return e.transferList;\n              }) || [], g = {\n                type: d,\n                addOrUpdate: m,\n                remove: i,\n                clear: l,\n                end: a,\n                sort: f\n              }, p = {\n                transferList: o(u) || [],\n                signal: c\n              };\n              return _context3.abrupt(\"return\", (n(p), this.remoteClient.invoke(\"tileRenderer.onTileData\", {\n                tileKey: h,\n                data: g\n              }, p)));\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function _updateTileMesh(_x7, _x8, _x9, _x10, _x11, _x12, _x13) {\n        return _updateTileMesh2.apply(this, arguments);\n      }\n      return _updateTileMesh;\n    }()\n  }, {\n    key: \"_processFeatures\",\n    value: function () {\n      var _processFeatures2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e, t, s, i, a) {\n        var o, l, c, d, h, f;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(r(t) || !t.hasFeatures)) {\n                _context4.next = 2;\n                break;\n              }\n              return _context4.abrupt(\"return\", null);\n            case 2:\n              o = {\n                transform: e.transform,\n                hasZ: !1,\n                hasM: !1\n              };\n              l = this._factory;\n              c = {\n                viewingMode: \"\",\n                scale: e.scale\n              };\n              _context4.next = 7;\n              return this._matchers.feature;\n            case 7:\n              d = _context4.sent;\n              _context4.next = 10;\n              return this._matchers.aggregate;\n            case 10:\n              h = _context4.sent;\n              n(i);\n              f = this._getLabelInfos(e, t);\n              _context4.next = 15;\n              return l.analyze(t.getCursor(), this._resourceManagerProxy, d, h, o, c);\n            case 15:\n              n(i);\n              return _context4.abrupt(\"return\", this._writeFeatureSet(e, t, o, f, l, s, a));\n            case 17:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function _processFeatures(_x14, _x15, _x16, _x17, _x18) {\n        return _processFeatures2.apply(this, arguments);\n      }\n      return _processFeatures;\n    }()\n  }, {\n    key: \"_writeFeatureSet\",\n    value: function _writeFeatureSet(e, t, s, r, a, o, n) {\n      var l = t.getSize(),\n        c = this._schema.mesh.matcher.symbologyType,\n        d = new g(e.key.id, {\n          features: l,\n          records: l,\n          metrics: 0\n        }, c, o, c !== u.HEATMAP, n),\n        h = {\n          viewingMode: \"\",\n          scale: e.scale\n        },\n        f = t.getCursor();\n      for (; f.next();) try {\n        var _t7 = f.getDisplayId(),\n          _o3 = i(r) ? r.get(_t7) : null;\n        a.writeCursor(d, f, s, h, e.level, _o3, this._resourceManagerProxy);\n      } catch (p) {}\n      var m = e.tileInfoView.tileInfo.isWrappable;\n      return d.serialize(m);\n    }\n  }, {\n    key: \"_handleError\",\n    value: function _handleError(e, t, s) {\n      if (!l(t)) {\n        var _r2 = {\n          tileKey: e.id,\n          error: t.message\n        };\n        return this.remoteClient.invoke(\"tileRenderer.onTileError\", _r2, {\n          signal: s.signal\n        });\n      }\n      return Promise.resolve();\n    }\n  }, {\n    key: \"_getLabelingSchemaForScale\",\n    value: function _getLabelingSchemaForScale(e) {\n      var t = this._schema.mesh.labels;\n      if (r(t)) return null;\n      if (\"subtype\" === t.type) {\n        var _s4 = {\n          type: \"subtype\",\n          classes: {}\n        };\n        var _r3 = !1;\n        for (var _i5 in t.classes) {\n          var _a3 = t.classes[_i5].filter(function (t) {\n            return I(t, e.scale);\n          });\n          _r3 = _r3 || !!_a3.length, _s4.classes[_i5] = _a3;\n        }\n        return _r3 ? _s4 : null;\n      }\n      var s = t.classes.filter(function (t) {\n        return I(t, e.scale);\n      });\n      return s.length ? {\n        type: \"simple\",\n        classes: s\n      } : null;\n    }\n  }, {\n    key: \"_getLabels\",\n    value: function _getLabels(e, t) {\n      if (\"subtype\" === t.type) {\n        var _t$classes$_i;\n        var _s5 = this.service.subtypeField,\n          _r4 = a(_s5, \"Expected to find subtype Field\"),\n          _i6 = e.readAttribute(_r4);\n        return null == _i6 ? [] : (_t$classes$_i = t.classes[_i6]) !== null && _t$classes$_i !== void 0 ? _t$classes$_i : [];\n      }\n      return t.classes;\n    }\n  }, {\n    key: \"_getLabelInfos\",\n    value: function _getLabelInfos(e, s) {\n      var _this5 = this;\n      var i = this._getLabelingSchemaForScale(e);\n      if (r(i)) return null;\n      var a = new Map(),\n        o = s.getCursor();\n      var _loop2 = function _loop2() {\n        var e = o.getDisplayId(),\n          s = [],\n          r = m(e),\n          n = r && 1 !== o.readAttribute(\"cluster_count\") ? \"aggregate\" : \"feature\",\n          l = _this5._getLabels(o, i);\n        var _iterator5 = _createForOfIteratorHelper(l),\n          _step5;\n        try {\n          var _loop3 = function _loop3() {\n            var i = _step5.value;\n            if (i.target !== n) return \"continue\";\n            var a = o.getStorage(),\n              l = r && \"feature\" === n ? a.getComputedStringAtIndex(o.readAttribute(\"referenceId\"), i.fieldIndex) : a.getComputedStringAtIndex(e, i.fieldIndex);\n            if (!l) return \"continue\";\n            var c = t(l.toString()),\n              d = c[0],\n              h = c[1];\n            _this5._store.getMosaicItem(i.symbol, b(d)).then(function (e) {\n              var _e$glyphMosaicItems;\n              s[i.index] = {\n                glyphs: (_e$glyphMosaicItems = e.glyphMosaicItems) !== null && _e$glyphMosaicItems !== void 0 ? _e$glyphMosaicItems : [],\n                rtl: h,\n                index: i.index\n              };\n            });\n          };\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _ret = _loop3();\n            if (_ret === \"continue\") continue;\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n        a.set(e, s);\n      };\n      for (; o.next();) {\n        _loop2();\n      }\n      return a;\n    }\n  }]);\n  return M;\n}(S);\nM = e([c(\"esri.views.2d.layers.features.processors.SymbolProcessor\")], M);\nvar T = M;\nexport { T as default };","map":{"version":3,"names":["_","e","bidiText","t","applySome","s","isNone","r","isSome","i","unwrapOrThrow","a","unwrap","o","throwIfAborted","n","isAbortError","l","subclass","c","diff","d","hasDiff","h","f","isAggregateId","m","WGLSymbologyType","u","MeshData","g","WGLMeshFactory","p","WGLTemplateStore","y","createMatcher","codepoints","b","S","w","I","minScale","maxScale","v","message","data","tileKey","tileKeyOrigin","version","transferList","Array","stride","indices","slice","vertices","records","metrics","push","M","_S","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","type","_matchers","feature","aggregate","_bufferData","Map","_bufferIds","_createClass","key","value","initialize","handles","add","tileStore","on","onTileUpdate","bind","_resourceManagerProxy","remoteClient","destroy","get","forEachBufferId","forEach","_update","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_e$why","wrap","_callee$","_context","prev","next","schema","processors","abrupt","_schema","mesh","why","_factory","_createFactory","update","tileScheme","tileInfo","stop","_x","_x2","onTileMessage","_onTileData","onTileClear","clear","delete","id","invoke","onTileError","signal","error","_this2","_iterator","_createForOfIteratorHelper","removed","_step","done","has","err","_iterator2","added","_step2","_loop","_iterator3","_step3","_updateTileMesh","_addBufferData","_this$_bufferData$get","set","_this3","_this$service","service","geometryType","objectIdField","fields","spatialReference","fromJSON","_e$mesh","matcher","aggregateMatcher","_store","_onTileData2","_callee2","_t$status","_this4","_t3","_s2","_t4","_n2","_iterator4","_step4","_t5","_s3","_r","_a2","_o2","_e2","_i2","_i4","_i3","_t6","_callee2$","_context2","addOrUpdate","remove","end","sortKey","sort","_processFeatures","status","sent","bufferIds","Set","from","length","t0","finish","Promise","all","map","t1","_handleError","_x3","_x4","_x5","_x6","_updateTileMesh2","_callee3","_callee3$","_context3","_x7","_x8","_x9","_x10","_x11","_x12","_x13","_processFeatures2","_callee4","_callee4$","_context4","hasFeatures","transform","hasZ","hasM","viewingMode","scale","_getLabelInfos","analyze","getCursor","_writeFeatureSet","_x14","_x15","_x16","_x17","_x18","getSize","symbologyType","features","HEATMAP","getDisplayId","writeCursor","level","tileInfoView","isWrappable","serialize","resolve","_getLabelingSchemaForScale","labels","classes","filter","_getLabels","_t$classes$_i","subtypeField","readAttribute","_this5","_loop2","_iterator5","_step5","_loop3","target","getStorage","getComputedStringAtIndex","fieldIndex","toString","getMosaicItem","symbol","then","_e$glyphMosaicItems","index","glyphs","glyphMosaicItems","rtl","_ret","T","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/views/2d/layers/features/processors/SymbolProcessor.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{bidiText as t}from\"../../../../../core/BidiText.js\";import\"../../../../../core/Error.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{applySome as s,isNone as r,isSome as i,unwrapOrThrow as a,unwrap as o}from\"../../../../../core/maybe.js\";import{throwIfAborted as n,isAbortError as l}from\"../../../../../core/promiseUtils.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import{subclass as c}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{diff as d,hasDiff as h}from\"../../../../../core/accessorSupport/diffUtils.js\";import f from\"../../../../../geometry/SpatialReference.js\";import{isAggregateId as m}from\"../../../engine/webgl/DisplayId.js\";import{WGLSymbologyType as u}from\"../../../engine/webgl/enums.js\";import{MeshData as g}from\"../../../engine/webgl/mesh/MeshData.js\";import{WGLMeshFactory as p}from\"../../../engine/webgl/mesh/factories/WGLMeshFactory.js\";import{WGLTemplateStore as y}from\"../../../engine/webgl/mesh/templates/WGLTemplateStore.js\";import{createMatcher as _}from\"../../../engine/webgl/util/Matcher.js\";import{codepoints as b}from\"../textUtils.js\";import S from\"./BaseProcessor.js\";import w from\"../support/ResourceManagerProxy.js\";function I(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}function v(e){const t=e.message,r={message:{data:{},tileKey:t.tileKey,tileKeyOrigin:t.tileKeyOrigin,version:t.version},transferList:new Array};for(const a in t.data){const e=t.data[a];if(r.message.data[a]=null,i(e)){const t=e.stride,i=e.indices.slice(0),o=e.vertices.slice(0),n=e.records.slice(0),l={stride:t,indices:i,vertices:o,records:n,metrics:s(e.metrics,(e=>e.slice(0)))};r.transferList.push(i,o,n),r.message.data[a]=l}}return r}let M=class extends S{constructor(){super(...arguments),this.type=\"symbol\",this._matchers={feature:null,aggregate:null},this._bufferData=new Map,this._bufferIds=new Map}initialize(){this.handles.add([this.tileStore.on(\"update\",this.onTileUpdate.bind(this))]),this._resourceManagerProxy=new w(this.remoteClient)}destroy(){this._resourceManagerProxy.destroy()}get supportsTileUpdates(){return!0}forEachBufferId(e){this._bufferIds.forEach((t=>{t.forEach(e)}))}async update(e,t){const s=t.schema.processors[0];if(\"symbol\"!==s.type)return;const r=d(this._schema,s);(h(r,\"mesh\")||h(r,\"target\"))&&(e.mesh=!0,e.why?.mesh.push(\"Symbology changed\"),this._schema=s,this._factory=this._createFactory(s),this._factory.update(s,this.tileStore.tileScheme.tileInfo))}onTileMessage(e,t,s,r){return n(r),this._onTileData(e,t,s,r)}onTileClear(e){const t={clear:!0};return this._bufferData.delete(e.key.id),this._bufferIds.delete(e.key.id),this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:t})}onTileError(e,t,s){const r=s.signal,i={tileKey:e.id,error:t};return this.remoteClient.invoke(\"tileRenderer.onTileError\",i,{signal:r})}onTileUpdate(e){for(const t of e.removed)this._bufferData.has(t.key.id)&&this._bufferData.delete(t.key.id),this._bufferIds.has(t.key.id)&&this._bufferIds.delete(t.key.id);for(const t of e.added)this._bufferData.forEach((e=>{for(const s of e)s.message.tileKey===t.id&&this._updateTileMesh(\"append\",t,v(s),[],!1,!1,null)}))}_addBufferData(e,t){this._bufferData.has(e)||this._bufferData.set(e,[]),this._bufferData.get(e)?.push(v(t))}_createFactory(e){const{geometryType:t,objectIdField:r,fields:i}=this.service,a=(e,t)=>this.remoteClient.invoke(\"tileRenderer.getMaterialItems\",e,t),o={geometryType:t,fields:i,spatialReference:f.fromJSON(this.spatialReference)},n=new y(a,this.tileStore.tileScheme.tileInfo),{matcher:l,aggregateMatcher:c}=e.mesh;return this._store=n,this._matchers.feature=_(l,n,o,this._resourceManagerProxy),this._matchers.aggregate=s(c,(e=>_(e,n,o,this._resourceManagerProxy))),new p(t,r,n)}async _onTileData(e,t,s,a){n(a);const{type:o,addOrUpdate:l,remove:c,clear:d,end:h}=t,f=!!this._schema.mesh.sortKey;if(!l){const t={type:o,addOrUpdate:null,remove:c,clear:d,end:h,sort:f};return this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:t},a)}const m=this._processFeatures(e,l,s,a,t.status?.version);try{const s=await m;if(r(s)){const t={type:o,addOrUpdate:null,remove:c,clear:d,end:h,sort:f};return this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:t},a)}const n=[];for(const t of s){let s=!1;const r=t.message.bufferIds,a=e.key.id,o=t.message.tileKey;if(a!==o&&i(r)){if(!this.tileStore.get(o)){this._addBufferData(a,t),n.push(t);continue}let e=this._bufferIds.get(o);e||(e=new Set,this._bufferIds.set(o,e));const i=Array.from(r);for(const t of i){if(e.has(t)){s=!0;break}e.add(t)}}s||(this._addBufferData(a,t),n.push(t))}await Promise.all(n.map((s=>{const r=e.key.id===s.message.tileKey,i=r?t.remove:[],n=r&&t.end;return this._updateTileMesh(o,e,s,i,n,!!t.clear,a.signal)})))}catch(u){this._handleError(e,u,a)}}async _updateTileMesh(e,t,r,i,a,l,c){const d=e,h=r.message.tileKey,f=!!this._schema.mesh.sortKey;h!==t.key.id&&(a=!1);const m=s(r,(e=>e.message)),u=s(r,(e=>e.transferList))||[],g={type:d,addOrUpdate:m,remove:i,clear:l,end:a,sort:f},p={transferList:o(u)||[],signal:c};return n(p),this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:h,data:g},p)}async _processFeatures(e,t,s,i,a){if(r(t)||!t.hasFeatures)return null;const o={transform:e.transform,hasZ:!1,hasM:!1},l=this._factory,c={viewingMode:\"\",scale:e.scale},d=await this._matchers.feature,h=await this._matchers.aggregate;n(i);const f=this._getLabelInfos(e,t);return await l.analyze(t.getCursor(),this._resourceManagerProxy,d,h,o,c),n(i),this._writeFeatureSet(e,t,o,f,l,s,a)}_writeFeatureSet(e,t,s,r,a,o,n){const l=t.getSize(),c=this._schema.mesh.matcher.symbologyType,d=new g(e.key.id,{features:l,records:l,metrics:0},c,o,c!==u.HEATMAP,n),h={viewingMode:\"\",scale:e.scale},f=t.getCursor();for(;f.next();)try{const t=f.getDisplayId(),o=i(r)?r.get(t):null;a.writeCursor(d,f,s,h,e.level,o,this._resourceManagerProxy)}catch(p){}const m=e.tileInfoView.tileInfo.isWrappable;return d.serialize(m)}_handleError(e,t,s){if(!l(t)){const r={tileKey:e.id,error:t.message};return this.remoteClient.invoke(\"tileRenderer.onTileError\",r,{signal:s.signal})}return Promise.resolve()}_getLabelingSchemaForScale(e){const t=this._schema.mesh.labels;if(r(t))return null;if(\"subtype\"===t.type){const s={type:\"subtype\",classes:{}};let r=!1;for(const i in t.classes){const a=t.classes[i].filter((t=>I(t,e.scale)));r=r||!!a.length,s.classes[i]=a}return r?s:null}const s=t.classes.filter((t=>I(t,e.scale)));return s.length?{type:\"simple\",classes:s}:null}_getLabels(e,t){if(\"subtype\"===t.type){const s=this.service.subtypeField,r=a(s,\"Expected to find subtype Field\"),i=e.readAttribute(r);return null==i?[]:t.classes[i]??[]}return t.classes}_getLabelInfos(e,s){const i=this._getLabelingSchemaForScale(e);if(r(i))return null;const a=new Map,o=s.getCursor();for(;o.next();){const e=o.getDisplayId(),s=[],r=m(e),n=r&&1!==o.readAttribute(\"cluster_count\")?\"aggregate\":\"feature\",l=this._getLabels(o,i);for(const i of l){if(i.target!==n)continue;const a=o.getStorage(),l=r&&\"feature\"===n?a.getComputedStringAtIndex(o.readAttribute(\"referenceId\"),i.fieldIndex):a.getComputedStringAtIndex(e,i.fieldIndex);if(!l)continue;const c=t(l.toString()),d=c[0],h=c[1];this._store.getMosaicItem(i.symbol,b(d)).then((e=>{s[i.index]={glyphs:e.glyphMosaicItems??[],rtl:h,index:i.index}}))}a.set(e,s)}return a}};M=e([c(\"esri.views.2d.layers.features.processors.SymbolProcessor\")],M);const T=M;export{T as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}