{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { generateUID as i } from \"../../../../core/uid.js\";\nimport { b as r } from \"../../../../chunks/vec3.js\";\nimport { c as o } from \"../../../../chunks/vec3f64.js\";\nimport { f as s } from \"../../../../chunks/vec4f64.js\";\nimport { projectBuffer as e } from \"../../../../geometry/projection.js\";\nimport { Attribute as n } from \"./Attribute.js\";\nimport { ContentObjectType as a } from \"./ContentObjectType.js\";\nimport { Geometry as h } from \"./Geometry.js\";\nimport { fromValues as m } from \"./LocalOriginFactory.js\";\nimport { Object3D as c } from \"./Object3D.js\";\nimport { gridLocalOriginFactory as d } from \"./testUtils.js\";\nimport { VertexAttribute as g } from \"./VertexAttribute.js\";\nimport { WebGLLayer as _ } from \"./WebGLLayer.js\";\nimport { RibbonLineMaterial as f } from \"../materials/RibbonLineMaterial.js\";\nclass p {\n  constructor(t) {\n    this._originSR = t, this._origins = new Map(), this._objects = new Map(), this._gridSize = 5e5, this._rootOriginId = \"root/\" + i();\n  }\n  getOrigin(i) {\n    const o = this._origins.get(this._rootOriginId);\n    if (null == o) {\n      const r = d.rootOrigin;\n      if (t(r)) return this._origins.set(this._rootOriginId, m(r[0], r[1], r[2], this._rootOriginId)), this.getOrigin(i);\n      const o = m(i[0] + Math.random() - .5, i[1] + Math.random() - .5, i[2] + Math.random() - .5, this._rootOriginId);\n      return this._origins.set(this._rootOriginId, o), o;\n    }\n    const s = this._gridSize,\n      e = Math.round(i[0] / s),\n      n = Math.round(i[1] / s),\n      a = Math.round(i[2] / s),\n      h = `${e}/${n}/${a}`;\n    let c = this._origins.get(h);\n    const g = .5 * s;\n    if (r(j, i, o.vec3), j[0] = Math.abs(j[0]), j[1] = Math.abs(j[1]), j[2] = Math.abs(j[2]), j[0] < g && j[1] < g && j[2] < g) {\n      if (c) {\n        const t = Math.max(...j);\n        r(j, i, c.vec3), j[0] = Math.abs(j[0]), j[1] = Math.abs(j[1]), j[2] = Math.abs(j[2]);\n        if (Math.max(...j) < t) return c;\n      }\n      return o;\n    }\n    return c || (c = m(e * s, n * s, a * s, h), this._origins.set(h, c)), c;\n  }\n  _drawOriginBox(t) {\n    let i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : s(1, 1, 0, 1);\n    const r = window.view,\n      o = r._stage,\n      m = i.toString();\n    if (!this._objects.has(m)) {\n      this._material = new f({\n        width: 2,\n        color: i\n      }), o.add(this._material);\n      const t = new _({\n          pickable: !1\n        }),\n        r = new c({\n          castShadow: !1\n        });\n      o.add(r), t.add(r), o.add(t), this._objects.set(m, r);\n    }\n    const d = this._objects.get(m),\n      p = [0, 1, 5, 4, 0, 2, 1, 7, 6, 2, 0, 1, 3, 7, 5, 4, 6, 2, 0],\n      j = p.length,\n      b = new Array(3 * j),\n      u = new Array(),\n      l = .5 * this._gridSize;\n    for (let s = 0; s < j; s++) b[3 * s + 0] = t[0] + (1 & p[s] ? l : -l), b[3 * s + 1] = t[1] + (2 & p[s] ? l : -l), b[3 * s + 2] = t[2] + (4 & p[s] ? l : -l), s > 0 && u.push(s - 1, s);\n    e(b, this._originSR, 0, b, r.renderSpatialReference, 0, j);\n    const M = new h(this._material, [[g.POSITION, new n(b, 3, !0)]], [[g.POSITION, u]], null, a.Line);\n    o.add(M), d.addGeometry(M);\n  }\n  get test() {\n    const t = this;\n    return {\n      set gridSize(i) {\n        t._gridSize = i;\n      }\n    };\n  }\n}\nconst j = o();\nexport { p as GridLocalOriginFactory };","map":{"version":3,"names":["isSome","t","generateUID","i","b","r","c","o","f","s","projectBuffer","e","Attribute","n","ContentObjectType","a","Geometry","h","fromValues","m","Object3D","gridLocalOriginFactory","d","VertexAttribute","g","WebGLLayer","_","RibbonLineMaterial","p","constructor","_originSR","_origins","Map","_objects","_gridSize","_rootOriginId","getOrigin","get","rootOrigin","set","Math","random","round","j","vec3","abs","max","_drawOriginBox","arguments","length","undefined","window","view","_stage","toString","has","_material","width","color","add","pickable","castShadow","Array","u","l","push","renderSpatialReference","M","POSITION","Line","addGeometry","test","gridSize","GridLocalOriginFactory"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{generateUID as i}from\"../../../../core/uid.js\";import{b as r}from\"../../../../chunks/vec3.js\";import{c as o}from\"../../../../chunks/vec3f64.js\";import{f as s}from\"../../../../chunks/vec4f64.js\";import{projectBuffer as e}from\"../../../../geometry/projection.js\";import{Attribute as n}from\"./Attribute.js\";import{ContentObjectType as a}from\"./ContentObjectType.js\";import{Geometry as h}from\"./Geometry.js\";import{fromValues as m}from\"./LocalOriginFactory.js\";import{Object3D as c}from\"./Object3D.js\";import{gridLocalOriginFactory as d}from\"./testUtils.js\";import{VertexAttribute as g}from\"./VertexAttribute.js\";import{WebGLLayer as _}from\"./WebGLLayer.js\";import{RibbonLineMaterial as f}from\"../materials/RibbonLineMaterial.js\";class p{constructor(t){this._originSR=t,this._origins=new Map,this._objects=new Map,this._gridSize=5e5,this._rootOriginId=\"root/\"+i()}getOrigin(i){const o=this._origins.get(this._rootOriginId);if(null==o){const r=d.rootOrigin;if(t(r))return this._origins.set(this._rootOriginId,m(r[0],r[1],r[2],this._rootOriginId)),this.getOrigin(i);const o=m(i[0]+Math.random()-.5,i[1]+Math.random()-.5,i[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,o),o}const s=this._gridSize,e=Math.round(i[0]/s),n=Math.round(i[1]/s),a=Math.round(i[2]/s),h=`${e}/${n}/${a}`;let c=this._origins.get(h);const g=.5*s;if(r(j,i,o.vec3),j[0]=Math.abs(j[0]),j[1]=Math.abs(j[1]),j[2]=Math.abs(j[2]),j[0]<g&&j[1]<g&&j[2]<g){if(c){const t=Math.max(...j);r(j,i,c.vec3),j[0]=Math.abs(j[0]),j[1]=Math.abs(j[1]),j[2]=Math.abs(j[2]);if(Math.max(...j)<t)return c}return o}return c||(c=m(e*s,n*s,a*s,h),this._origins.set(h,c)),c}_drawOriginBox(t,i=s(1,1,0,1)){const r=window.view,o=r._stage,m=i.toString();if(!this._objects.has(m)){this._material=new f({width:2,color:i}),o.add(this._material);const t=new _({pickable:!1}),r=new c({castShadow:!1});o.add(r),t.add(r),o.add(t),this._objects.set(m,r)}const d=this._objects.get(m),p=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],j=p.length,b=new Array(3*j),u=new Array,l=.5*this._gridSize;for(let s=0;s<j;s++)b[3*s+0]=t[0]+(1&p[s]?l:-l),b[3*s+1]=t[1]+(2&p[s]?l:-l),b[3*s+2]=t[2]+(4&p[s]?l:-l),s>0&&u.push(s-1,s);e(b,this._originSR,0,b,r.renderSpatialReference,0,j);const M=new h(this._material,[[g.POSITION,new n(b,3,!0)]],[[g.POSITION,u]],null,a.Line);o.add(M),d.addGeometry(M)}get test(){const t=this;return{set gridSize(i){t._gridSize=i}}}}const j=o();export{p as GridLocalOriginFactory};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}