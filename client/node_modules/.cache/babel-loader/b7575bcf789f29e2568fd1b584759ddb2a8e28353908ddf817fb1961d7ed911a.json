{"ast":null,"code":"import _toConsumableArray from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isNone as t, isSome as n, unwrap as e, assertIsSome as i } from \"../../../core/maybe.js\";\nimport s from \"../PixelBlock.js\";\nimport { getPixelValueRange as o } from \"../rasterFormats/pixelRangeUtils.js\";\nimport { stretchTypeFunctionEnum as r } from \"../../../renderers/support/stretchRendererUtils.js\";\nvar a = 1,\n  l = [.299, .587, .114];\nfunction f(t) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 256;\n  n = Math.min(n, 256);\n  var e = t.size,\n    i = t.counts,\n    s = new Uint8Array(e),\n    o = i.reduce(function (t, e) {\n      return t + e / n;\n    }, 0);\n  var r = 0,\n    a = 0,\n    l = 0,\n    f = o;\n  for (var _u = 0; _u < e; _u++) if (l += i[_u], !(_u < e - 1 && l + i[_u + 1] < f)) {\n    for (; r < n - 1 && f < l;) r++, f += o;\n    for (var _t = a; _t <= _u; _t++) s[_t] = r;\n    a = _u + 1;\n  }\n  for (var _u2 = a; _u2 < e; _u2++) s[_u2] = n - 1;\n  return s;\n}\nfunction u(t) {\n  var n = t.minCutOff,\n    e = t.maxCutOff,\n    i = t.gamma,\n    s = t.pixelType,\n    o = t.rounding,\n    r = t.outMin || 0,\n    a = t.outMax || 255;\n  if (![\"u8\", \"u16\", \"s8\", \"s16\"].includes(s)) return null;\n  var l = n.length;\n  var f,\n    u,\n    c = 0;\n  \"s8\" === s ? c = -127 : \"s16\" === s && (c = -32767);\n  var h = 256;\n  [\"u16\", \"s16\"].includes(s) && (h = 65536);\n  var p = [],\n    g = [],\n    x = a - r;\n  for (f = 0; f < l; f++) g[f] = e[f] - n[f], p[f] = 0 === g[f] ? 0 : x / g[f];\n  var d;\n  var y = [];\n  var C, O, b;\n  if (i && i.length >= l) {\n    var _t2 = M(l, i);\n    for (f = 0; f < l; f++) {\n      for (b = [], u = 0; u < h; u++) if (0 !== g[f]) {\n        if (C = u + c, d = (C - n[f]) / g[f], O = 1, i[f] > 1 && (O -= Math.pow(1 / x, d * _t2[f])), C < e[f] && C > n[f]) {\n          var _t3 = O * x * Math.pow(d, 1 / i[f]) + r;\n          b[u] = \"floor\" === o ? Math.floor(_t3) : \"round\" === o ? Math.round(_t3) : _t3;\n        } else C >= e[f] ? b[u] = a : b[u] = r;\n      } else b[u] = r;\n      y[f] = b;\n    }\n  } else for (f = 0; f < l; f++) {\n    for (b = [], u = 0; u < h; u++) if (C = u + c, C <= n[f]) b[u] = r;else if (C >= e[f]) b[u] = a;else {\n      var _t4 = (C - n[f]) * p[f] + r;\n      b[u] = \"floor\" === o ? Math.floor(_t4) : \"round\" === o ? Math.round(_t4) : _t4;\n    }\n    y[f] = b;\n  }\n  if (null != t.contrastOffset) {\n    var _n = m(t.contrastOffset, t.brightnessOffset);\n    for (f = 0; f < l; f++) for (b = y[f], u = 0; u < h; u++) b[u] = _n[b[u]];\n  }\n  return {\n    lut: y,\n    offset: c\n  };\n}\nfunction m(t, n) {\n  var e = Math.min(Math.max(t, -100), 100),\n    i = Math.min(Math.max(n !== null && n !== void 0 ? n : 0, -100), 100),\n    s = 255,\n    o = 128;\n  var r = 0,\n    a = 0;\n  var l = new Uint8Array(256);\n  for (r = 0; r < 256; r++) e > 0 && e < 100 ? a = (200 * r - 100 * s + 2 * s * i) / (2 * (100 - e)) + o : e <= 0 && e > -100 ? a = (200 * r - 100 * s + 2 * s * i) * (100 + e) / 2e4 + o : 100 === e ? (a = 200 * r - 100 * s + (s + 1) * (100 - e) + 2 * s * i, a = a > 0 ? s : 0) : -100 === e && (a = o), l[r] = a > s ? s : a < 0 ? 0 : a;\n  return l;\n}\nfunction c(t, n, e) {\n  var i = [];\n  for (var _s = 0; _s < n.length; _s++) {\n    var _n$_s, _n$_s2, _n$_s3, _a2;\n    var _o = 0,\n      _r = 0,\n      _a = 0;\n    \"min\" in n[_s] ? (_n$_s = n[_s], _o = _n$_s.min, _r = _n$_s.max, _a = _n$_s.avg, _n$_s) : (_n$_s2 = n[_s], _n$_s3 = _slicedToArray(_n$_s2, 3), _o = _n$_s3[0], _r = _n$_s3[1], _a = _n$_s3[2], _n$_s2);\n    var _f = (_a2 = _a) !== null && _a2 !== void 0 ? _a2 : 0;\n    \"u8\" !== t && (_f = 255 * (_f - _o) / (_r - _o)), e && (_f *= l[_s]), i.push(h(_f));\n  }\n  return i;\n}\nfunction h(t) {\n  if (t <= 0 || t >= 255) return a;\n  var n = 0;\n  150 !== t && (n = t <= 150 ? 45 * Math.cos(.01047 * t) : 17 * Math.sin(.021 * t));\n  var e = 255,\n    i = t + n,\n    s = Math.log(t / e),\n    o = Math.log(i / e);\n  if (0 === o) return a;\n  var r = s / o;\n  return isNaN(r) ? a : Math.min(9.9, Math.max(.01, r));\n}\nfunction p(n) {\n  var _n$pixels;\n  if (t(n) || !((_n$pixels = n.pixels) !== null && _n$pixels !== void 0 && _n$pixels.length)) return null;\n  var e = n.pixels,\n    i = n.mask,\n    s = n.pixelType,\n    o = n.width * n.height,\n    r = e.length;\n  var a, l, f, u, m;\n  var c = [],\n    h = [];\n  var p, g, x, d, M, y, C, O, b, v;\n  var k = 256;\n  for (u = 0; u < r; u++) {\n    if (p = new Uint32Array(k), x = e[u], \"u8\" === s) {\n      if (a = -.5, l = 255.5, i) for (m = 0; m < o; m++) i[m] && p[x[m]]++;else for (m = 0; m < o; m++) p[x[m]]++;\n    } else {\n      var _t5 = !1;\n      n.statistics || (n.updateStatistics(), _t5 = !0);\n      var _e = n.statistics;\n      if (a = _e[u].minValue, l = _e[u].maxValue, f = (l - a) / k, 0 === f) {\n        !_e || n.validPixelCount || _t5 || n.updateStatistics();\n        var _i = (n.validPixelCount || n.width * n.height) / k;\n        for (var _t6 = 0; _t6 < k; _t6++) p[_t6] = Math.round(_i * (_t6 + 1)) - Math.round(_i * _t6);\n      } else {\n        for (g = new Uint32Array(k + 1), m = 0; m < o; m++) i && !i[m] || g[Math.floor((x[m] - a) / f)]++;\n        for (m = 0; m < k - 1; m++) p[m] = g[m];\n        p[k - 1] = g[k - 1] + g[k];\n      }\n    }\n    for (c.push({\n      min: a,\n      max: l,\n      size: k,\n      counts: p\n    }), d = 0, M = 0, O = 0, m = 0; m < k; m++) d += p[m], M += m * p[m];\n    for (b = M / d, m = 0; m < k; m++) O += p[m] * Math.pow(m - b, 2);\n    v = Math.sqrt(O / (d - 1)), f = (l - a) / k, y = (b + .5) * f + a, C = v * f, h.push({\n      min: a,\n      max: l,\n      avg: y,\n      stddev: C\n    });\n  }\n  return {\n    statistics: h,\n    histograms: c\n  };\n}\nfunction g(t) {\n  var n = [];\n  for (var _e2 = 0; _e2 < t.length; _e2++) {\n    var _t$_e = t[_e2],\n      _i2 = _t$_e.min,\n      _s2 = _t$_e.max,\n      _o2 = _t$_e.size,\n      _r2 = _t$_e.counts;\n    var _a3 = 0,\n      _l = 0;\n    for (var _t7 = 0; _t7 < _o2; _t7++) _a3 += _r2[_t7], _l += _t7 * _r2[_t7];\n    var _f2 = _l / _a3;\n    var _u3 = 0;\n    for (var _t8 = 0; _t8 < _o2; _t8++) _u3 += _r2[_t8] * Math.pow(_t8 - _f2, 2);\n    var _m = (_s2 - _i2) / _o2,\n      _c = (_f2 + .5) * _m + _i2,\n      _h = Math.sqrt(_u3 / (_a3 - 1)) * _m;\n    n.push({\n      min: _i2,\n      max: _s2,\n      avg: _c,\n      stddev: _h\n    });\n  }\n  return n;\n}\nfunction x(t, s) {\n  var _t$statistics, _h2, _c2, _h3, _c3;\n  var a = s.pixelBlock,\n    l = s.bandIds,\n    u = s.returnHistogramLut,\n    m = s.rasterInfo;\n  var c = null,\n    h = null,\n    g = t.stretchType;\n  if (\"number\" == typeof g && (g = r[g]), t.dra) {\n    if (\"minMax\" === g && n(a) && a.statistics) c = a.statistics.map(function (t) {\n      return [t.minValue, t.maxValue, 0, 0];\n    });else {\n      var _t9 = p(a);\n      c = n(_t9) ? _t9.statistics : null, h = n(_t9) ? _t9.histograms : null;\n    }\n  } else c = ((_t$statistics = t.statistics) === null || _t$statistics === void 0 ? void 0 : _t$statistics.length) > 0 ? t.statistics : e(m.statistics), h = t.histograms || e(m.histograms);\n  \"percentClip\" !== g && \"histogramEqualization\" !== g || ((_h2 = h) === null || _h2 === void 0 ? void 0 : _h2.length) || (g = \"minMax\");\n  var x = ((_c2 = c) === null || _c2 === void 0 ? void 0 : _c2.length) || ((_h3 = h) === null || _h3 === void 0 ? void 0 : _h3.length) || m.bandCount,\n    M = [],\n    y = [];\n  var C, O, b, v, k, w, z, A, U;\n  c && !Array.isArray(c[0]) && (c = c.map(function (t) {\n    return [t.min, t.max, t.avg, t.stddev];\n  }));\n  var _o3 = o(m.pixelType),\n    _o4 = _slicedToArray(_o3, 2),\n    P = _o4[0],\n    T = _o4[1];\n  if (!((_c3 = c) !== null && _c3 !== void 0 && _c3.length)) {\n    for (c = [], A = 0; A < x; A++) c.push([P, T, 1, 1]);\n    \"standardDeviation\" === g && (g = \"minMax\");\n  }\n  switch (g) {\n    case \"none\":\n      for (A = 0; A < x; A++) M[A] = P, y[A] = T;\n      break;\n    case \"minMax\":\n      for (A = 0; A < x; A++) M[A] = c[A][0], y[A] = c[A][1];\n      break;\n    case \"standardDeviation\":\n      for (A = 0; A < x; A++) M[A] = c[A][2] - t.numberOfStandardDeviations * c[A][3], y[A] = c[A][2] + t.numberOfStandardDeviations * c[A][3], M[A] < c[A][0] && (M[A] = c[A][0]), y[A] > c[A][1] && (y[A] = c[A][1]);\n      break;\n    case \"histogramEqualization\":\n      for (i(h), A = 0; A < x; A++) M[A] = h[A].min, y[A] = h[A].max;\n      break;\n    case \"percentClip\":\n      for (i(h), A = 0; A < h.length; A++) {\n        for (C = h[A], k = new Uint32Array(C.size), v = _toConsumableArray(C.counts), v.length >= 20 && (v[0] = v[1] = v[2] = v[v.length - 1] = v[v.length - 2] = 0), b = 0, O = (C.max - C.min) / C.size, z = -.5 === C.min && 1 === O ? .5 : 0, U = 0; U < C.size; U++) b += v[U], k[U] = b;\n        for (w = (t.minPercent || 0) * b / 100, M[A] = C.min + z, U = 0; U < C.size; U++) if (k[U] > w) {\n          M[A] = C.min + O * (U + z);\n          break;\n        }\n        for (w = (1 - (t.maxPercent || 0) / 100) * b, y[A] = C.max + z, U = C.size - 2; U >= 0; U--) if (k[U] < w) {\n          y[A] = C.min + O * (U + 2 - z);\n          break;\n        }\n        if (y[A] < M[A]) {\n          var _t10 = M[A];\n          M[A] = y[A], y[A] = _t10;\n        }\n      }\n      break;\n    default:\n      for (A = 0; A < x; A++) M[A] = c[A][0], y[A] = c[A][1];\n  }\n  var q, S, j;\n  \"histogramEqualization\" === g ? (i(h), S = h[0].size || 256, q = 0, u && (j = h.map(function (t) {\n    return f(t);\n  }))) : (S = t.max || 255, q = t.min || 0);\n  return d({\n    minCutOff: M,\n    maxCutOff: y,\n    outMax: S,\n    outMin: q,\n    histogramLut: j\n  }, l);\n}\nfunction d(t, n) {\n  if (null == n || 0 === n.length) return t;\n  var e = Math.max.apply(null, n),\n    i = t.minCutOff,\n    s = t.maxCutOff,\n    o = t.outMin,\n    r = t.outMax,\n    a = t.histogramLut;\n  return i.length === n.length || i.length <= e ? t : {\n    minCutOff: n.map(function (t) {\n      return i[t];\n    }),\n    maxCutOff: n.map(function (t) {\n      return s[t];\n    }),\n    histogramLut: a ? n.map(function (t) {\n      return a[t];\n    }) : null,\n    outMin: o,\n    outMax: r\n  };\n}\nfunction M(t, n) {\n  var e = new Float32Array(t);\n  for (var _i3 = 0; _i3 < t; _i3++) n[_i3] > 1 ? n[_i3] > 2 ? e[_i3] = 6.5 + Math.pow(n[_i3] - 2, 2.5) : e[_i3] = 6.5 + 100 * Math.pow(2 - n[_i3], 4) : e[_i3] = 1;\n  return e;\n}\nfunction y(n, e) {\n  var _n$pixels2;\n  if (t(n) || !((_n$pixels2 = n.pixels) !== null && _n$pixels2 !== void 0 && _n$pixels2.length)) return n;\n  var i = n.mask,\n    o = n.width,\n    r = n.height,\n    a = n.pixels,\n    l = e.minCutOff,\n    f = e.maxCutOff,\n    u = e.gamma,\n    m = e.outMin || 0,\n    c = e.outMax || 255,\n    h = o * r,\n    p = e.outputPixelType || \"u8\",\n    g = n.pixels.map(function () {\n      return s.createEmptyBand(p, h);\n    }),\n    x = g.length;\n  var d, y, C, O, b;\n  var v = c - m,\n    k = [],\n    w = [];\n  for (d = 0; d < x; d++) w[d] = f[d] - l[d], k[d] = 0 === w[d] ? 0 : v / w[d];\n  var z = p.startsWith(\"u\") || p.startsWith(\"s\"),\n    A = u && u.length >= x,\n    U = !!e.isRenderer;\n  if (A) {\n    var _t11 = M(x, u);\n    for (y = 0; y < h; y++) if (null == i || i[y]) for (d = 0; d < x; d++) if (0 !== w[d]) {\n      if (C = a[d][y], b = (C - l[d]) / w[d], O = 1, u[d] > 1 && (O -= Math.pow(1 / v, b * _t11[d])), C < f[d] && C > l[d]) {\n        var _t12 = O * v * Math.pow(b, 1 / u[d]) + m;\n        g[d][y] = U ? Math.floor(_t12) : z ? Math.round(_t12) : _t12;\n      } else C >= f[d] ? g[d][y] = c : g[d][y] = m;\n    } else g[d][y] = m;\n  } else for (y = 0; y < h; y++) if (null == i || i[y]) for (d = 0; d < x; d++) if (C = a[d][y], C < f[d] && C > l[d]) {\n    var _t13 = (C - l[d]) * k[d] + m;\n    g[d][y] = U ? Math.floor(_t13) : z ? Math.round(_t13) : _t13;\n  } else C >= f[d] ? g[d][y] = c : g[d][y] = m;\n  var P = new s({\n    width: o,\n    height: r,\n    mask: i,\n    pixels: g,\n    pixelType: p\n  });\n  return P.updateStatistics(), P;\n}\nexport { M as computeGammaCorrection, c as computeGammaValues, m as createContrastBrightnessLUT, f as createHistogramEqualizationLUT, u as createStretchLUT, g as estimateStatisticsFromHistograms, p as estimateStatisticsHistograms, x as getStretchCutoff, y as stretch };","map":{"version":3,"names":["isNone","t","isSome","n","unwrap","e","assertIsSome","i","s","getPixelValueRange","o","stretchTypeFunctionEnum","r","a","l","f","arguments","length","undefined","Math","min","size","counts","Uint8Array","reduce","u","minCutOff","maxCutOff","gamma","pixelType","rounding","outMin","outMax","includes","c","h","p","g","x","d","y","C","O","b","M","pow","floor","round","contrastOffset","m","brightnessOffset","lut","offset","max","_n$_s","_n$_s2","_n$_s3","_a2","avg","_slicedToArray","push","cos","sin","log","isNaN","_n$pixels","pixels","mask","width","height","v","k","Uint32Array","statistics","updateStatistics","minValue","maxValue","validPixelCount","sqrt","stddev","histograms","_t$_e","_t$statistics","_h2","_c2","_h3","_c3","pixelBlock","bandIds","returnHistogramLut","rasterInfo","stretchType","dra","map","bandCount","w","z","A","U","Array","isArray","_o3","_o4","P","T","numberOfStandardDeviations","_toConsumableArray","minPercent","maxPercent","q","S","j","histogramLut","apply","Float32Array","_n$pixels2","outputPixelType","createEmptyBand","startsWith","isRenderer","computeGammaCorrection","computeGammaValues","createContrastBrightnessLUT","createHistogramEqualizationLUT","createStretchLUT","estimateStatisticsFromHistograms","estimateStatisticsHistograms","getStretchCutoff","stretch"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/support/rasterFunctions/stretchUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as n,unwrap as e,assertIsSome as i}from\"../../../core/maybe.js\";import s from\"../PixelBlock.js\";import{getPixelValueRange as o}from\"../rasterFormats/pixelRangeUtils.js\";import{stretchTypeFunctionEnum as r}from\"../../../renderers/support/stretchRendererUtils.js\";const a=1,l=[.299,.587,.114];function f(t,n=256){n=Math.min(n,256);const{size:e,counts:i}=t,s=new Uint8Array(e),o=i.reduce(((t,e)=>t+e/n),0);let r=0,a=0,l=0,f=o;for(let u=0;u<e;u++)if(l+=i[u],!(u<e-1&&l+i[u+1]<f)){for(;r<n-1&&f<l;)r++,f+=o;for(let t=a;t<=u;t++)s[t]=r;a=u+1}for(let u=a;u<e;u++)s[u]=n-1;return s}function u(t){const{minCutOff:n,maxCutOff:e,gamma:i,pixelType:s,rounding:o}=t,r=t.outMin||0,a=t.outMax||255;if(![\"u8\",\"u16\",\"s8\",\"s16\"].includes(s))return null;const l=n.length;let f,u,c=0;\"s8\"===s?c=-127:\"s16\"===s&&(c=-32767);let h=256;[\"u16\",\"s16\"].includes(s)&&(h=65536);const p=[],g=[],x=a-r;for(f=0;f<l;f++)g[f]=e[f]-n[f],p[f]=0===g[f]?0:x/g[f];let d;const y=[];let C,O,b;if(i&&i.length>=l){const t=M(l,i);for(f=0;f<l;f++){for(b=[],u=0;u<h;u++)if(0!==g[f])if(C=u+c,d=(C-n[f])/g[f],O=1,i[f]>1&&(O-=(1/x)**(d*t[f])),C<e[f]&&C>n[f]){const t=O*x*d**(1/i[f])+r;b[u]=\"floor\"===o?Math.floor(t):\"round\"===o?Math.round(t):t}else C>=e[f]?b[u]=a:b[u]=r;else b[u]=r;y[f]=b}}else for(f=0;f<l;f++){for(b=[],u=0;u<h;u++)if(C=u+c,C<=n[f])b[u]=r;else if(C>=e[f])b[u]=a;else{const t=(C-n[f])*p[f]+r;b[u]=\"floor\"===o?Math.floor(t):\"round\"===o?Math.round(t):t}y[f]=b}if(null!=t.contrastOffset){const n=m(t.contrastOffset,t.brightnessOffset);for(f=0;f<l;f++)for(b=y[f],u=0;u<h;u++)b[u]=n[b[u]]}return{lut:y,offset:c}}function m(t,n){const e=Math.min(Math.max(t,-100),100),i=Math.min(Math.max(n??0,-100),100),s=255,o=128;let r=0,a=0;const l=new Uint8Array(256);for(r=0;r<256;r++)e>0&&e<100?a=(200*r-100*s+2*s*i)/(2*(100-e))+o:e<=0&&e>-100?a=(200*r-100*s+2*s*i)*(100+e)/2e4+o:100===e?(a=200*r-100*s+(s+1)*(100-e)+2*s*i,a=a>0?s:0):-100===e&&(a=o),l[r]=a>s?s:a<0?0:a;return l}function c(t,n,e){const i=[];for(let s=0;s<n.length;s++){let o=0,r=0,a=0;\"min\"in n[s]?({min:o,max:r,avg:a}=n[s]):[o,r,a]=n[s];let f=a??0;\"u8\"!==t&&(f=255*(f-o)/(r-o)),e&&(f*=l[s]),i.push(h(f))}return i}function h(t){if(t<=0||t>=255)return a;let n=0;150!==t&&(n=t<=150?45*Math.cos(.01047*t):17*Math.sin(.021*t));const e=255,i=t+n,s=Math.log(t/e),o=Math.log(i/e);if(0===o)return a;const r=s/o;return isNaN(r)?a:Math.min(9.9,Math.max(.01,r))}function p(n){if(t(n)||!n.pixels?.length)return null;const{pixels:e,mask:i,pixelType:s}=n,o=n.width*n.height,r=e.length;let a,l,f,u,m;const c=[],h=[];let p,g,x,d,M,y,C,O,b,v;const k=256;for(u=0;u<r;u++){if(p=new Uint32Array(k),x=e[u],\"u8\"===s)if(a=-.5,l=255.5,i)for(m=0;m<o;m++)i[m]&&p[x[m]]++;else for(m=0;m<o;m++)p[x[m]]++;else{let t=!1;n.statistics||(n.updateStatistics(),t=!0);const e=n.statistics;if(a=e[u].minValue,l=e[u].maxValue,f=(l-a)/k,0===f){!e||n.validPixelCount||t||n.updateStatistics();const i=(n.validPixelCount||n.width*n.height)/k;for(let t=0;t<k;t++)p[t]=Math.round(i*(t+1))-Math.round(i*t)}else{for(g=new Uint32Array(k+1),m=0;m<o;m++)i&&!i[m]||g[Math.floor((x[m]-a)/f)]++;for(m=0;m<k-1;m++)p[m]=g[m];p[k-1]=g[k-1]+g[k]}}for(c.push({min:a,max:l,size:k,counts:p}),d=0,M=0,O=0,m=0;m<k;m++)d+=p[m],M+=m*p[m];for(b=M/d,m=0;m<k;m++)O+=p[m]*(m-b)**2;v=Math.sqrt(O/(d-1)),f=(l-a)/k,y=(b+.5)*f+a,C=v*f,h.push({min:a,max:l,avg:y,stddev:C})}return{statistics:h,histograms:c}}function g(t){const n=[];for(let e=0;e<t.length;e++){const{min:i,max:s,size:o,counts:r}=t[e];let a=0,l=0;for(let t=0;t<o;t++)a+=r[t],l+=t*r[t];const f=l/a;let u=0;for(let t=0;t<o;t++)u+=r[t]*(t-f)**2;const m=(s-i)/o,c=(f+.5)*m+i,h=Math.sqrt(u/(a-1))*m;n.push({min:i,max:s,avg:c,stddev:h})}return n}function x(t,s){const{pixelBlock:a,bandIds:l,returnHistogramLut:u,rasterInfo:m}=s;let c=null,h=null,g=t.stretchType;if(\"number\"==typeof g&&(g=r[g]),t.dra)if(\"minMax\"===g&&n(a)&&a.statistics)c=a.statistics.map((t=>[t.minValue,t.maxValue,0,0]));else{const t=p(a);c=n(t)?t.statistics:null,h=n(t)?t.histograms:null}else c=t.statistics?.length>0?t.statistics:e(m.statistics),h=t.histograms||e(m.histograms);\"percentClip\"!==g&&\"histogramEqualization\"!==g||h?.length||(g=\"minMax\");const x=c?.length||h?.length||m.bandCount,M=[],y=[];let C,O,b,v,k,w,z,A,U;c&&!Array.isArray(c[0])&&(c=c.map((t=>[t.min,t.max,t.avg,t.stddev])));const[P,T]=o(m.pixelType);if(!c?.length){for(c=[],A=0;A<x;A++)c.push([P,T,1,1]);\"standardDeviation\"===g&&(g=\"minMax\")}switch(g){case\"none\":for(A=0;A<x;A++)M[A]=P,y[A]=T;break;case\"minMax\":for(A=0;A<x;A++)M[A]=c[A][0],y[A]=c[A][1];break;case\"standardDeviation\":for(A=0;A<x;A++)M[A]=c[A][2]-t.numberOfStandardDeviations*c[A][3],y[A]=c[A][2]+t.numberOfStandardDeviations*c[A][3],M[A]<c[A][0]&&(M[A]=c[A][0]),y[A]>c[A][1]&&(y[A]=c[A][1]);break;case\"histogramEqualization\":for(i(h),A=0;A<x;A++)M[A]=h[A].min,y[A]=h[A].max;break;case\"percentClip\":for(i(h),A=0;A<h.length;A++){for(C=h[A],k=new Uint32Array(C.size),v=[...C.counts],v.length>=20&&(v[0]=v[1]=v[2]=v[v.length-1]=v[v.length-2]=0),b=0,O=(C.max-C.min)/C.size,z=-.5===C.min&&1===O?.5:0,U=0;U<C.size;U++)b+=v[U],k[U]=b;for(w=(t.minPercent||0)*b/100,M[A]=C.min+z,U=0;U<C.size;U++)if(k[U]>w){M[A]=C.min+O*(U+z);break}for(w=(1-(t.maxPercent||0)/100)*b,y[A]=C.max+z,U=C.size-2;U>=0;U--)if(k[U]<w){y[A]=C.min+O*(U+2-z);break}if(y[A]<M[A]){const t=M[A];M[A]=y[A],y[A]=t}}break;default:for(A=0;A<x;A++)M[A]=c[A][0],y[A]=c[A][1]}let q,S,j;\"histogramEqualization\"===g?(i(h),S=h[0].size||256,q=0,u&&(j=h.map((t=>f(t))))):(S=t.max||255,q=t.min||0);return d({minCutOff:M,maxCutOff:y,outMax:S,outMin:q,histogramLut:j},l)}function d(t,n){if(null==n||0===n.length)return t;const e=Math.max.apply(null,n),{minCutOff:i,maxCutOff:s,outMin:o,outMax:r,histogramLut:a}=t;return i.length===n.length||i.length<=e?t:{minCutOff:n.map((t=>i[t])),maxCutOff:n.map((t=>s[t])),histogramLut:a?n.map((t=>a[t])):null,outMin:o,outMax:r}}function M(t,n){const e=new Float32Array(t);for(let i=0;i<t;i++)n[i]>1?n[i]>2?e[i]=6.5+(n[i]-2)**2.5:e[i]=6.5+100*(2-n[i])**4:e[i]=1;return e}function y(n,e){if(t(n)||!n.pixels?.length)return n;const{mask:i,width:o,height:r,pixels:a}=n,{minCutOff:l,maxCutOff:f,gamma:u}=e,m=e.outMin||0,c=e.outMax||255,h=o*r,p=e.outputPixelType||\"u8\",g=n.pixels.map((()=>s.createEmptyBand(p,h))),x=g.length;let d,y,C,O,b;const v=c-m,k=[],w=[];for(d=0;d<x;d++)w[d]=f[d]-l[d],k[d]=0===w[d]?0:v/w[d];const z=p.startsWith(\"u\")||p.startsWith(\"s\"),A=u&&u.length>=x,U=!!e.isRenderer;if(A){const t=M(x,u);for(y=0;y<h;y++)if(null==i||i[y])for(d=0;d<x;d++)if(0!==w[d])if(C=a[d][y],b=(C-l[d])/w[d],O=1,u[d]>1&&(O-=(1/v)**(b*t[d])),C<f[d]&&C>l[d]){const t=O*v*b**(1/u[d])+m;g[d][y]=U?Math.floor(t):z?Math.round(t):t}else C>=f[d]?g[d][y]=c:g[d][y]=m;else g[d][y]=m}else for(y=0;y<h;y++)if(null==i||i[y])for(d=0;d<x;d++)if(C=a[d][y],C<f[d]&&C>l[d]){const t=(C-l[d])*k[d]+m;g[d][y]=U?Math.floor(t):z?Math.round(t):t}else C>=f[d]?g[d][y]=c:g[d][y]=m;const P=new s({width:o,height:r,mask:i,pixels:g,pixelType:p});return P.updateStatistics(),P}export{M as computeGammaCorrection,c as computeGammaValues,m as createContrastBrightnessLUT,f as createHistogramEqualizationLUT,u as createStretchLUT,g as estimateStatisticsFromHistograms,p as estimateStatisticsHistograms,x as getStretchCutoff,y as stretch};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}