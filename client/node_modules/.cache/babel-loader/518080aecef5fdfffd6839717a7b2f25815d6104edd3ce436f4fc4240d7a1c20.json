{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as r } from \"../../../../chunks/tslib.es6.js\";\nimport s from \"../../../../core/Accessor.js\";\nimport { removeUnordered as t } from \"../../../../core/arrayUtils.js\";\nimport { property as e } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { TaskPriority as o } from \"../../../support/Scheduler.js\";\nlet i = class extends s {\n  constructor() {\n    super(), this.referenceCount = 0, this.callbacks = new Array(), this.runIndex = 0;\n  }\n  get running() {\n    return this.callbacks.some(r => r.running);\n  }\n  runTask(r) {\n    this._sort();\n    const s = this.callbacks,\n      t = {\n        numIndexLoading: 0,\n        numNodesLoading: 0\n      };\n    for (let e = 0; e < s.length && !r.done; ++e) s[e].priority = s[e].runTask(r, t), this.runIndex = e;\n  }\n  _sort() {\n    const r = this.callbacks;\n    let s = r.length;\n    for (let t = this.runIndex; t > 0; t--) {\n      const e = r[t - 1];\n      let n = t;\n      for (; n < r.length && e.priority <= r[n].priority && (n !== s || e.priority < r[n].priority);) r[n - 1] = r[n], n++;\n      r[n - 1] = e, s = n - 1;\n    }\n    this.runIndex = 0;\n  }\n  add(r) {\n    this._sort(), r.priority = 1 / 0, this.callbacks.unshift(r), this.notifyChange(\"running\");\n  }\n  remove(r) {\n    t(this.callbacks, r), this.runIndex = this.callbacks.length, this._sort(), this.notifyChange(\"running\");\n  }\n};\nr([e({\n  readOnly: !0\n})], i.prototype, \"running\", null), i = r([n(\"esri.views.3d.layers.i3s.I3SFrameTask\")], i);\nclass a {\n  constructor(r, s) {\n    this.task = r, this.handle = s;\n  }\n}\nconst c = new Map();\nfunction l(r, s) {\n  let t = c.get(r);\n  if (null == t) {\n    const s = new i(),\n      e = r.registerTask(o.I3S_CONTROLLER, s);\n    t = new a(s, e), c.set(r, t);\n  }\n  return t.task.add(s), {\n    remove: () => {\n      if (null == t) return;\n      t.task.remove(s);\n      t.task.callbacks.length > 0 || (c.delete(r), t.handle.remove(), t.task.destroy()), t = null;\n    }\n  };\n}\nexport { l as addCallback };","map":{"version":3,"names":["_","r","s","removeUnordered","t","property","e","subclass","n","TaskPriority","o","i","constructor","referenceCount","callbacks","Array","runIndex","running","some","runTask","_sort","numIndexLoading","numNodesLoading","length","done","priority","add","unshift","notifyChange","remove","readOnly","prototype","a","task","handle","c","Map","l","get","registerTask","I3S_CONTROLLER","set","delete","destroy","addCallback"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Accessor.js\";import{removeUnordered as t}from\"../../../../core/arrayUtils.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{TaskPriority as o}from\"../../../support/Scheduler.js\";let i=class extends s{constructor(){super(),this.referenceCount=0,this.callbacks=new Array,this.runIndex=0}get running(){return this.callbacks.some((r=>r.running))}runTask(r){this._sort();const s=this.callbacks,t={numIndexLoading:0,numNodesLoading:0};for(let e=0;e<s.length&&!r.done;++e)s[e].priority=s[e].runTask(r,t),this.runIndex=e}_sort(){const r=this.callbacks;let s=r.length;for(let t=this.runIndex;t>0;t--){const e=r[t-1];let n=t;for(;n<r.length&&e.priority<=r[n].priority&&(n!==s||e.priority<r[n].priority);)r[n-1]=r[n],n++;r[n-1]=e,s=n-1}this.runIndex=0}add(r){this._sort(),r.priority=1/0,this.callbacks.unshift(r),this.notifyChange(\"running\")}remove(r){t(this.callbacks,r),this.runIndex=this.callbacks.length,this._sort(),this.notifyChange(\"running\")}};r([e({readOnly:!0})],i.prototype,\"running\",null),i=r([n(\"esri.views.3d.layers.i3s.I3SFrameTask\")],i);class a{constructor(r,s){this.task=r,this.handle=s}}const c=new Map;function l(r,s){let t=c.get(r);if(null==t){const s=new i,e=r.registerTask(o.I3S_CONTROLLER,s);t=new a(s,e),c.set(r,t)}return t.task.add(s),{remove:()=>{if(null==t)return;t.task.remove(s);t.task.callbacks.length>0||(c.delete(r),t.handle.remove(),t.task.destroy()),t=null}}}export{l as addCallback};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}