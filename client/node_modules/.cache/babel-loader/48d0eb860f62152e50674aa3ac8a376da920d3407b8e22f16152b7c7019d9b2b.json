{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { remove as e } from \"../arrayUtils.js\";\nimport { makeHandle as t } from \"../handleUtils.js\";\nimport r from \"../Logger.js\";\nimport { isSome as s } from \"../maybe.js\";\nimport { throwIfAborted as i } from \"../promiseUtils.js\";\nimport { open as o } from \"./workers.js\";\nclass h {\n  constructor(e, t, s, i) {\n    let h = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    this._mainMethod = t, this._transferLists = s, this._listeners = [], this._promise = o(e, {\n      ...h,\n      schedule: i\n    }).then(e => {\n      if (void 0 === this._thread) {\n        this._thread = e, this._promise = null, h.hasInitialize && this.broadcast({}, \"initialize\");\n        for (const e of this._listeners) this._connectListener(e);\n      } else e.close();\n    }), this._promise.catch(t => r.getLogger(\"esri.core.workers.WorkerHandle\").error(`Failed to initialize ${e} worker: ${t}`));\n  }\n  on(r, i) {\n    const o = {\n      removed: !1,\n      eventName: r,\n      callback: i,\n      threadHandle: null\n    };\n    return this._listeners.push(o), this._connectListener(o), t(() => {\n      o.removed = !0, e(this._listeners, o), this._thread && s(o.threadHandle) && o.threadHandle.remove();\n    });\n  }\n  destroy() {\n    this._thread && (this._thread.close(), this._thread = null), this._promise = null;\n  }\n  invoke(e, t) {\n    return this.invokeMethod(this._mainMethod, e, t);\n  }\n  invokeMethod(e, t, r) {\n    if (this._thread) {\n      const s = this._transferLists[e],\n        i = s ? s(t) : [];\n      return this._thread.invoke(e, t, {\n        transferList: i,\n        signal: r\n      });\n    }\n    return this._promise ? this._promise.then(() => (i(r), this.invokeMethod(e, t, r))) : Promise.reject(null);\n  }\n  broadcast(e, t) {\n    return this._thread ? Promise.all(this._thread.broadcast(t, e)).then(() => {}) : this._promise ? this._promise.then(() => this.broadcast(e, t)) : Promise.reject();\n  }\n  get promise() {\n    return this._promise;\n  }\n  _connectListener(e) {\n    this._thread && this._thread.on(e.eventName, e.callback).then(t => {\n      e.removed || (e.threadHandle = t);\n    });\n  }\n}\nexport { h as WorkerHandle };","map":{"version":3,"names":["remove","e","makeHandle","t","r","isSome","s","throwIfAborted","i","open","o","h","constructor","arguments","length","undefined","_mainMethod","_transferLists","_listeners","_promise","schedule","then","_thread","hasInitialize","broadcast","_connectListener","close","catch","getLogger","error","on","removed","eventName","callback","threadHandle","push","destroy","invoke","invokeMethod","transferList","signal","Promise","reject","all","promise","WorkerHandle"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/core/workers/WorkerHandle.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{remove as e}from\"../arrayUtils.js\";import{makeHandle as t}from\"../handleUtils.js\";import r from\"../Logger.js\";import{isSome as s}from\"../maybe.js\";import{throwIfAborted as i}from\"../promiseUtils.js\";import{open as o}from\"./workers.js\";class h{constructor(e,t,s,i,h={}){this._mainMethod=t,this._transferLists=s,this._listeners=[],this._promise=o(e,{...h,schedule:i}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,h.hasInitialize&&this.broadcast({},\"initialize\");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>r.getLogger(\"esri.core.workers.WorkerHandle\").error(`Failed to initialize ${e} worker: ${t}`)))}on(r,i){const o={removed:!1,eventName:r,callback:i,threadHandle:null};return this._listeners.push(o),this._connectListener(o),t((()=>{o.removed=!0,e(this._listeners,o),this._thread&&s(o.threadHandle)&&o.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const s=this._transferLists[e],i=s?s(t):[];return this._thread.invoke(e,t,{transferList:i,signal:r})}return this._promise?this._promise.then((()=>(i(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}export{h as WorkerHandle};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}