{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../../../core/has.js\";\nimport t from \"../../../../../core/Logger.js\";\nimport { isSome as e, unwrapOrThrow as s, isNone as r } from \"../../../../../core/maybe.js\";\nimport { throwIfAborted as o, after as a } from \"../../../../../core/promiseUtils.js\";\nimport n from \"../../../../../core/RandomLCG.js\";\nimport { BaseFeatureSource as i } from \"./BaseFeatureSource.js\";\nimport { FeatureSetReaderIndirect as d } from \"../support/FeatureSetReaderPBFIndirect.js\";\nimport { UpdateToken as u } from \"../support/UpdateToken.js\";\nfunction h(t, e, s) {\n  const r = t.getXHydrated(),\n    o = t.getYHydrated(),\n    a = e.getColumnForX(r),\n    n = Math.floor(e.normalizeCol(a));\n  return `${s}/${Math.floor(e.getRowForY(o))}/${n}`;\n}\nfunction l(t, e) {\n  if (r(t)) return null;\n  const s = e.transform,\n    o = t.getQuantizationTransform();\n  if (r(o)) {\n    const [e, r] = s.scale,\n      [o, a] = s.translate,\n      n = -o / e,\n      i = 1 / e,\n      d = a / r,\n      u = 1 / -r;\n    return t.transform(n, d, i, u);\n  }\n  const [a, n] = o.scale,\n    [i, d] = o.translate,\n    [u, h] = s.scale,\n    [l, c] = s.translate,\n    g = a / u,\n    _ = (i - l) / u,\n    p = n / h,\n    f = (-d + c) / h;\n  return t.transform(_, f, g, p);\n}\nclass c extends i {\n  constructor(t) {\n    super(t), this.mode = \"snapshot\", this._loading = !0, this._controller = new AbortController(), this._downloadPromise = null, this._didSendEnd = !1, this._queries = new Array(), this._invalidated = !1, this._hasAggregates = !1, this._random = new n(1e3), this._store = t.store, this._markedIdsBufId = this._store.storage.createBitset();\n  }\n  destroy() {\n    super.destroy(), this._controller.abort();\n  }\n  get loading() {\n    return this._loading;\n  }\n  get _signal() {\n    return this._controller.signal;\n  }\n  update(t, s) {\n    super.update(t, s), null == this._featureCount && (this._featureCount = s.initialFeatureCount), e(s.changedFeatureCount) && (this._featureCount = s.changedFeatureCount), this._hasAggregates = !!t.targets?.aggregate;\n  }\n  async resend() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    if (await this._downloadPromise, this._invalidated || t) {\n      const t = s(this._featureCount, \"Expected featureCount to be defined\");\n      return this._invalidated = !1, this._subscriptions.forEach(t => t.clear()), this._downloadPromise = this._download(t), void (await this._downloadPromise);\n    }\n    const e = this._queries.map(_ref => {\n      let {\n        query: t,\n        reader: e\n      } = _ref;\n      return this._sendPatchQuery(t, e);\n    });\n    await Promise.all(e), this._subscriptions.forEach(t => {\n      t.requests.done.forEach(t => this._onMessage(t.message));\n    });\n  }\n  async refresh(t, e) {\n    e && (this._featureCount = e.featureCount), await this.resend(!0);\n  }\n  async _sendPatchQuery(t, s) {\n    const r = e(t.outFields) ? t.outFields : [],\n      a = this._queryInfo.outFields,\n      n = a.filter(t => !r.includes(t));\n    if (!n.length) return;\n    const i = t.clone(),\n      d = this._signal;\n    i.returnGeometry = !1, i.returnCentroid = !1, i.outFields = n, t.outFields = a;\n    const u = await this._queue.push({\n      query: i,\n      depth: 0,\n      signal: d\n    });\n    o({\n      signal: d\n    }), s.joinAttributes(u);\n  }\n  async _fetchDataTile(t) {\n    if (!this._downloadPromise) {\n      const t = s(this._featureCount, \"Expected featureCount to be defined\");\n      this._downloadPromise = this._download(t);\n    }\n    const e = this._store.search(t),\n      r = this._subscriptions.get(t.key.id),\n      o = e.length - 1;\n    for (let s = 0; s < o; s++) {\n      const o = l(e[s], t),\n        n = {\n          type: \"append\",\n          id: t.id,\n          addOrUpdate: o,\n          end: !1,\n          status: u.empty()\n        };\n      r.add({\n        query: null,\n        message: n\n      }), this._hasAggregates || (await a(1)), this._onMessage(n);\n    }\n    const n = l(o >= 0 ? e[o] : null, t),\n      i = this._didSendEnd,\n      d = {\n        type: \"append\",\n        id: t.id,\n        addOrUpdate: n,\n        end: i,\n        status: u.empty()\n      };\n    r.add({\n      query: null,\n      message: d\n    }), this._onMessage(d);\n  }\n  async _download(e) {\n    try {\n      await this.whenInitialized();\n      const t = this._store.storage.getBitset(this._markedIdsBufId),\n        s = new Set();\n      t.clear();\n      const r = Math.ceil(e / this.pageSize),\n        o = Array.from({\n          length: r\n        }, (t, e) => e).sort((t, e) => this._random.getInt() - this._random.getInt()).map(e => this._downloadPage(e, t, s));\n      await Promise.all(o), this._store.sweepFeatures(t, this._store.storage), this._store.sweepFeatureSets(s);\n    } catch (s) {\n      t.getLogger(\"esri.views.2d.layers.features.sources.SnapshotFeatureSource\").error(\"mapview-snapshot-source\", \"Encountered and error when downloading feature snapshot\", s);\n    }\n    this._sendEnd(), this._loading = !1;\n  }\n  async _downloadPage(t, s, r) {\n    const a = this.pageSize,\n      n = {\n        start: t * a,\n        num: a,\n        cacheHint: !0\n      };\n    e(this.maxRecordCountFactor) && (n.maxRecordCountFactor = this.maxRecordCountFactor);\n    const i = this.createQuery(n),\n      d = this._signal,\n      u = await this._queue.push({\n        query: i,\n        depth: t,\n        signal: d\n      });\n    o({\n      signal: d\n    }), this._queries.push({\n      query: i,\n      reader: u\n    }), this._store.insert(u), r.add(u.instance);\n    const h = u.getCursor();\n    for (; h.next();) s.set(h.getDisplayId());\n    this._send(u);\n  }\n  _send(t) {\n    if (!this._subscriptions.size) return;\n    let s = null;\n    const o = new Map(),\n      a = new Set(),\n      n = new Map();\n    this._subscriptions.forEach(t => {\n      const e = t.tile;\n      o.set(e.key.id, null), s = e.tileInfoView, a.add(e.level);\n      const {\n          row: r,\n          col: i\n        } = e.key,\n        d = `${e.level}/${r}/${i}`,\n        u = n.get(d) ?? [];\n      u.push(t), n.set(d, u);\n    });\n    for (const e of a) {\n      const a = s.getLODInfoAt(e),\n        i = t.getCursor();\n      for (; i.next();) {\n        const t = h(i, a, e),\n          s = i.getIndex();\n        if (n.has(t)) for (const e of n.get(t)) {\n          const t = e.tile.id;\n          let a = o.get(t);\n          r(a) && (a = [], o.set(t, a)), a.push(s);\n        }\n      }\n    }\n    o.forEach((s, r) => {\n      if (e(s)) {\n        const e = this._subscriptions.get(r),\n          o = {\n            type: \"append\",\n            id: r,\n            addOrUpdate: l(d.from(t, s), e.tile),\n            end: !1,\n            status: u.empty()\n          };\n        e.add({\n          query: null,\n          message: o\n        }), this._onMessage(o);\n      }\n    });\n  }\n  _sendEnd() {\n    this._subscriptions.forEach(t => {\n      const e = {\n        type: \"append\",\n        id: t.tile.id,\n        addOrUpdate: null,\n        end: !0,\n        status: u.empty()\n      };\n      t.add({\n        query: null,\n        message: e\n      }), this._onMessage(e);\n    }), this._didSendEnd = !0;\n  }\n}\nexport { c as SnapshotFeatureSource };","map":{"version":3,"names":["t","isSome","e","unwrapOrThrow","s","isNone","r","throwIfAborted","o","after","a","n","BaseFeatureSource","i","FeatureSetReaderIndirect","d","UpdateToken","u","h","getXHydrated","getYHydrated","getColumnForX","Math","floor","normalizeCol","getRowForY","l","transform","getQuantizationTransform","scale","translate","c","g","_","p","f","constructor","mode","_loading","_controller","AbortController","_downloadPromise","_didSendEnd","_queries","Array","_invalidated","_hasAggregates","_random","_store","store","_markedIdsBufId","storage","createBitset","destroy","abort","loading","_signal","signal","update","_featureCount","initialFeatureCount","changedFeatureCount","targets","aggregate","resend","arguments","length","undefined","_subscriptions","forEach","clear","_download","map","_ref","query","reader","_sendPatchQuery","Promise","all","requests","done","_onMessage","message","refresh","featureCount","outFields","_queryInfo","filter","includes","clone","returnGeometry","returnCentroid","_queue","push","depth","joinAttributes","_fetchDataTile","search","get","key","id","type","addOrUpdate","end","status","empty","add","whenInitialized","getBitset","Set","ceil","pageSize","from","sort","getInt","_downloadPage","sweepFeatures","sweepFeatureSets","getLogger","error","_sendEnd","start","num","cacheHint","maxRecordCountFactor","createQuery","insert","instance","getCursor","next","set","getDisplayId","_send","size","Map","tile","tileInfoView","level","row","col","getLODInfoAt","getIndex","has","SnapshotFeatureSource"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/2d/layers/features/sources/SnapshotFeatureSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import t from\"../../../../../core/Logger.js\";import{isSome as e,unwrapOrThrow as s,isNone as r}from\"../../../../../core/maybe.js\";import{throwIfAborted as o,after as a}from\"../../../../../core/promiseUtils.js\";import n from\"../../../../../core/RandomLCG.js\";import{BaseFeatureSource as i}from\"./BaseFeatureSource.js\";import{FeatureSetReaderIndirect as d}from\"../support/FeatureSetReaderPBFIndirect.js\";import{UpdateToken as u}from\"../support/UpdateToken.js\";function h(t,e,s){const r=t.getXHydrated(),o=t.getYHydrated(),a=e.getColumnForX(r),n=Math.floor(e.normalizeCol(a));return`${s}/${Math.floor(e.getRowForY(o))}/${n}`}function l(t,e){if(r(t))return null;const s=e.transform,o=t.getQuantizationTransform();if(r(o)){const[e,r]=s.scale,[o,a]=s.translate,n=-o/e,i=1/e,d=a/r,u=1/-r;return t.transform(n,d,i,u)}const[a,n]=o.scale,[i,d]=o.translate,[u,h]=s.scale,[l,c]=s.translate,g=a/u,_=(i-l)/u,p=n/h,f=(-d+c)/h;return t.transform(_,f,g,p)}class c extends i{constructor(t){super(t),this.mode=\"snapshot\",this._loading=!0,this._controller=new AbortController,this._downloadPromise=null,this._didSendEnd=!1,this._queries=new Array,this._invalidated=!1,this._hasAggregates=!1,this._random=new n(1e3),this._store=t.store,this._markedIdsBufId=this._store.storage.createBitset()}destroy(){super.destroy(),this._controller.abort()}get loading(){return this._loading}get _signal(){return this._controller.signal}update(t,s){super.update(t,s),null==this._featureCount&&(this._featureCount=s.initialFeatureCount),e(s.changedFeatureCount)&&(this._featureCount=s.changedFeatureCount),this._hasAggregates=!!t.targets?.aggregate}async resend(t=!1){if(await this._downloadPromise,this._invalidated||t){const t=s(this._featureCount,\"Expected featureCount to be defined\");return this._invalidated=!1,this._subscriptions.forEach((t=>t.clear())),this._downloadPromise=this._download(t),void await this._downloadPromise}const e=this._queries.map((({query:t,reader:e})=>this._sendPatchQuery(t,e)));await Promise.all(e),this._subscriptions.forEach((t=>{t.requests.done.forEach((t=>this._onMessage(t.message)))}))}async refresh(t,e){e&&(this._featureCount=e.featureCount),await this.resend(!0)}async _sendPatchQuery(t,s){const r=e(t.outFields)?t.outFields:[],a=this._queryInfo.outFields,n=a.filter((t=>!r.includes(t)));if(!n.length)return;const i=t.clone(),d=this._signal;i.returnGeometry=!1,i.returnCentroid=!1,i.outFields=n,t.outFields=a;const u=await this._queue.push({query:i,depth:0,signal:d});o({signal:d}),s.joinAttributes(u)}async _fetchDataTile(t){if(!this._downloadPromise){const t=s(this._featureCount,\"Expected featureCount to be defined\");this._downloadPromise=this._download(t)}const e=this._store.search(t),r=this._subscriptions.get(t.key.id),o=e.length-1;for(let s=0;s<o;s++){const o=l(e[s],t),n={type:\"append\",id:t.id,addOrUpdate:o,end:!1,status:u.empty()};r.add({query:null,message:n}),this._hasAggregates||await a(1),this._onMessage(n)}const n=l(o>=0?e[o]:null,t),i=this._didSendEnd,d={type:\"append\",id:t.id,addOrUpdate:n,end:i,status:u.empty()};r.add({query:null,message:d}),this._onMessage(d)}async _download(e){try{await this.whenInitialized();const t=this._store.storage.getBitset(this._markedIdsBufId),s=new Set;t.clear();const r=Math.ceil(e/this.pageSize),o=Array.from({length:r},((t,e)=>e)).sort(((t,e)=>this._random.getInt()-this._random.getInt())).map((e=>this._downloadPage(e,t,s)));await Promise.all(o),this._store.sweepFeatures(t,this._store.storage),this._store.sweepFeatureSets(s)}catch(s){t.getLogger(\"esri.views.2d.layers.features.sources.SnapshotFeatureSource\").error(\"mapview-snapshot-source\",\"Encountered and error when downloading feature snapshot\",s)}this._sendEnd(),this._loading=!1}async _downloadPage(t,s,r){const a=this.pageSize,n={start:t*a,num:a,cacheHint:!0};e(this.maxRecordCountFactor)&&(n.maxRecordCountFactor=this.maxRecordCountFactor);const i=this.createQuery(n),d=this._signal,u=await this._queue.push({query:i,depth:t,signal:d});o({signal:d}),this._queries.push({query:i,reader:u}),this._store.insert(u),r.add(u.instance);const h=u.getCursor();for(;h.next();)s.set(h.getDisplayId());this._send(u)}_send(t){if(!this._subscriptions.size)return;let s=null;const o=new Map,a=new Set,n=new Map;this._subscriptions.forEach((t=>{const e=t.tile;o.set(e.key.id,null),s=e.tileInfoView,a.add(e.level);const{row:r,col:i}=e.key,d=`${e.level}/${r}/${i}`,u=n.get(d)??[];u.push(t),n.set(d,u)}));for(const e of a){const a=s.getLODInfoAt(e),i=t.getCursor();for(;i.next();){const t=h(i,a,e),s=i.getIndex();if(n.has(t))for(const e of n.get(t)){const t=e.tile.id;let a=o.get(t);r(a)&&(a=[],o.set(t,a)),a.push(s)}}}o.forEach(((s,r)=>{if(e(s)){const e=this._subscriptions.get(r),o={type:\"append\",id:r,addOrUpdate:l(d.from(t,s),e.tile),end:!1,status:u.empty()};e.add({query:null,message:o}),this._onMessage(o)}}))}_sendEnd(){this._subscriptions.forEach((t=>{const e={type:\"append\",id:t.tile.id,addOrUpdate:null,end:!0,status:u.empty()};t.add({query:null,message:e}),this._onMessage(e)})),this._didSendEnd=!0}}export{c as SnapshotFeatureSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}