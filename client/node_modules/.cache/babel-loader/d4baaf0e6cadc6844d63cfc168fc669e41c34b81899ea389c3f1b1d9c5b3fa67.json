{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { unwrap as e } from \"../../../core/maybe.js\";\nimport { l as t, d as i } from \"../../../chunks/vec2.js\";\nimport { a as s } from \"../../../chunks/vec2f64.js\";\nimport { c as r } from \"../../../chunks/vec3f64.js\";\nimport { absoluteHeightElevationInfo as o } from \"../../../support/elevationInfoUtils.js\";\nimport { SnappingAlgorithm as n } from \"./SnappingAlgorithm.js\";\nimport { anyMapPointToSnappingPoint as p, asSnappingPoint as a } from \"./SnappingPoint.js\";\nimport { squaredScreenDistance as d } from \"./snappingUtils.js\";\nimport { RightAngleTriangleSnappingCandidate as m } from \"./candidates/RightAngleTriangleSnappingCandidate.js\";\nimport { vectorToScreenPoint as c } from \"../support/viewUtils.js\";\nimport { projectPointToCircle as l } from \"../../support/geometry2dUtils.js\";\nclass h extends n {\n  snapNewVertex(e, t) {\n    const i = t.editGeometryOperations.data.components[0],\n      s = [],\n      r = i.vertices.length;\n    if (\"polygon\" !== t.editGeometryOperations.data.type || r < 2) return s;\n    const {\n        view: o\n      } = this,\n      n = i.vertices[0],\n      a = i.vertices[r - 1],\n      d = p(n.pos, o, t),\n      m = p(a.pos, o, t);\n    return this._processCandidateProposal(d, m, e, t, s), s;\n  }\n  snapExistingVertex(t, i) {\n    const s = [],\n      r = e(i.vertexHandle),\n      o = r.component;\n    if (o.edges.length < 2) return s;\n    if (\"polyline\" === i.editGeometryOperations.data.type && (0 === r.index || r.index === o.vertices.length - 1)) return s;\n    const {\n        view: n\n      } = this,\n      a = p(r.leftEdge.leftVertex.pos, n, i),\n      d = p(r.rightEdge.rightVertex.pos, n, i);\n    return this._processCandidateProposal(a, d, t, i, s), s;\n  }\n  _processCandidateProposal(e, s, n, p, h) {\n    if (!this.exceedsShortLineThreshold(e, s, p)) return;\n    const g = t(f, e, s, .5),\n      u = .5 * i(e, s),\n      v = r();\n    l(v, n, g, u), v[2] = n[2];\n    const x = a(v),\n      {\n        spatialReference: j,\n        pointer: y\n      } = p,\n      w = c(n, j, o, this.view);\n    if (d(w, c(x, j, o, this.view)) < this.squaredProximityThreshold(y)) {\n      if (this.isVertical(e, x) || this.isVertical(x, s)) return;\n      h.push(new m({\n        targetPoint: x,\n        point1: e,\n        point2: s,\n        isDraped: \"on-the-ground\" === p.elevationInfo?.mode\n      }));\n    }\n  }\n}\nconst f = s();\nexport { h as RightAngleTriangleSnapper };","map":{"version":3,"names":["unwrap","e","l","t","d","i","a","s","c","r","absoluteHeightElevationInfo","o","SnappingAlgorithm","n","anyMapPointToSnappingPoint","p","asSnappingPoint","squaredScreenDistance","RightAngleTriangleSnappingCandidate","m","vectorToScreenPoint","projectPointToCircle","h","snapNewVertex","editGeometryOperations","data","components","vertices","length","type","view","pos","_processCandidateProposal","snapExistingVertex","vertexHandle","component","edges","index","leftEdge","leftVertex","rightEdge","rightVertex","exceedsShortLineThreshold","g","f","u","v","x","spatialReference","j","pointer","y","w","squaredProximityThreshold","isVertical","push","targetPoint","point1","point2","isDraped","elevationInfo","mode","RightAngleTriangleSnapper"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/RightAngleTriangleSnapper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../../../core/maybe.js\";import{l as t,d as i}from\"../../../chunks/vec2.js\";import{a as s}from\"../../../chunks/vec2f64.js\";import{c as r}from\"../../../chunks/vec3f64.js\";import{absoluteHeightElevationInfo as o}from\"../../../support/elevationInfoUtils.js\";import{SnappingAlgorithm as n}from\"./SnappingAlgorithm.js\";import{anyMapPointToSnappingPoint as p,asSnappingPoint as a}from\"./SnappingPoint.js\";import{squaredScreenDistance as d}from\"./snappingUtils.js\";import{RightAngleTriangleSnappingCandidate as m}from\"./candidates/RightAngleTriangleSnappingCandidate.js\";import{vectorToScreenPoint as c}from\"../support/viewUtils.js\";import{projectPointToCircle as l}from\"../../support/geometry2dUtils.js\";class h extends n{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],s=[],r=i.vertices.length;if(\"polygon\"!==t.editGeometryOperations.data.type||r<2)return s;const{view:o}=this,n=i.vertices[0],a=i.vertices[r-1],d=p(n.pos,o,t),m=p(a.pos,o,t);return this._processCandidateProposal(d,m,e,t,s),s}snapExistingVertex(t,i){const s=[],r=e(i.vertexHandle),o=r.component;if(o.edges.length<2)return s;if(\"polyline\"===i.editGeometryOperations.data.type&&(0===r.index||r.index===o.vertices.length-1))return s;const{view:n}=this,a=p(r.leftEdge.leftVertex.pos,n,i),d=p(r.rightEdge.rightVertex.pos,n,i);return this._processCandidateProposal(a,d,t,i,s),s}_processCandidateProposal(e,s,n,p,h){if(!this.exceedsShortLineThreshold(e,s,p))return;const g=t(f,e,s,.5),u=.5*i(e,s),v=r();l(v,n,g,u),v[2]=n[2];const x=a(v),{spatialReference:j,pointer:y}=p,w=c(n,j,o,this.view);if(d(w,c(x,j,o,this.view))<this.squaredProximityThreshold(y)){if(this.isVertical(e,x)||this.isVertical(x,s))return;h.push(new m({targetPoint:x,point1:e,point2:s,isDraped:\"on-the-ground\"===p.elevationInfo?.mode}))}}}const f=s();export{h as RightAngleTriangleSnapper};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}