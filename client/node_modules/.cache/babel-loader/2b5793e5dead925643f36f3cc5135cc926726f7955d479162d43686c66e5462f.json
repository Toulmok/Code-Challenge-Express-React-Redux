{"ast":null,"code":"import _defineProperty from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../geometry.js\";\nimport e from \"../core/Error.js\";\nimport r from \"../core/Logger.js\";\nimport { isSome as t } from \"../core/maybe.js\";\nimport a from \"../geometry/SpatialReference.js\";\nvar s = r.getLogger(\"esri.support.arcadeOnDemand\");\nvar c;\nfunction i() {\n  return c || (c = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var e;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return import(\"./arcadeUtils.js\");\n        case 2:\n          e = _context.sent;\n          return _context.abrupt(\"return\", {\n            arcade: e.arcade,\n            arcadeUtils: e,\n            Dictionary: e.Dictionary,\n            Feature: e.arcadeFeature\n          });\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }))()), c;\n}\nvar n = function n(e, r, t) {\n    return u.create(e, r, t, null, [\"$feature\"]);\n  },\n  o = function o(e, r, t) {\n    return u.create(e, r, t, null, [\"$feature\", \"$view\"]);\n  },\n  l = o,\n  p = function p(e, r, t, a) {\n    return u.create(e, r, t, a, [\"$feature\", \"$view\"]);\n  };\nvar u = /*#__PURE__*/function () {\n  function u(e, r, t, a, s, c, i) {\n    _classCallCheck(this, u);\n    this.script = e, this.evaluate = a;\n    var n = Array.isArray(c) ? c : c.fields;\n    this.fields = n, this._syntaxTree = t, this._arcade = r, this._arcadeFeature = s, this._spatialReference = i, this._referencesGeometry = r.scriptTouchesGeometry(this._syntaxTree), this._referencesScale = this._arcade.referencesMember(this._syntaxTree, \"scale\");\n  }\n  _createClass(u, [{\n    key: \"repurposeFeature\",\n    value: function repurposeFeature(e) {\n      return e.geometry && !e.geometry.spatialReference && (e.geometry.spatialReference = this._spatialReference), this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry, e.attributes, {\n        fields: this.fields\n      }), this._arcadeFeature;\n    }\n  }, {\n    key: \"referencesGeometry\",\n    value: function referencesGeometry() {\n      return this._referencesGeometry;\n    }\n  }, {\n    key: \"referencesScale\",\n    value: function referencesScale() {\n      return this._referencesScale;\n    }\n  }], [{\n    key: \"create\",\n    value: function () {\n      var _create = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(r, c, n, o, l, p) {\n        var _yield$i, m, f, d, y, h, w, g, _, F, S, $, b, v, j, G, R, x;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return i();\n            case 2:\n              _yield$i = _context2.sent;\n              m = _yield$i.arcade;\n              f = _yield$i.Feature;\n              d = _yield$i.Dictionary;\n              y = a.fromJSON(c);\n              _context2.prev = 7;\n              h = m.parseScript(r, p);\n              _context2.next = 14;\n              break;\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](7);\n              return _context2.abrupt(\"return\", (s.error(new e(\"arcade-bad-expression\", \"Failed to parse arcade script\", {\n                script: r,\n                error: _context2.t0\n              })), null));\n            case 14:\n              w = l.reduce(function (e, r) {\n                return _objectSpread(_objectSpread({}, e), {}, _defineProperty({}, r, null));\n              }, {});\n              g = null;\n              t(o) && (g = new d(o), g.immutable = !0, w.$config = null);\n              _ = m.scriptUsesGeometryEngine(h), F = _ && m.enableGeometrySupport(), S = m.scriptUsesFeatureSet(h) && m.enableFeatureSetSupport(), $ = m.scriptIsAsync(h), b = $ && m.enableAsyncSupport(), v = {\n                vars: w,\n                spatialReference: y,\n                useAsync: !!b\n              };\n              _context2.next = 20;\n              return Promise.all([F, S, b]);\n            case 20:\n              j = new Set();\n              _context2.next = 23;\n              return m.loadDependentModules(j, h, null, $, _);\n            case 23:\n              G = new d();\n              G.immutable = !1, G.setField(\"scale\", 0);\n              R = m.compileScript(h, v), x = function x(e) {\n                return \"$view\" in e && e.$view && (G.setField(\"scale\", \"object\" == typeof e.$view ? e.$view.scale : void 0), e.$view = G), g && (e.$config = g), R({\n                  vars: e,\n                  spatialReference: y\n                });\n              };\n              return _context2.abrupt(\"return\", new u(r, m, h, x, new f(), n, y));\n            case 27:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[7, 11]]);\n      }));\n      function create(_x, _x2, _x3, _x4, _x5, _x6) {\n        return _create.apply(this, arguments);\n      }\n      return create;\n    }()\n  }]);\n  return u;\n}();\nexport { u as ArcadeExpression, p as createDictionaryExpression, n as createLabelExpression, o as createRendererExpression, l as createVVExpression, i as loadArcade };","map":{"version":3,"names":["e","r","isSome","t","a","s","getLogger","c","i","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","sent","abrupt","arcade","arcadeUtils","Dictionary","Feature","arcadeFeature","stop","n","u","create","o","l","p","_classCallCheck","script","evaluate","Array","isArray","fields","_syntaxTree","_arcade","_arcadeFeature","_spatialReference","_referencesGeometry","scriptTouchesGeometry","_referencesScale","referencesMember","_createClass","key","value","repurposeFeature","geometry","spatialReference","repurposeFromGraphicLikeObject","attributes","referencesGeometry","referencesScale","_create","_callee2","_yield$i","m","f","d","y","h","w","g","_","F","S","$","b","v","j","G","R","x","_callee2$","_context2","fromJSON","parseScript","t0","error","reduce","_objectSpread","_defineProperty","immutable","$config","scriptUsesGeometryEngine","enableGeometrySupport","scriptUsesFeatureSet","enableFeatureSetSupport","scriptIsAsync","enableAsyncSupport","vars","useAsync","Promise","all","Set","loadDependentModules","setField","compileScript","$view","scale","_x","_x2","_x3","_x4","_x5","_x6","apply","arguments","ArcadeExpression","createDictionaryExpression","createLabelExpression","createRendererExpression","createVVExpression","loadArcade"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/support/arcadeOnDemand.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../geometry.js\";import e from\"../core/Error.js\";import r from\"../core/Logger.js\";import{isSome as t}from\"../core/maybe.js\";import a from\"../geometry/SpatialReference.js\";const s=r.getLogger(\"esri.support.arcadeOnDemand\");let c;function i(){return c||(c=(async()=>{const e=await import(\"./arcadeUtils.js\");return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),c}const n=(e,r,t)=>u.create(e,r,t,null,[\"$feature\"]),o=(e,r,t)=>u.create(e,r,t,null,[\"$feature\",\"$view\"]),l=o,p=(e,r,t,a)=>u.create(e,r,t,a,[\"$feature\",\"$view\"]);class u{constructor(e,r,t,a,s,c,i){this.script=e,this.evaluate=a;const n=Array.isArray(c)?c:c.fields;this.fields=n,this._syntaxTree=t,this._arcade=r,this._arcadeFeature=s,this._spatialReference=i,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,\"scale\")}static async create(r,c,n,o,l,p){const{arcade:m,Feature:f,Dictionary:d}=await i(),y=a.fromJSON(c);let h;try{h=m.parseScript(r,p)}catch(A){return s.error(new e(\"arcade-bad-expression\",\"Failed to parse arcade script\",{script:r,error:A})),null}const w=l.reduce(((e,r)=>({...e,[r]:null})),{});let g=null;t(o)&&(g=new d(o),g.immutable=!0,w.$config=null);const _=m.scriptUsesGeometryEngine(h),F=_&&m.enableGeometrySupport(),S=m.scriptUsesFeatureSet(h)&&m.enableFeatureSetSupport(),$=m.scriptIsAsync(h),b=$&&m.enableAsyncSupport(),v={vars:w,spatialReference:y,useAsync:!!b};await Promise.all([F,S,b]);const j=new Set;await m.loadDependentModules(j,h,null,$,_);const G=new d;G.immutable=!1,G.setField(\"scale\",0);const R=m.compileScript(h,v),x=e=>(\"$view\"in e&&e.$view&&(G.setField(\"scale\",\"object\"==typeof e.$view?e.$view.scale:void 0),e.$view=G),g&&(e.$config=g),R({vars:e,spatialReference:y}));return new u(r,m,h,x,new f,n,y)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}}export{u as ArcadeExpression,p as createDictionaryExpression,n as createLabelExpression,o as createRendererExpression,l as createVVExpression,i as loadArcade};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}