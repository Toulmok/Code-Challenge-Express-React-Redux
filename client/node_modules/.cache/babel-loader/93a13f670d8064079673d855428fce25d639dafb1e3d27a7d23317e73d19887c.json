{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport { isSome as t, isNone as s, destroyMaybe as o } from \"../../../../core/maybe.js\";\nimport { throwIfAborted as u, createAbortError as a } from \"../../../../core/promiseUtils.js\";\nimport { property as y } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as i } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { fromFeatureSetJSON as n } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport { runQuery as p, executeQuery as c } from \"../../../../rest/query/operations/query.js\";\nimport { PBFDecoder as l } from \"../../support/PBFDecoder.js\";\nlet d = class extends r {\n  constructor(e) {\n    super(e);\n  }\n  get queryFeaturesDehydrated() {\n    const e = this.layer.capabilities,\n      r = e && e.query,\n      o = r && r.supportsFormatPBF,\n      y = this.layer.parsedUrl;\n    if (o) {\n      s(this._decoder) && (this._decoder = new l(this.controller));\n      const e = {\n        sourceSpatialReference: this.layer.spatialReference?.toJSON() ?? null,\n        applyTransform: !0,\n        maxStringAttributeLength: 1024\n      };\n      return (r, s) => p(y, r, \"pbf\", this._createRequestOptions(s)).then(r => (u(s), t(this._decoder) ? this._decoder.invoke({\n        buffer: r.data,\n        options: e\n      }, s.signal) : Promise.reject(a())));\n    }\n    return (e, r) => c(y, e, this.layer.spatialReference, this._createRequestOptions(r)).then(e => n(e.data));\n  }\n  queryFeatureCount(e, r) {\n    return this.layer.queryFeatureCount(e, r);\n  }\n  destroy() {\n    this._decoder = o(this._decoder);\n  }\n  _createRequestOptions(e) {\n    return {\n      ...e,\n      query: {\n        ...this.layer.customParameters,\n        token: this.layer.apiKey,\n        ...e?.query\n      }\n    };\n  }\n};\ne([y({\n  constructOnly: !0\n})], d.prototype, \"layer\", void 0), e([y({\n  constructOnly: !0\n})], d.prototype, \"controller\", void 0), e([y({\n  readOnly: !0\n})], d.prototype, \"queryFeaturesDehydrated\", null), d = e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D\")], d);\nlet h = class extends r {\n  constructor(e) {\n    super(e);\n  }\n  queryFeaturesDehydrated(e, r) {\n    return this.layer.queryFeatures(e, r);\n  }\n  queryFeatureCount(e, r) {\n    return this.layer.queryFeatureCount(e, r);\n  }\n};\ne([y({\n  constructOnly: !0\n})], h.prototype, \"layer\", void 0), e([y({\n  readOnly: !0\n})], h.prototype, \"queryFeaturesDehydrated\", null), h = e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceMeshQuery3D\")], h);\nlet m = class extends r {\n  constructor(e) {\n    super(e);\n  }\n  queryFeaturesDehydrated(e, r) {\n    return this.layer.queryFeatures(e, r);\n  }\n};\ne([y({\n  constructOnly: !0\n})], m.prototype, \"layer\", void 0), m = e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D\")], m);\nlet f = class extends r {\n  constructor(e) {\n    super(e);\n  }\n  queryFeaturesDehydrated(e, r) {\n    return this.source.queryFeaturesJSON(e, r).then(n, t => {\n      if (t && \"query-features-json:unsupported\" === t.name) return this.layer.queryFeatures(e, r);\n      throw t;\n    });\n  }\n  queryFeatureCount(e, r) {\n    return this.layer.queryFeatureCount(e, r);\n  }\n};\nfunction q(e, r) {\n  return \"feature\" === e.type && \"feature-layer\" === e.source.type ? t(e.infoFor3D) ? new h({\n    layer: e\n  }) : new d({\n    layer: e,\n    controller: r\n  }) : \"feature\" === e.type && \"memory\" === e.source.type || \"csv\" === e.type || \"geojson\" === e.type || \"oriented-imagery\" === e.type || \"wfs\" === e.type ? new f({\n    layer: e,\n    source: e.source\n  }) : \"ogc-feature\" === e.type ? new m({\n    layer: e\n  }) : null;\n}\ne([y({\n  constructOnly: !0\n})], f.prototype, \"layer\", void 0), e([y({\n  constructOnly: !0\n})], f.prototype, \"source\", void 0), f = e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D\")], f);\nexport { q as createFeatureTileQuery3D };","map":{"version":3,"names":["_","e","r","isSome","t","isNone","s","destroyMaybe","o","throwIfAborted","u","createAbortError","a","property","y","subclass","i","fromFeatureSetJSON","n","runQuery","p","executeQuery","c","PBFDecoder","l","d","constructor","queryFeaturesDehydrated","layer","capabilities","query","supportsFormatPBF","parsedUrl","_decoder","controller","sourceSpatialReference","spatialReference","toJSON","applyTransform","maxStringAttributeLength","_createRequestOptions","then","invoke","buffer","data","options","signal","Promise","reject","queryFeatureCount","destroy","customParameters","token","apiKey","constructOnly","prototype","readOnly","h","queryFeatures","m","f","source","queryFeaturesJSON","name","q","type","infoFor3D","createFeatureTileQuery3D"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/support/featureTileQuery3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{isSome as t,isNone as s,destroyMaybe as o}from\"../../../../core/maybe.js\";import{throwIfAborted as u,createAbortError as a}from\"../../../../core/promiseUtils.js\";import{property as y}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{fromFeatureSetJSON as n}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{runQuery as p,executeQuery as c}from\"../../../../rest/query/operations/query.js\";import{PBFDecoder as l}from\"../../support/PBFDecoder.js\";let d=class extends r{constructor(e){super(e)}get queryFeaturesDehydrated(){const e=this.layer.capabilities,r=e&&e.query,o=r&&r.supportsFormatPBF,y=this.layer.parsedUrl;if(o){s(this._decoder)&&(this._decoder=new l(this.controller));const e={sourceSpatialReference:this.layer.spatialReference?.toJSON()??null,applyTransform:!0,maxStringAttributeLength:1024};return(r,s)=>p(y,r,\"pbf\",this._createRequestOptions(s)).then((r=>(u(s),t(this._decoder)?this._decoder.invoke({buffer:r.data,options:e},s.signal):Promise.reject(a()))))}return(e,r)=>c(y,e,this.layer.spatialReference,this._createRequestOptions(r)).then((e=>n(e.data)))}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}destroy(){this._decoder=o(this._decoder)}_createRequestOptions(e){return{...e,query:{...this.layer.customParameters,token:this.layer.apiKey,...e?.query}}}};e([y({constructOnly:!0})],d.prototype,\"layer\",void 0),e([y({constructOnly:!0})],d.prototype,\"controller\",void 0),e([y({readOnly:!0})],d.prototype,\"queryFeaturesDehydrated\",null),d=e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D\")],d);let h=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.layer.queryFeatures(e,r)}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}};e([y({constructOnly:!0})],h.prototype,\"layer\",void 0),e([y({readOnly:!0})],h.prototype,\"queryFeaturesDehydrated\",null),h=e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceMeshQuery3D\")],h);let m=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.layer.queryFeatures(e,r)}};e([y({constructOnly:!0})],m.prototype,\"layer\",void 0),m=e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D\")],m);let f=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.source.queryFeaturesJSON(e,r).then(n,(t=>{if(t&&\"query-features-json:unsupported\"===t.name)return this.layer.queryFeatures(e,r);throw t}))}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}};function q(e,r){return\"feature\"===e.type&&\"feature-layer\"===e.source.type?t(e.infoFor3D)?new h({layer:e}):new d({layer:e,controller:r}):\"feature\"===e.type&&\"memory\"===e.source.type||\"csv\"===e.type||\"geojson\"===e.type||\"oriented-imagery\"===e.type||\"wfs\"===e.type?new f({layer:e,source:e.source}):\"ogc-feature\"===e.type?new m({layer:e}):null}e([y({constructOnly:!0})],f.prototype,\"layer\",void 0),e([y({constructOnly:!0})],f.prototype,\"source\",void 0),f=e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D\")],f);export{q as createFeatureTileQuery3D};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,iCAAiC;AAAC,OAAOC,CAAC,MAAK,8BAA8B;AAAC,SAAOC,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,cAAc,IAAIC,CAAC,EAACC,gBAAgB,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,yDAAyD;AAAC,OAAM,gDAAgD;AAAC,OAAM,gCAAgC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,yDAAyD;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,mDAAmD;AAAC,SAAOC,QAAQ,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,QAAK,4CAA4C;AAAC,SAAOC,UAAU,IAAIC,CAAC,QAAK,6BAA6B;AAAC,IAAIC,CAAC,GAAC,cAAcvB,CAAC;EAACwB,WAAWA,CAACzB,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC;EAAA;EAAC,IAAI0B,uBAAuBA,CAAA,EAAE;IAAC,MAAM1B,CAAC,GAAC,IAAI,CAAC2B,KAAK,CAACC,YAAY;MAAC3B,CAAC,GAACD,CAAC,IAAEA,CAAC,CAAC6B,KAAK;MAACtB,CAAC,GAACN,CAAC,IAAEA,CAAC,CAAC6B,iBAAiB;MAACjB,CAAC,GAAC,IAAI,CAACc,KAAK,CAACI,SAAS;IAAC,IAAGxB,CAAC,EAAC;MAACF,CAAC,CAAC,IAAI,CAAC2B,QAAQ,CAAC,KAAG,IAAI,CAACA,QAAQ,GAAC,IAAIT,CAAC,CAAC,IAAI,CAACU,UAAU,CAAC,CAAC;MAAC,MAAMjC,CAAC,GAAC;QAACkC,sBAAsB,EAAC,IAAI,CAACP,KAAK,CAACQ,gBAAgB,EAAEC,MAAM,EAAE,IAAE,IAAI;QAACC,cAAc,EAAC,CAAC,CAAC;QAACC,wBAAwB,EAAC;MAAI,CAAC;MAAC,OAAM,CAACrC,CAAC,EAACI,CAAC,KAAGc,CAAC,CAACN,CAAC,EAACZ,CAAC,EAAC,KAAK,EAAC,IAAI,CAACsC,qBAAqB,CAAClC,CAAC,CAAC,CAAC,CAACmC,IAAI,CAAEvC,CAAC,KAAGQ,CAAC,CAACJ,CAAC,CAAC,EAACF,CAAC,CAAC,IAAI,CAAC6B,QAAQ,CAAC,GAAC,IAAI,CAACA,QAAQ,CAACS,MAAM,CAAC;QAACC,MAAM,EAACzC,CAAC,CAAC0C,IAAI;QAACC,OAAO,EAAC5C;MAAC,CAAC,EAACK,CAAC,CAACwC,MAAM,CAAC,GAACC,OAAO,CAACC,MAAM,CAACpC,CAAC,EAAE,CAAC,CAAC,CAAE;IAAA;IAAC,OAAM,CAACX,CAAC,EAACC,CAAC,KAAGoB,CAAC,CAACR,CAAC,EAACb,CAAC,EAAC,IAAI,CAAC2B,KAAK,CAACQ,gBAAgB,EAAC,IAAI,CAACI,qBAAqB,CAACtC,CAAC,CAAC,CAAC,CAACuC,IAAI,CAAExC,CAAC,IAAEiB,CAAC,CAACjB,CAAC,CAAC2C,IAAI,CAAC,CAAE;EAAA;EAACK,iBAAiBA,CAAChD,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,IAAI,CAAC0B,KAAK,CAACqB,iBAAiB,CAAChD,CAAC,EAACC,CAAC,CAAC;EAAA;EAACgD,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACjB,QAAQ,GAACzB,CAAC,CAAC,IAAI,CAACyB,QAAQ,CAAC;EAAA;EAACO,qBAAqBA,CAACvC,CAAC,EAAC;IAAC,OAAM;MAAC,GAAGA,CAAC;MAAC6B,KAAK,EAAC;QAAC,GAAG,IAAI,CAACF,KAAK,CAACuB,gBAAgB;QAACC,KAAK,EAAC,IAAI,CAACxB,KAAK,CAACyB,MAAM;QAAC,GAAGpD,CAAC,EAAE6B;MAAK;IAAC,CAAC;EAAA;AAAC,CAAC;AAAC7B,CAAC,CAAC,CAACa,CAAC,CAAC;EAACwC,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC7B,CAAC,CAAC8B,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAACtD,CAAC,CAAC,CAACa,CAAC,CAAC;EAACwC,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC7B,CAAC,CAAC8B,SAAS,EAAC,YAAY,EAAC,KAAK,CAAC,CAAC,EAACtD,CAAC,CAAC,CAACa,CAAC,CAAC;EAAC0C,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC/B,CAAC,CAAC8B,SAAS,EAAC,yBAAyB,EAAC,IAAI,CAAC,EAAC9B,CAAC,GAACxB,CAAC,CAAC,CAACe,CAAC,CAAC,2EAA2E,CAAC,CAAC,EAACS,CAAC,CAAC;AAAC,IAAIgC,CAAC,GAAC,cAAcvD,CAAC;EAACwB,WAAWA,CAACzB,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC;EAAA;EAAC0B,uBAAuBA,CAAC1B,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,IAAI,CAAC0B,KAAK,CAAC8B,aAAa,CAACzD,CAAC,EAACC,CAAC,CAAC;EAAA;EAAC+C,iBAAiBA,CAAChD,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,IAAI,CAAC0B,KAAK,CAACqB,iBAAiB,CAAChD,CAAC,EAACC,CAAC,CAAC;EAAA;AAAC,CAAC;AAACD,CAAC,CAAC,CAACa,CAAC,CAAC;EAACwC,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACG,CAAC,CAACF,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAACtD,CAAC,CAAC,CAACa,CAAC,CAAC;EAAC0C,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACC,CAAC,CAACF,SAAS,EAAC,yBAAyB,EAAC,IAAI,CAAC,EAACE,CAAC,GAACxD,CAAC,CAAC,CAACe,CAAC,CAAC,+EAA+E,CAAC,CAAC,EAACyC,CAAC,CAAC;AAAC,IAAIE,CAAC,GAAC,cAAczD,CAAC;EAACwB,WAAWA,CAACzB,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC;EAAA;EAAC0B,uBAAuBA,CAAC1B,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,IAAI,CAAC0B,KAAK,CAAC8B,aAAa,CAACzD,CAAC,EAACC,CAAC,CAAC;EAAA;AAAC,CAAC;AAACD,CAAC,CAAC,CAACa,CAAC,CAAC;EAACwC,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACK,CAAC,CAACJ,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAACI,CAAC,GAAC1D,CAAC,CAAC,CAACe,CAAC,CAAC,2EAA2E,CAAC,CAAC,EAAC2C,CAAC,CAAC;AAAC,IAAIC,CAAC,GAAC,cAAc1D,CAAC;EAACwB,WAAWA,CAACzB,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC;EAAA;EAAC0B,uBAAuBA,CAAC1B,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,IAAI,CAAC2D,MAAM,CAACC,iBAAiB,CAAC7D,CAAC,EAACC,CAAC,CAAC,CAACuC,IAAI,CAACvB,CAAC,EAAEd,CAAC,IAAE;MAAC,IAAGA,CAAC,IAAE,iCAAiC,KAAGA,CAAC,CAAC2D,IAAI,EAAC,OAAO,IAAI,CAACnC,KAAK,CAAC8B,aAAa,CAACzD,CAAC,EAACC,CAAC,CAAC;MAAC,MAAME,CAAC;IAAA,CAAC,CAAE;EAAA;EAAC6C,iBAAiBA,CAAChD,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO,IAAI,CAAC0B,KAAK,CAACqB,iBAAiB,CAAChD,CAAC,EAACC,CAAC,CAAC;EAAA;AAAC,CAAC;AAAC,SAAS8D,CAACA,CAAC/D,CAAC,EAACC,CAAC,EAAC;EAAC,OAAM,SAAS,KAAGD,CAAC,CAACgE,IAAI,IAAE,eAAe,KAAGhE,CAAC,CAAC4D,MAAM,CAACI,IAAI,GAAC7D,CAAC,CAACH,CAAC,CAACiE,SAAS,CAAC,GAAC,IAAIT,CAAC,CAAC;IAAC7B,KAAK,EAAC3B;EAAC,CAAC,CAAC,GAAC,IAAIwB,CAAC,CAAC;IAACG,KAAK,EAAC3B,CAAC;IAACiC,UAAU,EAAChC;EAAC,CAAC,CAAC,GAAC,SAAS,KAAGD,CAAC,CAACgE,IAAI,IAAE,QAAQ,KAAGhE,CAAC,CAAC4D,MAAM,CAACI,IAAI,IAAE,KAAK,KAAGhE,CAAC,CAACgE,IAAI,IAAE,SAAS,KAAGhE,CAAC,CAACgE,IAAI,IAAE,kBAAkB,KAAGhE,CAAC,CAACgE,IAAI,IAAE,KAAK,KAAGhE,CAAC,CAACgE,IAAI,GAAC,IAAIL,CAAC,CAAC;IAAChC,KAAK,EAAC3B,CAAC;IAAC4D,MAAM,EAAC5D,CAAC,CAAC4D;EAAM,CAAC,CAAC,GAAC,aAAa,KAAG5D,CAAC,CAACgE,IAAI,GAAC,IAAIN,CAAC,CAAC;IAAC/B,KAAK,EAAC3B;EAAC,CAAC,CAAC,GAAC,IAAI;AAAA;AAACA,CAAC,CAAC,CAACa,CAAC,CAAC;EAACwC,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAACL,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAACtD,CAAC,CAAC,CAACa,CAAC,CAAC;EAACwC,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAACL,SAAS,EAAC,QAAQ,EAAC,KAAK,CAAC,CAAC,EAACK,CAAC,GAAC3D,CAAC,CAAC,CAACe,CAAC,CAAC,0EAA0E,CAAC,CAAC,EAAC4C,CAAC,CAAC;AAAC,SAAOI,CAAC,IAAIG,wBAAwB"},"metadata":{},"sourceType":"module","externalDependencies":[]}