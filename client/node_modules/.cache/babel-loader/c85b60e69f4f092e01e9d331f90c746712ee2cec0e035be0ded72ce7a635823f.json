{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Error.js\";\nimport { isSome as s } from \"../../../../core/maybe.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport { subclass as t } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { unpackFieldNames as o, populateMissingFields as a } from \"../../../../layers/support/fieldUtils.js\";\nimport { getFetchPopupTemplate as p, getRequiredFields as i } from \"../../../layers/support/popupUtils.js\";\nconst c = c => {\n  let l = class extends c {\n    _validateFetchPopupFeatures(e) {\n      const {\n          layer: s\n        } = this,\n        {\n          popupEnabled: t\n        } = s;\n      if (!t) throw new r(\"scenelayerview3d:fetchPopupFeatures\", \"Popups are disabled\", {\n        layer: s\n      });\n      if (!p(s, e)) throw new r(\"scenelayerview3d:fetchPopupFeatures\", \"Layer does not define a popup template\", {\n        layer: s\n      });\n    }\n    async prepareFetchPopupFeatures(e) {}\n    async fetchPopupFeatures(e, r) {\n      this._validateFetchPopupFeatures(r);\n      const t = s(r) ? r.clientGraphics : null;\n      if (!t || 0 === t.length) return [];\n      const c = \"scene\" === this.layer.type && s(this.layer.associatedLayer) ? this.layer.associatedLayer : this.layer;\n      let l = [];\n      \"fieldsIndex\" in this.layer && (l = o(this.layer.fieldsIndex, await i(c, p(this.layer, r)))), await this.prepareFetchPopupFeatures(l);\n      const n = new Set(),\n        u = [],\n        h = [];\n      for (const s of t) a(l, s, n) ? h.push(s) : u.push(s);\n      return 0 === h.length ? u : this.whenGraphicAttributes(h, [...n]).catch(() => h).then(e => u.concat(e));\n    }\n  };\n  return l = e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")], l), l;\n};\nexport { c as PopupSceneLayerView };","map":{"version":3,"names":["_","e","r","isSome","s","subclass","t","unpackFieldNames","o","populateMissingFields","a","getFetchPopupTemplate","p","getRequiredFields","i","c","l","_validateFetchPopupFeatures","layer","popupEnabled","prepareFetchPopupFeatures","fetchPopupFeatures","clientGraphics","length","type","associatedLayer","fieldsIndex","n","Set","u","h","push","whenGraphicAttributes","catch","then","concat","PopupSceneLayerView"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as a}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as p,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let l=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)throw new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});if(!p(s,e))throw new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){this._validateFetchPopupFeatures(r);const t=s(r)?r.clientGraphics:null;if(!t||0===t.length)return[];const c=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer;let l=[];\"fieldsIndex\"in this.layer&&(l=o(this.layer.fieldsIndex,await i(c,p(this.layer,r)))),await this.prepareFetchPopupFeatures(l);const n=new Set,u=[],h=[];for(const s of t)a(l,s,n)?h.push(s):u.push(s);return 0===h.length?u:this.whenGraphicAttributes(h,[...n]).catch((()=>h)).then((e=>u.concat(e)))}};return l=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],l),l};export{c as PopupSceneLayerView};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}