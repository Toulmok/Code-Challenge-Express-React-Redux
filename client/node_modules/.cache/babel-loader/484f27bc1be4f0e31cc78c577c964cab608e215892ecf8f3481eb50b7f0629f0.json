{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport s from \"../../../core/Accessor.js\";\nimport { isSome as o, abortMaybe as r, removeMaybe as e, isNone as i } from \"../../../core/maybe.js\";\nimport { debounce as n } from \"../../../core/promiseUtils.js\";\nimport { property as a } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as p } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { TaskPriority as l, ImmediateTask as c } from \"../../support/Scheduler.js\";\nlet h = class extends s {\n  constructor(t) {\n    super(t), this.constrainResult = t => t, this._snapPoints = null, this._frameTask = null, this._abortController = null, this._stagedPoint = null, this._snap = n(async (t, s, r, e) => {\n      const n = this._frameTask;\n      if (i(n)) return;\n      const a = await n.schedule(() => s.snap({\n        ...t,\n        context: r,\n        signal: e\n      }), e);\n      a.valid && (await n.schedule(() => {\n        this.stagedPoint = a.apply(), t !== this._snapPoints && o(this._snapPoints) && (this.stagedPoint = s.update({\n          ...this._snapPoints,\n          context: r\n        }));\n      }, e));\n    });\n  }\n  get stagedPoint() {\n    return this._stagedPoint;\n  }\n  set stagedPoint(t) {\n    this._stagedPoint = this.constrainResult(t);\n  }\n  initialize() {\n    const t = \"3d\" === this.view.type ? this.view?.resourceController?.scheduler : null;\n    this._frameTask = o(t) ? t.registerTask(l.SNAPPING) : c;\n  }\n  destroy() {\n    this._abortController = r(this._abortController), this._frameTask = e(this._frameTask);\n  }\n  update(t, s, o) {\n    this._snapPoints = t;\n    const {\n        point: r,\n        scenePoint: e\n      } = t,\n      i = s.update({\n        point: r,\n        scenePoint: e,\n        context: o\n      });\n    return this.stagedPoint = i, i;\n  }\n  async snap(t, s, o) {\n    const {\n      point: r,\n      scenePoint: e\n    } = t;\n    return this.stagedPoint = s.update({\n      point: r,\n      scenePoint: e,\n      context: o\n    }), this._snapPoints = t, i(this._abortController) && (this._abortController = new AbortController()), this._snap(t, s, o, this._abortController.signal);\n  }\n  async resnap(t, s) {\n    i(this._snapPoints) || (await this.snap(this._snapPoints, t, s));\n  }\n  abort() {\n    this._abortController = r(this._abortController), this._snapPoints = null;\n  }\n};\nt([a({\n  constructOnly: !0\n})], h.prototype, \"view\", void 0), t([a()], h.prototype, \"stagedPoint\", null), t([a()], h.prototype, \"constrainResult\", void 0), t([a()], h.prototype, \"_stagedPoint\", void 0), h = t([p(\"esri.views.interactive.snapping.SnappingOperation\")], h);\nexport { h as SnappingOperation };","map":{"version":3,"names":["_","t","s","isSome","o","abortMaybe","r","removeMaybe","e","isNone","i","debounce","n","property","a","subclass","p","TaskPriority","l","ImmediateTask","c","h","constructor","constrainResult","_snapPoints","_frameTask","_abortController","_stagedPoint","_snap","schedule","snap","context","signal","valid","stagedPoint","apply","update","initialize","view","type","resourceController","scheduler","registerTask","SNAPPING","destroy","point","scenePoint","AbortController","resnap","abort","constructOnly","prototype","SnappingOperation"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/SnappingOperation.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Accessor.js\";import{isSome as o,abortMaybe as r,removeMaybe as e,isNone as i}from\"../../../core/maybe.js\";import{debounce as n}from\"../../../core/promiseUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import{TaskPriority as l,ImmediateTask as c}from\"../../support/Scheduler.js\";let h=class extends s{constructor(t){super(t),this.constrainResult=t=>t,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=n((async(t,s,r,e)=>{const n=this._frameTask;if(i(n))return;const a=await n.schedule((()=>s.snap({...t,context:r,signal:e})),e);a.valid&&await n.schedule((()=>{this.stagedPoint=a.apply(),t!==this._snapPoints&&o(this._snapPoints)&&(this.stagedPoint=s.update({...this._snapPoints,context:r}))}),e)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(t){this._stagedPoint=this.constrainResult(t)}initialize(){const t=\"3d\"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=o(t)?t.registerTask(l.SNAPPING):c}destroy(){this._abortController=r(this._abortController),this._frameTask=e(this._frameTask)}update(t,s,o){this._snapPoints=t;const{point:r,scenePoint:e}=t,i=s.update({point:r,scenePoint:e,context:o});return this.stagedPoint=i,i}async snap(t,s,o){const{point:r,scenePoint:e}=t;return this.stagedPoint=s.update({point:r,scenePoint:e,context:o}),this._snapPoints=t,i(this._abortController)&&(this._abortController=new AbortController),this._snap(t,s,o,this._abortController.signal)}async resnap(t,s){i(this._snapPoints)||await this.snap(this._snapPoints,t,s)}abort(){this._abortController=r(this._abortController),this._snapPoints=null}};t([a({constructOnly:!0})],h.prototype,\"view\",void 0),t([a()],h.prototype,\"stagedPoint\",null),t([a()],h.prototype,\"constrainResult\",void 0),t([a()],h.prototype,\"_stagedPoint\",void 0),h=t([p(\"esri.views.interactive.snapping.SnappingOperation\")],h);export{h as SnappingOperation};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}