{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Color.js\";\nimport i from \"../../../Graphic.js\";\nimport { removeUnordered as s } from \"../../../core/arrayUtils.js\";\nimport { ByteSizeUnit as r } from \"../../../core/byteSizeEstimations.js\";\nimport o from \"../../../core/Collection.js\";\nimport has from \"../../../core/has.js\";\nimport a from \"../../../core/Logger.js\";\nimport { someMap as n } from \"../../../core/MapUtils.js\";\nimport { unwrapOr as l, destroyMaybe as d, isSome as h, isNone as c, applySome as u } from \"../../../core/maybe.js\";\nimport _ from \"../../../core/PooledArray.js\";\nimport { isAbortError as m, throwIfAborted as g, createResolver as p } from \"../../../core/promiseUtils.js\";\nimport { initial as f, watch as b } from \"../../../core/reactiveUtils.js\";\nimport { schedule as y } from \"../../../core/scheduling.js\";\nimport { isArrayBuffer as v } from \"../../../core/typedArrayUtil.js\";\nimport { getMetersPerVerticalUnitForSR as I } from \"../../../core/unitUtils.js\";\nimport { property as M } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as C } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { f as x } from \"../../../chunks/mat3.js\";\nimport { c as O } from \"../../../chunks/mat3f32.js\";\nimport { m as E, D as S } from \"../../../chunks/mat4.js\";\nimport { b as j, c as w } from \"../../../chunks/mat4f64.js\";\nimport { f as T } from \"../../../chunks/quatf64.js\";\nimport { m as A, s as D, t as R, a as N, c as P, g as F, b as V } from \"../../../chunks/vec3.js\";\nimport { c as U } from \"../../../chunks/vec3f64.js\";\nimport { s as H } from \"../../../chunks/vec4.js\";\nimport { f as G } from \"../../../chunks/vec4f64.js\";\nimport { projectBuffer as L, getProjectorName as k, localLinearScaleFactors as B, projectVectorToVector as q, projectBoundingSphere as z } from \"../../../geometry/projection.js\";\nimport { create as K, empty as W, expandWithBuffer as $, toRect as X } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { create as Y, intersects as Q } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { fallbackObjectIDAttribute as J } from \"../../../layers/LayerConstants.js\";\nimport Z from \"../../../layers/graphics/controllers/I3SOnDemandController.js\";\nimport { fixFields as ee } from \"../../../layers/support/fieldUtils.js\";\nimport te from \"../../../layers/support/SceneModification.js\";\nimport { getColor as ie, getOpacity as se } from \"../../../renderers/visualVariables/support/visualVariableUtils.js\";\nimport { loadArcade as re } from \"../../../support/arcadeOnDemand.js\";\nimport oe from \"../../../symbols/Symbol3D.js\";\nimport { getMetersPerUnit as ae } from \"../../../symbols/support/unitConversionUtils.js\";\nimport ne from \"./I3SMeshViewLabeler.js\";\nimport { I3SMeshWorkerHandle as le, toWasmModification as de } from \"./I3SMeshWorkerHandle.js\";\nimport { ForAllFeaturesReturnType as he, ForAllFeaturesVisibilityMode as ce } from \"./II3SMeshView3D.js\";\nimport { initialize as ue, setModificationsSync as _e, filterObbsForModificationsSync as me, interpretObbModificationResults as ge } from \"./SceneLayerWorker.js\";\nimport { overrideColor as pe } from \"./graphics/graphicUtils.js\";\nimport { areLabelsVisible as fe } from \"./graphics/Labeler.js\";\nimport { TextureUsage as be, TextureEncoding as ye } from \"./i3s/enums.js\";\nimport ve from \"./i3s/Highlights.js\";\nimport { I3SAsyncElevationUpdater as Ie } from \"./i3s/I3SAsyncElevationUpdater.js\";\nimport { I3SCrossfadeHelper as Me, NodeCrossfadeMetaData as Ce } from \"./i3s/I3SCrossfadeHelper.js\";\nimport xe from \"./i3s/I3SElevationProvider.js\";\nimport { boundingBoxCornerPoints as Oe } from \"./i3s/I3SGeometryUtil.js\";\nimport { I3SIntersectionHandler as Ee } from \"./i3s/I3SIntersectionHandler.js\";\nimport { getSupportedEncodings as Se, selectEncoding as je, defaultMaterial as we, createTexture as Te, configureMaterial as Ae } from \"./i3s/I3SMaterialUtil.js\";\nimport { NodeIMModificationImpact as De, NodeState as Re } from \"./i3s/I3SNode.js\";\nimport { I3SOverrides as Ne } from \"./i3s/I3SOverrides.js\";\nimport { computeGlobalTransformation as Pe, getLocalOrigin as Fe } from \"./i3s/I3SProjectionUtil.js\";\nimport { rendererNeedsTextures as Ve, checkSceneLayerValid as Ue, checkSceneLayerCompatibleWithView as He, getCacheKeySuffix as Ge, whenGraphicAttributes as Le, computeVisibilityObb as ke, filterInPlace as Be, getCachedAttributeValue as qe, intersectBoundingRectWithMbs as ze, MbsIntersectResult as Ke, addWraparound as We, getSymbolInfo as $e, transparentEdgeMaterial as Xe, getClipRect as Ye } from \"./i3s/I3SUtil.js\";\nimport { IDBCache as Qe } from \"./i3s/IDBCache.js\";\nimport { IDBMockCache as Je } from \"./i3s/IDBMockCache.js\";\nimport { attributeLookup as Ze } from \"./support/attributeUtils.js\";\nimport { ColorMixModeEnum as et } from \"./support/symbolColorUtils.js\";\nimport tt from \"../support/debugFlags.js\";\nimport { toBoundingRect as it } from \"../support/extentUtils.js\";\nimport { create as st, clone as rt } from \"../support/orientedBoundingBox.js\";\nimport { updatingProgress as ot } from \"../support/updatingProperties.js\";\nimport { glLayout as at } from \"../support/buffer/glUtil.js\";\nimport { State as nt } from \"../webgl-engine/collections/Component/ComponentObject.js\";\nimport { createVertexBufferLayout as lt } from \"../webgl-engine/collections/Component/SourceGeometry.js\";\nimport { TextureCoordinateAttributeType as dt } from \"../webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";\nimport { loadBasis as ht } from \"../webgl-engine/lib/BasisUtil.js\";\nimport { newDoubleArray as ct } from \"../webgl-engine/lib/DoubleArray.js\";\nimport { Transparency as ut } from \"../webgl-engine/lib/edgeRendering/interfaces.js\";\nconst _t = \"esri.views.3d.layers.I3SMeshView3D\",\n  mt = a.getLogger(_t),\n  gt = [1, 1, 1, 1];\nclass pt extends Ce {\n  constructor(e, t, i, s, r, o, a) {\n    super(), this.node = e, this.featureIds = t, this.objectHandle = i, this.cachedRendererVersion = s, this.attributeInfo = r, this.material = o, this.textures = a, this.cachedMidsTerrainSR = null, this.cachedEdgeMaterials = new Array(), this.edgeMemoryUsage = 0, this.cachedSymbology = null;\n  }\n}\nvar ft;\n!function (e) {\n  e[e.CastShadows = 4] = \"CastShadows\", e[e.Pickable = 5] = \"Pickable\";\n}(ft || (ft = {}));\nconst bt = 19,\n  yt = 100 * r.MEGABYTES,\n  vt = t => {\n    let r = class extends t {\n      constructor() {\n        for (var _len = arguments.length, e = new Array(_len), _key = 0; _key < _len; _key++) {\n          e[_key] = arguments[_key];\n        }\n        super(e), this._nodeId2Meta = new Map(), this._nodeId2MetaReloading = new Map(), this._i3sWasmLoaded = !1, this._snappingSourcesTrackers = [], this._hasLoadedPBRTextures = !1, this._asyncModuleLoading = 0, this._addTasks = new Map(), this._currentRenderer = null, this._rendererVersion = 0, this._colorVariable = null, this._opacityVariable = null, this._rendererFields = null, this._symbologyFields = null, this._symbologyOverride = null, this._symbologyOverrideFields = null, this._symbolInfos = new Map(), this._visibleGeometryChangedSchedulerHandle = null, this._idbCache = has(\"enable-feature:idb-mock-cache\") ? new Je() : new Qe(\"esri-scenelayer-cache\", \"geometries\"), this._hasComponentData = !1, this._hasVertexColors = !1, this.holeFilling = \"auto\", this._hasColors = !1, this._hasTextures = !1, this._hasData = !1, this.slicePlaneEnabled = !1, this._modifications = new Array(), this._layerUrl = \"\", this._cacheKeySuffix = null, this._elevationTask = null, this._filters = [], this._arcade = null, this._tmpAttributeOnlyGraphic = new i(null, null, {}), this._crossfadeHelper = new Me(this);\n      }\n      get lodCrossfadeoutDuration() {\n        return 0;\n      }\n      get lodCrossfadeinDuration() {\n        return 0;\n      }\n      get lodCrossfadeUncoveredDuration() {\n        return 0;\n      }\n      get layerUid() {\n        return this.i3slayer && this.i3slayer.uid;\n      }\n      get sublayerUid() {\n        return null;\n      }\n      get layerId() {\n        return this.i3slayer && this.i3slayer.id;\n      }\n      get sublayerId() {\n        return null;\n      }\n      get updatingProgressValue() {\n        return this._controller?.updatingProgress ?? 0;\n      }\n      get hasTexturesOrVertexColors() {\n        return this._hasData ? this._hasTextures || this._hasColors ? \"yes\" : \"probably-not\" : \"unknown\";\n      }\n      get rendererTextureUsage() {\n        return Ve(this._currentRenderer) ? this._usePBR || this._hasLoadedPBRTextures ? be.AllTexturesPBR : be.AllTextures : this._usePBR || this._hasLoadedPBRTextures ? be.GeometryTexturesPBR : be.GeometryTextures;\n      }\n      get elevationOffset() {\n        const e = null != this.i3slayer ? this.i3slayer.elevationInfo : null;\n        if (null != e && \"absolute-height\" === e.mode) {\n          const t = I(this.i3slayer.spatialReference),\n            i = ae(e.unit);\n          return l(e.offset, 0) * i / t;\n        }\n        return 0;\n      }\n      get elevationInfo() {\n        const e = null != this.i3slayer ? this.i3slayer.elevationInfo : null;\n        if (null == e) return {\n          mode: Ut.Absolute,\n          offset: 0\n        };\n        const t = I(this.i3slayer.spatialReference),\n          i = ae(e.unit),\n          s = l(e.offset, 0) * i / t;\n        switch (e.mode) {\n          case \"absolute-height\":\n            return {\n              mode: Ut.Absolute,\n              offset: s\n            };\n          case \"relative-to-ground\":\n            return {\n              mode: Ut.RelativeToGround,\n              offset: s\n            };\n          case \"on-the-ground\":\n            return {\n              mode: Ut.OnTheGround,\n              offset: 0\n            };\n          default:\n            return {\n              mode: Ut.Absolute,\n              offset: 0\n            };\n        }\n      }\n      get supportedTextureEncodings() {\n        return Se(this.view._stage.renderView.capabilities);\n      }\n      get uncompressedTextureDownsamplingEnabled() {\n        const e = this.view?.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled,\n          t = 0 == (this.supportedTextureEncodings & ye.DDS_S3TC);\n        return e && t;\n      }\n      initialize() {\n        this._preLoadBasis(), this.addResolvingPromise(this.i3slayer.indexInfo);\n        const e = this.view.resourceController,\n          t = e.memoryController;\n        this.i3sOverrides = new Ne({\n          view: this.view,\n          layer: this.i3slayer,\n          memoryController: t\n        }), this._worker = new le(t => e.immediate.schedule(t)), this.addResolvingPromise(this._worker.promise);\n        const i = this.i3slayer.store;\n        this._worker.setLegacySchema(this.uid, i.defaultGeometrySchema), Ue(this.i3slayer), He(this.i3slayer, this.view), this._layerUrl = this.i3slayer.parsedUrl.path, this._controller = new Z({\n          layerView: this\n        }), this._gpuMemoryEstimate = 0, this._texMemoryEstimate = 0, this._geoMemoryEstimate = 0, this._stage = this.view._stage, this._collection = this._stage.renderView.componentObjectCollection, this.resetHighlights();\n        const s = i.defaultGeometrySchema;\n        if (this._isIntegratedMesh || !s) this._hasComponentData = !1;else {\n          const e = s.featureAttributes;\n          this._hasComponentData = !!(e && e.faceRange && e.id);\n        }\n        this._hasVertexColors = null != (s?.vertexAttributes.color ?? null) && (null == this.i3slayer.cachedDrawingInfo || !this.i3slayer.cachedDrawingInfo.color), this._isIntegratedMesh || (this._edgeView = this._stage.renderer.ensureEdgeView());\n        const r = this.view.resourceController.memoryController.newCache(this.uid, e => this._deleteComponentObject(e));\n        this._memCache = r;\n        const o = e => h(this._controller.index) && h(this._controller.index.rootNode) ? this._controller.index.traverse(this._controller.index.rootNode, t => {\n          const i = t.index,\n            s = this._nodeId2Meta.get(i) || this._nodeId2MetaReloading.get(i);\n          return e(t, h(s) ? s.objectHandle : null);\n        }) : () => {};\n        this._intersectionHandler = new Ee({\n          layerUid: this.layerUid,\n          sublayerUid: this.sublayerUid,\n          collection: this._collection,\n          slicePlaneEnabled: this.slicePlaneEnabled,\n          isGround: this._isIntegratedMesh,\n          traverseNodeHierarchy: o\n        }), this.updatingHandles.add(() => this.layerUid, e => this._intersectionHandler.layerUid = e), this.updatingHandles.add(() => this.sublayerUid, e => this._intersectionHandler.sublayerUid = e), this._elevationProvider = new xe({\n          layerView: this,\n          intersectionHandler: this._intersectionHandler\n        }), this._hasLoadedPBRTextures = this._usePBR, this.updatingHandles.add(() => this.view.clippingArea, () => this._clippingAreaChanged(), f), this.updatingHandles.add(() => this.fullOpacity, e => this._opacityChange(e)), this.updatingHandles.add(() => this.slicePlaneEnabled, e => this._slicePlaneEnabledChange(e)), this.updatingHandles.add(() => this.elevationOffset, (e, t) => {\n          this._reloadAll(t), this._controller.invalidateVisibilityObbs();\n        }), this.updatingHandles.add(() => this.elevationInfo, (e, t) => this._elevationInfoChanged(e, t), f), this.updatingHandles.add(() => !this.suspended && this.elevationInfo.mode !== Ut.Absolute, (e, t) => {\n          e ? this.handles.add(this.view.basemapTerrain.on(\"elevation-change\", _ref => {\n            let {\n              extent: e\n            } = _ref;\n            return this._ensureElevationTask().addExtent(e);\n          }), Lt) : t && this.handles.remove(Lt);\n        }, f), this.updatingHandles.add(() => this._usePBR, e => this._updatePBR(e));\n        const a = () => {\n          this._reloadAll(), this.clearMemCache();\n        };\n        this.updatingHandles.add(() => this.rendererTextureUsage, a), this.updatingHandles.add(() => this.uncompressedTextureDownsamplingEnabled, a), this.updatingHandles.add(() => this.suspended, e => this._suspendedChange(e), f), this.updatingHandles.add(() => this.i3slayer.labelsVisible, () => this._labelingChanged(), f), this.updatingHandles.add(() => this.i3slayer.labelingInfo, () => this._labelingChanged(), f), this.updatingHandles.add(() => this._modifications, () => this._modificationsChanged(), f), this.handles.add([b(() => tt.I3S_TREE_SHOW_TILES, e => {\n          if (e && !this._treeDebugger) {\n            const e = this._controller.crsIndex;\n            import(\"./support/I3STreeDebugger.js\").then(_ref2 => {\n              let {\n                I3STreeDebugger: t\n              } = _ref2;\n              !this._treeDebugger && tt.I3S_TREE_SHOW_TILES && (this._treeDebugger = new t({\n                lv: this,\n                view: this.view,\n                nodeSR: e\n              }));\n            });\n          } else e || tt.I3S_TREE_SHOW_TILES || (this._treeDebugger = d(this._treeDebugger));\n        }, f), b(() => tt.I3S_SHOW_MODIFICATIONS, () => this._showModifications(), f)]), this._cacheKeySuffix = Ge(this.i3slayer.spatialReference, this.view.renderSpatialReference), this._idbCache.init().catch(e => mt.warn(`Failed to initialize IndexedDB cache: ${e}`));\n      }\n      destroy() {\n        this._clearAddTasks(), this._elevationTask = d(this._elevationTask), this.i3sOverrides = d(this.i3sOverrides), this._elevationProvider && (this._elevationProvider.layerChanged(), this.view.elevationProvider.unregister(this._elevationProvider), this._elevationProvider = null), this._intersectionHandler && (this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler), this._intersectionHandler = null);\n        const e = this._worker;\n        e && (e.destroyContext(this.uid).then(() => e.destroy()), this._worker = null), this._removeAllNodeDataFromStage(), this._memCache = d(this._memCache), this._collection = null, this._stage = null, this._edgeView = null, this._labeler = d(this._labeler), this._treeDebugger = d(this._treeDebugger), this._controller = d(this._controller), this._highlights.destroy(), this._nodeId2Meta.clear(), this._nodeId2MetaReloading.clear(), this.emit(\"visible-geometry-changed\"), this._visibleGeometryChangedSchedulerHandle && (this._visibleGeometryChangedSchedulerHandle.remove(), this._visibleGeometryChangedSchedulerHandle = null);\n      }\n      _memEstimateTextureAdded(e) {\n        const t = e.estimatedTexMemRequired;\n        return this._gpuMemoryEstimate += t, this._texMemoryEstimate += t, t;\n      }\n      _memEstimateTextureRemoved(e) {\n        if (h(e)) {\n          const t = e.estimatedTexMemRequired;\n          this._gpuMemoryEstimate -= t, this._texMemoryEstimate -= t;\n        }\n      }\n      _memEstimateGeometryAdded(e) {\n        const t = this._collection.getObjectGPUMemoryUsage(e);\n        return this._gpuMemoryEstimate += t, this._geoMemoryEstimate += t, t;\n      }\n      _memEstimateGeometryRemoved(e) {\n        const t = this._collection.getObjectGPUMemoryUsage(e);\n        this._gpuMemoryEstimate -= t, this._geoMemoryEstimate -= t;\n      }\n      isNodeLoaded(e) {\n        return this._nodeId2Meta.has(e);\n      }\n      isNodeReloading(e) {\n        return this._nodeId2MetaReloading.has(e);\n      }\n      getUsedMemory() {\n        let e = h(this._labeler) ? this._labeler.usedMemory : 0;\n        return this._nodeId2Meta.forEach(t => e += h(t) ? t.node.memory : 0), this._nodeId2MetaReloading.forEach(t => e += h(t) ? t.node.memory : 0), e;\n      }\n      getUnloadedMemory() {\n        return (h(this._controller) ? this._controller.unloadedMemoryEstimate : 0) + (h(this._labeler) ? this._labeler.unloadedMemoryEstimate : 0);\n      }\n      ignoresMemoryFactor() {\n        return !1;\n      }\n      _labelingChanged() {\n        if (!(fe(this.i3slayer) && this._supportsLabeling)) return void (h(this._labeler) && (this._labeler.destroy(), this._labeler = null));\n        if (h(this._labeler)) return;\n        const e = new ne({\n          view: this.view,\n          layer: this.i3slayer,\n          collection: this._collection\n        });\n        this._nodeId2Meta.forEach(t => h(t) && this._addMetaToLabeler(e, t)), this._labeler = e;\n      }\n      _loadAsyncModule(e) {\n        return ++this._asyncModuleLoading, e.then(e => (--this._asyncModuleLoading, e), e => {\n          throw --this._asyncModuleLoading, e;\n        });\n      }\n      _modificationsChanged() {\n        if (!this._i3sWasmLoaded && this.hasModifications) return this._i3sWasmLoaded = ue().then(() => {\n          this._i3sWasmLoaded = !0, this._modificationsChanged(), this.notifyUpdate();\n        }), void this.notifyUpdate();\n        if (!0 !== this._i3sWasmLoaded) return;\n        const e = this.uid,\n          t = this.i3slayer.spatialReference;\n        this._worker.setModifications(e, this._layerClippingArea, this._modifications, t);\n        const i = de(this._layerClippingArea, this._modifications, t);\n        _e({\n          context: e,\n          modifications: i,\n          isGeodetic: t.isGeographic\n        }), this._controller.modificationsChanged();\n        const s = this.hasModifications ? new _() : null;\n        this._nodeId2Meta.forEach((e, t) => {\n          c(e) ? (this._nodeId2Meta.delete(t), this._controller.updateLoadStatus(t, !1)) : e.node.hasModifications ? (this._nodeId2Meta.delete(t), this._nodeId2MetaReloading.set(t, e)) : h(s) && s.push(e.node);\n        }), h(s) && this._nodeId2MetaReloading.forEach(e => s.push(e.node)), h(s) && s.length > 0 && (this.updateNodeModificationStatus(s), s.forAll(e => {\n          if (e.imModificationImpact !== De.Culled) {\n            const t = this._nodeId2Meta.get(e.index);\n            this._controller.invalidateGeometryVisibility(e.index), h(t) ? (this._nodeId2Meta.delete(e.index), this._nodeId2MetaReloading.set(e.index, t)) : this._nodeId2Meta.has(e.index) && (this._nodeId2Meta.delete(e.index), this._controller.updateLoadStatus(e.index, !1));\n          }\n        })), this.clearMemCache(), this._controller.restartNodeLoading(), this._showModifications();\n      }\n      _showModifications() {\n        if (h(this._modificationGraphics) && (this.view.graphics.removeMany(this._modificationGraphics), this._modificationGraphics = null), !tt.I3S_SHOW_MODIFICATIONS || 0 === this._modifications.length) return;\n        const e = {\n            clip: [227, 227, 79, .8],\n            mask: [227, 139, 79, .8],\n            replace: [139, 227, 79, .8]\n          },\n          t = {\n            type: \"simple-fill\",\n            outline: {\n              color: [255, 255, 255],\n              width: 1\n            }\n          };\n        this._modificationGraphics = new Array();\n        for (const s of this._modifications) {\n          const r = s.geometry;\n          r.spatialReference = this.i3slayer.spatialReference;\n          const o = {\n            ...t,\n            color: e[s.type]\n          };\n          this._modificationGraphics.push(new i({\n            geometry: r,\n            symbol: o\n          }));\n        }\n        this.view.graphics.addMany(this._modificationGraphics);\n      }\n      _addMetaToLabeler(e, t) {\n        e.addNodeMeta(t, (e, t) => this._createAttributes(e, t));\n      }\n      _suspendedChange(e) {\n        e ? (this._removeAllNodeDataFromStage(), this.view.elevationProvider && this.view.elevationProvider.unregister(this._elevationProvider), this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler)) : (this.view.elevationProvider.register(this._elevationContext, this._elevationProvider), this._stage.view.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler));\n      }\n      getLoadedAttributes(e) {\n        const t = this._nodeId2Meta.get(e);\n        if (h(t) && h(t.attributeInfo)) return t.attributeInfo.loadedAttributes;\n      }\n      getAttributeData(e) {\n        const t = this._nodeId2Meta.get(e);\n        if (h(t) && h(t.attributeInfo)) return t.attributeInfo.attributeData;\n      }\n      setAttributeData(e, t) {\n        const i = this._nodeId2Meta.get(e);\n        h(i) && h(i.attributeInfo) && (i.attributeInfo.attributeData = t, this._attributeValuesChanged(i));\n      }\n      async updateAttributes(e, t, i) {\n        const s = this._nodeId2Meta.get(e);\n        h(s) && (await this.i3sOverrides.apply(s.featureIds, t, i), s.attributeInfo = t, this._controller.reschedule(() => this._attributeValuesChanged(s), i).catch(e => {\n          m(e) || mt.warn(\"Error while updating attribute values. Layer might not display correctly.\", e);\n        }));\n      }\n      _attributeValuesChanged(e) {\n        e.cachedRendererVersion = this._getInvalidRendererVersion(), e.filteredIds = null, h(this._labeler) && this._labeler.setNodeMetaAttributes(e, (e, t) => this._createAttributes(e, t)), this._updateEngineObject(e);\n      }\n      clearMemCache() {\n        h(this._memCache) && this._memCache.clear();\n      }\n      getVisibleNodes() {\n        const e = new Array();\n        return this._nodeId2Meta.forEach(t => h(t) && e.push(t.node)), e;\n      }\n      getNodeComponentObb(e) {\n        const t = this._nodeId2Meta.get(e.index) ?? this._nodeId2MetaReloading.get(e.index);\n        return h(t) ? this._collection.getComponentObb(t.objectHandle) : null;\n      }\n      getLoadedNodeIndices(e) {\n        this._nodeId2Meta.forEach((t, i) => e.push(i)), this._nodeId2MetaReloading.forEach((t, i) => e.push(i));\n      }\n      _preLoadBasis() {\n        !has(\"disable-feature:i3s-basis\") && 0 != (this.supportedTextureEncodings & ye.Basis) && u(this.i3slayer.textureSetDefinitions, e => e.some(e => e.formats.some(e => \"basis\" === e.format || \"ktx2\" === e.format))) && ht();\n      }\n      _getVertexBufferLayout(e, t) {\n        const i = {\n          hasTexture: Tt(e.params.material),\n          hasNormals: t.normal,\n          hasRegions: t.uvRegion\n        };\n        return at(lt(this._getGeometryParameters(i)));\n      }\n      _getObjectIdField() {\n        return this.i3slayer.objectIdField || J;\n      }\n      _findGraphicNodeAndIndex(e) {\n        const t = Ze(this.i3slayer.fieldsIndex, e.attributes, this._getObjectIdField());\n        let i = null;\n        return n(this._nodeId2Meta, e => {\n          if (c(e)) return !1;\n          const s = e.featureIds.indexOf(t);\n          return -1 !== s && (i = {\n            node: e.node,\n            index: s\n          }, !0);\n        }), i;\n      }\n      _getGraphicIndices(e, t) {\n        const i = this._nodeId2Meta.get(e.index);\n        if (c(i)) return [];\n        const s = [],\n          r = this._getObjectIdField(),\n          o = this.i3slayer.fieldsIndex;\n        for (const a of t) {\n          const e = Ze(o, a.attributes, r),\n            t = i.featureIds.indexOf(e);\n          -1 !== t && s.push(t);\n        }\n        return s;\n      }\n      whenGraphicBounds(e) {\n        const t = this._findGraphicNodeAndIndex(e);\n        if (!t) return Promise.reject();\n        const i = this._getAABB(t.node.index, t.index);\n        return c(i) ? Promise.reject() : Promise.resolve({\n          boundingBox: i,\n          screenSpaceObjects: []\n        });\n      }\n      getAABBFromIntersectorTarget(e) {\n        return null == e.nodeIndex || null == e.componentIndex ? null : this._getAABB(e.nodeIndex, e.componentIndex);\n      }\n      _getAABB(e, t) {\n        const i = this._nodeId2Meta.get(e);\n        if (c(i) || null == i.featureIds || t >= i.featureIds.length) return null;\n        const s = i.objectHandle,\n          r = Oe(t, this._collection, s, ct(24)),\n          o = this.view.renderSpatialReference,\n          a = this.view.spatialReference;\n        if (!L(r, o, 0, r, a, 0, 8)) return null;\n        const n = W();\n        return $(n, r, 0, 8), n;\n      }\n      whenGraphicAttributes(e, t) {\n        return Le(this.i3slayer, e, this._getObjectIdField(), t, () => [...this._nodeId2Meta.values()].filter(h));\n      }\n      getGraphicFromIntersectorTarget(e) {\n        if (null == e.nodeIndex || null == e.componentIndex) return null;\n        const t = this._nodeId2Meta.get(e.nodeIndex);\n        return c(t) || null == t.featureIds || e.componentIndex >= t.featureIds.length ? null : this._createGraphic(e.componentIndex, t);\n      }\n      _getCacheKey(e) {\n        return `${this._layerUrl}/v${bt}/${e.id}${this._cacheKeySuffix}`;\n      }\n      _getMemCacheKey(e) {\n        let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.elevationOffset;\n        return e + \"#\" + t;\n      }\n      get _idbCacheEnabled() {\n        return !this._controller.disableIDBCache && !this.hasModifications && 0 === this.elevationOffset && null != this._cacheKeySuffix;\n      }\n      loadCachedGPUData(e) {\n        return h(this._memCache) ? this._memCache.pop(this._getMemCacheKey(e.index)) : null;\n      }\n      deleteCachedGPUData(e) {\n        h(e) && this._deleteComponentObject(e);\n      }\n      _cacheGPUData(e) {\n        let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.elevationOffset;\n        if (c(this._memCache)) return void this._deleteComponentObject(e);\n        const i = this._controller.indexDepth - e.node.level;\n        this._memCache.put(this._getMemCacheKey(e.node.index, t), e, e.node.memory, i);\n      }\n      loadMissingTextures(e, t, i, s) {\n        const r = e?.filter((e, i) => {\n          if (0 == (e.usage & this.rendererTextureUsage)) return !1;\n          if (c(t)) return !0;\n          const s = je(e.encodings, this.supportedTextureEncodings),\n            r = t[i];\n          return !!(c(r) || null == r.data || s && r.encoding !== s.encoding);\n        }) ?? [];\n        return 0 === r.length ? Promise.resolve(!1) : i(r, s).then(i => {\n          let s = 0;\n          for (let r = 0; r < e.length; r++) s < i.length && i[s].id === e[r].id && (t[r] = i[s], s++);\n          return !0;\n        });\n      }\n      loadCachedNodeData(e, t, i) {\n        return this._idbCacheEnabled ? this._idbCache.get(this._getCacheKey(e), t).then(s => null == s ? null : s.nodeVersion !== e.version ? (this._idbCache.remove(this._getCacheKey(e)), null) : (this.elevationInfo.mode === Ut.Absolute && (e.geometryObb = s.geometryObb), this.loadMissingTextures(s.requiredTextures, s.textureData, i, t).then(i => (i && this._idbCache.initialized && h(s.textureData) && (s.byteSize = Rt(s.transformedGeometry, s.textureData), s.textureData.every(Dt) && Nt(e, s) && this._idbCache.put(this._getCacheKey(e), s).catch(t => mt.warn(`Failed to update node with textures in IndexedDB cache: ${e.id}: ${t}`))), g(t), s)))) : Promise.resolve(null);\n      }\n      addNode(e, t, i) {\n        return At(t) ? null == t.geometryBuffer ? (this._addNodeMeta(e.index, null), Promise.resolve()) : this._addData(e, t.attributeDataInfo, () => this._transformNode(e, t, i).then(s => this._safeReschedule(() => {\n          if (c(s)) return e.hasModifications = !1, this._addCachedNodeData(e, null, i);\n          e.hasModifications = s.transformedGeometry.hasModifications;\n          const {\n              obb: r,\n              componentOffsets: o,\n              featureIds: a,\n              transformedGeometry: n\n            } = s,\n            l = this._controller.crsIndex,\n            d = this.view.renderSpatialReference,\n            u = Pe(e.mbs, this.elevationOffset, l, d),\n            _ = st([r.center.x, r.center.y, r.center.z], [r.extents.x, r.extents.y, r.extents.z], T(r.orientation.x, r.orientation.y, r.orientation.z, r.orientation.w));\n          A(_.center, _.center, u), this.elevationInfo.mode === Ut.Absolute && (e.geometryObb = _), t.geometryData.componentOffsets = o, a && (t.geometryData.featureIds = Array.from(a));\n          const m = {\n            nodeVersion: e.version,\n            geometryData: t.geometryData,\n            requiredTextures: t.requiredTextures,\n            textureData: t.textureData,\n            transformedGeometry: n,\n            globalTrafo: u,\n            geometryObb: _,\n            byteSize: Rt(n, t.textureData)\n          };\n          if (this._idbCacheEnabled && this._idbCache.initialized && Nt(e, m)) {\n            const t = h(m.textureData) ? m.textureData.map(e => Dt(e) ? e : null) : null;\n            this._idbCache.put(this._getCacheKey(e), {\n              ...m,\n              textureData: t\n            }).catch(t => mt.warn(`Failed to store node in IndexedDB cache: ${e.id}: ${t}`));\n          }\n          return this._addCachedNodeData(e, m, i);\n        }, i))) : Promise.reject();\n      }\n      computeVisibilityObb(e) {\n        return ke(e, this.view.renderSpatialReference, this._controller.crsIndex, this.i3slayer.spatialReference, this.elevationOffset, this._modifications);\n      }\n      _transformNode(e, t, i) {\n        const s = t.geometryData.geometries ?? [],\n          r = new Array(s.length);\n        for (let c = 0; c < s.length; ++c) r[c] = this._getVertexBufferLayout(s[c], t.geometryDescriptor);\n        const o = e.mbs,\n          a = this.elevationOffset,\n          n = this._controller.crsIndex,\n          l = this._controller.crsVertex,\n          d = this.view.renderSpatialReference,\n          h = Fe(o, a, n),\n          u = Pe(o, a, n, d),\n          _ = k(n, l),\n          m = k(l, d);\n        if (c(_) || c(m)) return Promise.resolve(null);\n        const g = {\n          context: this.uid,\n          geometryBuffer: t.geometryBuffer,\n          geometryData: t.geometryData,\n          geometryDescriptor: t.geometryDescriptor,\n          layouts: r,\n          localOrigin: h,\n          globalTrafo: u,\n          mbs: o,\n          obb: e.serviceObb,\n          elevationOffset: a,\n          needNormals: !this._isIntegratedMesh && this._controller.isMeshPyramid,\n          normalReferenceFrame: this.i3slayer.normalReferenceFrame || \"none\",\n          indexToVertexProjector: _,\n          vertexToRenderProjector: m\n        };\n        return this._worker.invoke(g, i);\n      }\n      get _supportsNodeCrossFading() {\n        return !this.view?._stage?.renderer.shadowsEnabled;\n      }\n      get nodeCrossfadingEnabled() {\n        return this._supportsNodeCrossFading && (this.lodCrossfadeinDuration > 0 || this.lodCrossfadeoutDuration > 0 || this.lodCrossfadeUncoveredDuration > 0);\n      }\n      get nodeFadeoutEnabled() {\n        return this._supportsNodeCrossFading && this.lodCrossfadeoutDuration > 0;\n      }\n      _setNewNodeOpacity(e) {\n        const t = this.nodeCrossfadingEnabled ? 0 : this.fullOpacity;\n        this._setNodeOpacity(e, t);\n      }\n      addCachedGPUData(e, t, i) {\n        if (this.elevationInfo.mode === Ut.Absolute && (e.geometryObb = rt(this._collection.getComponentObb(t.objectHandle))), !this._controller.isGeometryVisible(e)) return void this._cacheGPUData(t);\n        h(this._labeler) && this._addMetaToLabeler(this._labeler, t);\n        const s = e.index;\n        this._addNodeMeta(s, t), this.updateNodeState(s, i), this._collection.setObjectVisibility(t.objectHandle, nt.Visible), this._updateMaterial(t), this._setNewNodeOpacity(t), this.elevationInfo.mode !== Ut.Absolute && this._ensureElevationTask().schedule(s), this._updateEngineObject(t), this._highlights.objectCreated(t), h(this._treeDebugger) && this._treeDebugger.update();\n      }\n      addCachedNodeData(e, t, i, s) {\n        return this._addData(e, i, () => this._addCachedNodeData(e, t, s));\n      }\n      async _addCachedNodeData(e, t, i) {\n        if (this.suspended || !this._controller.isGeometryVisible(e)) return void this._removeNodeStageData(e.index, this.elevationOffset, this._nodeId2MetaReloading);\n        if (c(t)) return void this._addNodeMeta(e.index, null);\n        const s = this._addTasks.get(e.index),\n          {\n            geometryData: r,\n            transformedGeometry: o,\n            globalTrafo: a\n          } = t;\n        await this.i3sOverrides.apply(r.featureIds, s.attributeInfo, i);\n        const n = h(t.textureData) ? t.textureData.filter(e => h(e) && 0 != (e.usage & this.rendererTextureUsage)) : [];\n        !has(\"disable-feature:i3s-basis\") && n.some(e => h(e) && (e.encoding === ye.Basis || e.encoding === ye.KTX2)) && (await ht()), e.memory = 0;\n        const {\n            componentOffsets: l,\n            geometries: d,\n            featureIds: u\n          } = r,\n          _ = this._collection,\n          m = d[0],\n          {\n            layout: g,\n            indices: p,\n            interleavedVertexData: f,\n            positionData: b,\n            hasColors: y\n          } = o,\n          v = this._materialParameters(m, g),\n          I = l || new Uint32Array([0, p ? p.length : f.byteLength / g[0].stride]),\n          M = {\n            vertices: {\n              data: f,\n              count: f.byteLength / g[0].stride,\n              layoutParameters: v.geometryParams\n            },\n            positionData: {\n              positions: b.data,\n              indices: b.indices\n            },\n            indices: p,\n            componentOffsets: I\n          },\n          C = m.transformation ? j(m.transformation) : w();\n        E(C, a, C);\n        const T = S(U(), C),\n          A = x(O(), C),\n          D = this.view.renderSpatialReference,\n          R = this.view.basemapTerrain.spatialReference,\n          N = U(),\n          P = [1, 1, 1];\n        B(T, D, P, R) || mt.errorOnce(\"Unsupported coordinate system for IM overlay\"), q(T, D, N, R);\n        const F = _.createObject({\n            toMapSpace: G(N[0], N[1], P[0], P[1]),\n            geometry: M,\n            obb: t.geometryObb,\n            transform: {\n              position: T,\n              rotationScale: A\n            }\n          }),\n          V = v.geometryParams.textureCoordinates === dt.Atlas,\n          {\n            textures: H,\n            texturePromise: L\n          } = this._initMaterialAndTextures(F, v.material, n, V);\n        e.memory += this._memEstimateGeometryAdded(F), e.memory += H.reduce((e, t) => e + (h(t) ? this._memEstimateTextureAdded(t) : 0), 0);\n        const k = !!v.material.hasParametersFromSource,\n          z = \"blend\" !== v.material.alphaMode && v.material.metallicRoughness.baseColorFactor[3] >= 1,\n          K = new pt(e, u, F, this._getInvalidRendererVersion(), s.attributeInfo, {\n            hasParametersFromSource: k,\n            isOpaque: z\n          }, H);\n        s.meta = K, !this._hasTextures && t.requiredTextures?.some(_ref3 => {\n          let {\n            usage: e\n          } = _ref3;\n          return 0 != (e & be.ColorTextures);\n        }) && (this._hasTextures = !0), this._hasData = !0, this._hasColors = this._hasColors || y, this._hasTextures = this._hasTextures || !!e.resources.texture, this.notifyChange(\"hasTexturesOrVertexColors\");\n        const W = this.slicePlaneEnabled;\n        return Promise.all([this._addOrUpdateEdgeRendering(K), L]).then(_ref4 => {\n          let [t, s] = _ref4;\n          return h(t) && t.updateObjectVisibility(K.objectHandle, !1).catch(e => It(e, this.i3slayer.title)), this._safeReschedule(() => {\n            const i = this._addTasks.get(e.index);\n            if (!i) return;\n            if (this._addNodeMeta(e.index, K), i.meta = null, this.suspended) return void this._removeNodeStageData(e.index, this.elevationOffset);\n            _.setObjectVisibility(F, nt.Visible), h(t) && t.updateObjectVisibility(K.objectHandle, !0).catch(e => It(e, this.i3slayer.title)), K.attributeInfo = i.attributeInfo;\n            const s = K.cachedRendererVersion !== this._rendererVersion,\n              r = W !== this.slicePlaneEnabled;\n            this._updateElevationOffsets(K);\n            const o = K.elevationOffsets;\n            this._updateComponentData(K);\n            const a = this._applyFiltersToNode(K);\n            (s || h(t) && (r || a || o)) && this._addOrUpdateEdgeRendering(K), h(this._labeler) && this._addMetaToLabeler(this._labeler, K), this._visibleGeometryChanged(K, Mt.ADD), this._highlights.objectCreated(K), this._updateMaterial(K), this._setNewNodeOpacity(K), h(this._treeDebugger) && this._treeDebugger.update();\n          }, i);\n        }).catch(e => {\n          throw h(s.meta) && (this._cacheGPUData(s.meta), s.meta = null), e;\n        });\n      }\n      _addNodeMeta(e, t) {\n        if (this._removeNodeStageData(e, this.elevationOffset, this._nodeId2MetaReloading), this._nodeId2Meta.has(e)) {\n          mt.error(\"Removing duplicated node\");\n          const t = this._nodeId2Meta.get(e);\n          h(t) && this._deleteComponentObject(t);\n        } else this._controller.updateLoadStatus(e, !0);\n        h(t) && (t.lodCrossfadeProgress = null, this.nodeCrossfadingEnabled && Vt(t.cachedEdgeMaterials, 0)), this._nodeId2Meta.set(e, t);\n      }\n      _updateElevationOffsets(e) {\n        const t = this.view.renderSpatialReference,\n          i = this.elevationInfo,\n          s = this.view.basemapTerrain,\n          r = s.spatialReference,\n          o = i.mode;\n        if (c(t) || c(r) || o === Ut.Absolute) return void (e.elevationOffsets = null);\n        const a = this._collection.getObjectTransform(e.objectHandle);\n        e.elevationOffsets = e.elevationOffsets ?? [];\n        const n = Ht,\n          l = Gt,\n          d = o === Ut.OnTheGround,\n          u = this.view.renderCoordsHelper,\n          _ = !!e.cachedMidsTerrainSR,\n          m = e.featureIds.length;\n        if (!_) {\n          e.cachedMidsTerrainSR = ct(3 * m);\n          const i = e.cachedMidsTerrainSR;\n          for (let s = 0; s < m; s++) {\n            this._collection.getComponentAabb(e.objectHandle, s, l, !0), D(n, (l[0] + l[3]) / 2, (l[1] + l[4]) / 2, l[2]), R(n, n, a.rotationScale), N(n, n, a.position);\n            const o = 3 * s;\n            i[o + 2] = u.getAltitude(n), q(n, t, n, r), i[o + 0] = n[0], i[o + 1] = n[1];\n          }\n        }\n        const g = e.cachedMidsTerrainSR,\n          p = i.offset,\n          f = e.elevationOffsets,\n          b = (e, t) => {\n            const i = d ? g[3 * e + 2] : 0;\n            f[e] = p + (h(t) ? t - i : 0);\n          };\n        s.getElevations(g, m, b);\n      }\n      _ensureElevationTask() {\n        return h(this._elevationTask) || (this._elevationTask = new Ie(this.view.resourceController.scheduler, e => {\n          const t = this._controller.updateElevationChanged(e, this.view.basemapTerrain.spatialReference);\n          return h(t) ? t.filterInPlace(e => h(this._nodeId2Meta.get(e))) : null;\n        }, e => {\n          const t = this._nodeId2Meta.get(e);\n          this._nodeElevationAlignmentChanged(t);\n        })), this._elevationTask;\n      }\n      _elevationInfoChanged(e, t) {\n        const i = e.mode !== Ut.Absolute,\n          s = !!t && t !== e && t.mode !== Ut.Absolute;\n        this._intersectionHandler.updateElevationAlignState(i, this.view.state.viewingMode), i && !s && this._controller.removeAllGeometryObbs(), this._nodeId2Meta.forEach(e => this._nodeElevationAlignmentChanged(e));\n      }\n      _nodeElevationAlignmentChanged(e) {\n        c(e) || (this._updateElevationOffsets(e), this._updateComponentData(e), this._updateEdgeRendering(e), h(this._labeler) && this._labeler.updateLabelPositions(e), this._updateSnappingSources(e, Mt.UPDATE));\n      }\n      _safeReschedule(e, t) {\n        return g(t), this._controller.reschedule(e, t);\n      }\n      _materialParameters(e, t) {\n        const i = h(e.params.material) ? e.params.material : we(),\n          s = t.some(e => \"uvRegion\" === e.name),\n          r = t.some(e => \"normalCompressed\" === e.name),\n          o = Tt(i);\n        return {\n          geometryParams: this._getGeometryParameters({\n            hasTexture: o,\n            hasNormals: r,\n            hasRegions: s\n          }),\n          material: i\n        };\n      }\n      _initMaterialAndTextures(e, t, i, s) {\n        const r = this._stage.renderView,\n          o = i.map(e => Te(e, t, s, r));\n        this._stage.addMany(o);\n        let a = null;\n        return this._collection.updateMaterial(e, e => {\n          a = Ae(e, t, o, i, this.view._stage.renderView.textureRepository, {\n            rendererTextureUsage: this.rendererTextureUsage,\n            usePBR: this._usePBR,\n            isIntegratedMesh: this._isIntegratedMesh,\n            slicePlaneEnabled: this.slicePlaneEnabled,\n            viewSpatialReference: this.view.spatialReference\n          }), this._updateMaterialOverlay(e);\n        }), {\n          textures: o,\n          texturePromise: a\n        };\n      }\n      _getGeometryParameters(e) {\n        return {\n          textureCoordinates: e.hasTexture ? e.hasRegions ? dt.Atlas : dt.Default : dt.None,\n          colors: this._hasVertexColors,\n          normals: e.hasNormals && !this._isIntegratedMesh\n        };\n      }\n      _addData(e, t, i) {\n        let s = this._addTasks.get(e.index);\n        return s ? s.attributeInfo = t : (s = {\n          ...p(),\n          attributeInfo: t,\n          meta: null\n        }, this._addTasks.set(e.index, s), i().then(s.resolve, s.reject).then(() => this._addTasks.delete(e.index)).catch(t => {\n          throw this._addTasks.delete(e.index), t;\n        })), s.promise;\n      }\n      _clearAddTasks() {\n        this._addTasks.forEach(e => {\n          h(e.meta) && (this._cacheGPUData(e.meta), e.meta = null);\n        }), this._addTasks.clear();\n      }\n      _clippingAreaChanged() {\n        const e = this.view.renderSpatialReference,\n          t = this.i3slayer.spatialReference,\n          i = Y();\n        this._renderClippingArea = it(this.view.clippingArea, i, e) ? i : null;\n        const s = Y();\n        this._layerClippingArea = it(this.view.clippingArea, s, t) ? s : null, this._filterChange(), this._controller && this._controller.updateClippingArea(this.view.clippingArea), this._isIntegratedMesh && this._modificationsChanged();\n      }\n      get hasGeometryFilter() {\n        return !1;\n      }\n      _geometryFilterChange() {\n        const e = this.hasGeometryFilter;\n        this._controller.geometryFilterChanged(e), this._applyFilters(e);\n      }\n      _filterChange() {\n        this._applyFilters(this.hasGeometryFilter);\n      }\n      _applyFilters(e) {\n        this._filters = this.getFilters(), e ? this._controller && this._controller.requestUpdate() : this._nodeId2Meta.forEach(e => {\n          h(e) && this._applyFiltersToNode(e) && (this._addOrUpdateEdgeRendering(e), this._visibleGeometryChanged(e, Mt.UPDATE));\n        });\n      }\n      getFilters() {\n        const e = [],\n          t = this._renderClippingArea;\n        return h(t) && e.push((e, i) => this._boundingRectFilter(e, i, t)), e;\n      }\n      addSqlFilter(e, t, i) {\n        if (h(t)) {\n          const s = t.fieldNames;\n          e.push((e, r) => this._sqlFilter(e, r, t, s, i));\n        }\n      }\n      _sqlFilter(e, t, i, s, r) {\n        const o = {},\n          a = this._createLayerGraphic(o),\n          n = this.i3slayer.objectIdField,\n          l = t.featureIds,\n          d = h(t.attributeInfo) && t.attributeInfo.attributeData;\n        s.every(e => e === n || d && null != d[e]) && Be(e, l, e => {\n          o[n] = l[e];\n          for (const i of s) i !== n && (o[i] = d ? qe(d[i], e) : null);\n          try {\n            return i.testFeature(a);\n          } catch (t) {\n            return r(t), !1;\n          }\n        });\n      }\n      _boundingRectNodeTest(e, t) {\n        return z(e.node.mbs, this._controller.crsIndex, wt, this.view.renderSpatialReference), ze(t, wt);\n      }\n      _boundingRectFeatureTest(e, t, i) {\n        return this._collection.getComponentAabb(e.objectHandle, t, Ct), X(Ct, xt), Q(i, xt);\n      }\n      _boundingRectFilter(e, t, i) {\n        const s = this._collection,\n          r = this._boundingRectNodeTest(t, i);\n        if (r === Ke.INSIDE) return;\n        if (r === Ke.OUTSIDE) return void (e.length = 0);\n        const o = s.getComponentCount(t.objectHandle);\n        if (o.invisible + o.visible !== t.featureIds.length) return;\n        const a = this._transformClippingArea(Ot, i, t.objectHandle);\n        Be(e, t.featureIds, e => this._boundingRectFeatureTest(t, e, a));\n      }\n      _transformClippingArea(e, t, i) {\n        const s = this._collection.getObjectTransform(i),\n          r = s.position,\n          o = s.rotationScale;\n        return e[0] = (t[0] - r[0]) / o[0], e[1] = (t[1] - r[1]) / o[4], e[2] = (t[2] - r[0]) / o[0], e[3] = (t[3] - r[1]) / o[4], e;\n      }\n      _addOrUpdateEdgeRendering(e) {\n        let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n        const i = this._edgeView;\n        if (c(i)) return Promise.resolve(null);\n        const s = e.objectHandle,\n          r = i.hasObject(s),\n          {\n            hasEdges: o,\n            perFeatureEdgeMaterials: a\n          } = this._getFilteredEdgeMaterials(e),\n          n = {\n            hasSlicePlane: this.slicePlaneEnabled\n          };\n        if (o && r) {\n          if (this.nodeCrossfadingEnabled) {\n            Vt(a, this.getNodeOpacity(e));\n          }\n          return i.updateAllComponentMaterials(s, a, n, t).catch(e => It(e, this.i3slayer.title)), i.updateObjectVisibility(s, !0).catch(e => It(e, this.i3slayer.title)), i.updateAllVerticalOffsets(s, e.elevationOffsets).catch(e => It(e, this.i3slayer.title)), Promise.resolve(i);\n        }\n        return o && !r ? this._collection.addEdges(s, i, a, n).then(t => (e.edgeMemoryUsage = t, e.node.memory += t, i.updateAllVerticalOffsets(s, e.elevationOffsets).catch(e => It(e, this.i3slayer.title)), i)) : (!o && r && (e.node.memory -= e.edgeMemoryUsage, e.edgeMemoryUsage = 0, i.removeObject(s)), Promise.resolve(null));\n      }\n      _applyFiltersToNode(e) {\n        return !!this._applyFiltersToNodeComponents(e) && (h(this._labeler) && this._labeler.applyFilterChange(e), !0);\n      }\n      _applyFiltersToNodeComponents(e) {\n        const t = this._collection,\n          i = 0 === t.getComponentCount(e.objectHandle).invisible;\n        if (t.setAllComponentVisibilities(e.objectHandle, \"all\"), 0 === this._filters.length) return e.filteredIds = null, !i;\n        if (this._updateCachedFilteredIds(e), e.filteredIds === e.featureIds) return !i;\n        const s = this._computeFilteredComponentIndices(e);\n        return t.setAllComponentVisibilities(e.objectHandle, s), !0;\n      }\n      _updateCachedFilteredIds(e) {\n        null != e.filteredIds && e.appliedFilters === this._filters || (e.filteredIds = this._computeFilteredIds(e), e.appliedFilters = this._filters);\n      }\n      _computeFilteredIds(e) {\n        const t = e.featureIds.slice();\n        for (const i of this._filters) if (i(t, e), 0 === t.length) break;\n        return t.length === e.featureIds.length ? e.featureIds : t;\n      }\n      _computeFilteredComponentIndices(e) {\n        const t = new Array(),\n          i = e.filteredIds;\n        return h(i) && e.featureIds.forEach((e, s) => {\n          i[t.length] === e && t.push(s);\n        }), t;\n      }\n      _removeAllNodeDataFromStage() {\n        let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.elevationOffset;\n        this._nodeId2Meta.forEach((t, i) => this._removeNodeStageData(i, e)), this._nodeId2MetaReloading.forEach((t, i) => this._removeNodeStageData(i, e, this._nodeId2MetaReloading)), this._elevationTask = d(this._elevationTask);\n      }\n      removeNode(e) {\n        const t = this.elevationOffset;\n        this._removeNodeStageData(e, t), this._removeNodeStageData(e, t, this._nodeId2MetaReloading), h(this._elevationTask) && this._elevationTask.remove(e);\n      }\n      _removeNodeStageData(e, t) {\n        let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this._nodeId2Meta;\n        i.has(e) && this._controller.updateLoadStatus(e, !1);\n        const s = i.get(e);\n        c(s) ? i.delete(e) : (this._collection.setObjectVisibility(s.objectHandle, nt.Hidden), h(this._edgeView) && this._edgeView.hasObject(s.objectHandle) && this._edgeView.updateObjectVisibility(s.objectHandle, !1).catch(e => It(e, this.i3slayer.title)), this._visibleGeometryChanged(s, Mt.REMOVE), h(this._labeler) && this._labeler.removeNodeMeta(s), i.delete(e), this._highlights.objectDeleted(s), i === this._nodeId2Meta ? (this._cacheGPUData(s, t), this.nodeCrossfadingEnabled && this._crossfadeHelper.stopNodeFading(s)) : this._deleteComponentObject(s), h(this._treeDebugger) && this._treeDebugger.update());\n      }\n      _deleteComponentObject(e) {\n        if (h(this._edgeView) && this._edgeView.removeObject(e.objectHandle), this._memEstimateGeometryRemoved(e.objectHandle), this._collection.destroyObject(e.objectHandle), e.textures) for (const t of e.textures) this._memEstimateTextureRemoved(t), this._stage.remove(t);\n      }\n      updateNodeState(e, t) {\n        const i = this._nodeId2Meta.get(e);\n        h(i) && this._collection.updateMaterial(i.objectHandle, e => e.polygonOffsetEnabled = t === Re.Hole);\n      }\n      _invalidateAllSymbols() {\n        this._rendererVersion = We(this._rendererVersion, 1), this._controller && this._controller.requestUpdate();\n      }\n      _getInvalidRendererVersion() {\n        return We(this._rendererVersion, -1);\n      }\n      async _rendererChange(e) {\n        if (this._currentRenderer = e, this.notifyChange(\"rendererTextureUsage\"), this._rendererVersion = We(this._rendererVersion, 1), this._rendererFields = null, this._colorVariable = null, this._opacityVariable = null, this._invalidateAllSymbols(), e && (this._rendererFields = await e.getRequiredFields(this.i3slayer.fieldsIndex)), this._updateSymbologyFields(), !this._arcade && e && \"arcadeRequired\" in e && e.arcadeRequired && (this._arcade = await re()), e && \"visualVariables\" in e && e.visualVariables) for (const t of e.visualVariables) \"color\" === t.type ? this._colorVariable = t : \"opacity\" === t.type ? this._opacityVariable = t : mt.warn(`Unsupported visual variable type for 3D Object Scene Services: ${t.type}`);\n        if (e) for (const t of e.getSymbols()) \"mesh-3d\" !== t.type && mt.error(`Symbols of type '${t.type}' are not supported for 3D Object Scene Services.`);\n        this._controller && this._controller.requestUpdate();\n      }\n      _getCachedEdgeMaterials(e) {\n        return this._hasComponentData && e.cachedRendererVersion !== this._rendererVersion && this._updateCachedRendererData(e), e.cachedEdgeMaterials;\n      }\n      _getComponentParameters(e) {\n        this._hasComponentData && e.cachedRendererVersion !== this._rendererVersion && this._updateCachedRendererData(e);\n        const t = e.cachedSymbology;\n        return (i, s) => {\n          const r = 5 * i;\n          if (H(s.externalColor, t[r + 0] / 255, t[r + 1] / 255, t[r + 2] / 255, t[r + 3] / 255), h(this._stage.renderView.objectAndLayerIdRenderHelper)) {\n            const t = e.featureIds[i];\n            this._stage.renderView.objectAndLayerIdRenderHelper.setUidToObjectAndLayerId(t, t, this.layerId, this.layerUid + \"_\" + this.sublayerId, this.layerPopupEnabled, e.node.resources.attributes, i, this.sublayerId), s.objectAndLayerIdColor = this._stage.renderView.getObjectAndLayerIdColor({\n              graphicUid: t,\n              layerUid: this.layerUid + \"_\" + this.sublayerId\n            });\n          }\n          s.externalColorMixMode = t[r + 4] & (1 << ft.CastShadows) - 1, s.castShadows = 0 != (t[r + 4] & 1 << ft.CastShadows), s.pickable = 0 != (t[r + 4] & 1 << ft.Pickable), s.elevationOffset = e.elevationOffsets?.[i] ?? 0;\n        };\n      }\n      _getSymbolInfo(e, t) {\n        const i = e && e.getSymbol(t, {\n          arcade: this._arcade\n        });\n        if (!(i instanceof oe)) return null;\n        const s = i.id;\n        if (this._symbolInfos.has(s)) return this._symbolInfos.get(s);\n        const r = $e(i);\n        return this._symbolInfos.set(s, r), r;\n      }\n      _setSymbologyOverride(e, t) {\n        this._symbologyOverride !== e && (this._symbologyOverride = e, this._symbologyOverrideFields = t, this._invalidateAllSymbols(), this._updateSymbologyFields());\n      }\n      _updateSymbologyFields() {\n        this._symbologyFields = h(this._symbologyOverrideFields) && this._symbologyOverrideFields.length > 0 ? h(this._rendererFields) && this._rendererFields.length > 0 ? ee(this.i3slayer.fieldsIndex, [...this._rendererFields, ...this._symbologyOverrideFields]) : this._symbologyOverrideFields : this._rendererFields;\n      }\n      _updateCachedRendererData(e) {\n        if (e.cachedRendererVersion = this._rendererVersion, !this._hasComponentData) return;\n        const t = this._tmpAttributeOnlyGraphic,\n          i = {};\n        t.attributes = i;\n        const s = this._currentRenderer,\n          r = h(e.attributeInfo) && e.attributeInfo.attributeData,\n          o = null != e.featureIds ? this.i3slayer.objectIdField : null,\n          a = null != r && h(this._symbologyFields) && this._symbologyFields.length > 0;\n        let n = null,\n          l = null;\n        if (a && h(this._symbologyFields)) {\n          n = [], l = [];\n          for (const e of this._symbologyFields) {\n            const t = r[e];\n            t && (n.push(e), l.push(t));\n          }\n        }\n        e.cachedSymbology || (e.cachedSymbology = new Uint8Array(5 * e.featureIds.length));\n        const d = {\n            color: St,\n            castShadows: !0,\n            pickable: !0,\n            colorMixMode: et.Multiply,\n            edgeMaterial: null\n          },\n          u = this.fullOpacity,\n          _ = this.nodeCrossfadingEnabled ? this.getNodeOpacity(e) : u;\n        let m = null,\n          g = ut.OPAQUE,\n          p = Xe,\n          f = 0;\n        for (let b = 0; b < e.featureIds.length; b++) {\n          if (null != o && (i[o] = e.featureIds[b]), a && n) for (let e = 0; e < n.length; e++) i[n[e]] = qe(l[e], b);\n          const r = s ? this._getSymbolInfo(s, t) : null;\n          let u = null,\n            y = null;\n          if (s && \"visualVariables\" in s) {\n            if (this._colorVariable) {\n              const e = ie(this._colorVariable, t, {\n                color: jt,\n                arcade: this._arcade\n              });\n              e && (u = St, u[0] = e.r / 255, u[1] = e.g / 255, u[2] = e.b / 255, this._opacityVariable || null === e.a || (y = e.a));\n            }\n            this._opacityVariable && (y = se(this._opacityVariable, t, {\n              arcade: this._arcade\n            }));\n          }\n          if (r && r.material) {\n            const e = r.material;\n            u = c(u) || c(y) ? pe(u, y, e.color, e.alpha, gt, St) : pe(u, y, null, null, gt, St);\n          }\n          if (c(u) && (u = St, u[0] = 1, u[1] = 1, u[2] = 1, u[3] = 1), d.pickable = !0, d.castShadows = !r || r.castShadows, d.colorMixMode = r && r.material ? r.material.colorMixMode : et.Multiply, d.edgeMaterial = r ? r.edgeMaterial : null, h(this._symbologyOverride) && (d.color = u, this._symbologyOverride(t, d), u = d.color), h(d.edgeMaterial)) {\n            const t = u[3] <= 0 ? ut.INVISIBLE : u[3] >= 1 && (e.material.isOpaque || d.colorMixMode === et.Replace) ? ut.OPAQUE : ut.TRANSPARENT;\n            d.edgeMaterial === m && t === g || (p = {\n              ...d.edgeMaterial,\n              opacity: _,\n              objectTransparency: t\n            }, m = d.edgeMaterial, g = t), e.cachedEdgeMaterials[b] = p;\n          } else e.cachedEdgeMaterials[b] = Xe;\n          e.cachedSymbology[f + 0] = Math.round(255 * u[0]), e.cachedSymbology[f + 1] = Math.round(255 * u[1]), e.cachedSymbology[f + 2] = Math.round(255 * u[2]), e.cachedSymbology[f + 3] = Math.round(255 * u[3]), e.cachedSymbology[f + 4] = d.colorMixMode | +d.castShadows << ft.CastShadows | +d.pickable << ft.Pickable, f += 5;\n        }\n      }\n      _getFilteredEdgeMaterials(e) {\n        const t = this._getCachedEdgeMaterials(e);\n        this.nodeCrossfadingEnabled || Vt(t, this.fullOpacity);\n        const i = e.filteredIds;\n        if (c(i)) {\n          return {\n            hasEdges: t.some(e => e !== Xe),\n            perFeatureEdgeMaterials: t\n          };\n        }\n        let s = 0,\n          r = !1;\n        const o = t.map((t, o) => e.featureIds[o] !== i[s] ? Xe : (r = r || t !== Xe, s++, t));\n        return {\n          hasEdges: r,\n          perFeatureEdgeMaterials: o\n        };\n      }\n      _updateComponentData(e) {\n        if (!this._hasComponentData) return;\n        const t = e.objectHandle,\n          i = this._getComponentParameters(e);\n        this._collection.setComponentData(t, i), this._stage.renderView.requestRender();\n      }\n      _reloadAll() {\n        let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.elevationOffset;\n        this._removeAllNodeDataFromStage(e), null != this._controller && this._controller.restartNodeLoading();\n      }\n      _opacityChange(e) {\n        this.nodeCrossfadingEnabled && this._crossfadeHelper.stopAllNodeFading(), this._nodeId2Meta.forEach(t => {\n          c(t) || (this._collection.updateMaterial(t.objectHandle, t => t.objectOpacity = e), Vt(t.cachedEdgeMaterials, e), this._updateEdgeRendering(t));\n        });\n      }\n      _updateMaterial(e) {\n        this._collection.updateMaterial(e.objectHandle, e => {\n          e.commonMaterialParameters.hasSlicePlane = this.slicePlaneEnabled, e.usePBR = this._usePBR, this._updateMaterialOverlay(e);\n        });\n      }\n      _updateMaterialOverlay(e) {}\n      _updateEngineObject(e) {\n        this._updateComponentData(e), this._applyFiltersToNode(e), this._addOrUpdateEdgeRendering(e), this._visibleGeometryChanged(e, Mt.UPDATE);\n      }\n      _slicePlaneEnabledChange(e) {\n        this._intersectionHandler && (this._intersectionHandler.slicePlaneEnabled = e), h(this._labeler) && (this._labeler.slicePlaneEnabled = e), this._nodeId2Meta.forEach(t => {\n          c(t) || (this._collection.updateMaterial(t.objectHandle, t => t.commonMaterialParameters.hasSlicePlane = e), this._updateEdgeRendering(t, !1));\n        });\n      }\n      _updatePBR(e) {\n        this._nodeId2Meta.forEach(t => {\n          c(t) || this._collection.updateMaterial(t.objectHandle, t => t.usePBR = e);\n        }), this._hasLoadedPBRTextures = !0;\n      }\n      get _usePBR() {\n        return !this._isIntegratedMesh && this.view.qualitySettings.physicallyBasedRenderingEnabled;\n      }\n      _updateEdgeRendering(e) {\n        let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n        h(this._edgeView) && this._edgeView.hasObject(e.objectHandle) && this._addOrUpdateEdgeRendering(e, t);\n      }\n      _forAllNodes(e) {\n        this._nodeId2Meta.forEach(e);\n      }\n      _forAllFeatures(e, t) {\n        let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ce.VISIBLE_ONLY;\n        n(this._nodeId2Meta, s => {\n          if (c(s)) return !1;\n          if (h(t)) {\n            switch (t(s)) {\n              case he.EXIT:\n                return !0;\n              case he.SKIP:\n                return !1;\n            }\n          }\n          let r = he.CONTINUE;\n          switch (i) {\n            case ce.ALL:\n              r = this._forAllFeaturesOfNode(s, e);\n              break;\n            case ce.VISIBLE_ONLY:\n              r = this._forVisibleFeaturesOfNode(s, e);\n              break;\n            case ce.ALL_IN_CLIPPING_AREA:\n              r = this._forAllFeaturesOfNodeInClippingArea(s, e);\n          }\n          return r === he.EXIT;\n        });\n      }\n      _forAllFeaturesOfNode(e, t) {\n        let i = he.CONTINUE;\n        const s = e.featureIds;\n        for (let r = 0; r < s.length; r++) if (i = t(s[r], r, e), i === he.EXIT) return i;\n        return i;\n      }\n      _forVisibleFeaturesOfNode(e, t) {\n        let i = he.CONTINUE;\n        const s = e.featureIds;\n        return this._collection.forEachVisibleComponent(e.objectHandle, r => (i = t(s[r], r, e), i === he.CONTINUE)), i;\n      }\n      _forAllFeaturesOfNodeInClippingArea(e, t) {\n        if (c(this._renderClippingArea)) return this._forAllFeaturesOfNode(e, t);\n        const i = this._boundingRectNodeTest(e, this._renderClippingArea);\n        if (i === Ke.OUTSIDE) return he.CONTINUE;\n        if (i === Ke.INSIDE) return this._forAllFeaturesOfNode(e, t);\n        const s = he.CONTINUE,\n          r = e.featureIds,\n          o = e.objectHandle,\n          a = Ye(this._renderClippingArea, this._collection.getObjectTransform(o));\n        for (let n = 0; n < r.length; n++) {\n          if (!this._boundingRectFeatureTest(e, n, a)) continue;\n          const i = t(r[n], n, e);\n          if (i === he.EXIT) return i;\n        }\n        return s;\n      }\n      _createAttributes(e, t) {\n        const i = {};\n        null != t.featureIds && (i[this._getObjectIdField()] = t.featureIds[e]);\n        const s = h(t.attributeInfo) && t.attributeInfo.attributeData;\n        if (h(s)) for (const r of Object.keys(s)) i[r] = qe(s[r], e);\n        return i;\n      }\n      _createGraphic(e, t) {\n        return this._createLayerGraphic(this._createAttributes(e, t));\n      }\n      highlight(e) {\n        const t = this._highlights;\n        if (\"number\" == typeof e || e instanceof i ? e = [e] : e instanceof o && (e = e.toArray()), Array.isArray(e) && e.length > 0) {\n          if (e[0] instanceof i) {\n            const i = e,\n              s = this.i3slayer.fieldsIndex,\n              r = this._getObjectIdField(),\n              o = i.map(e => Ze(s, e.attributes, r)),\n              {\n                set: a,\n                handle: n\n              } = t.acquireSet();\n            return t.setFeatureIds(a, o), n;\n          }\n          if (\"number\" == typeof e[0]) {\n            const i = e,\n              {\n                set: s,\n                handle: r\n              } = t.acquireSet();\n            return t.setFeatureIds(s, i), r;\n          }\n        }\n        return Ft;\n      }\n      resetHighlights() {\n        d(this._highlights), this._highlights = new ve({\n          collection: this._collection,\n          forAllFeatures: e => this._forAllFeatures(e, null, ce.ALL),\n          forAllFeaturesOfNode: (e, t) => this._forAllFeaturesOfNode(e, t)\n        });\n      }\n      _visibleGeometryChanged(e, t) {\n        this._elevationProvider && (this._elevationProvider.objectChanged(e.node), null == this._visibleGeometryChangedSchedulerHandle && (this._visibleGeometryChangedSchedulerHandle = y(() => {\n          this.emit(\"visible-geometry-changed\"), this._visibleGeometryChangedSchedulerHandle = null;\n        })), this._updateSnappingSources(e, t));\n      }\n      get performanceInfo() {\n        const e = {\n          displayedNumberOfFeatures: 0,\n          maximumNumberOfFeatures: 0,\n          totalNumberOfFeatures: 0,\n          core: null,\n          index: 0,\n          nodes: this._nodeId2Meta.size,\n          \"Total GPU Memory Estimate\": (this._gpuMemoryEstimate / 1048576).toFixed(1) + \"MB\",\n          \"Geometry Memory Estimate\": (this._geoMemoryEstimate / 1048576).toFixed(1) + \"MB\",\n          \"Texture Memory Estimate\": (this._texMemoryEstimate / 1048576).toFixed(1) + \"MB\",\n          \"Unloaded Memory Estimate\": (this.getUnloadedMemory() / 1048576).toFixed(1) + \"MB\"\n        };\n        return h(this._memCache) && (e.MemCache = Math.round(100 * this._memCache.hitRate) + \"% hit\"), this._controller && (this._idbCacheEnabled && (e.IDBCache = Math.round(100 * this._idbCache.getHitRate()) + \"% hit\"), this._controller.updateStats(e)), e;\n      }\n      get test() {\n        const e = this;\n        return {\n          controller: this._controller,\n          labeler: this._labeler,\n          get visibleObjectIds() {\n            const t = [];\n            return e._forAllFeatures(e => (t.push(e), he.CONTINUE), null, ce.VISIBLE_ONLY), t.sort((e, t) => e - t), t;\n          },\n          get numNodes() {\n            return e._nodeId2Meta.size;\n          },\n          get loadedNodes() {\n            return Array.from(e._nodeId2Meta.keys()).sort((e, t) => e - t);\n          }\n        };\n      }\n      getNodeOpacityByIndex(e) {\n        const t = this._nodeId2Meta.get(e);\n        return this.getNodeOpacity(t);\n      }\n      getNodeOpacity(e) {\n        return h(e) ? this._collection.getMaterial(e.objectHandle).objectOpacity : 0;\n      }\n      isNodeFullyFadedIn(e) {\n        return this._crossfadeHelper.isNodeFullyFadedIn(e);\n      }\n      getNodeCrossfadeMetaData(e) {\n        return this._nodeId2Meta.get(e);\n      }\n      markNodeToRemove(e) {\n        this._controller && this._controller.markNodeToRemove(e);\n      }\n      removeMarkedNodes() {\n        this._controller && this._controller.removeMarkedNodes();\n      }\n      foreachCrossfadeNode(e) {\n        this._nodeId2Meta.forEach((t, i) => e(i, t));\n      }\n      fadeNode(e, t, i) {\n        if (!this.nodeCrossfadingEnabled) return;\n        const s = this._nodeId2Meta.get(e);\n        h(s) && this._crossfadeHelper.fadeNode(e, s, t, i);\n      }\n      setNodeOpacityByIndex(e, t) {\n        const i = this._nodeId2Meta.get(e);\n        h(i) && this._setNodeOpacity(i, t);\n      }\n      _setNodeOpacity(e, t) {\n        this._collection.updateMaterial(e.objectHandle, e => e.objectOpacity = t), this._setNodeEdgeOpacity(e, t);\n      }\n      _setNodeEdgeOpacity(e, t) {\n        if (c(this._edgeView) || !e.cachedEdgeMaterials) return;\n        Vt(e.cachedEdgeMaterials, t);\n        const i = e.objectHandle;\n        this._edgeView.hasObject(i) && this._edgeView.updateAllComponentOpacities(i, t).catch(e => It(e, this.i3slayer.title));\n      }\n      get hasModifications() {\n        return this._isIntegratedMesh && h(this._layerClippingArea) || this._modifications && this._modifications.length > 0;\n      }\n      updateNodeModificationStatus(e) {\n        const t = e.length;\n        if (!this.hasModifications || t <= 0 || !0 !== this._i3sWasmLoaded) return;\n        const i = this.uid,\n          s = Pt(e);\n        if (h(s)) {\n          const t = {\n            context: i,\n            buffer: s.buffer\n          };\n          me(t);\n          const r = new Float64Array(s.buffer);\n          e.forAll((e, t) => {\n            const i = r[t],\n              s = ge(i);\n            e.imModificationImpact = s, s !== De.Unmodified && this._controller.invalidateGeometryVisibility(e.index);\n          });\n        }\n      }\n      notifyUpdate() {\n        this.notifyChange(\"updating\");\n      }\n      notifyLODUpdate() {\n        this._controller.notifyLODUpdate();\n      }\n      isUpdating() {\n        return !(!this._controller || !this._controller.updating) || !!this._visibleGeometryChangedSchedulerHandle || h(this._labeler) && this._labeler.updating || this._crossfadeHelper.updating || this._i3sWasmLoaded instanceof Promise || this._asyncModuleLoading > 0 || h(this._elevationTask) && this._elevationTask.running;\n      }\n      trackSnappingSources(e) {\n        const t = {\n          events: e,\n          fetchEdgeLocations: async (e, t, i) => {\n            const s = this._nodeId2Meta.get(e);\n            if (c(s)) throw new Error(\"invalid-node\");\n            const {\n              origin: r,\n              buffer: o\n            } = await this._collection.extractEdgeInformation(s.objectHandle, t, i);\n            return this._snappingLocationsApplyElevation(s, o, r), {\n              type: \"components\",\n              objectIds: s.featureIds,\n              locations: o,\n              origin: r\n            };\n          },\n          remove: () => {\n            s(this._snappingSourcesTrackers, t);\n          }\n        };\n        return this._snappingSourcesTrackers.push(t), this._nodeId2Meta.forEach((t, i) => {\n          if (c(t)) return;\n          const s = this._controller.getRenderMbs(t.node);\n          h(s) && e.add(i, s);\n        }), t;\n      }\n      _snappingLocationsApplyElevation(e, t, i) {\n        if (!e.elevationOffsets || this.elevationInfo.mode === Ut.Absolute) return;\n        const s = t.position0,\n          r = t.position1,\n          o = t.componentIndex,\n          a = U(),\n          n = U(),\n          l = (e, t) => {\n            N(e, e, i), this.view.renderCoordsHelper.worldUpAtPosition(e, n), N(e, e, F(n, n, t)), V(e, e, i);\n          };\n        for (let d = 0; d < s.count; d++) {\n          const t = e.elevationOffsets[o.get(d)];\n          s.getVec(d, a), l(a, t), s.setVec(d, a), r.getVec(d, a), l(a, t), r.setVec(d, a);\n        }\n      }\n      _updateSnappingSources(e, t) {\n        const {\n            index: i\n          } = e.node,\n          s = this._controller.getRenderMbs(e.node);\n        if (!c(s)) for (const r of this._snappingSourcesTrackers) t !== Mt.REMOVE && t !== Mt.UPDATE || r.events.remove(i), t !== Mt.ADD && t !== Mt.UPDATE || r.events.add(i, s);\n      }\n    };\n    return e([M()], r.prototype, \"_hasLoadedPBRTextures\", void 0), e([M()], r.prototype, \"_asyncModuleLoading\", void 0), e([M()], r.prototype, \"_visibleGeometryChangedSchedulerHandle\", void 0), e([M()], r.prototype, \"view\", void 0), e([M()], r.prototype, \"i3slayer\", void 0), e([M()], r.prototype, \"_controller\", void 0), e([M()], r.prototype, \"_labeler\", void 0), e([M()], r.prototype, \"updating\", void 0), e([M()], r.prototype, \"suspended\", void 0), e([M()], r.prototype, \"holeFilling\", void 0), e([M(ot)], r.prototype, \"updatingProgress\", void 0), e([M()], r.prototype, \"updatingProgressValue\", null), e([M()], r.prototype, \"hasTexturesOrVertexColors\", null), e([M()], r.prototype, \"rendererTextureUsage\", null), e([M()], r.prototype, \"elevationOffset\", null), e([M()], r.prototype, \"elevationInfo\", null), e([M({\n      type: Boolean\n    })], r.prototype, \"slicePlaneEnabled\", void 0), e([M()], r.prototype, \"supportedTextureEncodings\", null), e([M()], r.prototype, \"uncompressedTextureDownsamplingEnabled\", null), e([M({\n      type: [te]\n    })], r.prototype, \"_modifications\", void 0), e([M()], r.prototype, \"_elevationTask\", void 0), e([M({\n      readOnly: !0\n    })], r.prototype, \"_usePBR\", null), r = e([C(_t)], r), r;\n  };\nfunction It(e, t) {\n  m(e) || mt.warn(\"Error while processing edges. Edges on this layer might not display correctly\", t, e);\n}\nvar Mt;\n!function (e) {\n  e[e.ADD = 0] = \"ADD\", e[e.REMOVE = 1] = \"REMOVE\", e[e.UPDATE = 2] = \"UPDATE\";\n}(Mt || (Mt = {}));\nconst Ct = K(),\n  xt = Y(),\n  Ot = Y(),\n  Et = st(),\n  St = [0, 0, 0, 0],\n  jt = new t([0, 0, 0, 0]),\n  wt = [0, 0, 0, 0];\nfunction Tt(e) {\n  if (c(e)) return !1;\n  const t = e.metallicRoughness;\n  return t && t.baseColorTextureId >= 0 || t && t.metallicRoughnessTextureId >= 0 || e.normalTextureId >= 0 || e.emissiveTextureId >= 0 || e.occlusionTextureId >= 0;\n}\nfunction At(e) {\n  return \"geometryData\" in e;\n}\nfunction Dt(e) {\n  return h(e) && v(e.data);\n}\nfunction Rt(e, t) {\n  let i = 1024 + e.interleavedVertexData.byteLength + (e.indices ? e.indices.byteLength : 0) + e.positionData.data.byteLength + e.positionData.indices.byteLength;\n  if (h(t)) for (const s of t) h(s) && v(s.data) && (i += s.data.byteLength);\n  return i;\n}\nfunction Nt(e, t) {\n  return t.byteSize > yt ? (mt.warn(`Node is too big to store in IndexedDB cache: ${e.id} (${t.byteSize} bytes)`), !1) : t.byteSize > 0;\n}\nfunction Pt(e) {\n  if (0 === e.length) return null;\n  const t = 10 * e.length,\n    i = new Float64Array(t);\n  return e.forAll((e, t) => {\n    let s = e.serviceObb;\n    c(s) && (s = Et, P(s.center, e.mbs), s.halfSize[0] = s.halfSize[1] = s.halfSize[2] = e.mbs[3]);\n    const r = 10 * t;\n    i[r + 0] = s.center[0], i[r + 1] = s.center[1], i[r + 2] = s.center[2], i[r + 3] = s.halfSize[0], i[r + 4] = s.halfSize[1], i[r + 5] = s.halfSize[2], i[r + 6] = s.quaternion[0], i[r + 7] = s.quaternion[1], i[r + 8] = s.quaternion[2], i[r + 9] = s.quaternion[3];\n  }), i;\n}\nconst Ft = {\n  remove() {},\n  pause() {},\n  resume() {}\n};\nfunction Vt(e, t) {\n  e.forEach(e => e.opacity = t);\n}\nvar Ut;\n!function (e) {\n  e[e.Absolute = 0] = \"Absolute\", e[e.RelativeToGround = 1] = \"RelativeToGround\", e[e.OnTheGround = 2] = \"OnTheGround\";\n}(Ut || (Ut = {}));\nconst Ht = U(),\n  Gt = K(),\n  Lt = \"elevation-change\";\nexport { Ut as ElevationMode, vt as I3SMeshView3D };","map":{"version":3,"names":["_","e","t","i","removeUnordered","s","ByteSizeUnit","r","o","has","a","someMap","n","unwrapOr","l","destroyMaybe","d","isSome","h","isNone","c","applySome","u","isAbortError","m","throwIfAborted","g","createResolver","p","initial","f","watch","b","schedule","y","isArrayBuffer","v","getMetersPerVerticalUnitForSR","I","property","M","subclass","C","x","O","E","D","S","j","w","T","A","R","N","P","F","V","U","H","G","projectBuffer","L","getProjectorName","k","localLinearScaleFactors","B","projectVectorToVector","q","projectBoundingSphere","z","create","K","empty","W","expandWithBuffer","$","toRect","X","Y","intersects","Q","fallbackObjectIDAttribute","J","Z","fixFields","ee","te","getColor","ie","getOpacity","se","loadArcade","re","oe","getMetersPerUnit","ae","ne","I3SMeshWorkerHandle","le","toWasmModification","de","ForAllFeaturesReturnType","he","ForAllFeaturesVisibilityMode","ce","initialize","ue","setModificationsSync","_e","filterObbsForModificationsSync","me","interpretObbModificationResults","ge","overrideColor","pe","areLabelsVisible","fe","TextureUsage","be","TextureEncoding","ye","ve","I3SAsyncElevationUpdater","Ie","I3SCrossfadeHelper","Me","NodeCrossfadeMetaData","Ce","xe","boundingBoxCornerPoints","Oe","I3SIntersectionHandler","Ee","getSupportedEncodings","Se","selectEncoding","je","defaultMaterial","we","createTexture","Te","configureMaterial","Ae","NodeIMModificationImpact","De","NodeState","Re","I3SOverrides","Ne","computeGlobalTransformation","Pe","getLocalOrigin","Fe","rendererNeedsTextures","Ve","checkSceneLayerValid","Ue","checkSceneLayerCompatibleWithView","He","getCacheKeySuffix","Ge","whenGraphicAttributes","Le","computeVisibilityObb","ke","filterInPlace","Be","getCachedAttributeValue","qe","intersectBoundingRectWithMbs","ze","MbsIntersectResult","Ke","addWraparound","We","getSymbolInfo","$e","transparentEdgeMaterial","Xe","getClipRect","Ye","IDBCache","Qe","IDBMockCache","Je","attributeLookup","Ze","ColorMixModeEnum","et","tt","toBoundingRect","it","st","clone","rt","updatingProgress","ot","glLayout","at","State","nt","createVertexBufferLayout","lt","TextureCoordinateAttributeType","dt","loadBasis","ht","newDoubleArray","ct","Transparency","ut","_t","mt","getLogger","gt","pt","constructor","node","featureIds","objectHandle","cachedRendererVersion","attributeInfo","material","textures","cachedMidsTerrainSR","cachedEdgeMaterials","Array","edgeMemoryUsage","cachedSymbology","ft","CastShadows","Pickable","bt","yt","MEGABYTES","vt","_len","arguments","length","_key","_nodeId2Meta","Map","_nodeId2MetaReloading","_i3sWasmLoaded","_snappingSourcesTrackers","_hasLoadedPBRTextures","_asyncModuleLoading","_addTasks","_currentRenderer","_rendererVersion","_colorVariable","_opacityVariable","_rendererFields","_symbologyFields","_symbologyOverride","_symbologyOverrideFields","_symbolInfos","_visibleGeometryChangedSchedulerHandle","_idbCache","_hasComponentData","_hasVertexColors","holeFilling","_hasColors","_hasTextures","_hasData","slicePlaneEnabled","_modifications","_layerUrl","_cacheKeySuffix","_elevationTask","_filters","_arcade","_tmpAttributeOnlyGraphic","_crossfadeHelper","lodCrossfadeoutDuration","lodCrossfadeinDuration","lodCrossfadeUncoveredDuration","layerUid","i3slayer","uid","sublayerUid","layerId","id","sublayerId","updatingProgressValue","_controller","hasTexturesOrVertexColors","rendererTextureUsage","_usePBR","AllTexturesPBR","AllTextures","GeometryTexturesPBR","GeometryTextures","elevationOffset","elevationInfo","mode","spatialReference","unit","offset","Ut","Absolute","RelativeToGround","OnTheGround","supportedTextureEncodings","view","_stage","renderView","capabilities","uncompressedTextureDownsamplingEnabled","qualitySettings","sceneService","DDS_S3TC","_preLoadBasis","addResolvingPromise","indexInfo","resourceController","memoryController","i3sOverrides","layer","_worker","immediate","promise","store","setLegacySchema","defaultGeometrySchema","parsedUrl","path","layerView","_gpuMemoryEstimate","_texMemoryEstimate","_geoMemoryEstimate","_collection","componentObjectCollection","resetHighlights","_isIntegratedMesh","featureAttributes","faceRange","vertexAttributes","color","cachedDrawingInfo","_edgeView","renderer","ensureEdgeView","newCache","_deleteComponentObject","_memCache","index","rootNode","traverse","get","_intersectionHandler","collection","isGround","traverseNodeHierarchy","updatingHandles","add","_elevationProvider","intersectionHandler","clippingArea","_clippingAreaChanged","fullOpacity","_opacityChange","_slicePlaneEnabledChange","_reloadAll","invalidateVisibilityObbs","_elevationInfoChanged","suspended","handles","basemapTerrain","on","_ref","extent","_ensureElevationTask","addExtent","Lt","remove","_updatePBR","clearMemCache","_suspendedChange","labelsVisible","_labelingChanged","labelingInfo","_modificationsChanged","I3S_TREE_SHOW_TILES","_treeDebugger","crsIndex","then","_ref2","I3STreeDebugger","lv","nodeSR","I3S_SHOW_MODIFICATIONS","_showModifications","renderSpatialReference","init","catch","warn","destroy","_clearAddTasks","layerChanged","elevationProvider","unregister","sceneIntersectionHelper","removeIntersectionHandler","destroyContext","_removeAllNodeDataFromStage","_labeler","_highlights","clear","emit","_memEstimateTextureAdded","estimatedTexMemRequired","_memEstimateTextureRemoved","_memEstimateGeometryAdded","getObjectGPUMemoryUsage","_memEstimateGeometryRemoved","isNodeLoaded","isNodeReloading","getUsedMemory","usedMemory","forEach","memory","getUnloadedMemory","unloadedMemoryEstimate","ignoresMemoryFactor","_supportsLabeling","_addMetaToLabeler","_loadAsyncModule","hasModifications","notifyUpdate","setModifications","_layerClippingArea","context","modifications","isGeodetic","isGeographic","modificationsChanged","delete","updateLoadStatus","set","push","updateNodeModificationStatus","forAll","imModificationImpact","Culled","invalidateGeometryVisibility","restartNodeLoading","_modificationGraphics","graphics","removeMany","clip","mask","replace","type","outline","width","geometry","symbol","addMany","addNodeMeta","_createAttributes","register","_elevationContext","addIntersectionHandler","getLoadedAttributes","loadedAttributes","getAttributeData","attributeData","setAttributeData","_attributeValuesChanged","updateAttributes","apply","reschedule","_getInvalidRendererVersion","filteredIds","setNodeMetaAttributes","_updateEngineObject","getVisibleNodes","getNodeComponentObb","getComponentObb","getLoadedNodeIndices","Basis","textureSetDefinitions","some","formats","format","_getVertexBufferLayout","hasTexture","Tt","params","hasNormals","normal","hasRegions","uvRegion","_getGeometryParameters","_getObjectIdField","objectIdField","_findGraphicNodeAndIndex","fieldsIndex","attributes","indexOf","_getGraphicIndices","whenGraphicBounds","Promise","reject","_getAABB","resolve","boundingBox","screenSpaceObjects","getAABBFromIntersectorTarget","nodeIndex","componentIndex","values","filter","getGraphicFromIntersectorTarget","_createGraphic","_getCacheKey","_getMemCacheKey","undefined","_idbCacheEnabled","disableIDBCache","loadCachedGPUData","pop","deleteCachedGPUData","_cacheGPUData","indexDepth","level","put","loadMissingTextures","usage","encodings","data","encoding","loadCachedNodeData","nodeVersion","version","geometryObb","requiredTextures","textureData","initialized","byteSize","Rt","transformedGeometry","every","Dt","Nt","addNode","At","geometryBuffer","_addNodeMeta","_addData","attributeDataInfo","_transformNode","_safeReschedule","_addCachedNodeData","obb","componentOffsets","mbs","center","extents","orientation","geometryData","from","globalTrafo","map","geometries","geometryDescriptor","crsVertex","layouts","localOrigin","serviceObb","needNormals","isMeshPyramid","normalReferenceFrame","indexToVertexProjector","vertexToRenderProjector","invoke","_supportsNodeCrossFading","shadowsEnabled","nodeCrossfadingEnabled","nodeFadeoutEnabled","_setNewNodeOpacity","_setNodeOpacity","addCachedGPUData","isGeometryVisible","updateNodeState","setObjectVisibility","Visible","_updateMaterial","objectCreated","update","addCachedNodeData","_removeNodeStageData","KTX2","layout","indices","interleavedVertexData","positionData","hasColors","_materialParameters","Uint32Array","byteLength","stride","vertices","count","layoutParameters","geometryParams","positions","transformation","errorOnce","createObject","toMapSpace","transform","position","rotationScale","textureCoordinates","Atlas","texturePromise","_initMaterialAndTextures","reduce","hasParametersFromSource","alphaMode","metallicRoughness","baseColorFactor","isOpaque","meta","_ref3","ColorTextures","resources","texture","notifyChange","all","_addOrUpdateEdgeRendering","_ref4","updateObjectVisibility","It","title","_updateElevationOffsets","elevationOffsets","_updateComponentData","_applyFiltersToNode","_visibleGeometryChanged","Mt","ADD","error","lodCrossfadeProgress","Vt","getObjectTransform","Ht","Gt","renderCoordsHelper","getComponentAabb","getAltitude","getElevations","scheduler","updateElevationChanged","_nodeElevationAlignmentChanged","updateElevationAlignState","state","viewingMode","removeAllGeometryObbs","_updateEdgeRendering","updateLabelPositions","_updateSnappingSources","UPDATE","name","updateMaterial","textureRepository","usePBR","isIntegratedMesh","viewSpatialReference","_updateMaterialOverlay","Default","None","colors","normals","_renderClippingArea","_filterChange","updateClippingArea","hasGeometryFilter","_geometryFilterChange","geometryFilterChanged","_applyFilters","getFilters","requestUpdate","_boundingRectFilter","addSqlFilter","fieldNames","_sqlFilter","_createLayerGraphic","testFeature","_boundingRectNodeTest","wt","_boundingRectFeatureTest","Ct","xt","INSIDE","OUTSIDE","getComponentCount","invisible","visible","_transformClippingArea","Ot","hasObject","hasEdges","perFeatureEdgeMaterials","_getFilteredEdgeMaterials","hasSlicePlane","getNodeOpacity","updateAllComponentMaterials","updateAllVerticalOffsets","addEdges","removeObject","_applyFiltersToNodeComponents","applyFilterChange","setAllComponentVisibilities","_updateCachedFilteredIds","_computeFilteredComponentIndices","appliedFilters","_computeFilteredIds","slice","removeNode","Hidden","REMOVE","removeNodeMeta","objectDeleted","stopNodeFading","destroyObject","polygonOffsetEnabled","Hole","_invalidateAllSymbols","_rendererChange","getRequiredFields","_updateSymbologyFields","arcadeRequired","visualVariables","getSymbols","_getCachedEdgeMaterials","_updateCachedRendererData","_getComponentParameters","externalColor","objectAndLayerIdRenderHelper","setUidToObjectAndLayerId","layerPopupEnabled","objectAndLayerIdColor","getObjectAndLayerIdColor","graphicUid","externalColorMixMode","castShadows","pickable","_getSymbolInfo","getSymbol","arcade","_setSymbologyOverride","Uint8Array","St","colorMixMode","Multiply","edgeMaterial","OPAQUE","jt","alpha","INVISIBLE","Replace","TRANSPARENT","opacity","objectTransparency","Math","round","setComponentData","requestRender","stopAllNodeFading","objectOpacity","commonMaterialParameters","physicallyBasedRenderingEnabled","_forAllNodes","_forAllFeatures","VISIBLE_ONLY","EXIT","SKIP","CONTINUE","ALL","_forAllFeaturesOfNode","_forVisibleFeaturesOfNode","ALL_IN_CLIPPING_AREA","_forAllFeaturesOfNodeInClippingArea","forEachVisibleComponent","Object","keys","highlight","toArray","isArray","handle","acquireSet","setFeatureIds","Ft","forAllFeatures","forAllFeaturesOfNode","objectChanged","performanceInfo","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","core","nodes","size","toFixed","MemCache","hitRate","getHitRate","updateStats","test","controller","labeler","visibleObjectIds","sort","numNodes","loadedNodes","getNodeOpacityByIndex","getMaterial","isNodeFullyFadedIn","getNodeCrossfadeMetaData","markNodeToRemove","removeMarkedNodes","foreachCrossfadeNode","fadeNode","setNodeOpacityByIndex","_setNodeEdgeOpacity","updateAllComponentOpacities","Pt","buffer","Float64Array","Unmodified","notifyLODUpdate","isUpdating","updating","running","trackSnappingSources","events","fetchEdgeLocations","Error","origin","extractEdgeInformation","_snappingLocationsApplyElevation","objectIds","locations","getRenderMbs","position0","position1","worldUpAtPosition","getVec","setVec","prototype","Boolean","readOnly","Et","baseColorTextureId","metallicRoughnessTextureId","normalTextureId","emissiveTextureId","occlusionTextureId","halfSize","quaternion","pause","resume","ElevationMode","I3SMeshView3D"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/I3SMeshView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import i from\"../../../Graphic.js\";import{removeUnordered as s}from\"../../../core/arrayUtils.js\";import{ByteSizeUnit as r}from\"../../../core/byteSizeEstimations.js\";import o from\"../../../core/Collection.js\";import has from\"../../../core/has.js\";import a from\"../../../core/Logger.js\";import{someMap as n}from\"../../../core/MapUtils.js\";import{unwrapOr as l,destroyMaybe as d,isSome as h,isNone as c,applySome as u}from\"../../../core/maybe.js\";import _ from\"../../../core/PooledArray.js\";import{isAbortError as m,throwIfAborted as g,createResolver as p}from\"../../../core/promiseUtils.js\";import{initial as f,watch as b}from\"../../../core/reactiveUtils.js\";import{schedule as y}from\"../../../core/scheduling.js\";import{isArrayBuffer as v}from\"../../../core/typedArrayUtil.js\";import{getMetersPerVerticalUnitForSR as I}from\"../../../core/unitUtils.js\";import{property as M}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as C}from\"../../../core/accessorSupport/decorators/subclass.js\";import{f as x}from\"../../../chunks/mat3.js\";import{c as O}from\"../../../chunks/mat3f32.js\";import{m as E,D as S}from\"../../../chunks/mat4.js\";import{b as j,c as w}from\"../../../chunks/mat4f64.js\";import{f as T}from\"../../../chunks/quatf64.js\";import{m as A,s as D,t as R,a as N,c as P,g as F,b as V}from\"../../../chunks/vec3.js\";import{c as U}from\"../../../chunks/vec3f64.js\";import{s as H}from\"../../../chunks/vec4.js\";import{f as G}from\"../../../chunks/vec4f64.js\";import{projectBuffer as L,getProjectorName as k,localLinearScaleFactors as B,projectVectorToVector as q,projectBoundingSphere as z}from\"../../../geometry/projection.js\";import{create as K,empty as W,expandWithBuffer as $,toRect as X}from\"../../../geometry/support/aaBoundingBox.js\";import{create as Y,intersects as Q}from\"../../../geometry/support/aaBoundingRect.js\";import{fallbackObjectIDAttribute as J}from\"../../../layers/LayerConstants.js\";import Z from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import{fixFields as ee}from\"../../../layers/support/fieldUtils.js\";import te from\"../../../layers/support/SceneModification.js\";import{getColor as ie,getOpacity as se}from\"../../../renderers/visualVariables/support/visualVariableUtils.js\";import{loadArcade as re}from\"../../../support/arcadeOnDemand.js\";import oe from\"../../../symbols/Symbol3D.js\";import{getMetersPerUnit as ae}from\"../../../symbols/support/unitConversionUtils.js\";import ne from\"./I3SMeshViewLabeler.js\";import{I3SMeshWorkerHandle as le,toWasmModification as de}from\"./I3SMeshWorkerHandle.js\";import{ForAllFeaturesReturnType as he,ForAllFeaturesVisibilityMode as ce}from\"./II3SMeshView3D.js\";import{initialize as ue,setModificationsSync as _e,filterObbsForModificationsSync as me,interpretObbModificationResults as ge}from\"./SceneLayerWorker.js\";import{overrideColor as pe}from\"./graphics/graphicUtils.js\";import{areLabelsVisible as fe}from\"./graphics/Labeler.js\";import{TextureUsage as be,TextureEncoding as ye}from\"./i3s/enums.js\";import ve from\"./i3s/Highlights.js\";import{I3SAsyncElevationUpdater as Ie}from\"./i3s/I3SAsyncElevationUpdater.js\";import{I3SCrossfadeHelper as Me,NodeCrossfadeMetaData as Ce}from\"./i3s/I3SCrossfadeHelper.js\";import xe from\"./i3s/I3SElevationProvider.js\";import{boundingBoxCornerPoints as Oe}from\"./i3s/I3SGeometryUtil.js\";import{I3SIntersectionHandler as Ee}from\"./i3s/I3SIntersectionHandler.js\";import{getSupportedEncodings as Se,selectEncoding as je,defaultMaterial as we,createTexture as Te,configureMaterial as Ae}from\"./i3s/I3SMaterialUtil.js\";import{NodeIMModificationImpact as De,NodeState as Re}from\"./i3s/I3SNode.js\";import{I3SOverrides as Ne}from\"./i3s/I3SOverrides.js\";import{computeGlobalTransformation as Pe,getLocalOrigin as Fe}from\"./i3s/I3SProjectionUtil.js\";import{rendererNeedsTextures as Ve,checkSceneLayerValid as Ue,checkSceneLayerCompatibleWithView as He,getCacheKeySuffix as Ge,whenGraphicAttributes as Le,computeVisibilityObb as ke,filterInPlace as Be,getCachedAttributeValue as qe,intersectBoundingRectWithMbs as ze,MbsIntersectResult as Ke,addWraparound as We,getSymbolInfo as $e,transparentEdgeMaterial as Xe,getClipRect as Ye}from\"./i3s/I3SUtil.js\";import{IDBCache as Qe}from\"./i3s/IDBCache.js\";import{IDBMockCache as Je}from\"./i3s/IDBMockCache.js\";import{attributeLookup as Ze}from\"./support/attributeUtils.js\";import{ColorMixModeEnum as et}from\"./support/symbolColorUtils.js\";import tt from\"../support/debugFlags.js\";import{toBoundingRect as it}from\"../support/extentUtils.js\";import{create as st,clone as rt}from\"../support/orientedBoundingBox.js\";import{updatingProgress as ot}from\"../support/updatingProperties.js\";import{glLayout as at}from\"../support/buffer/glUtil.js\";import{State as nt}from\"../webgl-engine/collections/Component/ComponentObject.js\";import{createVertexBufferLayout as lt}from\"../webgl-engine/collections/Component/SourceGeometry.js\";import{TextureCoordinateAttributeType as dt}from\"../webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{loadBasis as ht}from\"../webgl-engine/lib/BasisUtil.js\";import{newDoubleArray as ct}from\"../webgl-engine/lib/DoubleArray.js\";import{Transparency as ut}from\"../webgl-engine/lib/edgeRendering/interfaces.js\";const _t=\"esri.views.3d.layers.I3SMeshView3D\",mt=a.getLogger(_t),gt=[1,1,1,1];class pt extends Ce{constructor(e,t,i,s,r,o,a){super(),this.node=e,this.featureIds=t,this.objectHandle=i,this.cachedRendererVersion=s,this.attributeInfo=r,this.material=o,this.textures=a,this.cachedMidsTerrainSR=null,this.cachedEdgeMaterials=new Array,this.edgeMemoryUsage=0,this.cachedSymbology=null}}var ft;!function(e){e[e.CastShadows=4]=\"CastShadows\",e[e.Pickable=5]=\"Pickable\"}(ft||(ft={}));const bt=19,yt=100*r.MEGABYTES,vt=t=>{let r=class extends t{constructor(...e){super(e),this._nodeId2Meta=new Map,this._nodeId2MetaReloading=new Map,this._i3sWasmLoaded=!1,this._snappingSourcesTrackers=[],this._hasLoadedPBRTextures=!1,this._asyncModuleLoading=0,this._addTasks=new Map,this._currentRenderer=null,this._rendererVersion=0,this._colorVariable=null,this._opacityVariable=null,this._rendererFields=null,this._symbologyFields=null,this._symbologyOverride=null,this._symbologyOverrideFields=null,this._symbolInfos=new Map,this._visibleGeometryChangedSchedulerHandle=null,this._idbCache=has(\"enable-feature:idb-mock-cache\")?new Je:new Qe(\"esri-scenelayer-cache\",\"geometries\"),this._hasComponentData=!1,this._hasVertexColors=!1,this.holeFilling=\"auto\",this._hasColors=!1,this._hasTextures=!1,this._hasData=!1,this.slicePlaneEnabled=!1,this._modifications=new Array,this._layerUrl=\"\",this._cacheKeySuffix=null,this._elevationTask=null,this._filters=[],this._arcade=null,this._tmpAttributeOnlyGraphic=new i(null,null,{}),this._crossfadeHelper=new Me(this)}get lodCrossfadeoutDuration(){return 0}get lodCrossfadeinDuration(){return 0}get lodCrossfadeUncoveredDuration(){return 0}get layerUid(){return this.i3slayer&&this.i3slayer.uid}get sublayerUid(){return null}get layerId(){return this.i3slayer&&this.i3slayer.id}get sublayerId(){return null}get updatingProgressValue(){return this._controller?.updatingProgress??0}get hasTexturesOrVertexColors(){return this._hasData?this._hasTextures||this._hasColors?\"yes\":\"probably-not\":\"unknown\"}get rendererTextureUsage(){return Ve(this._currentRenderer)?this._usePBR||this._hasLoadedPBRTextures?be.AllTexturesPBR:be.AllTextures:this._usePBR||this._hasLoadedPBRTextures?be.GeometryTexturesPBR:be.GeometryTextures}get elevationOffset(){const e=null!=this.i3slayer?this.i3slayer.elevationInfo:null;if(null!=e&&\"absolute-height\"===e.mode){const t=I(this.i3slayer.spatialReference),i=ae(e.unit);return l(e.offset,0)*i/t}return 0}get elevationInfo(){const e=null!=this.i3slayer?this.i3slayer.elevationInfo:null;if(null==e)return{mode:Ut.Absolute,offset:0};const t=I(this.i3slayer.spatialReference),i=ae(e.unit),s=l(e.offset,0)*i/t;switch(e.mode){case\"absolute-height\":return{mode:Ut.Absolute,offset:s};case\"relative-to-ground\":return{mode:Ut.RelativeToGround,offset:s};case\"on-the-ground\":return{mode:Ut.OnTheGround,offset:0};default:return{mode:Ut.Absolute,offset:0}}}get supportedTextureEncodings(){return Se(this.view._stage.renderView.capabilities)}get uncompressedTextureDownsamplingEnabled(){const e=this.view?.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled,t=0==(this.supportedTextureEncodings&ye.DDS_S3TC);return e&&t}initialize(){this._preLoadBasis(),this.addResolvingPromise(this.i3slayer.indexInfo);const e=this.view.resourceController,t=e.memoryController;this.i3sOverrides=new Ne({view:this.view,layer:this.i3slayer,memoryController:t}),this._worker=new le((t=>e.immediate.schedule(t))),this.addResolvingPromise(this._worker.promise);const i=this.i3slayer.store;this._worker.setLegacySchema(this.uid,i.defaultGeometrySchema),Ue(this.i3slayer),He(this.i3slayer,this.view),this._layerUrl=this.i3slayer.parsedUrl.path,this._controller=new Z({layerView:this}),this._gpuMemoryEstimate=0,this._texMemoryEstimate=0,this._geoMemoryEstimate=0,this._stage=this.view._stage,this._collection=this._stage.renderView.componentObjectCollection,this.resetHighlights();const s=i.defaultGeometrySchema;if(this._isIntegratedMesh||!s)this._hasComponentData=!1;else{const e=s.featureAttributes;this._hasComponentData=!!(e&&e.faceRange&&e.id)}this._hasVertexColors=null!=(s?.vertexAttributes.color??null)&&(null==this.i3slayer.cachedDrawingInfo||!this.i3slayer.cachedDrawingInfo.color),this._isIntegratedMesh||(this._edgeView=this._stage.renderer.ensureEdgeView());const r=this.view.resourceController.memoryController.newCache(this.uid,(e=>this._deleteComponentObject(e)));this._memCache=r;const o=e=>h(this._controller.index)&&h(this._controller.index.rootNode)?this._controller.index.traverse(this._controller.index.rootNode,(t=>{const i=t.index,s=this._nodeId2Meta.get(i)||this._nodeId2MetaReloading.get(i);return e(t,h(s)?s.objectHandle:null)})):()=>{};this._intersectionHandler=new Ee({layerUid:this.layerUid,sublayerUid:this.sublayerUid,collection:this._collection,slicePlaneEnabled:this.slicePlaneEnabled,isGround:this._isIntegratedMesh,traverseNodeHierarchy:o}),this.updatingHandles.add((()=>this.layerUid),(e=>this._intersectionHandler.layerUid=e)),this.updatingHandles.add((()=>this.sublayerUid),(e=>this._intersectionHandler.sublayerUid=e)),this._elevationProvider=new xe({layerView:this,intersectionHandler:this._intersectionHandler}),this._hasLoadedPBRTextures=this._usePBR,this.updatingHandles.add((()=>this.view.clippingArea),(()=>this._clippingAreaChanged()),f),this.updatingHandles.add((()=>this.fullOpacity),(e=>this._opacityChange(e))),this.updatingHandles.add((()=>this.slicePlaneEnabled),(e=>this._slicePlaneEnabledChange(e))),this.updatingHandles.add((()=>this.elevationOffset),((e,t)=>{this._reloadAll(t),this._controller.invalidateVisibilityObbs()})),this.updatingHandles.add((()=>this.elevationInfo),((e,t)=>this._elevationInfoChanged(e,t)),f),this.updatingHandles.add((()=>!this.suspended&&this.elevationInfo.mode!==Ut.Absolute),((e,t)=>{e?this.handles.add(this.view.basemapTerrain.on(\"elevation-change\",(({extent:e})=>this._ensureElevationTask().addExtent(e))),Lt):t&&this.handles.remove(Lt)}),f),this.updatingHandles.add((()=>this._usePBR),(e=>this._updatePBR(e)));const a=()=>{this._reloadAll(),this.clearMemCache()};this.updatingHandles.add((()=>this.rendererTextureUsage),a),this.updatingHandles.add((()=>this.uncompressedTextureDownsamplingEnabled),a),this.updatingHandles.add((()=>this.suspended),(e=>this._suspendedChange(e)),f),this.updatingHandles.add((()=>this.i3slayer.labelsVisible),(()=>this._labelingChanged()),f),this.updatingHandles.add((()=>this.i3slayer.labelingInfo),(()=>this._labelingChanged()),f),this.updatingHandles.add((()=>this._modifications),(()=>this._modificationsChanged()),f),this.handles.add([b((()=>tt.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&tt.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||tt.I3S_TREE_SHOW_TILES||(this._treeDebugger=d(this._treeDebugger))}),f),b((()=>tt.I3S_SHOW_MODIFICATIONS),(()=>this._showModifications()),f)]),this._cacheKeySuffix=Ge(this.i3slayer.spatialReference,this.view.renderSpatialReference),this._idbCache.init().catch((e=>mt.warn(`Failed to initialize IndexedDB cache: ${e}`)))}destroy(){this._clearAddTasks(),this._elevationTask=d(this._elevationTask),this.i3sOverrides=d(this.i3sOverrides),this._elevationProvider&&(this._elevationProvider.layerChanged(),this.view.elevationProvider.unregister(this._elevationProvider),this._elevationProvider=null),this._intersectionHandler&&(this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler),this._intersectionHandler=null);const e=this._worker;e&&(e.destroyContext(this.uid).then((()=>e.destroy())),this._worker=null),this._removeAllNodeDataFromStage(),this._memCache=d(this._memCache),this._collection=null,this._stage=null,this._edgeView=null,this._labeler=d(this._labeler),this._treeDebugger=d(this._treeDebugger),this._controller=d(this._controller),this._highlights.destroy(),this._nodeId2Meta.clear(),this._nodeId2MetaReloading.clear(),this.emit(\"visible-geometry-changed\"),this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle.remove(),this._visibleGeometryChangedSchedulerHandle=null)}_memEstimateTextureAdded(e){const t=e.estimatedTexMemRequired;return this._gpuMemoryEstimate+=t,this._texMemoryEstimate+=t,t}_memEstimateTextureRemoved(e){if(h(e)){const t=e.estimatedTexMemRequired;this._gpuMemoryEstimate-=t,this._texMemoryEstimate-=t}}_memEstimateGeometryAdded(e){const t=this._collection.getObjectGPUMemoryUsage(e);return this._gpuMemoryEstimate+=t,this._geoMemoryEstimate+=t,t}_memEstimateGeometryRemoved(e){const t=this._collection.getObjectGPUMemoryUsage(e);this._gpuMemoryEstimate-=t,this._geoMemoryEstimate-=t}isNodeLoaded(e){return this._nodeId2Meta.has(e)}isNodeReloading(e){return this._nodeId2MetaReloading.has(e)}getUsedMemory(){let e=h(this._labeler)?this._labeler.usedMemory:0;return this._nodeId2Meta.forEach((t=>e+=h(t)?t.node.memory:0)),this._nodeId2MetaReloading.forEach((t=>e+=h(t)?t.node.memory:0)),e}getUnloadedMemory(){return(h(this._controller)?this._controller.unloadedMemoryEstimate:0)+(h(this._labeler)?this._labeler.unloadedMemoryEstimate:0)}ignoresMemoryFactor(){return!1}_labelingChanged(){if(!(fe(this.i3slayer)&&this._supportsLabeling))return void(h(this._labeler)&&(this._labeler.destroy(),this._labeler=null));if(h(this._labeler))return;const e=new ne({view:this.view,layer:this.i3slayer,collection:this._collection});this._nodeId2Meta.forEach((t=>h(t)&&this._addMetaToLabeler(e,t))),this._labeler=e}_loadAsyncModule(e){return++this._asyncModuleLoading,e.then((e=>(--this._asyncModuleLoading,e)),(e=>{throw--this._asyncModuleLoading,e}))}_modificationsChanged(){if(!this._i3sWasmLoaded&&this.hasModifications)return this._i3sWasmLoaded=ue().then((()=>{this._i3sWasmLoaded=!0,this._modificationsChanged(),this.notifyUpdate()})),void this.notifyUpdate();if(!0!==this._i3sWasmLoaded)return;const e=this.uid,t=this.i3slayer.spatialReference;this._worker.setModifications(e,this._layerClippingArea,this._modifications,t);const i=de(this._layerClippingArea,this._modifications,t);_e({context:e,modifications:i,isGeodetic:t.isGeographic}),this._controller.modificationsChanged();const s=this.hasModifications?new _:null;this._nodeId2Meta.forEach(((e,t)=>{c(e)?(this._nodeId2Meta.delete(t),this._controller.updateLoadStatus(t,!1)):e.node.hasModifications?(this._nodeId2Meta.delete(t),this._nodeId2MetaReloading.set(t,e)):h(s)&&s.push(e.node)})),h(s)&&this._nodeId2MetaReloading.forEach((e=>s.push(e.node))),h(s)&&s.length>0&&(this.updateNodeModificationStatus(s),s.forAll((e=>{if(e.imModificationImpact!==De.Culled){const t=this._nodeId2Meta.get(e.index);this._controller.invalidateGeometryVisibility(e.index),h(t)?(this._nodeId2Meta.delete(e.index),this._nodeId2MetaReloading.set(e.index,t)):this._nodeId2Meta.has(e.index)&&(this._nodeId2Meta.delete(e.index),this._controller.updateLoadStatus(e.index,!1))}}))),this.clearMemCache(),this._controller.restartNodeLoading(),this._showModifications()}_showModifications(){if(h(this._modificationGraphics)&&(this.view.graphics.removeMany(this._modificationGraphics),this._modificationGraphics=null),!tt.I3S_SHOW_MODIFICATIONS||0===this._modifications.length)return;const e={clip:[227,227,79,.8],mask:[227,139,79,.8],replace:[139,227,79,.8]},t={type:\"simple-fill\",outline:{color:[255,255,255],width:1}};this._modificationGraphics=new Array;for(const s of this._modifications){const r=s.geometry;r.spatialReference=this.i3slayer.spatialReference;const o={...t,color:e[s.type]};this._modificationGraphics.push(new i({geometry:r,symbol:o}))}this.view.graphics.addMany(this._modificationGraphics)}_addMetaToLabeler(e,t){e.addNodeMeta(t,((e,t)=>this._createAttributes(e,t)))}_suspendedChange(e){e?(this._removeAllNodeDataFromStage(),this.view.elevationProvider&&this.view.elevationProvider.unregister(this._elevationProvider),this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler)):(this.view.elevationProvider.register(this._elevationContext,this._elevationProvider),this._stage.view.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler))}getLoadedAttributes(e){const t=this._nodeId2Meta.get(e);if(h(t)&&h(t.attributeInfo))return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this._nodeId2Meta.get(e);if(h(t)&&h(t.attributeInfo))return t.attributeInfo.attributeData}setAttributeData(e,t){const i=this._nodeId2Meta.get(e);h(i)&&h(i.attributeInfo)&&(i.attributeInfo.attributeData=t,this._attributeValuesChanged(i))}async updateAttributes(e,t,i){const s=this._nodeId2Meta.get(e);h(s)&&(await this.i3sOverrides.apply(s.featureIds,t,i),s.attributeInfo=t,this._controller.reschedule((()=>this._attributeValuesChanged(s)),i).catch((e=>{m(e)||mt.warn(\"Error while updating attribute values. Layer might not display correctly.\",e)})))}_attributeValuesChanged(e){e.cachedRendererVersion=this._getInvalidRendererVersion(),e.filteredIds=null,h(this._labeler)&&this._labeler.setNodeMetaAttributes(e,((e,t)=>this._createAttributes(e,t))),this._updateEngineObject(e)}clearMemCache(){h(this._memCache)&&this._memCache.clear()}getVisibleNodes(){const e=new Array;return this._nodeId2Meta.forEach((t=>h(t)&&e.push(t.node))),e}getNodeComponentObb(e){const t=this._nodeId2Meta.get(e.index)??this._nodeId2MetaReloading.get(e.index);return h(t)?this._collection.getComponentObb(t.objectHandle):null}getLoadedNodeIndices(e){this._nodeId2Meta.forEach(((t,i)=>e.push(i))),this._nodeId2MetaReloading.forEach(((t,i)=>e.push(i)))}_preLoadBasis(){!has(\"disable-feature:i3s-basis\")&&0!=(this.supportedTextureEncodings&ye.Basis)&&u(this.i3slayer.textureSetDefinitions,(e=>e.some((e=>e.formats.some((e=>\"basis\"===e.format||\"ktx2\"===e.format))))))&&ht()}_getVertexBufferLayout(e,t){const i={hasTexture:Tt(e.params.material),hasNormals:t.normal,hasRegions:t.uvRegion};return at(lt(this._getGeometryParameters(i)))}_getObjectIdField(){return this.i3slayer.objectIdField||J}_findGraphicNodeAndIndex(e){const t=Ze(this.i3slayer.fieldsIndex,e.attributes,this._getObjectIdField());let i=null;return n(this._nodeId2Meta,(e=>{if(c(e))return!1;const s=e.featureIds.indexOf(t);return-1!==s&&(i={node:e.node,index:s},!0)})),i}_getGraphicIndices(e,t){const i=this._nodeId2Meta.get(e.index);if(c(i))return[];const s=[],r=this._getObjectIdField(),o=this.i3slayer.fieldsIndex;for(const a of t){const e=Ze(o,a.attributes,r),t=i.featureIds.indexOf(e);-1!==t&&s.push(t)}return s}whenGraphicBounds(e){const t=this._findGraphicNodeAndIndex(e);if(!t)return Promise.reject();const i=this._getAABB(t.node.index,t.index);return c(i)?Promise.reject():Promise.resolve({boundingBox:i,screenSpaceObjects:[]})}getAABBFromIntersectorTarget(e){return null==e.nodeIndex||null==e.componentIndex?null:this._getAABB(e.nodeIndex,e.componentIndex)}_getAABB(e,t){const i=this._nodeId2Meta.get(e);if(c(i)||null==i.featureIds||t>=i.featureIds.length)return null;const s=i.objectHandle,r=Oe(t,this._collection,s,ct(24)),o=this.view.renderSpatialReference,a=this.view.spatialReference;if(!L(r,o,0,r,a,0,8))return null;const n=W();return $(n,r,0,8),n}whenGraphicAttributes(e,t){return Le(this.i3slayer,e,this._getObjectIdField(),t,(()=>[...this._nodeId2Meta.values()].filter(h)))}getGraphicFromIntersectorTarget(e){if(null==e.nodeIndex||null==e.componentIndex)return null;const t=this._nodeId2Meta.get(e.nodeIndex);return c(t)||null==t.featureIds||e.componentIndex>=t.featureIds.length?null:this._createGraphic(e.componentIndex,t)}_getCacheKey(e){return`${this._layerUrl}/v${bt}/${e.id}${this._cacheKeySuffix}`}_getMemCacheKey(e,t=this.elevationOffset){return e+\"#\"+t}get _idbCacheEnabled(){return!this._controller.disableIDBCache&&!this.hasModifications&&0===this.elevationOffset&&null!=this._cacheKeySuffix}loadCachedGPUData(e){return h(this._memCache)?this._memCache.pop(this._getMemCacheKey(e.index)):null}deleteCachedGPUData(e){h(e)&&this._deleteComponentObject(e)}_cacheGPUData(e,t=this.elevationOffset){if(c(this._memCache))return void this._deleteComponentObject(e);const i=this._controller.indexDepth-e.node.level;this._memCache.put(this._getMemCacheKey(e.node.index,t),e,e.node.memory,i)}loadMissingTextures(e,t,i,s){const r=e?.filter(((e,i)=>{if(0==(e.usage&this.rendererTextureUsage))return!1;if(c(t))return!0;const s=je(e.encodings,this.supportedTextureEncodings),r=t[i];return!!(c(r)||null==r.data||s&&r.encoding!==s.encoding)}))??[];return 0===r.length?Promise.resolve(!1):i(r,s).then((i=>{let s=0;for(let r=0;r<e.length;r++)s<i.length&&i[s].id===e[r].id&&(t[r]=i[s],s++);return!0}))}loadCachedNodeData(e,t,i){return this._idbCacheEnabled?this._idbCache.get(this._getCacheKey(e),t).then((s=>null==s?null:s.nodeVersion!==e.version?(this._idbCache.remove(this._getCacheKey(e)),null):(this.elevationInfo.mode===Ut.Absolute&&(e.geometryObb=s.geometryObb),this.loadMissingTextures(s.requiredTextures,s.textureData,i,t).then((i=>(i&&this._idbCache.initialized&&h(s.textureData)&&(s.byteSize=Rt(s.transformedGeometry,s.textureData),s.textureData.every(Dt)&&Nt(e,s)&&this._idbCache.put(this._getCacheKey(e),s).catch((t=>mt.warn(`Failed to update node with textures in IndexedDB cache: ${e.id}: ${t}`)))),g(t),s)))))):Promise.resolve(null)}addNode(e,t,i){return At(t)?null==t.geometryBuffer?(this._addNodeMeta(e.index,null),Promise.resolve()):this._addData(e,t.attributeDataInfo,(()=>this._transformNode(e,t,i).then((s=>this._safeReschedule((()=>{if(c(s))return e.hasModifications=!1,this._addCachedNodeData(e,null,i);e.hasModifications=s.transformedGeometry.hasModifications;const{obb:r,componentOffsets:o,featureIds:a,transformedGeometry:n}=s,l=this._controller.crsIndex,d=this.view.renderSpatialReference,u=Pe(e.mbs,this.elevationOffset,l,d),_=st([r.center.x,r.center.y,r.center.z],[r.extents.x,r.extents.y,r.extents.z],T(r.orientation.x,r.orientation.y,r.orientation.z,r.orientation.w));A(_.center,_.center,u),this.elevationInfo.mode===Ut.Absolute&&(e.geometryObb=_),t.geometryData.componentOffsets=o,a&&(t.geometryData.featureIds=Array.from(a));const m={nodeVersion:e.version,geometryData:t.geometryData,requiredTextures:t.requiredTextures,textureData:t.textureData,transformedGeometry:n,globalTrafo:u,geometryObb:_,byteSize:Rt(n,t.textureData)};if(this._idbCacheEnabled&&this._idbCache.initialized&&Nt(e,m)){const t=h(m.textureData)?m.textureData.map((e=>Dt(e)?e:null)):null;this._idbCache.put(this._getCacheKey(e),{...m,textureData:t}).catch((t=>mt.warn(`Failed to store node in IndexedDB cache: ${e.id}: ${t}`)))}return this._addCachedNodeData(e,m,i)}),i))))):Promise.reject()}computeVisibilityObb(e){return ke(e,this.view.renderSpatialReference,this._controller.crsIndex,this.i3slayer.spatialReference,this.elevationOffset,this._modifications)}_transformNode(e,t,i){const s=t.geometryData.geometries??[],r=new Array(s.length);for(let c=0;c<s.length;++c)r[c]=this._getVertexBufferLayout(s[c],t.geometryDescriptor);const o=e.mbs,a=this.elevationOffset,n=this._controller.crsIndex,l=this._controller.crsVertex,d=this.view.renderSpatialReference,h=Fe(o,a,n),u=Pe(o,a,n,d),_=k(n,l),m=k(l,d);if(c(_)||c(m))return Promise.resolve(null);const g={context:this.uid,geometryBuffer:t.geometryBuffer,geometryData:t.geometryData,geometryDescriptor:t.geometryDescriptor,layouts:r,localOrigin:h,globalTrafo:u,mbs:o,obb:e.serviceObb,elevationOffset:a,needNormals:!this._isIntegratedMesh&&this._controller.isMeshPyramid,normalReferenceFrame:this.i3slayer.normalReferenceFrame||\"none\",indexToVertexProjector:_,vertexToRenderProjector:m};return this._worker.invoke(g,i)}get _supportsNodeCrossFading(){return!this.view?._stage?.renderer.shadowsEnabled}get nodeCrossfadingEnabled(){return this._supportsNodeCrossFading&&(this.lodCrossfadeinDuration>0||this.lodCrossfadeoutDuration>0||this.lodCrossfadeUncoveredDuration>0)}get nodeFadeoutEnabled(){return this._supportsNodeCrossFading&&this.lodCrossfadeoutDuration>0}_setNewNodeOpacity(e){const t=this.nodeCrossfadingEnabled?0:this.fullOpacity;this._setNodeOpacity(e,t)}addCachedGPUData(e,t,i){if(this.elevationInfo.mode===Ut.Absolute&&(e.geometryObb=rt(this._collection.getComponentObb(t.objectHandle))),!this._controller.isGeometryVisible(e))return void this._cacheGPUData(t);h(this._labeler)&&this._addMetaToLabeler(this._labeler,t);const s=e.index;this._addNodeMeta(s,t),this.updateNodeState(s,i),this._collection.setObjectVisibility(t.objectHandle,nt.Visible),this._updateMaterial(t),this._setNewNodeOpacity(t),this.elevationInfo.mode!==Ut.Absolute&&this._ensureElevationTask().schedule(s),this._updateEngineObject(t),this._highlights.objectCreated(t),h(this._treeDebugger)&&this._treeDebugger.update()}addCachedNodeData(e,t,i,s){return this._addData(e,i,(()=>this._addCachedNodeData(e,t,s)))}async _addCachedNodeData(e,t,i){if(this.suspended||!this._controller.isGeometryVisible(e))return void this._removeNodeStageData(e.index,this.elevationOffset,this._nodeId2MetaReloading);if(c(t))return void this._addNodeMeta(e.index,null);const s=this._addTasks.get(e.index),{geometryData:r,transformedGeometry:o,globalTrafo:a}=t;await this.i3sOverrides.apply(r.featureIds,s.attributeInfo,i);const n=h(t.textureData)?t.textureData.filter((e=>h(e)&&0!=(e.usage&this.rendererTextureUsage))):[];!has(\"disable-feature:i3s-basis\")&&n.some((e=>h(e)&&(e.encoding===ye.Basis||e.encoding===ye.KTX2)))&&await ht(),e.memory=0;const{componentOffsets:l,geometries:d,featureIds:u}=r,_=this._collection,m=d[0],{layout:g,indices:p,interleavedVertexData:f,positionData:b,hasColors:y}=o,v=this._materialParameters(m,g),I=l||new Uint32Array([0,p?p.length:f.byteLength/g[0].stride]),M={vertices:{data:f,count:f.byteLength/g[0].stride,layoutParameters:v.geometryParams},positionData:{positions:b.data,indices:b.indices},indices:p,componentOffsets:I},C=m.transformation?j(m.transformation):w();E(C,a,C);const T=S(U(),C),A=x(O(),C),D=this.view.renderSpatialReference,R=this.view.basemapTerrain.spatialReference,N=U(),P=[1,1,1];B(T,D,P,R)||mt.errorOnce(\"Unsupported coordinate system for IM overlay\"),q(T,D,N,R);const F=_.createObject({toMapSpace:G(N[0],N[1],P[0],P[1]),geometry:M,obb:t.geometryObb,transform:{position:T,rotationScale:A}}),V=v.geometryParams.textureCoordinates===dt.Atlas,{textures:H,texturePromise:L}=this._initMaterialAndTextures(F,v.material,n,V);e.memory+=this._memEstimateGeometryAdded(F),e.memory+=H.reduce(((e,t)=>e+(h(t)?this._memEstimateTextureAdded(t):0)),0);const k=!!v.material.hasParametersFromSource,z=\"blend\"!==v.material.alphaMode&&v.material.metallicRoughness.baseColorFactor[3]>=1,K=new pt(e,u,F,this._getInvalidRendererVersion(),s.attributeInfo,{hasParametersFromSource:k,isOpaque:z},H);s.meta=K,!this._hasTextures&&t.requiredTextures?.some((({usage:e})=>0!=(e&be.ColorTextures)))&&(this._hasTextures=!0),this._hasData=!0,this._hasColors=this._hasColors||y,this._hasTextures=this._hasTextures||!!e.resources.texture,this.notifyChange(\"hasTexturesOrVertexColors\");const W=this.slicePlaneEnabled;return Promise.all([this._addOrUpdateEdgeRendering(K),L]).then((([t,s])=>(h(t)&&t.updateObjectVisibility(K.objectHandle,!1).catch((e=>It(e,this.i3slayer.title))),this._safeReschedule((()=>{const i=this._addTasks.get(e.index);if(!i)return;if(this._addNodeMeta(e.index,K),i.meta=null,this.suspended)return void this._removeNodeStageData(e.index,this.elevationOffset);_.setObjectVisibility(F,nt.Visible),h(t)&&t.updateObjectVisibility(K.objectHandle,!0).catch((e=>It(e,this.i3slayer.title))),K.attributeInfo=i.attributeInfo;const s=K.cachedRendererVersion!==this._rendererVersion,r=W!==this.slicePlaneEnabled;this._updateElevationOffsets(K);const o=K.elevationOffsets;this._updateComponentData(K);const a=this._applyFiltersToNode(K);(s||h(t)&&(r||a||o))&&this._addOrUpdateEdgeRendering(K),h(this._labeler)&&this._addMetaToLabeler(this._labeler,K),this._visibleGeometryChanged(K,Mt.ADD),this._highlights.objectCreated(K),this._updateMaterial(K),this._setNewNodeOpacity(K),h(this._treeDebugger)&&this._treeDebugger.update()}),i)))).catch((e=>{throw h(s.meta)&&(this._cacheGPUData(s.meta),s.meta=null),e}))}_addNodeMeta(e,t){if(this._removeNodeStageData(e,this.elevationOffset,this._nodeId2MetaReloading),this._nodeId2Meta.has(e)){mt.error(\"Removing duplicated node\");const t=this._nodeId2Meta.get(e);h(t)&&this._deleteComponentObject(t)}else this._controller.updateLoadStatus(e,!0);h(t)&&(t.lodCrossfadeProgress=null,this.nodeCrossfadingEnabled&&Vt(t.cachedEdgeMaterials,0)),this._nodeId2Meta.set(e,t)}_updateElevationOffsets(e){const t=this.view.renderSpatialReference,i=this.elevationInfo,s=this.view.basemapTerrain,r=s.spatialReference,o=i.mode;if(c(t)||c(r)||o===Ut.Absolute)return void(e.elevationOffsets=null);const a=this._collection.getObjectTransform(e.objectHandle);e.elevationOffsets=e.elevationOffsets??[];const n=Ht,l=Gt,d=o===Ut.OnTheGround,u=this.view.renderCoordsHelper,_=!!e.cachedMidsTerrainSR,m=e.featureIds.length;if(!_){e.cachedMidsTerrainSR=ct(3*m);const i=e.cachedMidsTerrainSR;for(let s=0;s<m;s++){this._collection.getComponentAabb(e.objectHandle,s,l,!0),D(n,(l[0]+l[3])/2,(l[1]+l[4])/2,l[2]),R(n,n,a.rotationScale),N(n,n,a.position);const o=3*s;i[o+2]=u.getAltitude(n),q(n,t,n,r),i[o+0]=n[0],i[o+1]=n[1]}}const g=e.cachedMidsTerrainSR,p=i.offset,f=e.elevationOffsets,b=(e,t)=>{const i=d?g[3*e+2]:0;f[e]=p+(h(t)?t-i:0)};s.getElevations(g,m,b)}_ensureElevationTask(){return h(this._elevationTask)||(this._elevationTask=new Ie(this.view.resourceController.scheduler,(e=>{const t=this._controller.updateElevationChanged(e,this.view.basemapTerrain.spatialReference);return h(t)?t.filterInPlace((e=>h(this._nodeId2Meta.get(e)))):null}),(e=>{const t=this._nodeId2Meta.get(e);this._nodeElevationAlignmentChanged(t)}))),this._elevationTask}_elevationInfoChanged(e,t){const i=e.mode!==Ut.Absolute,s=!!t&&t!==e&&t.mode!==Ut.Absolute;this._intersectionHandler.updateElevationAlignState(i,this.view.state.viewingMode),i&&!s&&this._controller.removeAllGeometryObbs(),this._nodeId2Meta.forEach((e=>this._nodeElevationAlignmentChanged(e)))}_nodeElevationAlignmentChanged(e){c(e)||(this._updateElevationOffsets(e),this._updateComponentData(e),this._updateEdgeRendering(e),h(this._labeler)&&this._labeler.updateLabelPositions(e),this._updateSnappingSources(e,Mt.UPDATE))}_safeReschedule(e,t){return g(t),this._controller.reschedule(e,t)}_materialParameters(e,t){const i=h(e.params.material)?e.params.material:we(),s=t.some((e=>\"uvRegion\"===e.name)),r=t.some((e=>\"normalCompressed\"===e.name)),o=Tt(i);return{geometryParams:this._getGeometryParameters({hasTexture:o,hasNormals:r,hasRegions:s}),material:i}}_initMaterialAndTextures(e,t,i,s){const r=this._stage.renderView,o=i.map((e=>Te(e,t,s,r)));this._stage.addMany(o);let a=null;return this._collection.updateMaterial(e,(e=>{a=Ae(e,t,o,i,this.view._stage.renderView.textureRepository,{rendererTextureUsage:this.rendererTextureUsage,usePBR:this._usePBR,isIntegratedMesh:this._isIntegratedMesh,slicePlaneEnabled:this.slicePlaneEnabled,viewSpatialReference:this.view.spatialReference}),this._updateMaterialOverlay(e)})),{textures:o,texturePromise:a}}_getGeometryParameters(e){return{textureCoordinates:e.hasTexture?e.hasRegions?dt.Atlas:dt.Default:dt.None,colors:this._hasVertexColors,normals:e.hasNormals&&!this._isIntegratedMesh}}_addData(e,t,i){let s=this._addTasks.get(e.index);return s?s.attributeInfo=t:(s={...p(),attributeInfo:t,meta:null},this._addTasks.set(e.index,s),i().then(s.resolve,s.reject).then((()=>this._addTasks.delete(e.index))).catch((t=>{throw this._addTasks.delete(e.index),t}))),s.promise}_clearAddTasks(){this._addTasks.forEach((e=>{h(e.meta)&&(this._cacheGPUData(e.meta),e.meta=null)})),this._addTasks.clear()}_clippingAreaChanged(){const e=this.view.renderSpatialReference,t=this.i3slayer.spatialReference,i=Y();this._renderClippingArea=it(this.view.clippingArea,i,e)?i:null;const s=Y();this._layerClippingArea=it(this.view.clippingArea,s,t)?s:null,this._filterChange(),this._controller&&this._controller.updateClippingArea(this.view.clippingArea),this._isIntegratedMesh&&this._modificationsChanged()}get hasGeometryFilter(){return!1}_geometryFilterChange(){const e=this.hasGeometryFilter;this._controller.geometryFilterChanged(e),this._applyFilters(e)}_filterChange(){this._applyFilters(this.hasGeometryFilter)}_applyFilters(e){this._filters=this.getFilters(),e?this._controller&&this._controller.requestUpdate():this._nodeId2Meta.forEach((e=>{h(e)&&this._applyFiltersToNode(e)&&(this._addOrUpdateEdgeRendering(e),this._visibleGeometryChanged(e,Mt.UPDATE))}))}getFilters(){const e=[],t=this._renderClippingArea;return h(t)&&e.push(((e,i)=>this._boundingRectFilter(e,i,t))),e}addSqlFilter(e,t,i){if(h(t)){const s=t.fieldNames;e.push(((e,r)=>this._sqlFilter(e,r,t,s,i)))}}_sqlFilter(e,t,i,s,r){const o={},a=this._createLayerGraphic(o),n=this.i3slayer.objectIdField,l=t.featureIds,d=h(t.attributeInfo)&&t.attributeInfo.attributeData;s.every((e=>e===n||d&&null!=d[e]))&&Be(e,l,(e=>{o[n]=l[e];for(const i of s)i!==n&&(o[i]=d?qe(d[i],e):null);try{return i.testFeature(a)}catch(t){return r(t),!1}}))}_boundingRectNodeTest(e,t){return z(e.node.mbs,this._controller.crsIndex,wt,this.view.renderSpatialReference),ze(t,wt)}_boundingRectFeatureTest(e,t,i){return this._collection.getComponentAabb(e.objectHandle,t,Ct),X(Ct,xt),Q(i,xt)}_boundingRectFilter(e,t,i){const s=this._collection,r=this._boundingRectNodeTest(t,i);if(r===Ke.INSIDE)return;if(r===Ke.OUTSIDE)return void(e.length=0);const o=s.getComponentCount(t.objectHandle);if(o.invisible+o.visible!==t.featureIds.length)return;const a=this._transformClippingArea(Ot,i,t.objectHandle);Be(e,t.featureIds,(e=>this._boundingRectFeatureTest(t,e,a)))}_transformClippingArea(e,t,i){const s=this._collection.getObjectTransform(i),r=s.position,o=s.rotationScale;return e[0]=(t[0]-r[0])/o[0],e[1]=(t[1]-r[1])/o[4],e[2]=(t[2]-r[0])/o[0],e[3]=(t[3]-r[1])/o[4],e}_addOrUpdateEdgeRendering(e,t=!0){const i=this._edgeView;if(c(i))return Promise.resolve(null);const s=e.objectHandle,r=i.hasObject(s),{hasEdges:o,perFeatureEdgeMaterials:a}=this._getFilteredEdgeMaterials(e),n={hasSlicePlane:this.slicePlaneEnabled};if(o&&r){if(this.nodeCrossfadingEnabled){Vt(a,this.getNodeOpacity(e))}return i.updateAllComponentMaterials(s,a,n,t).catch((e=>It(e,this.i3slayer.title))),i.updateObjectVisibility(s,!0).catch((e=>It(e,this.i3slayer.title))),i.updateAllVerticalOffsets(s,e.elevationOffsets).catch((e=>It(e,this.i3slayer.title))),Promise.resolve(i)}return o&&!r?this._collection.addEdges(s,i,a,n).then((t=>(e.edgeMemoryUsage=t,e.node.memory+=t,i.updateAllVerticalOffsets(s,e.elevationOffsets).catch((e=>It(e,this.i3slayer.title))),i))):(!o&&r&&(e.node.memory-=e.edgeMemoryUsage,e.edgeMemoryUsage=0,i.removeObject(s)),Promise.resolve(null))}_applyFiltersToNode(e){return!!this._applyFiltersToNodeComponents(e)&&(h(this._labeler)&&this._labeler.applyFilterChange(e),!0)}_applyFiltersToNodeComponents(e){const t=this._collection,i=0===t.getComponentCount(e.objectHandle).invisible;if(t.setAllComponentVisibilities(e.objectHandle,\"all\"),0===this._filters.length)return e.filteredIds=null,!i;if(this._updateCachedFilteredIds(e),e.filteredIds===e.featureIds)return!i;const s=this._computeFilteredComponentIndices(e);return t.setAllComponentVisibilities(e.objectHandle,s),!0}_updateCachedFilteredIds(e){null!=e.filteredIds&&e.appliedFilters===this._filters||(e.filteredIds=this._computeFilteredIds(e),e.appliedFilters=this._filters)}_computeFilteredIds(e){const t=e.featureIds.slice();for(const i of this._filters)if(i(t,e),0===t.length)break;return t.length===e.featureIds.length?e.featureIds:t}_computeFilteredComponentIndices(e){const t=new Array,i=e.filteredIds;return h(i)&&e.featureIds.forEach(((e,s)=>{i[t.length]===e&&t.push(s)})),t}_removeAllNodeDataFromStage(e=this.elevationOffset){this._nodeId2Meta.forEach(((t,i)=>this._removeNodeStageData(i,e))),this._nodeId2MetaReloading.forEach(((t,i)=>this._removeNodeStageData(i,e,this._nodeId2MetaReloading))),this._elevationTask=d(this._elevationTask)}removeNode(e){const t=this.elevationOffset;this._removeNodeStageData(e,t),this._removeNodeStageData(e,t,this._nodeId2MetaReloading),h(this._elevationTask)&&this._elevationTask.remove(e)}_removeNodeStageData(e,t,i=this._nodeId2Meta){i.has(e)&&this._controller.updateLoadStatus(e,!1);const s=i.get(e);c(s)?i.delete(e):(this._collection.setObjectVisibility(s.objectHandle,nt.Hidden),h(this._edgeView)&&this._edgeView.hasObject(s.objectHandle)&&this._edgeView.updateObjectVisibility(s.objectHandle,!1).catch((e=>It(e,this.i3slayer.title))),this._visibleGeometryChanged(s,Mt.REMOVE),h(this._labeler)&&this._labeler.removeNodeMeta(s),i.delete(e),this._highlights.objectDeleted(s),i===this._nodeId2Meta?(this._cacheGPUData(s,t),this.nodeCrossfadingEnabled&&this._crossfadeHelper.stopNodeFading(s)):this._deleteComponentObject(s),h(this._treeDebugger)&&this._treeDebugger.update())}_deleteComponentObject(e){if(h(this._edgeView)&&this._edgeView.removeObject(e.objectHandle),this._memEstimateGeometryRemoved(e.objectHandle),this._collection.destroyObject(e.objectHandle),e.textures)for(const t of e.textures)this._memEstimateTextureRemoved(t),this._stage.remove(t)}updateNodeState(e,t){const i=this._nodeId2Meta.get(e);h(i)&&this._collection.updateMaterial(i.objectHandle,(e=>e.polygonOffsetEnabled=t===Re.Hole))}_invalidateAllSymbols(){this._rendererVersion=We(this._rendererVersion,1),this._controller&&this._controller.requestUpdate()}_getInvalidRendererVersion(){return We(this._rendererVersion,-1)}async _rendererChange(e){if(this._currentRenderer=e,this.notifyChange(\"rendererTextureUsage\"),this._rendererVersion=We(this._rendererVersion,1),this._rendererFields=null,this._colorVariable=null,this._opacityVariable=null,this._invalidateAllSymbols(),e&&(this._rendererFields=await e.getRequiredFields(this.i3slayer.fieldsIndex)),this._updateSymbologyFields(),!this._arcade&&e&&\"arcadeRequired\"in e&&e.arcadeRequired&&(this._arcade=await re()),e&&\"visualVariables\"in e&&e.visualVariables)for(const t of e.visualVariables)\"color\"===t.type?this._colorVariable=t:\"opacity\"===t.type?this._opacityVariable=t:mt.warn(`Unsupported visual variable type for 3D Object Scene Services: ${t.type}`);if(e)for(const t of e.getSymbols())\"mesh-3d\"!==t.type&&mt.error(`Symbols of type '${t.type}' are not supported for 3D Object Scene Services.`);this._controller&&this._controller.requestUpdate()}_getCachedEdgeMaterials(e){return this._hasComponentData&&e.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(e),e.cachedEdgeMaterials}_getComponentParameters(e){this._hasComponentData&&e.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(e);const t=e.cachedSymbology;return(i,s)=>{const r=5*i;if(H(s.externalColor,t[r+0]/255,t[r+1]/255,t[r+2]/255,t[r+3]/255),h(this._stage.renderView.objectAndLayerIdRenderHelper)){const t=e.featureIds[i];this._stage.renderView.objectAndLayerIdRenderHelper.setUidToObjectAndLayerId(t,t,this.layerId,this.layerUid+\"_\"+this.sublayerId,this.layerPopupEnabled,e.node.resources.attributes,i,this.sublayerId),s.objectAndLayerIdColor=this._stage.renderView.getObjectAndLayerIdColor({graphicUid:t,layerUid:this.layerUid+\"_\"+this.sublayerId})}s.externalColorMixMode=t[r+4]&(1<<ft.CastShadows)-1,s.castShadows=0!=(t[r+4]&1<<ft.CastShadows),s.pickable=0!=(t[r+4]&1<<ft.Pickable),s.elevationOffset=e.elevationOffsets?.[i]??0}}_getSymbolInfo(e,t){const i=e&&e.getSymbol(t,{arcade:this._arcade});if(!(i instanceof oe))return null;const s=i.id;if(this._symbolInfos.has(s))return this._symbolInfos.get(s);const r=$e(i);return this._symbolInfos.set(s,r),r}_setSymbologyOverride(e,t){this._symbologyOverride!==e&&(this._symbologyOverride=e,this._symbologyOverrideFields=t,this._invalidateAllSymbols(),this._updateSymbologyFields())}_updateSymbologyFields(){this._symbologyFields=h(this._symbologyOverrideFields)&&this._symbologyOverrideFields.length>0?h(this._rendererFields)&&this._rendererFields.length>0?ee(this.i3slayer.fieldsIndex,[...this._rendererFields,...this._symbologyOverrideFields]):this._symbologyOverrideFields:this._rendererFields}_updateCachedRendererData(e){if(e.cachedRendererVersion=this._rendererVersion,!this._hasComponentData)return;const t=this._tmpAttributeOnlyGraphic,i={};t.attributes=i;const s=this._currentRenderer,r=h(e.attributeInfo)&&e.attributeInfo.attributeData,o=null!=e.featureIds?this.i3slayer.objectIdField:null,a=null!=r&&h(this._symbologyFields)&&this._symbologyFields.length>0;let n=null,l=null;if(a&&h(this._symbologyFields)){n=[],l=[];for(const e of this._symbologyFields){const t=r[e];t&&(n.push(e),l.push(t))}}e.cachedSymbology||(e.cachedSymbology=new Uint8Array(5*e.featureIds.length));const d={color:St,castShadows:!0,pickable:!0,colorMixMode:et.Multiply,edgeMaterial:null},u=this.fullOpacity,_=this.nodeCrossfadingEnabled?this.getNodeOpacity(e):u;let m=null,g=ut.OPAQUE,p=Xe,f=0;for(let b=0;b<e.featureIds.length;b++){if(null!=o&&(i[o]=e.featureIds[b]),a&&n)for(let e=0;e<n.length;e++)i[n[e]]=qe(l[e],b);const r=s?this._getSymbolInfo(s,t):null;let u=null,y=null;if(s&&\"visualVariables\"in s){if(this._colorVariable){const e=ie(this._colorVariable,t,{color:jt,arcade:this._arcade});e&&(u=St,u[0]=e.r/255,u[1]=e.g/255,u[2]=e.b/255,this._opacityVariable||null===e.a||(y=e.a))}this._opacityVariable&&(y=se(this._opacityVariable,t,{arcade:this._arcade}))}if(r&&r.material){const e=r.material;u=c(u)||c(y)?pe(u,y,e.color,e.alpha,gt,St):pe(u,y,null,null,gt,St)}if(c(u)&&(u=St,u[0]=1,u[1]=1,u[2]=1,u[3]=1),d.pickable=!0,d.castShadows=!r||r.castShadows,d.colorMixMode=r&&r.material?r.material.colorMixMode:et.Multiply,d.edgeMaterial=r?r.edgeMaterial:null,h(this._symbologyOverride)&&(d.color=u,this._symbologyOverride(t,d),u=d.color),h(d.edgeMaterial)){const t=u[3]<=0?ut.INVISIBLE:u[3]>=1&&(e.material.isOpaque||d.colorMixMode===et.Replace)?ut.OPAQUE:ut.TRANSPARENT;d.edgeMaterial===m&&t===g||(p={...d.edgeMaterial,opacity:_,objectTransparency:t},m=d.edgeMaterial,g=t),e.cachedEdgeMaterials[b]=p}else e.cachedEdgeMaterials[b]=Xe;e.cachedSymbology[f+0]=Math.round(255*u[0]),e.cachedSymbology[f+1]=Math.round(255*u[1]),e.cachedSymbology[f+2]=Math.round(255*u[2]),e.cachedSymbology[f+3]=Math.round(255*u[3]),e.cachedSymbology[f+4]=d.colorMixMode|+d.castShadows<<ft.CastShadows|+d.pickable<<ft.Pickable,f+=5}}_getFilteredEdgeMaterials(e){const t=this._getCachedEdgeMaterials(e);this.nodeCrossfadingEnabled||Vt(t,this.fullOpacity);const i=e.filteredIds;if(c(i)){return{hasEdges:t.some((e=>e!==Xe)),perFeatureEdgeMaterials:t}}let s=0,r=!1;const o=t.map(((t,o)=>e.featureIds[o]!==i[s]?Xe:(r=r||t!==Xe,s++,t)));return{hasEdges:r,perFeatureEdgeMaterials:o}}_updateComponentData(e){if(!this._hasComponentData)return;const t=e.objectHandle,i=this._getComponentParameters(e);this._collection.setComponentData(t,i),this._stage.renderView.requestRender()}_reloadAll(e=this.elevationOffset){this._removeAllNodeDataFromStage(e),null!=this._controller&&this._controller.restartNodeLoading()}_opacityChange(e){this.nodeCrossfadingEnabled&&this._crossfadeHelper.stopAllNodeFading(),this._nodeId2Meta.forEach((t=>{c(t)||(this._collection.updateMaterial(t.objectHandle,(t=>t.objectOpacity=e)),Vt(t.cachedEdgeMaterials,e),this._updateEdgeRendering(t))}))}_updateMaterial(e){this._collection.updateMaterial(e.objectHandle,(e=>{e.commonMaterialParameters.hasSlicePlane=this.slicePlaneEnabled,e.usePBR=this._usePBR,this._updateMaterialOverlay(e)}))}_updateMaterialOverlay(e){}_updateEngineObject(e){this._updateComponentData(e),this._applyFiltersToNode(e),this._addOrUpdateEdgeRendering(e),this._visibleGeometryChanged(e,Mt.UPDATE)}_slicePlaneEnabledChange(e){this._intersectionHandler&&(this._intersectionHandler.slicePlaneEnabled=e),h(this._labeler)&&(this._labeler.slicePlaneEnabled=e),this._nodeId2Meta.forEach((t=>{c(t)||(this._collection.updateMaterial(t.objectHandle,(t=>t.commonMaterialParameters.hasSlicePlane=e)),this._updateEdgeRendering(t,!1))}))}_updatePBR(e){this._nodeId2Meta.forEach((t=>{c(t)||this._collection.updateMaterial(t.objectHandle,(t=>t.usePBR=e))})),this._hasLoadedPBRTextures=!0}get _usePBR(){return!this._isIntegratedMesh&&this.view.qualitySettings.physicallyBasedRenderingEnabled}_updateEdgeRendering(e,t=!0){h(this._edgeView)&&this._edgeView.hasObject(e.objectHandle)&&this._addOrUpdateEdgeRendering(e,t)}_forAllNodes(e){this._nodeId2Meta.forEach(e)}_forAllFeatures(e,t,i=ce.VISIBLE_ONLY){n(this._nodeId2Meta,(s=>{if(c(s))return!1;if(h(t)){switch(t(s)){case he.EXIT:return!0;case he.SKIP:return!1}}let r=he.CONTINUE;switch(i){case ce.ALL:r=this._forAllFeaturesOfNode(s,e);break;case ce.VISIBLE_ONLY:r=this._forVisibleFeaturesOfNode(s,e);break;case ce.ALL_IN_CLIPPING_AREA:r=this._forAllFeaturesOfNodeInClippingArea(s,e)}return r===he.EXIT}))}_forAllFeaturesOfNode(e,t){let i=he.CONTINUE;const s=e.featureIds;for(let r=0;r<s.length;r++)if(i=t(s[r],r,e),i===he.EXIT)return i;return i}_forVisibleFeaturesOfNode(e,t){let i=he.CONTINUE;const s=e.featureIds;return this._collection.forEachVisibleComponent(e.objectHandle,(r=>(i=t(s[r],r,e),i===he.CONTINUE))),i}_forAllFeaturesOfNodeInClippingArea(e,t){if(c(this._renderClippingArea))return this._forAllFeaturesOfNode(e,t);const i=this._boundingRectNodeTest(e,this._renderClippingArea);if(i===Ke.OUTSIDE)return he.CONTINUE;if(i===Ke.INSIDE)return this._forAllFeaturesOfNode(e,t);const s=he.CONTINUE,r=e.featureIds,o=e.objectHandle,a=Ye(this._renderClippingArea,this._collection.getObjectTransform(o));for(let n=0;n<r.length;n++){if(!this._boundingRectFeatureTest(e,n,a))continue;const i=t(r[n],n,e);if(i===he.EXIT)return i}return s}_createAttributes(e,t){const i={};null!=t.featureIds&&(i[this._getObjectIdField()]=t.featureIds[e]);const s=h(t.attributeInfo)&&t.attributeInfo.attributeData;if(h(s))for(const r of Object.keys(s))i[r]=qe(s[r],e);return i}_createGraphic(e,t){return this._createLayerGraphic(this._createAttributes(e,t))}highlight(e){const t=this._highlights;if(\"number\"==typeof e||e instanceof i?e=[e]:e instanceof o&&(e=e.toArray()),Array.isArray(e)&&e.length>0){if(e[0]instanceof i){const i=e,s=this.i3slayer.fieldsIndex,r=this._getObjectIdField(),o=i.map((e=>Ze(s,e.attributes,r))),{set:a,handle:n}=t.acquireSet();return t.setFeatureIds(a,o),n}if(\"number\"==typeof e[0]){const i=e,{set:s,handle:r}=t.acquireSet();return t.setFeatureIds(s,i),r}}return Ft}resetHighlights(){d(this._highlights),this._highlights=new ve({collection:this._collection,forAllFeatures:e=>this._forAllFeatures(e,null,ce.ALL),forAllFeaturesOfNode:(e,t)=>this._forAllFeaturesOfNode(e,t)})}_visibleGeometryChanged(e,t){this._elevationProvider&&(this._elevationProvider.objectChanged(e.node),null==this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle=y((()=>{this.emit(\"visible-geometry-changed\"),this._visibleGeometryChangedSchedulerHandle=null}))),this._updateSnappingSources(e,t))}get performanceInfo(){const e={displayedNumberOfFeatures:0,maximumNumberOfFeatures:0,totalNumberOfFeatures:0,core:null,index:0,nodes:this._nodeId2Meta.size,\"Total GPU Memory Estimate\":(this._gpuMemoryEstimate/1048576).toFixed(1)+\"MB\",\"Geometry Memory Estimate\":(this._geoMemoryEstimate/1048576).toFixed(1)+\"MB\",\"Texture Memory Estimate\":(this._texMemoryEstimate/1048576).toFixed(1)+\"MB\",\"Unloaded Memory Estimate\":(this.getUnloadedMemory()/1048576).toFixed(1)+\"MB\"};return h(this._memCache)&&(e.MemCache=Math.round(100*this._memCache.hitRate)+\"% hit\"),this._controller&&(this._idbCacheEnabled&&(e.IDBCache=Math.round(100*this._idbCache.getHitRate())+\"% hit\"),this._controller.updateStats(e)),e}get test(){const e=this;return{controller:this._controller,labeler:this._labeler,get visibleObjectIds(){const t=[];return e._forAllFeatures((e=>(t.push(e),he.CONTINUE)),null,ce.VISIBLE_ONLY),t.sort(((e,t)=>e-t)),t},get numNodes(){return e._nodeId2Meta.size},get loadedNodes(){return Array.from(e._nodeId2Meta.keys()).sort(((e,t)=>e-t))}}}getNodeOpacityByIndex(e){const t=this._nodeId2Meta.get(e);return this.getNodeOpacity(t)}getNodeOpacity(e){return h(e)?this._collection.getMaterial(e.objectHandle).objectOpacity:0}isNodeFullyFadedIn(e){return this._crossfadeHelper.isNodeFullyFadedIn(e)}getNodeCrossfadeMetaData(e){return this._nodeId2Meta.get(e)}markNodeToRemove(e){this._controller&&this._controller.markNodeToRemove(e)}removeMarkedNodes(){this._controller&&this._controller.removeMarkedNodes()}foreachCrossfadeNode(e){this._nodeId2Meta.forEach(((t,i)=>e(i,t)))}fadeNode(e,t,i){if(!this.nodeCrossfadingEnabled)return;const s=this._nodeId2Meta.get(e);h(s)&&this._crossfadeHelper.fadeNode(e,s,t,i)}setNodeOpacityByIndex(e,t){const i=this._nodeId2Meta.get(e);h(i)&&this._setNodeOpacity(i,t)}_setNodeOpacity(e,t){this._collection.updateMaterial(e.objectHandle,(e=>e.objectOpacity=t)),this._setNodeEdgeOpacity(e,t)}_setNodeEdgeOpacity(e,t){if(c(this._edgeView)||!e.cachedEdgeMaterials)return;Vt(e.cachedEdgeMaterials,t);const i=e.objectHandle;this._edgeView.hasObject(i)&&this._edgeView.updateAllComponentOpacities(i,t).catch((e=>It(e,this.i3slayer.title)))}get hasModifications(){return this._isIntegratedMesh&&h(this._layerClippingArea)||this._modifications&&this._modifications.length>0}updateNodeModificationStatus(e){const t=e.length;if(!this.hasModifications||t<=0||!0!==this._i3sWasmLoaded)return;const i=this.uid,s=Pt(e);if(h(s)){const t={context:i,buffer:s.buffer};me(t);const r=new Float64Array(s.buffer);e.forAll(((e,t)=>{const i=r[t],s=ge(i);e.imModificationImpact=s,s!==De.Unmodified&&this._controller.invalidateGeometryVisibility(e.index)}))}}notifyUpdate(){this.notifyChange(\"updating\")}notifyLODUpdate(){this._controller.notifyLODUpdate()}isUpdating(){return!(!this._controller||!this._controller.updating)||!!this._visibleGeometryChangedSchedulerHandle||h(this._labeler)&&this._labeler.updating||this._crossfadeHelper.updating||this._i3sWasmLoaded instanceof Promise||this._asyncModuleLoading>0||h(this._elevationTask)&&this._elevationTask.running}trackSnappingSources(e){const t={events:e,fetchEdgeLocations:async(e,t,i)=>{const s=this._nodeId2Meta.get(e);if(c(s))throw new Error(\"invalid-node\");const{origin:r,buffer:o}=await this._collection.extractEdgeInformation(s.objectHandle,t,i);return this._snappingLocationsApplyElevation(s,o,r),{type:\"components\",objectIds:s.featureIds,locations:o,origin:r}},remove:()=>{s(this._snappingSourcesTrackers,t)}};return this._snappingSourcesTrackers.push(t),this._nodeId2Meta.forEach(((t,i)=>{if(c(t))return;const s=this._controller.getRenderMbs(t.node);h(s)&&e.add(i,s)})),t}_snappingLocationsApplyElevation(e,t,i){if(!e.elevationOffsets||this.elevationInfo.mode===Ut.Absolute)return;const s=t.position0,r=t.position1,o=t.componentIndex,a=U(),n=U(),l=(e,t)=>{N(e,e,i),this.view.renderCoordsHelper.worldUpAtPosition(e,n),N(e,e,F(n,n,t)),V(e,e,i)};for(let d=0;d<s.count;d++){const t=e.elevationOffsets[o.get(d)];s.getVec(d,a),l(a,t),s.setVec(d,a),r.getVec(d,a),l(a,t),r.setVec(d,a)}}_updateSnappingSources(e,t){const{index:i}=e.node,s=this._controller.getRenderMbs(e.node);if(!c(s))for(const r of this._snappingSourcesTrackers)t!==Mt.REMOVE&&t!==Mt.UPDATE||r.events.remove(i),t!==Mt.ADD&&t!==Mt.UPDATE||r.events.add(i,s)}};return e([M()],r.prototype,\"_hasLoadedPBRTextures\",void 0),e([M()],r.prototype,\"_asyncModuleLoading\",void 0),e([M()],r.prototype,\"_visibleGeometryChangedSchedulerHandle\",void 0),e([M()],r.prototype,\"view\",void 0),e([M()],r.prototype,\"i3slayer\",void 0),e([M()],r.prototype,\"_controller\",void 0),e([M()],r.prototype,\"_labeler\",void 0),e([M()],r.prototype,\"updating\",void 0),e([M()],r.prototype,\"suspended\",void 0),e([M()],r.prototype,\"holeFilling\",void 0),e([M(ot)],r.prototype,\"updatingProgress\",void 0),e([M()],r.prototype,\"updatingProgressValue\",null),e([M()],r.prototype,\"hasTexturesOrVertexColors\",null),e([M()],r.prototype,\"rendererTextureUsage\",null),e([M()],r.prototype,\"elevationOffset\",null),e([M()],r.prototype,\"elevationInfo\",null),e([M({type:Boolean})],r.prototype,\"slicePlaneEnabled\",void 0),e([M()],r.prototype,\"supportedTextureEncodings\",null),e([M()],r.prototype,\"uncompressedTextureDownsamplingEnabled\",null),e([M({type:[te]})],r.prototype,\"_modifications\",void 0),e([M()],r.prototype,\"_elevationTask\",void 0),e([M({readOnly:!0})],r.prototype,\"_usePBR\",null),r=e([C(_t)],r),r};function It(e,t){m(e)||mt.warn(\"Error while processing edges. Edges on this layer might not display correctly\",t,e)}var Mt;!function(e){e[e.ADD=0]=\"ADD\",e[e.REMOVE=1]=\"REMOVE\",e[e.UPDATE=2]=\"UPDATE\"}(Mt||(Mt={}));const Ct=K(),xt=Y(),Ot=Y(),Et=st(),St=[0,0,0,0],jt=new t([0,0,0,0]),wt=[0,0,0,0];function Tt(e){if(c(e))return!1;const t=e.metallicRoughness;return t&&t.baseColorTextureId>=0||t&&t.metallicRoughnessTextureId>=0||e.normalTextureId>=0||e.emissiveTextureId>=0||e.occlusionTextureId>=0}function At(e){return\"geometryData\"in e}function Dt(e){return h(e)&&v(e.data)}function Rt(e,t){let i=1024+e.interleavedVertexData.byteLength+(e.indices?e.indices.byteLength:0)+e.positionData.data.byteLength+e.positionData.indices.byteLength;if(h(t))for(const s of t)h(s)&&v(s.data)&&(i+=s.data.byteLength);return i}function Nt(e,t){return t.byteSize>yt?(mt.warn(`Node is too big to store in IndexedDB cache: ${e.id} (${t.byteSize} bytes)`),!1):t.byteSize>0}function Pt(e){if(0===e.length)return null;const t=10*e.length,i=new Float64Array(t);return e.forAll(((e,t)=>{let s=e.serviceObb;c(s)&&(s=Et,P(s.center,e.mbs),s.halfSize[0]=s.halfSize[1]=s.halfSize[2]=e.mbs[3]);const r=10*t;i[r+0]=s.center[0],i[r+1]=s.center[1],i[r+2]=s.center[2],i[r+3]=s.halfSize[0],i[r+4]=s.halfSize[1],i[r+5]=s.halfSize[2],i[r+6]=s.quaternion[0],i[r+7]=s.quaternion[1],i[r+8]=s.quaternion[2],i[r+9]=s.quaternion[3]})),i}const Ft={remove(){},pause(){},resume(){}};function Vt(e,t){e.forEach((e=>e.opacity=t))}var Ut;!function(e){e[e.Absolute=0]=\"Absolute\",e[e.RelativeToGround=1]=\"RelativeToGround\",e[e.OnTheGround=2]=\"OnTheGround\"}(Ut||(Ut={}));const Ht=U(),Gt=K(),Lt=\"elevation-change\";export{Ut as ElevationMode,vt as I3SMeshView3D};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}