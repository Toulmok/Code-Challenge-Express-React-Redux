{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport e from \"../../../../core/Error.js\";\nimport { clone as t } from \"../../../../core/lang.js\";\nimport { get as r, isSome as s, isNone as n } from \"../../../../core/maybe.js\";\nimport { getMetersPerVerticalUnitForSR as i } from \"../../../../core/unitUtils.js\";\nimport { e as o } from \"../../../../chunks/earcut.js\";\nimport { b as a } from \"../../../../chunks/mat3.js\";\nimport { c as l } from \"../../../../chunks/mat3f64.js\";\nimport { a as c, p as h } from \"../../../../chunks/mat4.js\";\nimport { c as m } from \"../../../../chunks/mat4f64.js\";\nimport { c as p, n as d, s as g, b as f, f as u, m as y } from \"../../../../chunks/vec3.js\";\nimport { d as b, c as _ } from \"../../../../chunks/vec3f64.js\";\nimport { computeTranslationToOriginAndRotation as E } from \"../../../../geometry/projection.js\";\nimport { create as x, empty as j, expandWithBuffer as w, intersectsClippingArea as S } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { BufferViewVec3f64 as P } from \"../../../../geometry/support/buffer/BufferView.js\";\nimport { t as v, a as L } from \"../../../../chunks/vec32.js\";\nimport { makeVertexCandidate as A, makeEdgeCandidate as C } from \"../../../../layers/graphics/data/SnappingCandidate.js\";\nimport { getDriverAxisSizeValue as M } from \"../../../../renderers/support/renderingInfoUtils.js\";\nimport { ViewingMode as I } from \"../../../ViewingMode.js\";\nimport { needsElevationUpdates3D as O, SampleElevationInfo as B } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as R } from \"./ElevationContext.js\";\nimport { Graphics3DObject3DGraphicLayer as z } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as T } from \"./Graphics3DSymbolLayer.js\";\nimport { validateSymbolLayerSize as D, computeCentroid as G } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as U } from \"./interfaces.js\";\nimport { geometryAsPolygon as k } from \"./polygonUtils.js\";\nimport { createMaterial as N } from \"../support/edgeUtils.js\";\nimport F from \"../../support/debugFlags.js\";\nimport { SamplePosition as V } from \"../../support/ElevationProvider.js\";\nimport { geometryToRenderInfo as H } from \"../../support/renderInfoUtils/polygon.js\";\nimport { Attribute as Y } from \"../../webgl-engine/lib/Attribute.js\";\nimport { CullFaceOptions as W } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { ContentObjectType as Z } from \"../../webgl-engine/lib/ContentObjectType.js\";\nimport { Geometry as q } from \"../../webgl-engine/lib/Geometry.js\";\nimport { isGeometryWithMapPositions as J } from \"../../webgl-engine/lib/GeometryWithMapPositions.js\";\nimport { Object3D as K } from \"../../webgl-engine/lib/Object3D.js\";\nimport { VertexAttribute as Q } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { DefaultMaterial as X } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nconst $ = [\"polygon\", \"extent\"];\nclass ee extends T {\n  constructor(e, t, r, s) {\n    super(e, t, r, s), this.ensureDrapedStatus(!1);\n  }\n  async doLoad() {\n    if (!this._drivenProperties.size) {\n      const t = D(this._getSymbolSize());\n      if (t) throw new e(\"graphics3dextrudesymbollayer:invalid-size\", t);\n    }\n    const t = r(this.symbolLayer, \"material\", \"color\"),\n      s = this._getCombinedOpacityAndColor(t),\n      n = b(s),\n      i = s[3],\n      o = i < 1 || this.needsDrivenTransparentPass,\n      a = {\n        usePBR: this._context.physicalBasedRenderingEnabled,\n        isSchematic: !0,\n        diffuse: n,\n        ambient: n,\n        opacity: i,\n        transparent: o,\n        cullFace: o ? W.None : W.Back,\n        hasVertexColors: !0,\n        hasSlicePlane: this._context.slicePlaneEnabled,\n        castShadows: this.symbolLayer.castShadows,\n        offsetTransparentBackfaces: !0\n      };\n    this._material = new X(a), this._bottomMaterial = new X({\n      ...a,\n      cullFace: W.Back\n    }), this._context.stage.add(this._material), this._context.stage.add(this._bottomMaterial);\n  }\n  destroy() {\n    super.destroy(), this._material && (this._context.stage.remove(this._material), this._context.stage.remove(this._bottomMaterial));\n  }\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry, $, this.symbolLayer.type)) return null;\n    const r = this._getVertexOpacityAndColor(e.renderingInfo, 255),\n      s = this.setGraphicElevationContext(t, new R());\n    return this._createAs3DShape(t, e.renderingInfo, r, s, t.uid);\n  }\n  layerOpacityChanged(e, t) {\n    const n = r(this.symbolLayer, \"material\", \"color\"),\n      i = this._getCombinedOpacity(n),\n      o = i < 1 || this.needsDrivenTransparentPass;\n    this._material.setParameters({\n      opacity: i,\n      transparent: o\n    }), this._bottomMaterial.setParameters({\n      opacity: i,\n      transparent: o\n    });\n    const a = this._getLayerOpacity();\n    e.forEach(e => {\n      const r = t(e);\n      s(r) && r.layerOpacityChanged(a, this._context.isAsync);\n    });\n  }\n  layerElevationInfoChanged(e, t) {\n    return this.updateGraphics3DGraphicElevationInfo(e, t, O);\n  }\n  slicePlaneEnabledChanged(e, t) {\n    return this._material.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), this._bottomMaterial.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), e.forEach(e => {\n      const r = t(e);\n      s(r) && r.slicePlaneEnabledChanged(this._context.slicePlaneEnabled, this._context.isAsync);\n    }), !0;\n  }\n  physicalBasedRenderingChanged() {\n    return this._material.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }), this._bottomMaterial.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }), !0;\n  }\n  pixelRatioChanged() {\n    return !0;\n  }\n  skipHighSymbolLodsChanged() {\n    return !0;\n  }\n  _getExtrusionSize(e) {\n    let t;\n    return t = e.size && this._drivenProperties.size ? M(e.size, 2) ?? 0 : this._getSymbolSize(), t /= this._context.renderCoordsHelper.unitInMeters, t;\n  }\n  applyRendererDiff(e, t) {\n    return this._drivenPropertiesChanged(t) ? U.Recreate_Symbol : U.Recreate_Graphics;\n  }\n  async queryForSnapping(e, r, s, n) {\n    const o = this._getExtrusionSize(s) * this._context.renderCoordsHelper.unitInMeters / i(r),\n      {\n        objectId: a,\n        target: l\n      } = e,\n      c = t(l);\n    switch (c.z = (c.z ?? 0) + o, e.type) {\n      case \"edge\":\n        {\n          const {\n              start: r,\n              end: s\n            } = e,\n            n = t(r),\n            i = t(s);\n          return n.z = (n.z ?? 0) + o, i.z = (i.z ?? 0) + o, [C(a, c, 1 / 0, n, i)];\n        }\n      case \"vertex\":\n        return [A(a, c, 1 / 0), C(a, l, 1 / 0, l, c)];\n      default:\n        return [];\n    }\n  }\n  _getSymbolSize() {\n    return this.symbolLayer.size ?? 1;\n  }\n  _createAs3DShape(e, t, r, i, h) {\n    const p = k(e.geometry);\n    if (n(p)) return null;\n    if (0 === p.rings.length || !p.rings.some(e => e.length > 0)) return this._logGeometryValidationWarnings(p.rings, \"rings\", \"ExtrudeSymbol3DLayer\"), null;\n    const d = H(p, this._context.elevationProvider, this._context.renderCoordsHelper, i);\n    this._logGeometryCreationWarnings(d, p.rings, \"rings\", \"ExtrudeSymbol3DLayer\");\n    const g = G(p);\n    if (n(g)) return null;\n    const f = new Array(),\n      u = x(),\n      y = m(),\n      b = _(),\n      A = this._context.renderCoordsHelper.viewingMode === I.Global;\n    A || this._context.renderCoordsHelper.worldUpAtPosition(null, b), E(p.spatialReference, [g.x, g.y, 0], y, this._context.renderCoordsHelper.spatialReference);\n    const C = m();\n    c(C, y);\n    const M = l();\n    a(M, C);\n    const {\n        polygons: B,\n        mapPositions: R,\n        position: T\n      } = d,\n      D = T.length / 3,\n      U = new Float64Array(3 * D * 6),\n      F = new Float64Array(3 * D * 6),\n      V = new Float64Array(3 * D * 6),\n      Y = new Float64Array(1 * D * 6);\n    let W = 0;\n    for (let s = 0; s < B.length; ++s) {\n      const e = B[s],\n        n = e.count;\n      if (this._context.clippingExtent && (j(u), w(u, e.mapPositions), !S(u, this._context.clippingExtent))) continue;\n      const i = o(e.mapPositions, e.holeIndices, 3);\n      if (0 === i.length) continue;\n      const a = 3 * n * 2 + i.length,\n        l = new Array(a),\n        c = new Array(i.length),\n        m = 6 * n,\n        p = 3 * U.BYTES_PER_ELEMENT,\n        d = new P(U.buffer, W * p, p, (W + m) * p),\n        g = 3 * F.BYTES_PER_ELEMENT,\n        y = new P(F.buffer, W * g, g, (W + m) * g),\n        _ = new Float64Array(V.buffer, 3 * W * V.BYTES_PER_ELEMENT, 3 * m),\n        E = new Float64Array(Y.buffer, 1 * W * Y.BYTES_PER_ELEMENT, 1 * m),\n        x = this._getExtrusionSize(t);\n      re(T, R, i, e, d.typedBuffer, _, y.typedBuffer, E, l, c, x, b, A), v(d, d, C), L(y, y, M), W += 6 * n;\n      const I = this._context.stage.renderView.getObjectAndLayerIdColor({\n          graphicUid: h,\n          layerUid: this._context.layer.uid\n        }),\n        O = new xe(d.typedBuffer, _, y.typedBuffer, E);\n      f.push(te(this._material, l, l.length - c.length, O, r, I)), f.push(te(this._bottomMaterial, c, 0, O, r, I));\n    }\n    if (0 === f.length) return null;\n    const Z = new K({\n      geometries: f,\n      metadata: {\n        layerUid: this._context.layer.uid,\n        graphicUid: h,\n        isElevationSource: !0\n      }\n    });\n    Z.transformation = y;\n    const q = N(this.symbolLayer, {\n        opacity: this._getLayerOpacity()\n      }),\n      J = s(q) ? {\n        baseMaterial: this._material,\n        edgeMaterials: [q],\n        properties: {\n          mergeGeometries: !0,\n          hasSlicePlane: this._context.slicePlaneEnabled\n        }\n      } : null,\n      Q = new z(this, Z, f, null, null, ge, i, J);\n    return Q.alignedSampledElevation = d.sampledElevation, Q.needsElevationUpdates = O(i.mode), Q;\n  }\n}\nfunction te(e, t, r, s, n, i) {\n  const o = new Array(t.length).fill(0),\n    a = [[Q.POSITION, new Y(s.positions, 3, !0)], [Q.NORMAL, new Y(s.normals, 3, !0)], [Q.COLOR, new Y(n, 4, !0)], [Q.SIZE, new Y(s.heights, 1, !0)]],\n    l = [[Q.POSITION, t], [Q.NORMAL, t], [Q.COLOR, o]];\n  return new q(e, a, l, s.elevation, Z.Mesh, i, r);\n}\nfunction re(e, t, r, s, n, i, o, a, l, c, h, m, p) {\n  const d = r.length / 3;\n  let g = 0,\n    f = 2 * s.count;\n  se(e, t, s.index, s.count, r, 0, d, n, i, o, a, l, c, f, h, m, p);\n  let u = 2 * s.count;\n  f = 0, oe(n, i, a, o, g, s.pathLengths[0], s.count, u, l, f, h), u += 4 * s.pathLengths[0], f += 2 * s.pathLengths[0], g += s.pathLengths[0];\n  for (let y = 1; y < s.pathLengths.length; ++y) oe(n, i, a, o, g, s.pathLengths[y], s.count, u, l, f, h), u += 4 * s.pathLengths[y], f += 2 * s.pathLengths[y], g += s.pathLengths[y];\n}\nfunction se(e, t, r, s, n, i, o, a, l, c, h, m, g, f, u, y, b) {\n  p(ue, y);\n  const _ = u > 0 ? 1 : -1;\n  let E = 3 * r,\n    x = 0,\n    j = 3 * x,\n    w = s,\n    S = 3 * w;\n  for (let p = 0; p < s; ++p) b && (ue[0] = e[E + 0], ue[1] = e[E + 1], ue[2] = e[E + 2], d(ue, ue)), a[j + 0] = e[E + 0], a[j + 1] = e[E + 1], a[j + 2] = e[E + 2], l[j + 0] = t[E + 0], l[j + 1] = t[E + 1], l[j + 2] = t[E + 2], c[j + 0] = -_ * ue[0], c[j + 1] = -_ * ue[1], c[j + 2] = -_ * ue[2], h[x] = 0, a[S + 0] = e[E + 0] + u * ue[0], a[S + 1] = e[E + 1] + u * ue[1], a[S + 2] = e[E + 2] + u * ue[2], l[S + 0] = t[E + 0], l[S + 1] = t[E + 1], l[S + 2] = t[E + 2], c[S + 0] = _ * ue[0], c[S + 1] = _ * ue[1], c[S + 2] = _ * ue[2], h[w] = u, j += 3, S += 3, E += 3, x += 1, w += 1;\n  E = 3 * i, j = 0, S = 3 * f;\n  const P = u < 0 ? _e : be,\n    v = u < 0 ? be : _e;\n  for (let p = 0; p < o; ++p) g[j + 0] = n[E + P[0]], g[j + 1] = n[E + P[1]], g[j + 2] = n[E + P[2]], m[S + 0] = n[E + v[0]] + s, m[S + 1] = n[E + v[1]] + s, m[S + 2] = n[E + v[2]] + s, j += 3, S += 3, E += 3;\n}\nfunction ne(e, t, r, s, n, i, o) {\n  s[i] = s[o], o *= 3, e[(i *= 3) + 0] = e[o + 0], e[i + 1] = e[o + 1], e[i + 2] = e[o + 2], t[i + 0] = t[o + 0], t[i + 1] = t[o + 1], t[i + 2] = t[o + 2], r[i + 0] = n[0], r[i + 1] = n[1], r[i + 2] = n[2];\n}\nconst ie = _();\nfunction oe(e, t, r, s, n, i, o, a, l, c, h) {\n  let m = n,\n    p = n + 1,\n    d = n + o,\n    g = n + o + 1,\n    f = a,\n    u = a + 1,\n    y = a + 2 * i,\n    b = a + 2 * i + 1;\n  h < 0 && (m = n + o + 1, g = n), c *= 3;\n  for (let _ = 0; _ < i; ++_) _ === i - 1 && (h > 0 ? (p = n, g = n + o) : (p = n, m = n + o)), pe(e, m, p, d, ie), ne(e, t, s, r, ie, f, m), ne(e, t, s, r, ie, u, p), ne(e, t, s, r, ie, y, d), ne(e, t, s, r, ie, b, g), l[c++] = f, l[c++] = y, l[c++] = b, l[c++] = f, l[c++] = b, l[c++] = u, m++, p++, d++, g++, f += 2, u += 2, y += 2, b += 2;\n}\nconst ae = _(),\n  le = _(),\n  ce = _(),\n  he = _(),\n  me = _();\nfunction pe(e, t, r, s, n) {\n  t *= 3, r *= 3, s *= 3, g(ae, e[t++], e[t++], e[t++]), g(le, e[r++], e[r++], e[r++]), g(ce, e[s++], e[s++], e[s++]), f(he, le, ae), f(me, ce, ae), u(n, me, he), d(n, n);\n}\nconst de = _();\nfunction ge(e, t, r, n, i) {\n  const o = e.stageObject,\n    a = o.geometries,\n    l = a.length,\n    c = \"absolute-height\" !== t.mode;\n  let p = 0;\n  const d = o.transformation,\n    f = h(m(), d);\n  for (let h = 0; h < l; h += 2) {\n    const e = a[h];\n    if (!J(e)) continue;\n    const t = e.getMutableAttribute(Q.POSITION).data,\n      l = e.vertexAttributes.get(Q.SIZE).data,\n      m = new V(e.mapPositions),\n      u = t.length / 3;\n    let b = 0,\n      _ = !1,\n      E = 0;\n    for (let o = 0; o < u; o++) {\n      de[0] = t[b], de[1] = t[b + 1], de[2] = t[b + 2], n(m, ye), c && (E += ye.sampledElevation), F.TESTS_DISABLE_OPTIMIZATIONS ? (g(fe, m.array[m.offset + 0], m.array[m.offset + 1], ye.z + l[b / 3]), s(r) && i.toRenderCoords(fe, r, fe), y(fe, fe, f)) : (g(fe, t[b + 0], t[b + 1], t[b + 2]), y(fe, fe, d), i.setAltitude(fe, ye.z + l[b / 3]), y(fe, fe, f)), t[b] = fe[0], t[b + 1] = fe[1], t[b + 2] = fe[2];\n      const e = Ee / i.unitInMeters;\n      (Math.abs(de[0] - t[b]) >= e || Math.abs(de[1] - t[b + 1]) >= e || Math.abs(de[2] - t[b + 2]) >= e) && (_ = !0), m.offset += 3, b += 3;\n    }\n    _ && (e.invalidateBoundingInfo(), o.geometryVertexAttrsUpdated(a[h]), a[h + 1].invalidateBoundingInfo(), o.geometryVertexAttrsUpdated(a[h + 1])), p += E / u;\n  }\n  return p / l;\n}\nconst fe = _(),\n  ue = _(),\n  ye = new B(),\n  be = [0, 2, 1],\n  _e = [0, 1, 2],\n  Ee = .01;\nclass xe {\n  constructor(e, t, r, s) {\n    this.positions = e, this.elevation = t, this.normals = r, this.heights = s;\n  }\n}\nexport { ee as Graphics3DExtrudeSymbolLayer };","map":{"version":3,"names":["e","clone","t","get","r","isSome","s","isNone","n","getMetersPerVerticalUnitForSR","i","o","b","a","c","l","p","h","m","d","g","f","u","y","_","computeTranslationToOriginAndRotation","E","create","x","empty","j","expandWithBuffer","w","intersectsClippingArea","S","BufferViewVec3f64","P","v","L","makeVertexCandidate","A","makeEdgeCandidate","C","getDriverAxisSizeValue","M","ViewingMode","I","needsElevationUpdates3D","O","SampleElevationInfo","B","ElevationContext","R","Graphics3DObject3DGraphicLayer","z","Graphics3DSymbolLayer","T","validateSymbolLayerSize","D","computeCentroid","G","ApplyRendererDiffResult","U","geometryAsPolygon","k","createMaterial","N","F","SamplePosition","V","geometryToRenderInfo","H","Attribute","Y","CullFaceOptions","W","ContentObjectType","Z","Geometry","q","isGeometryWithMapPositions","J","Object3D","K","VertexAttribute","Q","DefaultMaterial","X","$","ee","constructor","ensureDrapedStatus","doLoad","_drivenProperties","size","_getSymbolSize","symbolLayer","_getCombinedOpacityAndColor","needsDrivenTransparentPass","usePBR","_context","physicalBasedRenderingEnabled","isSchematic","diffuse","ambient","opacity","transparent","cullFace","None","Back","hasVertexColors","hasSlicePlane","slicePlaneEnabled","castShadows","offsetTransparentBackfaces","_material","_bottomMaterial","stage","add","destroy","remove","createGraphics3DGraphic","graphic","_validateGeometry","geometry","type","_getVertexOpacityAndColor","renderingInfo","setGraphicElevationContext","_createAs3DShape","uid","layerOpacityChanged","_getCombinedOpacity","setParameters","_getLayerOpacity","forEach","isAsync","layerElevationInfoChanged","updateGraphics3DGraphicElevationInfo","slicePlaneEnabledChanged","physicalBasedRenderingChanged","pixelRatioChanged","skipHighSymbolLodsChanged","_getExtrusionSize","renderCoordsHelper","unitInMeters","applyRendererDiff","_drivenPropertiesChanged","Recreate_Symbol","Recreate_Graphics","queryForSnapping","objectId","target","start","end","rings","length","some","_logGeometryValidationWarnings","elevationProvider","_logGeometryCreationWarnings","Array","viewingMode","Global","worldUpAtPosition","spatialReference","polygons","mapPositions","position","Float64Array","count","clippingExtent","holeIndices","BYTES_PER_ELEMENT","buffer","re","typedBuffer","renderView","getObjectAndLayerIdColor","graphicUid","layerUid","layer","xe","push","te","geometries","metadata","isElevationSource","transformation","baseMaterial","edgeMaterials","properties","mergeGeometries","ge","alignedSampledElevation","sampledElevation","needsElevationUpdates","mode","fill","POSITION","positions","NORMAL","normals","COLOR","SIZE","heights","elevation","Mesh","se","index","oe","pathLengths","ue","_e","be","ne","ie","pe","ae","le","ce","he","me","de","stageObject","getMutableAttribute","data","vertexAttributes","ye","TESTS_DISABLE_OPTIMIZATIONS","fe","array","offset","toRenderCoords","setAltitude","Ee","Math","abs","invalidateBoundingInfo","geometryVertexAttrsUpdated","Graphics3DExtrudeSymbolLayer"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DExtrudeSymbolLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import e from\"../../../../core/Error.js\";import{clone as t}from\"../../../../core/lang.js\";import{get as r,isSome as s,isNone as n}from\"../../../../core/maybe.js\";import{getMetersPerVerticalUnitForSR as i}from\"../../../../core/unitUtils.js\";import{e as o}from\"../../../../chunks/earcut.js\";import{b as a}from\"../../../../chunks/mat3.js\";import{c as l}from\"../../../../chunks/mat3f64.js\";import{a as c,p as h}from\"../../../../chunks/mat4.js\";import{c as m}from\"../../../../chunks/mat4f64.js\";import{c as p,n as d,s as g,b as f,f as u,m as y}from\"../../../../chunks/vec3.js\";import{d as b,c as _}from\"../../../../chunks/vec3f64.js\";import{computeTranslationToOriginAndRotation as E}from\"../../../../geometry/projection.js\";import{create as x,empty as j,expandWithBuffer as w,intersectsClippingArea as S}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f64 as P}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as v,a as L}from\"../../../../chunks/vec32.js\";import{makeVertexCandidate as A,makeEdgeCandidate as C}from\"../../../../layers/graphics/data/SnappingCandidate.js\";import{getDriverAxisSizeValue as M}from\"../../../../renderers/support/renderingInfoUtils.js\";import{ViewingMode as I}from\"../../../ViewingMode.js\";import{needsElevationUpdates3D as O,SampleElevationInfo as B}from\"./elevationAlignmentUtils.js\";import{ElevationContext as R}from\"./ElevationContext.js\";import{Graphics3DObject3DGraphicLayer as z}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as T}from\"./Graphics3DSymbolLayer.js\";import{validateSymbolLayerSize as D,computeCentroid as G}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as U}from\"./interfaces.js\";import{geometryAsPolygon as k}from\"./polygonUtils.js\";import{createMaterial as N}from\"../support/edgeUtils.js\";import F from\"../../support/debugFlags.js\";import{SamplePosition as V}from\"../../support/ElevationProvider.js\";import{geometryToRenderInfo as H}from\"../../support/renderInfoUtils/polygon.js\";import{Attribute as Y}from\"../../webgl-engine/lib/Attribute.js\";import{CullFaceOptions as W}from\"../../webgl-engine/lib/basicInterfaces.js\";import{ContentObjectType as Z}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Geometry as q}from\"../../webgl-engine/lib/Geometry.js\";import{isGeometryWithMapPositions as J}from\"../../webgl-engine/lib/GeometryWithMapPositions.js\";import{Object3D as K}from\"../../webgl-engine/lib/Object3D.js\";import{VertexAttribute as Q}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as X}from\"../../webgl-engine/materials/DefaultMaterial.js\";const $=[\"polygon\",\"extent\"];class ee extends T{constructor(e,t,r,s){super(e,t,r,s),this.ensureDrapedStatus(!1)}async doLoad(){if(!this._drivenProperties.size){const t=D(this._getSymbolSize());if(t)throw new e(\"graphics3dextrudesymbollayer:invalid-size\",t)}const t=r(this.symbolLayer,\"material\",\"color\"),s=this._getCombinedOpacityAndColor(t),n=b(s),i=s[3],o=i<1||this.needsDrivenTransparentPass,a={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,diffuse:n,ambient:n,opacity:i,transparent:o,cullFace:o?W.None:W.Back,hasVertexColors:!0,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,offsetTransparentBackfaces:!0};this._material=new X(a),this._bottomMaterial=new X({...a,cullFace:W.Back}),this._context.stage.add(this._material),this._context.stage.add(this._bottomMaterial)}destroy(){super.destroy(),this._material&&(this._context.stage.remove(this._material),this._context.stage.remove(this._bottomMaterial))}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,$,this.symbolLayer.type))return null;const r=this._getVertexOpacityAndColor(e.renderingInfo,255),s=this.setGraphicElevationContext(t,new R);return this._createAs3DShape(t,e.renderingInfo,r,s,t.uid)}layerOpacityChanged(e,t){const n=r(this.symbolLayer,\"material\",\"color\"),i=this._getCombinedOpacity(n),o=i<1||this.needsDrivenTransparentPass;this._material.setParameters({opacity:i,transparent:o}),this._bottomMaterial.setParameters({opacity:i,transparent:o});const a=this._getLayerOpacity();e.forEach((e=>{const r=t(e);s(r)&&r.layerOpacityChanged(a,this._context.isAsync)}))}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,O)}slicePlaneEnabledChanged(e,t){return this._material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),this._bottomMaterial.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),e.forEach((e=>{const r=t(e);s(r)&&r.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync)})),!0}physicalBasedRenderingChanged(){return this._material.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),this._bottomMaterial.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),!0}pixelRatioChanged(){return!0}skipHighSymbolLodsChanged(){return!0}_getExtrusionSize(e){let t;return t=e.size&&this._drivenProperties.size?M(e.size,2)??0:this._getSymbolSize(),t/=this._context.renderCoordsHelper.unitInMeters,t}applyRendererDiff(e,t){return this._drivenPropertiesChanged(t)?U.Recreate_Symbol:U.Recreate_Graphics}async queryForSnapping(e,r,s,n){const o=this._getExtrusionSize(s)*this._context.renderCoordsHelper.unitInMeters/i(r),{objectId:a,target:l}=e,c=t(l);switch(c.z=(c.z??0)+o,e.type){case\"edge\":{const{start:r,end:s}=e,n=t(r),i=t(s);return n.z=(n.z??0)+o,i.z=(i.z??0)+o,[C(a,c,1/0,n,i)]}case\"vertex\":return[A(a,c,1/0),C(a,l,1/0,l,c)];default:return[]}}_getSymbolSize(){return this.symbolLayer.size??1}_createAs3DShape(e,t,r,i,h){const p=k(e.geometry);if(n(p))return null;if(0===p.rings.length||!p.rings.some((e=>e.length>0)))return this._logGeometryValidationWarnings(p.rings,\"rings\",\"ExtrudeSymbol3DLayer\"),null;const d=H(p,this._context.elevationProvider,this._context.renderCoordsHelper,i);this._logGeometryCreationWarnings(d,p.rings,\"rings\",\"ExtrudeSymbol3DLayer\");const g=G(p);if(n(g))return null;const f=new Array,u=x(),y=m(),b=_(),A=this._context.renderCoordsHelper.viewingMode===I.Global;A||this._context.renderCoordsHelper.worldUpAtPosition(null,b),E(p.spatialReference,[g.x,g.y,0],y,this._context.renderCoordsHelper.spatialReference);const C=m();c(C,y);const M=l();a(M,C);const{polygons:B,mapPositions:R,position:T}=d,D=T.length/3,U=new Float64Array(3*D*6),F=new Float64Array(3*D*6),V=new Float64Array(3*D*6),Y=new Float64Array(1*D*6);let W=0;for(let s=0;s<B.length;++s){const e=B[s],n=e.count;if(this._context.clippingExtent&&(j(u),w(u,e.mapPositions),!S(u,this._context.clippingExtent)))continue;const i=o(e.mapPositions,e.holeIndices,3);if(0===i.length)continue;const a=3*n*2+i.length,l=new Array(a),c=new Array(i.length),m=6*n,p=3*U.BYTES_PER_ELEMENT,d=new P(U.buffer,W*p,p,(W+m)*p),g=3*F.BYTES_PER_ELEMENT,y=new P(F.buffer,W*g,g,(W+m)*g),_=new Float64Array(V.buffer,3*W*V.BYTES_PER_ELEMENT,3*m),E=new Float64Array(Y.buffer,1*W*Y.BYTES_PER_ELEMENT,1*m),x=this._getExtrusionSize(t);re(T,R,i,e,d.typedBuffer,_,y.typedBuffer,E,l,c,x,b,A),v(d,d,C),L(y,y,M),W+=6*n;const I=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:h,layerUid:this._context.layer.uid}),O=new xe(d.typedBuffer,_,y.typedBuffer,E);f.push(te(this._material,l,l.length-c.length,O,r,I)),f.push(te(this._bottomMaterial,c,0,O,r,I))}if(0===f.length)return null;const Z=new K({geometries:f,metadata:{layerUid:this._context.layer.uid,graphicUid:h,isElevationSource:!0}});Z.transformation=y;const q=N(this.symbolLayer,{opacity:this._getLayerOpacity()}),J=s(q)?{baseMaterial:this._material,edgeMaterials:[q],properties:{mergeGeometries:!0,hasSlicePlane:this._context.slicePlaneEnabled}}:null,Q=new z(this,Z,f,null,null,ge,i,J);return Q.alignedSampledElevation=d.sampledElevation,Q.needsElevationUpdates=O(i.mode),Q}}function te(e,t,r,s,n,i){const o=new Array(t.length).fill(0),a=[[Q.POSITION,new Y(s.positions,3,!0)],[Q.NORMAL,new Y(s.normals,3,!0)],[Q.COLOR,new Y(n,4,!0)],[Q.SIZE,new Y(s.heights,1,!0)]],l=[[Q.POSITION,t],[Q.NORMAL,t],[Q.COLOR,o]];return new q(e,a,l,s.elevation,Z.Mesh,i,r)}function re(e,t,r,s,n,i,o,a,l,c,h,m,p){const d=r.length/3;let g=0,f=2*s.count;se(e,t,s.index,s.count,r,0,d,n,i,o,a,l,c,f,h,m,p);let u=2*s.count;f=0,oe(n,i,a,o,g,s.pathLengths[0],s.count,u,l,f,h),u+=4*s.pathLengths[0],f+=2*s.pathLengths[0],g+=s.pathLengths[0];for(let y=1;y<s.pathLengths.length;++y)oe(n,i,a,o,g,s.pathLengths[y],s.count,u,l,f,h),u+=4*s.pathLengths[y],f+=2*s.pathLengths[y],g+=s.pathLengths[y]}function se(e,t,r,s,n,i,o,a,l,c,h,m,g,f,u,y,b){p(ue,y);const _=u>0?1:-1;let E=3*r,x=0,j=3*x,w=s,S=3*w;for(let p=0;p<s;++p)b&&(ue[0]=e[E+0],ue[1]=e[E+1],ue[2]=e[E+2],d(ue,ue)),a[j+0]=e[E+0],a[j+1]=e[E+1],a[j+2]=e[E+2],l[j+0]=t[E+0],l[j+1]=t[E+1],l[j+2]=t[E+2],c[j+0]=-_*ue[0],c[j+1]=-_*ue[1],c[j+2]=-_*ue[2],h[x]=0,a[S+0]=e[E+0]+u*ue[0],a[S+1]=e[E+1]+u*ue[1],a[S+2]=e[E+2]+u*ue[2],l[S+0]=t[E+0],l[S+1]=t[E+1],l[S+2]=t[E+2],c[S+0]=_*ue[0],c[S+1]=_*ue[1],c[S+2]=_*ue[2],h[w]=u,j+=3,S+=3,E+=3,x+=1,w+=1;E=3*i,j=0,S=3*f;const P=u<0?_e:be,v=u<0?be:_e;for(let p=0;p<o;++p)g[j+0]=n[E+P[0]],g[j+1]=n[E+P[1]],g[j+2]=n[E+P[2]],m[S+0]=n[E+v[0]]+s,m[S+1]=n[E+v[1]]+s,m[S+2]=n[E+v[2]]+s,j+=3,S+=3,E+=3}function ne(e,t,r,s,n,i,o){s[i]=s[o],o*=3,e[(i*=3)+0]=e[o+0],e[i+1]=e[o+1],e[i+2]=e[o+2],t[i+0]=t[o+0],t[i+1]=t[o+1],t[i+2]=t[o+2],r[i+0]=n[0],r[i+1]=n[1],r[i+2]=n[2]}const ie=_();function oe(e,t,r,s,n,i,o,a,l,c,h){let m=n,p=n+1,d=n+o,g=n+o+1,f=a,u=a+1,y=a+2*i,b=a+2*i+1;h<0&&(m=n+o+1,g=n),c*=3;for(let _=0;_<i;++_)_===i-1&&(h>0?(p=n,g=n+o):(p=n,m=n+o)),pe(e,m,p,d,ie),ne(e,t,s,r,ie,f,m),ne(e,t,s,r,ie,u,p),ne(e,t,s,r,ie,y,d),ne(e,t,s,r,ie,b,g),l[c++]=f,l[c++]=y,l[c++]=b,l[c++]=f,l[c++]=b,l[c++]=u,m++,p++,d++,g++,f+=2,u+=2,y+=2,b+=2}const ae=_(),le=_(),ce=_(),he=_(),me=_();function pe(e,t,r,s,n){t*=3,r*=3,s*=3,g(ae,e[t++],e[t++],e[t++]),g(le,e[r++],e[r++],e[r++]),g(ce,e[s++],e[s++],e[s++]),f(he,le,ae),f(me,ce,ae),u(n,me,he),d(n,n)}const de=_();function ge(e,t,r,n,i){const o=e.stageObject,a=o.geometries,l=a.length,c=\"absolute-height\"!==t.mode;let p=0;const d=o.transformation,f=h(m(),d);for(let h=0;h<l;h+=2){const e=a[h];if(!J(e))continue;const t=e.getMutableAttribute(Q.POSITION).data,l=e.vertexAttributes.get(Q.SIZE).data,m=new V(e.mapPositions),u=t.length/3;let b=0,_=!1,E=0;for(let o=0;o<u;o++){de[0]=t[b],de[1]=t[b+1],de[2]=t[b+2],n(m,ye),c&&(E+=ye.sampledElevation),F.TESTS_DISABLE_OPTIMIZATIONS?(g(fe,m.array[m.offset+0],m.array[m.offset+1],ye.z+l[b/3]),s(r)&&i.toRenderCoords(fe,r,fe),y(fe,fe,f)):(g(fe,t[b+0],t[b+1],t[b+2]),y(fe,fe,d),i.setAltitude(fe,ye.z+l[b/3]),y(fe,fe,f)),t[b]=fe[0],t[b+1]=fe[1],t[b+2]=fe[2];const e=Ee/i.unitInMeters;(Math.abs(de[0]-t[b])>=e||Math.abs(de[1]-t[b+1])>=e||Math.abs(de[2]-t[b+2])>=e)&&(_=!0),m.offset+=3,b+=3}_&&(e.invalidateBoundingInfo(),o.geometryVertexAttrsUpdated(a[h]),a[h+1].invalidateBoundingInfo(),o.geometryVertexAttrsUpdated(a[h+1])),p+=E/u}return p/l}const fe=_(),ue=_(),ye=new B,be=[0,2,1],_e=[0,1,2],Ee=.01;class xe{constructor(e,t,r,s){this.positions=e,this.elevation=t,this.normals=r,this.heights=s}}export{ee as Graphics3DExtrudeSymbolLayer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}