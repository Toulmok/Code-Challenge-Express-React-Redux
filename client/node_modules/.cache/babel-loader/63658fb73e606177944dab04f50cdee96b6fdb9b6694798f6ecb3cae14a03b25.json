{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { f as r } from \"../../../../chunks/vec4f64.js\";\nimport { BufferViewVec4u8 as t } from \"../../../../geometry/support/buffer/BufferView.js\";\nclass o {\n  constructor() {\n    this.declaredClass = \"esri.views.3d.webgl-engine.lib.ObjectAndLayerIdRenderHelper\", this.colorZero = new t(new ArrayBuffer(4)), this._uidToRenderColor = new Map(), this._colorToUID = new Map(), this._layerUidToGraphicsUidToObjectId = new Map(), this._layerUidToId = new Map(), this._layerUidToPopupEnabled = new Map();\n  }\n  setUidToObjectAndLayerId(e, r, t, o, i) {\n    let d = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n    let a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n    let s = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n    if (!(e && r && t && o)) return;\n    if (this._layerUidToId.set(o, t), this._layerUidToPopupEnabled.set(o, i), !i) return;\n    let n = this._layerUidToGraphicsUidToObjectId.get(o);\n    n || (n = new Map(), this._layerUidToGraphicsUidToObjectId.set(o, n)), n.set(r, {\n      objectId: e,\n      attributeNodeId: d,\n      attributeIndex: a,\n      subLayerId: s\n    });\n  }\n  getObjectAndLayerIdColor(e) {\n    const t = this.getObjectAndLayerIdColorArray(e);\n    return r(t.get(0, 1), t.get(0, 2), t.get(0, 3), 255);\n  }\n  getObjectAndLayerIdColorArray(r) {\n    if (!r.layerUid || !r.graphicUid) return this.colorZero;\n    const o = this._layerUidToPopupEnabled.get(r.layerUid);\n    if (void 0 === o) return e.getLogger(this.declaredClass).warn(\"popupEnabled is undefined for layerUid \" + r.layerUid), this.colorZero;\n    if (!1 === o) return this.colorZero;\n    let i = this._uidToRenderColor.get(r.layerUid);\n    i || (i = new Map(), this._uidToRenderColor.set(r.layerUid, i));\n    let d = i.get(r.graphicUid);\n    if (!d) {\n      for (; !d;) {\n        const e = Math.floor(16777214 * Math.random()) + 1;\n        this._colorToUID.has(e) || (d = e);\n      }\n      if (d > 16777215) throw new Error(\"Object ID Overflow\");\n      i.set(r.graphicUid, d), this._colorToUID.set(d, r);\n    }\n    const a = new ArrayBuffer(4);\n    new DataView(a).setUint32(0, d, !1);\n    return new t(a);\n  }\n  getColorToObjectAndLayerIdMapping() {\n    const r = new Map();\n    for (const [t, o] of this._colorToUID.entries()) {\n      const i = this._layerUidToGraphicsUidToObjectId.get(o.layerUid);\n      let d = null;\n      i ? (d = i.get(o.graphicUid), d || e.getLogger(this.declaredClass).warn(\"getColorMapping: no entry found for graphicsId \" + o.graphicUid)) : e.getLogger(this.declaredClass).warn(\"getColorMapping: no entry found for layerUid \" + o.layerUid);\n      const a = this._layerUidToId.get(o.layerUid);\n      a || e.getLogger(this.declaredClass).warn(\"no layerId found for uid \" + o.layerUid), d && a && r.set(t, d.attributeNodeId ? {\n        type: \"object-and-layer-and-i3s-id\",\n        oid: d.objectId,\n        lid: a,\n        attrId: d.attributeNodeId,\n        attrIdx: d.attributeIndex,\n        subLayerId: d.subLayerId\n      } : {\n        type: \"object-and-layer-id\",\n        oid: d.objectId,\n        lid: a\n      });\n    }\n    return r;\n  }\n}\nexport { o as ObjectAndLayerIdRenderHelper };","map":{"version":3,"names":["e","f","r","BufferViewVec4u8","t","o","constructor","declaredClass","colorZero","ArrayBuffer","_uidToRenderColor","Map","_colorToUID","_layerUidToGraphicsUidToObjectId","_layerUidToId","_layerUidToPopupEnabled","setUidToObjectAndLayerId","i","d","arguments","length","undefined","a","s","set","n","get","objectId","attributeNodeId","attributeIndex","subLayerId","getObjectAndLayerIdColor","getObjectAndLayerIdColorArray","layerUid","graphicUid","getLogger","warn","Math","floor","random","has","Error","DataView","setUint32","getColorToObjectAndLayerIdMapping","entries","type","oid","lid","attrId","attrIdx","ObjectAndLayerIdRenderHelper"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/ObjectAndLayerIdRenderHelper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{f as r}from\"../../../../chunks/vec4f64.js\";import{BufferViewVec4u8 as t}from\"../../../../geometry/support/buffer/BufferView.js\";class o{constructor(){this.declaredClass=\"esri.views.3d.webgl-engine.lib.ObjectAndLayerIdRenderHelper\",this.colorZero=new t(new ArrayBuffer(4)),this._uidToRenderColor=new Map,this._colorToUID=new Map,this._layerUidToGraphicsUidToObjectId=new Map,this._layerUidToId=new Map,this._layerUidToPopupEnabled=new Map}setUidToObjectAndLayerId(e,r,t,o,i,d=null,a=null,s=null){if(!(e&&r&&t&&o))return;if(this._layerUidToId.set(o,t),this._layerUidToPopupEnabled.set(o,i),!i)return;let n=this._layerUidToGraphicsUidToObjectId.get(o);n||(n=new Map,this._layerUidToGraphicsUidToObjectId.set(o,n)),n.set(r,{objectId:e,attributeNodeId:d,attributeIndex:a,subLayerId:s})}getObjectAndLayerIdColor(e){const t=this.getObjectAndLayerIdColorArray(e);return r(t.get(0,1),t.get(0,2),t.get(0,3),255)}getObjectAndLayerIdColorArray(r){if(!r.layerUid||!r.graphicUid)return this.colorZero;const o=this._layerUidToPopupEnabled.get(r.layerUid);if(void 0===o)return e.getLogger(this.declaredClass).warn(\"popupEnabled is undefined for layerUid \"+r.layerUid),this.colorZero;if(!1===o)return this.colorZero;let i=this._uidToRenderColor.get(r.layerUid);i||(i=new Map,this._uidToRenderColor.set(r.layerUid,i));let d=i.get(r.graphicUid);if(!d){for(;!d;){const e=Math.floor(16777214*Math.random())+1;this._colorToUID.has(e)||(d=e)}if(d>16777215)throw new Error(\"Object ID Overflow\");i.set(r.graphicUid,d),this._colorToUID.set(d,r)}const a=new ArrayBuffer(4);new DataView(a).setUint32(0,d,!1);return new t(a)}getColorToObjectAndLayerIdMapping(){const r=new Map;for(const[t,o]of this._colorToUID.entries()){const i=this._layerUidToGraphicsUidToObjectId.get(o.layerUid);let d=null;i?(d=i.get(o.graphicUid),d||e.getLogger(this.declaredClass).warn(\"getColorMapping: no entry found for graphicsId \"+o.graphicUid)):e.getLogger(this.declaredClass).warn(\"getColorMapping: no entry found for layerUid \"+o.layerUid);const a=this._layerUidToId.get(o.layerUid);a||e.getLogger(this.declaredClass).warn(\"no layerId found for uid \"+o.layerUid),d&&a&&r.set(t,d.attributeNodeId?{type:\"object-and-layer-and-i3s-id\",oid:d.objectId,lid:a,attrId:d.attributeNodeId,attrIdx:d.attributeIndex,subLayerId:d.subLayerId}:{type:\"object-and-layer-id\",oid:d.objectId,lid:a})}return r}}export{o as ObjectAndLayerIdRenderHelper};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}