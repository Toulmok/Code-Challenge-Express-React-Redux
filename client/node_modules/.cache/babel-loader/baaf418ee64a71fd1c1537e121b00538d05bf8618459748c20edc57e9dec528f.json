{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { lerp as s } from \"../../../../core/mathUtils.js\";\nimport { isNone as e, isSome as r } from \"../../../../core/maybe.js\";\nimport o from \"../../../../core/PooledArray.js\";\nimport { property as a } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as c } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { p as n } from \"../../../../chunks/mat4.js\";\nimport { c as l } from \"../../../../chunks/mat4f64.js\";\nimport { a as h } from \"../../../../chunks/vec2f64.js\";\nimport { m as p, g as u, s as d, c as f } from \"../../../../chunks/vec3.js\";\nimport { Z as _, c as m } from \"../../../../chunks/vec3f64.js\";\nimport { s as g, t as b, b as v } from \"../../../../chunks/vec4.js\";\nimport { c as y } from \"../../../../chunks/vec4f64.js\";\nimport { getReferenceEllipsoid as G } from \"../../../../geometry/ellipsoidUtils.js\";\nimport { create as S, empty as B, offset as D, width as w, height as N, expand as I, intersects as j } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { a as V, c as C, e as P } from \"../../../../chunks/boundedPlane.js\";\nimport { create as A } from \"../../../../geometry/support/ray.js\";\nimport { d as O, g as M, i as x, c as E } from \"../../../../chunks/sphere.js\";\nimport { drawAccelerationStruct as T, prepare as z, drawPoly as F } from \"./deconflictorDebug.js\";\nimport { VisibilityGroup as X, VisibilityFlag as L } from \"./enums.js\";\nimport Y from \"../../support/debugFlags.js\";\nimport { Camera as k } from \"../../webgl-engine/lib/Camera.js\";\nimport { applyPrecomputedScaleFactor as R } from \"../../webgl-engine/lib/screenSizePerspectiveUtils.js\";\nimport { VertexAttribute as U } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { HUDMaterial as W } from \"../../webgl-engine/materials/HUDMaterial.js\";\nimport { ScaleInfo as H } from \"../../webgl-engine/materials/ScaleInfo.js\";\nconst Z = m(),\n  q = y(),\n  J = y(),\n  K = m(),\n  Q = l(),\n  $ = E(),\n  ii = A(),\n  ti = m(),\n  si = S();\nclass ei {\n  constructor() {\n    this.aabr = S(), this.distance = 0, this.culled = !1, this.visible = !1;\n  }\n}\nclass ri {\n  constructor(i, t) {\n    this.graphics3DGraphic = i, this.slicePlaneEnabled = t, this.info = {};\n  }\n}\nvar oi;\n!function (i) {\n  i[i.Idle = 0] = \"Idle\", i[i.Process = 1] = \"Process\", i[i.Sort = 2] = \"Sort\", i[i.Deconflict = 3] = \"Deconflict\", i[i.NumStates = 4] = \"NumStates\";\n}(oi || (oi = {}));\nclass ai {\n  constructor() {\n    this.camera = new k(), this.slicePlane = V(), this.slicePlaneEnabled = !1;\n  }\n  copyFrom(i) {\n    this.camera.copyFrom(i.camera), C(i.slicePlane, this.slicePlane), this.slicePlaneEnabled = i.slicePlaneEnabled;\n  }\n}\nlet ci = class extends t {\n  get dirty() {\n    return this._dirty;\n  }\n  get state() {\n    return this._state;\n  }\n  constructor(i) {\n    super(i), this._dirty = !1, this._runningViewState = new ai(), this._state = oi.Idle, this._active = new Map(), this._visible = new Map(), this._iterators = new ui(), this._accBinsNumX = 15, this._accBinsNumY = 20, this._accBinsSizeX = 0, this._accBinsSizeY = 0, this._accBins = null, this.accNumTests = 0;\n  }\n  destroy() {\n    this._active.clear(), this._visible.clear(), this._iterators = null;\n  }\n  setDirty() {\n    !this._dirty && this._active.size > 0 && (this._dirty = !0, this.notifyChange(\"updating\"));\n  }\n  get updating() {\n    return this._state !== oi.Idle || this._dirty;\n  }\n  get updatingProgress() {\n    if (!this.updating) return 1;\n    const i = this._state / oi.NumStates;\n    return this._dirty ? .5 * i : i;\n  }\n  get running() {\n    return this.view.ready && null != this.view.state && this.updating;\n  }\n  runTask(i) {\n    switch (this._state) {\n      case oi.Idle:\n        this._startUpdate(), i.madeProgress();\n      case oi.Process:\n        if (this._state = oi.Process, !this._processActiveGraphics(i)) return;\n      case oi.Sort:\n        if (this._state = oi.Sort, !this._sortVisibleGraphics(i)) return;\n      case oi.Deconflict:\n        if (this._state = oi.Deconflict, !this._deconflictVisibleGraphics(i)) return;\n      default:\n        T(this, this._visible), this._state = oi.Idle, this.notifyChange(\"updating\");\n    }\n  }\n  modifyGraphics(i, t) {\n    t ? i.forEach(i => this.addToActiveGraphics(i)) : i.forEach(i => this.removeFromActiveGraphics(i)), this.setDirty();\n  }\n  layerSupportsDeconfliction(i) {\n    if (e(i) || \"object3d\" !== i.type) return !1;\n    const t = i.stageObject;\n    if (1 !== (t ? t.geometries.length : 0)) return !1;\n    const s = t?.geometries[0],\n      r = s?.material;\n    return r instanceof W;\n  }\n  _startUpdate() {\n    z(this.view), this._dirty = !1, this._runningViewState.copyFrom(this.viewState);\n    const {\n      fullWidth: i,\n      fullHeight: t\n    } = this._runningViewState.camera;\n    this._initBins(i, t), this._resetIterators();\n  }\n  addToActiveGraphics(i) {\n    i.info[this.visibilityGroup] = new ei(), this._active.set(i.graphics3DGraphic.graphic.uid, i), this.setDirty();\n  }\n  removeFromActiveGraphics(i) {\n    this._visible.delete(i.graphics3DGraphic.graphic.uid), ni(i, this.visibilityGroup), delete i.info[this.visibilityGroup], this._active.delete(i.graphics3DGraphic.graphic.uid), this.setDirty();\n  }\n  _processActiveGraphics(i) {\n    const t = this._ensureActiveGraphicsIterator(),\n      s = n(Q, this._runningViewState.camera.projectionMatrix),\n      e = \"global\" === this.view.viewingMode && 1 === this.view.map.ground.opacity && this._runningViewState.camera.relativeElevation > 0 ? $ : null;\n    let o = 0;\n    for (r(e) && (p(e, _, this._runningViewState.camera.viewMatrix), e[3] = G(this.view.spatialReference).radius, o = O(e, _)); !i.done;) {\n      i.madeProgress();\n      const r = t.next();\n      if (!0 === r.done) return this._resetActiveGraphicsIterator(), !0;\n      const a = r.value,\n        c = a && a.info[this.visibilityGroup];\n      c && (this._collectGraphics3DGraphics(a, s, e, o), c.culled ? this._visible.delete(a.graphics3DGraphic.graphic.uid) : this._visible.set(a.graphics3DGraphic.graphic.uid, a));\n    }\n    return !1;\n  }\n  _sortVisibleGraphics(i) {\n    const t = this._ensureSortGraphicsIterator();\n    for (; !i.done;) {\n      const s = t.next();\n      if (i.madeProgress(), !0 === s.done) return this._resetSortGraphicsIterator(), !0;\n    }\n    return !1;\n  }\n  _deconflictVisibleGraphics(i) {\n    const t = this._ensureVisibleGraphicsIterator(),\n      s = this.visibilityGroup === X.LABEL;\n    for (; !i.done;) {\n      i.madeProgress();\n      const e = t.next();\n      if (!0 === e.done) return this._resetVisibleGraphicsIterator(), !0;\n      const r = e.value,\n        o = r.info[this.visibilityGroup];\n      if (!o || o.culled) continue;\n      const a = r.graphics3DGraphic,\n        c = (!s || a.isVisible()) && !this._isConflicted(r);\n      c && this._addToBins(r), o.visible = c, this._setGraphicVisibility(r, c), F(o, c);\n    }\n    return !1;\n  }\n  _resetIterators() {\n    this._iterators.active = null, this._iterators.visible = null, this._iterators.sort = null;\n  }\n  _ensureActiveGraphicsIterator() {\n    return this._iterators.active || (this._iterators.active = li(this._active)), this._iterators.active;\n  }\n  _resetActiveGraphicsIterator() {\n    this._iterators.active = null;\n  }\n  _ensureVisibleGraphicsIterator() {\n    return this._iterators.visible || (this._iterators.visible = li(this._visible)), this._iterators.visible;\n  }\n  _resetVisibleGraphicsIterator() {\n    this._iterators.visible = null;\n  }\n  _ensureSortGraphicsIterator() {\n    return this._iterators.sort || (this._iterators.sort = hi(this._visible, this._iterators.sortArray, this.visibilityGroup)), this._iterators.sort;\n  }\n  _resetSortGraphicsIterator() {\n    this._iterators.sort = null;\n  }\n  _collectGraphics3DGraphics(i, t, s, o) {\n    const a = i.graphics3DGraphic;\n    if (a.destroyed) return;\n    const c = i.info[this.visibilityGroup];\n    if (!a.isVisible(X.GRAPHIC, L.DECONFLICTION)) return void (c.culled = !0);\n    const n = this.getGraphicsLayers(a);\n    B(c.aabr);\n    let l = null;\n    for (const h of n) {\n      if (!this.layerSupportsDeconfliction(h)) continue;\n      const a = h.stageObject.geometries[0].material;\n      if (e(l)) {\n        if (l = _i, this._getProjectionInfo(h, t, l), l.isOutsideScreen || this._isCulledBySlice(i, Z) || r(s) && this._isCulledByHorizon(l, s, o)) return void (c.culled = !0);\n        !Y.TESTS_DISABLE_OPTIMIZATIONS && c.visible && (l.distance *= .7);\n      }\n      this._expandBoundingRect(c, h, a, l);\n    }\n    e(l) ? c.culled = !0 : (c.distance = l.distance, c.culled = !1);\n  }\n  _getProjectionInfo(i, t, s) {\n    const e = this._runningViewState.camera,\n      r = i.stageObject,\n      o = r.geometries[0],\n      a = o.material,\n      c = M(r.boundingVolumeWorldSpace.bounds);\n    p(Z, c, e.viewMatrix);\n    const n = o.vertexAttributes,\n      l = n.get(U.NORMAL).data,\n      h = n.get(U.AUXPOS1).data;\n    a.applyShaderOffsetsView(Z, l, r.transformation, h, e, s.scaleInfo, Z), g(q, Z[0], Z[1], Z[2], 1), b(J, q, e.projectionMatrix), u(s.positionNDC, J, 1 / J[3]), a.applyShaderOffsetsNDC(s.positionNDC, h, e, s.positionNDC, K), s.distanceWithoutPolygonOffset = e.depthNDCToWorld(K[2]), s.distance = K[2] === s.positionNDC[2] ? s.distanceWithoutPolygonOffset : e.depthNDCToWorld(s.positionNDC[2]), g(J, s.positionNDC[0], s.positionNDC[1], s.positionNDC[2], 1), b(q, J, t), v(q, q, 1 / q[3]), d(s.positionView, Z[0], Z[1], Z[2]);\n  }\n  _isCulledByHorizon(i, t, s) {\n    return f(ii.direction, i.positionView), d(ii.origin, 0, 0, 0), !!x(t, ii, ti) && i.distanceWithoutPolygonOffset > s;\n  }\n  _isCulledBySlice(i, t) {\n    return i.slicePlaneEnabled && this._runningViewState.slicePlaneEnabled && P(this._runningViewState.slicePlane, t);\n  }\n  _expandBoundingRect(i, t, e, _ref) {\n    let {\n      positionNDC: r,\n      scaleInfo: o\n    } = _ref;\n    const a = this._runningViewState.camera,\n      c = t.getScreenSize(di);\n    R(c, o.factor, c), c[0] *= a.pixelRatio, c[1] *= a.pixelRatio;\n    const n = D(e.calculateRelativeScreenBounds(c, o.factorAlignment.scale, si), s(0, a.fullWidth, .5 + .5 * r[0]), s(0, a.fullHeight, .5 + .5 * r[1])),\n      l = this.iconMarginFactor;\n    if (0 !== l) {\n      const i = l * Math.min(w(n), N(n));\n      n[0] -= i, n[1] -= i, n[2] += i, n[3] += i;\n    }\n    I(i.aabr, n, i.aabr);\n  }\n  _isConflicted(i) {\n    const t = i.graphics3DGraphic.graphic.uid,\n      s = i.info[this.visibilityGroup];\n    for (let e = Math.floor(s.aabr[0] / this._accBinsSizeX); e <= Math.floor(s.aabr[2] / this._accBinsSizeX); e++) if (!(e < 0 || e >= this._accBinsNumX)) for (let i = Math.floor(s.aabr[1] / this._accBinsSizeY); i <= Math.floor(s.aabr[3] / this._accBinsSizeY); i++) {\n      if (i < 0 || i >= this._accBinsNumY) continue;\n      const r = this._accBins[e][i];\n      for (let i = 0; i < r.length; i++) {\n        const e = r.data[i],\n          o = e.info[this.visibilityGroup];\n        if (o && o.visible && e.graphics3DGraphic.graphic.uid !== t && (this.accNumTests++, j(o.aabr, s.aabr))) return !0;\n      }\n    }\n    return !1;\n  }\n  _initBins(i, t) {\n    if (null == this._accBins) {\n      this._accBins = [];\n      for (let i = 0; i < this._accBinsNumX; i++) {\n        this._accBins.push([]);\n        const i = this._accBins[this._accBins.length - 1];\n        for (let t = 0; t < this._accBinsNumY; t++) i.push(new o());\n      }\n    } else for (let s = 0; s < this._accBinsNumX; s++) for (let i = 0; i < this._accBinsNumY; i++) this._accBins[s][i].clear();\n    this._accBinsSizeX = i / this._accBinsNumX, this._accBinsSizeY = t / this._accBinsNumY, this.accNumTests = 0;\n  }\n  _addToBins(i) {\n    const t = i.info[this.visibilityGroup],\n      s = Math.floor(t.aabr[0] / this._accBinsSizeX),\n      e = Math.floor(t.aabr[2] / this._accBinsSizeX),\n      r = Math.floor(t.aabr[1] / this._accBinsSizeY),\n      o = Math.floor(t.aabr[3] / this._accBinsSizeY);\n    for (let a = s; a <= e; a++) if (!(a < 0 || a >= this._accBinsNumX)) for (let t = r; t <= o; t++) t < 0 || t >= this._accBinsNumY || this._accBins[a][t].push(i);\n  }\n  _setGraphicVisibility(i, t) {\n    const s = i.graphics3DGraphic;\n    s.destroyed || (s.setVisibilityFlag(L.DECONFLICTION, t, this.visibilityGroup), this.visibilityGroup === X.LABEL && this.view.labeler.setLabelGraphicVisibility(s, t));\n  }\n};\nfunction ni(i, t) {\n  const s = i.graphics3DGraphic;\n  s.destroyed || s.clearVisibilityFlag(L.DECONFLICTION, t);\n}\nfunction* li(i) {\n  if (Map.prototype.entries) {\n    const t = i.entries();\n    for (let i = t.next(); !i.done; i = t.next()) yield i.value[1];\n  } else yield* i.values();\n}\nfunction* hi(i, t, s) {\n  t.clear(), i.forEach((i, e) => {\n    const r = t.pushNew();\n    r.id = e, r.visible = i.graphics3DGraphic.hasVisibilityFlag(L.DECONFLICTION, s), r.prio = i.info ? i.info[s].distance : Number.MAX_VALUE;\n  }), yield;\n  const e = t.iterableSort((i, t) => i.visible !== t.visible ? i.visible ? -1 : 1 : i.prio !== t.prio ? i.prio - t.prio : i.id - t.id);\n  for (let r = e.next(); !r.done; r = e.next()) yield;\n  t.forAll(t => {\n    const s = i.get(t.id);\n    s && (i.delete(t.id), i.set(t.id, s));\n  }), t.clear();\n}\ni([a({\n  constructOnly: !0\n})], ci.prototype, \"view\", void 0), i([a({\n  type: Boolean,\n  readOnly: !0\n})], ci.prototype, \"updating\", null), ci = i([c(\"esri.views.3d.layers.graphics.Deconflictor\")], ci);\nclass pi {}\nclass ui {\n  constructor() {\n    let i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    this.active = i, this.visible = t, this.sort = s, this.sortArray = new o({\n      allocator: i => i || new pi()\n    });\n  }\n}\nconst di = h();\nclass fi {\n  constructor() {\n    this.positionView = m(), this.positionNDC = m(), this.distance = 0, this.distanceWithoutPolygonOffset = 0, this.scaleInfo = new H();\n  }\n  get isOutsideScreen() {\n    const i = this.positionNDC;\n    return i[0] < -1 || i[1] < -1 || i[2] < -1 || i[0] >= 1 || i[1] >= 1;\n  }\n}\nconst _i = new fi();\nexport { ci as Deconflictor, ri as DeconflictorGraphic, ai as DeconflictorViewState, oi as State };","map":{"version":3,"names":["_","i","t","lerp","s","isNone","e","isSome","r","o","property","a","subclass","c","p","n","l","h","m","g","u","d","f","Z","b","v","y","getReferenceEllipsoid","G","create","S","empty","B","offset","D","width","w","height","N","expand","I","intersects","j","V","C","P","A","O","M","x","E","drawAccelerationStruct","T","prepare","z","drawPoly","F","VisibilityGroup","X","VisibilityFlag","L","Y","Camera","k","applyPrecomputedScaleFactor","R","VertexAttribute","U","HUDMaterial","W","ScaleInfo","H","q","J","K","Q","$","ii","ti","si","ei","constructor","aabr","distance","culled","visible","ri","graphics3DGraphic","slicePlaneEnabled","info","oi","Idle","Process","Sort","Deconflict","NumStates","ai","camera","slicePlane","copyFrom","ci","dirty","_dirty","state","_state","_runningViewState","_active","Map","_visible","_iterators","ui","_accBinsNumX","_accBinsNumY","_accBinsSizeX","_accBinsSizeY","_accBins","accNumTests","destroy","clear","setDirty","size","notifyChange","updating","updatingProgress","running","view","ready","runTask","_startUpdate","madeProgress","_processActiveGraphics","_sortVisibleGraphics","_deconflictVisibleGraphics","modifyGraphics","forEach","addToActiveGraphics","removeFromActiveGraphics","layerSupportsDeconfliction","type","stageObject","geometries","length","material","viewState","fullWidth","fullHeight","_initBins","_resetIterators","visibilityGroup","set","graphic","uid","delete","ni","_ensureActiveGraphicsIterator","projectionMatrix","viewingMode","map","ground","opacity","relativeElevation","viewMatrix","spatialReference","radius","done","next","_resetActiveGraphicsIterator","value","_collectGraphics3DGraphics","_ensureSortGraphicsIterator","_resetSortGraphicsIterator","_ensureVisibleGraphicsIterator","LABEL","_resetVisibleGraphicsIterator","isVisible","_isConflicted","_addToBins","_setGraphicVisibility","active","sort","li","hi","sortArray","destroyed","GRAPHIC","DECONFLICTION","getGraphicsLayers","_i","_getProjectionInfo","isOutsideScreen","_isCulledBySlice","_isCulledByHorizon","TESTS_DISABLE_OPTIMIZATIONS","_expandBoundingRect","boundingVolumeWorldSpace","bounds","vertexAttributes","get","NORMAL","data","AUXPOS1","applyShaderOffsetsView","transformation","scaleInfo","positionNDC","applyShaderOffsetsNDC","distanceWithoutPolygonOffset","depthNDCToWorld","positionView","direction","origin","_ref","getScreenSize","di","factor","pixelRatio","calculateRelativeScreenBounds","factorAlignment","scale","iconMarginFactor","Math","min","floor","push","setVisibilityFlag","labeler","setLabelGraphicVisibility","clearVisibilityFlag","prototype","entries","values","pushNew","id","hasVisibilityFlag","prio","Number","MAX_VALUE","iterableSort","forAll","constructOnly","Boolean","readOnly","pi","arguments","undefined","allocator","fi","Deconflictor","DeconflictorGraphic","DeconflictorViewState","State"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/Deconflictor.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{lerp as s}from\"../../../../core/mathUtils.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import o from\"../../../../core/PooledArray.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{p as n}from\"../../../../chunks/mat4.js\";import{c as l}from\"../../../../chunks/mat4f64.js\";import{a as h}from\"../../../../chunks/vec2f64.js\";import{m as p,g as u,s as d,c as f}from\"../../../../chunks/vec3.js\";import{Z as _,c as m}from\"../../../../chunks/vec3f64.js\";import{s as g,t as b,b as v}from\"../../../../chunks/vec4.js\";import{c as y}from\"../../../../chunks/vec4f64.js\";import{getReferenceEllipsoid as G}from\"../../../../geometry/ellipsoidUtils.js\";import{create as S,empty as B,offset as D,width as w,height as N,expand as I,intersects as j}from\"../../../../geometry/support/aaBoundingRect.js\";import{a as V,c as C,e as P}from\"../../../../chunks/boundedPlane.js\";import{create as A}from\"../../../../geometry/support/ray.js\";import{d as O,g as M,i as x,c as E}from\"../../../../chunks/sphere.js\";import{drawAccelerationStruct as T,prepare as z,drawPoly as F}from\"./deconflictorDebug.js\";import{VisibilityGroup as X,VisibilityFlag as L}from\"./enums.js\";import Y from\"../../support/debugFlags.js\";import{Camera as k}from\"../../webgl-engine/lib/Camera.js\";import{applyPrecomputedScaleFactor as R}from\"../../webgl-engine/lib/screenSizePerspectiveUtils.js\";import{VertexAttribute as U}from\"../../webgl-engine/lib/VertexAttribute.js\";import{HUDMaterial as W}from\"../../webgl-engine/materials/HUDMaterial.js\";import{ScaleInfo as H}from\"../../webgl-engine/materials/ScaleInfo.js\";const Z=m(),q=y(),J=y(),K=m(),Q=l(),$=E(),ii=A(),ti=m(),si=S();class ei{constructor(){this.aabr=S(),this.distance=0,this.culled=!1,this.visible=!1}}class ri{constructor(i,t){this.graphics3DGraphic=i,this.slicePlaneEnabled=t,this.info={}}}var oi;!function(i){i[i.Idle=0]=\"Idle\",i[i.Process=1]=\"Process\",i[i.Sort=2]=\"Sort\",i[i.Deconflict=3]=\"Deconflict\",i[i.NumStates=4]=\"NumStates\"}(oi||(oi={}));class ai{constructor(){this.camera=new k,this.slicePlane=V(),this.slicePlaneEnabled=!1}copyFrom(i){this.camera.copyFrom(i.camera),C(i.slicePlane,this.slicePlane),this.slicePlaneEnabled=i.slicePlaneEnabled}}let ci=class extends t{get dirty(){return this._dirty}get state(){return this._state}constructor(i){super(i),this._dirty=!1,this._runningViewState=new ai,this._state=oi.Idle,this._active=new Map,this._visible=new Map,this._iterators=new ui,this._accBinsNumX=15,this._accBinsNumY=20,this._accBinsSizeX=0,this._accBinsSizeY=0,this._accBins=null,this.accNumTests=0}destroy(){this._active.clear(),this._visible.clear(),this._iterators=null}setDirty(){!this._dirty&&this._active.size>0&&(this._dirty=!0,this.notifyChange(\"updating\"))}get updating(){return this._state!==oi.Idle||this._dirty}get updatingProgress(){if(!this.updating)return 1;const i=this._state/oi.NumStates;return this._dirty?.5*i:i}get running(){return this.view.ready&&null!=this.view.state&&this.updating}runTask(i){switch(this._state){case oi.Idle:this._startUpdate(),i.madeProgress();case oi.Process:if(this._state=oi.Process,!this._processActiveGraphics(i))return;case oi.Sort:if(this._state=oi.Sort,!this._sortVisibleGraphics(i))return;case oi.Deconflict:if(this._state=oi.Deconflict,!this._deconflictVisibleGraphics(i))return;default:T(this,this._visible),this._state=oi.Idle,this.notifyChange(\"updating\")}}modifyGraphics(i,t){t?i.forEach((i=>this.addToActiveGraphics(i))):i.forEach((i=>this.removeFromActiveGraphics(i))),this.setDirty()}layerSupportsDeconfliction(i){if(e(i)||\"object3d\"!==i.type)return!1;const t=i.stageObject;if(1!==(t?t.geometries.length:0))return!1;const s=t?.geometries[0],r=s?.material;return r instanceof W}_startUpdate(){z(this.view),this._dirty=!1,this._runningViewState.copyFrom(this.viewState);const{fullWidth:i,fullHeight:t}=this._runningViewState.camera;this._initBins(i,t),this._resetIterators()}addToActiveGraphics(i){i.info[this.visibilityGroup]=new ei,this._active.set(i.graphics3DGraphic.graphic.uid,i),this.setDirty()}removeFromActiveGraphics(i){this._visible.delete(i.graphics3DGraphic.graphic.uid),ni(i,this.visibilityGroup),delete i.info[this.visibilityGroup],this._active.delete(i.graphics3DGraphic.graphic.uid),this.setDirty()}_processActiveGraphics(i){const t=this._ensureActiveGraphicsIterator(),s=n(Q,this._runningViewState.camera.projectionMatrix),e=\"global\"===this.view.viewingMode&&1===this.view.map.ground.opacity&&this._runningViewState.camera.relativeElevation>0?$:null;let o=0;for(r(e)&&(p(e,_,this._runningViewState.camera.viewMatrix),e[3]=G(this.view.spatialReference).radius,o=O(e,_));!i.done;){i.madeProgress();const r=t.next();if(!0===r.done)return this._resetActiveGraphicsIterator(),!0;const a=r.value,c=a&&a.info[this.visibilityGroup];c&&(this._collectGraphics3DGraphics(a,s,e,o),c.culled?this._visible.delete(a.graphics3DGraphic.graphic.uid):this._visible.set(a.graphics3DGraphic.graphic.uid,a))}return!1}_sortVisibleGraphics(i){const t=this._ensureSortGraphicsIterator();for(;!i.done;){const s=t.next();if(i.madeProgress(),!0===s.done)return this._resetSortGraphicsIterator(),!0}return!1}_deconflictVisibleGraphics(i){const t=this._ensureVisibleGraphicsIterator(),s=this.visibilityGroup===X.LABEL;for(;!i.done;){i.madeProgress();const e=t.next();if(!0===e.done)return this._resetVisibleGraphicsIterator(),!0;const r=e.value,o=r.info[this.visibilityGroup];if(!o||o.culled)continue;const a=r.graphics3DGraphic,c=(!s||a.isVisible())&&!this._isConflicted(r);c&&this._addToBins(r),o.visible=c,this._setGraphicVisibility(r,c),F(o,c)}return!1}_resetIterators(){this._iterators.active=null,this._iterators.visible=null,this._iterators.sort=null}_ensureActiveGraphicsIterator(){return this._iterators.active||(this._iterators.active=li(this._active)),this._iterators.active}_resetActiveGraphicsIterator(){this._iterators.active=null}_ensureVisibleGraphicsIterator(){return this._iterators.visible||(this._iterators.visible=li(this._visible)),this._iterators.visible}_resetVisibleGraphicsIterator(){this._iterators.visible=null}_ensureSortGraphicsIterator(){return this._iterators.sort||(this._iterators.sort=hi(this._visible,this._iterators.sortArray,this.visibilityGroup)),this._iterators.sort}_resetSortGraphicsIterator(){this._iterators.sort=null}_collectGraphics3DGraphics(i,t,s,o){const a=i.graphics3DGraphic;if(a.destroyed)return;const c=i.info[this.visibilityGroup];if(!a.isVisible(X.GRAPHIC,L.DECONFLICTION))return void(c.culled=!0);const n=this.getGraphicsLayers(a);B(c.aabr);let l=null;for(const h of n){if(!this.layerSupportsDeconfliction(h))continue;const a=h.stageObject.geometries[0].material;if(e(l)){if(l=_i,this._getProjectionInfo(h,t,l),l.isOutsideScreen||this._isCulledBySlice(i,Z)||r(s)&&this._isCulledByHorizon(l,s,o))return void(c.culled=!0);!Y.TESTS_DISABLE_OPTIMIZATIONS&&c.visible&&(l.distance*=.7)}this._expandBoundingRect(c,h,a,l)}e(l)?c.culled=!0:(c.distance=l.distance,c.culled=!1)}_getProjectionInfo(i,t,s){const e=this._runningViewState.camera,r=i.stageObject,o=r.geometries[0],a=o.material,c=M(r.boundingVolumeWorldSpace.bounds);p(Z,c,e.viewMatrix);const n=o.vertexAttributes,l=n.get(U.NORMAL).data,h=n.get(U.AUXPOS1).data;a.applyShaderOffsetsView(Z,l,r.transformation,h,e,s.scaleInfo,Z),g(q,Z[0],Z[1],Z[2],1),b(J,q,e.projectionMatrix),u(s.positionNDC,J,1/J[3]),a.applyShaderOffsetsNDC(s.positionNDC,h,e,s.positionNDC,K),s.distanceWithoutPolygonOffset=e.depthNDCToWorld(K[2]),s.distance=K[2]===s.positionNDC[2]?s.distanceWithoutPolygonOffset:e.depthNDCToWorld(s.positionNDC[2]),g(J,s.positionNDC[0],s.positionNDC[1],s.positionNDC[2],1),b(q,J,t),v(q,q,1/q[3]),d(s.positionView,Z[0],Z[1],Z[2])}_isCulledByHorizon(i,t,s){return f(ii.direction,i.positionView),d(ii.origin,0,0,0),!!x(t,ii,ti)&&i.distanceWithoutPolygonOffset>s}_isCulledBySlice(i,t){return i.slicePlaneEnabled&&this._runningViewState.slicePlaneEnabled&&P(this._runningViewState.slicePlane,t)}_expandBoundingRect(i,t,e,{positionNDC:r,scaleInfo:o}){const a=this._runningViewState.camera,c=t.getScreenSize(di);R(c,o.factor,c),c[0]*=a.pixelRatio,c[1]*=a.pixelRatio;const n=D(e.calculateRelativeScreenBounds(c,o.factorAlignment.scale,si),s(0,a.fullWidth,.5+.5*r[0]),s(0,a.fullHeight,.5+.5*r[1])),l=this.iconMarginFactor;if(0!==l){const i=l*Math.min(w(n),N(n));n[0]-=i,n[1]-=i,n[2]+=i,n[3]+=i}I(i.aabr,n,i.aabr)}_isConflicted(i){const t=i.graphics3DGraphic.graphic.uid,s=i.info[this.visibilityGroup];for(let e=Math.floor(s.aabr[0]/this._accBinsSizeX);e<=Math.floor(s.aabr[2]/this._accBinsSizeX);e++)if(!(e<0||e>=this._accBinsNumX))for(let i=Math.floor(s.aabr[1]/this._accBinsSizeY);i<=Math.floor(s.aabr[3]/this._accBinsSizeY);i++){if(i<0||i>=this._accBinsNumY)continue;const r=this._accBins[e][i];for(let i=0;i<r.length;i++){const e=r.data[i],o=e.info[this.visibilityGroup];if(o&&o.visible&&e.graphics3DGraphic.graphic.uid!==t&&(this.accNumTests++,j(o.aabr,s.aabr)))return!0}}return!1}_initBins(i,t){if(null==this._accBins){this._accBins=[];for(let i=0;i<this._accBinsNumX;i++){this._accBins.push([]);const i=this._accBins[this._accBins.length-1];for(let t=0;t<this._accBinsNumY;t++)i.push(new o)}}else for(let s=0;s<this._accBinsNumX;s++)for(let i=0;i<this._accBinsNumY;i++)this._accBins[s][i].clear();this._accBinsSizeX=i/this._accBinsNumX,this._accBinsSizeY=t/this._accBinsNumY,this.accNumTests=0}_addToBins(i){const t=i.info[this.visibilityGroup],s=Math.floor(t.aabr[0]/this._accBinsSizeX),e=Math.floor(t.aabr[2]/this._accBinsSizeX),r=Math.floor(t.aabr[1]/this._accBinsSizeY),o=Math.floor(t.aabr[3]/this._accBinsSizeY);for(let a=s;a<=e;a++)if(!(a<0||a>=this._accBinsNumX))for(let t=r;t<=o;t++)t<0||t>=this._accBinsNumY||this._accBins[a][t].push(i)}_setGraphicVisibility(i,t){const s=i.graphics3DGraphic;s.destroyed||(s.setVisibilityFlag(L.DECONFLICTION,t,this.visibilityGroup),this.visibilityGroup===X.LABEL&&this.view.labeler.setLabelGraphicVisibility(s,t))}};function ni(i,t){const s=i.graphics3DGraphic;s.destroyed||s.clearVisibilityFlag(L.DECONFLICTION,t)}function*li(i){if(Map.prototype.entries){const t=i.entries();for(let i=t.next();!i.done;i=t.next())yield i.value[1]}else yield*i.values()}function*hi(i,t,s){t.clear(),i.forEach(((i,e)=>{const r=t.pushNew();r.id=e,r.visible=i.graphics3DGraphic.hasVisibilityFlag(L.DECONFLICTION,s),r.prio=i.info?i.info[s].distance:Number.MAX_VALUE})),yield;const e=t.iterableSort(((i,t)=>i.visible!==t.visible?i.visible?-1:1:i.prio!==t.prio?i.prio-t.prio:i.id-t.id));for(let r=e.next();!r.done;r=e.next())yield;t.forAll((t=>{const s=i.get(t.id);s&&(i.delete(t.id),i.set(t.id,s))})),t.clear()}i([a({constructOnly:!0})],ci.prototype,\"view\",void 0),i([a({type:Boolean,readOnly:!0})],ci.prototype,\"updating\",null),ci=i([c(\"esri.views.3d.layers.graphics.Deconflictor\")],ci);class pi{}class ui{constructor(i=null,t=null,s=null){this.active=i,this.visible=t,this.sort=s,this.sortArray=new o({allocator:i=>i||new pi})}}const di=h();class fi{constructor(){this.positionView=m(),this.positionNDC=m(),this.distance=0,this.distanceWithoutPolygonOffset=0,this.scaleInfo=new H}get isOutsideScreen(){const i=this.positionNDC;return i[0]<-1||i[1]<-1||i[2]<-1||i[0]>=1||i[1]>=1}}const _i=new fi;export{ci as Deconflictor,ri as DeconflictorGraphic,ai as DeconflictorViewState,oi as State};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,iCAAiC;AAAC,OAAOC,CAAC,MAAK,8BAA8B;AAAC,SAAOC,IAAI,IAAIC,CAAC,QAAK,+BAA+B;AAAC,SAAOC,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,QAAK,2BAA2B;AAAC,OAAOC,CAAC,MAAK,iCAAiC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,yDAAyD;AAAC,OAAM,gDAAgD;AAAC,OAAM,gCAAgC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,yDAAyD;AAAC,SAAOC,CAAC,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOF,CAAC,IAAIG,CAAC,QAAK,+BAA+B;AAAC,SAAOL,CAAC,IAAIM,CAAC,QAAK,+BAA+B;AAAC,SAAOC,CAAC,IAAIJ,CAAC,EAACK,CAAC,IAAIC,CAAC,EAAChB,CAAC,IAAIiB,CAAC,EAACR,CAAC,IAAIS,CAAC,QAAK,4BAA4B;AAAC,SAAOC,CAAC,IAAIvB,CAAC,EAACa,CAAC,IAAIK,CAAC,QAAK,+BAA+B;AAAC,SAAOd,CAAC,IAAIe,CAAC,EAACjB,CAAC,IAAIsB,CAAC,EAACA,CAAC,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOZ,CAAC,IAAIa,CAAC,QAAK,+BAA+B;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,QAAK,wCAAwC;AAAC,SAAOC,MAAM,IAAIC,CAAC,EAACC,KAAK,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,KAAK,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,QAAK,gDAAgD;AAAC,SAAO/B,CAAC,IAAIgC,CAAC,EAAC9B,CAAC,IAAI+B,CAAC,EAACtC,CAAC,IAAIuC,CAAC,QAAK,oCAAoC;AAAC,SAAOhB,MAAM,IAAIiB,CAAC,QAAK,qCAAqC;AAAC,SAAOzB,CAAC,IAAI0B,CAAC,EAAC5B,CAAC,IAAI6B,CAAC,EAAC/C,CAAC,IAAIgD,CAAC,EAACpC,CAAC,IAAIqC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,EAACC,OAAO,IAAIC,CAAC,EAACC,QAAQ,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,eAAe,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,QAAK,YAAY;AAAC,OAAOC,CAAC,MAAK,6BAA6B;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,2BAA2B,IAAIC,CAAC,QAAK,sDAAsD;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,2CAA2C;AAAC,SAAOC,WAAW,IAAIC,CAAC,QAAK,6CAA6C;AAAC,SAAOC,SAAS,IAAIC,CAAC,QAAK,2CAA2C;AAAC,MAAMhD,CAAC,GAACL,CAAC,EAAE;EAACsD,CAAC,GAAC9C,CAAC,EAAE;EAAC+C,CAAC,GAAC/C,CAAC,EAAE;EAACgD,CAAC,GAACxD,CAAC,EAAE;EAACyD,CAAC,GAAC3D,CAAC,EAAE;EAAC4D,CAAC,GAAC1B,CAAC,EAAE;EAAC2B,EAAE,GAAC/B,CAAC,EAAE;EAACgC,EAAE,GAAC5D,CAAC,EAAE;EAAC6D,EAAE,GAACjD,CAAC,EAAE;AAAC,MAAMkD,EAAE;EAACC,WAAWA,CAAA,EAAE;IAAC,IAAI,CAACC,IAAI,GAACpD,CAAC,EAAE,EAAC,IAAI,CAACqD,QAAQ,GAAC,CAAC,EAAC,IAAI,CAACC,MAAM,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,OAAO,GAAC,CAAC,CAAC;EAAA;AAAC;AAAC,MAAMC,EAAE;EAACL,WAAWA,CAAChF,CAAC,EAACC,CAAC,EAAC;IAAC,IAAI,CAACqF,iBAAiB,GAACtF,CAAC,EAAC,IAAI,CAACuF,iBAAiB,GAACtF,CAAC,EAAC,IAAI,CAACuF,IAAI,GAAC,CAAC,CAAC;EAAA;AAAC;AAAC,IAAIC,EAAE;AAAC,CAAC,UAASzF,CAAC,EAAC;EAACA,CAAC,CAACA,CAAC,CAAC0F,IAAI,GAAC,CAAC,CAAC,GAAC,MAAM,EAAC1F,CAAC,CAACA,CAAC,CAAC2F,OAAO,GAAC,CAAC,CAAC,GAAC,SAAS,EAAC3F,CAAC,CAACA,CAAC,CAAC4F,IAAI,GAAC,CAAC,CAAC,GAAC,MAAM,EAAC5F,CAAC,CAACA,CAAC,CAAC6F,UAAU,GAAC,CAAC,CAAC,GAAC,YAAY,EAAC7F,CAAC,CAACA,CAAC,CAAC8F,SAAS,GAAC,CAAC,CAAC,GAAC,WAAW;AAAA,CAAC,CAACL,EAAE,KAAGA,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC;AAAC,MAAMM,EAAE;EAACf,WAAWA,CAAA,EAAE;IAAC,IAAI,CAACgB,MAAM,GAAC,IAAIlC,CAAC,IAAC,IAAI,CAACmC,UAAU,GAACvD,CAAC,EAAE,EAAC,IAAI,CAAC6C,iBAAiB,GAAC,CAAC,CAAC;EAAA;EAACW,QAAQA,CAAClG,CAAC,EAAC;IAAC,IAAI,CAACgG,MAAM,CAACE,QAAQ,CAAClG,CAAC,CAACgG,MAAM,CAAC,EAACrD,CAAC,CAAC3C,CAAC,CAACiG,UAAU,EAAC,IAAI,CAACA,UAAU,CAAC,EAAC,IAAI,CAACV,iBAAiB,GAACvF,CAAC,CAACuF,iBAAiB;EAAA;AAAC;AAAC,IAAIY,EAAE,GAAC,cAAclG,CAAC;EAAC,IAAImG,KAAKA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,MAAM;EAAA;EAAC,IAAIC,KAAKA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,MAAM;EAAA;EAACvB,WAAWA,CAAChF,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC,EAAC,IAAI,CAACqG,MAAM,GAAC,CAAC,CAAC,EAAC,IAAI,CAACG,iBAAiB,GAAC,IAAIT,EAAE,IAAC,IAAI,CAACQ,MAAM,GAACd,EAAE,CAACC,IAAI,EAAC,IAAI,CAACe,OAAO,GAAC,IAAIC,GAAG,IAAC,IAAI,CAACC,QAAQ,GAAC,IAAID,GAAG,IAAC,IAAI,CAACE,UAAU,GAAC,IAAIC,EAAE,IAAC,IAAI,CAACC,YAAY,GAAC,EAAE,EAAC,IAAI,CAACC,YAAY,GAAC,EAAE,EAAC,IAAI,CAACC,aAAa,GAAC,CAAC,EAAC,IAAI,CAACC,aAAa,GAAC,CAAC,EAAC,IAAI,CAACC,QAAQ,GAAC,IAAI,EAAC,IAAI,CAACC,WAAW,GAAC,CAAC;EAAA;EAACC,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACX,OAAO,CAACY,KAAK,EAAE,EAAC,IAAI,CAACV,QAAQ,CAACU,KAAK,EAAE,EAAC,IAAI,CAACT,UAAU,GAAC,IAAI;EAAA;EAACU,QAAQA,CAAA,EAAE;IAAC,CAAC,IAAI,CAACjB,MAAM,IAAE,IAAI,CAACI,OAAO,CAACc,IAAI,GAAC,CAAC,KAAG,IAAI,CAAClB,MAAM,GAAC,CAAC,CAAC,EAAC,IAAI,CAACmB,YAAY,CAAC,UAAU,CAAC,CAAC;EAAA;EAAC,IAAIC,QAAQA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAClB,MAAM,KAAGd,EAAE,CAACC,IAAI,IAAE,IAAI,CAACW,MAAM;EAAA;EAAC,IAAIqB,gBAAgBA,CAAA,EAAE;IAAC,IAAG,CAAC,IAAI,CAACD,QAAQ,EAAC,OAAO,CAAC;IAAC,MAAMzH,CAAC,GAAC,IAAI,CAACuG,MAAM,GAACd,EAAE,CAACK,SAAS;IAAC,OAAO,IAAI,CAACO,MAAM,GAAC,EAAE,GAACrG,CAAC,GAACA,CAAC;EAAA;EAAC,IAAI2H,OAAOA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,IAAI,CAACC,KAAK,IAAE,IAAI,IAAE,IAAI,CAACD,IAAI,CAACtB,KAAK,IAAE,IAAI,CAACmB,QAAQ;EAAA;EAACK,OAAOA,CAAC9H,CAAC,EAAC;IAAC,QAAO,IAAI,CAACuG,MAAM;MAAE,KAAKd,EAAE,CAACC,IAAI;QAAC,IAAI,CAACqC,YAAY,EAAE,EAAC/H,CAAC,CAACgI,YAAY,EAAE;MAAC,KAAKvC,EAAE,CAACE,OAAO;QAAC,IAAG,IAAI,CAACY,MAAM,GAACd,EAAE,CAACE,OAAO,EAAC,CAAC,IAAI,CAACsC,sBAAsB,CAACjI,CAAC,CAAC,EAAC;MAAO,KAAKyF,EAAE,CAACG,IAAI;QAAC,IAAG,IAAI,CAACW,MAAM,GAACd,EAAE,CAACG,IAAI,EAAC,CAAC,IAAI,CAACsC,oBAAoB,CAAClI,CAAC,CAAC,EAAC;MAAO,KAAKyF,EAAE,CAACI,UAAU;QAAC,IAAG,IAAI,CAACU,MAAM,GAACd,EAAE,CAACI,UAAU,EAAC,CAAC,IAAI,CAACsC,0BAA0B,CAACnI,CAAC,CAAC,EAAC;MAAO;QAAQmD,CAAC,CAAC,IAAI,EAAC,IAAI,CAACwD,QAAQ,CAAC,EAAC,IAAI,CAACJ,MAAM,GAACd,EAAE,CAACC,IAAI,EAAC,IAAI,CAAC8B,YAAY,CAAC,UAAU,CAAC;IAAA;EAAC;EAACY,cAAcA,CAACpI,CAAC,EAACC,CAAC,EAAC;IAACA,CAAC,GAACD,CAAC,CAACqI,OAAO,CAAErI,CAAC,IAAE,IAAI,CAACsI,mBAAmB,CAACtI,CAAC,CAAC,CAAE,GAACA,CAAC,CAACqI,OAAO,CAAErI,CAAC,IAAE,IAAI,CAACuI,wBAAwB,CAACvI,CAAC,CAAC,CAAE,EAAC,IAAI,CAACsH,QAAQ,EAAE;EAAA;EAACkB,0BAA0BA,CAACxI,CAAC,EAAC;IAAC,IAAGK,CAAC,CAACL,CAAC,CAAC,IAAE,UAAU,KAAGA,CAAC,CAACyI,IAAI,EAAC,OAAM,CAAC,CAAC;IAAC,MAAMxI,CAAC,GAACD,CAAC,CAAC0I,WAAW;IAAC,IAAG,CAAC,MAAIzI,CAAC,GAACA,CAAC,CAAC0I,UAAU,CAACC,MAAM,GAAC,CAAC,CAAC,EAAC,OAAM,CAAC,CAAC;IAAC,MAAMzI,CAAC,GAACF,CAAC,EAAE0I,UAAU,CAAC,CAAC,CAAC;MAACpI,CAAC,GAACJ,CAAC,EAAE0I,QAAQ;IAAC,OAAOtI,CAAC,YAAY6D,CAAC;EAAA;EAAC2D,YAAYA,CAAA,EAAE;IAAC1E,CAAC,CAAC,IAAI,CAACuE,IAAI,CAAC,EAAC,IAAI,CAACvB,MAAM,GAAC,CAAC,CAAC,EAAC,IAAI,CAACG,iBAAiB,CAACN,QAAQ,CAAC,IAAI,CAAC4C,SAAS,CAAC;IAAC,MAAK;MAACC,SAAS,EAAC/I,CAAC;MAACgJ,UAAU,EAAC/I;IAAC,CAAC,GAAC,IAAI,CAACuG,iBAAiB,CAACR,MAAM;IAAC,IAAI,CAACiD,SAAS,CAACjJ,CAAC,EAACC,CAAC,CAAC,EAAC,IAAI,CAACiJ,eAAe,EAAE;EAAA;EAACZ,mBAAmBA,CAACtI,CAAC,EAAC;IAACA,CAAC,CAACwF,IAAI,CAAC,IAAI,CAAC2D,eAAe,CAAC,GAAC,IAAIpE,EAAE,IAAC,IAAI,CAAC0B,OAAO,CAAC2C,GAAG,CAACpJ,CAAC,CAACsF,iBAAiB,CAAC+D,OAAO,CAACC,GAAG,EAACtJ,CAAC,CAAC,EAAC,IAAI,CAACsH,QAAQ,EAAE;EAAA;EAACiB,wBAAwBA,CAACvI,CAAC,EAAC;IAAC,IAAI,CAAC2G,QAAQ,CAAC4C,MAAM,CAACvJ,CAAC,CAACsF,iBAAiB,CAAC+D,OAAO,CAACC,GAAG,CAAC,EAACE,EAAE,CAACxJ,CAAC,EAAC,IAAI,CAACmJ,eAAe,CAAC,EAAC,OAAOnJ,CAAC,CAACwF,IAAI,CAAC,IAAI,CAAC2D,eAAe,CAAC,EAAC,IAAI,CAAC1C,OAAO,CAAC8C,MAAM,CAACvJ,CAAC,CAACsF,iBAAiB,CAAC+D,OAAO,CAACC,GAAG,CAAC,EAAC,IAAI,CAAChC,QAAQ,EAAE;EAAA;EAACW,sBAAsBA,CAACjI,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACwJ,6BAA6B,EAAE;MAACtJ,CAAC,GAACW,CAAC,CAAC4D,CAAC,EAAC,IAAI,CAAC8B,iBAAiB,CAACR,MAAM,CAAC0D,gBAAgB,CAAC;MAACrJ,CAAC,GAAC,QAAQ,KAAG,IAAI,CAACuH,IAAI,CAAC+B,WAAW,IAAE,CAAC,KAAG,IAAI,CAAC/B,IAAI,CAACgC,GAAG,CAACC,MAAM,CAACC,OAAO,IAAE,IAAI,CAACtD,iBAAiB,CAACR,MAAM,CAAC+D,iBAAiB,GAAC,CAAC,GAACpF,CAAC,GAAC,IAAI;IAAC,IAAInE,CAAC,GAAC,CAAC;IAAC,KAAID,CAAC,CAACF,CAAC,CAAC,KAAGQ,CAAC,CAACR,CAAC,EAACN,CAAC,EAAC,IAAI,CAACyG,iBAAiB,CAACR,MAAM,CAACgE,UAAU,CAAC,EAAC3J,CAAC,CAAC,CAAC,CAAC,GAACsB,CAAC,CAAC,IAAI,CAACiG,IAAI,CAACqC,gBAAgB,CAAC,CAACC,MAAM,EAAC1J,CAAC,GAACsC,CAAC,CAACzC,CAAC,EAACN,CAAC,CAAC,CAAC,EAAC,CAACC,CAAC,CAACmK,IAAI,GAAE;MAACnK,CAAC,CAACgI,YAAY,EAAE;MAAC,MAAMzH,CAAC,GAACN,CAAC,CAACmK,IAAI,EAAE;MAAC,IAAG,CAAC,CAAC,KAAG7J,CAAC,CAAC4J,IAAI,EAAC,OAAO,IAAI,CAACE,4BAA4B,EAAE,EAAC,CAAC,CAAC;MAAC,MAAM3J,CAAC,GAACH,CAAC,CAAC+J,KAAK;QAAC1J,CAAC,GAACF,CAAC,IAAEA,CAAC,CAAC8E,IAAI,CAAC,IAAI,CAAC2D,eAAe,CAAC;MAACvI,CAAC,KAAG,IAAI,CAAC2J,0BAA0B,CAAC7J,CAAC,EAACP,CAAC,EAACE,CAAC,EAACG,CAAC,CAAC,EAACI,CAAC,CAACuE,MAAM,GAAC,IAAI,CAACwB,QAAQ,CAAC4C,MAAM,CAAC7I,CAAC,CAAC4E,iBAAiB,CAAC+D,OAAO,CAACC,GAAG,CAAC,GAAC,IAAI,CAAC3C,QAAQ,CAACyC,GAAG,CAAC1I,CAAC,CAAC4E,iBAAiB,CAAC+D,OAAO,CAACC,GAAG,EAAC5I,CAAC,CAAC,CAAC;IAAA;IAAC,OAAM,CAAC,CAAC;EAAA;EAACwH,oBAAoBA,CAAClI,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACuK,2BAA2B,EAAE;IAAC,OAAK,CAACxK,CAAC,CAACmK,IAAI,GAAE;MAAC,MAAMhK,CAAC,GAACF,CAAC,CAACmK,IAAI,EAAE;MAAC,IAAGpK,CAAC,CAACgI,YAAY,EAAE,EAAC,CAAC,CAAC,KAAG7H,CAAC,CAACgK,IAAI,EAAC,OAAO,IAAI,CAACM,0BAA0B,EAAE,EAAC,CAAC,CAAC;IAAA;IAAC,OAAM,CAAC,CAAC;EAAA;EAACtC,0BAA0BA,CAACnI,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACyK,8BAA8B,EAAE;MAACvK,CAAC,GAAC,IAAI,CAACgJ,eAAe,KAAG1F,CAAC,CAACkH,KAAK;IAAC,OAAK,CAAC3K,CAAC,CAACmK,IAAI,GAAE;MAACnK,CAAC,CAACgI,YAAY,EAAE;MAAC,MAAM3H,CAAC,GAACJ,CAAC,CAACmK,IAAI,EAAE;MAAC,IAAG,CAAC,CAAC,KAAG/J,CAAC,CAAC8J,IAAI,EAAC,OAAO,IAAI,CAACS,6BAA6B,EAAE,EAAC,CAAC,CAAC;MAAC,MAAMrK,CAAC,GAACF,CAAC,CAACiK,KAAK;QAAC9J,CAAC,GAACD,CAAC,CAACiF,IAAI,CAAC,IAAI,CAAC2D,eAAe,CAAC;MAAC,IAAG,CAAC3I,CAAC,IAAEA,CAAC,CAAC2E,MAAM,EAAC;MAAS,MAAMzE,CAAC,GAACH,CAAC,CAAC+E,iBAAiB;QAAC1E,CAAC,GAAC,CAAC,CAACT,CAAC,IAAEO,CAAC,CAACmK,SAAS,EAAE,KAAG,CAAC,IAAI,CAACC,aAAa,CAACvK,CAAC,CAAC;MAACK,CAAC,IAAE,IAAI,CAACmK,UAAU,CAACxK,CAAC,CAAC,EAACC,CAAC,CAAC4E,OAAO,GAACxE,CAAC,EAAC,IAAI,CAACoK,qBAAqB,CAACzK,CAAC,EAACK,CAAC,CAAC,EAAC2C,CAAC,CAAC/C,CAAC,EAACI,CAAC,CAAC;IAAA;IAAC,OAAM,CAAC,CAAC;EAAA;EAACsI,eAAeA,CAAA,EAAE;IAAC,IAAI,CAACtC,UAAU,CAACqE,MAAM,GAAC,IAAI,EAAC,IAAI,CAACrE,UAAU,CAACxB,OAAO,GAAC,IAAI,EAAC,IAAI,CAACwB,UAAU,CAACsE,IAAI,GAAC,IAAI;EAAA;EAACzB,6BAA6BA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC7C,UAAU,CAACqE,MAAM,KAAG,IAAI,CAACrE,UAAU,CAACqE,MAAM,GAACE,EAAE,CAAC,IAAI,CAAC1E,OAAO,CAAC,CAAC,EAAC,IAAI,CAACG,UAAU,CAACqE,MAAM;EAAA;EAACZ,4BAA4BA,CAAA,EAAE;IAAC,IAAI,CAACzD,UAAU,CAACqE,MAAM,GAAC,IAAI;EAAA;EAACP,8BAA8BA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC9D,UAAU,CAACxB,OAAO,KAAG,IAAI,CAACwB,UAAU,CAACxB,OAAO,GAAC+F,EAAE,CAAC,IAAI,CAACxE,QAAQ,CAAC,CAAC,EAAC,IAAI,CAACC,UAAU,CAACxB,OAAO;EAAA;EAACwF,6BAA6BA,CAAA,EAAE;IAAC,IAAI,CAAChE,UAAU,CAACxB,OAAO,GAAC,IAAI;EAAA;EAACoF,2BAA2BA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC5D,UAAU,CAACsE,IAAI,KAAG,IAAI,CAACtE,UAAU,CAACsE,IAAI,GAACE,EAAE,CAAC,IAAI,CAACzE,QAAQ,EAAC,IAAI,CAACC,UAAU,CAACyE,SAAS,EAAC,IAAI,CAAClC,eAAe,CAAC,CAAC,EAAC,IAAI,CAACvC,UAAU,CAACsE,IAAI;EAAA;EAACT,0BAA0BA,CAAA,EAAE;IAAC,IAAI,CAAC7D,UAAU,CAACsE,IAAI,GAAC,IAAI;EAAA;EAACX,0BAA0BA,CAACvK,CAAC,EAACC,CAAC,EAACE,CAAC,EAACK,CAAC,EAAC;IAAC,MAAME,CAAC,GAACV,CAAC,CAACsF,iBAAiB;IAAC,IAAG5E,CAAC,CAAC4K,SAAS,EAAC;IAAO,MAAM1K,CAAC,GAACZ,CAAC,CAACwF,IAAI,CAAC,IAAI,CAAC2D,eAAe,CAAC;IAAC,IAAG,CAACzI,CAAC,CAACmK,SAAS,CAACpH,CAAC,CAAC8H,OAAO,EAAC5H,CAAC,CAAC6H,aAAa,CAAC,EAAC,OAAO,MAAK5K,CAAC,CAACuE,MAAM,GAAC,CAAC,CAAC,CAAC;IAAC,MAAMrE,CAAC,GAAC,IAAI,CAAC2K,iBAAiB,CAAC/K,CAAC,CAAC;IAACqB,CAAC,CAACnB,CAAC,CAACqE,IAAI,CAAC;IAAC,IAAIlE,CAAC,GAAC,IAAI;IAAC,KAAI,MAAMC,CAAC,IAAIF,CAAC,EAAC;MAAC,IAAG,CAAC,IAAI,CAAC0H,0BAA0B,CAACxH,CAAC,CAAC,EAAC;MAAS,MAAMN,CAAC,GAACM,CAAC,CAAC0H,WAAW,CAACC,UAAU,CAAC,CAAC,CAAC,CAACE,QAAQ;MAAC,IAAGxI,CAAC,CAACU,CAAC,CAAC,EAAC;QAAC,IAAGA,CAAC,GAAC2K,EAAE,EAAC,IAAI,CAACC,kBAAkB,CAAC3K,CAAC,EAACf,CAAC,EAACc,CAAC,CAAC,EAACA,CAAC,CAAC6K,eAAe,IAAE,IAAI,CAACC,gBAAgB,CAAC7L,CAAC,EAACsB,CAAC,CAAC,IAAEf,CAAC,CAACJ,CAAC,CAAC,IAAE,IAAI,CAAC2L,kBAAkB,CAAC/K,CAAC,EAACZ,CAAC,EAACK,CAAC,CAAC,EAAC,OAAO,MAAKI,CAAC,CAACuE,MAAM,GAAC,CAAC,CAAC,CAAC;QAAC,CAACvB,CAAC,CAACmI,2BAA2B,IAAEnL,CAAC,CAACwE,OAAO,KAAGrE,CAAC,CAACmE,QAAQ,IAAE,EAAE,CAAC;MAAA;MAAC,IAAI,CAAC8G,mBAAmB,CAACpL,CAAC,EAACI,CAAC,EAACN,CAAC,EAACK,CAAC,CAAC;IAAA;IAACV,CAAC,CAACU,CAAC,CAAC,GAACH,CAAC,CAACuE,MAAM,GAAC,CAAC,CAAC,IAAEvE,CAAC,CAACsE,QAAQ,GAACnE,CAAC,CAACmE,QAAQ,EAACtE,CAAC,CAACuE,MAAM,GAAC,CAAC,CAAC,CAAC;EAAA;EAACwG,kBAAkBA,CAAC3L,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAACmG,iBAAiB,CAACR,MAAM;MAACzF,CAAC,GAACP,CAAC,CAAC0I,WAAW;MAAClI,CAAC,GAACD,CAAC,CAACoI,UAAU,CAAC,CAAC,CAAC;MAACjI,CAAC,GAACF,CAAC,CAACqI,QAAQ;MAACjI,CAAC,GAACmC,CAAC,CAACxC,CAAC,CAAC0L,wBAAwB,CAACC,MAAM,CAAC;IAACrL,CAAC,CAACS,CAAC,EAACV,CAAC,EAACP,CAAC,CAAC2J,UAAU,CAAC;IAAC,MAAMlJ,CAAC,GAACN,CAAC,CAAC2L,gBAAgB;MAACpL,CAAC,GAACD,CAAC,CAACsL,GAAG,CAAClI,CAAC,CAACmI,MAAM,CAAC,CAACC,IAAI;MAACtL,CAAC,GAACF,CAAC,CAACsL,GAAG,CAAClI,CAAC,CAACqI,OAAO,CAAC,CAACD,IAAI;IAAC5L,CAAC,CAAC8L,sBAAsB,CAAClL,CAAC,EAACP,CAAC,EAACR,CAAC,CAACkM,cAAc,EAACzL,CAAC,EAACX,CAAC,EAACF,CAAC,CAACuM,SAAS,EAACpL,CAAC,CAAC,EAACJ,CAAC,CAACqD,CAAC,EAACjD,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAACC,CAAC,CAACiD,CAAC,EAACD,CAAC,EAAClE,CAAC,CAACqJ,gBAAgB,CAAC,EAACvI,CAAC,CAAChB,CAAC,CAACwM,WAAW,EAACnI,CAAC,EAAC,CAAC,GAACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC9D,CAAC,CAACkM,qBAAqB,CAACzM,CAAC,CAACwM,WAAW,EAAC3L,CAAC,EAACX,CAAC,EAACF,CAAC,CAACwM,WAAW,EAAClI,CAAC,CAAC,EAACtE,CAAC,CAAC0M,4BAA4B,GAACxM,CAAC,CAACyM,eAAe,CAACrI,CAAC,CAAC,CAAC,CAAC,CAAC,EAACtE,CAAC,CAAC+E,QAAQ,GAACT,CAAC,CAAC,CAAC,CAAC,KAAGtE,CAAC,CAACwM,WAAW,CAAC,CAAC,CAAC,GAACxM,CAAC,CAAC0M,4BAA4B,GAACxM,CAAC,CAACyM,eAAe,CAAC3M,CAAC,CAACwM,WAAW,CAAC,CAAC,CAAC,CAAC,EAACzL,CAAC,CAACsD,CAAC,EAACrE,CAAC,CAACwM,WAAW,CAAC,CAAC,CAAC,EAACxM,CAAC,CAACwM,WAAW,CAAC,CAAC,CAAC,EAACxM,CAAC,CAACwM,WAAW,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAACpL,CAAC,CAACgD,CAAC,EAACC,CAAC,EAACvE,CAAC,CAAC,EAACuB,CAAC,CAAC+C,CAAC,EAACA,CAAC,EAAC,CAAC,GAACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAACnD,CAAC,CAACjB,CAAC,CAAC4M,YAAY,EAACzL,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,CAAC;EAAA;EAACwK,kBAAkBA,CAAC9L,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAAC,OAAOkB,CAAC,CAACuD,EAAE,CAACoI,SAAS,EAAChN,CAAC,CAAC+M,YAAY,CAAC,EAAC3L,CAAC,CAACwD,EAAE,CAACqI,MAAM,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAACjK,CAAC,CAAC/C,CAAC,EAAC2E,EAAE,EAACC,EAAE,CAAC,IAAE7E,CAAC,CAAC6M,4BAA4B,GAAC1M,CAAC;EAAA;EAAC0L,gBAAgBA,CAAC7L,CAAC,EAACC,CAAC,EAAC;IAAC,OAAOD,CAAC,CAACuF,iBAAiB,IAAE,IAAI,CAACiB,iBAAiB,CAACjB,iBAAiB,IAAE3C,CAAC,CAAC,IAAI,CAAC4D,iBAAiB,CAACP,UAAU,EAAChG,CAAC,CAAC;EAAA;EAAC+L,mBAAmBA,CAAChM,CAAC,EAACC,CAAC,EAACI,CAAC,EAAA6M,IAAA,EAA6B;IAAA,IAA5B;MAACP,WAAW,EAACpM,CAAC;MAACmM,SAAS,EAAClM;IAAC,CAAC,GAAA0M,IAAA;IAAE,MAAMxM,CAAC,GAAC,IAAI,CAAC8F,iBAAiB,CAACR,MAAM;MAACpF,CAAC,GAACX,CAAC,CAACkN,aAAa,CAACC,EAAE,CAAC;IAACpJ,CAAC,CAACpD,CAAC,EAACJ,CAAC,CAAC6M,MAAM,EAACzM,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,IAAEF,CAAC,CAAC4M,UAAU,EAAC1M,CAAC,CAAC,CAAC,CAAC,IAAEF,CAAC,CAAC4M,UAAU;IAAC,MAAMxM,CAAC,GAACmB,CAAC,CAAC5B,CAAC,CAACkN,6BAA6B,CAAC3M,CAAC,EAACJ,CAAC,CAACgN,eAAe,CAACC,KAAK,EAAC3I,EAAE,CAAC,EAAC3E,CAAC,CAAC,CAAC,EAACO,CAAC,CAACqI,SAAS,EAAC,EAAE,GAAC,EAAE,GAACxI,CAAC,CAAC,CAAC,CAAC,CAAC,EAACJ,CAAC,CAAC,CAAC,EAACO,CAAC,CAACsI,UAAU,EAAC,EAAE,GAAC,EAAE,GAACzI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAACQ,CAAC,GAAC,IAAI,CAAC2M,gBAAgB;IAAC,IAAG,CAAC,KAAG3M,CAAC,EAAC;MAAC,MAAMf,CAAC,GAACe,CAAC,GAAC4M,IAAI,CAACC,GAAG,CAACzL,CAAC,CAACrB,CAAC,CAAC,EAACuB,CAAC,CAACvB,CAAC,CAAC,CAAC;MAACA,CAAC,CAAC,CAAC,CAAC,IAAEd,CAAC,EAACc,CAAC,CAAC,CAAC,CAAC,IAAEd,CAAC,EAACc,CAAC,CAAC,CAAC,CAAC,IAAEd,CAAC,EAACc,CAAC,CAAC,CAAC,CAAC,IAAEd,CAAC;IAAA;IAACuC,CAAC,CAACvC,CAAC,CAACiF,IAAI,EAACnE,CAAC,EAACd,CAAC,CAACiF,IAAI,CAAC;EAAA;EAAC6F,aAAaA,CAAC9K,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACsF,iBAAiB,CAAC+D,OAAO,CAACC,GAAG;MAACnJ,CAAC,GAACH,CAAC,CAACwF,IAAI,CAAC,IAAI,CAAC2D,eAAe,CAAC;IAAC,KAAI,IAAI9I,CAAC,GAACsN,IAAI,CAACE,KAAK,CAAC1N,CAAC,CAAC8E,IAAI,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC+B,aAAa,CAAC,EAAC3G,CAAC,IAAEsN,IAAI,CAACE,KAAK,CAAC1N,CAAC,CAAC8E,IAAI,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC+B,aAAa,CAAC,EAAC3G,CAAC,EAAE,EAAC,IAAG,EAAEA,CAAC,GAAC,CAAC,IAAEA,CAAC,IAAE,IAAI,CAACyG,YAAY,CAAC,EAAC,KAAI,IAAI9G,CAAC,GAAC2N,IAAI,CAACE,KAAK,CAAC1N,CAAC,CAAC8E,IAAI,CAAC,CAAC,CAAC,GAAC,IAAI,CAACgC,aAAa,CAAC,EAACjH,CAAC,IAAE2N,IAAI,CAACE,KAAK,CAAC1N,CAAC,CAAC8E,IAAI,CAAC,CAAC,CAAC,GAAC,IAAI,CAACgC,aAAa,CAAC,EAACjH,CAAC,EAAE,EAAC;MAAC,IAAGA,CAAC,GAAC,CAAC,IAAEA,CAAC,IAAE,IAAI,CAAC+G,YAAY,EAAC;MAAS,MAAMxG,CAAC,GAAC,IAAI,CAAC2G,QAAQ,CAAC7G,CAAC,CAAC,CAACL,CAAC,CAAC;MAAC,KAAI,IAAIA,CAAC,GAAC,CAAC,EAACA,CAAC,GAACO,CAAC,CAACqI,MAAM,EAAC5I,CAAC,EAAE,EAAC;QAAC,MAAMK,CAAC,GAACE,CAAC,CAAC+L,IAAI,CAACtM,CAAC,CAAC;UAACQ,CAAC,GAACH,CAAC,CAACmF,IAAI,CAAC,IAAI,CAAC2D,eAAe,CAAC;QAAC,IAAG3I,CAAC,IAAEA,CAAC,CAAC4E,OAAO,IAAE/E,CAAC,CAACiF,iBAAiB,CAAC+D,OAAO,CAACC,GAAG,KAAGrJ,CAAC,KAAG,IAAI,CAACkH,WAAW,EAAE,EAAC1E,CAAC,CAACjC,CAAC,CAACyE,IAAI,EAAC9E,CAAC,CAAC8E,IAAI,CAAC,CAAC,EAAC,OAAM,CAAC,CAAC;MAAA;IAAC;IAAC,OAAM,CAAC,CAAC;EAAA;EAACgE,SAASA,CAACjJ,CAAC,EAACC,CAAC,EAAC;IAAC,IAAG,IAAI,IAAE,IAAI,CAACiH,QAAQ,EAAC;MAAC,IAAI,CAACA,QAAQ,GAAC,EAAE;MAAC,KAAI,IAAIlH,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,IAAI,CAAC8G,YAAY,EAAC9G,CAAC,EAAE,EAAC;QAAC,IAAI,CAACkH,QAAQ,CAAC4G,IAAI,CAAC,EAAE,CAAC;QAAC,MAAM9N,CAAC,GAAC,IAAI,CAACkH,QAAQ,CAAC,IAAI,CAACA,QAAQ,CAAC0B,MAAM,GAAC,CAAC,CAAC;QAAC,KAAI,IAAI3I,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,IAAI,CAAC8G,YAAY,EAAC9G,CAAC,EAAE,EAACD,CAAC,CAAC8N,IAAI,CAAC,IAAItN,CAAC,GAAC;MAAA;IAAC,CAAC,MAAK,KAAI,IAAIL,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,IAAI,CAAC2G,YAAY,EAAC3G,CAAC,EAAE,EAAC,KAAI,IAAIH,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,IAAI,CAAC+G,YAAY,EAAC/G,CAAC,EAAE,EAAC,IAAI,CAACkH,QAAQ,CAAC/G,CAAC,CAAC,CAACH,CAAC,CAAC,CAACqH,KAAK,EAAE;IAAC,IAAI,CAACL,aAAa,GAAChH,CAAC,GAAC,IAAI,CAAC8G,YAAY,EAAC,IAAI,CAACG,aAAa,GAAChH,CAAC,GAAC,IAAI,CAAC8G,YAAY,EAAC,IAAI,CAACI,WAAW,GAAC,CAAC;EAAA;EAAC4D,UAAUA,CAAC/K,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACwF,IAAI,CAAC,IAAI,CAAC2D,eAAe,CAAC;MAAChJ,CAAC,GAACwN,IAAI,CAACE,KAAK,CAAC5N,CAAC,CAACgF,IAAI,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC+B,aAAa,CAAC;MAAC3G,CAAC,GAACsN,IAAI,CAACE,KAAK,CAAC5N,CAAC,CAACgF,IAAI,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC+B,aAAa,CAAC;MAACzG,CAAC,GAACoN,IAAI,CAACE,KAAK,CAAC5N,CAAC,CAACgF,IAAI,CAAC,CAAC,CAAC,GAAC,IAAI,CAACgC,aAAa,CAAC;MAACzG,CAAC,GAACmN,IAAI,CAACE,KAAK,CAAC5N,CAAC,CAACgF,IAAI,CAAC,CAAC,CAAC,GAAC,IAAI,CAACgC,aAAa,CAAC;IAAC,KAAI,IAAIvG,CAAC,GAACP,CAAC,EAACO,CAAC,IAAEL,CAAC,EAACK,CAAC,EAAE,EAAC,IAAG,EAAEA,CAAC,GAAC,CAAC,IAAEA,CAAC,IAAE,IAAI,CAACoG,YAAY,CAAC,EAAC,KAAI,IAAI7G,CAAC,GAACM,CAAC,EAACN,CAAC,IAAEO,CAAC,EAACP,CAAC,EAAE,EAACA,CAAC,GAAC,CAAC,IAAEA,CAAC,IAAE,IAAI,CAAC8G,YAAY,IAAE,IAAI,CAACG,QAAQ,CAACxG,CAAC,CAAC,CAACT,CAAC,CAAC,CAAC6N,IAAI,CAAC9N,CAAC,CAAC;EAAA;EAACgL,qBAAqBA,CAAChL,CAAC,EAACC,CAAC,EAAC;IAAC,MAAME,CAAC,GAACH,CAAC,CAACsF,iBAAiB;IAACnF,CAAC,CAACmL,SAAS,KAAGnL,CAAC,CAAC4N,iBAAiB,CAACpK,CAAC,CAAC6H,aAAa,EAACvL,CAAC,EAAC,IAAI,CAACkJ,eAAe,CAAC,EAAC,IAAI,CAACA,eAAe,KAAG1F,CAAC,CAACkH,KAAK,IAAE,IAAI,CAAC/C,IAAI,CAACoG,OAAO,CAACC,yBAAyB,CAAC9N,CAAC,EAACF,CAAC,CAAC,CAAC;EAAA;AAAC,CAAC;AAAC,SAASuJ,EAAEA,CAACxJ,CAAC,EAACC,CAAC,EAAC;EAAC,MAAME,CAAC,GAACH,CAAC,CAACsF,iBAAiB;EAACnF,CAAC,CAACmL,SAAS,IAAEnL,CAAC,CAAC+N,mBAAmB,CAACvK,CAAC,CAAC6H,aAAa,EAACvL,CAAC,CAAC;AAAA;AAAC,UAASkL,EAAEA,CAACnL,CAAC,EAAC;EAAC,IAAG0G,GAAG,CAACyH,SAAS,CAACC,OAAO,EAAC;IAAC,MAAMnO,CAAC,GAACD,CAAC,CAACoO,OAAO,EAAE;IAAC,KAAI,IAAIpO,CAAC,GAACC,CAAC,CAACmK,IAAI,EAAE,EAAC,CAACpK,CAAC,CAACmK,IAAI,EAACnK,CAAC,GAACC,CAAC,CAACmK,IAAI,EAAE,EAAC,MAAMpK,CAAC,CAACsK,KAAK,CAAC,CAAC,CAAC;EAAA,CAAC,MAAK,OAAMtK,CAAC,CAACqO,MAAM,EAAE;AAAA;AAAC,UAASjD,EAAEA,CAACpL,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;EAACF,CAAC,CAACoH,KAAK,EAAE,EAACrH,CAAC,CAACqI,OAAO,CAAE,CAACrI,CAAC,EAACK,CAAC,KAAG;IAAC,MAAME,CAAC,GAACN,CAAC,CAACqO,OAAO,EAAE;IAAC/N,CAAC,CAACgO,EAAE,GAAClO,CAAC,EAACE,CAAC,CAAC6E,OAAO,GAACpF,CAAC,CAACsF,iBAAiB,CAACkJ,iBAAiB,CAAC7K,CAAC,CAAC6H,aAAa,EAACrL,CAAC,CAAC,EAACI,CAAC,CAACkO,IAAI,GAACzO,CAAC,CAACwF,IAAI,GAACxF,CAAC,CAACwF,IAAI,CAACrF,CAAC,CAAC,CAAC+E,QAAQ,GAACwJ,MAAM,CAACC,SAAS;EAAA,CAAC,CAAE,EAAC,KAAK;EAAC,MAAMtO,CAAC,GAACJ,CAAC,CAAC2O,YAAY,CAAE,CAAC5O,CAAC,EAACC,CAAC,KAAGD,CAAC,CAACoF,OAAO,KAAGnF,CAAC,CAACmF,OAAO,GAACpF,CAAC,CAACoF,OAAO,GAAC,CAAC,CAAC,GAAC,CAAC,GAACpF,CAAC,CAACyO,IAAI,KAAGxO,CAAC,CAACwO,IAAI,GAACzO,CAAC,CAACyO,IAAI,GAACxO,CAAC,CAACwO,IAAI,GAACzO,CAAC,CAACuO,EAAE,GAACtO,CAAC,CAACsO,EAAE,CAAE;EAAC,KAAI,IAAIhO,CAAC,GAACF,CAAC,CAAC+J,IAAI,EAAE,EAAC,CAAC7J,CAAC,CAAC4J,IAAI,EAAC5J,CAAC,GAACF,CAAC,CAAC+J,IAAI,EAAE,EAAC,KAAK;EAACnK,CAAC,CAAC4O,MAAM,CAAE5O,CAAC,IAAE;IAAC,MAAME,CAAC,GAACH,CAAC,CAACoM,GAAG,CAACnM,CAAC,CAACsO,EAAE,CAAC;IAACpO,CAAC,KAAGH,CAAC,CAACuJ,MAAM,CAACtJ,CAAC,CAACsO,EAAE,CAAC,EAACvO,CAAC,CAACoJ,GAAG,CAACnJ,CAAC,CAACsO,EAAE,EAACpO,CAAC,CAAC,CAAC;EAAA,CAAC,CAAE,EAACF,CAAC,CAACoH,KAAK,EAAE;AAAA;AAACrH,CAAC,CAAC,CAACU,CAAC,CAAC;EAACoO,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3I,EAAE,CAACgI,SAAS,EAAC,MAAM,EAAC,KAAK,CAAC,CAAC,EAACnO,CAAC,CAAC,CAACU,CAAC,CAAC;EAAC+H,IAAI,EAACsG,OAAO;EAACC,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC7I,EAAE,CAACgI,SAAS,EAAC,UAAU,EAAC,IAAI,CAAC,EAAChI,EAAE,GAACnG,CAAC,CAAC,CAACY,CAAC,CAAC,4CAA4C,CAAC,CAAC,EAACuF,EAAE,CAAC;AAAC,MAAM8I,EAAE;AAAE,MAAMpI,EAAE;EAAC7B,WAAWA,CAAA,EAAsB;IAAA,IAArBhF,CAAC,GAAAkP,SAAA,CAAAtG,MAAA,QAAAsG,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,IAAI;IAAA,IAACjP,CAAC,GAAAiP,SAAA,CAAAtG,MAAA,QAAAsG,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,IAAI;IAAA,IAAC/O,CAAC,GAAA+O,SAAA,CAAAtG,MAAA,QAAAsG,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,IAAI;IAAE,IAAI,CAACjE,MAAM,GAACjL,CAAC,EAAC,IAAI,CAACoF,OAAO,GAACnF,CAAC,EAAC,IAAI,CAACiL,IAAI,GAAC/K,CAAC,EAAC,IAAI,CAACkL,SAAS,GAAC,IAAI7K,CAAC,CAAC;MAAC4O,SAAS,EAACpP,CAAC,IAAEA,CAAC,IAAE,IAAIiP,EAAE;IAAA,CAAC,CAAC;EAAA;AAAC;AAAC,MAAM7B,EAAE,GAACpM,CAAC,EAAE;AAAC,MAAMqO,EAAE;EAACrK,WAAWA,CAAA,EAAE;IAAC,IAAI,CAAC+H,YAAY,GAAC9L,CAAC,EAAE,EAAC,IAAI,CAAC0L,WAAW,GAAC1L,CAAC,EAAE,EAAC,IAAI,CAACiE,QAAQ,GAAC,CAAC,EAAC,IAAI,CAAC2H,4BAA4B,GAAC,CAAC,EAAC,IAAI,CAACH,SAAS,GAAC,IAAIpI,CAAC;EAAA;EAAC,IAAIsH,eAAeA,CAAA,EAAE;IAAC,MAAM5L,CAAC,GAAC,IAAI,CAAC2M,WAAW;IAAC,OAAO3M,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,IAAEA,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,IAAEA,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,IAAEA,CAAC,CAAC,CAAC,CAAC,IAAE,CAAC,IAAEA,CAAC,CAAC,CAAC,CAAC,IAAE,CAAC;EAAA;AAAC;AAAC,MAAM0L,EAAE,GAAC,IAAI2D,EAAE;AAAC,SAAOlJ,EAAE,IAAImJ,YAAY,EAACjK,EAAE,IAAIkK,mBAAmB,EAACxJ,EAAE,IAAIyJ,qBAAqB,EAAC/J,EAAE,IAAIgK,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}