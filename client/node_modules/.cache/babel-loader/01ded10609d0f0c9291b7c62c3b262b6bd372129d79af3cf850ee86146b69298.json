{"ast":null,"code":"import _objectSpread from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../config.js\";\nimport { id as r } from \"../kernel.js\";\nimport s from \"../request.js\";\nimport i from \"../core/Error.js\";\nimport o from \"../core/Evented.js\";\nimport { on as n } from \"../core/events.js\";\nimport { fixJson as a } from \"../core/lang.js\";\nimport { getDeepValue as h } from \"../core/object.js\";\nimport { createResolver as l, onAbort as c, isAborted as d } from \"../core/promiseUtils.js\";\nimport { watch as u } from \"../core/reactiveUtils.js\";\nimport { urlToObject as p, hasSameOrigin as _, Url as f, queryToObject as g, base64UrlEncode as m, objectToQuery as v, normalize as S, getProxyRule as w, makeAbsolute as I, addQueryParameters as A } from \"../core/urlUtils.js\";\nimport { property as k } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { subclass as y } from \"../core/accessorSupport/decorators/subclass.js\";\nimport U from \"./IdentityForm.js\";\nimport T from \"./IdentityModal.js\";\nimport x from \"./OAuthCredential.js\";\nimport O from \"./OAuthInfo.js\";\nimport P from \"./ServerInfo.js\";\nimport { isSecureProxyService as R } from \"../portal/support/urlUtils.js\";\nvar C = {},\n  b = function b(e) {\n    var t = new f(e.owningSystemUrl).host,\n      r = new f(e.server).host,\n      s = /.+\\.arcgis\\.com$/i;\n    return s.test(t) && s.test(r);\n  },\n  D = function D(e, t) {\n    return !!(b(e) && t && t.some(function (t) {\n      return t.test(e.server);\n    }));\n  };\nvar q = null,\n  j = null;\ntry {\n  q = window.localStorage, j = window.sessionStorage;\n} catch (_unused) {}\nvar E = /*#__PURE__*/function (_o) {\n  _inherits(E, _o);\n  var _super = _createSuper(E);\n  function E() {\n    var _this;\n    _classCallCheck(this, E);\n    _this = _super.call(this), _this._portalConfig = globalThis.esriGeowConfig, _this.serverInfos = [], _this.oAuthInfos = [], _this.credentials = [], _this._soReqs = [], _this._xoReqs = [], _this._portals = [], _this._defaultOAuthInfo = null, _this._defaultTokenValidity = 60, _this.dialog = null, _this.formConstructor = U, _this.tokenValidity = null, _this.normalizeWebTierAuth = !1, _this._appOrigin = \"null\" !== window.origin ? window.origin : window.location.origin, _this._appUrlObj = p(window.location.href), _this._busy = null, _this._rejectOnPersistedPageShow = !1, _this._oAuthLocationParams = null, _this._gwTokenUrl = \"/sharing/rest/generateToken\", _this._agsRest = \"/rest/services\", _this._agsPortal = /\\/sharing(\\/|$)/i, _this._agsAdmin = /(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i, _this._adminSvcs = /\\/rest\\/admin\\/services(\\/|$)/i, _this._gwDomains = [{\n      regex: /^https?:\\/\\/www\\.arcgis\\.com/i,\n      customBaseUrl: \"maps.arcgis.com\",\n      tokenServiceUrl: \"https://www.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsdev.arcgis.com\",\n      tokenServiceUrl: \"https://dev.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsdevext.arcgis.com\",\n      tokenServiceUrl: \"https://devext.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,\n      customBaseUrl: \"mapsqa.arcgis.com\",\n      tokenServiceUrl: \"https://qaext.arcgis.com/sharing/rest/generateToken\"\n    }, {\n      regex: /^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,\n      customBaseUrl: \"maps.arcgis.com\",\n      tokenServiceUrl: \"https://www.arcgis.com/sharing/rest/generateToken\"\n    }], _this._legacyFed = [], _this._regexSDirUrl = /http.+\\/rest\\/services\\/?/gi, _this._regexServerType = /(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi, _this._gwUser = /http.+\\/users\\/([^\\/]+)\\/?.*/i, _this._gwItem = /http.+\\/items\\/([^\\/]+)\\/?.*/i, _this._gwGroup = /http.+\\/groups\\/([^\\/]+)\\/?.*/i, _this._rePortalTokenSvc = /\\/sharing(\\/rest)?\\/generatetoken/i, _this._createDefaultOAuthInfo = !0, _this._hasTestedIfAppIsOnPortal = !1, _this._getOAuthLocationParams(), window.addEventListener(\"pageshow\", function (e) {\n      _this._pageShowHandler(e);\n    });\n    return _this;\n  }\n  _createClass(E, [{\n    key: \"registerServers\",\n    value: function registerServers(e) {\n      var _this2 = this;\n      var t = this.serverInfos;\n      t ? (e = e.filter(function (e) {\n        return !_this2.findServerInfo(e.server);\n      }), this.serverInfos = t.concat(e)) : this.serverInfos = e, e.forEach(function (e) {\n        e.owningSystemUrl && _this2._portals.push(e.owningSystemUrl), e.hasPortal && _this2._portals.push(e.server);\n      });\n    }\n  }, {\n    key: \"registerOAuthInfos\",\n    value: function registerOAuthInfos(e) {\n      var t = this.oAuthInfos;\n      if (t) {\n        var _iterator = _createForOfIteratorHelper(e),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _r = _step.value;\n            var _e = this.findOAuthInfo(_r.portalUrl);\n            _e && t.splice(t.indexOf(_e), 1);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        this.oAuthInfos = t.concat(e);\n      } else this.oAuthInfos = e;\n    }\n  }, {\n    key: \"registerToken\",\n    value: function registerToken(e) {\n      e = _objectSpread({}, e);\n      var t = this._sanitizeUrl(e.server),\n        r = this._isServerRsrc(t);\n      var s,\n        i = this.findServerInfo(t),\n        o = !0;\n      i || (i = new P(), i.server = this._getServerInstanceRoot(t), r ? i.hasServer = !0 : (i.tokenServiceUrl = this._getTokenSvcUrl(t), i.hasPortal = !0), this.registerServers([i])), s = this._findCredential(t), s ? (delete e.server, Object.assign(s, e), o = !1) : (s = new L({\n        userId: e.userId,\n        server: i.server,\n        token: e.token,\n        expires: e.expires,\n        ssl: e.ssl,\n        scope: r ? \"server\" : \"portal\"\n      }), s.resources = [t], this.credentials.push(s)), s.emitTokenChange(!1), o || s.refreshServerTokens();\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return a({\n        serverInfos: this.serverInfos.map(function (e) {\n          return e.toJSON();\n        }),\n        oAuthInfos: this.oAuthInfos.map(function (e) {\n          return e.toJSON();\n        }),\n        credentials: this.credentials.map(function (e) {\n          return e.toJSON();\n        })\n      });\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize(e) {\n      var _this3 = this;\n      if (!e) return;\n      \"string\" == typeof e && (e = JSON.parse(e));\n      var t = e.serverInfos,\n        r = e.oAuthInfos,\n        s = e.credentials;\n      if (t) {\n        var _e2 = [];\n        t.forEach(function (t) {\n          t.server && t.tokenServiceUrl && _e2.push(t.declaredClass ? t : new P(t));\n        }), _e2.length && this.registerServers(_e2);\n      }\n      if (r) {\n        var _e3 = [];\n        r.forEach(function (t) {\n          t.appId && _e3.push(t.declaredClass ? t : new O(t));\n        }), _e3.length && this.registerOAuthInfos(_e3);\n      }\n      s && s.forEach(function (e) {\n        e.server && e.token && e.expires && e.expires > Date.now() && ((e = e.declaredClass ? e : new L(e)).emitTokenChange(), _this3.credentials.push(e));\n      });\n    }\n  }, {\n    key: \"findServerInfo\",\n    value: function findServerInfo(e) {\n      var t;\n      e = this._sanitizeUrl(e);\n      var _iterator2 = _createForOfIteratorHelper(this.serverInfos),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _r2 = _step2.value;\n          if (this._hasSameServerInstance(_r2.server, e)) {\n            t = _r2;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return t;\n    }\n  }, {\n    key: \"findOAuthInfo\",\n    value: function findOAuthInfo(e) {\n      var t;\n      e = this._sanitizeUrl(e);\n      var _iterator3 = _createForOfIteratorHelper(this.oAuthInfos),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _r3 = _step3.value;\n          if (this._hasSameServerInstance(_r3.portalUrl, e)) {\n            t = _r3;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return t;\n    }\n  }, {\n    key: \"findCredential\",\n    value: function findCredential(e, t) {\n      if (!e) return;\n      var r;\n      e = this._sanitizeUrl(e);\n      var s = this._isServerRsrc(e) ? \"server\" : \"portal\";\n      if (t) {\n        var _iterator4 = _createForOfIteratorHelper(this.credentials),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _i = _step4.value;\n            if (this._hasSameServerInstance(_i.server, e) && t === _i.userId && _i.scope === s) {\n              r = _i;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      } else {\n        var _iterator5 = _createForOfIteratorHelper(this.credentials),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _i2 = _step5.value;\n            if (this._hasSameServerInstance(_i2.server, e) && -1 !== this._getIdenticalSvcIdx(e, _i2) && _i2.scope === s) {\n              r = _i2;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n      return r;\n    }\n  }, {\n    key: \"getCredential\",\n    value: function getCredential(e, t) {\n      var r,\n        s,\n        o = !0;\n      t && (r = !!t.token, s = t.error, o = !1 !== t.prompt), t = _objectSpread({}, t), e = this._sanitizeUrl(e);\n      var n = new AbortController(),\n        a = l();\n      if (t.signal && c(t.signal, function () {\n        n.abort();\n      }), c(n, function () {\n        a.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n      }), d(n)) return a.promise;\n      t.signal = n.signal;\n      var h = this._isAdminResource(e),\n        u = r ? this.findCredential(e) : null;\n      var p;\n      if (u && s && s.details && 498 === s.details.httpStatus) u.destroy();else if (u) return p = new i(\"identity-manager:not-authorized\", \"You are currently signed in as: '\" + u.userId + \"'. You do not have access to this resource: \" + e, {\n        error: s\n      }), a.reject(p), a.promise;\n      var f = this._findCredential(e, t);\n      if (f) return a.resolve(f), a.promise;\n      var g = this.findServerInfo(e);\n      if (g) !g.hasServer && this._isServerRsrc(e) && (g._restInfoPms = this._getTokenSvcUrl(e), g.hasServer = !0);else {\n        var _t = this._getTokenSvcUrl(e);\n        if (!_t) return p = new i(\"identity-manager:unknown-resource\", \"Unknown resource - could not find token service endpoint.\"), a.reject(p), a.promise;\n        g = new P(), g.server = this._getServerInstanceRoot(e), \"string\" == typeof _t ? (g.tokenServiceUrl = _t, g.hasPortal = !0) : (g._restInfoPms = _t, g.hasServer = !0), this.registerServers([g]);\n      }\n      return g.hasPortal && void 0 === g._selfReq && (o || _(g.tokenServiceUrl, this._appOrigin) || this._gwDomains.some(function (e) {\n        return e.tokenServiceUrl === g.tokenServiceUrl;\n      })) && (g._selfReq = {\n        owningTenant: t && t.owningTenant,\n        selfDfd: this._getPortalSelf(g.tokenServiceUrl.replace(this._rePortalTokenSvc, \"/sharing/rest/portals/self\"), e)\n      }), this._enqueue(e, g, t, a, h);\n    }\n  }, {\n    key: \"getResourceName\",\n    value: function getResourceName(e) {\n      return this._isRESTService(e) ? e.replace(this._regexSDirUrl, \"\").replace(this._regexServerType, \"\") || \"\" : this._gwUser.test(e) && e.replace(this._gwUser, \"$1\") || this._gwItem.test(e) && e.replace(this._gwItem, \"$1\") || this._gwGroup.test(e) && e.replace(this._gwGroup, \"$1\") || \"\";\n    }\n  }, {\n    key: \"generateToken\",\n    value: function generateToken(e, t, r) {\n      var o = this._rePortalTokenSvc.test(e.tokenServiceUrl),\n        n = new f(this._appOrigin),\n        a = e.shortLivedTokenValidity;\n      var h, l, c, d, u, p, g, m;\n      t && (m = this.tokenValidity || a || this._defaultTokenValidity, m > a && a > 0 && (m = a)), r && (h = r.isAdmin, l = r.serverUrl, c = r.token, p = r.signal, g = r.ssl, e.customParameters = r.customParameters), h ? d = e.adminTokenServiceUrl : (d = e.tokenServiceUrl, u = new f(d.toLowerCase()), e.webTierAuth && (r === null || r === void 0 ? void 0 : r.serverUrl) && !g && \"http\" === n.scheme && (_(n.uri, d, !0) || \"https\" === u.scheme && n.host === u.host && \"7080\" === n.port && \"7443\" === u.port) && (d = d.replace(/^https:/i, \"http:\").replace(/:7443/i, \":7080\")));\n      var v = _objectSpread({\n        query: _objectSpread({\n          request: \"getToken\",\n          username: t === null || t === void 0 ? void 0 : t.username,\n          password: t === null || t === void 0 ? void 0 : t.password,\n          serverUrl: l,\n          token: c,\n          expiration: m,\n          referer: h || o ? this._appOrigin : null,\n          client: h ? \"referer\" : null,\n          f: \"json\"\n        }, e.customParameters),\n        method: \"post\",\n        authMode: \"anonymous\",\n        useProxy: this._useProxy(e, r),\n        signal: p\n      }, r === null || r === void 0 ? void 0 : r.ioArgs);\n      o || (v.withCredentials = !1);\n      return s(d, v).then(function (r) {\n        var s = r.data;\n        if (!s || !s.token) return new i(\"identity-manager:authentication-failed\", \"Unable to generate token\");\n        var o = e.server;\n        return C[o] || (C[o] = {}), t && (C[o][t.username] = t.password), s.validity = m, s;\n      });\n    }\n  }, {\n    key: \"isBusy\",\n    value: function isBusy() {\n      return !!this._busy;\n    }\n  }, {\n    key: \"checkSignInStatus\",\n    value: function checkSignInStatus(e) {\n      return this.checkAppAccess(e, \"\").then(function (e) {\n        return e.credential;\n      });\n    }\n  }, {\n    key: \"checkAppAccess\",\n    value: function checkAppAccess(e, t, r) {\n      var _this4 = this;\n      var o = !1;\n      return this.getCredential(e, {\n        prompt: !1\n      }).then(function (n) {\n        var a;\n        var h = {\n          f: \"json\"\n        };\n        if (\"portal\" === n.scope) {\n          if (t && (_this4._doPortalSignIn(e) || r && r.force)) a = n.server + \"/sharing/rest/oauth2/validateAppAccess\", h.client_id = t;else {\n            if (!n.token) return {\n              credential: n\n            };\n            a = n.server + \"/sharing/rest\";\n          }\n        } else {\n          if (!n.token) return {\n            credential: n\n          };\n          a = n.server + \"/rest/services\";\n        }\n        return n.token && (h.token = n.token), s(a, {\n          query: h,\n          authMode: \"anonymous\"\n        }).then(function (e) {\n          if (!1 === e.data.valid) throw new i(\"identity-manager:not-authorized\", \"You are currently signed in as: '\".concat(n.userId, \"'.\"), e.data);\n          return o = !!e.data.viewOnlyUserTypeApp, {\n            credential: n\n          };\n        }).catch(function (e) {\n          if (\"identity-manager:not-authorized\" === e.name) throw e;\n          var t = e.details && e.details.httpStatus;\n          if (498 === t) throw n.destroy(), new i(\"identity-manager:not-authenticated\", \"User is not signed in.\");\n          if (400 === t) throw new i(\"identity-manager:invalid-request\");\n          return {\n            credential: n\n          };\n        });\n      }).then(function (e) {\n        return {\n          credential: e.credential,\n          viewOnly: o\n        };\n      });\n    }\n  }, {\n    key: \"setOAuthResponseHash\",\n    value: function setOAuthResponseHash(e) {\n      e && (\"#\" === e.charAt(0) && (e = e.substring(1)), this._processOAuthPopupParams(g(e)));\n    }\n  }, {\n    key: \"setOAuthRedirectionHandler\",\n    value: function setOAuthRedirectionHandler(e) {\n      this._oAuthRedirectFunc = e;\n    }\n  }, {\n    key: \"setProtocolErrorHandler\",\n    value: function setProtocolErrorHandler(e) {\n      this._protocolFunc = e;\n    }\n  }, {\n    key: \"signIn\",\n    value: function signIn(e, t) {\n      var _this5 = this;\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var s = l(),\n        o = function o() {\n          var _h, _d, _p, _a, _this5$dialog;\n          (_h = h) !== null && _h !== void 0 && _h.remove(), (_d = d) !== null && _d !== void 0 && _d.remove(), (_p = p) !== null && _p !== void 0 && _p.remove(), (_a = a) !== null && _a !== void 0 && _a.destroy(), (_this5$dialog = _this5.dialog) !== null && _this5$dialog !== void 0 && _this5$dialog.destroy(), _this5.dialog = a = h = d = p = null;\n        },\n        n = function n() {\n          o(), _this5._oAuthDfd = null, s.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n        };\n      r.signal && c(r.signal, function () {\n        n();\n      });\n      var a = new this.formConstructor();\n      a.resource = this.getResourceName(e), a.server = t.server, this.dialog = new T(), this.dialog.content = a, this.dialog.open = !0, this.emit(\"dialog-create\");\n      var h = a.on(\"cancel\", n),\n        d = u(function () {\n          return _this5.dialog.open;\n        }, n),\n        p = a.on(\"submit\", function (e) {\n          _this5.generateToken(t, e, {\n            isAdmin: r.isAdmin,\n            signal: r.signal\n          }).then(function (i) {\n            o();\n            var n = new L({\n              userId: e.username,\n              server: t.server,\n              token: i.token,\n              expires: null != i.expires ? Number(i.expires) : null,\n              ssl: !!i.ssl,\n              isAdmin: r.isAdmin,\n              validity: i.validity\n            });\n            s.resolve(n);\n          }).catch(function (e) {\n            a.error = e, a.signingIn = !1;\n          });\n        });\n      return s.promise;\n    }\n  }, {\n    key: \"oAuthSignIn\",\n    value: function oAuthSignIn(e, t, r, s) {\n      var _this6 = this;\n      this._oAuthDfd = l();\n      var o = this._oAuthDfd;\n      var n;\n      s !== null && s !== void 0 && s.signal && c(s.signal, function () {\n        var e = _this6._oAuthDfd && _this6._oAuthDfd.oAuthWin_;\n        e && !e.closed ? e.close() : _this6.dialog && f();\n      }), o.resUrl_ = e, o.sinfo_ = t, o.oinfo_ = r;\n      var a = r._oAuthCred;\n      if (a.storage && (\"authorization-code\" === r.flowType || \"auto\" === r.flowType && !r.popup && t.currentVersion >= 8.4)) {\n        var _e4 = crypto.getRandomValues(new Uint8Array(32));\n        n = m(_e4), a.codeVerifier = n, _e4 = crypto.getRandomValues(new Uint8Array(32)), a.stateUID = m(_e4), a.save() || (a.codeVerifier = n = null);\n      } else a.codeVerifier = null;\n      var h, d, p, _;\n      this._getCodeChallenge(n).then(function (i) {\n        var o = !s || !1 !== s.oAuthPopupConfirmation;\n        r.popup && o ? (h = new _this6.formConstructor(), h.oAuthPrompt = !0, h.server = t.server, _this6.dialog = new T(), _this6.dialog.content = h, _this6.dialog.open = !0, _this6.emit(\"dialog-create\"), d = h.on(\"cancel\", f), p = u(function () {\n          return _this6.dialog.open;\n        }, f), _ = h.on(\"submit\", function () {\n          g(), _this6._doOAuthSignIn(e, t, r, i);\n        })) : _this6._doOAuthSignIn(e, t, r, i);\n      });\n      var f = function f() {\n          g(), _this6._oAuthDfd = null, o.reject(new i(\"identity-manager:user-aborted\", \"ABORTED\"));\n        },\n        g = function g() {\n          var _d2, _p2, _ref, _h2, _this6$dialog;\n          (_d2 = d) !== null && _d2 !== void 0 && _d2.remove(), (_p2 = p) !== null && _p2 !== void 0 && _p2.remove(), (_ref = _) !== null && _ref !== void 0 && _ref.remove(), (_h2 = h) !== null && _h2 !== void 0 && _h2.destroy(), (_this6$dialog = _this6.dialog) !== null && _this6$dialog !== void 0 && _this6$dialog.destroy(), _this6.dialog = null;\n        };\n      return o.promise;\n    }\n  }, {\n    key: \"destroyCredentials\",\n    value: function destroyCredentials() {\n      if (this.credentials) {\n        this.credentials.slice().forEach(function (e) {\n          e.destroy();\n        });\n      }\n      this.emit(\"credentials-destroy\");\n    }\n  }, {\n    key: \"enablePostMessageAuth\",\n    value: function enablePostMessageAuth() {\n      var _this7 = this;\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"https://www.arcgis.com/sharing/rest\";\n      this._postMessageAuthHandle && this._postMessageAuthHandle.remove(), this._postMessageAuthHandle = n(window, \"message\", function (t) {\n        var _t$data;\n        if ((t.origin === _this7._appOrigin || t.origin.endsWith(\".arcgis.com\")) && \"arcgis:auth:requestCredential\" === ((_t$data = t.data) === null || _t$data === void 0 ? void 0 : _t$data.type)) {\n          var _r4 = t.source;\n          _this7.getCredential(e).then(function (e) {\n            _r4.postMessage({\n              type: \"arcgis:auth:credential\",\n              credential: {\n                expires: e.expires,\n                server: e.server,\n                ssl: e.ssl,\n                token: e.token,\n                userId: e.userId\n              }\n            }, t.origin);\n          }).catch(function (e) {\n            _r4.postMessage({\n              type: \"arcgis:auth:error\",\n              error: {\n                name: e.name,\n                message: e.message\n              }\n            }, t.origin);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"disablePostMessageAuth\",\n    value: function disablePostMessageAuth() {\n      this._postMessageAuthHandle && (this._postMessageAuthHandle.remove(), this._postMessageAuthHandle = null);\n    }\n  }, {\n    key: \"_getOAuthLocationParams\",\n    value: function _getOAuthLocationParams() {\n      var e = window.location.hash;\n      if (e) {\n        var _t2$state;\n        \"#\" === e.charAt(0) && (e = e.substring(1));\n        var _t2 = g(e);\n        var _r5 = !1;\n        if (_t2.access_token && _t2.expires_in && _t2.state && _t2.hasOwnProperty(\"username\")) try {\n          _t2.state = JSON.parse(_t2.state), _t2.state.portalUrl && (this._oAuthLocationParams = _t2, _r5 = !0);\n        } catch (_unused2) {} else if (_t2.error && _t2.error_description && (console.log(\"IdentityManager OAuth Error: \", _t2.error, \" - \", _t2.error_description), \"access_denied\" === _t2.error && (_r5 = !0, _t2.state))) try {\n          _t2.state = JSON.parse(_t2.state);\n        } catch (_unused3) {}\n        _r5 && (window.location.hash = ((_t2$state = _t2.state) === null || _t2$state === void 0 ? void 0 : _t2$state.hash) || \"\");\n      }\n      var t = window.location.search;\n      if (t) {\n        \"?\" === t.charAt(0) && (t = t.substring(1));\n        var _e5 = g(t);\n        var _r6 = !1;\n        if (_e5.code && _e5.state) try {\n          _e5.state = JSON.parse(_e5.state), _e5.state.portalUrl && _e5.state.uid && (this._oAuthLocationParams = _e5, _r6 = !0);\n        } catch (_unused4) {} else if (_e5.error && _e5.error_description && (console.log(\"IdentityManager OAuth Error: \", _e5.error, \" - \", _e5.error_description), \"access_denied\" === _e5.error && (_r6 = !0, _e5.state))) try {\n          _e5.state = JSON.parse(_e5.state);\n        } catch (_unused5) {}\n        if (_r6) {\n          var _e5$state;\n          var _t3 = _objectSpread({}, _e5);\n          [\"code\", \"error\", \"error_description\", \"message_code\", \"persist\", \"state\"].forEach(function (e) {\n            delete _t3[e];\n          });\n          var _r7 = v(_t3),\n            _s = window.location.pathname + (_r7 ? \"?\".concat(_r7) : \"\") + (((_e5$state = _e5.state) === null || _e5$state === void 0 ? void 0 : _e5$state.hash) || \"\");\n          window.history.replaceState(window.history.state, \"\", _s);\n        }\n      }\n    }\n  }, {\n    key: \"_getOAuthToken\",\n    value: function _getOAuthToken(e, t, r, i, o) {\n      return e = e.replace(/^http:/i, \"https:\"), s(\"\".concat(e, \"/sharing/rest/oauth2/token\"), {\n        authMode: \"anonymous\",\n        method: \"post\",\n        query: i && o ? {\n          grant_type: \"authorization_code\",\n          code: t,\n          redirect_uri: i,\n          client_id: r,\n          code_verifier: o\n        } : {\n          grant_type: \"refresh_token\",\n          refresh_token: t,\n          client_id: r\n        }\n      }).then(function (e) {\n        return e.data;\n      });\n    }\n  }, {\n    key: \"_getCodeChallenge\",\n    value: function _getCodeChallenge(e) {\n      if (e && globalThis.isSecureContext) {\n        var _t4 = new TextEncoder().encode(e);\n        return crypto.subtle.digest(\"SHA-256\", _t4).then(function (e) {\n          return m(new Uint8Array(e));\n        });\n      }\n      return Promise.resolve(null);\n    }\n  }, {\n    key: \"_pageShowHandler\",\n    value: function _pageShowHandler(e) {\n      if (e.persisted && this.isBusy() && this._rejectOnPersistedPageShow) {\n        var _e6 = new i(\"identity-manager:user-aborted\", \"ABORTED\");\n        this._errbackFunc(_e6);\n      }\n    }\n  }, {\n    key: \"_findCredential\",\n    value: function _findCredential(e, t) {\n      var _this8 = this;\n      var r,\n        s,\n        i,\n        o,\n        n = -1;\n      var a = t && t.token,\n        h = t && t.resource,\n        l = this._isServerRsrc(e) ? \"server\" : \"portal\",\n        c = this.credentials.filter(function (t) {\n          return _this8._hasSameServerInstance(t.server, e) && t.scope === l;\n        });\n      if (e = h || e, c.length) if (1 === c.length) {\n        if (r = c[0], i = this.findServerInfo(r.server), s = i && i.owningSystemUrl, o = s ? this.findCredential(s, r.userId) : void 0, n = this._getIdenticalSvcIdx(e, r), !a) return -1 === n && r.resources.push(e), this._addResource(e, o), r;\n        -1 !== n && (r.resources.splice(n, 1), this._removeResource(e, o));\n      } else {\n        var _t5, _r8;\n        if (c.some(function (a) {\n          return _r8 = _this8._getIdenticalSvcIdx(e, a), -1 !== _r8 && (_t5 = a, i = _this8.findServerInfo(_t5.server), s = i && i.owningSystemUrl, o = s ? _this8.findCredential(s, _t5.userId) : void 0, n = _r8, !0);\n        }), a) _t5 && (_t5.resources.splice(n, 1), this._removeResource(e, o));else if (_t5) return this._addResource(e, o), _t5;\n      }\n    }\n  }, {\n    key: \"_findOAuthInfo\",\n    value: function _findOAuthInfo(e) {\n      var t = this.findOAuthInfo(e);\n      if (!t) {\n        var _iterator6 = _createForOfIteratorHelper(this.oAuthInfos),\n          _step6;\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var _r9 = _step6.value;\n            if (this._isIdProvider(_r9.portalUrl, e)) {\n              t = _r9;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n      }\n      return t;\n    }\n  }, {\n    key: \"_addResource\",\n    value: function _addResource(e, t) {\n      t && -1 === this._getIdenticalSvcIdx(e, t) && t.resources.push(e);\n    }\n  }, {\n    key: \"_removeResource\",\n    value: function _removeResource(e, t) {\n      var r = -1;\n      t && (r = this._getIdenticalSvcIdx(e, t), r > -1 && t.resources.splice(r, 1));\n    }\n  }, {\n    key: \"_useProxy\",\n    value: function _useProxy(e, t) {\n      return t && t.isAdmin && !_(e.adminTokenServiceUrl, this._appOrigin) || !this._isPortalDomain(e.tokenServiceUrl) && \"10.1\" === String(e.currentVersion) && !_(e.tokenServiceUrl, this._appOrigin);\n    }\n  }, {\n    key: \"_getOrigin\",\n    value: function _getOrigin(e) {\n      var t = new f(e);\n      return t.scheme + \"://\" + t.host + (null != t.port ? \":\" + t.port : \"\");\n    }\n  }, {\n    key: \"_getServerInstanceRoot\",\n    value: function _getServerInstanceRoot(e) {\n      var t = e.toLowerCase();\n      var r = t.indexOf(this._agsRest);\n      return -1 === r && this._isAdminResource(e) && (r = this._agsAdmin.test(e) ? e.replace(this._agsAdmin, \"$1\").length : e.search(this._adminSvcs)), -1 !== r || R(t) || (r = t.indexOf(\"/sharing\")), -1 === r && \"/\" === t.substr(-1) && (r = t.length - 1), r > -1 ? e.substring(0, r) : e;\n    }\n  }, {\n    key: \"_hasSameServerInstance\",\n    value: function _hasSameServerInstance(e, t) {\n      return \"/\" === e.substr(-1) && (e = e.slice(0, -1)), e = e.toLowerCase(), t = this._getServerInstanceRoot(t).toLowerCase(), e = this._normalizeAGOLorgDomain(e), t = this._normalizeAGOLorgDomain(t), (e = e.substr(e.indexOf(\":\"))) === (t = t.substr(t.indexOf(\":\")));\n    }\n  }, {\n    key: \"_normalizeAGOLorgDomain\",\n    value: function _normalizeAGOLorgDomain(e) {\n      var t = /^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,\n        r = /^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,\n        s = /^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;\n      return t.test(e) ? e = e.replace(t, \"https://www.arcgis.com\") : r.test(e) ? e = e.replace(r, \"https://devext.arcgis.com\") : s.test(e) && (e = e.replace(s, \"https://qaext.arcgis.com\")), e;\n    }\n  }, {\n    key: \"_sanitizeUrl\",\n    value: function _sanitizeUrl(e) {\n      var r = (t.request.proxyUrl || \"\").toLowerCase(),\n        s = r ? e.toLowerCase().indexOf(r + \"?\") : -1;\n      return -1 !== s && (e = e.substring(s + r.length + 1)), e = S(e), p(e).path;\n    }\n  }, {\n    key: \"_isRESTService\",\n    value: function _isRESTService(e) {\n      return e.includes(this._agsRest);\n    }\n  }, {\n    key: \"_isAdminResource\",\n    value: function _isAdminResource(e) {\n      return this._agsAdmin.test(e) || this._adminSvcs.test(e);\n    }\n  }, {\n    key: \"_isServerRsrc\",\n    value: function _isServerRsrc(e) {\n      return this._isRESTService(e) || this._isAdminResource(e);\n    }\n  }, {\n    key: \"_isIdenticalService\",\n    value: function _isIdenticalService(e, t) {\n      var r = !1;\n      if (this._isRESTService(e) && this._isRESTService(t)) {\n        var _s2 = this._getSuffix(e).toLowerCase(),\n          _i3 = this._getSuffix(t).toLowerCase();\n        if (r = _s2 === _i3, !r) {\n          var _e7 = /(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;\n          r = _s2.replace(_e7, \"$1\") === _i3.replace(_e7, \"$1\");\n        }\n      } else this._isAdminResource(e) && this._isAdminResource(t) ? r = !0 : this._isServerRsrc(e) || this._isServerRsrc(t) || !this._isPortalDomain(e) || (r = !0);\n      return r;\n    }\n  }, {\n    key: \"_isPortalDomain\",\n    value: function _isPortalDomain(e) {\n      var _this9 = this;\n      var r = new f(e.toLowerCase()),\n        s = this._portalConfig;\n      var i = this._gwDomains.some(function (e) {\n        return e.regex.test(r.uri);\n      });\n      return !i && s && (i = this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl), r.uri)), i || t.portalUrl && (i = _(r, t.portalUrl, !0)), i || (i = this._portals.some(function (e) {\n        return _this9._hasSameServerInstance(e, r.uri);\n      })), i = i || this._agsPortal.test(r.path), i;\n    }\n  }, {\n    key: \"_isIdProvider\",\n    value: function _isIdProvider(e, t) {\n      var r = -1,\n        s = -1;\n      this._gwDomains.forEach(function (i, o) {\n        -1 === r && i.regex.test(e) && (r = o), -1 === s && i.regex.test(t) && (s = o);\n      });\n      var i = !1;\n      if (r > -1 && s > -1 && (0 === r || 4 === r ? 0 !== s && 4 !== s || (i = !0) : 1 === r ? 1 !== s && 2 !== s || (i = !0) : 2 === r ? 2 === s && (i = !0) : 3 === r && 3 === s && (i = !0)), !i) {\n        var _r10 = this.findServerInfo(t),\n          _s3 = _r10 && _r10.owningSystemUrl;\n        _s3 && b(_r10) && this._isPortalDomain(_s3) && this._isIdProvider(e, _s3) && (i = !0);\n      }\n      return i;\n    }\n  }, {\n    key: \"_getIdenticalSvcIdx\",\n    value: function _getIdenticalSvcIdx(e, t) {\n      var r = -1;\n      for (var _s4 = 0; _s4 < t.resources.length; _s4++) {\n        var _i4 = t.resources[_s4];\n        if (this._isIdenticalService(e, _i4)) {\n          r = _s4;\n          break;\n        }\n      }\n      return r;\n    }\n  }, {\n    key: \"_getSuffix\",\n    value: function _getSuffix(e) {\n      return e.replace(this._regexSDirUrl, \"\").replace(this._regexServerType, \"$1\");\n    }\n  }, {\n    key: \"_getTokenSvcUrl\",\n    value: function _getTokenSvcUrl(e) {\n      var _this10 = this;\n      var t, r, i;\n      if (this._isRESTService(e) || this._isAdminResource(e)) {\n        var _i5 = this._getServerInstanceRoot(e);\n        return t = _i5 + \"/admin/generateToken\", r = s(e = _i5 + \"/rest/info\", {\n          query: {\n            f: \"json\"\n          }\n        }).then(function (e) {\n          return e.data;\n        }), {\n          adminUrl: t,\n          promise: r\n        };\n      }\n      if (this._isPortalDomain(e)) {\n        var _t6 = \"\";\n        if (this._gwDomains.some(function (r) {\n          return r.regex.test(e) && (_t6 = r.tokenServiceUrl), !!_t6;\n        }), _t6 || this._portals.some(function (r) {\n          return _this10._hasSameServerInstance(r, e) && (_t6 = r + _this10._gwTokenUrl), !!_t6;\n        }), _t6 || (i = e.toLowerCase().indexOf(\"/sharing\"), -1 !== i && (_t6 = e.substring(0, i) + this._gwTokenUrl)), _t6 || (_t6 = this._getOrigin(e) + this._gwTokenUrl), _t6) {\n          var _r11 = new f(e).port;\n          /^http:\\/\\//i.test(e) && \"7080\" === _r11 && (_t6 = _t6.replace(/:7080/i, \":7443\")), _t6 = _t6.replace(/http:/i, \"https:\");\n        }\n        return _t6;\n      }\n      if (e.toLowerCase().includes(\"premium.arcgisonline.com\")) return \"https://premium.arcgisonline.com/server/tokens\";\n    }\n  }, {\n    key: \"_processOAuthResponseParams\",\n    value: function _processOAuthResponseParams(e, t, r) {\n      var s = t._oAuthCred;\n      if (e.code) {\n        var _i6 = s.codeVerifier;\n        return s.codeVerifier = null, s.stateUID = null, s.save(), this._getOAuthToken(r.server, e.code, t.appId, this._getRedirectURI(t, !0), _i6).then(function (i) {\n          var o = new L({\n            userId: i.username,\n            server: r.server,\n            token: i.access_token,\n            expires: Date.now() + 1e3 * i.expires_in,\n            ssl: i.ssl,\n            oAuthState: e.state,\n            _oAuthCred: s\n          });\n          return t.userId = o.userId, s.storage = i.persist ? q : j, s.refreshToken = i.refresh_token, s.token = null, s.expires = i.refresh_token_expires_in ? Date.now() + 1e3 * i.refresh_token_expires_in : null, s.userId = o.userId, s.ssl = o.ssl, s.save(), o;\n        });\n      }\n      var i = new L({\n        userId: e.username,\n        server: r.server,\n        token: e.access_token,\n        expires: Date.now() + 1e3 * Number(e.expires_in),\n        ssl: \"true\" === e.ssl,\n        oAuthState: e.state,\n        _oAuthCred: s\n      });\n      return t.userId = i.userId, s.storage = e.persist ? q : j, s.refreshToken = null, s.token = i.token, s.expires = i.expires, s.userId = i.userId, s.ssl = i.ssl, s.save(), Promise.resolve(i);\n    }\n  }, {\n    key: \"_processOAuthPopupParams\",\n    value: function _processOAuthPopupParams(e) {\n      var _this$_oAuthOnPopupHa;\n      var t = this._oAuthDfd;\n      if (this._oAuthDfd = null, t) if (clearInterval(this._oAuthIntervalId), (_this$_oAuthOnPopupHa = this._oAuthOnPopupHandle) !== null && _this$_oAuthOnPopupHa !== void 0 && _this$_oAuthOnPopupHa.remove(), e.error) {\n        var _r12 = \"access_denied\" === e.error,\n          _s5 = new i(_r12 ? \"identity-manager:user-aborted\" : \"identity-manager:authentication-failed\", _r12 ? \"ABORTED\" : \"OAuth: \" + e.error + \" - \" + e.error_description);\n        t.reject(_s5);\n      } else this._processOAuthResponseParams(e, t.oinfo_, t.sinfo_).then(function (e) {\n        t.resolve(e);\n      }).catch(function (e) {\n        t.reject(e);\n      });\n    }\n  }, {\n    key: \"_setOAuthResponseQueryString\",\n    value: function _setOAuthResponseQueryString(e) {\n      e && (\"?\" === e.charAt(0) && (e = e.substring(1)), this._processOAuthPopupParams(g(e)));\n    }\n  }, {\n    key: \"_exchangeToken\",\n    value: function _exchangeToken(e, t, r) {\n      return s(\"\".concat(e, \"/sharing/rest/oauth2/exchangeToken\"), {\n        authMode: \"anonymous\",\n        method: \"post\",\n        query: {\n          f: \"json\",\n          client_id: t,\n          token: r\n        }\n      }).then(function (e) {\n        return e.data.token;\n      });\n    }\n  }, {\n    key: \"_getPlatformSelf\",\n    value: function _getPlatformSelf(e, t) {\n      return e = e.replace(/^http:/i, \"https:\"), s(\"\".concat(e, \"/sharing/rest/oauth2/platformSelf\"), {\n        authMode: \"anonymous\",\n        headers: {\n          \"X-Esri-Auth-Client-Id\": t,\n          \"X-Esri-Auth-Redirect-Uri\": window.location.href.replace(/#.*$/, \"\")\n        },\n        method: \"post\",\n        query: {\n          f: \"json\",\n          expiration: 30\n        },\n        withCredentials: !0\n      }).then(function (e) {\n        return e.data;\n      });\n    }\n  }, {\n    key: \"_getPortalSelf\",\n    value: function _getPortalSelf(e, t) {\n      var r;\n      if (this._gwDomains.some(function (t) {\n        return t.regex.test(e) && (r = t.customBaseUrl), !!r;\n      }), r) return Promise.resolve({\n        allSSL: !0,\n        currentVersion: \"8.4\",\n        customBaseUrl: r,\n        portalMode: \"multitenant\",\n        supportsOAuth: !0\n      });\n      this._appOrigin.startsWith(\"https:\") ? e = e.replace(/^http:/i, \"https:\").replace(/:7080/i, \":7443\") : /^http:/i.test(t) && (e = e.replace(/^https:/i, \"http:\").replace(/:7443/i, \":7080\"));\n      return s(e, {\n        query: {\n          f: \"json\"\n        },\n        authMode: \"anonymous\",\n        withCredentials: !0\n      }).then(function (e) {\n        return e.data;\n      });\n    }\n  }, {\n    key: \"_doPortalSignIn\",\n    value: function _doPortalSignIn(e) {\n      var t = this._portalConfig,\n        r = window.location.href,\n        s = this.findServerInfo(e);\n      return !(!t && !this._isPortalDomain(r) || !(s ? s.hasPortal || s.owningSystemUrl && this._isPortalDomain(s.owningSystemUrl) : this._isPortalDomain(e)) || !(this._isIdProvider(r, e) || t && (this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl), e) || this._isIdProvider(t.restBaseUrl, e)) || _(r, e, !0)));\n    }\n  }, {\n    key: \"_checkProtocol\",\n    value: function _checkProtocol(e, t, r, s) {\n      var o = !0;\n      var n = s ? t.adminTokenServiceUrl : t.tokenServiceUrl;\n      if (n.trim().toLowerCase().startsWith(\"https:\") && !this._appOrigin.startsWith(\"https:\") && w(n) && (o = !!this._protocolFunc && !!this._protocolFunc({\n        resourceUrl: e,\n        serverInfo: t\n      }), !o)) {\n        r(new i(\"identity-manager:aborted\", \"Aborted the Sign-In process to avoid sending password over insecure connection.\"));\n      }\n      return o;\n    }\n  }, {\n    key: \"_enqueue\",\n    value: function _enqueue(e, t, r, s, i, o) {\n      return s || (s = l()), s.resUrl_ = e, s.sinfo_ = t, s.options_ = r, s.admin_ = i, s.refresh_ = o, this._busy ? this._hasSameServerInstance(this._getServerInstanceRoot(e), this._busy.resUrl_) ? (this._oAuthDfd && this._oAuthDfd.oAuthWin_ && this._oAuthDfd.oAuthWin_.focus(), this._soReqs.push(s)) : this._xoReqs.push(s) : this._doSignIn(s), s.promise;\n    }\n  }, {\n    key: \"_doSignIn\",\n    value: function _doSignIn(e) {\n      var _this11 = this;\n      this._busy = e, this._rejectOnPersistedPageShow = !1;\n      var t = function t(_t7) {\n          var r = e.options_ && e.options_.resource,\n            s = e.resUrl_,\n            i = e.refresh_;\n          var o = !1;\n          _this11.credentials.includes(_t7) || (i && _this11.credentials.includes(i) ? (i.userId = _t7.userId, i.token = _t7.token, i.expires = _t7.expires, i.validity = _t7.validity, i.ssl = _t7.ssl, i.creationTime = _t7.creationTime, o = !0, _t7 = i) : _this11.credentials.push(_t7)), _t7.resources || (_t7.resources = []), _t7.resources.includes(r || s) || _t7.resources.push(r || s), _t7.scope = _this11._isServerRsrc(s) ? \"server\" : \"portal\", _t7.emitTokenChange();\n          var n = _this11._soReqs,\n            a = {};\n          _this11._soReqs = [], n.forEach(function (e) {\n            if (!_this11._isIdenticalService(s, e.resUrl_)) {\n              var _r13 = _this11._getSuffix(e.resUrl_);\n              a[_r13] || (a[_r13] = !0, _t7.resources.push(e.resUrl_));\n            }\n          }), e.resolve(_t7), n.forEach(function (e) {\n            _this11._hasSameServerInstance(_this11._getServerInstanceRoot(s), e.resUrl_) ? e.resolve(_t7) : _this11._soReqs.push(e);\n          }), _this11._busy = e.resUrl_ = e.sinfo_ = e.refresh_ = null, o || _this11.emit(\"credential-create\", {\n            credential: _t7\n          }), _this11._soReqs.length ? _this11._doSignIn(_this11._soReqs.shift()) : _this11._xoReqs.length && _this11._doSignIn(_this11._xoReqs.shift());\n        },\n        r = function r(t) {\n          e.reject(t), _this11._busy = e.resUrl_ = e.sinfo_ = e.refresh_ = null, _this11._soReqs.length ? _this11._doSignIn(_this11._soReqs.shift()) : _this11._xoReqs.length && _this11._doSignIn(_this11._xoReqs.shift());\n        },\n        s = function s(o, a, h, l) {\n          var _this11$_appUrlObj$qu, _this11$_appUrlObj$qu2;\n          var d = e.sinfo_,\n            u = !e.options_ || !1 !== e.options_.prompt,\n            p = d.hasPortal && _this11._findOAuthInfo(e.resUrl_);\n          var f, g;\n          if (o) t(new L({\n            userId: o,\n            server: d.server,\n            token: h || null,\n            expires: null != l ? Number(l) : null,\n            ssl: !!a\n          }));else if (window !== window.parent && (_this11$_appUrlObj$qu = _this11._appUrlObj.query) !== null && _this11$_appUrlObj$qu !== void 0 && _this11$_appUrlObj$qu[\"arcgis-auth-origin\"] && (_this11$_appUrlObj$qu2 = _this11._appUrlObj.query) !== null && _this11$_appUrlObj$qu2 !== void 0 && _this11$_appUrlObj$qu2[\"arcgis-auth-portal\"] && _this11._hasSameServerInstance(_this11._getServerInstanceRoot(_this11._appUrlObj.query[\"arcgis-auth-portal\"]), e.resUrl_)) {\n            var _e$options_;\n            window.parent.postMessage({\n              type: \"arcgis:auth:requestCredential\"\n            }, _this11._appUrlObj.query[\"arcgis-auth-origin\"]);\n            var _s6 = n(window, \"message\", function (e) {\n              e.source === window.parent && e.data && (\"arcgis:auth:credential\" === e.data.type ? (_s6.remove(), e.data.credential.expires < Date.now() ? r(new i(\"identity-manager:credential-request-failed\", \"Parent application's token has expired.\")) : t(new L(e.data.credential))) : \"arcgis:auth:error\" === e.data.type && (_s6.remove(), \"tokenExpiredError\" === e.data.error.name ? r(new i(\"identity-manager:credential-request-failed\", \"Parent application's token has expired.\")) : r(i.fromJSON(e.data.error))));\n            });\n            c((_e$options_ = e.options_) === null || _e$options_ === void 0 ? void 0 : _e$options_.signal, function () {\n              _s6.remove();\n            });\n          } else if (p) {\n            var _o2 = p._oAuthCred;\n            if (!_o2) {\n              var _e8 = new x(p, q),\n                _t8 = new x(p, j);\n              _e8.isValid() && _t8.isValid() ? _e8.expires > _t8.expires ? (_o2 = _e8, _t8.destroy()) : (_o2 = _t8, _e8.destroy()) : _o2 = _e8.isValid() ? _e8 : _t8, p._oAuthCred = _o2;\n            }\n            if (_o2.isValid()) {\n              f = new L({\n                userId: _o2.userId,\n                server: d.server,\n                token: _o2.token,\n                expires: _o2.expires,\n                ssl: _o2.ssl,\n                _oAuthCred: _o2\n              });\n              var _r14 = p.appId !== _o2.appId && _this11._doPortalSignIn(e.resUrl_);\n              _r14 || _o2.refreshToken ? (e._pendingDfd = _o2.refreshToken ? _this11._getOAuthToken(d.server, _o2.refreshToken, _o2.appId).then(function (e) {\n                return f.expires = Date.now() + 1e3 * e.expires_in, f.token = e.access_token, f;\n              }) : Promise.resolve(f), e._pendingDfd.then(function (e) {\n                return _r14 ? _this11._exchangeToken(e.server, p.appId, e.token).then(function (t) {\n                  return e.token = t, e;\n                }).catch(function () {\n                  return e;\n                }) : e;\n              }).then(function (e) {\n                t(e);\n              }).catch(function () {\n                var _o3;\n                (_o3 = _o2) !== null && _o3 !== void 0 && _o3.destroy(), s();\n              })) : t(f);\n            } else if (_this11._oAuthLocationParams && _this11._hasSameServerInstance(p.portalUrl, _this11._oAuthLocationParams.state.portalUrl) && (_this11._oAuthLocationParams.access_token || _this11._oAuthLocationParams.code && _this11._oAuthLocationParams.state.uid === _o2.stateUID && _o2.codeVerifier)) {\n              var _s7 = _this11._oAuthLocationParams;\n              _this11._oAuthLocationParams = null, e._pendingDfd = _this11._processOAuthResponseParams(_s7, p, d).then(function (e) {\n                t(e);\n              }).catch(r);\n            } else {\n              var _s8 = function _s8() {\n                u ? e._pendingDfd = _this11.oAuthSignIn(e.resUrl_, d, p, e.options_).then(t, r) : (g = new i(\"identity-manager:not-authenticated\", \"User is not signed in.\"), r(g));\n              };\n              _this11._doPortalSignIn(e.resUrl_) ? e._pendingDfd = _this11._getPlatformSelf(d.server, p.appId).then(function (e) {\n                _(e.portalUrl, _this11._appOrigin, !0) ? (f = new L({\n                  userId: e.username,\n                  server: d.server,\n                  expires: Date.now() + 1e3 * e.expires_in,\n                  token: e.token\n                }), t(f)) : _s8();\n              }).catch(_s8) : _s8();\n            }\n          } else if (u) {\n            if (_this11._checkProtocol(e.resUrl_, d, r, e.admin_)) {\n              var _s9 = e.options_;\n              e.admin_ && (_s9 = _s9 || {}, _s9.isAdmin = !0), e._pendingDfd = _this11.signIn(e.resUrl_, d, _s9).then(t, r);\n            }\n          } else g = new i(\"identity-manager:not-authenticated\", \"User is not signed in.\"), r(g);\n        },\n        o = function o() {\n          var s = e.sinfo_,\n            i = s.owningSystemUrl,\n            o = e.options_;\n          var n, a, h, l;\n          if (o && (n = o.token, a = o.error, h = o.prompt), l = _this11._findCredential(i, {\n            token: n,\n            resource: e.resUrl_\n          }), !l) {\n            var _iterator7 = _createForOfIteratorHelper(_this11.credentials),\n              _step7;\n            try {\n              for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                var _e9 = _step7.value;\n                if (_this11._isIdProvider(i, _e9.server)) {\n                  l = _e9;\n                  break;\n                }\n              }\n            } catch (err) {\n              _iterator7.e(err);\n            } finally {\n              _iterator7.f();\n            }\n          }\n          if (l) {\n            var _i7 = _this11.findCredential(e.resUrl_, l.userId);\n            if (_i7) t(_i7);else if (D(s, _this11._legacyFed)) {\n              var _e10 = l.toJSON();\n              _e10.server = s.server, _e10.resources = null, t(new L(_e10));\n            } else {\n              (e._pendingDfd = _this11.generateToken(_this11.findServerInfo(l.server), null, {\n                serverUrl: e.resUrl_,\n                token: l.token,\n                signal: e.options_.signal,\n                ssl: l.ssl\n              })).then(function (r) {\n                var _l;\n                t(new L({\n                  userId: (_l = l) === null || _l === void 0 ? void 0 : _l.userId,\n                  server: s.server,\n                  token: r.token,\n                  expires: null != r.expires ? Number(r.expires) : null,\n                  ssl: !!r.ssl,\n                  isAdmin: e.admin_,\n                  validity: r.validity\n                }));\n              }, r);\n            }\n          } else {\n            _this11._busy = null, n && (e.options_.token = null);\n            (e._pendingDfd = _this11.getCredential(i.replace(/\\/?$/, \"/sharing\"), {\n              resource: e.resUrl_,\n              owningTenant: s.owningTenant,\n              signal: e.options_.signal,\n              token: n,\n              error: a,\n              prompt: h\n            })).then(function () {\n              _this11._enqueue(e.resUrl_, e.sinfo_, e.options_, e, e.admin_);\n            }, function (t) {\n              e.resUrl_ = e.sinfo_ = e.refresh_ = null, e.reject(t);\n            });\n          }\n        };\n      this._errbackFunc = r;\n      var a = e.sinfo_.owningSystemUrl,\n        l = this._isServerRsrc(e.resUrl_),\n        d = e.sinfo_._restInfoPms;\n      d ? d.promise.then(function (t) {\n        var r = e.sinfo_;\n        if (r._restInfoPms) {\n          var _ref2, _h3;\n          r.adminTokenServiceUrl = r._restInfoPms.adminUrl, r._restInfoPms = null, r.tokenServiceUrl = (_ref2 = h(\"authInfo.tokenServicesUrl\", t) || h(\"authInfo.tokenServiceUrl\", t) || h(\"tokenServiceUrl\", t)) !== null && _ref2 !== void 0 ? _ref2 : null, r.shortLivedTokenValidity = (_h3 = h(\"authInfo.shortLivedTokenValidity\", t)) !== null && _h3 !== void 0 ? _h3 : null, r.currentVersion = t.currentVersion, r.owningTenant = t.owningTenant;\n          var _e11 = r.owningSystemUrl = t.owningSystemUrl;\n          _e11 && _this11._portals.push(_e11);\n        }\n        l && r.owningSystemUrl ? o() : s();\n      }, function () {\n        e.sinfo_._restInfoPms = null;\n        var t = new i(\"identity-manager:server-identification-failed\", \"Unknown resource - could not find token service endpoint.\");\n        r(t);\n      }) : l && a ? o() : e.sinfo_._selfReq ? e.sinfo_._selfReq.selfDfd.then(function (t) {\n        var r = {};\n        var s, i, o, n;\n        return t && (s = t.user && t.user.username, r.username = s, r.allSSL = t.allSSL, i = t.supportsOAuth, n = parseFloat(t.currentVersion), \"multitenant\" === t.portalMode && (o = t.customBaseUrl), e.sinfo_.currentVersion = n), e.sinfo_.webTierAuth = !!s, s && _this11.normalizeWebTierAuth ? _this11.generateToken(e.sinfo_, null, {\n          ssl: r.allSSL\n        }).catch(function () {\n          return null;\n        }).then(function (e) {\n          return r.portalToken = e && e.token, r.tokenExpiration = e && e.expires, r;\n        }) : !s && i && n >= 4.4 && !_this11._findOAuthInfo(e.resUrl_) ? _this11._generateOAuthInfo({\n          portalUrl: e.sinfo_.server,\n          customBaseUrl: o,\n          owningTenant: e.sinfo_._selfReq.owningTenant\n        }).catch(function () {\n          return null;\n        }).then(function () {\n          return r;\n        }) : r;\n      }).catch(function () {\n        return null;\n      }).then(function (t) {\n        e.sinfo_._selfReq = null, t ? s(t.username, t.allSSL, t.portalToken, t.tokenExpiration) : s();\n      }) : s();\n    }\n  }, {\n    key: \"_generateOAuthInfo\",\n    value: function _generateOAuthInfo(e) {\n      var _this12 = this;\n      var t,\n        r = null,\n        i = e.portalUrl;\n      var o = e.customBaseUrl,\n        n = e.owningTenant,\n        a = !this._defaultOAuthInfo && this._createDefaultOAuthInfo && !this._hasTestedIfAppIsOnPortal;\n      if (a) {\n        r = window.location.href;\n        var _e12 = r.indexOf(\"?\");\n        _e12 > -1 && (r = r.slice(0, _e12)), _e12 = r.search(/\\/(apps|home)\\//), r = _e12 > -1 ? r.slice(0, _e12) : null;\n      }\n      return a && r ? (this._hasTestedIfAppIsOnPortal = !0, t = s(r + \"/sharing/rest\", {\n        query: {\n          f: \"json\"\n        }\n      }).then(function () {\n        _this12._defaultOAuthInfo = new O({\n          appId: \"arcgisonline\",\n          popupCallbackUrl: r + \"/home/oauth-callback.html\"\n        });\n      })) : t = Promise.resolve(), t.then(function () {\n        if (_this12._defaultOAuthInfo) return i = i.replace(/^http:/i, \"https:\"), s(i + \"/sharing/rest/oauth2/validateRedirectUri\", {\n          query: {\n            accountId: n,\n            client_id: _this12._defaultOAuthInfo.appId,\n            redirect_uri: I(_this12._defaultOAuthInfo.popupCallbackUrl),\n            f: \"json\"\n          }\n        }).then(function (e) {\n          if (e.data.valid) {\n            var _t9 = _this12._defaultOAuthInfo.clone();\n            e.data.urlKey && o ? _t9.portalUrl = \"https://\" + e.data.urlKey.toLowerCase() + \".\" + o : _t9.portalUrl = i, _t9.popup = window !== window.top || !(_(i, _this12._appOrigin) || _this12._gwDomains.some(function (e) {\n              return e.regex.test(i) && e.regex.test(_this12._appOrigin);\n            })), _this12.oAuthInfos.push(_t9);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_doOAuthSignIn\",\n    value: function _doOAuthSignIn(e, t, r, s) {\n      var _this13 = this;\n      var o = r._oAuthCred,\n        a = {\n          portalUrl: r.portalUrl\n        };\n      !r.popup && r.preserveUrlHash && window.location.hash && (a.hash = window.location.hash), o.stateUID && (a.uid = o.stateUID);\n      var h = {\n        client_id: r.appId,\n        response_type: o.codeVerifier ? \"code\" : \"token\",\n        state: JSON.stringify(a),\n        expiration: r.expiration,\n        locale: r.locale,\n        redirect_uri: this._getRedirectURI(r, !!o.codeVerifier)\n      };\n      r.forceLogin && (h.force_login = !0), r.forceUserId && r.userId && (h.prepopulatedusername = r.userId), !r.popup && this._doPortalSignIn(e) && (h.redirectToUserOrgUrl = !0), o.codeVerifier && (h.code_challenge = s || o.codeVerifier, h.code_challenge_method = s ? \"S256\" : \"plain\");\n      var l = r.portalUrl.replace(/^http:/i, \"https:\") + \"/sharing/oauth2/authorize\",\n        c = l + \"?\" + v(h);\n      if (r.popup) {\n        var _e13 = window.open(c, \"esriJSAPIOAuth\", r.popupWindowFeatures);\n        if (_e13) _e13.focus(), this._oAuthDfd.oAuthWin_ = _e13, this._oAuthIntervalId = setInterval(function () {\n          if (_e13.closed) {\n            clearInterval(_this13._oAuthIntervalId), _this13._oAuthOnPopupHandle.remove();\n            var _e14 = _this13._oAuthDfd;\n            if (_e14) {\n              var _t10 = new i(\"identity-manager:user-aborted\", \"ABORTED\");\n              _e14.reject(_t10);\n            }\n          }\n        }, 500), this._oAuthOnPopupHandle = n(window, [\"arcgis:auth:hash\", \"arcgis:auth:location:search\"], function (e) {\n          \"arcgis:auth:hash\" === e.type ? _this13.setOAuthResponseHash(e.detail) : _this13._setOAuthResponseQueryString(e.detail);\n        });else {\n          var _e15 = new i(\"identity-manager:popup-blocked\", \"ABORTED\");\n          this._oAuthDfd.reject(_e15);\n        }\n      } else this._rejectOnPersistedPageShow = !0, this._oAuthRedirectFunc ? this._oAuthRedirectFunc({\n        authorizeParams: h,\n        authorizeUrl: l,\n        resourceUrl: e,\n        serverInfo: t,\n        oAuthInfo: r\n      }) : window.location.href = c;\n    }\n  }, {\n    key: \"_getRedirectURI\",\n    value: function _getRedirectURI(e, t) {\n      var r = window.location.href.replace(/#.*$/, \"\");\n      if (e.popup) return I(e.popupCallbackUrl);\n      if (t) {\n        var _e16 = p(r);\n        return _e16.query && [\"code\", \"error\", \"error_description\", \"message_code\", \"persist\", \"state\"].forEach(function (t) {\n          delete _e16.query[t];\n        }), A(_e16.path, _e16.query);\n      }\n      return r;\n    }\n  }]);\n  return E;\n}(o);\nE.prototype.declaredClass = \"esri.identity.IdentityManagerBase\";\nvar L = /*#__PURE__*/function (_o$EventedAccessor) {\n  _inherits(L, _o$EventedAccessor);\n  var _super2 = _createSuper(L);\n  function L(e) {\n    var _this14;\n    _classCallCheck(this, L);\n    _this14 = _super2.call(this, e), _this14._oAuthCred = null, _this14.tokenRefreshBuffer = 2, e && e._oAuthCred && (_this14._oAuthCred = e._oAuthCred);\n    return _this14;\n  }\n  _createClass(L, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.resources = this.resources || [], null == this.creationTime && (this.creationTime = Date.now());\n    }\n  }, {\n    key: \"refreshToken\",\n    value: function refreshToken() {\n      var _this15 = this;\n      var e = r.findServerInfo(this.server),\n        t = e && e.owningSystemUrl,\n        s = !!t && \"server\" === this.scope,\n        i = s && D(e, r._legacyFed),\n        o = e.webTierAuth,\n        n = o && r.normalizeWebTierAuth,\n        a = C[this.server],\n        h = a && a[this.userId];\n      var l,\n        c = this.resources && this.resources[0],\n        d = s ? r.findServerInfo(t) : null,\n        u = {\n          username: this.userId,\n          password: h\n        };\n      if (o && !n) return;\n      s && !d && r.serverInfos.some(function (e) {\n        return r._isIdProvider(t, e.server) && (d = e), !!d;\n      });\n      var p = d ? r.findCredential(d.server, this.userId) : null;\n      if (!s || p) {\n        if (!i) {\n          if (s) l = {\n            serverUrl: c,\n            token: p && p.token,\n            ssl: p && p.ssl\n          };else if (n) u = null, l = {\n            ssl: this.ssl\n          };else {\n            if (!h) {\n              var _t11;\n              return c && (c = r._sanitizeUrl(c), this._enqueued = 1, _t11 = r._enqueue(c, e, null, null, this.isAdmin, this), _t11.then(function () {\n                _this15._enqueued = 0, _this15.refreshServerTokens();\n              }).catch(function () {\n                _this15._enqueued = 0;\n              })), _t11;\n            }\n            this.isAdmin && (l = {\n              isAdmin: !0\n            });\n          }\n          return r.generateToken(s ? d : e, s ? null : u, l).then(function (e) {\n            _this15.token = e.token, _this15.expires = null != e.expires ? Number(e.expires) : null, _this15.creationTime = Date.now(), _this15.validity = e.validity, _this15.emitTokenChange(), _this15.refreshServerTokens();\n          }).catch(function () {});\n        }\n        p === null || p === void 0 ? void 0 : p.refreshToken();\n      }\n    }\n  }, {\n    key: \"refreshServerTokens\",\n    value: function refreshServerTokens() {\n      var _this16 = this;\n      \"portal\" === this.scope && r.credentials.forEach(function (e) {\n        var t = r.findServerInfo(e.server),\n          s = t && t.owningSystemUrl;\n        e !== _this16 && e.userId === _this16.userId && s && \"server\" === e.scope && (r._hasSameServerInstance(_this16.server, s) || r._isIdProvider(s, _this16.server)) && (D(t, r._legacyFed) ? (e.token = _this16.token, e.expires = _this16.expires, e.creationTime = _this16.creationTime, e.validity = _this16.validity, e.emitTokenChange()) : e.refreshToken());\n      });\n    }\n  }, {\n    key: \"emitTokenChange\",\n    value: function emitTokenChange(e) {\n      clearTimeout(this._refreshTimer);\n      var t = this.server && r.findServerInfo(this.server),\n        s = t && t.owningSystemUrl,\n        i = s && r.findServerInfo(s);\n      !1 === e || s && \"portal\" !== this.scope && (!i || !i.webTierAuth || r.normalizeWebTierAuth) || null == this.expires && null == this.validity || this._startRefreshTimer(), this.emit(\"token-change\");\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.userId = this.server = this.token = this.expires = this.validity = this.resources = this.creationTime = null, this._oAuthCred && (this._oAuthCred.destroy(), this._oAuthCred = null);\n      var e = r.credentials.indexOf(this);\n      e > -1 && r.credentials.splice(e, 1), this.emitTokenChange(), this.emit(\"destroy\");\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var e = a({\n          userId: this.userId,\n          server: this.server,\n          token: this.token,\n          expires: this.expires,\n          validity: this.validity,\n          ssl: this.ssl,\n          isAdmin: this.isAdmin,\n          creationTime: this.creationTime,\n          scope: this.scope\n        }),\n        t = this.resources;\n      return t && t.length > 0 && (e.resources = t.slice()), e;\n    }\n  }, {\n    key: \"_startRefreshTimer\",\n    value: function _startRefreshTimer() {\n      clearTimeout(this._refreshTimer);\n      var e = 6e4 * this.tokenRefreshBuffer,\n        t = Math.pow(2, 31) - 1;\n      var r = (this.validity ? this.creationTime + 6e4 * this.validity : this.expires) - Date.now();\n      r < 0 ? r = 0 : r > t && (r = t), this._refreshTimer = setTimeout(this.refreshToken.bind(this), r > e ? r - e : r);\n    }\n  }]);\n  return L;\n}(o.EventedAccessor);\ne([k()], L.prototype, \"creationTime\", void 0), e([k()], L.prototype, \"expires\", void 0), e([k()], L.prototype, \"isAdmin\", void 0), e([k()], L.prototype, \"oAuthState\", void 0), e([k()], L.prototype, \"resources\", void 0), e([k()], L.prototype, \"scope\", void 0), e([k()], L.prototype, \"server\", void 0), e([k()], L.prototype, \"ssl\", void 0), e([k()], L.prototype, \"token\", void 0), e([k()], L.prototype, \"tokenRefreshBuffer\", void 0), e([k()], L.prototype, \"userId\", void 0), e([k()], L.prototype, \"validity\", void 0), L = e([y(\"esri.identity.Credential\")], L);\nexport { L as Credential, E as IdentityManagerBase };","map":{"version":3,"names":["_","e","t","id","r","s","i","o","on","n","fixJson","a","getDeepValue","h","createResolver","l","onAbort","c","isAborted","d","watch","u","urlToObject","p","hasSameOrigin","Url","f","queryToObject","g","base64UrlEncode","m","objectToQuery","v","normalize","S","getProxyRule","w","makeAbsolute","I","addQueryParameters","A","property","k","subclass","y","U","T","x","O","P","isSecureProxyService","R","C","b","owningSystemUrl","host","server","test","D","some","q","j","window","localStorage","sessionStorage","_unused","E","_o","_inherits","_super","_createSuper","_this","_classCallCheck","call","_portalConfig","globalThis","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","_defaultOAuthInfo","_defaultTokenValidity","dialog","formConstructor","tokenValidity","normalizeWebTierAuth","_appOrigin","origin","location","_appUrlObj","href","_busy","_rejectOnPersistedPageShow","_oAuthLocationParams","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","tokenServiceUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthLocationParams","addEventListener","_pageShowHandler","_createClass","key","value","registerServers","_this2","filter","findServerInfo","concat","forEach","push","hasPortal","registerOAuthInfos","_iterator","_createForOfIteratorHelper","_step","done","findOAuthInfo","portalUrl","splice","indexOf","err","registerToken","_objectSpread","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","hasServer","_getTokenSvcUrl","_findCredential","Object","assign","L","userId","token","expires","ssl","scope","resources","emitTokenChange","refreshServerTokens","toJSON","map","initialize","_this3","JSON","parse","declaredClass","length","appId","Date","now","_iterator2","_step2","_hasSameServerInstance","_iterator3","_step3","findCredential","_iterator4","_step4","_iterator5","_step5","_getIdenticalSvcIdx","getCredential","error","prompt","AbortController","signal","abort","reject","promise","_isAdminResource","details","httpStatus","destroy","resolve","_restInfoPms","_selfReq","owningTenant","selfDfd","_getPortalSelf","replace","_enqueue","getResourceName","_isRESTService","generateToken","shortLivedTokenValidity","isAdmin","serverUrl","customParameters","adminTokenServiceUrl","toLowerCase","webTierAuth","scheme","uri","port","query","request","username","password","expiration","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","then","data","validity","isBusy","checkSignInStatus","checkAppAccess","credential","_this4","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","name","viewOnly","setOAuthResponseHash","charAt","substring","_processOAuthPopupParams","setOAuthRedirectionHandler","_oAuthRedirectFunc","setProtocolErrorHandler","_protocolFunc","signIn","_this5","arguments","undefined","_h","_d","_p","_a","_this5$dialog","remove","_oAuthDfd","resource","content","open","emit","Number","signingIn","oAuthSignIn","_this6","oAuthWin_","closed","close","resUrl_","sinfo_","oinfo_","_oAuthCred","storage","flowType","popup","currentVersion","crypto","getRandomValues","Uint8Array","codeVerifier","stateUID","save","_getCodeChallenge","oAuthPopupConfirmation","oAuthPrompt","_doOAuthSignIn","_d2","_p2","_ref","_h2","_this6$dialog","destroyCredentials","slice","enablePostMessageAuth","_this7","_postMessageAuthHandle","_t$data","endsWith","type","source","postMessage","message","disablePostMessageAuth","hash","_t2$state","access_token","expires_in","state","hasOwnProperty","_unused2","error_description","console","log","_unused3","search","code","uid","_unused4","_unused5","_e5$state","pathname","history","replaceState","_getOAuthToken","grant_type","redirect_uri","code_verifier","refresh_token","isSecureContext","TextEncoder","encode","subtle","digest","Promise","persisted","_errbackFunc","_this8","_addResource","_removeResource","_findOAuthInfo","_iterator6","_step6","_isIdProvider","_isPortalDomain","String","_getOrigin","substr","_normalizeAGOLorgDomain","proxyUrl","path","includes","_isIdenticalService","_getSuffix","_this9","restBaseUrl","_this10","adminUrl","_processOAuthResponseParams","_getRedirectURI","oAuthState","persist","refreshToken","refresh_token_expires_in","_this$_oAuthOnPopupHa","clearInterval","_oAuthIntervalId","_oAuthOnPopupHandle","_setOAuthResponseQueryString","_exchangeToken","_getPlatformSelf","headers","allSSL","portalMode","supportsOAuth","startsWith","_checkProtocol","trim","resourceUrl","serverInfo","options_","admin_","refresh_","focus","_doSignIn","_this11","creationTime","shift","_this11$_appUrlObj$qu","_this11$_appUrlObj$qu2","parent","_e$options_","fromJSON","isValid","_pendingDfd","_o3","_iterator7","_step7","_l","_ref2","_h3","user","parseFloat","portalToken","tokenExpiration","_generateOAuthInfo","_this12","popupCallbackUrl","accountId","clone","urlKey","top","_this13","preserveUrlHash","response_type","stringify","locale","forceLogin","force_login","forceUserId","prepopulatedusername","redirectToUserOrgUrl","code_challenge","code_challenge_method","popupWindowFeatures","setInterval","detail","authorizeParams","authorizeUrl","oAuthInfo","prototype","_o$EventedAccessor","_super2","_this14","tokenRefreshBuffer","_this15","_enqueued","_this16","clearTimeout","_refreshTimer","_startRefreshTimer","Math","pow","setTimeout","bind","EventedAccessor","Credential","IdentityManagerBase"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/identity/IdentityManagerBase.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import{id as r}from\"../kernel.js\";import s from\"../request.js\";import i from\"../core/Error.js\";import o from\"../core/Evented.js\";import{on as n}from\"../core/events.js\";import{fixJson as a}from\"../core/lang.js\";import{getDeepValue as h}from\"../core/object.js\";import{createResolver as l,onAbort as c,isAborted as d}from\"../core/promiseUtils.js\";import{watch as u}from\"../core/reactiveUtils.js\";import{urlToObject as p,hasSameOrigin as _,Url as f,queryToObject as g,base64UrlEncode as m,objectToQuery as v,normalize as S,getProxyRule as w,makeAbsolute as I,addQueryParameters as A}from\"../core/urlUtils.js\";import{property as k}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import U from\"./IdentityForm.js\";import T from\"./IdentityModal.js\";import x from\"./OAuthCredential.js\";import O from\"./OAuthInfo.js\";import P from\"./ServerInfo.js\";import{isSecureProxyService as R}from\"../portal/support/urlUtils.js\";const C={},b=e=>{const t=new f(e.owningSystemUrl).host,r=new f(e.server).host,s=/.+\\.arcgis\\.com$/i;return s.test(t)&&s.test(r)},D=(e,t)=>!!(b(e)&&t&&t.some((t=>t.test(e.server))));let q=null,j=null;try{q=window.localStorage,j=window.sessionStorage}catch{}class E extends o{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.formConstructor=U,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=\"null\"!==window.origin?window.origin:window.location.origin,this._appUrlObj=p(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthLocationParams(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const r of e){const e=this.findOAuthInfo(r.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),r=this._isServerRsrc(t);let s,i=this.findServerInfo(t),o=!0;i||(i=new P,i.server=this._getServerInstanceRoot(t),r?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),s=this._findCredential(t),s?(delete e.server,Object.assign(s,e),o=!1):(s=new L({userId:e.userId,server:i.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:r?\"server\":\"portal\"}),s.resources=[t],this.credentials.push(s)),s.emitTokenChange(!1),o||s.refreshServerTokens()}toJSON(){return a({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,s=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new P(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new O(t))})),e.length&&this.registerOAuthInfos(e)}s&&s.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new L(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){if(!e)return;let r;e=this._sanitizeUrl(e);const s=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===s){r=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===s){r=i;break}return r}getCredential(e,t){let r,s,o=!0;t&&(r=!!t.token,s=t.error,o=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const n=new AbortController,a=l();if(t.signal&&c(t.signal,(()=>{n.abort()})),c(n,(()=>{a.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))})),d(n))return a.promise;t.signal=n.signal;const h=this._isAdminResource(e),u=r?this.findCredential(e):null;let p;if(u&&s&&s.details&&498===s.details.httpStatus)u.destroy();else if(u)return p=new i(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+u.userId+\"'. You do not have access to this resource: \"+e,{error:s}),a.reject(p),a.promise;const f=this._findCredential(e,t);if(f)return a.resolve(f),a.promise;let g=this.findServerInfo(e);if(g)!g.hasServer&&this._isServerRsrc(e)&&(g._restInfoPms=this._getTokenSvcUrl(e),g.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return p=new i(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),a.reject(p),a.promise;g=new P,g.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(g.tokenServiceUrl=t,g.hasPortal=!0):(g._restInfoPms=t,g.hasServer=!0),this.registerServers([g])}return g.hasPortal&&void 0===g._selfReq&&(o||_(g.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===g.tokenServiceUrl)))&&(g._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(g.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,g,t,a,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,r){const o=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new f(this._appOrigin),a=e.shortLivedTokenValidity;let h,l,c,d,u,p,g,m;t&&(m=this.tokenValidity||a||this._defaultTokenValidity,m>a&&a>0&&(m=a)),r&&(h=r.isAdmin,l=r.serverUrl,c=r.token,p=r.signal,g=r.ssl,e.customParameters=r.customParameters),h?d=e.adminTokenServiceUrl:(d=e.tokenServiceUrl,u=new f(d.toLowerCase()),e.webTierAuth&&r?.serverUrl&&!g&&\"http\"===n.scheme&&(_(n.uri,d,!0)||\"https\"===u.scheme&&n.host===u.host&&\"7080\"===n.port&&\"7443\"===u.port)&&(d=d.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const v={query:{request:\"getToken\",username:t?.username,password:t?.password,serverUrl:l,token:c,expiration:m,referer:h||o?this._appOrigin:null,client:h?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,r),signal:p,...r?.ioArgs};o||(v.withCredentials=!1);return s(d,v).then((r=>{const s=r.data;if(!s||!s.token)return new i(\"identity-manager:authentication-failed\",\"Unable to generate token\");const o=e.server;return C[o]||(C[o]={}),t&&(C[o][t.username]=t.password),s.validity=m,s}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,r){let o=!1;return this.getCredential(e,{prompt:!1}).then((n=>{let a;const h={f:\"json\"};if(\"portal\"===n.scope)if(t&&(this._doPortalSignIn(e)||r&&r.force))a=n.server+\"/sharing/rest/oauth2/validateAppAccess\",h.client_id=t;else{if(!n.token)return{credential:n};a=n.server+\"/sharing/rest\"}else{if(!n.token)return{credential:n};a=n.server+\"/rest/services\"}return n.token&&(h.token=n.token),s(a,{query:h,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new i(\"identity-manager:not-authorized\",`You are currently signed in as: '${n.userId}'.`,e.data);return o=!!e.data.viewOnlyUserTypeApp,{credential:n}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw n.destroy(),new i(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new i(\"identity-manager:invalid-request\");return{credential:n}}))})).then((e=>({credential:e.credential,viewOnly:o})))}setOAuthResponseHash(e){e&&(\"#\"===e.charAt(0)&&(e=e.substring(1)),this._processOAuthPopupParams(g(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const s=l(),o=()=>{h?.remove(),d?.remove(),p?.remove(),a?.destroy(),this.dialog?.destroy(),this.dialog=a=h=d=p=null},n=()=>{o(),this._oAuthDfd=null,s.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))};r.signal&&c(r.signal,(()=>{n()}));let a=new this.formConstructor;a.resource=this.getResourceName(e),a.server=t.server,this.dialog=new T,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");let h=a.on(\"cancel\",n),d=u((()=>this.dialog.open),n),p=a.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((i=>{o();const n=new L({userId:e.username,server:t.server,token:i.token,expires:null!=i.expires?Number(i.expires):null,ssl:!!i.ssl,isAdmin:r.isAdmin,validity:i.validity});s.resolve(n)})).catch((e=>{a.error=e,a.signingIn=!1}))}));return s.promise}oAuthSignIn(e,t,r,s){this._oAuthDfd=l();const o=this._oAuthDfd;let n;s?.signal&&c(s.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&f()})),o.resUrl_=e,o.sinfo_=t,o.oinfo_=r;const a=r._oAuthCred;if(a.storage&&(\"authorization-code\"===r.flowType||\"auto\"===r.flowType&&!r.popup&&t.currentVersion>=8.4)){let e=crypto.getRandomValues(new Uint8Array(32));n=m(e),a.codeVerifier=n,e=crypto.getRandomValues(new Uint8Array(32)),a.stateUID=m(e),a.save()||(a.codeVerifier=n=null)}else a.codeVerifier=null;let h,d,p,_;this._getCodeChallenge(n).then((i=>{const o=!s||!1!==s.oAuthPopupConfirmation;r.popup&&o?(h=new this.formConstructor,h.oAuthPrompt=!0,h.server=t.server,this.dialog=new T,this.dialog.content=h,this.dialog.open=!0,this.emit(\"dialog-create\"),d=h.on(\"cancel\",f),p=u((()=>this.dialog.open),f),_=h.on(\"submit\",(()=>{g(),this._doOAuthSignIn(e,t,r,i)}))):this._doOAuthSignIn(e,t,r,i)}));const f=()=>{g(),this._oAuthDfd=null,o.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))},g=()=>{d?.remove(),p?.remove(),_?.remove(),h?.destroy(),this.dialog?.destroy(),this.dialog=null};return o.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=n(window,\"message\",(t=>{if((t.origin===this._appOrigin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===t.data?.type){const r=t.source;this.getCredential(e).then((e=>{r.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{r.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=g(e);let r=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),t.state.portalUrl&&(this._oAuthLocationParams=t,r=!0)}catch{}else if(t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(r=!0,t.state)))try{t.state=JSON.parse(t.state)}catch{}r&&(window.location.hash=t.state?.hash||\"\")}let t=window.location.search;if(t){\"?\"===t.charAt(0)&&(t=t.substring(1));const e=g(t);let r=!1;if(e.code&&e.state)try{e.state=JSON.parse(e.state),e.state.portalUrl&&e.state.uid&&(this._oAuthLocationParams=e,r=!0)}catch{}else if(e.error&&e.error_description&&(console.log(\"IdentityManager OAuth Error: \",e.error,\" - \",e.error_description),\"access_denied\"===e.error&&(r=!0,e.state)))try{e.state=JSON.parse(e.state)}catch{}if(r){const t={...e};[\"code\",\"error\",\"error_description\",\"message_code\",\"persist\",\"state\"].forEach((e=>{delete t[e]}));const r=v(t),s=window.location.pathname+(r?`?${r}`:\"\")+(e.state?.hash||\"\");window.history.replaceState(window.history.state,\"\",s)}}}_getOAuthToken(e,t,r,i,o){return e=e.replace(/^http:/i,\"https:\"),s(`${e}/sharing/rest/oauth2/token`,{authMode:\"anonymous\",method:\"post\",query:i&&o?{grant_type:\"authorization_code\",code:t,redirect_uri:i,client_id:r,code_verifier:o}:{grant_type:\"refresh_token\",refresh_token:t,client_id:r}}).then((e=>e.data))}_getCodeChallenge(e){if(e&&globalThis.isSecureContext){const t=(new TextEncoder).encode(e);return crypto.subtle.digest(\"SHA-256\",t).then((e=>m(new Uint8Array(e))))}return Promise.resolve(null)}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new i(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let r,s,i,o,n=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(r=c[0],i=this.findServerInfo(r.server),s=i&&i.owningSystemUrl,o=s?this.findCredential(s,r.userId):void 0,n=this._getIdenticalSvcIdx(e,r),!a)return-1===n&&r.resources.push(e),this._addResource(e,o),r;-1!==n&&(r.resources.splice(n,1),this._removeResource(e,o))}else{let t,r;if(c.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,i=this.findServerInfo(t.server),s=i&&i.owningSystemUrl,o=s?this.findCredential(s,t.userId):void 0,n=r,!0)))),a)t&&(t.resources.splice(n,1),this._removeResource(e,o));else if(t)return this._addResource(e,o),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return t&&t.isAdmin&&!_(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!_(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new f(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1!==r||R(t)||(r=t.indexOf(\"/sharing\")),-1===r&&\"/\"===t.substr(-1)&&(r=t.length-1),r>-1?e.substring(0,r):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):r.test(e)?e=e.replace(r,\"https://devext.arcgis.com\"):s.test(e)&&(e=e.replace(s,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const r=(t.request.proxyUrl||\"\").toLowerCase(),s=r?e.toLowerCase().indexOf(r+\"?\"):-1;return-1!==s&&(e=e.substring(s+r.length+1)),e=S(e),p(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r=!1;if(this._isRESTService(e)&&this._isRESTService(t)){const s=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(r=s===i,!r){const e=/(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;r=s.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const r=new f(e.toLowerCase()),s=this._portalConfig;let i=this._gwDomains.some((e=>e.regex.test(r.uri)));return!i&&s&&(i=this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),r.uri)),i||t.portalUrl&&(i=_(r,t.portalUrl,!0)),i||(i=this._portals.some((e=>this._hasSameServerInstance(e,r.uri)))),i=i||this._agsPortal.test(r.path),i}_isIdProvider(e,t){let r=-1,s=-1;this._gwDomains.forEach(((i,o)=>{-1===r&&i.regex.test(e)&&(r=o),-1===s&&i.regex.test(t)&&(s=o)}));let i=!1;if(r>-1&&s>-1&&(0===r||4===r?0!==s&&4!==s||(i=!0):1===r?1!==s&&2!==s||(i=!0):2===r?2===s&&(i=!0):3===r&&3===s&&(i=!0)),!i){const r=this.findServerInfo(t),s=r&&r.owningSystemUrl;s&&b(r)&&this._isPortalDomain(s)&&this._isIdProvider(e,s)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let r=-1;for(let s=0;s<t.resources.length;s++){const i=t.resources[s];if(this._isIdenticalService(e,i)){r=s;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,r,i;if(this._isRESTService(e)||this._isAdminResource(e)){const i=this._getServerInstanceRoot(e);return t=i+\"/admin/generateToken\",r=s(e=i+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(i=e.toLowerCase().indexOf(\"/sharing\"),-1!==i&&(t=e.substring(0,i)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new f(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===r&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(e.toLowerCase().includes(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_processOAuthResponseParams(e,t,r){const s=t._oAuthCred;if(e.code){const i=s.codeVerifier;return s.codeVerifier=null,s.stateUID=null,s.save(),this._getOAuthToken(r.server,e.code,t.appId,this._getRedirectURI(t,!0),i).then((i=>{const o=new L({userId:i.username,server:r.server,token:i.access_token,expires:Date.now()+1e3*i.expires_in,ssl:i.ssl,oAuthState:e.state,_oAuthCred:s});return t.userId=o.userId,s.storage=i.persist?q:j,s.refreshToken=i.refresh_token,s.token=null,s.expires=i.refresh_token_expires_in?Date.now()+1e3*i.refresh_token_expires_in:null,s.userId=o.userId,s.ssl=o.ssl,s.save(),o}))}const i=new L({userId:e.username,server:r.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:s});return t.userId=i.userId,s.storage=e.persist?q:j,s.refreshToken=null,s.token=i.token,s.expires=i.expires,s.userId=i.userId,s.ssl=i.ssl,s.save(),Promise.resolve(i)}_processOAuthPopupParams(e){const t=this._oAuthDfd;if(this._oAuthDfd=null,t)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle?.remove(),e.error){const r=\"access_denied\"===e.error,s=new i(r?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",r?\"ABORTED\":\"OAuth: \"+e.error+\" - \"+e.error_description);t.reject(s)}else this._processOAuthResponseParams(e,t.oinfo_,t.sinfo_).then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)}))}_setOAuthResponseQueryString(e){e&&(\"?\"===e.charAt(0)&&(e=e.substring(1)),this._processOAuthPopupParams(g(e)))}_exchangeToken(e,t,r){return s(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:r}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return e=e.replace(/^http:/i,\"https:\"),s(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\",expiration:30},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let r;if(this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r)return Promise.resolve({allSSL:!0,currentVersion:\"8.4\",customBaseUrl:r,portalMode:\"multitenant\",supportsOAuth:!0});this._appOrigin.startsWith(\"https:\")?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return s(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,r=window.location.href,s=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(r)||!(s?s.hasPortal||s.owningSystemUrl&&this._isPortalDomain(s.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(r,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||_(r,e,!0)))}_checkProtocol(e,t,r,s){let o=!0;const n=s?t.adminTokenServiceUrl:t.tokenServiceUrl;if(n.trim().toLowerCase().startsWith(\"https:\")&&!this._appOrigin.startsWith(\"https:\")&&w(n)&&(o=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!o)){r(new i(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return o}_enqueue(e,t,r,s,i,o){return s||(s=l()),s.resUrl_=e,s.sinfo_=t,s.options_=r,s.admin_=i,s.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const r=e.options_&&e.options_.resource,s=e.resUrl_,i=e.refresh_;let o=!1;this.credentials.includes(t)||(i&&this.credentials.includes(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,o=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.includes(r||s)||t.resources.push(r||s),t.scope=this._isServerRsrc(s)?\"server\":\"portal\",t.emitTokenChange();const n=this._soReqs,a={};this._soReqs=[],n.forEach((e=>{if(!this._isIdenticalService(s,e.resUrl_)){const r=this._getSuffix(e.resUrl_);a[r]||(a[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),n.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(s),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,o||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(o,a,h,l)=>{const d=e.sinfo_,u=!e.options_||!1!==e.options_.prompt,p=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let f,g;if(o)t(new L({userId:o,server:d.server,token:h||null,expires:null!=l?Number(l):null,ssl:!!a}));else if(window!==window.parent&&this._appUrlObj.query?.[\"arcgis-auth-origin\"]&&this._appUrlObj.query?.[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const s=n(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(s.remove(),e.data.credential.expires<Date.now()?r(new i(\"identity-manager:credential-request-failed\",\"Parent application's token has expired.\")):t(new L(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(s.remove(),\"tokenExpiredError\"===e.data.error.name?r(new i(\"identity-manager:credential-request-failed\",\"Parent application's token has expired.\")):r(i.fromJSON(e.data.error))))}));c(e.options_?.signal,(()=>{s.remove()}))}else if(p){let o=p._oAuthCred;if(!o){const e=new x(p,q),t=new x(p,j);e.isValid()&&t.isValid()?e.expires>t.expires?(o=e,t.destroy()):(o=t,e.destroy()):o=e.isValid()?e:t,p._oAuthCred=o}if(o.isValid()){f=new L({userId:o.userId,server:d.server,token:o.token,expires:o.expires,ssl:o.ssl,_oAuthCred:o});const r=p.appId!==o.appId&&this._doPortalSignIn(e.resUrl_);r||o.refreshToken?(e._pendingDfd=o.refreshToken?this._getOAuthToken(d.server,o.refreshToken,o.appId).then((e=>(f.expires=Date.now()+1e3*e.expires_in,f.token=e.access_token,f))):Promise.resolve(f),e._pendingDfd.then((e=>r?this._exchangeToken(e.server,p.appId,e.token).then((t=>(e.token=t,e))).catch((()=>e)):e)).then((e=>{t(e)})).catch((()=>{o?.destroy(),s()}))):t(f)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(p.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===o.stateUID&&o.codeVerifier)){const s=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(s,p,d).then((e=>{t(e)})).catch(r)}else{const s=()=>{u?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,p,e.options_).then(t,r):(g=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(g))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,p.appId).then((e=>{_(e.portalUrl,this._appOrigin,!0)?(f=new L({userId:e.username,server:d.server,expires:Date.now()+1e3*e.expires_in,token:e.token}),t(f)):s()})).catch(s):s()}}else if(u){if(this._checkProtocol(e.resUrl_,d,r,e.admin_)){let s=e.options_;e.admin_&&(s=s||{},s.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,s).then(t,r)}}else g=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(g)},o=()=>{const s=e.sinfo_,i=s.owningSystemUrl,o=e.options_;let n,a,h,l;if(o&&(n=o.token,a=o.error,h=o.prompt),l=this._findCredential(i,{token:n,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(D(s,this._legacyFed)){const e=l.toJSON();e.server=s.server,e.resources=null,t(new L(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((r=>{t(new L({userId:l?.userId,server:s.server,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}}else{this._busy=null,n&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:s.owningTenant,signal:e.options_.signal,token:n,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(t=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(t)}))}};this._errbackFunc=r;const a=e.sinfo_.owningSystemUrl,l=this._isServerRsrc(e.resUrl_),d=e.sinfo_._restInfoPms;d?d.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=(h(\"authInfo.tokenServicesUrl\",t)||h(\"authInfo.tokenServiceUrl\",t)||h(\"tokenServiceUrl\",t))??null,r.shortLivedTokenValidity=h(\"authInfo.shortLivedTokenValidity\",t)??null,r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}l&&r.owningSystemUrl?o():s()}),(()=>{e.sinfo_._restInfoPms=null;const t=new i(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");r(t)})):l&&a?o():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const r={};let s,i,o,n;return t&&(s=t.user&&t.user.username,r.username=s,r.allSSL=t.allSSL,i=t.supportsOAuth,n=parseFloat(t.currentVersion),\"multitenant\"===t.portalMode&&(o=t.customBaseUrl),e.sinfo_.currentVersion=n),e.sinfo_.webTierAuth=!!s,s&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:r.allSSL}).catch((()=>null)).then((e=>(r.portalToken=e&&e.token,r.tokenExpiration=e&&e.expires,r))):!s&&i&&n>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>r)):r})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?s(t.username,t.allSSL,t.portalToken,t.tokenExpiration):s()})):s()}_generateOAuthInfo(e){let t,r=null,i=e.portalUrl;const o=e.customBaseUrl,n=e.owningTenant,a=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){r=window.location.href;let e=r.indexOf(\"?\");e>-1&&(r=r.slice(0,e)),e=r.search(/\\/(apps|home)\\//),r=e>-1?r.slice(0,e):null}return a&&r?(this._hasTestedIfAppIsOnPortal=!0,t=s(r+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this._defaultOAuthInfo=new O({appId:\"arcgisonline\",popupCallbackUrl:r+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this._defaultOAuthInfo)return i=i.replace(/^http:/i,\"https:\"),s(i+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:n,client_id:this._defaultOAuthInfo.appId,redirect_uri:I(this._defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this._defaultOAuthInfo.clone();e.data.urlKey&&o?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+o:t.portalUrl=i,t.popup=window!==window.top||!(_(i,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(i)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,r,s){const o=r._oAuthCred,a={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(a.hash=window.location.hash),o.stateUID&&(a.uid=o.stateUID);const h={client_id:r.appId,response_type:o.codeVerifier?\"code\":\"token\",state:JSON.stringify(a),expiration:r.expiration,locale:r.locale,redirect_uri:this._getRedirectURI(r,!!o.codeVerifier)};r.forceLogin&&(h.force_login=!0),r.forceUserId&&r.userId&&(h.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(h.redirectToUserOrgUrl=!0),o.codeVerifier&&(h.code_challenge=s||o.codeVerifier,h.code_challenge_method=s?\"S256\":\"plain\");const l=r.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",c=l+\"?\"+v(h);if(r.popup){const e=window.open(c,\"esriJSAPIOAuth\",r.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const e=this._oAuthDfd;if(e){const t=new i(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnPopupHandle=n(window,[\"arcgis:auth:hash\",\"arcgis:auth:location:search\"],(e=>{\"arcgis:auth:hash\"===e.type?this.setOAuthResponseHash(e.detail):this._setOAuthResponseQueryString(e.detail)}));else{const e=new i(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:h,authorizeUrl:l,resourceUrl:e,serverInfo:t,oAuthInfo:r}):window.location.href=c}_getRedirectURI(e,t){const r=window.location.href.replace(/#.*$/,\"\");if(e.popup)return I(e.popupCallbackUrl);if(t){const e=p(r);return e.query&&[\"code\",\"error\",\"error_description\",\"message_code\",\"persist\",\"state\"].forEach((t=>{delete e.query[t]})),A(e.path,e.query)}return r}}E.prototype.declaredClass=\"esri.identity.IdentityManagerBase\";let L=class extends o.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=r.findServerInfo(this.server),t=e&&e.owningSystemUrl,s=!!t&&\"server\"===this.scope,i=s&&D(e,r._legacyFed),o=e.webTierAuth,n=o&&r.normalizeWebTierAuth,a=C[this.server],h=a&&a[this.userId];let l,c=this.resources&&this.resources[0],d=s?r.findServerInfo(t):null,u={username:this.userId,password:h};if(o&&!n)return;s&&!d&&r.serverInfos.some((e=>(r._isIdProvider(t,e.server)&&(d=e),!!d)));const p=d?r.findCredential(d.server,this.userId):null;if(!s||p){if(!i){if(s)l={serverUrl:c,token:p&&p.token,ssl:p&&p.ssl};else if(n)u=null,l={ssl:this.ssl};else{if(!h){let t;return c&&(c=r._sanitizeUrl(c),this._enqueued=1,t=r._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return r.generateToken(s?d:e,s?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}p?.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&r.credentials.forEach((e=>{const t=r.findServerInfo(e.server),s=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&s&&\"server\"===e.scope&&(r._hasSameServerInstance(this.server,s)||r._isIdProvider(s,this.server))&&(D(t,r._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&r.findServerInfo(this.server),s=t&&t.owningSystemUrl,i=s&&r.findServerInfo(s);!1===e||s&&\"portal\"!==this.scope&&(!i||!i.webTierAuth||r.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=r.credentials.indexOf(this);e>-1&&r.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=a({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let r=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();r<0?r=0:r>t&&(r=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),r>e?r-e:r)}};e([k()],L.prototype,\"creationTime\",void 0),e([k()],L.prototype,\"expires\",void 0),e([k()],L.prototype,\"isAdmin\",void 0),e([k()],L.prototype,\"oAuthState\",void 0),e([k()],L.prototype,\"resources\",void 0),e([k()],L.prototype,\"scope\",void 0),e([k()],L.prototype,\"server\",void 0),e([k()],L.prototype,\"ssl\",void 0),e([k()],L.prototype,\"token\",void 0),e([k()],L.prototype,\"tokenRefreshBuffer\",void 0),e([k()],L.prototype,\"userId\",void 0),e([k()],L.prototype,\"validity\",void 0),L=e([y(\"esri.identity.Credential\")],L);export{L as Credential,E as IdentityManagerBase};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}