{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport { HandleOwner as t } from \"../../../../../core/HandleOwner.js\";\nimport { property as r } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport { subclass as o } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c as s } from \"../../../../../chunks/vec3f64.js\";\nimport { WorkerHandle as n } from \"../../../../../core/workers/WorkerHandle.js\";\nimport { f as i } from \"../../../../../chunks/sphere.js\";\nimport { asSnappingPoint as a } from \"../../SnappingPoint.js\";\nimport { EdgeSnappingCandidate as d } from \"../../candidates/EdgeSnappingCandidate.js\";\nimport { VertexSnappingCandidate as c } from \"../../candidates/VertexSnappingCandidate.js\";\nlet p = class extends t {\n  constructor(e) {\n    super(e), this.availability = 0, this._ids = new Set();\n  }\n  destroy() {\n    this._workerHandle.destroy(), this._workerHandle = null;\n  }\n  initialize() {\n    this._workerHandle = new l(this.schedule, {\n      fetchAllEdgeLocations: (e, t) => this._fetchAllEdgeLocations(e, t)\n    });\n  }\n  async fetchCandidates(e, t) {\n    const r = e.coordinateHelper,\n      {\n        point: o\n      } = e,\n      s = h;\n    this.renderCoordsHelper.toRenderCoords(o, r.spatialReference, s);\n    const n = e.distance,\n      a = \"number\" == typeof n ? n : n.distance,\n      d = await this._workerHandle.invoke({\n        bounds: i(s[0], s[1], s[2], a),\n        types: e.types\n      }, t);\n    return d.candidates.sort((e, t) => e.distance - t.distance), d.candidates.map(e => this._convertCandidate(r, e));\n  }\n  async add(e, t) {\n    this._ids.add(e.id), await this._workerHandle.invokeMethod(\"add\", e, t);\n  }\n  async remove(e, t) {\n    this._ids.delete(e.id), await this._workerHandle.invokeMethod(\"remove\", e, t);\n  }\n  _convertCandidate(e, t) {\n    switch (t.type) {\n      case \"edge\":\n        return new d({\n          objectId: t.objectId,\n          targetPoint: this._convertRenderCoordinate(e, t.target),\n          edgeStart: this._convertRenderCoordinate(e, t.start),\n          edgeEnd: this._convertRenderCoordinate(e, t.end),\n          isDraped: !1\n        });\n      case \"vertex\":\n        return new c({\n          objectId: t.objectId,\n          targetPoint: this._convertRenderCoordinate(e, t.target),\n          isDraped: !1\n        });\n    }\n  }\n  _convertRenderCoordinate(_ref, t) {\n    let {\n      spatialReference: e\n    } = _ref;\n    const r = s();\n    return this.renderCoordsHelper.fromRenderCoords(t, r, e), a(r);\n  }\n  async _fetchAllEdgeLocations(e, t) {\n    const r = [],\n      o = [];\n    for (const {\n      id: s,\n      uid: n\n    } of e.components) this._ids.has(s) && r.push((async () => {\n      const e = await this.fetchEdgeLocations(s, t.signal),\n        r = e.locations.buffer;\n      return o.push(r), {\n        id: s,\n        uid: n,\n        objectIds: e.objectIds,\n        locations: r,\n        origin: e.origin,\n        type: e.type\n      };\n    })());\n    return {\n      result: {\n        components: (await Promise.all(r)).filter(_ref2 => {\n          let {\n            id: e\n          } = _ref2;\n          return this._ids.has(e);\n        })\n      },\n      transferList: o\n    };\n  }\n};\ne([r({\n  constructOnly: !0\n})], p.prototype, \"renderCoordsHelper\", void 0), e([r({\n  constructOnly: !0\n})], p.prototype, \"fetchEdgeLocations\", void 0), e([r({\n  constructOnly: !0\n})], p.prototype, \"schedule\", void 0), e([r({\n  readOnly: !0\n})], p.prototype, \"availability\", void 0), p = e([o(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")], p);\nclass l extends n {\n  constructor(e, t) {\n    super(\"SceneLayerSnappingSourceWorker\", \"fetchCandidates\", {}, e, {\n      strategy: \"dedicated\",\n      client: t\n    });\n  }\n}\nconst h = s();\nexport { p as SceneLayerSnappingSourceWorkerHandle };","map":{"version":3,"names":["_","e","HandleOwner","t","property","r","subclass","o","c","s","WorkerHandle","n","f","i","asSnappingPoint","a","EdgeSnappingCandidate","d","VertexSnappingCandidate","p","constructor","availability","_ids","Set","destroy","_workerHandle","initialize","l","schedule","fetchAllEdgeLocations","_fetchAllEdgeLocations","fetchCandidates","coordinateHelper","point","h","renderCoordsHelper","toRenderCoords","spatialReference","distance","invoke","bounds","types","candidates","sort","map","_convertCandidate","add","id","invokeMethod","remove","delete","type","objectId","targetPoint","_convertRenderCoordinate","target","edgeStart","start","edgeEnd","end","isDraped","_ref","fromRenderCoords","uid","components","has","push","fetchEdgeLocations","signal","locations","buffer","objectIds","origin","result","Promise","all","filter","_ref2","transferList","constructOnly","prototype","readOnly","strategy","client","SceneLayerSnappingSourceWorkerHandle"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorkerHandle.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../core/HandleOwner.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as s}from\"../../../../../chunks/vec3f64.js\";import{WorkerHandle as n}from\"../../../../../core/workers/WorkerHandle.js\";import{f as i}from\"../../../../../chunks/sphere.js\";import{asSnappingPoint as a}from\"../../SnappingPoint.js\";import{EdgeSnappingCandidate as d}from\"../../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as c}from\"../../candidates/VertexSnappingCandidate.js\";let p=class extends t{constructor(e){super(e),this.availability=0,this._ids=new Set}destroy(){this._workerHandle.destroy(),this._workerHandle=null}initialize(){this._workerHandle=new l(this.schedule,{fetchAllEdgeLocations:(e,t)=>this._fetchAllEdgeLocations(e,t)})}async fetchCandidates(e,t){const r=e.coordinateHelper,{point:o}=e,s=h;this.renderCoordsHelper.toRenderCoords(o,r.spatialReference,s);const n=e.distance,a=\"number\"==typeof n?n:n.distance,d=await this._workerHandle.invoke({bounds:i(s[0],s[1],s[2],a),types:e.types},t);return d.candidates.sort(((e,t)=>e.distance-t.distance)),d.candidates.map((e=>this._convertCandidate(r,e)))}async add(e,t){this._ids.add(e.id),await this._workerHandle.invokeMethod(\"add\",e,t)}async remove(e,t){this._ids.delete(e.id),await this._workerHandle.invokeMethod(\"remove\",e,t)}_convertCandidate(e,t){switch(t.type){case\"edge\":return new d({objectId:t.objectId,targetPoint:this._convertRenderCoordinate(e,t.target),edgeStart:this._convertRenderCoordinate(e,t.start),edgeEnd:this._convertRenderCoordinate(e,t.end),isDraped:!1});case\"vertex\":return new c({objectId:t.objectId,targetPoint:this._convertRenderCoordinate(e,t.target),isDraped:!1})}}_convertRenderCoordinate({spatialReference:e},t){const r=s();return this.renderCoordsHelper.fromRenderCoords(t,r,e),a(r)}async _fetchAllEdgeLocations(e,t){const r=[],o=[];for(const{id:s,uid:n}of e.components)this._ids.has(s)&&r.push((async()=>{const e=await this.fetchEdgeLocations(s,t.signal),r=e.locations.buffer;return o.push(r),{id:s,uid:n,objectIds:e.objectIds,locations:r,origin:e.origin,type:e.type}})());return{result:{components:(await Promise.all(r)).filter((({id:e})=>this._ids.has(e)))},transferList:o}}};e([r({constructOnly:!0})],p.prototype,\"renderCoordsHelper\",void 0),e([r({constructOnly:!0})],p.prototype,\"fetchEdgeLocations\",void 0),e([r({constructOnly:!0})],p.prototype,\"schedule\",void 0),e([r({readOnly:!0})],p.prototype,\"availability\",void 0),p=e([o(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")],p);class l extends n{constructor(e,t){super(\"SceneLayerSnappingSourceWorker\",\"fetchCandidates\",{},e,{strategy:\"dedicated\",client:t})}}const h=s();export{p as SceneLayerSnappingSourceWorkerHandle};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}