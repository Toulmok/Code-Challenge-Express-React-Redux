{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../config.js\";\nimport r from \"../Graphic.js\";\nimport o from \"../PopupTemplate.js\";\nimport s from \"../request.js\";\nimport i from \"../core/Collection.js\";\nimport a from \"../core/CollectionFlattener.js\";\nimport { JSONMap as n } from \"../core/jsonMap.js\";\nimport { clone as l } from \"../core/lang.js\";\nimport { isSome as p, isNone as m } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as u } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as c } from \"../core/promiseUtils.js\";\nimport { on as f, watch as y, sync as d } from \"../core/reactiveUtils.js\";\nimport { addQueryParameters as h, addProxy as g, Url as b } from \"../core/urlUtils.js\";\nimport { property as v } from \"../core/accessorSupport/decorators/property.js\";\nimport { Integer as w } from \"../core/accessorSupport/ensureType.js\";\nimport { reader as x } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as j } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as I } from \"../core/accessorSupport/decorators/writer.js\";\nimport { willPropertyWrite as S } from \"../core/accessorSupport/write.js\";\nimport F from \"../geometry/Extent.js\";\nimport E from \"../geometry/SpatialReference.js\";\nimport { getScale as R } from \"../geometry/support/scaleUtils.js\";\nimport { equals as P } from \"../geometry/support/spatialReferenceUtils.js\";\nimport O from \"./Layer.js\";\nimport { BlendLayer as L } from \"./mixins/BlendLayer.js\";\nimport { OperationalLayer as U } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as M } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as T } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as _ } from \"./mixins/ScaleRangeLayer.js\";\nimport { TemporalLayer as C } from \"./mixins/TemporalLayer.js\";\nimport { isAxesOrderReversedForWkid as W } from \"./ogc/crsUtils.js\";\nimport { isWmsServer as $ } from \"./support/arcgisLayerUrl.js\";\nimport { legendEnabled as q, url as N } from \"./support/commonProperties.js\";\nimport { ExportWMSImageParameters as B } from \"./support/ExportWMSImageParameters.js\";\nimport { createBitmap as H } from \"./support/imageBitmapUtils.js\";\nimport k from \"./support/WMSSublayer.js\";\nimport { normalizeWKID as G, toISOString as A, getPopupLayers as D, parseCapabilities as J } from \"./support/wmsUtils.js\";\nconst V = new n({\n  bmp: \"image/bmp\",\n  gif: \"image/gif\",\n  jpg: \"image/jpeg\",\n  png: \"image/png\",\n  svg: \"image/svg+xml\"\n}, {\n  ignoreUnknown: !1\n});\nfunction Q(e) {\n  return \"text/html\" === e;\n}\nfunction z(e) {\n  return \"text/plain\" === e;\n}\nlet K = class extends L(C(T(_(U(M(u(O))))))) {\n  constructor() {\n    super(...arguments), this.allSublayers = new a({\n      getCollections: () => [this.sublayers],\n      getChildrenFunction: e => e.sublayers\n    }), this.customParameters = null, this.customLayerParameters = null, this.copyright = null, this.description = null, this.dimensions = null, this.fullExtent = null, this.fullExtents = null, this.featureInfoFormats = null, this.featureInfoUrl = null, this.fetchFeatureInfoFunction = null, this.imageFormat = null, this.imageMaxHeight = 2048, this.imageMaxWidth = 2048, this.imageTransparency = !0, this.legendEnabled = !0, this.mapUrl = null, this.isReference = null, this.operationalLayerType = \"WMS\", this.spatialReference = null, this.spatialReferences = null, this.sublayers = null, this.type = \"wms\", this.url = null, this.version = null, this.addHandles([f(() => this.sublayers, \"after-add\", _ref => {\n      let {\n        item: e\n      } = _ref;\n      e.parent = e.layer = this;\n    }, d), f(() => this.sublayers, \"after-remove\", _ref2 => {\n      let {\n        item: e\n      } = _ref2;\n      e.layer = e.parent = null;\n    }, d), y(() => this.sublayers, (e, t) => {\n      if (t) for (const r of t) r.layer = r.parent = null;\n      if (e) for (const r of e) r.parent = r.layer = this;\n    }, d)]);\n  }\n  normalizeCtorArgs(e, t) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...t\n    } : e;\n  }\n  load(e) {\n    const t = p(e) ? e.signal : null;\n    return this.addResolvingPromise(this.loadFromPortal({\n      supportedTypes: [\"WMS\"]\n    }, e).catch(c).then(() => this._fetchService(t))), Promise.resolve(this);\n  }\n  readFullExtentFromItemOrMap(e, t) {\n    const r = t.extent;\n    return r ? new F({\n      xmin: r[0][0],\n      ymin: r[0][1],\n      xmax: r[1][0],\n      ymax: r[1][1]\n    }) : null;\n  }\n  writeFullExtent(e, t) {\n    t.extent = [[e.xmin, e.ymin], [e.xmax, e.ymax]];\n  }\n  get featureInfoFormat() {\n    return m(this.featureInfoFormats) ? null : this.featureInfoFormats.find(Q) ?? this.featureInfoFormats.find(z) ?? null;\n  }\n  set featureInfoFormat(e) {\n    p(e) ? (Q(e) || z(e)) && this._override(\"featureInfoFormat\", e) : (this.revert(\"featureInfoFormat\", \"service\"), this._clearOverride(\"featureInfoFormat\"));\n  }\n  readImageFormat(e, t) {\n    const r = t.supportedImageFormatTypes;\n    return r && r.includes(\"image/png\") ? \"image/png\" : r && r[0];\n  }\n  readSpatialReferenceFromItemOrDocument(e, t) {\n    return new E(t.spatialReferences[0]);\n  }\n  writeSpatialReferences(e, t) {\n    const r = this.spatialReference?.wkid;\n    e && r ? (t.spatialReferences = e.filter(e => e !== r), t.spatialReferences.unshift(r)) : t.spatialReferences = e;\n  }\n  readSublayersFromItemOrMap(e, t, r) {\n    return Y(t.layers, r, t.visibleLayers);\n  }\n  readSublayers(e, t, r) {\n    return Y(t.layers, r);\n  }\n  writeSublayers(e, t, r, o) {\n    t.layers = [];\n    const s = new Map(),\n      i = e.flatten(_ref3 => {\n        let {\n          sublayers: e\n        } = _ref3;\n        return e ?? [];\n      });\n    for (const a of i) if (\"number\" == typeof a.parent?.id) {\n      const e = s.get(a.parent.id);\n      null != e ? e.push(a.id) : s.set(a.parent.id, [a.id]);\n    }\n    for (const a of i) {\n      const e = {\n          sublayer: a,\n          ...o\n        },\n        r = a.write({\n          parentLayerId: \"number\" == typeof a.parent?.id ? a.parent.id : -1\n        }, e);\n      if (s.has(a.id) && (r.sublayerIds = s.get(a.id)), !a.sublayers && a.name) {\n        const r = a.write({}, e);\n        delete r.id, t.layers.push(r);\n      }\n    }\n    t.visibleLayers = i.filter(_ref4 => {\n      let {\n        visible: e,\n        sublayers: t\n      } = _ref4;\n      return e && !t;\n    }).map(_ref5 => {\n      let {\n        name: e\n      } = _ref5;\n      return e;\n    }).toArray();\n  }\n  createExportImageParameters(e, t, r, o) {\n    const s = o?.pixelRatio ?? 1,\n      i = R({\n        extent: e,\n        width: t\n      }) * s,\n      a = new B({\n        layer: this,\n        scale: i\n      }),\n      {\n        xmin: n,\n        ymin: l,\n        xmax: p,\n        ymax: m,\n        spatialReference: u\n      } = e,\n      c = G(u, this.spatialReferences),\n      f = \"1.3.0\" === this.version && W(c) ? `${l},${n},${m},${p}` : `${n},${l},${p},${m}`,\n      y = a.toJSON();\n    return {\n      bbox: f,\n      [\"1.3.0\" === this.version ? \"crs\" : \"srs\"]: null == c || isNaN(c) ? void 0 : \"EPSG:\" + c,\n      ...y\n    };\n  }\n  async fetchImage(e, t, r, o) {\n    const i = this.mapUrl,\n      a = this.createExportImageParameters(e, t, r, o);\n    if (!a.layers) {\n      const e = document.createElement(\"canvas\");\n      return e.width = t, e.height = r, e;\n    }\n    const n = o?.timeExtent?.start,\n      l = o?.timeExtent?.end,\n      m = p(n) && p(l) ? n.getTime() === l.getTime() ? A(n) : `${A(n)}/${A(l)}` : void 0,\n      u = {\n        responseType: \"image\",\n        query: this._mixCustomParameters({\n          width: t,\n          height: r,\n          ...a,\n          time: m,\n          ...this.refreshParameters\n        }),\n        signal: o?.signal\n      };\n    return s(i ?? \"\", u).then(e => e.data);\n  }\n  async fetchImageBitmap(e, t, r, o) {\n    const i = this.mapUrl ?? \"\",\n      a = this.createExportImageParameters(e, t, r, o);\n    if (!a.layers) {\n      const e = document.createElement(\"canvas\");\n      return e.width = t, e.height = r, e;\n    }\n    const n = o?.timeExtent?.start,\n      l = o?.timeExtent?.end,\n      m = p(n) && p(l) ? n.getTime() === l.getTime() ? A(n) : `${A(n)}/${A(l)}` : void 0,\n      u = {\n        responseType: \"blob\",\n        query: this._mixCustomParameters({\n          width: t,\n          height: r,\n          ...a,\n          time: m,\n          ...this.refreshParameters\n        }),\n        signal: o?.signal\n      },\n      {\n        data: c\n      } = await s(i, u);\n    return H(c, i);\n  }\n  fetchFeatureInfo(e, t, r, o, s) {\n    const i = R({\n        extent: e,\n        width: t\n      }),\n      a = new B({\n        layer: this,\n        scale: i\n      }),\n      n = D(a.visibleSublayers);\n    if (m(this.featureInfoUrl) || m(n)) return Promise.resolve([]);\n    if (m(this.fetchFeatureInfoFunction) && m(this.featureInfoFormat)) return Promise.resolve([]);\n    const l = \"1.3.0\" === this.version ? {\n        I: o,\n        J: s\n      } : {\n        x: o,\n        y: s\n      },\n      u = {\n        query_layers: n,\n        request: \"GetFeatureInfo\",\n        info_format: this.featureInfoFormat,\n        feature_count: 25,\n        width: t,\n        height: r,\n        ...l\n      },\n      c = {\n        ...this.createExportImageParameters(e, t, r),\n        ...u\n      },\n      f = this._mixCustomParameters(c);\n    return p(this.fetchFeatureInfoFunction) ? this.fetchFeatureInfoFunction(f) : this._defaultFetchFeatureInfoFunction(h(this.featureInfoUrl, f));\n  }\n  findSublayerById(e) {\n    return this.allSublayers.find(t => t.id === e);\n  }\n  findSublayerByName(e) {\n    return this.allSublayers.find(t => t.name === e);\n  }\n  serviceSupportsSpatialReference(e) {\n    return $(this.url) || null != this.spatialReferences && this.spatialReferences.some(t => {\n      const r = 900913 === t ? E.WebMercator : new E({\n        wkid: t\n      });\n      return P(r, e);\n    });\n  }\n  _defaultFetchFeatureInfoFunction(e) {\n    const t = document.createElement(\"iframe\");\n    t.src = g(e), t.style.border = \"none\", t.style.margin = \"0\", t.style.width = \"100%\", t.setAttribute(\"sandbox\", \"\");\n    const s = new o({\n        title: this.title,\n        content: t\n      }),\n      i = new r({\n        sourceLayer: this,\n        popupTemplate: s\n      });\n    return Promise.resolve([i]);\n  }\n  async _fetchService(e) {\n    if (!this.resourceInfo) {\n      const {\n        path: t,\n        query: r\n      } = this.parsedUrl ?? {};\n      r?.service && (r.SERVICE = r.service, delete r.service), r?.request && (r.REQUEST = r.request, delete r.request);\n      const {\n        data: o\n      } = await s(t ?? \"\", {\n        query: {\n          SERVICE: \"WMS\",\n          REQUEST: \"GetCapabilities\",\n          ...r,\n          ...this.customParameters\n        },\n        responseType: \"xml\",\n        signal: e\n      });\n      this.resourceInfo = J(o);\n    }\n    if (this.parsedUrl) {\n      const e = new b(this.parsedUrl.path),\n        {\n          httpsDomains: r\n        } = t.request;\n      \"https\" !== e.scheme || e.port && \"443\" !== e.port || !e.host || r.includes(e.host) || r.push(e.host);\n    }\n    this.read(this.resourceInfo, {\n      origin: \"service\"\n    });\n  }\n  _mixCustomParameters(e) {\n    if (!this.customLayerParameters && !this.customParameters) return e;\n    const t = {\n      ...this.customParameters,\n      ...this.customLayerParameters\n    };\n    for (const r in t) e[r.toLowerCase()] = t[r];\n    return e;\n  }\n};\nfunction X(e, t) {\n  return e.some(e => {\n    for (const r in e) if (S(e, r, null, t)) return !0;\n    return !1;\n  });\n}\nfunction Y(e, t, r) {\n  e = e ?? [];\n  const o = new Map();\n  e.every(e => null == e.id) && (e = l(e)).forEach((e, t) => e.id = t);\n  for (const i of e) {\n    const e = new k();\n    e.read(i, t), r && !r.includes(e.name) && (e.visible = !1), o.set(e.id, e);\n  }\n  const s = [];\n  for (const a of e) {\n    const e = null != a.id ? o.get(a.id) : null;\n    if (e) if (null != a.parentLayerId && a.parentLayerId >= 0) {\n      const t = o.get(a.parentLayerId);\n      if (!t) continue;\n      t.sublayers || (t.sublayers = new i()), t.sublayers.push(e);\n    } else s.push(e);\n  }\n  return s;\n}\ne([v({\n  readOnly: !0\n})], K.prototype, \"allSublayers\", void 0), e([v({\n  json: {\n    type: Object,\n    write: !0\n  }\n})], K.prototype, \"customParameters\", void 0), e([v({\n  json: {\n    type: Object,\n    write: !0\n  }\n})], K.prototype, \"customLayerParameters\", void 0), e([v({\n  type: String,\n  json: {\n    write: !0\n  }\n})], K.prototype, \"copyright\", void 0), e([v()], K.prototype, \"description\", void 0), e([v({\n  readOnly: !0\n})], K.prototype, \"dimensions\", void 0), e([v({\n  json: {\n    type: [[Number]],\n    read: {\n      source: \"extent\"\n    },\n    write: {\n      target: \"extent\"\n    },\n    origins: {\n      \"web-document\": {\n        write: {\n          ignoreOrigin: !0\n        }\n      },\n      \"portal-item\": {\n        write: {\n          ignoreOrigin: !0\n        }\n      }\n    }\n  }\n})], K.prototype, \"fullExtent\", void 0), e([x([\"web-document\", \"portal-item\"], \"fullExtent\", [\"extent\"])], K.prototype, \"readFullExtentFromItemOrMap\", null), e([I([\"web-document\", \"portal-item\"], \"fullExtent\", {\n  extent: {\n    type: [[Number]]\n  }\n})], K.prototype, \"writeFullExtent\", null), e([v()], K.prototype, \"fullExtents\", void 0), e([v({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"featureInfoFormat\", null), e([v({\n  type: [String],\n  readOnly: !0\n})], K.prototype, \"featureInfoFormats\", void 0), e([v({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"featureInfoUrl\", void 0), e([v()], K.prototype, \"fetchFeatureInfoFunction\", void 0), e([v({\n  type: String,\n  json: {\n    origins: {\n      \"web-document\": {\n        default: \"image/png\",\n        type: V.jsonValues,\n        read: {\n          reader: V.read,\n          source: \"format\"\n        },\n        write: {\n          writer: V.write,\n          target: \"format\"\n        }\n      }\n    }\n  }\n})], K.prototype, \"imageFormat\", void 0), e([x(\"imageFormat\", [\"supportedImageFormatTypes\"])], K.prototype, \"readImageFormat\", null), e([v({\n  type: Number,\n  json: {\n    read: {\n      source: \"maxHeight\"\n    },\n    write: {\n      target: \"maxHeight\"\n    }\n  }\n})], K.prototype, \"imageMaxHeight\", void 0), e([v({\n  type: Number,\n  json: {\n    read: {\n      source: \"maxWidth\"\n    },\n    write: {\n      target: \"maxWidth\"\n    }\n  }\n})], K.prototype, \"imageMaxWidth\", void 0), e([v()], K.prototype, \"imageTransparency\", void 0), e([v(q)], K.prototype, \"legendEnabled\", void 0), e([v({\n  type: [\"show\", \"hide\", \"hide-children\"]\n})], K.prototype, \"listMode\", void 0), e([v({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"mapUrl\", void 0), e([v({\n  type: Boolean,\n  json: {\n    read: !1,\n    write: {\n      enabled: !0,\n      overridePolicy: () => ({\n        enabled: !1\n      })\n    }\n  }\n})], K.prototype, \"isReference\", void 0), e([v({\n  type: [\"WMS\"]\n})], K.prototype, \"operationalLayerType\", void 0), e([v()], K.prototype, \"resourceInfo\", void 0), e([v({\n  type: E,\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"extent.spatialReference\"\n        }\n      }\n    },\n    write: !1\n  }\n})], K.prototype, \"spatialReference\", void 0), e([x([\"web-document\", \"portal-item\"], \"spatialReference\", [\"spatialReferences\"])], K.prototype, \"readSpatialReferenceFromItemOrDocument\", null), e([v({\n  type: [w],\n  json: {\n    read: !1,\n    origins: {\n      service: {\n        read: !0\n      },\n      \"web-document\": {\n        read: !1,\n        write: {\n          ignoreOrigin: !0\n        }\n      },\n      \"portal-item\": {\n        read: !1,\n        write: {\n          ignoreOrigin: !0\n        }\n      }\n    }\n  }\n})], K.prototype, \"spatialReferences\", void 0), e([I([\"web-document\", \"portal-item\"], \"spatialReferences\")], K.prototype, \"writeSpatialReferences\", null), e([v({\n  type: i.ofType(k),\n  json: {\n    write: {\n      target: \"layers\",\n      overridePolicy(e, t, r) {\n        if (X(this.allSublayers, r)) return {\n          ignoreOrigin: !0\n        };\n      }\n    }\n  }\n})], K.prototype, \"sublayers\", void 0), e([x([\"web-document\", \"portal-item\"], \"sublayers\", [\"layers\", \"visibleLayers\"])], K.prototype, \"readSublayersFromItemOrMap\", null), e([x(\"service\", \"sublayers\", [\"layers\"])], K.prototype, \"readSublayers\", null), e([I(\"sublayers\", {\n  layers: {\n    type: [k]\n  },\n  visibleLayers: {\n    type: [String]\n  }\n})], K.prototype, \"writeSublayers\", null), e([v({\n  json: {\n    read: !1\n  },\n  readOnly: !0,\n  value: \"wms\"\n})], K.prototype, \"type\", void 0), e([v(N)], K.prototype, \"url\", void 0), e([v({\n  type: String,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], K.prototype, \"version\", void 0), K = e([j(\"esri.layers.WMSLayer\")], K);\nconst Z = K;\nexport { Z as default };","map":{"version":3,"names":["_","e","t","r","o","s","i","a","JSONMap","n","clone","l","isSome","p","isNone","m","MultiOriginJSONMixin","u","throwIfAbortError","c","on","f","watch","y","sync","d","addQueryParameters","h","addProxy","g","Url","b","property","v","Integer","w","reader","x","subclass","j","writer","I","willPropertyWrite","S","F","E","getScale","R","equals","P","O","BlendLayer","L","OperationalLayer","U","PortalLayer","M","RefreshableLayer","T","ScaleRangeLayer","TemporalLayer","C","isAxesOrderReversedForWkid","W","isWmsServer","$","legendEnabled","q","url","N","ExportWMSImageParameters","B","createBitmap","H","k","normalizeWKID","G","toISOString","A","getPopupLayers","D","parseCapabilities","J","V","bmp","gif","jpg","png","svg","ignoreUnknown","Q","z","K","constructor","arguments","allSublayers","getCollections","sublayers","getChildrenFunction","customParameters","customLayerParameters","copyright","description","dimensions","fullExtent","fullExtents","featureInfoFormats","featureInfoUrl","fetchFeatureInfoFunction","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","mapUrl","isReference","operationalLayerType","spatialReference","spatialReferences","type","version","addHandles","_ref","item","parent","layer","_ref2","normalizeCtorArgs","load","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","then","_fetchService","Promise","resolve","readFullExtentFromItemOrMap","extent","xmin","ymin","xmax","ymax","writeFullExtent","featureInfoFormat","find","_override","revert","_clearOverride","readImageFormat","supportedImageFormatTypes","includes","readSpatialReferenceFromItemOrDocument","writeSpatialReferences","wkid","filter","unshift","readSublayersFromItemOrMap","Y","layers","visibleLayers","readSublayers","writeSublayers","Map","flatten","_ref3","id","get","push","set","sublayer","write","parentLayerId","has","sublayerIds","name","_ref4","visible","map","_ref5","toArray","createExportImageParameters","pixelRatio","width","scale","toJSON","bbox","isNaN","fetchImage","document","createElement","height","timeExtent","start","end","getTime","responseType","query","_mixCustomParameters","time","refreshParameters","data","fetchImageBitmap","fetchFeatureInfo","visibleSublayers","query_layers","request","info_format","feature_count","_defaultFetchFeatureInfoFunction","findSublayerById","findSublayerByName","serviceSupportsSpatialReference","some","WebMercator","src","style","border","margin","setAttribute","title","content","sourceLayer","popupTemplate","resourceInfo","path","parsedUrl","service","SERVICE","REQUEST","httpsDomains","scheme","port","host","read","origin","toLowerCase","X","every","forEach","readOnly","prototype","json","Object","String","Number","source","target","origins","ignoreOrigin","default","jsonValues","Boolean","enabled","overridePolicy","ofType","value","Z"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/WMSLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import r from\"../Graphic.js\";import o from\"../PopupTemplate.js\";import s from\"../request.js\";import i from\"../core/Collection.js\";import a from\"../core/CollectionFlattener.js\";import{JSONMap as n}from\"../core/jsonMap.js\";import{clone as l}from\"../core/lang.js\";import{isSome as p,isNone as m}from\"../core/maybe.js\";import{MultiOriginJSONMixin as u}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as c}from\"../core/promiseUtils.js\";import{on as f,watch as y,sync as d}from\"../core/reactiveUtils.js\";import{addQueryParameters as h,addProxy as g,Url as b}from\"../core/urlUtils.js\";import{property as v}from\"../core/accessorSupport/decorators/property.js\";import{Integer as w}from\"../core/accessorSupport/ensureType.js\";import{reader as x}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as j}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as I}from\"../core/accessorSupport/decorators/writer.js\";import{willPropertyWrite as S}from\"../core/accessorSupport/write.js\";import F from\"../geometry/Extent.js\";import E from\"../geometry/SpatialReference.js\";import{getScale as R}from\"../geometry/support/scaleUtils.js\";import{equals as P}from\"../geometry/support/spatialReferenceUtils.js\";import O from\"./Layer.js\";import{BlendLayer as L}from\"./mixins/BlendLayer.js\";import{OperationalLayer as U}from\"./mixins/OperationalLayer.js\";import{PortalLayer as M}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as T}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as _}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as C}from\"./mixins/TemporalLayer.js\";import{isAxesOrderReversedForWkid as W}from\"./ogc/crsUtils.js\";import{isWmsServer as $}from\"./support/arcgisLayerUrl.js\";import{legendEnabled as q,url as N}from\"./support/commonProperties.js\";import{ExportWMSImageParameters as B}from\"./support/ExportWMSImageParameters.js\";import{createBitmap as H}from\"./support/imageBitmapUtils.js\";import k from\"./support/WMSSublayer.js\";import{normalizeWKID as G,toISOString as A,getPopupLayers as D,parseCapabilities as J}from\"./support/wmsUtils.js\";const V=new n({bmp:\"image/bmp\",gif:\"image/gif\",jpg:\"image/jpeg\",png:\"image/png\",svg:\"image/svg+xml\"},{ignoreUnknown:!1});function Q(e){return\"text/html\"===e}function z(e){return\"text/plain\"===e}let K=class extends(L(C(T(_(U(M(u(O)))))))){constructor(...e){super(...e),this.allSublayers=new a({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType=\"WMS\",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type=\"wms\",this.url=null,this.version=null,this.addHandles([f((()=>this.sublayers),\"after-add\",(({item:e})=>{e.parent=e.layer=this}),d),f((()=>this.sublayers),\"after-remove\",(({item:e})=>{e.layer=e.parent=null}),d),y((()=>this.sublayers),((e,t)=>{if(t)for(const r of t)r.layer=r.parent=null;if(e)for(const r of e)r.parent=r.layer=this}),d)])}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){const t=p(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"WMS\"]},e).catch(c).then((()=>this._fetchService(t)))),Promise.resolve(this)}readFullExtentFromItemOrMap(e,t){const r=t.extent;return r?new F({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(e,t){t.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}get featureInfoFormat(){return m(this.featureInfoFormats)?null:this.featureInfoFormats.find(Q)??this.featureInfoFormats.find(z)??null}set featureInfoFormat(e){p(e)?(Q(e)||z(e))&&this._override(\"featureInfoFormat\",e):(this.revert(\"featureInfoFormat\",\"service\"),this._clearOverride(\"featureInfoFormat\"))}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.includes(\"image/png\")?\"image/png\":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,t){return new E(t.spatialReferences[0])}writeSpatialReferences(e,t){const r=this.spatialReference?.wkid;e&&r?(t.spatialReferences=e.filter((e=>e!==r)),t.spatialReferences.unshift(r)):t.spatialReferences=e}readSublayersFromItemOrMap(e,t,r){return Y(t.layers,r,t.visibleLayers)}readSublayers(e,t,r){return Y(t.layers,r)}writeSublayers(e,t,r,o){t.layers=[];const s=new Map,i=e.flatten((({sublayers:e})=>e??[]));for(const a of i)if(\"number\"==typeof a.parent?.id){const e=s.get(a.parent.id);null!=e?e.push(a.id):s.set(a.parent.id,[a.id])}for(const a of i){const e={sublayer:a,...o},r=a.write({parentLayerId:\"number\"==typeof a.parent?.id?a.parent.id:-1},e);if(s.has(a.id)&&(r.sublayerIds=s.get(a.id)),!a.sublayers&&a.name){const r=a.write({},e);delete r.id,t.layers.push(r)}}t.visibleLayers=i.filter((({visible:e,sublayers:t})=>e&&!t)).map((({name:e})=>e)).toArray()}createExportImageParameters(e,t,r,o){const s=o?.pixelRatio??1,i=R({extent:e,width:t})*s,a=new B({layer:this,scale:i}),{xmin:n,ymin:l,xmax:p,ymax:m,spatialReference:u}=e,c=G(u,this.spatialReferences),f=\"1.3.0\"===this.version&&W(c)?`${l},${n},${m},${p}`:`${n},${l},${p},${m}`,y=a.toJSON();return{bbox:f,[\"1.3.0\"===this.version?\"crs\":\"srs\"]:null==c||isNaN(c)?void 0:\"EPSG:\"+c,...y}}async fetchImage(e,t,r,o){const i=this.mapUrl,a=this.createExportImageParameters(e,t,r,o);if(!a.layers){const e=document.createElement(\"canvas\");return e.width=t,e.height=r,e}const n=o?.timeExtent?.start,l=o?.timeExtent?.end,m=p(n)&&p(l)?n.getTime()===l.getTime()?A(n):`${A(n)}/${A(l)}`:void 0,u={responseType:\"image\",query:this._mixCustomParameters({width:t,height:r,...a,time:m,...this.refreshParameters}),signal:o?.signal};return s(i??\"\",u).then((e=>e.data))}async fetchImageBitmap(e,t,r,o){const i=this.mapUrl??\"\",a=this.createExportImageParameters(e,t,r,o);if(!a.layers){const e=document.createElement(\"canvas\");return e.width=t,e.height=r,e}const n=o?.timeExtent?.start,l=o?.timeExtent?.end,m=p(n)&&p(l)?n.getTime()===l.getTime()?A(n):`${A(n)}/${A(l)}`:void 0,u={responseType:\"blob\",query:this._mixCustomParameters({width:t,height:r,...a,time:m,...this.refreshParameters}),signal:o?.signal},{data:c}=await s(i,u);return H(c,i)}fetchFeatureInfo(e,t,r,o,s){const i=R({extent:e,width:t}),a=new B({layer:this,scale:i}),n=D(a.visibleSublayers);if(m(this.featureInfoUrl)||m(n))return Promise.resolve([]);if(m(this.fetchFeatureInfoFunction)&&m(this.featureInfoFormat))return Promise.resolve([]);const l=\"1.3.0\"===this.version?{I:o,J:s}:{x:o,y:s},u={query_layers:n,request:\"GetFeatureInfo\",info_format:this.featureInfoFormat,feature_count:25,width:t,height:r,...l},c={...this.createExportImageParameters(e,t,r),...u},f=this._mixCustomParameters(c);return p(this.fetchFeatureInfoFunction)?this.fetchFeatureInfoFunction(f):this._defaultFetchFeatureInfoFunction(h(this.featureInfoUrl,f))}findSublayerById(e){return this.allSublayers.find((t=>t.id===e))}findSublayerByName(e){return this.allSublayers.find((t=>t.name===e))}serviceSupportsSpatialReference(e){return $(this.url)||null!=this.spatialReferences&&this.spatialReferences.some((t=>{const r=900913===t?E.WebMercator:new E({wkid:t});return P(r,e)}))}_defaultFetchFeatureInfoFunction(e){const t=document.createElement(\"iframe\");t.src=g(e),t.style.border=\"none\",t.style.margin=\"0\",t.style.width=\"100%\",t.setAttribute(\"sandbox\",\"\");const s=new o({title:this.title,content:t}),i=new r({sourceLayer:this,popupTemplate:s});return Promise.resolve([i])}async _fetchService(e){if(!this.resourceInfo){const{path:t,query:r}=this.parsedUrl??{};r?.service&&(r.SERVICE=r.service,delete r.service),r?.request&&(r.REQUEST=r.request,delete r.request);const{data:o}=await s(t??\"\",{query:{SERVICE:\"WMS\",REQUEST:\"GetCapabilities\",...r,...this.customParameters},responseType:\"xml\",signal:e});this.resourceInfo=J(o)}if(this.parsedUrl){const e=new b(this.parsedUrl.path),{httpsDomains:r}=t.request;\"https\"!==e.scheme||e.port&&\"443\"!==e.port||!e.host||r.includes(e.host)||r.push(e.host)}this.read(this.resourceInfo,{origin:\"service\"})}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const t={...this.customParameters,...this.customLayerParameters};for(const r in t)e[r.toLowerCase()]=t[r];return e}};function X(e,t){return e.some((e=>{for(const r in e)if(S(e,r,null,t))return!0;return!1}))}function Y(e,t,r){e=e??[];const o=new Map;e.every((e=>null==e.id))&&(e=l(e)).forEach(((e,t)=>e.id=t));for(const i of e){const e=new k;e.read(i,t),r&&!r.includes(e.name)&&(e.visible=!1),o.set(e.id,e)}const s=[];for(const a of e){const e=null!=a.id?o.get(a.id):null;if(e)if(null!=a.parentLayerId&&a.parentLayerId>=0){const t=o.get(a.parentLayerId);if(!t)continue;t.sublayers||(t.sublayers=new i),t.sublayers.push(e)}else s.push(e)}return s}e([v({readOnly:!0})],K.prototype,\"allSublayers\",void 0),e([v({json:{type:Object,write:!0}})],K.prototype,\"customParameters\",void 0),e([v({json:{type:Object,write:!0}})],K.prototype,\"customLayerParameters\",void 0),e([v({type:String,json:{write:!0}})],K.prototype,\"copyright\",void 0),e([v()],K.prototype,\"description\",void 0),e([v({readOnly:!0})],K.prototype,\"dimensions\",void 0),e([v({json:{type:[[Number]],read:{source:\"extent\"},write:{target:\"extent\"},origins:{\"web-document\":{write:{ignoreOrigin:!0}},\"portal-item\":{write:{ignoreOrigin:!0}}}}})],K.prototype,\"fullExtent\",void 0),e([x([\"web-document\",\"portal-item\"],\"fullExtent\",[\"extent\"])],K.prototype,\"readFullExtentFromItemOrMap\",null),e([I([\"web-document\",\"portal-item\"],\"fullExtent\",{extent:{type:[[Number]]}})],K.prototype,\"writeFullExtent\",null),e([v()],K.prototype,\"fullExtents\",void 0),e([v({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"featureInfoFormat\",null),e([v({type:[String],readOnly:!0})],K.prototype,\"featureInfoFormats\",void 0),e([v({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"featureInfoUrl\",void 0),e([v()],K.prototype,\"fetchFeatureInfoFunction\",void 0),e([v({type:String,json:{origins:{\"web-document\":{default:\"image/png\",type:V.jsonValues,read:{reader:V.read,source:\"format\"},write:{writer:V.write,target:\"format\"}}}}})],K.prototype,\"imageFormat\",void 0),e([x(\"imageFormat\",[\"supportedImageFormatTypes\"])],K.prototype,\"readImageFormat\",null),e([v({type:Number,json:{read:{source:\"maxHeight\"},write:{target:\"maxHeight\"}}})],K.prototype,\"imageMaxHeight\",void 0),e([v({type:Number,json:{read:{source:\"maxWidth\"},write:{target:\"maxWidth\"}}})],K.prototype,\"imageMaxWidth\",void 0),e([v()],K.prototype,\"imageTransparency\",void 0),e([v(q)],K.prototype,\"legendEnabled\",void 0),e([v({type:[\"show\",\"hide\",\"hide-children\"]})],K.prototype,\"listMode\",void 0),e([v({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"mapUrl\",void 0),e([v({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],K.prototype,\"isReference\",void 0),e([v({type:[\"WMS\"]})],K.prototype,\"operationalLayerType\",void 0),e([v()],K.prototype,\"resourceInfo\",void 0),e([v({type:E,json:{origins:{service:{read:{source:\"extent.spatialReference\"}}},write:!1}})],K.prototype,\"spatialReference\",void 0),e([x([\"web-document\",\"portal-item\"],\"spatialReference\",[\"spatialReferences\"])],K.prototype,\"readSpatialReferenceFromItemOrDocument\",null),e([v({type:[w],json:{read:!1,origins:{service:{read:!0},\"web-document\":{read:!1,write:{ignoreOrigin:!0}},\"portal-item\":{read:!1,write:{ignoreOrigin:!0}}}}})],K.prototype,\"spatialReferences\",void 0),e([I([\"web-document\",\"portal-item\"],\"spatialReferences\")],K.prototype,\"writeSpatialReferences\",null),e([v({type:i.ofType(k),json:{write:{target:\"layers\",overridePolicy(e,t,r){if(X(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],K.prototype,\"sublayers\",void 0),e([x([\"web-document\",\"portal-item\"],\"sublayers\",[\"layers\",\"visibleLayers\"])],K.prototype,\"readSublayersFromItemOrMap\",null),e([x(\"service\",\"sublayers\",[\"layers\"])],K.prototype,\"readSublayers\",null),e([I(\"sublayers\",{layers:{type:[k]},visibleLayers:{type:[String]}})],K.prototype,\"writeSublayers\",null),e([v({json:{read:!1},readOnly:!0,value:\"wms\"})],K.prototype,\"type\",void 0),e([v(N)],K.prototype,\"url\",void 0),e([v({type:String,json:{write:{ignoreOrigin:!0}}})],K.prototype,\"version\",void 0),K=e([j(\"esri.layers.WMSLayer\")],K);const Z=K;export{Z as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}