{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { Z as o } from \"../../../../../../chunks/vec3f64.js\";\nimport { LayerBlendMode as r } from \"../output/BlendOptions.js\";\nimport { BackgroundGrid as e } from \"./BackgroundGrid.glsl.js\";\nimport { BlendModes as t } from \"../util/BlendModes.glsl.js\";\nimport { texelFetch as a } from \"../util/WebGL2Utils.js\";\nimport { Float3PassUniform as s } from \"../../shaderModules/Float3PassUniform.js\";\nimport { FloatPassUniform as i } from \"../../shaderModules/FloatPassUniform.js\";\nimport { NoParameters as c, glsl as l } from \"../../shaderModules/interfaces.js\";\nimport { createTexture2DPassSizeUniforms as n } from \"../../shaderModules/Texture2DPassUniform.js\";\nimport { TextureSizeUniformType as u } from \"../../shaderModules/TextureSizeUniformType.js\";\nvar d, p, m;\n!function (o) {\n  o[o.Composite = 0] = \"Composite\", o[o.ColorComposite = 1] = \"ColorComposite\", o[o.GridComposite = 2] = \"GridComposite\", o[o.GroupBackgroundComposite = 3] = \"GroupBackgroundComposite\", o[o.COUNT = 4] = \"COUNT\";\n}(d || (d = {})), function (o) {\n  o[o.NotRequired = 0] = \"NotRequired\", o[o.Required = 1] = \"Required\", o[o.COUNT = 2] = \"COUNT\";\n}(p || (p = {})), function (o) {\n  o[o.Off = 0] = \"Off\", o[o.On = 1] = \"On\", o[o.COUNT = 2] = \"COUNT\";\n}(m || (m = {}));\nclass f extends c {\n  constructor() {\n    super(...arguments), this.baseOpacity = 1, this.backgroundColor = o, this.fboTexture = null;\n  }\n}\nfunction C(o, c) {\n  const f = c.output === d.GridComposite,\n    C = c.output === d.ColorComposite,\n    g = c.output === d.GroupBackgroundComposite,\n    b = c.output === d.Composite;\n  f && (o.extensions.add(\"GL_OES_standard_derivatives\"), o.fragment.include(e)), C && o.fragment.uniforms.add(new s(\"backgroundColor\", o => o.backgroundColor));\n  const y = c.baseOpacityMode === p.Required;\n  if (y && o.fragment.uniforms.add(new i(\"baseOpacity\", o => o.baseOpacity)), b) {\n    const r = c.hasWebGL2Context ? u.None : u.InvSize;\n    o.fragment.uniforms.add(n(\"fboColor\", o => o.fboTexture, r));\n  }\n  const v = c.blendMode !== r.Normal,\n    O = c.premultipliedSource === m.On;\n  o.fragment.include(t, c), o.fragment.code.add(l`\n    vec4 getBackground(vec2 uv) {\n      return ${y ? l`baseOpacity *` : \"\"} ${g ? l`vec4(0.0, 0.0, 0.0, 0.0)` : C ? l`vec4(backgroundColor, 1.0)` : f ? l`vec4(gridColor(uv), 1.0)` : l`${a(c, \"fboColor\", \"gl_FragCoord.xy\")}`};\n    }\n\n    vec4 blendLayers(vec4 bgColor, vec4 colorLayer, float opacity) {\n      ${v ? l`\n          vec3 cl = colorLayer.a == 0.0 ? colorLayer.rgb : colorLayer.rgb / colorLayer.a;\n          vec3 cb = bgColor.a == 0.0 ? bgColor.rgb : bgColor.rgb / bgColor.a;\n          return applyBlendMode(clamp(cl, vec3(0.0), vec3(1.0)), colorLayer.a * opacity, cb, bgColor.a);` : l`\n          float composeAlpha = colorLayer.a * opacity;\n          return ${!O && (b && !y || g) ? l`colorLayer * opacity;` : l`bgColor * (1.0 - composeAlpha) + colorLayer * opacity;`}`}\n    }`);\n}\nexport { p as BaseOpacityMode, d as BlendLayersOutput, m as PremultipliedAlphaSource, C as TileBackground, f as TileBackgroundPassParameters };","map":{"version":3,"names":["Z","o","LayerBlendMode","r","BackgroundGrid","e","BlendModes","t","texelFetch","a","Float3PassUniform","s","FloatPassUniform","i","NoParameters","c","glsl","l","createTexture2DPassSizeUniforms","n","TextureSizeUniformType","u","d","p","m","Composite","ColorComposite","GridComposite","GroupBackgroundComposite","COUNT","NotRequired","Required","Off","On","f","constructor","arguments","baseOpacity","backgroundColor","fboTexture","C","output","g","b","extensions","add","fragment","include","uniforms","y","baseOpacityMode","hasWebGL2Context","None","InvSize","v","blendMode","Normal","O","premultipliedSource","code","BaseOpacityMode","BlendLayersOutput","PremultipliedAlphaSource","TileBackground","TileBackgroundPassParameters"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/terrain/TileBackground.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{Z as o}from\"../../../../../../chunks/vec3f64.js\";import{LayerBlendMode as r}from\"../output/BlendOptions.js\";import{BackgroundGrid as e}from\"./BackgroundGrid.glsl.js\";import{BlendModes as t}from\"../util/BlendModes.glsl.js\";import{texelFetch as a}from\"../util/WebGL2Utils.js\";import{Float3PassUniform as s}from\"../../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as i}from\"../../shaderModules/FloatPassUniform.js\";import{NoParameters as c,glsl as l}from\"../../shaderModules/interfaces.js\";import{createTexture2DPassSizeUniforms as n}from\"../../shaderModules/Texture2DPassUniform.js\";import{TextureSizeUniformType as u}from\"../../shaderModules/TextureSizeUniformType.js\";var d,p,m;!function(o){o[o.Composite=0]=\"Composite\",o[o.ColorComposite=1]=\"ColorComposite\",o[o.GridComposite=2]=\"GridComposite\",o[o.GroupBackgroundComposite=3]=\"GroupBackgroundComposite\",o[o.COUNT=4]=\"COUNT\"}(d||(d={})),function(o){o[o.NotRequired=0]=\"NotRequired\",o[o.Required=1]=\"Required\",o[o.COUNT=2]=\"COUNT\"}(p||(p={})),function(o){o[o.Off=0]=\"Off\",o[o.On=1]=\"On\",o[o.COUNT=2]=\"COUNT\"}(m||(m={}));class f extends c{constructor(){super(...arguments),this.baseOpacity=1,this.backgroundColor=o,this.fboTexture=null}}function C(o,c){const f=c.output===d.GridComposite,C=c.output===d.ColorComposite,g=c.output===d.GroupBackgroundComposite,b=c.output===d.Composite;f&&(o.extensions.add(\"GL_OES_standard_derivatives\"),o.fragment.include(e)),C&&o.fragment.uniforms.add(new s(\"backgroundColor\",(o=>o.backgroundColor)));const y=c.baseOpacityMode===p.Required;if(y&&o.fragment.uniforms.add(new i(\"baseOpacity\",(o=>o.baseOpacity))),b){const r=c.hasWebGL2Context?u.None:u.InvSize;o.fragment.uniforms.add(n(\"fboColor\",(o=>o.fboTexture),r))}const v=c.blendMode!==r.Normal,O=c.premultipliedSource===m.On;o.fragment.include(t,c),o.fragment.code.add(l`\n    vec4 getBackground(vec2 uv) {\n      return ${y?l`baseOpacity *`:\"\"} ${g?l`vec4(0.0, 0.0, 0.0, 0.0)`:C?l`vec4(backgroundColor, 1.0)`:f?l`vec4(gridColor(uv), 1.0)`:l`${a(c,\"fboColor\",\"gl_FragCoord.xy\")}`};\n    }\n\n    vec4 blendLayers(vec4 bgColor, vec4 colorLayer, float opacity) {\n      ${v?l`\n          vec3 cl = colorLayer.a == 0.0 ? colorLayer.rgb : colorLayer.rgb / colorLayer.a;\n          vec3 cb = bgColor.a == 0.0 ? bgColor.rgb : bgColor.rgb / bgColor.a;\n          return applyBlendMode(clamp(cl, vec3(0.0), vec3(1.0)), colorLayer.a * opacity, cb, bgColor.a);`:l`\n          float composeAlpha = colorLayer.a * opacity;\n          return ${!O&&(b&&!y||g)?l`colorLayer * opacity;`:l`bgColor * (1.0 - composeAlpha) + colorLayer * opacity;`}`}\n    }`)}export{p as BaseOpacityMode,d as BlendLayersOutput,m as PremultipliedAlphaSource,C as TileBackground,f as TileBackgroundPassParameters};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,qCAAqC;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,0BAA0B;AAAC,SAAOC,UAAU,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,UAAU,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,0CAA0C;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,yCAAyC;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,IAAI,IAAIC,CAAC,QAAK,mCAAmC;AAAC,SAAOC,+BAA+B,IAAIC,CAAC,QAAK,6CAA6C;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,+CAA+C;AAAC,IAAIC,CAAC,EAACC,CAAC,EAACC,CAAC;AAAC,CAAC,UAASvB,CAAC,EAAC;EAACA,CAAC,CAACA,CAAC,CAACwB,SAAS,GAAC,CAAC,CAAC,GAAC,WAAW,EAACxB,CAAC,CAACA,CAAC,CAACyB,cAAc,GAAC,CAAC,CAAC,GAAC,gBAAgB,EAACzB,CAAC,CAACA,CAAC,CAAC0B,aAAa,GAAC,CAAC,CAAC,GAAC,eAAe,EAAC1B,CAAC,CAACA,CAAC,CAAC2B,wBAAwB,GAAC,CAAC,CAAC,GAAC,0BAA0B,EAAC3B,CAAC,CAACA,CAAC,CAAC4B,KAAK,GAAC,CAAC,CAAC,GAAC,OAAO;AAAA,CAAC,CAACP,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC,EAAC,UAASrB,CAAC,EAAC;EAACA,CAAC,CAACA,CAAC,CAAC6B,WAAW,GAAC,CAAC,CAAC,GAAC,aAAa,EAAC7B,CAAC,CAACA,CAAC,CAAC8B,QAAQ,GAAC,CAAC,CAAC,GAAC,UAAU,EAAC9B,CAAC,CAACA,CAAC,CAAC4B,KAAK,GAAC,CAAC,CAAC,GAAC,OAAO;AAAA,CAAC,CAACN,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC,EAAC,UAAStB,CAAC,EAAC;EAACA,CAAC,CAACA,CAAC,CAAC+B,GAAG,GAAC,CAAC,CAAC,GAAC,KAAK,EAAC/B,CAAC,CAACA,CAAC,CAACgC,EAAE,GAAC,CAAC,CAAC,GAAC,IAAI,EAAChC,CAAC,CAACA,CAAC,CAAC4B,KAAK,GAAC,CAAC,CAAC,GAAC,OAAO;AAAA,CAAC,CAACL,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC;AAAC,MAAMU,CAAC,SAASnB,CAAC;EAACoB,WAAWA,CAAA,EAAE;IAAC,KAAK,CAAC,GAAGC,SAAS,CAAC,EAAC,IAAI,CAACC,WAAW,GAAC,CAAC,EAAC,IAAI,CAACC,eAAe,GAACrC,CAAC,EAAC,IAAI,CAACsC,UAAU,GAAC,IAAI;EAAA;AAAC;AAAC,SAASC,CAACA,CAACvC,CAAC,EAACc,CAAC,EAAC;EAAC,MAAMmB,CAAC,GAACnB,CAAC,CAAC0B,MAAM,KAAGnB,CAAC,CAACK,aAAa;IAACa,CAAC,GAACzB,CAAC,CAAC0B,MAAM,KAAGnB,CAAC,CAACI,cAAc;IAACgB,CAAC,GAAC3B,CAAC,CAAC0B,MAAM,KAAGnB,CAAC,CAACM,wBAAwB;IAACe,CAAC,GAAC5B,CAAC,CAAC0B,MAAM,KAAGnB,CAAC,CAACG,SAAS;EAACS,CAAC,KAAGjC,CAAC,CAAC2C,UAAU,CAACC,GAAG,CAAC,6BAA6B,CAAC,EAAC5C,CAAC,CAAC6C,QAAQ,CAACC,OAAO,CAAC1C,CAAC,CAAC,CAAC,EAACmC,CAAC,IAAEvC,CAAC,CAAC6C,QAAQ,CAACE,QAAQ,CAACH,GAAG,CAAC,IAAIlC,CAAC,CAAC,iBAAiB,EAAEV,CAAC,IAAEA,CAAC,CAACqC,eAAe,CAAE,CAAC;EAAC,MAAMW,CAAC,GAAClC,CAAC,CAACmC,eAAe,KAAG3B,CAAC,CAACQ,QAAQ;EAAC,IAAGkB,CAAC,IAAEhD,CAAC,CAAC6C,QAAQ,CAACE,QAAQ,CAACH,GAAG,CAAC,IAAIhC,CAAC,CAAC,aAAa,EAAEZ,CAAC,IAAEA,CAAC,CAACoC,WAAW,CAAE,CAAC,EAACM,CAAC,EAAC;IAAC,MAAMxC,CAAC,GAACY,CAAC,CAACoC,gBAAgB,GAAC9B,CAAC,CAAC+B,IAAI,GAAC/B,CAAC,CAACgC,OAAO;IAACpD,CAAC,CAAC6C,QAAQ,CAACE,QAAQ,CAACH,GAAG,CAAC1B,CAAC,CAAC,UAAU,EAAElB,CAAC,IAAEA,CAAC,CAACsC,UAAU,EAAEpC,CAAC,CAAC,CAAC;EAAA;EAAC,MAAMmD,CAAC,GAACvC,CAAC,CAACwC,SAAS,KAAGpD,CAAC,CAACqD,MAAM;IAACC,CAAC,GAAC1C,CAAC,CAAC2C,mBAAmB,KAAGlC,CAAC,CAACS,EAAE;EAAChC,CAAC,CAAC6C,QAAQ,CAACC,OAAO,CAACxC,CAAC,EAACQ,CAAC,CAAC,EAACd,CAAC,CAAC6C,QAAQ,CAACa,IAAI,CAACd,GAAG,CAAC5B,CAAE;AACpyD;AACA,eAAegC,CAAC,GAAChC,CAAE,eAAc,GAAC,EAAG,IAAGyB,CAAC,GAACzB,CAAE,0BAAyB,GAACuB,CAAC,GAACvB,CAAE,4BAA2B,GAACiB,CAAC,GAACjB,CAAE,0BAAyB,GAACA,CAAE,GAAER,CAAC,CAACM,CAAC,EAAC,UAAU,EAAC,iBAAiB,CAAE,EAAE;AAC5K;AACA;AACA;AACA,QAAQuC,CAAC,GAACrC,CAAE;AACZ;AACA;AACA,yGAAyG,GAACA,CAAE;AAC5G;AACA,mBAAmB,CAACwC,CAAC,KAAGd,CAAC,IAAE,CAACM,CAAC,IAAEP,CAAC,CAAC,GAACzB,CAAE,uBAAsB,GAACA,CAAE,wDAAwD,EAAE;AACvH,MAAM,CAAC;AAAA;AAAC,SAAOM,CAAC,IAAIqC,eAAe,EAACtC,CAAC,IAAIuC,iBAAiB,EAACrC,CAAC,IAAIsC,wBAAwB,EAACtB,CAAC,IAAIuB,cAAc,EAAC7B,CAAC,IAAI8B,4BAA4B"},"metadata":{},"sourceType":"module","externalDependencies":[]}