{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { eachAlways as e } from \"../../../../../core/promiseUtils.js\";\nimport { BufferView as i } from \"./bufferview.js\";\nclass r {\n  constructor(e) {\n    this._gltf = e, this._bufferViews = [], this._isFinalized = !1, e.buffers || (e.buffers = []), this.index = e.buffers.length;\n    const i = {\n      byteLength: -1\n    };\n    e.buffers.push(i), this._buffer = i;\n  }\n  addBufferView(e, r, t) {\n    if (this._finalizePromise) throw new Error(\"Cannot add buffer view after fiinalizing buffer\");\n    const f = new i(this, this._gltf, e, r, t);\n    return this._bufferViews.push(f), f;\n  }\n  getByteOffset(e) {\n    let i = 0;\n    for (const r of this._bufferViews) {\n      if (r === e) return i;\n      i += r.byteSize;\n    }\n    throw new Error(\"Given bufferView was not present in this buffer\");\n  }\n  getViewFinalizePromises(e) {\n    const i = [];\n    for (const r of this._bufferViews) {\n      if (e && r === e) return i;\n      i.push(r.finalized);\n    }\n    return i;\n  }\n  getArrayBuffer() {\n    if (!this._isFinalized) throw new Error(\"Cannot get ArrayBuffer from Buffer before it is finalized\");\n    const e = this._getTotalSize(),\n      i = new ArrayBuffer(e);\n    let r = 0;\n    for (const t of this._bufferViews) t.writeOutToBuffer(i, r), r += t.byteSize;\n    return i;\n  }\n  finalize() {\n    if (this._finalizePromise) throw new Error(`Buffer ${this.index} was already finalized`);\n    return this._finalizePromise = new Promise(i => {\n      i(e(this.getViewFinalizePromises()));\n    }).then(() => {\n      this._isFinalized = !0;\n      const e = this.getArrayBuffer();\n      this._buffer.byteLength = e.byteLength, this._buffer.uri = e;\n    }), this._gltf.extras?.promises.push(this._finalizePromise), this._finalizePromise;\n  }\n  _getTotalSize() {\n    let e = 0;\n    for (const i of this._bufferViews) e += i.byteSize;\n    return e;\n  }\n}\nexport { r as Buffer };","map":{"version":3,"names":["eachAlways","e","BufferView","i","r","constructor","_gltf","_bufferViews","_isFinalized","buffers","index","length","byteLength","push","_buffer","addBufferView","t","_finalizePromise","Error","f","getByteOffset","byteSize","getViewFinalizePromises","finalized","getArrayBuffer","_getTotalSize","ArrayBuffer","writeOutToBuffer","finalize","Promise","then","uri","extras","promises","Buffer"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/buffer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{eachAlways as e}from\"../../../../../core/promiseUtils.js\";import{BufferView as i}from\"./bufferview.js\";class r{constructor(e){this._gltf=e,this._bufferViews=[],this._isFinalized=!1,e.buffers||(e.buffers=[]),this.index=e.buffers.length;const i={byteLength:-1};e.buffers.push(i),this._buffer=i}addBufferView(e,r,t){if(this._finalizePromise)throw new Error(\"Cannot add buffer view after fiinalizing buffer\");const f=new i(this,this._gltf,e,r,t);return this._bufferViews.push(f),f}getByteOffset(e){let i=0;for(const r of this._bufferViews){if(r===e)return i;i+=r.byteSize}throw new Error(\"Given bufferView was not present in this buffer\")}getViewFinalizePromises(e){const i=[];for(const r of this._bufferViews){if(e&&r===e)return i;i.push(r.finalized)}return i}getArrayBuffer(){if(!this._isFinalized)throw new Error(\"Cannot get ArrayBuffer from Buffer before it is finalized\");const e=this._getTotalSize(),i=new ArrayBuffer(e);let r=0;for(const t of this._bufferViews)t.writeOutToBuffer(i,r),r+=t.byteSize;return i}finalize(){if(this._finalizePromise)throw new Error(`Buffer ${this.index} was already finalized`);return this._finalizePromise=new Promise((i=>{i(e(this.getViewFinalizePromises()))})).then((()=>{this._isFinalized=!0;const e=this.getArrayBuffer();this._buffer.byteLength=e.byteLength,this._buffer.uri=e})),this._gltf.extras?.promises.push(this._finalizePromise),this._finalizePromise}_getTotalSize(){let e=0;for(const i of this._bufferViews)e+=i.byteSize;return e}}export{r as Buffer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}