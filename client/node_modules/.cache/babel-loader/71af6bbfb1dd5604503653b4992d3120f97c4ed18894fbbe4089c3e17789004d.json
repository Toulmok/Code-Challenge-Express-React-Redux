{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport i from \"../../../core/Handles.js\";\nimport has from \"../../../core/has.js\";\nimport s from \"../../../core/Logger.js\";\nimport { isNone as r, isSome as a } from \"../../../core/maybe.js\";\nimport d from \"../../../core/PooledArray.js\";\nimport { EsriPromiseMixin as o } from \"../../../core/Promise.js\";\nimport { isAbortError as n } from \"../../../core/promiseUtils.js\";\nimport { watch as h, initial as l, sync as u } from \"../../../core/reactiveUtils.js\";\nimport { property as _ } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as c } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { projectBoundingRect as p } from \"../../../geometry/projection.js\";\nimport { create as g, intersectsSphere as m } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { makeDehydratedPoint as y } from \"../dehydratedFeatures.js\";\nimport { PromiseQueue as x } from \"../../support/PromiseQueue.js\";\nimport { viewingModeFromString as f } from \"../../../views/ViewingMode.js\";\nimport { addCallback as b } from \"../../../views/3d/layers/i3s/I3SFrameTask.js\";\nimport { I3SIndex as N } from \"../../../views/3d/layers/i3s/I3SIndex.js\";\nimport v from \"../../../views/3d/layers/i3s/I3SLodHandling.js\";\nimport { NodeState as w, CacheState as C } from \"../../../views/3d/layers/i3s/I3SNode.js\";\nimport D from \"../../../views/3d/layers/i3s/I3SNodeLoader.js\";\nimport { I3SStreamDataController as L } from \"../../../views/3d/layers/i3s/I3SStreamDataController.js\";\nimport { getVertexCrs as S, getIndexCrs as I, findIntersectingNodes as V } from \"../../../views/3d/layers/i3s/I3SUtil.js\";\nimport A from \"../../../views/3d/layers/i3s/I3SViewportQueries.js\";\nimport { FadeDirection as F } from \"../../../views/3d/layers/support/I3SLayerView.js\";\nimport { toBoundingRect as O } from \"../../../views/3d/support/extentUtils.js\";\nimport { ClientType as P, maxDownloadSlots as U } from \"../../../views/3d/support/index.js\";\nimport { extractSafeScaleBounds as M, scaleBoundsPredicate as q } from \"../../../views/support/layerViewUtils.js\";\nimport { noBudget as G } from \"../../../views/support/Scheduler.js\";\nconst j = \"esri.layers.graphics.controllers.I3SOnDemandController\",\n  Q = s.getLogger(j),\n  T = 100,\n  E = 2,\n  H = 1e4,\n  R = 1e-4,\n  k = 1.2,\n  B = 500,\n  z = 1.5;\nlet K = class extends o(t) {\n  get isMeshPyramid() {\n    return \"mesh-pyramids\" === this.layer.profile || \"MeshPyramid\" === this.layer.store?.lodType;\n  }\n  get isGraphics3D() {\n    return \"points\" === this.layer.profile;\n  }\n  get useMaximumNumberOfFeatures() {\n    return !this.isMeshPyramid && (r(this.layer.priority) || \"High\" === this.layer.priority);\n  }\n  get indexStreamController() {\n    const e = this.layerView.view.resourceController.createStreamDataRequester(P.I3S_INDEX);\n    return new L(e, this.layer.apiKey);\n  }\n  get dataStreamController() {\n    const e = this.layerView.view.resourceController.createStreamDataRequester(P.I3S_DATA);\n    return new L(e, this.layer.apiKey);\n  }\n  get crsVertex() {\n    return S(this.layer);\n  }\n  get crsIndex() {\n    return I(this.layer);\n  }\n  get layer() {\n    return this.layerView.i3slayer;\n  }\n  get running() {\n    return this.updating;\n  }\n  get rootNodeVisible() {\n    if (a(this._index)) {\n      const e = this._index.rootNode;\n      if (a(e)) return this._updateViewData(), this._index.isNodeVisible(e.index);\n    }\n    return !0;\n  }\n  get index() {\n    return this._index;\n  }\n  constructor(e) {\n    super(e), this.screenSizeFactor = 0, this.featureTarget = 5e4, this.fixedFeatureTarget = !1, this.updating = !0, this.updatingProgress = 1, this.leavesReached = !1, this.scaleVisibilityEnabled = !0, this._featureLOD = 1, this._stableFeatureLOD = !1, this._isIdle = !1, this._cameraDirty = !0, this._invisibleDirty = !1, this._idleStateCallbacks = null, this._newLoadingNodes = new d({\n      deallocator: null\n    }), this._loadedNodeScales = new Map(), this._modificationsNodeFilteringArray = new d(), this._downloadingCount = 0, this._loadingNodes = new Map(), this._updatingNodes = new Map(), this._progressMaxNumNodes = 1, this._requiredAttributes = new Array(), this._requiredAttributesDirty = !0, this._updatesDisabled = !1, this.disableIDBCache = !1, this._disableMemCache = !1, this._restartNodeLoading = !1, this._fields = null, this._attributeStorageInfo = null, this._handles = new i(), this._idleQueue = new x(), this._elevationUpdateNodes = new d({\n      deallocator: null\n    }), this._errorCount = 0;\n  }\n  initialize() {\n    const {\n      layerView: e,\n      layer: t\n    } = this;\n    this._disableMemCache = !e.loadCachedGPUData || !e.addCachedGPUData, this._lodHandling = new v(e), this._defaultGeometrySchema = t.store.defaultGeometrySchema, this.disableIDBCache = has(\"disable-feature:idb-cache\"), \"fields\" in t && (this._fields = t.fields, this._attributeStorageInfo = t.attributeStorageInfo), this.addResolvingPromise(Promise.all([t.indexInfo, t.when(), e.when()]).then(_ref => {\n      let [i] = _ref;\n      if (this.destroyed || !e || e.destroyed || !i) return;\n      const {\n          view: s\n        } = e,\n        {\n          resourceController: r\n        } = s;\n      this._setClippingArea(s.clippingArea), this.addHandles([h(() => s?.pointsOfInterest?.focus?.renderLocation, e => this._pointOfInterestChanged(e), l), h(() => r.memoryController.memoryFactor, () => this._setCameraDirty(), u), h(() => e.suspended, e => {\n        const t = e ? () => this._updateViewData() : () => this._updateIdleState(!0),\n          i = e ? () => {} : () => this._updateIdleState(!1);\n        !e && a(this._index) && this._index.invalidateAllElevationRanges(), this._idleStateCallbacks ? (e && this.cancelNodeLoading(), this.restartNodeLoading(), this._idleStateCallbacks.idleBegin = t, this._idleStateCallbacks.idleEnd = i) : this._idleStateCallbacks = r.scheduler.registerIdleStateCallbacks(t, i);\n      }, l), b(e.view.resourceController.scheduler, this), h(() => e.uncompressedTextureDownsamplingEnabled, () => this.restartNodeLoading()), h(() => [this.featureTarget, this.fixedFeatureTarget], () => {\n        this._setCameraDirty(), this._stableFeatureLOD = !1;\n      }), h(() => s.state?.contentCamera, () => this._setCameraDirty()), h(() => t.elevationInfo, e => this._elevationInfoChanged(e)), h(() => t.effectiveScaleRange, () => this._scaleBoundsChanged()), h(() => e.lodFactor, () => this._setCameraDirty()), h(() => e.availableFields, () => this._requiredFieldsChange()), h(() => e.holeFilling, e => a(this._index) && (this._index.holeFilling = e))]), this._updateScaleHandles(), this._viewportQueries = new A(this.crsIndex, s.renderCoordsHelper, s.state.contentCamera, !s.state.fixedContentCamera || this.isGraphics3D, this._clippingArea, this.isMeshPyramid ? s.basemapTerrain : s.elevationProvider, f(s.viewingMode), this.layer.elevationInfo, {\n        progressiveLoadFactor: this._getProgressiveLoadFactor(),\n        screenspaceErrorBias: this._lod,\n        angleDependentLoD: this._lod < .5\n      }), this._index = new N(t, i, this.indexStreamController, this._viewportQueries, Q, e.holeFilling, t => e.isNodeLoaded(t), t => e.isNodeReloading(t), e => this._shouldLoadNode(e), e => this._enableFromGPUCache(e, w.Leaf), e => this._needsUpdate(e), () => !this.indexStreamController.busy, t => e.computeVisibilityObb ? e.computeVisibilityObb(t) : null, e?.computeNodeFiltering ? t => e.computeNodeFiltering(t) : void 0), this._index.updateElevationInfo(this.layer.elevationInfo, this.isMeshPyramid), this._index.imModificationsChanged(!!e.hasModifications), this._startNodeLoading();\n    })), this._tmpPoint = y(0, 0, 0, this.crsIndex);\n  }\n  updateNodeModificationStatus(e) {\n    const t = this._index,\n      i = this.layerView;\n    a(t) && i?.updateNodeModificationStatus && (this._modificationsNodeFilteringArray.clear(), e.forAll(e => {\n      const i = t.getNode(e);\n      a(i) && this._modificationsNodeFilteringArray.push(i);\n    }), i.updateNodeModificationStatus(this._modificationsNodeFilteringArray), this._invisibleDirty = !0);\n  }\n  destroy() {\n    this.cancelNodeLoading(), this._idleStateCallbacks && (this._isIdle = !1, this._idleStateCallbacks.remove(), this._idleStateCallbacks = null), this._handles.destroy(), this._nodeLoader = null, W.prune(), a(X) && (X.hide(), X = null);\n  }\n  _getRequiredAttributes() {\n    if (null == this._attributeStorageInfo || !this._fields || !this.layerView.availableFields) return [];\n    const e = this._attributeStorageInfo,\n      t = this._fields,\n      i = this.layer.objectIdField;\n    return this.layerView.availableFields.map(i => {\n      const s = J(e, i),\n        r = J(t, i);\n      return s >= 0 && r >= 0 ? {\n        index: s,\n        name: t[r].name,\n        field: t[r],\n        attributeStorageInfo: e[s]\n      } : null;\n    }).filter(e => null != e && e.name !== i);\n  }\n  _requiredFieldsChange() {\n    const e = this._getRequiredAttributes();\n    $(this._requiredAttributes, e) || (this._requiredAttributes = e, this._requiredAttributesDirty = !1, this.restartNodeLoading());\n  }\n  requestUpdate() {\n    this._requiredAttributesDirty = !0, this.restartNodeLoading();\n  }\n  _setClippingArea(e) {\n    const t = g();\n    O(e, t, this.layerView.view.renderSpatialReference) ? this._clippingArea = t : this._clippingArea = null;\n  }\n  _pointOfInterestChanged(e) {\n    a(this._viewportQueries) && (this._viewportQueries.setPointOfInterest(e), a(this._index) && (this._index.progressiveLoadPenalty = Y.distancePenalty * this._viewportQueries.distCameraToPOI(), this._index.requestUpdate()));\n  }\n  updateClippingArea(e) {\n    this._setClippingArea(e), a(this._viewportQueries) && a(this._index) && (this._viewportQueries.updateClippingArea(this._clippingArea), this._index.invalidateVisibilityCache()), this._setCameraDirty();\n  }\n  _setCameraDirty() {\n    this._cameraDirty = !0, this._lodHandling.setLodGlobalDirty(), this._evaluateUpdating();\n  }\n  updateElevationChanged(e, t) {\n    const i = this._index;\n    if (r(i) || r(i.rootNode) || r(t)) return null;\n    this.crsIndex.equals(t) || (p(e, t, Z, this.crsIndex), e = Z);\n    const s = this._elevationUpdateNodes;\n    return s.clear(), V(e, i.rootNode, i, e => s.push(e.index)), s.length && (s.forAll(e => i.updateElevationChanged(e)), this._setCameraDirty()), s;\n  }\n  getParentIndex(e) {\n    return a(this._index) ? this._index.getParentIndex(e) : -1;\n  }\n  removeAllGeometryObbs() {\n    a(this._index) && this._index.removeAllGeometryObbs();\n  }\n  getRenderMbs(e) {\n    return a(this._viewportQueries) ? this._viewportQueries.getRenderMbs(e) : null;\n  }\n  _elevationInfoChanged(e) {\n    r(this._index) || (this._index.updateElevationInfo(e, this.isMeshPyramid), this._setCameraDirty());\n  }\n  _updateScaleHandles() {\n    const e = \"scale-bounds\";\n    this._handles.remove(e), this._areScaleBoundsActive && this._handles.add(this.layerView.view.basemapTerrain.on(\"scale-change\", e => this._scaleUpdateHandler(e)), e);\n  }\n  _scaleBoundsChanged() {\n    this._areScaleBoundsActive || this._loadedNodeScales.clear(), this._updateScaleHandles(), this._setCameraDirty();\n  }\n  _scaleUpdateHandler(e) {\n    this._updateScaleInBoundingRect(e.extent, e.spatialReference), this._setCameraDirty();\n  }\n  _updateScaleInBoundingRect(e, t) {\n    const i = this._index;\n    if (r(i)) return;\n    const s = i.rootNode;\n    !r(s) && p(e, t, Z, this.crsIndex) && this._loadedNodeScales.forEach((e, t) => {\n      const s = i.getNode(t);\n      a(s) && m(Z, s.mbs) && this._loadedNodeScales.set(t, this._computeScale(s));\n    });\n  }\n  restartNodeLoading() {\n    this._restartNodeLoading = !0, this.cancelNodeLoading(), this._evaluateUpdating();\n  }\n  schedule(e, t) {\n    return this._idleQueue.push(e, t);\n  }\n  reschedule(e, t) {\n    return this._idleQueue.unshift(e, t);\n  }\n  get _isIntegratedMesh() {\n    return \"integrated-mesh\" === this.layer.type;\n  }\n  get _areScaleBoundsActive() {\n    const {\n      minScale: e,\n      maxScale: t\n    } = M(this.layer);\n    return this.scaleVisibilityEnabled && (e > 0 || t > 0);\n  }\n  get unloadedMemoryEstimate() {\n    return r(this._index) || this.layerView.suspended ? 0 : this._index.unloadedMemoryEstimate * this._lodDropFactor;\n  }\n  get indexDepth() {\n    return a(this._index) ? this._index.maxLevel : 0;\n  }\n  set disableMemCache(e) {\n    this.layerView.loadCachedGPUData && this.layerView.addCachedGPUData || (this._disableMemCache = !0), this._disableMemCache = e;\n  }\n  runTask(e, t) {\n    return this.layerView.suspended ? (this._updateViewData(), this._evaluateUpdating(), -1 / 0) : !this.layerView.visible || r(this._index) ? -1 / 0 : (this._processWithErrorLogging(e, t), this._index.maxPriority);\n  }\n  _processWithErrorLogging(e, t) {\n    try {\n      this._process(e, t);\n    } catch (i) {\n      this._errorCount < 50 ? Q.error(\"Error during processing: \" + i) : 50 === this._errorCount && Q.error(\"Too many errors for this layer. Further errors will not be displayed.\"), this._errorCount++;\n    }\n  }\n  _process(e, t) {\n    this._restartNodeLoading && this._startNodeLoading(), null == this._nodeLoader || r(this._index) || (this._updateViewData(), this._invisibleDirty && this._removeInvisibleNodes(e) && (this._invisibleDirty = !1), this._isIntegratedMesh && (e.enabled = !1), e.run(() => this._processIndex(e)), this._updateFeatureLOD(), e.run(() => this._processCache(e)), this._isIntegratedMesh && (e.enabled = !0), e.run(() => this._processNodes(e, t)), this._idleQueue.runTask(e), e.run(() => this._prefetchIndex()), t.numIndexLoading += this._index.indexLoading, t.numNodesLoading += this._downloadingCount, e.run(() => this._lodHandling.lodGlobalHandling(e)), this._evaluateUpdating());\n  }\n  _processIndex(e) {\n    if (r(this._index)) return !1;\n    if (this._index.dirty) {\n      this._newLoadingNodes.clear(), this._index.update(Array.from(this._loadingNodes.keys()), e, e => this.updateNodeModificationStatus(e)), this._disableMemCache || (this._newLoadingNodes.pushArray(this._index.updates.add.data, this._index.updates.add.length), this._newLoadingNodes.pushArray(this._index.updates.missing.data, this._index.updates.missing.length));\n      const t = this._index.featureEstimate.leavesReached;\n      this._index.isLoading || t === this._get(\"leavesReached\") || this._set(\"leavesReached\", t);\n    }\n    return this._index.load();\n  }\n  _prefetchIndex() {\n    return !(r(this._index) || this._loadingNodes.size > 0 || this._index.updates.add.length > 0) && this._index.prefetch();\n  }\n  _updateFeatureLOD() {\n    if (!this.useMaximumNumberOfFeatures || r(this._index) || r(this._viewportQueries)) return;\n    const e = !this._index.isLoading,\n      t = this.featureTarget * this._baseLOD,\n      i = this._index.featureEstimate;\n    if (i.estimate = i.estimate || t / 2, this._index.indexMissing > B) {\n      if (this._featureLOD <= R) return;\n      this._featureLOD /= z, this._stableFeatureLOD = !1;\n    } else if (e && i.estimate < t) {\n      if (i.leavesReached || this._featureLOD >= H || this._stableFeatureLOD) return;\n      const e = Math.min(10, Math.max(t / i.estimate, 1.001));\n      this._featureLOD *= e;\n      const s = this._lod,\n        r = this._index.checkFeatureTarget(t, s);\n      r !== s && (this._featureLOD = r / this._baseLOD, this._stableFeatureLOD = !0);\n    } else {\n      if (!(i.estimate > t * k || e && i.estimate > t)) return;\n      if (this._featureLOD <= R) return;\n      this._featureLOD /= 1 + .25 * (i.estimate / t - 1), this._stableFeatureLOD = !1;\n    }\n    this._featureLOD = Math.min(H, Math.max(R, this._featureLOD)), this._viewportQueries.updateScreenSpaceErrorBias(this._lod), this._index.requestUpdate();\n  }\n  _processCache(e) {\n    const t = this._index;\n    if (r(t)) return !1;\n    for (; this._newLoadingNodes.length > 0 && !e.done;) {\n      const i = this._newLoadingNodes.pop();\n      for (let s = t.getParent(i); a(s) && !this.layerView.isNodeLoaded(s.index) && this._isNodeInScaleBounds(s); s = t.getParent(s.index)) if (this._enableFromGPUCache(s, w.Hole)) {\n        e.madeProgress();\n        break;\n      }\n    }\n    return e.hasProgressed;\n  }\n  _processNodes(e, t) {\n    if (r(this._index)) return !1;\n    let i = (this._isIdle ? T : E) - this._loadingNodes.size;\n    const s = this._index.updates;\n    for (s.cancel.forEach(this._cancelNode, this), s.cancel = []; s.remove.length > 0 && !e.done;) this.layerView.removeNode(s.remove.pop()), e.madeProgress();\n    for (; s.update.length > 0 && !e.done;) {\n      const t = this._index.getNode(s.update.pop());\n      a(t) && (this._updateLoadedNode(t), e.madeProgress());\n    }\n    for (; s.add.length > 0 && !e.done && i > 0;) {\n      --i;\n      const a = this._index.getNode(s.add.back());\n      if (r(a) || a.cacheState !== C.Cached && !this._hasNodeLoadToken(t)) break;\n      s.add.pop(), this._loadNode(a), e.madeProgress();\n    }\n    return e.hasProgressed;\n  }\n  _cancelAllNodes() {\n    this._loadingNodes.forEach(e => e.abort()), this._loadingNodes.clear(), this._updatingNodes.forEach(e => e.abort()), this._updatingNodes.clear();\n  }\n  _cancelNode(e) {\n    const t = this._loadingNodes.get(e);\n    t && (t.abort(), this._loadingNodes.delete(e));\n  }\n  _hasNodeLoadToken(e) {\n    return !(!this._isIdle && e.numNodesLoading + this._loadingNodes.size >= E) && this._downloadingCount < U && !this.dataStreamController.busy;\n  }\n  _evaluateUpdating() {\n    let e = !1,\n      t = 0;\n    if (this.layerView.suspended) e = this._cameraDirty, t = e ? 0 : 1;else {\n      const i = (a(this._index) ? this._index.indexMissing : 0) + 3 * (a(this._index) ? this._index.updates.add.length : 0) + 2 * this._loadingNodes.size;\n      e = !!(i > 0 || this._updatingNodes.size > 0 || this._restartNodeLoading || this._cameraDirty || this._idleQueue.running || this._lodHandling && this._lodHandling.requiresLODGlobalHandling || a(this._index) && this._index.isPrefetching), 0 === i && (this._progressMaxNumNodes = 1), this._progressMaxNumNodes = Math.max(i, this._progressMaxNumNodes), t = 1 - i / this._progressMaxNumNodes;\n    }\n    this.updating = e, this.updatingProgress = t;\n  }\n  _updateViewData() {\n    if (!this._cameraDirty || r(this._index) || r(this._viewportQueries)) return;\n    const e = this.layerView.view,\n      {\n        contentCamera: t,\n        fixedContentCamera: i\n      } = e.state;\n    this.screenSizeFactor = 1 / (t.perScreenPixelRatio / 2), this._viewportQueries.updateCamera(t, !i || this.isGraphics3D), this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation), this._viewportQueries.updateScreenSpaceErrorBias(this._lod), this._index.invalidateVisibilityCache(), this._index.progressiveLoadPenalty = Y.distancePenalty * this._viewportQueries.distCameraToPOI(), this._index.requestUpdate(), this._stableFeatureLOD = !1, this._invisibleDirty = !0, this._cameraDirty = !1, this.notifyChange(\"rootNodeVisible\");\n  }\n  _getProgressiveLoadFactor() {\n    return this.layerView.view.resourceController.memoryController.memoryFactor < 1 ? 1 : this.layerView.progressiveLoadFactor;\n  }\n  get _lod() {\n    return this._featureLOD * this._baseLOD;\n  }\n  get _baseLOD() {\n    const e = this.layerView.lodFactor,\n      t = this.layerView.view.resourceController.memoryController.memoryFactor;\n    return this.fixedFeatureTarget ? 1 : (e > 0 ? e : 1) * t;\n  }\n  get _lodDropFactor() {\n    if (this.fixedFeatureTarget) return 1;\n    const e = this.layerView.view.resourceController.memoryController;\n    return (Math.min(e.memoryFactor, .5) - e.minQuality) / (.5 - e.minQuality);\n  }\n  isGeometryVisible(e) {\n    return a(this._index) && this._index.isGeometryVisible(e.index);\n  }\n  updateVisibility(e) {\n    a(this._index) && this._index.invalidateNodeVisibilityCache(e);\n  }\n  invalidateGeometryVisibility(e) {\n    a(this._index) && this._index.invalidateGeometryVisibility(e);\n  }\n  invalidateVisibilityObbs() {\n    a(this._index) && this._index.invalidateVisibilityObbs();\n  }\n  modificationsChanged() {\n    a(this._index) && this._index.imModificationsChanged(!!this.layerView.hasModifications), this._invisibleDirty = !0;\n  }\n  _shouldLoadNode(e) {\n    return !(!this._lodHandling.shouldLoadNode(e) || this._shouldDropNode(e)) && !(r(this._index) || !this._index.isGeometryVisible(e.index)) && this._isNodeInScaleBounds(e);\n  }\n  _shouldDropNode(e) {\n    if (r(this._viewportQueries)) return !1;\n    const t = this._lodDropFactor;\n    if (t >= 1 || !this._lodHandling.hasNoVisibleChildren(e)) return !1;\n    return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e)) - this._viewportQueries.minDistance > (this._viewportQueries.maxDistance - this._viewportQueries.minDistance) * t;\n  }\n  _startNodeLoading() {\n    this._restartNodeLoading = !1;\n    const e = this._index;\n    if (this._updatesDisabled || r(e) || r(this._viewportQueries)) return;\n    this._updateViewData(), this._requiredAttributesDirty && (this._requiredAttributes = this._getRequiredAttributes(), this._requiredAttributesDirty = !1);\n    const t = {\n      textureEncodings: this.layerView.supportedTextureEncodings,\n      uncompressedTextureDownsamplingEnabled: this.layerView.uncompressedTextureDownsamplingEnabled,\n      textureUsageMask: this.layerView.rendererTextureUsage,\n      loadFeatureData: this.useMaximumNumberOfFeatures\n    };\n    this._nodeLoader = new D(this.layer, this.dataStreamController, Q, this._defaultGeometrySchema, this._requiredAttributes, t), e.requestUpdate(), this._lodHandling.startNodeLoading(e => this._isNodeInScaleBounds(e), (e, t) => this._removeNodes(e, t, ee.fadeout), e, {\n      maxLodLevel: this._viewportQueries.maxLodLevel\n    }), this._evaluateUpdating();\n  }\n  isNodeLoading() {\n    return null != this._nodeLoader && null != this._index;\n  }\n  cancelNodeLoading() {\n    this.isNodeLoading() && (this.indexStreamController.cancelAll(), this.dataStreamController.cancelAll(), this._idleQueue.cancelAll(), this._cancelAllNodes(), this._nodeLoader = null, this._evaluateUpdating());\n  }\n  _removeInvisibleNodes(e) {\n    const t = this._index;\n    if (r(t) || r(this._viewportQueries)) return !1;\n    W.clear(), this.layerView.getLoadedNodeIndices(W);\n    const i = 0 === this._viewportQueries.maxDistance,\n      s = i ? () => !1 : e => this._shouldDropNode(e);\n    return W.filterInPlace(e => {\n      const i = t.getNode(e);\n      return r(i) || !t.isGeometryVisible(e) || s(i) || !this._isNodeInScaleBounds(i);\n    }), W.length > 0 && this._lodHandling.setLodGlobalDirty(), this._removeNodes(W, e, ee.pop), !(i && this._lodDropFactor < 1) && (0 === W.length || (W.clear(), !1));\n  }\n  markNodeToRemove(e) {\n    W.push(e);\n  }\n  removeMarkedNodes() {\n    this._removeNodes(W, G, ee.pop);\n  }\n  _removeNodes(e, t, i) {\n    const s = e.length;\n    if (0 !== s && !t.done) {\n      for (a(this._index) && this._index.requestUpdate(); e.length > 0 && !t.done;) {\n        const s = e.pop(),\n          r = this._index;\n        i === ee.fadeout && this.layerView.nodeFadeoutEnabled && a(r) && r.isGeometryVisible(s) ? this.layerView.fadeNode(s, F.FadeOut, !0) : this.layerView.removeNode(s), t.madeProgress();\n      }\n      if (this._loadedNodeScales.size > 0) for (let t = e.length; t < s; t++) {\n        const i = e.data[t];\n        this._loadedNodeScales.delete(i);\n      }\n    }\n  }\n  _needsUpdate(e) {\n    if (!e.resources.hasFeatureData || this._updatingNodes.has(e.index)) return !1;\n    const t = this.layerView.getLoadedAttributes(e.index);\n    return null != t && t !== this._requiredAttributes;\n  }\n  _updateLoadedNode(e) {\n    const t = new AbortController();\n    this._updatingNodes.set(e.index, t);\n    ($(this.layerView.getLoadedAttributes(e.index), this._requiredAttributes) ? Promise.resolve(this.layerView.getAttributeData(e.index)) : this._nodeLoader.loadAttributes(e, this._requiredAttributes, t.signal)).then(i => this.schedule(() => this.layerView.updateAttributes(e.index, {\n      loadedAttributes: this._requiredAttributes,\n      attributeData: i\n    }, t.signal), t.signal)).catch(i => {\n      if (!n(i)) return this.layerView.updateAttributes(e.index, {\n        loadedAttributes: this._requiredAttributes,\n        attributeData: {}\n      }, t.signal);\n    }).catch(() => {}).then(() => {\n      this._updatingNodes.delete(e.index), this._evaluateUpdating();\n    }), this._evaluateUpdating();\n  }\n  _loadNode(e) {\n    if (this._loadingNodes.has(e.index)) return void Q.error(\"already loading node \" + e.index);\n    const t = new AbortController();\n    this._loadingNodes.set(e.index, t), this._evaluateUpdating(), this._loadAndAddNode(e, t.signal).then(i => {\n      i && a(this._index) && this._loadingNodes.get(e.index) === t && (this._loadingNodes.delete(e.index), this._index.requestUpdate());\n    }).catch(e => {\n      if (!n(e)) throw e;\n    }).finally(() => {\n      this._loadingNodes.get(e.index) === t && this._loadingNodes.delete(e.index), this._evaluateUpdating();\n    });\n  }\n  _loadAndAddNode(e, t) {\n    return e.cacheState === C.Uncached ? this._loadUncached(e, t).then(() => !1) : this._loadCached(e, t).then(t => !t && (e.cacheState = C.Uncached, !0)).catch(t => !n(t) && (e.cacheState = C.Uncached, !0));\n  }\n  _enableFromGPUCache(e, t) {\n    if (this._disableMemCache || r(this._index)) return !1;\n    if (t === w.Hole && !this._index.useNodeAsHole(e.index)) return !0;\n    const i = this._loadCachedGPUData(e);\n    return !!i && (this.layerView.addCachedGPUData(e, i, t), this._nodeAdded(), !0);\n  }\n  _loadCachedGPUData(e) {\n    const t = this.layerView.loadCachedGPUData(e);\n    return a(t) && a(t.attributeInfo) && $(t.attributeInfo.loadedAttributes, this._requiredAttributes) ? t : (this.layerView.deleteCachedGPUData(t), null);\n  }\n  _nodeAdded() {\n    a(this._index) && this._index.requestUpdate(), this._lodHandling.setLodGlobalDirty(), this._evaluateUpdating();\n  }\n  updateLoadStatus(e, t) {\n    const i = this._index;\n    a(i) && i.updateChildrenLoaded(e, t ? 1 : -1);\n  }\n  _loadCached(e, t) {\n    if (this._enableFromGPUCache(e, w.Leaf)) return Promise.resolve(!0);\n    const i = this.layerView;\n    return !this.disableIDBCache && i.loadCachedNodeData && i.addCachedNodeData ? this.schedule(() => i.loadCachedNodeData(e, t, (t, i) => this._nodeLoader.loadTextures(e, t, i)), t).then(s => {\n      if (r(s)) return !1;\n      const a = this._requiredAttributes;\n      return this.reschedule(() => this._nodeLoader.loadAttributes(e, a, t), t).then(r => this.reschedule(() => i.addCachedNodeData(e, s, {\n        loadedAttributes: a,\n        attributeData: r\n      }, t), t)).then(() => (this._nodeAdded(), !0));\n    }) : Promise.resolve(!1);\n  }\n  _loadUncached(e, t) {\n    return this._downloadingCount++, this._nodeLoader.loadNodeData(e, t).catch(e => {\n      throw this._downloadingCount--, e;\n    }).then(i => (this._downloadingCount--, this.schedule(() => this.layerView.addNode(e, i, t), t))).then(() => {\n      this._nodeAdded(), e.cacheState = C.Cached;\n    }).catch(t => {\n      if (!n(t)) throw Q.error(\"#loadNodeData()\", this.layer, `Failed to load node '${e.id}'`, t), e.failed = !0, a(this._index) && this._index.requestUpdate(), t;\n    });\n  }\n  _updateIdleState(e) {\n    e !== this._isIdle && (this._isIdle = e, this._evaluateUpdating(), e && this._index && a(this._index) && this._index.resetFailedNodes());\n  }\n  _getScale(e) {\n    if (this._loadedNodeScales.has(e.index)) return this._loadedNodeScales.get(e.index);\n    const t = this._computeScale(e);\n    return this.layerView.isNodeLoaded(e.index) && this._loadedNodeScales.set(e.index, t), t;\n  }\n  _computeScale(e) {\n    this._tmpPoint.x = e.mbs[0], this._tmpPoint.y = e.mbs[1], this._tmpPoint.z = e.mbs[2];\n    const t = e.mbs[3];\n    return this.layerView.view.basemapTerrain.getSphereScale(this._tmpPoint, t);\n  }\n  _isNodeInScaleBounds(e) {\n    if (!this._areScaleBoundsActive) return !0;\n    const t = this._getScale(e),\n      {\n        minScale: i,\n        maxScale: s\n      } = M(this.layer);\n    return q(t, i, s);\n  }\n  updateStats(e) {\n    e.index = a(this._index) ? this._index.size : 0, this.isGraphics3D && (e.detail = this._featureLOD, e.target = this.featureTarget * this._baseLOD), a(this._index) && this._index.updateStats(e);\n  }\n  get test() {\n    const e = this;\n    return {\n      index: this._index,\n      set disableUpdates(t) {\n        e._updatesDisabled = t, t ? e.cancelNodeLoading() : e.requestUpdate();\n      },\n      set disableIDBCache(t) {\n        e.disableIDBCache = t;\n      },\n      set ignoreServiceObb(t) {\n        a(e._index) && (e._index.ignoreServiceObb = t);\n      },\n      shouldLoadNode: t => e._shouldLoadNode(t)\n    };\n  }\n  notifyLODUpdate() {\n    this._lodHandling.setLodGlobalDirty(), this._evaluateUpdating(), a(this._index) && this._index.requestUpdate();\n  }\n  geometryFilterChanged(e) {\n    const t = this._index;\n    a(t) && t.layerFilterChanged(e), this._setCameraDirty();\n  }\n};\ne([_({\n  readOnly: !0\n})], K.prototype, \"isMeshPyramid\", null), e([_({\n  readOnly: !0\n})], K.prototype, \"isGraphics3D\", null), e([_({\n  readOnly: !0\n})], K.prototype, \"useMaximumNumberOfFeatures\", null), e([_({\n  readOnly: !0\n})], K.prototype, \"indexStreamController\", null), e([_({\n  readOnly: !0\n})], K.prototype, \"dataStreamController\", null), e([_({\n  readOnly: !0\n})], K.prototype, \"crsVertex\", null), e([_({\n  readOnly: !0\n})], K.prototype, \"crsIndex\", null), e([_()], K.prototype, \"screenSizeFactor\", void 0), e([_()], K.prototype, \"featureTarget\", void 0), e([_()], K.prototype, \"fixedFeatureTarget\", void 0), e([_()], K.prototype, \"layerView\", void 0), e([_()], K.prototype, \"layer\", null), e([_()], K.prototype, \"updating\", void 0), e([_({\n  readOnly: !0\n})], K.prototype, \"running\", null), e([_()], K.prototype, \"updatingProgress\", void 0), e([_({\n  readOnly: !0\n})], K.prototype, \"leavesReached\", void 0), e([_({\n  constructOnly: !0\n})], K.prototype, \"scaleVisibilityEnabled\", void 0), e([_({\n  readOnly: !0,\n  dependsOn: []\n})], K.prototype, \"rootNodeVisible\", null), K = e([c(j)], K);\nconst W = new d({\n  deallocator: null\n});\nlet X;\nfunction $(e, t) {\n  return a(e) && e.length === t.length && e.every(e => J(t, e.name) >= 0);\n}\nfunction J(e, t) {\n  const i = t.toLowerCase();\n  for (let s = 0; s < e.length; s++) if (e[s].name.toLowerCase() === i) return s;\n  return -1;\n}\nconst Y = {\n    factorIM: .2,\n    factor3dObject: .05,\n    distancePenalty: 10\n  },\n  Z = g();\nvar ee;\n!function (e) {\n  e[e.pop = 0] = \"pop\", e[e.fadeout = 1] = \"fadeout\";\n}(ee || (ee = {}));\nconst te = K;\nexport { te as default };","map":{"version":3,"names":["_","e","t","i","has","s","isNone","r","isSome","a","d","EsriPromiseMixin","o","isAbortError","n","watch","h","initial","l","sync","u","property","subclass","c","projectBoundingRect","p","create","g","intersectsSphere","m","makeDehydratedPoint","y","PromiseQueue","x","viewingModeFromString","f","addCallback","b","I3SIndex","N","v","NodeState","w","CacheState","C","D","I3SStreamDataController","L","getVertexCrs","S","getIndexCrs","I","findIntersectingNodes","V","A","FadeDirection","F","toBoundingRect","O","ClientType","P","maxDownloadSlots","U","extractSafeScaleBounds","M","scaleBoundsPredicate","q","noBudget","G","j","Q","getLogger","T","E","H","R","k","B","z","K","isMeshPyramid","layer","profile","store","lodType","isGraphics3D","useMaximumNumberOfFeatures","priority","indexStreamController","layerView","view","resourceController","createStreamDataRequester","I3S_INDEX","apiKey","dataStreamController","I3S_DATA","crsVertex","crsIndex","i3slayer","running","updating","rootNodeVisible","_index","rootNode","_updateViewData","isNodeVisible","index","constructor","screenSizeFactor","featureTarget","fixedFeatureTarget","updatingProgress","leavesReached","scaleVisibilityEnabled","_featureLOD","_stableFeatureLOD","_isIdle","_cameraDirty","_invisibleDirty","_idleStateCallbacks","_newLoadingNodes","deallocator","_loadedNodeScales","Map","_modificationsNodeFilteringArray","_downloadingCount","_loadingNodes","_updatingNodes","_progressMaxNumNodes","_requiredAttributes","Array","_requiredAttributesDirty","_updatesDisabled","disableIDBCache","_disableMemCache","_restartNodeLoading","_fields","_attributeStorageInfo","_handles","_idleQueue","_elevationUpdateNodes","_errorCount","initialize","loadCachedGPUData","addCachedGPUData","_lodHandling","_defaultGeometrySchema","defaultGeometrySchema","fields","attributeStorageInfo","addResolvingPromise","Promise","all","indexInfo","when","then","_ref","destroyed","_setClippingArea","clippingArea","addHandles","pointsOfInterest","focus","renderLocation","_pointOfInterestChanged","memoryController","memoryFactor","_setCameraDirty","suspended","_updateIdleState","invalidateAllElevationRanges","cancelNodeLoading","restartNodeLoading","idleBegin","idleEnd","scheduler","registerIdleStateCallbacks","uncompressedTextureDownsamplingEnabled","state","contentCamera","elevationInfo","_elevationInfoChanged","effectiveScaleRange","_scaleBoundsChanged","lodFactor","availableFields","_requiredFieldsChange","holeFilling","_updateScaleHandles","_viewportQueries","renderCoordsHelper","fixedContentCamera","_clippingArea","basemapTerrain","elevationProvider","viewingMode","progressiveLoadFactor","_getProgressiveLoadFactor","screenspaceErrorBias","_lod","angleDependentLoD","isNodeLoaded","isNodeReloading","_shouldLoadNode","_enableFromGPUCache","Leaf","_needsUpdate","busy","computeVisibilityObb","computeNodeFiltering","updateElevationInfo","imModificationsChanged","hasModifications","_startNodeLoading","_tmpPoint","updateNodeModificationStatus","clear","forAll","getNode","push","destroy","remove","_nodeLoader","W","prune","X","hide","_getRequiredAttributes","objectIdField","map","J","name","field","filter","$","requestUpdate","renderSpatialReference","setPointOfInterest","progressiveLoadPenalty","Y","distancePenalty","distCameraToPOI","updateClippingArea","invalidateVisibilityCache","setLodGlobalDirty","_evaluateUpdating","updateElevationChanged","equals","Z","length","getParentIndex","removeAllGeometryObbs","getRenderMbs","_areScaleBoundsActive","add","on","_scaleUpdateHandler","_updateScaleInBoundingRect","extent","spatialReference","forEach","mbs","set","_computeScale","schedule","reschedule","unshift","_isIntegratedMesh","type","minScale","maxScale","unloadedMemoryEstimate","_lodDropFactor","indexDepth","maxLevel","disableMemCache","runTask","visible","_processWithErrorLogging","maxPriority","_process","error","_removeInvisibleNodes","enabled","run","_processIndex","_updateFeatureLOD","_processCache","_processNodes","_prefetchIndex","numIndexLoading","indexLoading","numNodesLoading","lodGlobalHandling","dirty","update","from","keys","pushArray","updates","data","missing","featureEstimate","isLoading","_get","_set","load","size","prefetch","_baseLOD","estimate","indexMissing","Math","min","max","checkFeatureTarget","updateScreenSpaceErrorBias","done","pop","getParent","_isNodeInScaleBounds","Hole","madeProgress","hasProgressed","cancel","_cancelNode","removeNode","_updateLoadedNode","back","cacheState","Cached","_hasNodeLoadToken","_loadNode","_cancelAllNodes","abort","get","delete","requiresLODGlobalHandling","isPrefetching","perScreenPixelRatio","updateCamera","notifyChange","minQuality","isGeometryVisible","updateVisibility","invalidateNodeVisibilityCache","invalidateGeometryVisibility","invalidateVisibilityObbs","modificationsChanged","shouldLoadNode","_shouldDropNode","hasNoVisibleChildren","abs","calcCameraDistanceToCenter","minDistance","maxDistance","textureEncodings","supportedTextureEncodings","textureUsageMask","rendererTextureUsage","loadFeatureData","startNodeLoading","_removeNodes","ee","fadeout","maxLodLevel","isNodeLoading","cancelAll","getLoadedNodeIndices","filterInPlace","markNodeToRemove","removeMarkedNodes","nodeFadeoutEnabled","fadeNode","FadeOut","resources","hasFeatureData","getLoadedAttributes","AbortController","resolve","getAttributeData","loadAttributes","signal","updateAttributes","loadedAttributes","attributeData","catch","_loadAndAddNode","finally","Uncached","_loadUncached","_loadCached","useNodeAsHole","_loadCachedGPUData","_nodeAdded","attributeInfo","deleteCachedGPUData","updateLoadStatus","updateChildrenLoaded","loadCachedNodeData","addCachedNodeData","loadTextures","loadNodeData","addNode","id","failed","resetFailedNodes","_getScale","getSphereScale","updateStats","detail","target","test","disableUpdates","ignoreServiceObb","notifyLODUpdate","geometryFilterChanged","layerFilterChanged","readOnly","prototype","constructOnly","dependsOn","every","toLowerCase","factorIM","factor3dObject","te","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import i from\"../../../core/Handles.js\";import has from\"../../../core/has.js\";import s from\"../../../core/Logger.js\";import{isNone as r,isSome as a}from\"../../../core/maybe.js\";import d from\"../../../core/PooledArray.js\";import{EsriPromiseMixin as o}from\"../../../core/Promise.js\";import{isAbortError as n}from\"../../../core/promiseUtils.js\";import{watch as h,initial as l,sync as u}from\"../../../core/reactiveUtils.js\";import{property as _}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{projectBoundingRect as p}from\"../../../geometry/projection.js\";import{create as g,intersectsSphere as m}from\"../../../geometry/support/aaBoundingRect.js\";import{makeDehydratedPoint as y}from\"../dehydratedFeatures.js\";import{PromiseQueue as x}from\"../../support/PromiseQueue.js\";import{viewingModeFromString as f}from\"../../../views/ViewingMode.js\";import{addCallback as b}from\"../../../views/3d/layers/i3s/I3SFrameTask.js\";import{I3SIndex as N}from\"../../../views/3d/layers/i3s/I3SIndex.js\";import v from\"../../../views/3d/layers/i3s/I3SLodHandling.js\";import{NodeState as w,CacheState as C}from\"../../../views/3d/layers/i3s/I3SNode.js\";import D from\"../../../views/3d/layers/i3s/I3SNodeLoader.js\";import{I3SStreamDataController as L}from\"../../../views/3d/layers/i3s/I3SStreamDataController.js\";import{getVertexCrs as S,getIndexCrs as I,findIntersectingNodes as V}from\"../../../views/3d/layers/i3s/I3SUtil.js\";import A from\"../../../views/3d/layers/i3s/I3SViewportQueries.js\";import{FadeDirection as F}from\"../../../views/3d/layers/support/I3SLayerView.js\";import{toBoundingRect as O}from\"../../../views/3d/support/extentUtils.js\";import{ClientType as P,maxDownloadSlots as U}from\"../../../views/3d/support/index.js\";import{extractSafeScaleBounds as M,scaleBoundsPredicate as q}from\"../../../views/support/layerViewUtils.js\";import{noBudget as G}from\"../../../views/support/Scheduler.js\";const j=\"esri.layers.graphics.controllers.I3SOnDemandController\",Q=s.getLogger(j),T=100,E=2,H=1e4,R=1e-4,k=1.2,B=500,z=1.5;let K=class extends(o(t)){get isMeshPyramid(){return\"mesh-pyramids\"===this.layer.profile||\"MeshPyramid\"===this.layer.store?.lodType}get isGraphics3D(){return\"points\"===this.layer.profile}get useMaximumNumberOfFeatures(){return!this.isMeshPyramid&&(r(this.layer.priority)||\"High\"===this.layer.priority)}get indexStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(P.I3S_INDEX);return new L(e,this.layer.apiKey)}get dataStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(P.I3S_DATA);return new L(e,this.layer.apiKey)}get crsVertex(){return S(this.layer)}get crsIndex(){return I(this.layer)}get layer(){return this.layerView.i3slayer}get running(){return this.updating}get rootNodeVisible(){if(a(this._index)){const e=this._index.rootNode;if(a(e))return this._updateViewData(),this._index.isNodeVisible(e.index)}return!0}get index(){return this._index}constructor(e){super(e),this.screenSizeFactor=0,this.featureTarget=5e4,this.fixedFeatureTarget=!1,this.updating=!0,this.updatingProgress=1,this.leavesReached=!1,this.scaleVisibilityEnabled=!0,this._featureLOD=1,this._stableFeatureLOD=!1,this._isIdle=!1,this._cameraDirty=!0,this._invisibleDirty=!1,this._idleStateCallbacks=null,this._newLoadingNodes=new d({deallocator:null}),this._loadedNodeScales=new Map,this._modificationsNodeFilteringArray=new d,this._downloadingCount=0,this._loadingNodes=new Map,this._updatingNodes=new Map,this._progressMaxNumNodes=1,this._requiredAttributes=new Array,this._requiredAttributesDirty=!0,this._updatesDisabled=!1,this.disableIDBCache=!1,this._disableMemCache=!1,this._restartNodeLoading=!1,this._fields=null,this._attributeStorageInfo=null,this._handles=new i,this._idleQueue=new x,this._elevationUpdateNodes=new d({deallocator:null}),this._errorCount=0}initialize(){const{layerView:e,layer:t}=this;this._disableMemCache=!e.loadCachedGPUData||!e.addCachedGPUData,this._lodHandling=new v(e),this._defaultGeometrySchema=t.store.defaultGeometrySchema,this.disableIDBCache=has(\"disable-feature:idb-cache\"),\"fields\"in t&&(this._fields=t.fields,this._attributeStorageInfo=t.attributeStorageInfo),this.addResolvingPromise(Promise.all([t.indexInfo,t.when(),e.when()]).then((([i])=>{if(this.destroyed||!e||e.destroyed||!i)return;const{view:s}=e,{resourceController:r}=s;this._setClippingArea(s.clippingArea),this.addHandles([h((()=>s?.pointsOfInterest?.focus?.renderLocation),(e=>this._pointOfInterestChanged(e)),l),h((()=>r.memoryController.memoryFactor),(()=>this._setCameraDirty()),u),h((()=>e.suspended),(e=>{const t=e?()=>this._updateViewData():()=>this._updateIdleState(!0),i=e?()=>{}:()=>this._updateIdleState(!1);!e&&a(this._index)&&this._index.invalidateAllElevationRanges(),this._idleStateCallbacks?(e&&this.cancelNodeLoading(),this.restartNodeLoading(),this._idleStateCallbacks.idleBegin=t,this._idleStateCallbacks.idleEnd=i):this._idleStateCallbacks=r.scheduler.registerIdleStateCallbacks(t,i)}),l),b(e.view.resourceController.scheduler,this),h((()=>e.uncompressedTextureDownsamplingEnabled),(()=>this.restartNodeLoading())),h((()=>[this.featureTarget,this.fixedFeatureTarget]),(()=>{this._setCameraDirty(),this._stableFeatureLOD=!1})),h((()=>s.state?.contentCamera),(()=>this._setCameraDirty())),h((()=>t.elevationInfo),(e=>this._elevationInfoChanged(e))),h((()=>t.effectiveScaleRange),(()=>this._scaleBoundsChanged())),h((()=>e.lodFactor),(()=>this._setCameraDirty())),h((()=>e.availableFields),(()=>this._requiredFieldsChange())),h((()=>e.holeFilling),(e=>a(this._index)&&(this._index.holeFilling=e)))]),this._updateScaleHandles(),this._viewportQueries=new A(this.crsIndex,s.renderCoordsHelper,s.state.contentCamera,!s.state.fixedContentCamera||this.isGraphics3D,this._clippingArea,this.isMeshPyramid?s.basemapTerrain:s.elevationProvider,f(s.viewingMode),this.layer.elevationInfo,{progressiveLoadFactor:this._getProgressiveLoadFactor(),screenspaceErrorBias:this._lod,angleDependentLoD:this._lod<.5}),this._index=new N(t,i,this.indexStreamController,this._viewportQueries,Q,e.holeFilling,(t=>e.isNodeLoaded(t)),(t=>e.isNodeReloading(t)),(e=>this._shouldLoadNode(e)),(e=>this._enableFromGPUCache(e,w.Leaf)),(e=>this._needsUpdate(e)),(()=>!this.indexStreamController.busy),(t=>e.computeVisibilityObb?e.computeVisibilityObb(t):null),e?.computeNodeFiltering?t=>e.computeNodeFiltering(t):void 0),this._index.updateElevationInfo(this.layer.elevationInfo,this.isMeshPyramid),this._index.imModificationsChanged(!!e.hasModifications),this._startNodeLoading()}))),this._tmpPoint=y(0,0,0,this.crsIndex)}updateNodeModificationStatus(e){const t=this._index,i=this.layerView;a(t)&&i?.updateNodeModificationStatus&&(this._modificationsNodeFilteringArray.clear(),e.forAll((e=>{const i=t.getNode(e);a(i)&&this._modificationsNodeFilteringArray.push(i)})),i.updateNodeModificationStatus(this._modificationsNodeFilteringArray),this._invisibleDirty=!0)}destroy(){this.cancelNodeLoading(),this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=null),this._handles.destroy(),this._nodeLoader=null,W.prune(),a(X)&&(X.hide(),X=null)}_getRequiredAttributes(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];const e=this._attributeStorageInfo,t=this._fields,i=this.layer.objectIdField;return this.layerView.availableFields.map((i=>{const s=J(e,i),r=J(t,i);return s>=0&&r>=0?{index:s,name:t[r].name,field:t[r],attributeStorageInfo:e[s]}:null})).filter((e=>null!=e&&e.name!==i))}_requiredFieldsChange(){const e=this._getRequiredAttributes();$(this._requiredAttributes,e)||(this._requiredAttributes=e,this._requiredAttributesDirty=!1,this.restartNodeLoading())}requestUpdate(){this._requiredAttributesDirty=!0,this.restartNodeLoading()}_setClippingArea(e){const t=g();O(e,t,this.layerView.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null}_pointOfInterestChanged(e){a(this._viewportQueries)&&(this._viewportQueries.setPointOfInterest(e),a(this._index)&&(this._index.progressiveLoadPenalty=Y.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate()))}updateClippingArea(e){this._setClippingArea(e),a(this._viewportQueries)&&a(this._index)&&(this._viewportQueries.updateClippingArea(this._clippingArea),this._index.invalidateVisibilityCache()),this._setCameraDirty()}_setCameraDirty(){this._cameraDirty=!0,this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateElevationChanged(e,t){const i=this._index;if(r(i)||r(i.rootNode)||r(t))return null;this.crsIndex.equals(t)||(p(e,t,Z,this.crsIndex),e=Z);const s=this._elevationUpdateNodes;return s.clear(),V(e,i.rootNode,i,(e=>s.push(e.index))),s.length&&(s.forAll((e=>i.updateElevationChanged(e))),this._setCameraDirty()),s}getParentIndex(e){return a(this._index)?this._index.getParentIndex(e):-1}removeAllGeometryObbs(){a(this._index)&&this._index.removeAllGeometryObbs()}getRenderMbs(e){return a(this._viewportQueries)?this._viewportQueries.getRenderMbs(e):null}_elevationInfoChanged(e){r(this._index)||(this._index.updateElevationInfo(e,this.isMeshPyramid),this._setCameraDirty())}_updateScaleHandles(){const e=\"scale-bounds\";this._handles.remove(e),this._areScaleBoundsActive&&this._handles.add(this.layerView.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),e)}_scaleBoundsChanged(){this._areScaleBoundsActive||this._loadedNodeScales.clear(),this._updateScaleHandles(),this._setCameraDirty()}_scaleUpdateHandler(e){this._updateScaleInBoundingRect(e.extent,e.spatialReference),this._setCameraDirty()}_updateScaleInBoundingRect(e,t){const i=this._index;if(r(i))return;const s=i.rootNode;!r(s)&&p(e,t,Z,this.crsIndex)&&this._loadedNodeScales.forEach(((e,t)=>{const s=i.getNode(t);a(s)&&m(Z,s.mbs)&&this._loadedNodeScales.set(t,this._computeScale(s))}))}restartNodeLoading(){this._restartNodeLoading=!0,this.cancelNodeLoading(),this._evaluateUpdating()}schedule(e,t){return this._idleQueue.push(e,t)}reschedule(e,t){return this._idleQueue.unshift(e,t)}get _isIntegratedMesh(){return\"integrated-mesh\"===this.layer.type}get _areScaleBoundsActive(){const{minScale:e,maxScale:t}=M(this.layer);return this.scaleVisibilityEnabled&&(e>0||t>0)}get unloadedMemoryEstimate(){return r(this._index)||this.layerView.suspended?0:this._index.unloadedMemoryEstimate*this._lodDropFactor}get indexDepth(){return a(this._index)?this._index.maxLevel:0}set disableMemCache(e){this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData||(this._disableMemCache=!0),this._disableMemCache=e}runTask(e,t){return this.layerView.suspended?(this._updateViewData(),this._evaluateUpdating(),-1/0):!this.layerView.visible||r(this._index)?-1/0:(this._processWithErrorLogging(e,t),this._index.maxPriority)}_processWithErrorLogging(e,t){try{this._process(e,t)}catch(i){this._errorCount<50?Q.error(\"Error during processing: \"+i):50===this._errorCount&&Q.error(\"Too many errors for this layer. Further errors will not be displayed.\"),this._errorCount++}}_process(e,t){this._restartNodeLoading&&this._startNodeLoading(),null==this._nodeLoader||r(this._index)||(this._updateViewData(),this._invisibleDirty&&this._removeInvisibleNodes(e)&&(this._invisibleDirty=!1),this._isIntegratedMesh&&(e.enabled=!1),e.run((()=>this._processIndex(e))),this._updateFeatureLOD(),e.run((()=>this._processCache(e))),this._isIntegratedMesh&&(e.enabled=!0),e.run((()=>this._processNodes(e,t))),this._idleQueue.runTask(e),e.run((()=>this._prefetchIndex())),t.numIndexLoading+=this._index.indexLoading,t.numNodesLoading+=this._downloadingCount,e.run((()=>this._lodHandling.lodGlobalHandling(e))),this._evaluateUpdating())}_processIndex(e){if(r(this._index))return!1;if(this._index.dirty){this._newLoadingNodes.clear(),this._index.update(Array.from(this._loadingNodes.keys()),e,(e=>this.updateNodeModificationStatus(e))),this._disableMemCache||(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,this._index.updates.missing.length));const t=this._index.featureEstimate.leavesReached;this._index.isLoading||t===this._get(\"leavesReached\")||this._set(\"leavesReached\",t)}return this._index.load()}_prefetchIndex(){return!(r(this._index)||this._loadingNodes.size>0||this._index.updates.add.length>0)&&this._index.prefetch()}_updateFeatureLOD(){if(!this.useMaximumNumberOfFeatures||r(this._index)||r(this._viewportQueries))return;const e=!this._index.isLoading,t=this.featureTarget*this._baseLOD,i=this._index.featureEstimate;if(i.estimate=i.estimate||t/2,this._index.indexMissing>B){if(this._featureLOD<=R)return;this._featureLOD/=z,this._stableFeatureLOD=!1}else if(e&&i.estimate<t){if(i.leavesReached||this._featureLOD>=H||this._stableFeatureLOD)return;const e=Math.min(10,Math.max(t/i.estimate,1.001));this._featureLOD*=e;const s=this._lod,r=this._index.checkFeatureTarget(t,s);r!==s&&(this._featureLOD=r/this._baseLOD,this._stableFeatureLOD=!0)}else{if(!(i.estimate>t*k||e&&i.estimate>t))return;if(this._featureLOD<=R)return;this._featureLOD/=1+.25*(i.estimate/t-1),this._stableFeatureLOD=!1}this._featureLOD=Math.min(H,Math.max(R,this._featureLOD)),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.requestUpdate()}_processCache(e){const t=this._index;if(r(t))return!1;for(;this._newLoadingNodes.length>0&&!e.done;){const i=this._newLoadingNodes.pop();for(let s=t.getParent(i);a(s)&&(!this.layerView.isNodeLoaded(s.index)&&this._isNodeInScaleBounds(s));s=t.getParent(s.index))if(this._enableFromGPUCache(s,w.Hole)){e.madeProgress();break}}return e.hasProgressed}_processNodes(e,t){if(r(this._index))return!1;let i=(this._isIdle?T:E)-this._loadingNodes.size;const s=this._index.updates;for(s.cancel.forEach(this._cancelNode,this),s.cancel=[];s.remove.length>0&&!e.done;)this.layerView.removeNode(s.remove.pop()),e.madeProgress();for(;s.update.length>0&&!e.done;){const t=this._index.getNode(s.update.pop());a(t)&&(this._updateLoadedNode(t),e.madeProgress())}for(;s.add.length>0&&!e.done&&i>0;){--i;const a=this._index.getNode(s.add.back());if(r(a)||a.cacheState!==C.Cached&&!this._hasNodeLoadToken(t))break;s.add.pop(),this._loadNode(a),e.madeProgress()}return e.hasProgressed}_cancelAllNodes(){this._loadingNodes.forEach((e=>e.abort())),this._loadingNodes.clear(),this._updatingNodes.forEach((e=>e.abort())),this._updatingNodes.clear()}_cancelNode(e){const t=this._loadingNodes.get(e);t&&(t.abort(),this._loadingNodes.delete(e))}_hasNodeLoadToken(e){return!(!this._isIdle&&e.numNodesLoading+this._loadingNodes.size>=E)&&(this._downloadingCount<U&&!this.dataStreamController.busy)}_evaluateUpdating(){let e=!1,t=0;if(this.layerView.suspended)e=this._cameraDirty,t=e?0:1;else{const i=(a(this._index)?this._index.indexMissing:0)+3*(a(this._index)?this._index.updates.add.length:0)+2*this._loadingNodes.size;e=!!(i>0||this._updatingNodes.size>0||this._restartNodeLoading||this._cameraDirty||this._idleQueue.running||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling||a(this._index)&&this._index.isPrefetching),0===i&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(i,this._progressMaxNumNodes),t=1-i/this._progressMaxNumNodes}this.updating=e,this.updatingProgress=t}_updateViewData(){if(!this._cameraDirty||r(this._index)||r(this._viewportQueries))return;const e=this.layerView.view,{contentCamera:t,fixedContentCamera:i}=e.state;this.screenSizeFactor=1/(t.perScreenPixelRatio/2),this._viewportQueries.updateCamera(t,!i||this.isGraphics3D),this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.invalidateVisibilityCache(),this._index.progressiveLoadPenalty=Y.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate(),this._stableFeatureLOD=!1,this._invisibleDirty=!0,this._cameraDirty=!1,this.notifyChange(\"rootNodeVisible\")}_getProgressiveLoadFactor(){return this.layerView.view.resourceController.memoryController.memoryFactor<1?1:this.layerView.progressiveLoadFactor}get _lod(){return this._featureLOD*this._baseLOD}get _baseLOD(){const e=this.layerView.lodFactor,t=this.layerView.view.resourceController.memoryController.memoryFactor;return this.fixedFeatureTarget?1:(e>0?e:1)*t}get _lodDropFactor(){if(this.fixedFeatureTarget)return 1;const e=this.layerView.view.resourceController.memoryController;return(Math.min(e.memoryFactor,.5)-e.minQuality)/(.5-e.minQuality)}isGeometryVisible(e){return a(this._index)&&this._index.isGeometryVisible(e.index)}updateVisibility(e){a(this._index)&&this._index.invalidateNodeVisibilityCache(e)}invalidateGeometryVisibility(e){a(this._index)&&this._index.invalidateGeometryVisibility(e)}invalidateVisibilityObbs(){a(this._index)&&this._index.invalidateVisibilityObbs()}modificationsChanged(){a(this._index)&&this._index.imModificationsChanged(!!this.layerView.hasModifications),this._invisibleDirty=!0}_shouldLoadNode(e){return!(!this._lodHandling.shouldLoadNode(e)||this._shouldDropNode(e))&&(!(r(this._index)||!this._index.isGeometryVisible(e.index))&&this._isNodeInScaleBounds(e))}_shouldDropNode(e){if(r(this._viewportQueries))return!1;const t=this._lodDropFactor;if(t>=1||!this._lodHandling.hasNoVisibleChildren(e))return!1;return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*t}_startNodeLoading(){this._restartNodeLoading=!1;const e=this._index;if(this._updatesDisabled||r(e)||r(this._viewportQueries))return;this._updateViewData(),this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1);const t={textureEncodings:this.layerView.supportedTextureEncodings,uncompressedTextureDownsamplingEnabled:this.layerView.uncompressedTextureDownsamplingEnabled,textureUsageMask:this.layerView.rendererTextureUsage,loadFeatureData:this.useMaximumNumberOfFeatures};this._nodeLoader=new D(this.layer,this.dataStreamController,Q,this._defaultGeometrySchema,this._requiredAttributes,t),e.requestUpdate(),this._lodHandling.startNodeLoading((e=>this._isNodeInScaleBounds(e)),((e,t)=>this._removeNodes(e,t,ee.fadeout)),e,{maxLodLevel:this._viewportQueries.maxLodLevel}),this._evaluateUpdating()}isNodeLoading(){return null!=this._nodeLoader&&null!=this._index}cancelNodeLoading(){this.isNodeLoading()&&(this.indexStreamController.cancelAll(),this.dataStreamController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this._evaluateUpdating())}_removeInvisibleNodes(e){const t=this._index;if(r(t)||r(this._viewportQueries))return!1;W.clear(),this.layerView.getLoadedNodeIndices(W);const i=0===this._viewportQueries.maxDistance,s=i?()=>!1:e=>this._shouldDropNode(e);return W.filterInPlace((e=>{const i=t.getNode(e);return r(i)||!t.isGeometryVisible(e)||s(i)||!this._isNodeInScaleBounds(i)})),W.length>0&&this._lodHandling.setLodGlobalDirty(),this._removeNodes(W,e,ee.pop),!(i&&this._lodDropFactor<1)&&(0===W.length||(W.clear(),!1))}markNodeToRemove(e){W.push(e)}removeMarkedNodes(){this._removeNodes(W,G,ee.pop)}_removeNodes(e,t,i){const s=e.length;if(0!==s&&!t.done){for(a(this._index)&&this._index.requestUpdate();e.length>0&&!t.done;){const s=e.pop(),r=this._index;i===ee.fadeout&&this.layerView.nodeFadeoutEnabled&&a(r)&&r.isGeometryVisible(s)?this.layerView.fadeNode(s,F.FadeOut,!0):this.layerView.removeNode(s),t.madeProgress()}if(this._loadedNodeScales.size>0)for(let t=e.length;t<s;t++){const i=e.data[t];this._loadedNodeScales.delete(i)}}}_needsUpdate(e){if(!e.resources.hasFeatureData||this._updatingNodes.has(e.index))return!1;const t=this.layerView.getLoadedAttributes(e.index);return null!=t&&t!==this._requiredAttributes}_updateLoadedNode(e){const t=new AbortController;this._updatingNodes.set(e.index,t);($(this.layerView.getLoadedAttributes(e.index),this._requiredAttributes)?Promise.resolve(this.layerView.getAttributeData(e.index)):this._nodeLoader.loadAttributes(e,this._requiredAttributes,t.signal)).then((i=>this.schedule((()=>this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:i},t.signal)),t.signal))).catch((i=>{if(!n(i))return this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:{}},t.signal)})).catch((()=>{})).then((()=>{this._updatingNodes.delete(e.index),this._evaluateUpdating()})),this._evaluateUpdating()}_loadNode(e){if(this._loadingNodes.has(e.index))return void Q.error(\"already loading node \"+e.index);const t=new AbortController;this._loadingNodes.set(e.index,t),this._evaluateUpdating(),this._loadAndAddNode(e,t.signal).then((i=>{i&&a(this._index)&&this._loadingNodes.get(e.index)===t&&(this._loadingNodes.delete(e.index),this._index.requestUpdate())})).catch((e=>{if(!n(e))throw e})).finally((()=>{this._loadingNodes.get(e.index)===t&&this._loadingNodes.delete(e.index),this._evaluateUpdating()}))}_loadAndAddNode(e,t){return e.cacheState===C.Uncached?this._loadUncached(e,t).then((()=>!1)):this._loadCached(e,t).then((t=>!t&&(e.cacheState=C.Uncached,!0))).catch((t=>!n(t)&&(e.cacheState=C.Uncached,!0)))}_enableFromGPUCache(e,t){if(this._disableMemCache||r(this._index))return!1;if(t===w.Hole&&!this._index.useNodeAsHole(e.index))return!0;const i=this._loadCachedGPUData(e);return!!i&&(this.layerView.addCachedGPUData(e,i,t),this._nodeAdded(),!0)}_loadCachedGPUData(e){const t=this.layerView.loadCachedGPUData(e);return a(t)&&a(t.attributeInfo)&&$(t.attributeInfo.loadedAttributes,this._requiredAttributes)?t:(this.layerView.deleteCachedGPUData(t),null)}_nodeAdded(){a(this._index)&&this._index.requestUpdate(),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateLoadStatus(e,t){const i=this._index;a(i)&&i.updateChildrenLoaded(e,t?1:-1)}_loadCached(e,t){if(this._enableFromGPUCache(e,w.Leaf))return Promise.resolve(!0);const i=this.layerView;return!this.disableIDBCache&&i.loadCachedNodeData&&i.addCachedNodeData?this.schedule((()=>i.loadCachedNodeData(e,t,((t,i)=>this._nodeLoader.loadTextures(e,t,i)))),t).then((s=>{if(r(s))return!1;const a=this._requiredAttributes;return this.reschedule((()=>this._nodeLoader.loadAttributes(e,a,t)),t).then((r=>this.reschedule((()=>i.addCachedNodeData(e,s,{loadedAttributes:a,attributeData:r},t)),t))).then((()=>(this._nodeAdded(),!0)))})):Promise.resolve(!1)}_loadUncached(e,t){return this._downloadingCount++,this._nodeLoader.loadNodeData(e,t).catch((e=>{throw this._downloadingCount--,e})).then((i=>(this._downloadingCount--,this.schedule((()=>this.layerView.addNode(e,i,t)),t)))).then((()=>{this._nodeAdded(),e.cacheState=C.Cached})).catch((t=>{if(!n(t))throw Q.error(\"#loadNodeData()\",this.layer,`Failed to load node '${e.id}'`,t),e.failed=!0,a(this._index)&&this._index.requestUpdate(),t}))}_updateIdleState(e){e!==this._isIdle&&(this._isIdle=e,this._evaluateUpdating(),e&&this._index&&a(this._index)&&this._index.resetFailedNodes())}_getScale(e){if(this._loadedNodeScales.has(e.index))return this._loadedNodeScales.get(e.index);const t=this._computeScale(e);return this.layerView.isNodeLoaded(e.index)&&this._loadedNodeScales.set(e.index,t),t}_computeScale(e){this._tmpPoint.x=e.mbs[0],this._tmpPoint.y=e.mbs[1],this._tmpPoint.z=e.mbs[2];const t=e.mbs[3];return this.layerView.view.basemapTerrain.getSphereScale(this._tmpPoint,t)}_isNodeInScaleBounds(e){if(!this._areScaleBoundsActive)return!0;const t=this._getScale(e),{minScale:i,maxScale:s}=M(this.layer);return q(t,i,s)}updateStats(e){e.index=a(this._index)?this._index.size:0,this.isGraphics3D&&(e.detail=this._featureLOD,e.target=this.featureTarget*this._baseLOD),a(this._index)&&this._index.updateStats(e)}get test(){const e=this;return{index:this._index,set disableUpdates(t){e._updatesDisabled=t,t?e.cancelNodeLoading():e.requestUpdate()},set disableIDBCache(t){e.disableIDBCache=t},set ignoreServiceObb(t){a(e._index)&&(e._index.ignoreServiceObb=t)},shouldLoadNode:t=>e._shouldLoadNode(t)}}notifyLODUpdate(){this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating(),a(this._index)&&this._index.requestUpdate()}geometryFilterChanged(e){const t=this._index;a(t)&&t.layerFilterChanged(e),this._setCameraDirty()}};e([_({readOnly:!0})],K.prototype,\"isMeshPyramid\",null),e([_({readOnly:!0})],K.prototype,\"isGraphics3D\",null),e([_({readOnly:!0})],K.prototype,\"useMaximumNumberOfFeatures\",null),e([_({readOnly:!0})],K.prototype,\"indexStreamController\",null),e([_({readOnly:!0})],K.prototype,\"dataStreamController\",null),e([_({readOnly:!0})],K.prototype,\"crsVertex\",null),e([_({readOnly:!0})],K.prototype,\"crsIndex\",null),e([_()],K.prototype,\"screenSizeFactor\",void 0),e([_()],K.prototype,\"featureTarget\",void 0),e([_()],K.prototype,\"fixedFeatureTarget\",void 0),e([_()],K.prototype,\"layerView\",void 0),e([_()],K.prototype,\"layer\",null),e([_()],K.prototype,\"updating\",void 0),e([_({readOnly:!0})],K.prototype,\"running\",null),e([_()],K.prototype,\"updatingProgress\",void 0),e([_({readOnly:!0})],K.prototype,\"leavesReached\",void 0),e([_({constructOnly:!0})],K.prototype,\"scaleVisibilityEnabled\",void 0),e([_({readOnly:!0,dependsOn:[]})],K.prototype,\"rootNodeVisible\",null),K=e([c(j)],K);const W=new d({deallocator:null});let X;function $(e,t){return a(e)&&e.length===t.length&&e.every((e=>J(t,e.name)>=0))}function J(e,t){const i=t.toLowerCase();for(let s=0;s<e.length;s++)if(e[s].name.toLowerCase()===i)return s;return-1}const Y={factorIM:.2,factor3dObject:.05,distancePenalty:10},Z=g();var ee;!function(e){e[e.pop=0]=\"pop\",e[e.fadeout=1]=\"fadeout\"}(ee||(ee={}));const te=K;export{te as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}