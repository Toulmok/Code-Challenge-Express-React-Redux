{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { isNone as t, isSome as r, disposeMaybe as i } from \"../../../../core/maybe.js\";\nimport { NestedMap as s } from \"../../../../core/NestedMap.js\";\nimport { assert as o } from \"./Util.js\";\nclass a {\n  constructor(e, t, r, i) {\n    this._textureRepository = e, this._techniqueRepository = t, this.materialChanged = r, this.requestRender = i, this._id2glMaterialRef = new s();\n  }\n  dispose() {\n    this._textureRepository.destroy();\n  }\n  acquire(e, r, i) {\n    if (this._ownMaterial(e), !e.requiresSlot(r, i)) return null;\n    let s = this._id2glMaterialRef.get(i, e.id);\n    if (t(s)) {\n      const t = e.createGLMaterial({\n        material: e,\n        techniqueRep: this._techniqueRepository,\n        textureRep: this._textureRepository,\n        output: i\n      });\n      s = new l(t), this._id2glMaterialRef.set(i, e.id, s);\n    }\n    return s.ref(), s.glMaterial;\n  }\n  release(e, t) {\n    const s = this._id2glMaterialRef.get(t, e.id);\n    r(s) && (s.unref(), s.referenced || (i(s.glMaterial), this._id2glMaterialRef.delete(t, e.id)));\n  }\n  _ownMaterial(t) {\n    r(t.repository) && t.repository !== this && e.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRepository\").error(\"Material is already owned by a different material repository\"), t.repository = this;\n  }\n}\nclass l {\n  constructor(e) {\n    this.glMaterial = e, this._refCnt = 0;\n  }\n  ref() {\n    ++this._refCnt;\n  }\n  unref() {\n    --this._refCnt, o(this._refCnt >= 0);\n  }\n  get referenced() {\n    return this._refCnt > 0;\n  }\n}\nexport { a as GLMaterialRepository };","map":{"version":3,"names":["e","isNone","t","isSome","r","disposeMaybe","i","NestedMap","s","assert","o","a","constructor","_textureRepository","_techniqueRepository","materialChanged","requestRender","_id2glMaterialRef","dispose","destroy","acquire","_ownMaterial","requiresSlot","get","id","createGLMaterial","material","techniqueRep","textureRep","output","l","set","ref","glMaterial","release","unref","referenced","delete","repository","getLogger","error","_refCnt","GLMaterialRepository"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRepository.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{isNone as t,isSome as r,disposeMaybe as i}from\"../../../../core/maybe.js\";import{NestedMap as s}from\"../../../../core/NestedMap.js\";import{assert as o}from\"./Util.js\";class a{constructor(e,t,r,i){this._textureRepository=e,this._techniqueRepository=t,this.materialChanged=r,this.requestRender=i,this._id2glMaterialRef=new s}dispose(){this._textureRepository.destroy()}acquire(e,r,i){if(this._ownMaterial(e),!e.requiresSlot(r,i))return null;let s=this._id2glMaterialRef.get(i,e.id);if(t(s)){const t=e.createGLMaterial({material:e,techniqueRep:this._techniqueRepository,textureRep:this._textureRepository,output:i});s=new l(t),this._id2glMaterialRef.set(i,e.id,s)}return s.ref(),s.glMaterial}release(e,t){const s=this._id2glMaterialRef.get(t,e.id);r(s)&&(s.unref(),s.referenced||(i(s.glMaterial),this._id2glMaterialRef.delete(t,e.id)))}_ownMaterial(t){r(t.repository)&&t.repository!==this&&e.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRepository\").error(\"Material is already owned by a different material repository\"),t.repository=this}}class l{constructor(e){this.glMaterial=e,this._refCnt=0}ref(){++this._refCnt}unref(){--this._refCnt,o(this._refCnt>=0)}get referenced(){return this._refCnt>0}}export{a as GLMaterialRepository};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAC,MAAK,4BAA4B;AAAC,SAAOC,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,SAAS,IAAIC,CAAC,QAAK,+BAA+B;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,WAAW;AAAC,MAAMC,CAAC;EAACC,WAAWA,CAACZ,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAI,CAACO,kBAAkB,GAACb,CAAC,EAAC,IAAI,CAACc,oBAAoB,GAACZ,CAAC,EAAC,IAAI,CAACa,eAAe,GAACX,CAAC,EAAC,IAAI,CAACY,aAAa,GAACV,CAAC,EAAC,IAAI,CAACW,iBAAiB,GAAC,IAAIT,CAAC;EAAA;EAACU,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACL,kBAAkB,CAACM,OAAO,EAAE;EAAA;EAACC,OAAOA,CAACpB,CAAC,EAACI,CAAC,EAACE,CAAC,EAAC;IAAC,IAAG,IAAI,CAACe,YAAY,CAACrB,CAAC,CAAC,EAAC,CAACA,CAAC,CAACsB,YAAY,CAAClB,CAAC,EAACE,CAAC,CAAC,EAAC,OAAO,IAAI;IAAC,IAAIE,CAAC,GAAC,IAAI,CAACS,iBAAiB,CAACM,GAAG,CAACjB,CAAC,EAACN,CAAC,CAACwB,EAAE,CAAC;IAAC,IAAGtB,CAAC,CAACM,CAAC,CAAC,EAAC;MAAC,MAAMN,CAAC,GAACF,CAAC,CAACyB,gBAAgB,CAAC;QAACC,QAAQ,EAAC1B,CAAC;QAAC2B,YAAY,EAAC,IAAI,CAACb,oBAAoB;QAACc,UAAU,EAAC,IAAI,CAACf,kBAAkB;QAACgB,MAAM,EAACvB;MAAC,CAAC,CAAC;MAACE,CAAC,GAAC,IAAIsB,CAAC,CAAC5B,CAAC,CAAC,EAAC,IAAI,CAACe,iBAAiB,CAACc,GAAG,CAACzB,CAAC,EAACN,CAAC,CAACwB,EAAE,EAAChB,CAAC,CAAC;IAAA;IAAC,OAAOA,CAAC,CAACwB,GAAG,EAAE,EAACxB,CAAC,CAACyB,UAAU;EAAA;EAACC,OAAOA,CAAClC,CAAC,EAACE,CAAC,EAAC;IAAC,MAAMM,CAAC,GAAC,IAAI,CAACS,iBAAiB,CAACM,GAAG,CAACrB,CAAC,EAACF,CAAC,CAACwB,EAAE,CAAC;IAACpB,CAAC,CAACI,CAAC,CAAC,KAAGA,CAAC,CAAC2B,KAAK,EAAE,EAAC3B,CAAC,CAAC4B,UAAU,KAAG9B,CAAC,CAACE,CAAC,CAACyB,UAAU,CAAC,EAAC,IAAI,CAAChB,iBAAiB,CAACoB,MAAM,CAACnC,CAAC,EAACF,CAAC,CAACwB,EAAE,CAAC,CAAC,CAAC;EAAA;EAACH,YAAYA,CAACnB,CAAC,EAAC;IAACE,CAAC,CAACF,CAAC,CAACoC,UAAU,CAAC,IAAEpC,CAAC,CAACoC,UAAU,KAAG,IAAI,IAAEtC,CAAC,CAACuC,SAAS,CAAC,qDAAqD,CAAC,CAACC,KAAK,CAAC,8DAA8D,CAAC,EAACtC,CAAC,CAACoC,UAAU,GAAC,IAAI;EAAA;AAAC;AAAC,MAAMR,CAAC;EAAClB,WAAWA,CAACZ,CAAC,EAAC;IAAC,IAAI,CAACiC,UAAU,GAACjC,CAAC,EAAC,IAAI,CAACyC,OAAO,GAAC,CAAC;EAAA;EAACT,GAAGA,CAAA,EAAE;IAAC,EAAE,IAAI,CAACS,OAAO;EAAA;EAACN,KAAKA,CAAA,EAAE;IAAC,EAAE,IAAI,CAACM,OAAO,EAAC/B,CAAC,CAAC,IAAI,CAAC+B,OAAO,IAAE,CAAC,CAAC;EAAA;EAAC,IAAIL,UAAUA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACK,OAAO,GAAC,CAAC;EAAA;AAAC;AAAC,SAAO9B,CAAC,IAAI+B,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}