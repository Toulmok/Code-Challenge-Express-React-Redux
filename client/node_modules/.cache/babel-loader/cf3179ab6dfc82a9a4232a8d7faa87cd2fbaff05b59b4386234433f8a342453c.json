{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Graphic.js\";\nimport { binaryIndexOf as r } from \"../../../core/arrayUtils.js\";\nimport i from \"../../../core/Logger.js\";\nimport { destroyMaybe as s, isNone as o, isSome as a, unwrap as n } from \"../../../core/maybe.js\";\nimport { initial as d, watch as l } from \"../../../core/reactiveUtils.js\";\nimport { property as h } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as u } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { s as c } from \"../../../chunks/vec3.js\";\nimport { c as p } from \"../../../chunks/vec3f64.js\";\nimport { projectBuffer as g, projectVectorToVector as m } from \"../../../geometry/projection.js\";\nimport { extentContainsCoords3D as y } from \"../../../geometry/support/contains.js\";\nimport { getGeometryZScaler as f } from \"../../../geometry/support/zscale.js\";\nimport { fallbackObjectIDAttribute as _ } from \"../../../layers/LayerConstants.js\";\nimport { makeDehydratedPoint as b, estimateSize as v } from \"../../../layers/graphics/dehydratedFeatures.js\";\nimport { hydrateGraphic as x } from \"../../../layers/graphics/hydratedFeatures.js\";\nimport E from \"../../../layers/graphics/controllers/I3SOnDemandController.js\";\nimport I from \"../../../layers/support/FeatureFilter.js\";\nimport w from \"../../../rest/support/Query.js\";\nimport { I3SPointsWorkerHandle as N } from \"./I3SPointsWorkerHandle.js\";\nimport { LayerView3D as C } from \"./LayerView3D.js\";\nimport O from \"./graphics/Graphics3DFeatureProcessor.js\";\nimport { QueryEngine as D } from \"./graphics/QueryEngine.js\";\nimport { createInteractiveEditSession as F, processAttributeEdits as j } from \"./i3s/attributeEditing.js\";\nimport { I3SGraphicsMap as S } from \"./i3s/I3SGraphicsMap.js\";\nimport { I3SOverrides as G } from \"./i3s/I3SOverrides.js\";\nimport { checkRecyclable as A, checkSpatialReferences as L, containsDraco as P, whenGraphicAttributes as V, getCachedAttributeValue as R } from \"./i3s/I3SUtil.js\";\nimport { DefinitionExpressionSceneLayerView as M } from \"./support/DefinitionExpressionSceneLayerView.js\";\nimport { defineFieldProperties as H } from \"./support/fieldProperties.js\";\nimport { PopupSceneLayerView as q } from \"./support/PopupSceneLayerView.js\";\nimport { SceneLayerViewRequiredFields as U } from \"./support/SceneLayerViewRequiredFields.js\";\nimport Q from \"../support/debugFlags.js\";\nimport { compute as T } from \"../support/orientedBoundingBox.js\";\nimport { updatingProgress as B } from \"../support/updatingProperties.js\";\nimport { Attribute as k } from \"../webgl-engine/lib/Attribute.js\";\nimport { newDoubleArray as z } from \"../webgl-engine/lib/DoubleArray.js\";\nimport { UpdatePolicy as W } from \"../webgl-engine/lib/UpdatePolicy.js\";\nimport Z from \"../../layers/SceneLayerView.js\";\nimport { TaskPriority as K } from \"../../support/Scheduler.js\";\nconst Y = H();\nlet $ = class extends M(q(C(Z))) {\n  constructor() {\n    super(...arguments), this.type = \"scene-layer-graphics-3d\", this._queryEngine = null, this._memCache = null, this._interactiveEditingSessions = new Map(), this.loadedGraphics = new S((e, t, r) => te(e, t, r), e => this.processor.graphicsCore.recreateGraphics(e)), this.holeFilling = \"always\", this.progressiveLoadFactor = 1, this.supportsHeightUnitConversion = !0, this._coordinatesOutsideExtentErrors = 0, this._maxCoordinatesOutsideExtentErrors = 20;\n  }\n  tryRecycleWith(e, t) {\n    return e.url === this.layer.url && this._i3sOverrides.isEmpty ? e.load(t).then(() => {\n      A(this.layer, e, this._i3sOverrides), this.layer = e, this._i3sOverrides.destroy();\n      const t = this.view.resourceController?.memoryController;\n      this._i3sOverrides = new G({\n        view: this.view,\n        layer: e,\n        memoryController: t\n      }), s(this._queryEngine), this._setupQueryEngine(), this.processor.resetObjectStates();\n    }) : null;\n  }\n  initialize() {\n    this.addResolvingPromise(this.layer.indexInfo);\n    const e = this.view.resourceController?.memoryController;\n    this._i3sOverrides = new G({\n      view: this.view,\n      layer: this.layer,\n      memoryController: e\n    }), L(this.layer, this.view.spatialReference, this.view.viewingMode), this._fieldsHelper = new U({\n      layerView: this\n    }), this.updatingHandles.add(() => this.layer.rangeInfos, e => this._rangeInfosChanged(e), d), this.updatingHandles.add(() => this.layer.renderer, (e, t) => this._rendererChange(e, t)), this.updatingHandles.add(() => [this.parsedDefinitionExpression, this._excludeObjectIdsSorted], () => this._filterChange()), this.handles.add(l(() => Q.I3S_TREE_SHOW_TILES, e => {\n      if (e && !this._treeDebugger) {\n        const e = this._controller.crsIndex;\n        import(\"./support/I3STreeDebugger.js\").then(_ref => {\n          let {\n            I3STreeDebugger: t\n          } = _ref;\n          !this._treeDebugger && Q.I3S_TREE_SHOW_TILES && (this._treeDebugger = new t({\n            lv: this,\n            view: this.view,\n            nodeSR: e\n          }));\n        });\n      } else e || !this._treeDebugger || Q.I3S_TREE_SHOW_TILES || (this._treeDebugger.destroy(), this._treeDebugger = null);\n    }, d)), this._set(\"processor\", new O({\n      owner: this,\n      preferredUpdatePolicy: W.ASYNC,\n      scaleVisibilityEnabled: !0,\n      filterVisibilityEnabled: !0,\n      timeExtentEnabled: !1,\n      frustumVisibilityEnabled: !1,\n      elevationAlignmentEnabled: !0,\n      elevationFeatureExpressionEnabled: !1,\n      setUidToIdOnAdd: !1,\n      dataExtent: this.layer.fullExtent,\n      updateClippingExtent: e => this._updateClippingExtent(e)\n    })), this.processor.elevationAlignment?.events.on(\"invalidate-elevation\", e => this._controller.updateElevationChanged(e.extent, e.spatialReference)), this.supportsHeightUnitConversion && (this._verticalScale = f(\"point\", this.layer.spatialReference, this.view.spatialReference)), this.addResolvingPromise(this.processor.initializePromise), this._memCache = this.view.resourceController.memoryController.newCache(this.uid), this._controller = new E({\n      layerView: this,\n      scaleVisibilityEnabled: !1\n    }), P(this.layer.geometryDefinitions) && (this._worker = new N(e => this.view.resourceController.immediate.schedule(e))), this.handles.add(this.layer.on(\"apply-edits\", e => this.updatingHandles.addPromise(e.result))), this.handles.add(this.layer.on(\"edits\", e => this._handleEdits(e))), this.when(() => {\n      this._setupQueryEngine(), this.updatingHandles.add(() => this.maximumNumberOfFeatures, e => this._controller.featureTarget = e, d), this.updatingHandles.add(() => this.suspended, e => {\n        e && this._removeAllNodeData();\n      });\n    });\n  }\n  destroy() {\n    this._treeDebugger = s(this._treeDebugger), this._i3sOverrides = s(this._i3sOverrides), this._set(\"processor\", s(this.processor)), this._controller = s(this._controller), this._queryEngine = s(this._queryEngine), this._worker = s(this._worker), this._memCache = s(this._memCache), this.loadedGraphics.clear(), this._fieldsHelper = s(this._fieldsHelper);\n  }\n  get i3slayer() {\n    return this.layer;\n  }\n  get updatingProgressValue() {\n    return this._controller?.updatingProgress ?? 1;\n  }\n  get requiredFields() {\n    return this._fieldsHelper?.requiredFields ?? [];\n  }\n  get maximumNumberOfFeatures() {\n    const e = this.processor?.graphicsCore?.displayFeatureLimit;\n    return e?.maximumNumberOfFeatures ?? 0;\n  }\n  set maximumNumberOfFeatures(e) {\n    null != e ? (this._override(\"maximumNumberOfFeatures\", e), this._controller.fixedFeatureTarget = !0) : (this._clearOverride(\"maximumNumberOfFeatures\"), this._controller.fixedFeatureTarget = !1);\n  }\n  get maximumNumberOfFeaturesExceeded() {\n    return !this.suspended && !!this._controller?.useMaximumNumberOfFeatures && !this._controller.leavesReached;\n  }\n  get _excludeObjectIdsSorted() {\n    const e = this.layer.excludeObjectIds;\n    return e.length ? e.toArray().sort((e, t) => e - t) : null;\n  }\n  get lodFactor() {\n    return \"Labels\" === this.layer.semantic ? 1 : this.view.qualitySettings.sceneService.point.lodFactor;\n  }\n  get hasM() {\n    return !1;\n  }\n  get hasZ() {\n    return !0;\n  }\n  async whenGraphicAttributes(e, t) {\n    return V(this.layer, e, this._getObjectIdField(), t, () => [...this.loadedGraphics.nodes()]);\n  }\n  getHit(e) {\n    if (!this.loadedGraphics) return null;\n    const t = x(this.loadedGraphics.find(t => t.uid === e), this.layer),\n      r = this._getObjectIdField();\n    return t && t.attributes && t.attributes[r] ? (t.layer = this.layer, t.sourceLayer = this.layer, {\n      type: \"graphic\",\n      graphic: t,\n      layer: t.layer\n    }) : null;\n  }\n  whenGraphicBounds(e, t) {\n    return this.processor.whenGraphicBounds(e, t);\n  }\n  computeAttachmentOrigin(e, t) {\n    return this.processor.computeAttachmentOrigin(e, t);\n  }\n  canResume() {\n    return super.canResume() && (!this._controller || this._controller.rootNodeVisible);\n  }\n  isUpdating() {\n    return !!(this._controller?.updating || this.processor?.updating || this._fieldsHelper?.updating || this.layerFilterUpdating);\n  }\n  highlight(e) {\n    return this.processor.highlight(e, this.layer.objectIdField);\n  }\n  get updatePolicy() {\n    return this.processor.graphicsCore.effectiveUpdatePolicy;\n  }\n  createInteractiveEditSession(e) {\n    return F(this._attributeEditingContext, e);\n  }\n  async _decompressBinaryPointData(e, t) {\n    const r = {\n      geometryBuffer: e.geometryBuffer\n    };\n    o(this._worker) && (this._worker = new N(e => this.view.resourceController.immediate.schedule(e)));\n    const i = await this._worker.invoke(r, t);\n    if (o(i)) throw new Error(\"Failed to decompress Draco point data\");\n    return {\n      positionData: i.positions,\n      featureIds: i.featureIds\n    };\n  }\n  async addNode(e, t, r) {\n    if (!ee(t) && !X(t)) throw new Error();\n    if (this.loadedGraphics.hasNode(e.index)) return void i.getLogger(this.declaredClass).error(\"I3S node \" + e.id + \" already added\");\n    const s = a(this.layer.fullExtent) ? ie(this.layer.fullExtent.clone(), .5) : null,\n      o = [],\n      {\n        featureIds: n,\n        pointPositions: d\n      } = ee(t) ? await this._extractBinaryPointPositions(e, t, r) : this._extractLegacyPointPositions(t);\n    this._validatePositions(e, n, d, s, o);\n    const l = this._controller.crsVertex,\n      h = this.view.spatialReference;\n    g(d, l, 0, d, h, 0, n.length);\n    const u = ee(t) ? e.level : 0,\n      c = {\n        graphics: this._createGraphics(n, d, e.index, u),\n        featureIds: n,\n        attributeInfo: t.attributeDataInfo,\n        node: e\n      };\n    if (await this._i3sOverrides.apply(c.featureIds, t.attributeDataInfo, r), e.numFeatures = c.graphics.length, this._updateNodeMemory(e), re(c), o.length > 0 && (this._computeObb(e, o, l), this._controller.updateVisibility(e.index)), !this._controller.isGeometryVisible(e)) return void this._cacheNodeData(c);\n    if (a(this._verticalScale)) for (const i of c.graphics) this._verticalScale(i.geometry);\n    const p = this.view._stage.renderView.objectAndLayerIdRenderHelper;\n    if (a(p)) for (let i = 0; i < c.featureIds.length; i++) {\n      const e = c.featureIds[i];\n      p.setUidToObjectAndLayerId(e, c.graphics[i].uid, this.layer.id, this.layer.uid, this.layer.popupEnabled, c.node.resources.attributes, i);\n    }\n    this.loadedGraphics.addNode(e.index, c), this._controller.updateLoadStatus(e.index, !0), this._filterNode(c), this._treeDebugger && this._treeDebugger.update();\n  }\n  _computeObb(e, t, r) {\n    const i = this._controller.crsIndex,\n      s = i.isGeographic ? this.view.renderSpatialReference : i;\n    g(t, r, 0, t, s, 0, t.length / 3), e.serviceObb = T(new k(t, 3)), i.isGeographic && m(e.serviceObb.center, s, e.serviceObb.center, i);\n  }\n  isNodeLoaded(e) {\n    return this.loadedGraphics.hasNode(e);\n  }\n  isNodeReloading() {\n    return !1;\n  }\n  updateNodeState() {}\n  async _extractBinaryPointPositions(e, t, r) {\n    const i = await this._decompressBinaryPointData(t, r),\n      s = i.positionData,\n      o = 3,\n      n = s.length / o,\n      d = z(3 * n),\n      l = a(e.serviceObb) ? e.serviceObb.center : [0, 0, 0],\n      h = Math.abs(l[2]) * 2 ** -20;\n    for (let a = 0; a < n; a++) {\n      const e = a * o;\n      d[e + 0] = s[e + 0] + l[0], d[e + 1] = s[e + 1] + l[1], d[e + 2] = s[e + 2] + l[2], Math.abs(d[e + 2]) < h && (d[e + 2] = 0);\n    }\n    return {\n      featureIds: i.featureIds ? Array.from(i.featureIds) : [],\n      pointPositions: d\n    };\n  }\n  _extractLegacyPointPositions(e) {\n    const t = e.pointData.length,\n      r = z(3 * t),\n      i = new Array();\n    for (let s = 0; s < t; s++) {\n      const t = e.pointData[s],\n        o = t.featureDataPosition,\n        a = o.length,\n        n = t.geometries?.[0] ?? se[a],\n        d = t.featureIds[0];\n      if (\"Embedded\" !== n.type || \"points\" !== n.params.type || a < 2 || a > 3) continue;\n      const l = n.params.vertexAttributes?.position ?? [0, 0, 0],\n        h = 3 * i.length;\n      r[h + 0] = o[0] + l[0], r[h + 1] = o[1] + l[1], r[h + 2] = 3 === a ? o[2] + l[2] : NaN, i.push(d);\n    }\n    return {\n      featureIds: i,\n      pointPositions: r\n    };\n  }\n  _validatePositions(e, t, r, s, n) {\n    if (o(s) && e.serviceObb) return;\n    const d = t.length,\n      l = 3;\n    for (let o = 0; o < d; o++) {\n      const t = o * l;\n      c(oe, r[t], r[t + 1], r[t + 2]), a(s) && !y(s, oe) && (this._coordinatesOutsideExtentErrors < this._maxCoordinatesOutsideExtentErrors && i.getLogger(this.declaredClass).error(\"Service Error: Coordinates outside of layer extent\"), this._coordinatesOutsideExtentErrors + 1 === this._maxCoordinatesOutsideExtentErrors && i.getLogger(this.declaredClass).error(\"Maximum number of errors reached. Further errors are ignored.\"), this._coordinatesOutsideExtentErrors++), e.serviceObb || n.push(oe[0], oe[1], oe[2]);\n    }\n  }\n  _createGraphics(e, r, i, s) {\n    const o = e.length,\n      d = 3,\n      l = this._getObjectIdField(),\n      h = this.processor.graphicsCore,\n      u = new Array(),\n      c = this.view.spatialReference;\n    for (let p = 0; p < o; p++) {\n      const o = e[p],\n        g = {};\n      null != o && (g[l] = o);\n      const m = o ?? t.generateUID(),\n        y = p * d,\n        f = isNaN(r[y + 2]) ? void 0 : r[y + 2],\n        _ = b(r[y], r[y + 1], f, c),\n        v = this.loadedGraphics.get(m);\n      if (a(v)) (null == v.level || v.level < s) && (ae.property = \"geometry\", ae.graphic = v, ae.oldValue = n(v.geometry), ae.newValue = _, v.geometry = _, v.level = s, h.graphicUpdateHandler(ae)), u.push(v);else {\n        const e = t.generateUID();\n        u.push({\n          objectId: m,\n          uid: e,\n          geometry: _,\n          attributes: g,\n          visible: !0,\n          nodeIndex: i,\n          level: s\n        });\n      }\n    }\n    return u;\n  }\n  _updateNodeMemory(e) {\n    e.memory = 4096 + (a(e.numFeatures) ? e.numFeatures * this.processor.graphicsCore.usedMemoryPerGraphic : 0);\n  }\n  _cacheNodeData(e) {\n    const t = e.graphics.reduce((e, t) => v(t) + e, 512 + 8 * e.featureIds.length + 1024);\n    this._memCache.put(this._getMemCacheKey(e.node), e, t);\n  }\n  _getMemCacheKey(e) {\n    return `${e.index}`;\n  }\n  _removeAllNodeData() {\n    this.loadedGraphics.forEachNode((e, t) => {\n      if (e) {\n        const t = e.node;\n        this._updateNodeMemory(t), this._cacheNodeData(e);\n      }\n      this._controller.updateLoadStatus(t, !1);\n    }), this._treeDebugger && this._treeDebugger.update(), this.loadedGraphics.clear();\n  }\n  removeNode(e) {\n    const t = this._removeNodeStageData(e);\n    t && (this._updateNodeMemory(t.node), this._cacheNodeData(t));\n  }\n  _removeNodeStageData(e) {\n    const t = this.loadedGraphics.getNode(e);\n    return o(t) ? null : (this._controller.updateLoadStatus(e, !1), this.loadedGraphics.removeNode(e), this._treeDebugger && this._treeDebugger.update(), t);\n  }\n  async loadCachedNodeData(e) {\n    return this._memCache?.pop(this._getMemCacheKey(e));\n  }\n  async addCachedNodeData(e, t, r, s) {\n    this.loadedGraphics.hasNode(e.index) ? i.getLogger(this.declaredClass).error(\"I3S node \" + e.id + \" already added\") : (await this._i3sOverrides.apply(t.featureIds, r, s), this.loadedGraphics.addNode(e.index, t), this._controller.updateLoadStatus(e.index, !0), this._updateNodeMemory(e), t.attributeInfo = r, this._attributeValuesChanged(t), this._filterNode(t), this._treeDebugger && this._treeDebugger.update());\n  }\n  getLoadedNodeIds() {\n    const e = [];\n    return this.loadedGraphics.forEachNode(t => e.push(t.node.id)), e.sort();\n  }\n  getVisibleNodes() {\n    const e = new Array();\n    return this.loadedGraphics.forEachNode(t => e.push(t.node)), e;\n  }\n  getLoadedNodeIndices(e) {\n    this.loadedGraphics.forEachNode((t, r) => e.push(r));\n  }\n  getLoadedAttributes(e) {\n    const t = this.loadedGraphics.getNode(e);\n    if (a(t) && a(t.attributeInfo)) return t.attributeInfo.loadedAttributes;\n  }\n  getAttributeData(e) {\n    const t = this.loadedGraphics.getNode(e);\n    if (a(t) && a(t.attributeInfo)) return t.attributeInfo.attributeData;\n  }\n  _setAttributeData(e, t) {\n    const r = this.loadedGraphics.getNode(e);\n    o(r) || o(r.attributeInfo) || (r.attributeInfo.attributeData = t, this._attributeValuesChanged(r));\n  }\n  async updateAttributes(e, t, r) {\n    const i = this.loadedGraphics.getNode(e);\n    o(i) || (await this._i3sOverrides.apply(i.featureIds, t, r), i.attributeInfo = t, this._attributeValuesChanged(i));\n  }\n  _attributeValuesChanged(e) {\n    if (re(e), this._filterNode(e), this.processor.graphicsCore.labelsEnabled) {\n      const t = e.graphics.map(e => e.uid);\n      this.processor.graphicsCore.updateLabelingInfo(t);\n    }\n  }\n  _updateClippingExtent(e) {\n    return this._controller && this._controller.updateClippingArea(e), !1;\n  }\n  _getObjectIdField() {\n    return this.layer.objectIdField || _;\n  }\n  async _rendererChange(e, t) {\n    const {\n        layer: {\n          fieldsIndex: r\n        }\n      } = this,\n      i = new Set();\n    let s, o;\n    e ? (await e.collectRequiredFields(i, r), s = Array.from(i).sort()) : s = [], i.clear(), t ? (await t.collectRequiredFields(i, r), o = Array.from(i).sort()) : o = [], s.length === o.length && s.every((e, t) => s[t] === o[t]) || this._reloadAllNodes();\n  }\n  _rangeInfosChanged(e) {\n    null != e && e.length > 0 && i.getLogger(this.declaredClass).warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\");\n  }\n  _filterChange() {\n    this.loadedGraphics.forEachNode(e => this._filterNode(e));\n  }\n  _reloadAllNodes() {\n    this._removeAllNodeData(), this._controller && this._controller.restartNodeLoading();\n  }\n  _filterNode(e) {\n    const t = this.parsedDefinitionExpression,\n      i = this._excludeObjectIdsSorted,\n      s = this._getObjectIdField();\n    for (const a of e.graphics) {\n      const e = a.visible,\n        n = !t || this._evaluateClause(t, a),\n        d = o(i) || r(i, a.attributes[s]) < 0;\n      a.visible = n && d, e !== a.visible && (ae.graphic = a, ae.property = \"visible\", ae.oldValue = e, ae.newValue = a.visible, this.processor.graphicsCore.graphicUpdateHandler(ae));\n    }\n  }\n  createQuery() {\n    const e = {\n      outFields: [\"*\"],\n      returnGeometry: !0,\n      outSpatialReference: this.view.spatialReference\n    };\n    return a(this.filter) ? this.filter.createQuery(e) : new w(e);\n  }\n  queryFeatures(e, t) {\n    return this._queryEngine.executeQuery(this._ensureQuery(e), t?.signal);\n  }\n  queryObjectIds(e, t) {\n    return this._queryEngine.executeQueryForIds(this._ensureQuery(e), t?.signal);\n  }\n  queryFeatureCount(e, t) {\n    return this._queryEngine.executeQueryForCount(this._ensureQuery(e), t?.signal);\n  }\n  queryExtent(e, t) {\n    return this._queryEngine.executeQueryForExtent(this._ensureQuery(e), t?.signal);\n  }\n  _ensureQuery(e) {\n    return this._addDefinitionExpressionToQuery(o(e) ? this.createQuery() : w.from(e));\n  }\n  _setupQueryEngine() {\n    const e = () => this.processor.featureStore;\n    this._queryEngine = new D({\n      context: {\n        spatialReference: this.view.spatialReference,\n        layer: this.layer,\n        scheduler: this.view.resourceController.scheduler,\n        get featureStore() {\n          return e();\n        },\n        hasZ: this.hasZ,\n        hasM: this.hasM\n      },\n      priority: K.FEATURE_QUERY_ENGINE\n    });\n  }\n  getUsedMemory() {\n    return this.processor?.graphicsCore?.usedMemory ?? 0;\n  }\n  getUnloadedMemory() {\n    return .8 * ((this._controller?.unloadedMemoryEstimate ?? 0) + (this.processor?.graphicsCore?.unprocessedMemoryEstimate ?? 0));\n  }\n  ignoresMemoryFactor() {\n    return this._controller && this._controller.fixedFeatureTarget;\n  }\n  _handleEdits(e) {\n    j(this._attributeEditingContext, e);\n  }\n  get _attributeEditingContext() {\n    const e = this._getObjectIdField();\n    return {\n      sessions: this._interactiveEditingSessions,\n      fieldsIndex: this.layer.fieldsIndex,\n      objectIdField: e,\n      forEachNode: e => this.loadedGraphics.forEachNode(t => e(t.node, t.featureIds)),\n      attributeStorageInfo: this.i3slayer.attributeStorageInfo ?? [],\n      i3sOverrides: this._i3sOverrides,\n      getAttributeData: e => this.getAttributeData(e),\n      setAttributeData: (t, r, i) => {\n        this._setAttributeData(t, r);\n        const s = this.loadedGraphics.getNode(t);\n        if (a(i)) {\n          const t = this.loadedGraphics.get(i.attributes[e]);\n          a(t) && this.processor.graphicsCore.recreateGraphics([t]);\n        } else a(s) && this.processor.graphicsCore.recreateGraphics(s.graphics);\n      },\n      clearMemCache: () => {}\n    };\n  }\n  get performanceInfo() {\n    const e = {\n      displayedNumberOfFeatures: this.loadedGraphics.length,\n      maximumNumberOfFeatures: this.maximumNumberOfFeatures,\n      totalNumberOfFeatures: -1,\n      nodes: this.loadedGraphics.nodeCount,\n      core: this.processor.graphicsCore.performanceInfo\n    };\n    return this._controller && this._controller.updateStats(e), e;\n  }\n  get test() {\n    return {\n      controller: this._controller,\n      numNodes: this.loadedGraphics.nodeCount,\n      loadedGraphics: this.loadedGraphics\n    };\n  }\n};\ne([h()], $.prototype, \"processor\", void 0), e([h({\n  type: I\n})], $.prototype, \"filter\", void 0), e([h()], $.prototype, \"loadedGraphics\", void 0), e([h()], $.prototype, \"i3slayer\", null), e([h()], $.prototype, \"_controller\", void 0), e([h()], $.prototype, \"updating\", void 0), e([h()], $.prototype, \"suspended\", void 0), e([h()], $.prototype, \"holeFilling\", void 0), e([h(B)], $.prototype, \"updatingProgress\", void 0), e([h()], $.prototype, \"updatingProgressValue\", null), e([h(Y.requiredFields)], $.prototype, \"requiredFields\", null), e([h(Y.availableFields)], $.prototype, \"availableFields\", void 0), e([h()], $.prototype, \"_fieldsHelper\", void 0), e([h({\n  type: Number\n})], $.prototype, \"maximumNumberOfFeatures\", null), e([h({\n  readOnly: !0\n})], $.prototype, \"maximumNumberOfFeaturesExceeded\", null), e([h()], $.prototype, \"_excludeObjectIdsSorted\", null), e([h({\n  readOnly: !0\n})], $.prototype, \"lodFactor\", null), e([h({\n  readOnly: !0\n})], $.prototype, \"hasM\", null), e([h({\n  readOnly: !0\n})], $.prototype, \"hasZ\", null), $ = e([u(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")], $);\nconst J = $;\nfunction X(e) {\n  return \"pointData\" in e;\n}\nfunction ee(e) {\n  return \"geometryBuffer\" in e && null !== e.geometryBuffer;\n}\nfunction te(e, t, r) {\n  const i = t.attributeInfo;\n  if (o(i) || o(i.loadedAttributes) || o(i.attributeData)) return !1;\n  let s = !1;\n  for (const {\n    name: o\n  } of i.loadedAttributes) if (i.attributeData[o]) {\n    const t = R(i.attributeData[o], r);\n    t !== e.attributes[o] && (e.attributes[o] = t, s = !0);\n  }\n  return s;\n}\nfunction re(e) {\n  const t = e.attributeInfo,\n    r = e.node.index;\n  if (!(o(t) || o(t.loadedAttributes) || o(t.attributeData))) for (let i = 0; i < e.graphics.length; i++) {\n    const s = e.graphics[i];\n    if (s.nodeIndex === r) {\n      s.attributes || (s.attributes = {});\n      for (const {\n        name: e\n      } of t.loadedAttributes) t.attributeData[e] && (s.attributes[e] = R(t.attributeData[e], i));\n    }\n  }\n}\nfunction ie(e, t) {\n  return e.xmin -= t, e.ymin -= t, e.xmax += t, e.ymax += t, null != e.zmin && null != e.zmax && (e.zmin -= t, e.zmax += t), null != e.mmin && null != e.mmax && (e.mmin -= t, e.mmax += t), e;\n}\nconst se = {\n    2: {\n      type: \"Embedded\",\n      params: {\n        type: \"points\",\n        vertexAttributes: {\n          position: [0, 0]\n        }\n      }\n    },\n    3: {\n      type: \"Embedded\",\n      params: {\n        type: \"points\",\n        vertexAttributes: {\n          position: [0, 0, 0]\n        }\n      }\n    }\n  },\n  oe = p(),\n  ae = {\n    graphic: null,\n    property: null,\n    oldValue: null,\n    newValue: null\n  };\nexport { J as default };","map":{"version":3,"names":["_","e","t","binaryIndexOf","r","i","destroyMaybe","s","isNone","o","isSome","a","unwrap","n","initial","d","watch","l","property","h","subclass","u","c","p","projectBuffer","g","projectVectorToVector","m","extentContainsCoords3D","y","getGeometryZScaler","f","fallbackObjectIDAttribute","makeDehydratedPoint","b","estimateSize","v","hydrateGraphic","x","E","I","w","I3SPointsWorkerHandle","N","LayerView3D","C","O","QueryEngine","D","createInteractiveEditSession","F","processAttributeEdits","j","I3SGraphicsMap","S","I3SOverrides","G","checkRecyclable","A","checkSpatialReferences","L","containsDraco","P","whenGraphicAttributes","V","getCachedAttributeValue","R","DefinitionExpressionSceneLayerView","M","defineFieldProperties","H","PopupSceneLayerView","q","SceneLayerViewRequiredFields","U","Q","compute","T","updatingProgress","B","Attribute","k","newDoubleArray","z","UpdatePolicy","W","Z","TaskPriority","K","Y","$","constructor","arguments","type","_queryEngine","_memCache","_interactiveEditingSessions","Map","loadedGraphics","te","processor","graphicsCore","recreateGraphics","holeFilling","progressiveLoadFactor","supportsHeightUnitConversion","_coordinatesOutsideExtentErrors","_maxCoordinatesOutsideExtentErrors","tryRecycleWith","url","layer","_i3sOverrides","isEmpty","load","then","destroy","view","resourceController","memoryController","_setupQueryEngine","resetObjectStates","initialize","addResolvingPromise","indexInfo","spatialReference","viewingMode","_fieldsHelper","layerView","updatingHandles","add","rangeInfos","_rangeInfosChanged","renderer","_rendererChange","parsedDefinitionExpression","_excludeObjectIdsSorted","_filterChange","handles","I3S_TREE_SHOW_TILES","_treeDebugger","_controller","crsIndex","_ref","I3STreeDebugger","lv","nodeSR","_set","owner","preferredUpdatePolicy","ASYNC","scaleVisibilityEnabled","filterVisibilityEnabled","timeExtentEnabled","frustumVisibilityEnabled","elevationAlignmentEnabled","elevationFeatureExpressionEnabled","setUidToIdOnAdd","dataExtent","fullExtent","updateClippingExtent","_updateClippingExtent","elevationAlignment","events","on","updateElevationChanged","extent","_verticalScale","initializePromise","newCache","uid","geometryDefinitions","_worker","immediate","schedule","addPromise","result","_handleEdits","when","maximumNumberOfFeatures","featureTarget","suspended","_removeAllNodeData","clear","i3slayer","updatingProgressValue","requiredFields","displayFeatureLimit","_override","fixedFeatureTarget","_clearOverride","maximumNumberOfFeaturesExceeded","useMaximumNumberOfFeatures","leavesReached","excludeObjectIds","length","toArray","sort","lodFactor","semantic","qualitySettings","sceneService","point","hasM","hasZ","_getObjectIdField","nodes","getHit","find","attributes","sourceLayer","graphic","whenGraphicBounds","computeAttachmentOrigin","canResume","rootNodeVisible","isUpdating","updating","layerFilterUpdating","highlight","objectIdField","updatePolicy","effectiveUpdatePolicy","_attributeEditingContext","_decompressBinaryPointData","geometryBuffer","invoke","Error","positionData","positions","featureIds","addNode","ee","X","hasNode","index","getLogger","declaredClass","error","id","ie","clone","pointPositions","_extractBinaryPointPositions","_extractLegacyPointPositions","_validatePositions","crsVertex","level","graphics","_createGraphics","attributeInfo","attributeDataInfo","node","apply","numFeatures","_updateNodeMemory","re","_computeObb","updateVisibility","isGeometryVisible","_cacheNodeData","geometry","_stage","renderView","objectAndLayerIdRenderHelper","setUidToObjectAndLayerId","popupEnabled","resources","updateLoadStatus","_filterNode","update","isGeographic","renderSpatialReference","serviceObb","center","isNodeLoaded","isNodeReloading","updateNodeState","Math","abs","Array","from","pointData","featureDataPosition","geometries","se","params","vertexAttributes","position","NaN","push","oe","generateUID","isNaN","get","ae","oldValue","newValue","graphicUpdateHandler","objectId","visible","nodeIndex","memory","usedMemoryPerGraphic","reduce","put","_getMemCacheKey","forEachNode","removeNode","_removeNodeStageData","getNode","loadCachedNodeData","pop","addCachedNodeData","_attributeValuesChanged","getLoadedNodeIds","getVisibleNodes","getLoadedNodeIndices","getLoadedAttributes","loadedAttributes","getAttributeData","attributeData","_setAttributeData","updateAttributes","labelsEnabled","map","updateLabelingInfo","updateClippingArea","fieldsIndex","Set","collectRequiredFields","every","_reloadAllNodes","warn","restartNodeLoading","_evaluateClause","createQuery","outFields","returnGeometry","outSpatialReference","filter","queryFeatures","executeQuery","_ensureQuery","signal","queryObjectIds","executeQueryForIds","queryFeatureCount","executeQueryForCount","queryExtent","executeQueryForExtent","_addDefinitionExpressionToQuery","featureStore","context","scheduler","priority","FEATURE_QUERY_ENGINE","getUsedMemory","usedMemory","getUnloadedMemory","unloadedMemoryEstimate","unprocessedMemoryEstimate","ignoresMemoryFactor","sessions","attributeStorageInfo","i3sOverrides","setAttributeData","clearMemCache","performanceInfo","displayedNumberOfFeatures","totalNumberOfFeatures","nodeCount","core","updateStats","test","controller","numNodes","prototype","availableFields","Number","readOnly","J","name","xmin","ymin","xmax","ymax","zmin","zmax","mmin","mmax","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{binaryIndexOf as r}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s,isNone as o,isSome as a,unwrap as n}from\"../../../core/maybe.js\";import{initial as d,watch as l}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../core/accessorSupport/decorators/subclass.js\";import{s as c}from\"../../../chunks/vec3.js\";import{c as p}from\"../../../chunks/vec3f64.js\";import{projectBuffer as g,projectVectorToVector as m}from\"../../../geometry/projection.js\";import{extentContainsCoords3D as y}from\"../../../geometry/support/contains.js\";import{getGeometryZScaler as f}from\"../../../geometry/support/zscale.js\";import{fallbackObjectIDAttribute as _}from\"../../../layers/LayerConstants.js\";import{makeDehydratedPoint as b,estimateSize as v}from\"../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as x}from\"../../../layers/graphics/hydratedFeatures.js\";import E from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import I from\"../../../layers/support/FeatureFilter.js\";import w from\"../../../rest/support/Query.js\";import{I3SPointsWorkerHandle as N}from\"./I3SPointsWorkerHandle.js\";import{LayerView3D as C}from\"./LayerView3D.js\";import O from\"./graphics/Graphics3DFeatureProcessor.js\";import{QueryEngine as D}from\"./graphics/QueryEngine.js\";import{createInteractiveEditSession as F,processAttributeEdits as j}from\"./i3s/attributeEditing.js\";import{I3SGraphicsMap as S}from\"./i3s/I3SGraphicsMap.js\";import{I3SOverrides as G}from\"./i3s/I3SOverrides.js\";import{checkRecyclable as A,checkSpatialReferences as L,containsDraco as P,whenGraphicAttributes as V,getCachedAttributeValue as R}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as M}from\"./support/DefinitionExpressionSceneLayerView.js\";import{defineFieldProperties as H}from\"./support/fieldProperties.js\";import{PopupSceneLayerView as q}from\"./support/PopupSceneLayerView.js\";import{SceneLayerViewRequiredFields as U}from\"./support/SceneLayerViewRequiredFields.js\";import Q from\"../support/debugFlags.js\";import{compute as T}from\"../support/orientedBoundingBox.js\";import{updatingProgress as B}from\"../support/updatingProperties.js\";import{Attribute as k}from\"../webgl-engine/lib/Attribute.js\";import{newDoubleArray as z}from\"../webgl-engine/lib/DoubleArray.js\";import{UpdatePolicy as W}from\"../webgl-engine/lib/UpdatePolicy.js\";import Z from\"../../layers/SceneLayerView.js\";import{TaskPriority as K}from\"../../support/Scheduler.js\";const Y=H();let $=class extends(M(q(C(Z)))){constructor(){super(...arguments),this.type=\"scene-layer-graphics-3d\",this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this.loadedGraphics=new S(((e,t,r)=>te(e,t,r)),(e=>this.processor.graphicsCore.recreateGraphics(e))),this.holeFilling=\"always\",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}tryRecycleWith(e,t){return e.url===this.layer.url&&this._i3sOverrides.isEmpty?e.load(t).then((()=>{A(this.layer,e,this._i3sOverrides),this.layer=e,this._i3sOverrides.destroy();const t=this.view.resourceController?.memoryController;this._i3sOverrides=new G({view:this.view,layer:e,memoryController:t}),s(this._queryEngine),this._setupQueryEngine(),this.processor.resetObjectStates()})):null}initialize(){this.addResolvingPromise(this.layer.indexInfo);const e=this.view.resourceController?.memoryController;this._i3sOverrides=new G({view:this.view,layer:this.layer,memoryController:e}),L(this.layer,this.view.spatialReference,this.view.viewingMode),this._fieldsHelper=new U({layerView:this}),this.updatingHandles.add((()=>this.layer.rangeInfos),(e=>this._rangeInfosChanged(e)),d),this.updatingHandles.add((()=>this.layer.renderer),((e,t)=>this._rendererChange(e,t))),this.updatingHandles.add((()=>[this.parsedDefinitionExpression,this._excludeObjectIdsSorted]),(()=>this._filterChange())),this.handles.add(l((()=>Q.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&Q.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||Q.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}),d)),this._set(\"processor\",new O({owner:this,preferredUpdatePolicy:W.ASYNC,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,setUidToIdOnAdd:!1,dataExtent:this.layer.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),this.processor.elevationAlignment?.events.on(\"invalidate-elevation\",(e=>this._controller.updateElevationChanged(e.extent,e.spatialReference))),this.supportsHeightUnitConversion&&(this._verticalScale=f(\"point\",this.layer.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.processor.initializePromise),this._memCache=this.view.resourceController.memoryController.newCache(this.uid),this._controller=new E({layerView:this,scaleVisibilityEnabled:!1}),P(this.layer.geometryDefinitions)&&(this._worker=new N((e=>this.view.resourceController.immediate.schedule(e)))),this.handles.add(this.layer.on(\"apply-edits\",(e=>this.updatingHandles.addPromise(e.result)))),this.handles.add(this.layer.on(\"edits\",(e=>this._handleEdits(e)))),this.when((()=>{this._setupQueryEngine(),this.updatingHandles.add((()=>this.maximumNumberOfFeatures),(e=>this._controller.featureTarget=e),d),this.updatingHandles.add((()=>this.suspended),(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=s(this._treeDebugger),this._i3sOverrides=s(this._i3sOverrides),this._set(\"processor\",s(this.processor)),this._controller=s(this._controller),this._queryEngine=s(this._queryEngine),this._worker=s(this._worker),this._memCache=s(this._memCache),this.loadedGraphics.clear(),this._fieldsHelper=s(this._fieldsHelper)}get i3slayer(){return this.layer}get updatingProgressValue(){return this._controller?.updatingProgress??1}get requiredFields(){return this._fieldsHelper?.requiredFields??[]}get maximumNumberOfFeatures(){const e=this.processor?.graphicsCore?.displayFeatureLimit;return e?.maximumNumberOfFeatures??0}set maximumNumberOfFeatures(e){null!=e?(this._override(\"maximumNumberOfFeatures\",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride(\"maximumNumberOfFeatures\"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){return!this.suspended&&(!!this._controller?.useMaximumNumberOfFeatures&&!this._controller.leavesReached)}get _excludeObjectIdsSorted(){const e=this.layer.excludeObjectIds;return e.length?e.toArray().sort(((e,t)=>e-t)):null}get lodFactor(){return\"Labels\"===this.layer.semantic?1:this.view.qualitySettings.sceneService.point.lodFactor}get hasM(){return!1}get hasZ(){return!0}async whenGraphicAttributes(e,t){return V(this.layer,e,this._getObjectIdField(),t,(()=>[...this.loadedGraphics.nodes()]))}getHit(e){if(!this.loadedGraphics)return null;const t=x(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t&&t.attributes&&t.attributes[r]?(t.layer=this.layer,t.sourceLayer=this.layer,{type:\"graphic\",graphic:t,layer:t.layer}):null}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor.computeAttachmentOrigin(e,t)}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}isUpdating(){return!!(this._controller?.updating||this.processor?.updating||this._fieldsHelper?.updating||this.layerFilterUpdating)}highlight(e){return this.processor.highlight(e,this.layer.objectIdField)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return F(this._attributeEditingContext,e)}async _decompressBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};o(this._worker)&&(this._worker=new N((e=>this.view.resourceController.immediate.schedule(e))));const i=await this._worker.invoke(r,t);if(o(i))throw new Error(\"Failed to decompress Draco point data\");return{positionData:i.positions,featureIds:i.featureIds}}async addNode(e,t,r){if(!ee(t)&&!X(t))throw new Error;if(this.loadedGraphics.hasNode(e.index))return void i.getLogger(this.declaredClass).error(\"I3S node \"+e.id+\" already added\");const s=a(this.layer.fullExtent)?ie(this.layer.fullExtent.clone(),.5):null,o=[],{featureIds:n,pointPositions:d}=ee(t)?await this._extractBinaryPointPositions(e,t,r):this._extractLegacyPointPositions(t);this._validatePositions(e,n,d,s,o);const l=this._controller.crsVertex,h=this.view.spatialReference;g(d,l,0,d,h,0,n.length);const u=ee(t)?e.level:0,c={graphics:this._createGraphics(n,d,e.index,u),featureIds:n,attributeInfo:t.attributeDataInfo,node:e};if(await this._i3sOverrides.apply(c.featureIds,t.attributeDataInfo,r),e.numFeatures=c.graphics.length,this._updateNodeMemory(e),re(c),o.length>0&&(this._computeObb(e,o,l),this._controller.updateVisibility(e.index)),!this._controller.isGeometryVisible(e))return void this._cacheNodeData(c);if(a(this._verticalScale))for(const i of c.graphics)this._verticalScale(i.geometry);const p=this.view._stage.renderView.objectAndLayerIdRenderHelper;if(a(p))for(let i=0;i<c.featureIds.length;i++){const e=c.featureIds[i];p.setUidToObjectAndLayerId(e,c.graphics[i].uid,this.layer.id,this.layer.uid,this.layer.popupEnabled,c.node.resources.attributes,i)}this.loadedGraphics.addNode(e.index,c),this._controller.updateLoadStatus(e.index,!0),this._filterNode(c),this._treeDebugger&&this._treeDebugger.update()}_computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;g(t,r,0,t,s,0,t.length/3),e.serviceObb=T(new k(t,3)),i.isGeographic&&m(e.serviceObb.center,s,e.serviceObb.center,i)}isNodeLoaded(e){return this.loadedGraphics.hasNode(e)}isNodeReloading(){return!1}updateNodeState(){}async _extractBinaryPointPositions(e,t,r){const i=await this._decompressBinaryPointData(t,r),s=i.positionData,o=3,n=s.length/o,d=z(3*n),l=a(e.serviceObb)?e.serviceObb.center:[0,0,0],h=Math.abs(l[2])*2**-20;for(let a=0;a<n;a++){const e=a*o;d[e+0]=s[e+0]+l[0],d[e+1]=s[e+1]+l[1],d[e+2]=s[e+2]+l[2],Math.abs(d[e+2])<h&&(d[e+2]=0)}return{featureIds:i.featureIds?Array.from(i.featureIds):[],pointPositions:d}}_extractLegacyPointPositions(e){const t=e.pointData.length,r=z(3*t),i=new Array;for(let s=0;s<t;s++){const t=e.pointData[s],o=t.featureDataPosition,a=o.length,n=t.geometries?.[0]??se[a],d=t.featureIds[0];if(\"Embedded\"!==n.type||\"points\"!==n.params.type||a<2||a>3)continue;const l=n.params.vertexAttributes?.position??[0,0,0],h=3*i.length;r[h+0]=o[0]+l[0],r[h+1]=o[1]+l[1],r[h+2]=3===a?o[2]+l[2]:NaN,i.push(d)}return{featureIds:i,pointPositions:r}}_validatePositions(e,t,r,s,n){if(o(s)&&e.serviceObb)return;const d=t.length,l=3;for(let o=0;o<d;o++){const t=o*l;c(oe,r[t],r[t+1],r[t+2]),a(s)&&!y(s,oe)&&(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&i.getLogger(this.declaredClass).error(\"Service Error: Coordinates outside of layer extent\"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&i.getLogger(this.declaredClass).error(\"Maximum number of errors reached. Further errors are ignored.\"),this._coordinatesOutsideExtentErrors++),e.serviceObb||n.push(oe[0],oe[1],oe[2])}}_createGraphics(e,r,i,s){const o=e.length,d=3,l=this._getObjectIdField(),h=this.processor.graphicsCore,u=new Array,c=this.view.spatialReference;for(let p=0;p<o;p++){const o=e[p],g={};null!=o&&(g[l]=o);const m=o??t.generateUID(),y=p*d,f=isNaN(r[y+2])?void 0:r[y+2],_=b(r[y],r[y+1],f,c),v=this.loadedGraphics.get(m);if(a(v))(null==v.level||v.level<s)&&(ae.property=\"geometry\",ae.graphic=v,ae.oldValue=n(v.geometry),ae.newValue=_,v.geometry=_,v.level=s,h.graphicUpdateHandler(ae)),u.push(v);else{const e=t.generateUID();u.push({objectId:m,uid:e,geometry:_,attributes:g,visible:!0,nodeIndex:i,level:s})}}return u}_updateNodeMemory(e){e.memory=4096+(a(e.numFeatures)?e.numFeatures*this.processor.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>v(t)+e),512+8*e.featureIds.length+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this.loadedGraphics.forEachNode(((e,t)=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}this._controller.updateLoadStatus(t,!1)})),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this.loadedGraphics.getNode(e);return o(t)?null:(this._controller.updateLoadStatus(e,!1),this.loadedGraphics.removeNode(e),this._treeDebugger&&this._treeDebugger.update(),t)}async loadCachedNodeData(e){return this._memCache?.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,r,s){this.loadedGraphics.hasNode(e.index)?i.getLogger(this.declaredClass).error(\"I3S node \"+e.id+\" already added\"):(await this._i3sOverrides.apply(t.featureIds,r,s),this.loadedGraphics.addNode(e.index,t),this._controller.updateLoadStatus(e.index,!0),this._updateNodeMemory(e),t.attributeInfo=r,this._attributeValuesChanged(t),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update())}getLoadedNodeIds(){const e=[];return this.loadedGraphics.forEachNode((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this.loadedGraphics.forEachNode((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this.loadedGraphics.forEachNode(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this.loadedGraphics.getNode(e);if(a(t)&&a(t.attributeInfo))return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this.loadedGraphics.getNode(e);if(a(t)&&a(t.attributeInfo))return t.attributeInfo.attributeData}_setAttributeData(e,t){const r=this.loadedGraphics.getNode(e);o(r)||o(r.attributeInfo)||(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this.loadedGraphics.getNode(e);o(i)||(await this._i3sOverrides.apply(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){if(re(e),this._filterNode(e),this.processor.graphicsCore.labelsEnabled){const t=e.graphics.map((e=>e.uid));this.processor.graphicsCore.updateLabelingInfo(t)}}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||_}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&i.getLogger(this.declaredClass).warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")}_filterChange(){this.loadedGraphics.forEachNode((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const t=this.parsedDefinitionExpression,i=this._excludeObjectIdsSorted,s=this._getObjectIdField();for(const a of e.graphics){const e=a.visible,n=!t||this._evaluateClause(t,a),d=o(i)||r(i,a.attributes[s])<0;a.visible=n&&d,e!==a.visible&&(ae.graphic=a,ae.property=\"visible\",ae.oldValue=e,ae.newValue=a.visible,this.processor.graphicsCore.graphicUpdateHandler(ae))}}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return a(this.filter)?this.filter.createQuery(e):new w(e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),t?.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),t?.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),t?.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),t?.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(o(e)?this.createQuery():w.from(e))}_setupQueryEngine(){const e=()=>this.processor.featureStore;this._queryEngine=new D({context:{spatialReference:this.view.spatialReference,layer:this.layer,scheduler:this.view.resourceController.scheduler,get featureStore(){return e()},hasZ:this.hasZ,hasM:this.hasM},priority:K.FEATURE_QUERY_ENGINE})}getUsedMemory(){return this.processor?.graphicsCore?.usedMemory??0}getUnloadedMemory(){return.8*((this._controller?.unloadedMemoryEstimate??0)+(this.processor?.graphicsCore?.unprocessedMemoryEstimate??0))}ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}_handleEdits(e){j(this._attributeEditingContext,e)}get _attributeEditingContext(){const e=this._getObjectIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,forEachNode:e=>this.loadedGraphics.forEachNode((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo??[],i3sOverrides:this._i3sOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this._setAttributeData(t,r);const s=this.loadedGraphics.getNode(t);if(a(i)){const t=this.loadedGraphics.get(i.attributes[e]);a(t)&&this.processor.graphicsCore.recreateGraphics([t])}else a(s)&&this.processor.graphicsCore.recreateGraphics(s.graphics)},clearMemCache:()=>{}}}get performanceInfo(){const e={displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:this.maximumNumberOfFeatures,totalNumberOfFeatures:-1,nodes:this.loadedGraphics.nodeCount,core:this.processor.graphicsCore.performanceInfo};return this._controller&&this._controller.updateStats(e),e}get test(){return{controller:this._controller,numNodes:this.loadedGraphics.nodeCount,loadedGraphics:this.loadedGraphics}}};e([h()],$.prototype,\"processor\",void 0),e([h({type:I})],$.prototype,\"filter\",void 0),e([h()],$.prototype,\"loadedGraphics\",void 0),e([h()],$.prototype,\"i3slayer\",null),e([h()],$.prototype,\"_controller\",void 0),e([h()],$.prototype,\"updating\",void 0),e([h()],$.prototype,\"suspended\",void 0),e([h()],$.prototype,\"holeFilling\",void 0),e([h(B)],$.prototype,\"updatingProgress\",void 0),e([h()],$.prototype,\"updatingProgressValue\",null),e([h(Y.requiredFields)],$.prototype,\"requiredFields\",null),e([h(Y.availableFields)],$.prototype,\"availableFields\",void 0),e([h()],$.prototype,\"_fieldsHelper\",void 0),e([h({type:Number})],$.prototype,\"maximumNumberOfFeatures\",null),e([h({readOnly:!0})],$.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([h()],$.prototype,\"_excludeObjectIdsSorted\",null),e([h({readOnly:!0})],$.prototype,\"lodFactor\",null),e([h({readOnly:!0})],$.prototype,\"hasM\",null),e([h({readOnly:!0})],$.prototype,\"hasZ\",null),$=e([u(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")],$);const J=$;function X(e){return\"pointData\"in e}function ee(e){return\"geometryBuffer\"in e&&null!==e.geometryBuffer}function te(e,t,r){const i=t.attributeInfo;if(o(i)||o(i.loadedAttributes)||o(i.attributeData))return!1;let s=!1;for(const{name:o}of i.loadedAttributes)if(i.attributeData[o]){const t=R(i.attributeData[o],r);t!==e.attributes[o]&&(e.attributes[o]=t,s=!0)}return s}function re(e){const t=e.attributeInfo,r=e.node.index;if(!(o(t)||o(t.loadedAttributes)||o(t.attributeData)))for(let i=0;i<e.graphics.length;i++){const s=e.graphics[i];if(s.nodeIndex===r){s.attributes||(s.attributes={});for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(s.attributes[e]=R(t.attributeData[e],i))}}}function ie(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,null!=e.zmin&&null!=e.zmax&&(e.zmin-=t,e.zmax+=t),null!=e.mmin&&null!=e.mmax&&(e.mmin-=t,e.mmax+=t),e}const se={2:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0]}}},3:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0,0]}}}},oe=p(),ae={graphic:null,property:null,oldValue:null,newValue:null};export{J as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}