{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../../geometry.js\";\nimport { LengthDimensionMeasureType as e } from \"../../../../analysis/dimensionUtils.js\";\nimport \"../../../../core/has.js\";\nimport { isNone as t, isSome as n } from \"../../../../core/maybe.js\";\nimport { k as i, g as o, e as r, b as a, p as s } from \"../../../../chunks/vec3.js\";\nimport { sv3d as d } from \"../../../../geometry/support/vectorStacks.js\";\nimport { automaticHeadingFromCamera as c } from \"./lengthDimensionManipulatorUtils.js\";\nimport { isGeodesicDimension as l, directUp as m, directStartToEnd as P } from \"./lengthDimensionUtils.js\";\nimport { settings as p } from \"./settings.js\";\nimport u from \"../../../../geometry/Point.js\";\nvar f;\nfunction g(e, t) {\n  return {\n    enabled: t.effectiveFeatureEnabled,\n    elevationAlignedStartPoint: e.elevationAlignedStartPoint,\n    elevationAlignedEndPoint: e.elevationAlignedEndPoint,\n    geometry: e.geometry\n  };\n}\nfunction v(e, n) {\n  if (l(e)) return f.Direct;\n  if (!e.enabled) return null;\n  const {\n    geometry: c\n  } = e;\n  if (t(c) || i(c.directSegment.startRenderSpace, c.directSegment.endRenderSpace)) return null;\n  const {\n      constraintThresholdPx: u\n    } = p,\n    {\n      camera: g\n    } = n.state,\n    v = m(d.get(), c, n.renderCoordsHelper),\n    y = P(d.get(), c),\n    S = o(d.get(), v, r(y, v)),\n    A = a(d.get(), y, S),\n    R = s(A),\n    j = s(S),\n    {\n      startRenderSpace: z,\n      endRenderSpace: x\n    } = c.directSegment,\n    h = Math.max(g.computeRenderPixelSizeAt(z) * u, g.computeRenderPixelSizeAt(x) * u) ** 2;\n  return R < h ? f.Vertical : j < h ? f.Horizontal : null;\n}\nfunction y(e, n, _ref) {\n  let {\n    constraint: i,\n    view: o\n  } = _ref;\n  const {\n    unconstrainedGeometry: r\n  } = e;\n  if (t(r)) return;\n  const {\n      renderCoordsHelper: a,\n      spatialReference: s\n    } = o,\n    {\n      startRenderSpace: d,\n      endRenderSpace: c\n    } = r.directSegment,\n    l = a.fromRenderCoords(d, new u(), s),\n    m = a.fromRenderCoords(c, new u(), s);\n  let P;\n  P = \"start\" === n ? {\n    startPoint: l\n  } : {\n    endPoint: m\n  }, S(e, P, {\n    constraint: i,\n    elevationAlignedStartPoint: e.elevationAlignedStartPoint,\n    elevationAlignedEndPoint: e.elevationAlignedEndPoint,\n    unconstrainedGeometry: r,\n    view: o\n  });\n}\nfunction S(i, o, r) {\n  const {\n      constraint: a,\n      elevationAlignedStartPoint: s,\n      elevationAlignedEndPoint: d,\n      unconstrainedGeometry: l,\n      view: m\n    } = r,\n    {\n      dimension: P,\n      previousConstraint: p,\n      preConstraintProperties: u\n    } = i;\n  if (t(s) || t(d)) return;\n  const g = () => {\n    \"startPoint\" in o ? P.startPoint = o.startPoint : \"endPoint\" in o && (P.endPoint = o.endPoint);\n  };\n  if (t(a)) g(), n(p) && n(u) && (P.measureType = u.measureType, P.orientation = u.orientation);else switch (P.measureType = e.Direct, a) {\n    case f.Horizontal:\n      if (a !== p && (P.orientation = 0), \"startPoint\" in o) {\n        const e = o.startPoint;\n        n(e) && (e.z = d.z), P.startPoint = e;\n      } else if (\"endPoint\" in o) {\n        const e = o.endPoint;\n        n(e) && (e.z = s.z), P.endPoint = e;\n      }\n      break;\n    case f.Vertical:\n      if (a !== p && (P.orientation = c(l, m)), \"startPoint\" in o) {\n        const e = o.startPoint;\n        n(e) && (e.x = d.x, e.y = d.y), P.startPoint = e;\n      } else if (\"endPoint\" in o) {\n        const e = o.endPoint;\n        n(e) && (e.x = s.x, e.y = s.y), P.endPoint = e;\n      }\n      break;\n    case f.Direct:\n      a !== p && n(u) && (P.orientation = u.orientation), g();\n  }\n  i.previousConstraint = a, i.unconstrainedGeometry = l;\n}\n!function (e) {\n  e[e.Horizontal = 0] = \"Horizontal\", e[e.Vertical = 1] = \"Vertical\", e[e.Direct = 2] = \"Direct\";\n}(f || (f = {}));\nexport { f as LengthDimensionConstraint, S as applyConstraint, v as computeConstraint, g as constraintDependencies, y as reapplyConstraint };","map":{"version":3,"names":["LengthDimensionMeasureType","e","isNone","t","isSome","n","k","i","g","o","r","b","a","p","s","sv3d","d","automaticHeadingFromCamera","c","isGeodesicDimension","l","directUp","m","directStartToEnd","P","settings","u","f","enabled","effectiveFeatureEnabled","elevationAlignedStartPoint","elevationAlignedEndPoint","geometry","v","Direct","directSegment","startRenderSpace","endRenderSpace","constraintThresholdPx","camera","state","get","renderCoordsHelper","y","S","A","R","j","z","x","h","Math","max","computeRenderPixelSizeAt","Vertical","Horizontal","_ref","constraint","view","unconstrainedGeometry","spatialReference","fromRenderCoords","startPoint","endPoint","dimension","previousConstraint","preConstraintProperties","measureType","orientation","LengthDimensionConstraint","applyConstraint","computeConstraint","constraintDependencies","reapplyConstraint"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/analysis/Dimension/lengthDimensionConstraintUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import{LengthDimensionMeasureType as e}from\"../../../../analysis/dimensionUtils.js\";import\"../../../../core/has.js\";import{isNone as t,isSome as n}from\"../../../../core/maybe.js\";import{k as i,g as o,e as r,b as a,p as s}from\"../../../../chunks/vec3.js\";import{sv3d as d}from\"../../../../geometry/support/vectorStacks.js\";import{automaticHeadingFromCamera as c}from\"./lengthDimensionManipulatorUtils.js\";import{isGeodesicDimension as l,directUp as m,directStartToEnd as P}from\"./lengthDimensionUtils.js\";import{settings as p}from\"./settings.js\";import u from\"../../../../geometry/Point.js\";var f;function g(e,t){return{enabled:t.effectiveFeatureEnabled,elevationAlignedStartPoint:e.elevationAlignedStartPoint,elevationAlignedEndPoint:e.elevationAlignedEndPoint,geometry:e.geometry}}function v(e,n){if(l(e))return f.Direct;if(!e.enabled)return null;const{geometry:c}=e;if(t(c)||i(c.directSegment.startRenderSpace,c.directSegment.endRenderSpace))return null;const{constraintThresholdPx:u}=p,{camera:g}=n.state,v=m(d.get(),c,n.renderCoordsHelper),y=P(d.get(),c),S=o(d.get(),v,r(y,v)),A=a(d.get(),y,S),R=s(A),j=s(S),{startRenderSpace:z,endRenderSpace:x}=c.directSegment,h=Math.max(g.computeRenderPixelSizeAt(z)*u,g.computeRenderPixelSizeAt(x)*u)**2;return R<h?f.Vertical:j<h?f.Horizontal:null}function y(e,n,{constraint:i,view:o}){const{unconstrainedGeometry:r}=e;if(t(r))return;const{renderCoordsHelper:a,spatialReference:s}=o,{startRenderSpace:d,endRenderSpace:c}=r.directSegment,l=a.fromRenderCoords(d,new u,s),m=a.fromRenderCoords(c,new u,s);let P;P=\"start\"===n?{startPoint:l}:{endPoint:m},S(e,P,{constraint:i,elevationAlignedStartPoint:e.elevationAlignedStartPoint,elevationAlignedEndPoint:e.elevationAlignedEndPoint,unconstrainedGeometry:r,view:o})}function S(i,o,r){const{constraint:a,elevationAlignedStartPoint:s,elevationAlignedEndPoint:d,unconstrainedGeometry:l,view:m}=r,{dimension:P,previousConstraint:p,preConstraintProperties:u}=i;if(t(s)||t(d))return;const g=()=>{\"startPoint\"in o?P.startPoint=o.startPoint:\"endPoint\"in o&&(P.endPoint=o.endPoint)};if(t(a))g(),n(p)&&n(u)&&(P.measureType=u.measureType,P.orientation=u.orientation);else switch(P.measureType=e.Direct,a){case f.Horizontal:if(a!==p&&(P.orientation=0),\"startPoint\"in o){const e=o.startPoint;n(e)&&(e.z=d.z),P.startPoint=e}else if(\"endPoint\"in o){const e=o.endPoint;n(e)&&(e.z=s.z),P.endPoint=e}break;case f.Vertical:if(a!==p&&(P.orientation=c(l,m)),\"startPoint\"in o){const e=o.startPoint;n(e)&&(e.x=d.x,e.y=d.y),P.startPoint=e}else if(\"endPoint\"in o){const e=o.endPoint;n(e)&&(e.x=s.x,e.y=s.y),P.endPoint=e}break;case f.Direct:a!==p&&n(u)&&(P.orientation=u.orientation),g()}i.previousConstraint=a,i.unconstrainedGeometry=l}!function(e){e[e.Horizontal=0]=\"Horizontal\",e[e.Vertical=1]=\"Vertical\",e[e.Direct=2]=\"Direct\"}(f||(f={}));export{f as LengthDimensionConstraint,S as applyConstraint,v as computeConstraint,g as constraintDependencies,y as reapplyConstraint};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}