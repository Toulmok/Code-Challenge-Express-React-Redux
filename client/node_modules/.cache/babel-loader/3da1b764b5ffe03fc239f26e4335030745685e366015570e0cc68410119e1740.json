{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Collection.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Error.js\";\nimport \"../../core/Logger.js\";\nimport \"../../core/accessorSupport/watch.js\";\nimport { autorun as r } from \"../../core/accessorSupport/trackingUtils.js\";\nvar t = new e(),\n  o = new WeakMap();\nfunction n(e) {\n  c(e) && t.push(e);\n}\nfunction s(e) {\n  c(e) && t.includes(e) && t.remove(e);\n}\nfunction c(e) {\n  return null != e && \"object\" == typeof e && \"refreshInterval\" in e && \"refresh\" in e;\n}\nfunction i(e, r) {\n  return Number.isFinite(e) && Number.isFinite(r) ? r <= 0 ? e : i(r, e % r) : 0;\n}\nvar f = 0,\n  a = 0;\nfunction l() {\n  var e = Date.now();\n  var _iterator = _createForOfIteratorHelper(t),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _r = _step.value;\n      if (_r.refreshInterval) {\n        var _o$get;\n        e - ((_o$get = o.get(_r)) !== null && _o$get !== void 0 ? _o$get : 0) + 5 >= 6e4 * _r.refreshInterval && (o.set(_r, e), _r.refresh(e));\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nr(function () {\n  var e = Date.now();\n  var r = 0;\n  var _iterator2 = _createForOfIteratorHelper(t),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _n = _step2.value;\n      r = i(Math.round(6e4 * _n.refreshInterval), r), _n.refreshInterval ? o.get(_n) || o.set(_n, e) : o.delete(_n);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  if (r !== a) {\n    if (a = r, clearInterval(f), 0 === a) return void (f = 0);\n    f = setInterval(l, a);\n  }\n});\nvar u = {\n  get hasRefreshTimer() {\n    return f > 0;\n  },\n  get tickInterval() {\n    return a;\n  },\n  forceRefresh: function forceRefresh() {\n    l();\n  },\n  hasLayer: function hasLayer(e) {\n    return c(e) && t.includes(e);\n  },\n  clear: function clear() {\n    var _iterator3 = _createForOfIteratorHelper(t),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _e = _step3.value;\n        o.delete(_e);\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n    t.removeAll();\n  }\n};\nexport { n as registerLayer, u as test, s as unregisterLayer };","map":{"version":3,"names":["e","autorun","r","t","o","WeakMap","n","c","push","s","includes","remove","i","Number","isFinite","f","a","l","Date","now","_iterator","_createForOfIteratorHelper","_step","done","value","refreshInterval","_o$get","get","set","refresh","err","_iterator2","_step2","Math","round","delete","clearInterval","setInterval","u","hasRefreshTimer","tickInterval","forceRefresh","hasLayer","clear","_iterator3","_step3","removeAll","registerLayer","test","unregisterLayer"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/mixins/refresh.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import\"../../core/Error.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/watch.js\";import{autorun as r}from\"../../core/accessorSupport/trackingUtils.js\";const t=new e,o=new WeakMap;function n(e){c(e)&&t.push(e)}function s(e){c(e)&&t.includes(e)&&t.remove(e)}function c(e){return null!=e&&\"object\"==typeof e&&\"refreshInterval\"in e&&\"refresh\"in e}function i(e,r){return Number.isFinite(e)&&Number.isFinite(r)?r<=0?e:i(r,e%r):0}let f=0,a=0;function l(){const e=Date.now();for(const r of t)if(r.refreshInterval){e-(o.get(r)??0)+5>=6e4*r.refreshInterval&&(o.set(r,e),r.refresh(e))}}r((()=>{const e=Date.now();let r=0;for(const n of t)r=i(Math.round(6e4*n.refreshInterval),r),n.refreshInterval?o.get(n)||o.set(n,e):o.delete(n);if(r!==a){if(a=r,clearInterval(f),0===a)return void(f=0);f=setInterval(l,a)}}));const u={get hasRefreshTimer(){return f>0},get tickInterval(){return a},forceRefresh(){l()},hasLayer:e=>c(e)&&t.includes(e),clear(){for(const e of t)o.delete(e);t.removeAll()}};export{n as registerLayer,u as test,s as unregisterLayer};\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAC,MAAK,0BAA0B;AAAC,OAAM,mBAAmB;AAAC,OAAM,qBAAqB;AAAC,OAAM,sBAAsB;AAAC,OAAM,qCAAqC;AAAC,SAAOC,OAAO,IAAIC,CAAC,QAAK,6CAA6C;AAAC,IAAMC,CAAC,GAAC,IAAIH,CAAC;EAACI,CAAC,GAAC,IAAIC,OAAO;AAAC,SAASC,CAACA,CAACN,CAAC,EAAC;EAACO,CAAC,CAACP,CAAC,CAAC,IAAEG,CAAC,CAACK,IAAI,CAACR,CAAC,CAAC;AAAA;AAAC,SAASS,CAACA,CAACT,CAAC,EAAC;EAACO,CAAC,CAACP,CAAC,CAAC,IAAEG,CAAC,CAACO,QAAQ,CAACV,CAAC,CAAC,IAAEG,CAAC,CAACQ,MAAM,CAACX,CAAC,CAAC;AAAA;AAAC,SAASO,CAACA,CAACP,CAAC,EAAC;EAAC,OAAO,IAAI,IAAEA,CAAC,IAAE,QAAQ,IAAE,OAAOA,CAAC,IAAE,iBAAiB,IAAGA,CAAC,IAAE,SAAS,IAAGA,CAAC;AAAA;AAAC,SAASY,CAACA,CAACZ,CAAC,EAACE,CAAC,EAAC;EAAC,OAAOW,MAAM,CAACC,QAAQ,CAACd,CAAC,CAAC,IAAEa,MAAM,CAACC,QAAQ,CAACZ,CAAC,CAAC,GAACA,CAAC,IAAE,CAAC,GAACF,CAAC,GAACY,CAAC,CAACV,CAAC,EAACF,CAAC,GAACE,CAAC,CAAC,GAAC,CAAC;AAAA;AAAC,IAAIa,CAAC,GAAC,CAAC;EAACC,CAAC,GAAC,CAAC;AAAC,SAASC,CAACA,CAAA,EAAE;EAAC,IAAMjB,CAAC,GAACkB,IAAI,CAACC,GAAG,EAAE;EAAC,IAAAC,SAAA,GAAAC,0BAAA,CAAelB,CAAC;IAAAmB,KAAA;EAAA;IAAhB,KAAAF,SAAA,CAAAX,CAAA,MAAAa,KAAA,GAAAF,SAAA,CAAAd,CAAA,IAAAiB,IAAA,GAAiB;MAAA,IAAPrB,EAAC,GAAAoB,KAAA,CAAAE,KAAA;MAAM,IAAGtB,EAAC,CAACuB,eAAe,EAAC;QAAA,IAAAC,MAAA;QAAC1B,CAAC,KAAA0B,MAAA,GAAEtB,CAAC,CAACuB,GAAG,CAACzB,EAAC,CAAC,cAAAwB,MAAA,cAAAA,MAAA,GAAE,CAAC,CAAC,GAAC,CAAC,IAAE,GAAG,GAACxB,EAAC,CAACuB,eAAe,KAAGrB,CAAC,CAACwB,GAAG,CAAC1B,EAAC,EAACF,CAAC,CAAC,EAACE,EAAC,CAAC2B,OAAO,CAAC7B,CAAC,CAAC,CAAC;MAAA;IAAA;EAAC,SAAA8B,GAAA;IAAAV,SAAA,CAAApB,CAAA,CAAA8B,GAAA;EAAA;IAAAV,SAAA,CAAAL,CAAA;EAAA;AAAA;AAACb,CAAC,CAAE,YAAI;EAAC,IAAMF,CAAC,GAACkB,IAAI,CAACC,GAAG,EAAE;EAAC,IAAIjB,CAAC,GAAC,CAAC;EAAC,IAAA6B,UAAA,GAAAV,0BAAA,CAAelB,CAAC;IAAA6B,MAAA;EAAA;IAAhB,KAAAD,UAAA,CAAAtB,CAAA,MAAAuB,MAAA,GAAAD,UAAA,CAAAzB,CAAA,IAAAiB,IAAA,GAAiB;MAAA,IAAPjB,EAAC,GAAA0B,MAAA,CAAAR,KAAA;MAAMtB,CAAC,GAACU,CAAC,CAACqB,IAAI,CAACC,KAAK,CAAC,GAAG,GAAC5B,EAAC,CAACmB,eAAe,CAAC,EAACvB,CAAC,CAAC,EAACI,EAAC,CAACmB,eAAe,GAACrB,CAAC,CAACuB,GAAG,CAACrB,EAAC,CAAC,IAAEF,CAAC,CAACwB,GAAG,CAACtB,EAAC,EAACN,CAAC,CAAC,GAACI,CAAC,CAAC+B,MAAM,CAAC7B,EAAC,CAAC;IAAA;EAAC,SAAAwB,GAAA;IAAAC,UAAA,CAAA/B,CAAA,CAAA8B,GAAA;EAAA;IAAAC,UAAA,CAAAhB,CAAA;EAAA;EAAA,IAAGb,CAAC,KAAGc,CAAC,EAAC;IAAC,IAAGA,CAAC,GAACd,CAAC,EAACkC,aAAa,CAACrB,CAAC,CAAC,EAAC,CAAC,KAAGC,CAAC,EAAC,OAAO,MAAKD,CAAC,GAAC,CAAC,CAAC;IAACA,CAAC,GAACsB,WAAW,CAACpB,CAAC,EAACD,CAAC,CAAC;EAAA;AAAC,CAAC,CAAE;AAAC,IAAMsB,CAAC,GAAC;EAAC,IAAIC,eAAeA,CAAA,EAAE;IAAC,OAAOxB,CAAC,GAAC,CAAC;EAAA,CAAC;EAAC,IAAIyB,YAAYA,CAAA,EAAE;IAAC,OAAOxB,CAAC;EAAA,CAAC;EAACyB,YAAY,WAAAA,aAAA,EAAE;IAACxB,CAAC,EAAE;EAAA,CAAC;EAACyB,QAAQ,EAAC,SAAAA,SAAA1C,CAAC;IAAA,OAAEO,CAAC,CAACP,CAAC,CAAC,IAAEG,CAAC,CAACO,QAAQ,CAACV,CAAC,CAAC;EAAA;EAAC2C,KAAK,WAAAA,MAAA,EAAE;IAAA,IAAAC,UAAA,GAAAvB,0BAAA,CAAgBlB,CAAC;MAAA0C,MAAA;IAAA;MAAhB,KAAAD,UAAA,CAAAnC,CAAA,MAAAoC,MAAA,GAAAD,UAAA,CAAAtC,CAAA,IAAAiB,IAAA,GAAiB;QAAA,IAAPvB,EAAC,GAAA6C,MAAA,CAAArB,KAAA;QAAMpB,CAAC,CAAC+B,MAAM,CAACnC,EAAC,CAAC;MAAA;IAAC,SAAA8B,GAAA;MAAAc,UAAA,CAAA5C,CAAA,CAAA8B,GAAA;IAAA;MAAAc,UAAA,CAAA7B,CAAA;IAAA;IAAAZ,CAAC,CAAC2C,SAAS,EAAE;EAAA;AAAC,CAAC;AAAC,SAAOxC,CAAC,IAAIyC,aAAa,EAACT,CAAC,IAAIU,IAAI,EAACvC,CAAC,IAAIwC,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}