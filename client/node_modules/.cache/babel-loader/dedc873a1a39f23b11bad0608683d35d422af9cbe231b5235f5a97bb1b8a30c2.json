{"ast":null,"code":"import _objectSpread from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../config.js\";\nimport { id as r } from \"../../kernel.js\";\nimport s from \"../../request.js\";\nimport { result as i } from \"../../core/asyncUtils.js\";\nimport o from \"../../core/Error.js\";\nimport a from \"../../core/Logger.js\";\nimport { destroyMaybe as l, isSome as p, isNone as n } from \"../../core/maybe.js\";\nimport { throwIfAborted as u, isAbortError as c, throwIfAbortError as d } from \"../../core/promiseUtils.js\";\nimport { hasSameCanonicalPortal as m, normalize as h, hasSamePortal as f } from \"../../core/urlUtils.js\";\nimport { property as y } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { reader as g } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as I } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as v } from \"../../core/accessorSupport/decorators/writer.js\";\nimport { getOwningPortalUrl as P } from \"../support/layerUtils.js\";\nimport U from \"../../portal/Portal.js\";\nimport w from \"../../portal/PortalItem.js\";\nimport j from \"../../portal/PortalUser.js\";\nimport { getUserPrivileges as E } from \"../../portal/support/portalItemUtils.js\";\nvar _ = function _(_2) {\n    var H = /*#__PURE__*/function (_ref) {\n      _inherits(H, _ref);\n      var _super = _createSuper(H);\n      function H() {\n        var _this;\n        _classCallCheck(this, H);\n        _this = _super.apply(this, arguments), _this.resourceReferences = {\n          portalItem: null,\n          paths: []\n        }, _this.userHasEditingPrivileges = !0, _this.userHasFullEditingPrivileges = !1, _this.userHasUpdateItemPrivileges = !1;\n        return _this;\n      }\n      _createClass(H, [{\n        key: \"destroy\",\n        value: function destroy() {\n          this.portalItem = l(this.portalItem);\n        }\n      }, {\n        key: \"portalItem\",\n        set: function set(t) {\n          t !== this._get(\"portalItem\") && (this.removeOrigin(\"portal-item\"), this._set(\"portalItem\", t));\n        }\n      }, {\n        key: \"readPortalItem\",\n        value: function readPortalItem(t, e, r) {\n          if (e.itemId) return new w({\n            id: e.itemId,\n            portal: r && r.portal\n          });\n        }\n      }, {\n        key: \"writePortalItem\",\n        value: function writePortalItem(t, e) {\n          t && t.id && (e.itemId = t.id);\n        }\n      }, {\n        key: \"loadFromPortal\",\n        value: function () {\n          var _loadFromPortal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(t, e) {\n            var _r;\n            return _regeneratorRuntime().wrap(function _callee$(_context) {\n              while (1) switch (_context.prev = _context.next) {\n                case 0:\n                  if (!(this.portalItem && this.portalItem.id)) {\n                    _context.next = 14;\n                    break;\n                  }\n                  _context.prev = 1;\n                  _context.next = 4;\n                  return import(\"../../portal/support/layersLoader.js\");\n                case 4:\n                  _r = _context.sent;\n                  u(e);\n                  _context.next = 8;\n                  return _r.load({\n                    instance: this,\n                    supportedTypes: t.supportedTypes,\n                    validateItem: t.validateItem,\n                    supportsData: t.supportsData,\n                    layerModuleTypeMap: t.layerModuleTypeMap\n                  }, e);\n                case 8:\n                  return _context.abrupt(\"return\", _context.sent);\n                case 11:\n                  _context.prev = 11;\n                  _context.t0 = _context[\"catch\"](1);\n                  throw c(_context.t0) || a.getLogger(this.declaredClass).warn(\"Failed to load layer (\".concat(this.title, \", \").concat(this.id, \") portal item (\").concat(this.portalItem.id, \")\\n  \").concat(_context.t0)), _context.t0;\n                case 14:\n                case \"end\":\n                  return _context.stop();\n              }\n            }, _callee, this, [[1, 11]]);\n          }));\n          function loadFromPortal(_x, _x2) {\n            return _loadFromPortal.apply(this, arguments);\n          }\n          return loadFromPortal;\n        }()\n      }, {\n        key: \"finishLoadEditablePortalLayer\",\n        value: function () {\n          var _finishLoadEditablePortalLayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(t) {\n            return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n              while (1) switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.t0 = this;\n                  _context2.next = 3;\n                  return this._fetchUserHasEditingPrivileges(t).catch(function (t) {\n                    return d(t), !0;\n                  });\n                case 3:\n                  _context2.t1 = _context2.sent;\n                  _context2.t0._set.call(_context2.t0, \"userHasEditingPrivileges\", _context2.t1);\n                case 5:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }, _callee2, this);\n          }));\n          function finishLoadEditablePortalLayer(_x3) {\n            return _finishLoadEditablePortalLayer.apply(this, arguments);\n          }\n          return finishLoadEditablePortalLayer;\n        }()\n      }, {\n        key: \"_setUserPrivileges\",\n        value: function () {\n          var _setUserPrivileges2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(t, r) {\n            var _yield$this$_fetchUse, _yield$this$_fetchUse2, _e, _s, _i;\n            return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n              while (1) switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (e.userPrivilegesApplied) {\n                    _context3.next = 2;\n                    break;\n                  }\n                  return _context3.abrupt(\"return\", this.finishLoadEditablePortalLayer(r));\n                case 2:\n                  if (!this.url) {\n                    _context3.next = 17;\n                    break;\n                  }\n                  _context3.prev = 3;\n                  _context3.next = 6;\n                  return this._fetchUserPrivileges(t, r);\n                case 6:\n                  _yield$this$_fetchUse = _context3.sent;\n                  _yield$this$_fetchUse2 = _yield$this$_fetchUse.features;\n                  _e = _yield$this$_fetchUse2.edit;\n                  _s = _yield$this$_fetchUse2.fullEdit;\n                  _i = _yield$this$_fetchUse.content.updateItem;\n                  this._set(\"userHasEditingPrivileges\", _e), this._set(\"userHasFullEditingPrivileges\", _s), this._set(\"userHasUpdateItemPrivileges\", _i);\n                  _context3.next = 17;\n                  break;\n                case 14:\n                  _context3.prev = 14;\n                  _context3.t0 = _context3[\"catch\"](3);\n                  d(_context3.t0);\n                case 17:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }, _callee3, this, [[3, 14]]);\n          }));\n          function _setUserPrivileges(_x4, _x5) {\n            return _setUserPrivileges2.apply(this, arguments);\n          }\n          return _setUserPrivileges;\n        }()\n      }, {\n        key: \"_fetchUserPrivileges\",\n        value: function () {\n          var _fetchUserPrivileges2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(t, e) {\n            var s, i, o, a, _t, l, n, u;\n            return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n              while (1) switch (_context4.prev = _context4.next) {\n                case 0:\n                  s = this.portalItem;\n                  if (!(!t || !s || !s.loaded || s.sourceUrl)) {\n                    _context4.next = 3;\n                    break;\n                  }\n                  return _context4.abrupt(\"return\", this._fetchFallbackUserPrivileges(e));\n                case 3:\n                  i = t === s.id;\n                  if (!(i && s.portal.user)) {\n                    _context4.next = 6;\n                    break;\n                  }\n                  return _context4.abrupt(\"return\", E(s));\n                case 6:\n                  if (!i) {\n                    _context4.next = 10;\n                    break;\n                  }\n                  o = s.portal.url;\n                  _context4.next = 19;\n                  break;\n                case 10:\n                  _context4.prev = 10;\n                  _context4.next = 13;\n                  return P(this.url, e);\n                case 13:\n                  o = _context4.sent;\n                  _context4.next = 19;\n                  break;\n                case 16:\n                  _context4.prev = 16;\n                  _context4.t0 = _context4[\"catch\"](10);\n                  d(_context4.t0);\n                case 19:\n                  if (!(!o || !m(o, s.portal.url))) {\n                    _context4.next = 21;\n                    break;\n                  }\n                  return _context4.abrupt(\"return\", this._fetchFallbackUserPrivileges(e));\n                case 21:\n                  _context4.prev = 21;\n                  _t = p(e) ? e.signal : null;\n                  _context4.next = 25;\n                  return r === null || r === void 0 ? void 0 : r.getCredential(\"\".concat(o, \"/sharing\"), {\n                    prompt: !1,\n                    signal: _t\n                  });\n                case 25:\n                  a = _context4.sent;\n                  _context4.next = 31;\n                  break;\n                case 28:\n                  _context4.prev = 28;\n                  _context4.t1 = _context4[\"catch\"](21);\n                  d(_context4.t1);\n                case 31:\n                  l = !0, n = !1, u = !1;\n                  if (a) {\n                    _context4.next = 34;\n                    break;\n                  }\n                  return _context4.abrupt(\"return\", {\n                    features: {\n                      edit: l,\n                      fullEdit: n\n                    },\n                    content: {\n                      updateItem: u\n                    }\n                  });\n                case 34:\n                  _context4.prev = 34;\n                  if (!i) {\n                    _context4.next = 40;\n                    break;\n                  }\n                  _context4.next = 38;\n                  return s.reload();\n                case 38:\n                  _context4.next = 43;\n                  break;\n                case 40:\n                  s = new w({\n                    id: t,\n                    portal: {\n                      url: o\n                    }\n                  });\n                  _context4.next = 43;\n                  return s.load(e);\n                case 43:\n                  if (!s.portal.user) {\n                    _context4.next = 45;\n                    break;\n                  }\n                  return _context4.abrupt(\"return\", E(s));\n                case 45:\n                  _context4.next = 50;\n                  break;\n                case 47:\n                  _context4.prev = 47;\n                  _context4.t2 = _context4[\"catch\"](34);\n                  d(_context4.t2);\n                case 50:\n                  return _context4.abrupt(\"return\", {\n                    features: {\n                      edit: l,\n                      fullEdit: n\n                    },\n                    content: {\n                      updateItem: u\n                    }\n                  });\n                case 51:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }, _callee4, this, [[10, 16], [21, 28], [34, 47]]);\n          }));\n          function _fetchUserPrivileges(_x6, _x7) {\n            return _fetchUserPrivileges2.apply(this, arguments);\n          }\n          return _fetchUserPrivileges;\n        }()\n      }, {\n        key: \"_fetchFallbackUserPrivileges\",\n        value: function () {\n          var _fetchFallbackUserPrivileges2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(t) {\n            var e;\n            return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n              while (1) switch (_context5.prev = _context5.next) {\n                case 0:\n                  e = !0;\n                  _context5.prev = 1;\n                  _context5.next = 4;\n                  return this._fetchUserHasEditingPrivileges(t);\n                case 4:\n                  e = _context5.sent;\n                  _context5.next = 10;\n                  break;\n                case 7:\n                  _context5.prev = 7;\n                  _context5.t0 = _context5[\"catch\"](1);\n                  d(_context5.t0);\n                case 10:\n                  return _context5.abrupt(\"return\", {\n                    features: {\n                      edit: e,\n                      fullEdit: !1\n                    },\n                    content: {\n                      updateItem: !1\n                    }\n                  });\n                case 11:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }, _callee5, this, [[1, 7]]);\n          }));\n          function _fetchFallbackUserPrivileges(_x8) {\n            return _fetchFallbackUserPrivileges2.apply(this, arguments);\n          }\n          return _fetchFallbackUserPrivileges;\n        }()\n      }, {\n        key: \"_fetchUserHasEditingPrivileges\",\n        value: function () {\n          var _fetchUserHasEditingPrivileges2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(t) {\n            var e, s;\n            return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n              while (1) switch (_context6.prev = _context6.next) {\n                case 0:\n                  e = this.url ? r === null || r === void 0 ? void 0 : r.findCredential(this.url) : null;\n                  if (e) {\n                    _context6.next = 3;\n                    break;\n                  }\n                  return _context6.abrupt(\"return\", !0);\n                case 3:\n                  if (!(b.credential === e)) {\n                    _context6.next = 7;\n                    break;\n                  }\n                  _context6.t0 = b.user;\n                  _context6.next = 10;\n                  break;\n                case 7:\n                  _context6.next = 9;\n                  return this._fetchEditingUser(t);\n                case 9:\n                  _context6.t0 = _context6.sent;\n                case 10:\n                  s = _context6.t0;\n                  return _context6.abrupt(\"return\", (b.credential = e, b.user = s, n(s) || null == s.privileges || s.privileges.includes(\"features:user:edit\")));\n                case 12:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }, _callee6, this);\n          }));\n          function _fetchUserHasEditingPrivileges(_x9) {\n            return _fetchUserHasEditingPrivileges2.apply(this, arguments);\n          }\n          return _fetchUserHasEditingPrivileges;\n        }()\n      }, {\n        key: \"_fetchEditingUser\",\n        value: function () {\n          var _fetchEditingUser2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(t) {\n            var _this$portalItem, _this$portalItem$port, _this$url;\n            var e, o, a, l, n, u, c;\n            return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n              while (1) switch (_context7.prev = _context7.next) {\n                case 0:\n                  e = (_this$portalItem = this.portalItem) === null || _this$portalItem === void 0 ? void 0 : (_this$portalItem$port = _this$portalItem.portal) === null || _this$portalItem$port === void 0 ? void 0 : _this$portalItem$port.user;\n                  if (!e) {\n                    _context7.next = 3;\n                    break;\n                  }\n                  return _context7.abrupt(\"return\", e);\n                case 3:\n                  o = r.findServerInfo((_this$url = this.url) !== null && _this$url !== void 0 ? _this$url : \"\");\n                  if (o !== null && o !== void 0 && o.owningSystemUrl) {\n                    _context7.next = 6;\n                    break;\n                  }\n                  return _context7.abrupt(\"return\", null);\n                case 6:\n                  a = \"\".concat(o.owningSystemUrl, \"/sharing/rest\"), l = U.getDefault();\n                  if (!(l && l.loaded && h(l.restUrl) === h(a))) {\n                    _context7.next = 9;\n                    break;\n                  }\n                  return _context7.abrupt(\"return\", l.user);\n                case 9:\n                  n = \"\".concat(a, \"/community/self\");\n                  u = p(t) ? t.signal : null;\n                  _context7.next = 13;\n                  return i(s(n, {\n                    authMode: \"no-prompt\",\n                    query: {\n                      f: \"json\"\n                    },\n                    signal: u\n                  }));\n                case 13:\n                  c = _context7.sent;\n                  return _context7.abrupt(\"return\", c.ok ? j.fromJSON(c.value.data) : null);\n                case 15:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }, _callee7, this);\n          }));\n          function _fetchEditingUser(_x10) {\n            return _fetchEditingUser2.apply(this, arguments);\n          }\n          return _fetchEditingUser;\n        }()\n      }, {\n        key: \"read\",\n        value: function read(t, e) {\n          e && (e.layer = this), _get(_getPrototypeOf(H.prototype), \"read\", this).call(this, t, e);\n        }\n      }, {\n        key: \"write\",\n        value: function write(t, e) {\n          var r = e && e.portal,\n            s = this.portalItem && this.portalItem.id && (this.portalItem.portal || U.getDefault());\n          return r && s && !f(s.restUrl, r.restUrl) ? (e.messages && e.messages.push(new o(\"layer:cross-portal\", \"The layer '\".concat(this.title, \" (\").concat(this.id, \")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer\"), {\n            layer: this\n          })), null) : _get(_getPrototypeOf(H.prototype), \"write\", this).call(this, t, _objectSpread(_objectSpread({}, e), {}, {\n            layer: this\n          }));\n        }\n      }]);\n      return H;\n    }(_2);\n    return t([y({\n      type: w\n    })], H.prototype, \"portalItem\", null), t([g(\"web-document\", \"portalItem\", [\"itemId\"])], H.prototype, \"readPortalItem\", null), t([v(\"web-document\", \"portalItem\", {\n      itemId: {\n        type: String\n      }\n    })], H.prototype, \"writePortalItem\", null), t([y({\n      clonable: !1\n    })], H.prototype, \"resourceReferences\", void 0), t([y({\n      type: Boolean,\n      readOnly: !0\n    })], H.prototype, \"userHasEditingPrivileges\", void 0), t([y({\n      type: Boolean,\n      readOnly: !0\n    })], H.prototype, \"userHasFullEditingPrivileges\", void 0), t([y({\n      type: Boolean,\n      readOnly: !0\n    })], H.prototype, \"userHasUpdateItemPrivileges\", void 0), H = t([I(\"esri.layers.mixins.PortalLayer\")], H), H;\n  },\n  b = {\n    credential: null,\n    user: null\n  };\nexport { _ as PortalLayer };","map":{"version":3,"names":["_","t","e","id","r","s","result","i","o","a","destroyMaybe","l","isSome","p","isNone","n","throwIfAborted","u","isAbortError","c","throwIfAbortError","d","hasSameCanonicalPortal","m","normalize","h","hasSamePortal","f","property","y","reader","g","subclass","I","writer","v","getOwningPortalUrl","P","U","w","j","getUserPrivileges","E","H","_ref","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","resourceReferences","portalItem","paths","userHasEditingPrivileges","userHasFullEditingPrivileges","userHasUpdateItemPrivileges","_createClass","key","value","destroy","set","_get","removeOrigin","_set","readPortalItem","itemId","portal","writePortalItem","_loadFromPortal","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_r","wrap","_callee$","_context","prev","next","sent","load","instance","supportedTypes","validateItem","supportsData","layerModuleTypeMap","abrupt","t0","getLogger","declaredClass","warn","concat","title","stop","loadFromPortal","_x","_x2","_finishLoadEditablePortalLayer","_callee2","_callee2$","_context2","_fetchUserHasEditingPrivileges","catch","t1","call","finishLoadEditablePortalLayer","_x3","_setUserPrivileges2","_callee3","_yield$this$_fetchUse","_yield$this$_fetchUse2","_e","_s","_i","_callee3$","_context3","userPrivilegesApplied","url","_fetchUserPrivileges","features","edit","fullEdit","content","updateItem","_setUserPrivileges","_x4","_x5","_fetchUserPrivileges2","_callee4","_t","_callee4$","_context4","loaded","sourceUrl","_fetchFallbackUserPrivileges","user","signal","getCredential","prompt","reload","t2","_x6","_x7","_fetchFallbackUserPrivileges2","_callee5","_callee5$","_context5","_x8","_fetchUserHasEditingPrivileges2","_callee6","_callee6$","_context6","findCredential","b","credential","_fetchEditingUser","privileges","includes","_x9","_fetchEditingUser2","_callee7","_this$portalItem","_this$portalItem$port","_this$url","_callee7$","_context7","findServerInfo","owningSystemUrl","getDefault","restUrl","authMode","query","ok","fromJSON","data","_x10","read","layer","_getPrototypeOf","prototype","write","messages","push","_objectSpread","type","String","clonable","Boolean","readOnly","PortalLayer"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/mixins/PortalLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../config.js\";import{id as r}from\"../../kernel.js\";import s from\"../../request.js\";import{result as i}from\"../../core/asyncUtils.js\";import o from\"../../core/Error.js\";import a from\"../../core/Logger.js\";import{destroyMaybe as l,isSome as p,isNone as n}from\"../../core/maybe.js\";import{throwIfAborted as u,isAbortError as c,throwIfAbortError as d}from\"../../core/promiseUtils.js\";import{hasSameCanonicalPortal as m,normalize as h,hasSamePortal as f}from\"../../core/urlUtils.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{reader as g}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as I}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as v}from\"../../core/accessorSupport/decorators/writer.js\";import{getOwningPortalUrl as P}from\"../support/layerUtils.js\";import U from\"../../portal/Portal.js\";import w from\"../../portal/PortalItem.js\";import j from\"../../portal/PortalUser.js\";import{getUserPrivileges as E}from\"../../portal/support/portalItemUtils.js\";const _=_=>{let H=class extends _{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=l(this.portalItem)}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,e,r){if(e.itemId)return new w({id:e.itemId,portal:r&&r.portal})}writePortalItem(t,e){t&&t.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem&&this.portalItem.id)try{const r=await import(\"../../portal/support/layersLoader.js\");return u(e),await r.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},e)}catch(r){throw c(r)||a.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${r}`),r}}async finishLoadEditablePortalLayer(t){this._set(\"userHasEditingPrivileges\",await this._fetchUserHasEditingPrivileges(t).catch((t=>(d(t),!0))))}async _setUserPrivileges(t,r){if(!e.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:e,fullEdit:s},content:{updateItem:i}}=await this._fetchUserPrivileges(t,r);this._set(\"userHasEditingPrivileges\",e),this._set(\"userHasFullEditingPrivileges\",s),this._set(\"userHasUpdateItemPrivileges\",i)}catch(s){d(s)}}async _fetchUserPrivileges(t,e){let s=this.portalItem;if(!t||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(e);const i=t===s.id;if(i&&s.portal.user)return E(s);let o,a;if(i)o=s.portal.url;else try{o=await P(this.url,e)}catch(c){d(c)}if(!o||!m(o,s.portal.url))return this._fetchFallbackUserPrivileges(e);try{const t=p(e)?e.signal:null;a=await(r?.getCredential(`${o}/sharing`,{prompt:!1,signal:t}))}catch(c){d(c)}const l=!0,n=!1,u=!1;if(!a)return{features:{edit:l,fullEdit:n},content:{updateItem:u}};try{if(i?await s.reload():(s=new w({id:t,portal:{url:o}}),await s.load(e)),s.portal.user)return E(s)}catch(c){d(c)}return{features:{edit:l,fullEdit:n},content:{updateItem:u}}}async _fetchFallbackUserPrivileges(t){let e=!0;try{e=await this._fetchUserHasEditingPrivileges(t)}catch(r){d(r)}return{features:{edit:e,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(t){const e=this.url?r?.findCredential(this.url):null;if(!e)return!0;const s=b.credential===e?b.user:await this._fetchEditingUser(t);return b.credential=e,b.user=s,n(s)||null==s.privileges||s.privileges.includes(\"features:user:edit\")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const o=r.findServerInfo(this.url??\"\");if(!o?.owningSystemUrl)return null;const a=`${o.owningSystemUrl}/sharing/rest`,l=U.getDefault();if(l&&l.loaded&&h(l.restUrl)===h(a))return l.user;const n=`${a}/community/self`,u=p(t)?t.signal:null,c=await i(s(n,{authMode:\"no-prompt\",query:{f:\"json\"},signal:u}));return c.ok?j.fromJSON(c.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e&&e.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||U.getDefault());return r&&s&&!f(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new o(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return t([y({type:w})],H.prototype,\"portalItem\",null),t([g(\"web-document\",\"portalItem\",[\"itemId\"])],H.prototype,\"readPortalItem\",null),t([v(\"web-document\",\"portalItem\",{itemId:{type:String}})],H.prototype,\"writePortalItem\",null),t([y({clonable:!1})],H.prototype,\"resourceReferences\",void 0),t([y({type:Boolean,readOnly:!0})],H.prototype,\"userHasEditingPrivileges\",void 0),t([y({type:Boolean,readOnly:!0})],H.prototype,\"userHasFullEditingPrivileges\",void 0),t([y({type:Boolean,readOnly:!0})],H.prototype,\"userHasUpdateItemPrivileges\",void 0),H=t([I(\"esri.layers.mixins.PortalLayer\")],H),H},b={credential:null,user:null};export{_ as PortalLayer};\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,2BAA2B;AAAC,OAAOC,CAAC,MAAK,iBAAiB;AAAC,SAAOC,EAAE,IAAIC,CAAC,QAAK,iBAAiB;AAAC,OAAOC,CAAC,MAAK,kBAAkB;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,0BAA0B;AAAC,OAAOC,CAAC,MAAK,qBAAqB;AAAC,OAAOC,CAAC,MAAK,sBAAsB;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,QAAK,qBAAqB;AAAC,SAAOC,cAAc,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,EAACC,iBAAiB,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,EAACC,SAAS,IAAIC,CAAC,EAACC,aAAa,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,mDAAmD;AAAC,OAAM,0CAA0C;AAAC,OAAM,0BAA0B;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,iDAAiD;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,mDAAmD;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,iDAAiD;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,0BAA0B;AAAC,OAAOC,CAAC,MAAK,wBAAwB;AAAC,OAAOC,CAAC,MAAK,4BAA4B;AAAC,OAAOC,CAAC,MAAK,4BAA4B;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,yCAAyC;AAAC,IAAM1C,CAAC,GAAC,SAAAA,IAAC,EAAE;IAAC,IAAI2C,CAAC,0BAAAC,IAAA;MAAAC,SAAA,CAAAF,CAAA,EAAAC,IAAA;MAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,CAAA;MAAiB,SAAAA,EAAA,EAAa;QAAA,IAAAK,KAAA;QAAAC,eAAA,OAAAN,CAAA;QAACK,KAAA,GAAAF,MAAA,CAAAI,KAAA,OAASC,SAAS,GAAEH,KAAA,CAAKI,kBAAkB,GAAC;UAACC,UAAU,EAAC,IAAI;UAACC,KAAK,EAAC;QAAE,CAAC,EAACN,KAAA,CAAKO,wBAAwB,GAAC,CAAC,CAAC,EAACP,KAAA,CAAKQ,4BAA4B,GAAC,CAAC,CAAC,EAACR,KAAA,CAAKS,2BAA2B,GAAC,CAAC,CAAC;QAAA,OAAAT,KAAA;MAAA;MAACU,YAAA,CAAAf,CAAA;QAAAgB,GAAA;QAAAC,KAAA,WAAAC,QAAA,EAAS;UAAC,IAAI,CAACR,UAAU,GAAC1C,CAAC,CAAC,IAAI,CAAC0C,UAAU,CAAC;QAAA;MAAC;QAAAM,GAAA;QAAAG,GAAA,WAAAA,IAAe7D,CAAC,EAAC;UAACA,CAAC,KAAG,IAAI,CAAC8D,IAAI,CAAC,YAAY,CAAC,KAAG,IAAI,CAACC,YAAY,CAAC,aAAa,CAAC,EAAC,IAAI,CAACC,IAAI,CAAC,YAAY,EAAChE,CAAC,CAAC,CAAC;QAAA;MAAC;QAAA0D,GAAA;QAAAC,KAAA,WAAAM,eAAejE,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;UAAC,IAAGF,CAAC,CAACiE,MAAM,EAAC,OAAO,IAAI5B,CAAC,CAAC;YAACpC,EAAE,EAACD,CAAC,CAACiE,MAAM;YAACC,MAAM,EAAChE,CAAC,IAAEA,CAAC,CAACgE;UAAM,CAAC,CAAC;QAAA;MAAC;QAAAT,GAAA;QAAAC,KAAA,WAAAS,gBAAgBpE,CAAC,EAACC,CAAC,EAAC;UAACD,CAAC,IAAEA,CAAC,CAACE,EAAE,KAAGD,CAAC,CAACiE,MAAM,GAAClE,CAAC,CAACE,EAAE,CAAC;QAAA;MAAC;QAAAwD,GAAA;QAAAC,KAAA;UAAA,IAAAU,eAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAqBzE,CAAC,EAACC,CAAC;YAAA,IAAAyE,EAAA;YAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;cAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;gBAAA;kBAAA,MAAK,IAAI,CAAC3B,UAAU,IAAE,IAAI,CAACA,UAAU,CAAClD,EAAE;oBAAA2E,QAAA,CAAAE,IAAA;oBAAA;kBAAA;kBAAAF,QAAA,CAAAC,IAAA;kBAAAD,QAAA,CAAAE,IAAA;kBAAA,OAAmB,MAAM,CAAC,sCAAsC,CAAC;gBAAA;kBAAtD5E,EAAC,GAAA0E,QAAA,CAAAG,IAAA;kBAA6DhE,CAAC,CAACf,CAAC,CAAC;kBAAA4E,QAAA,CAAAE,IAAA;kBAAA,OAAO5E,EAAC,CAAC8E,IAAI,CAAC;oBAACC,QAAQ,EAAC,IAAI;oBAACC,cAAc,EAACnF,CAAC,CAACmF,cAAc;oBAACC,YAAY,EAACpF,CAAC,CAACoF,YAAY;oBAACC,YAAY,EAACrF,CAAC,CAACqF,YAAY;oBAACC,kBAAkB,EAACtF,CAAC,CAACsF;kBAAkB,CAAC,EAACrF,CAAC,CAAC;gBAAA;kBAAA,OAAA4E,QAAA,CAAAU,MAAA,WAAAV,QAAA,CAAAG,IAAA;gBAAA;kBAAAH,QAAA,CAAAC,IAAA;kBAAAD,QAAA,CAAAW,EAAA,GAAAX,QAAA;kBAAA,MAAgB3D,CAAC,CAAA2D,QAAA,CAAAW,EAAA,CAAG,IAAEhF,CAAC,CAACiF,SAAS,CAAC,IAAI,CAACC,aAAa,CAAC,CAACC,IAAI,0BAAAC,MAAA,CAA0B,IAAI,CAACC,KAAK,QAAAD,MAAA,CAAK,IAAI,CAAC1F,EAAE,qBAAA0F,MAAA,CAAkB,IAAI,CAACxC,UAAU,CAAClD,EAAE,WAAA0F,MAAA,CAAAf,QAAA,CAAAW,EAAA,EAAY,EAAAX,QAAA,CAAAW,EAAE;gBAAA;gBAAA;kBAAA,OAAAX,QAAA,CAAAiB,IAAA;cAAA;YAAA,GAAArB,OAAA;UAAA,CAAE;UAAA,SAAAsB,eAAAC,EAAA,EAAAC,GAAA;YAAA,OAAA5B,eAAA,CAAApB,KAAA,OAAAC,SAAA;UAAA;UAAA,OAAA6C,cAAA;QAAA;MAAA;QAAArC,GAAA;QAAAC,KAAA;UAAA,IAAAuC,8BAAA,GAAA5B,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAA2B,SAAoCnG,CAAC;YAAA,OAAAuE,mBAAA,GAAAI,IAAA,UAAAyB,UAAAC,SAAA;cAAA,kBAAAA,SAAA,CAAAvB,IAAA,GAAAuB,SAAA,CAAAtB,IAAA;gBAAA;kBAAAsB,SAAA,CAAAb,EAAA,GAAE,IAAI;kBAAAa,SAAA,CAAAtB,IAAA;kBAAA,OAAuC,IAAI,CAACuB,8BAA8B,CAACtG,CAAC,CAAC,CAACuG,KAAK,CAAE,UAAAvG,CAAC;oBAAA,OAAGoB,CAAC,CAACpB,CAAC,CAAC,EAAC,CAAC,CAAC;kBAAA,CAAC,CAAE;gBAAA;kBAAAqG,SAAA,CAAAG,EAAA,GAAAH,SAAA,CAAArB,IAAA;kBAAAqB,SAAA,CAAAb,EAAA,CAAlGxB,IAAI,CAAAyC,IAAA,CAAAJ,SAAA,CAAAb,EAAA,EAAC,0BAA0B,EAAAa,SAAA,CAAAG,EAAA;gBAAA;gBAAA;kBAAA,OAAAH,SAAA,CAAAP,IAAA;cAAA;YAAA,GAAAK,QAAA;UAAA,CAAqE;UAAA,SAAAO,8BAAAC,GAAA;YAAA,OAAAT,8BAAA,CAAAjD,KAAA,OAAAC,SAAA;UAAA;UAAA,OAAAwD,6BAAA;QAAA;MAAA;QAAAhD,GAAA;QAAAC,KAAA;UAAA,IAAAiD,mBAAA,GAAAtC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAqC,SAAyB7G,CAAC,EAACG,CAAC;YAAA,IAAA2G,qBAAA,EAAAC,sBAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA;YAAA,OAAA3C,mBAAA,GAAAI,IAAA,UAAAwC,UAAAC,SAAA;cAAA,kBAAAA,SAAA,CAAAtC,IAAA,GAAAsC,SAAA,CAAArC,IAAA;gBAAA;kBAAA,IAAM9E,CAAC,CAACoH,qBAAqB;oBAAAD,SAAA,CAAArC,IAAA;oBAAA;kBAAA;kBAAA,OAAAqC,SAAA,CAAA7B,MAAA,WAAQ,IAAI,CAACmB,6BAA6B,CAACvG,CAAC,CAAC;gBAAA;kBAAA,KAAI,IAAI,CAACmH,GAAG;oBAAAF,SAAA,CAAArC,IAAA;oBAAA;kBAAA;kBAAAqC,SAAA,CAAAtC,IAAA;kBAAAsC,SAAA,CAAArC,IAAA;kBAAA,OAAsE,IAAI,CAACwC,oBAAoB,CAACvH,CAAC,EAACG,CAAC,CAAC;gBAAA;kBAAA2G,qBAAA,GAAAM,SAAA,CAAApC,IAAA;kBAAA+B,sBAAA,GAAAD,qBAAA,CAAzFU,QAAQ;kBAAOvH,EAAC,GAAA8G,sBAAA,CAANU,IAAI;kBAAYrH,EAAC,GAAA2G,sBAAA,CAAVW,QAAQ;kBAAwBpH,EAAC,GAAAwG,qBAAA,CAArBa,OAAO,CAAEC,UAAU;kBAA0C,IAAI,CAAC5D,IAAI,CAAC,0BAA0B,EAAC/D,EAAC,CAAC,EAAC,IAAI,CAAC+D,IAAI,CAAC,8BAA8B,EAAC5D,EAAC,CAAC,EAAC,IAAI,CAAC4D,IAAI,CAAC,6BAA6B,EAAC1D,EAAC,CAAC;kBAAA8G,SAAA,CAAArC,IAAA;kBAAA;gBAAA;kBAAAqC,SAAA,CAAAtC,IAAA;kBAAAsC,SAAA,CAAA5B,EAAA,GAAA4B,SAAA;kBAAUhG,CAAC,CAAAgG,SAAA,CAAA5B,EAAA,CAAG;gBAAA;gBAAA;kBAAA,OAAA4B,SAAA,CAAAtB,IAAA;cAAA;YAAA,GAAAe,QAAA;UAAA,CAAE;UAAA,SAAAgB,mBAAAC,GAAA,EAAAC,GAAA;YAAA,OAAAnB,mBAAA,CAAA3D,KAAA,OAAAC,SAAA;UAAA;UAAA,OAAA2E,kBAAA;QAAA;MAAA;QAAAnE,GAAA;QAAAC,KAAA;UAAA,IAAAqE,qBAAA,GAAA1D,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAyD,SAA2BjI,CAAC,EAACC,CAAC;YAAA,IAAAG,CAAA,EAAAE,CAAA,EAAAC,CAAA,EAAAC,CAAA,EAAA0H,EAAA,EAAAxH,CAAA,EAAAI,CAAA,EAAAE,CAAA;YAAA,OAAAuD,mBAAA,GAAAI,IAAA,UAAAwD,UAAAC,SAAA;cAAA,kBAAAA,SAAA,CAAAtD,IAAA,GAAAsD,SAAA,CAAArD,IAAA;gBAAA;kBAAM3E,CAAC,GAAC,IAAI,CAACgD,UAAU;kBAAA,MAAI,CAACpD,CAAC,IAAE,CAACI,CAAC,IAAE,CAACA,CAAC,CAACiI,MAAM,IAAEjI,CAAC,CAACkI,SAAS;oBAAAF,SAAA,CAAArD,IAAA;oBAAA;kBAAA;kBAAA,OAAAqD,SAAA,CAAA7C,MAAA,WAAQ,IAAI,CAACgD,4BAA4B,CAACtI,CAAC,CAAC;gBAAA;kBAAOK,CAAC,GAACN,CAAC,KAAGI,CAAC,CAACF,EAAE;kBAAA,MAAII,CAAC,IAAEF,CAAC,CAAC+D,MAAM,CAACqE,IAAI;oBAAAJ,SAAA,CAAArD,IAAA;oBAAA;kBAAA;kBAAA,OAAAqD,SAAA,CAAA7C,MAAA,WAAQ9C,CAAC,CAACrC,CAAC,CAAC;gBAAA;kBAAA,KAAYE,CAAC;oBAAA8H,SAAA,CAAArD,IAAA;oBAAA;kBAAA;kBAACxE,CAAC,GAACH,CAAC,CAAC+D,MAAM,CAACmD,GAAG;kBAACc,SAAA,CAAArD,IAAA;kBAAA;gBAAA;kBAAAqD,SAAA,CAAAtD,IAAA;kBAAAsD,SAAA,CAAArD,IAAA;kBAAA,OAAiB3C,CAAC,CAAC,IAAI,CAACkF,GAAG,EAACrH,CAAC,CAAC;gBAAA;kBAArBM,CAAC,GAAA6H,SAAA,CAAApD,IAAA;kBAAAoD,SAAA,CAAArD,IAAA;kBAAA;gBAAA;kBAAAqD,SAAA,CAAAtD,IAAA;kBAAAsD,SAAA,CAAA5C,EAAA,GAAA4C,SAAA;kBAA8BhH,CAAC,CAAAgH,SAAA,CAAA5C,EAAA,CAAG;gBAAA;kBAAA,MAAI,CAACjF,CAAC,IAAE,CAACe,CAAC,CAACf,CAAC,EAACH,CAAC,CAAC+D,MAAM,CAACmD,GAAG,CAAC;oBAAAc,SAAA,CAAArD,IAAA;oBAAA;kBAAA;kBAAA,OAAAqD,SAAA,CAAA7C,MAAA,WAAQ,IAAI,CAACgD,4BAA4B,CAACtI,CAAC,CAAC;gBAAA;kBAAAmI,SAAA,CAAAtD,IAAA;kBAAW9E,EAAC,GAACY,CAAC,CAACX,CAAC,CAAC,GAACA,CAAC,CAACwI,MAAM,GAAC,IAAI;kBAAAL,SAAA,CAAArD,IAAA;kBAAA,OAAS5E,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEuI,aAAa,IAAA9C,MAAA,CAAIrF,CAAC,eAAW;oBAACoI,MAAM,EAAC,CAAC,CAAC;oBAACF,MAAM,EAACzI;kBAAC,CAAC,CAAC;gBAAA;kBAA7DQ,CAAC,GAAA4H,SAAA,CAAApD,IAAA;kBAAAoD,SAAA,CAAArD,IAAA;kBAAA;gBAAA;kBAAAqD,SAAA,CAAAtD,IAAA;kBAAAsD,SAAA,CAAA5B,EAAA,GAAA4B,SAAA;kBAAuEhH,CAAC,CAAAgH,SAAA,CAAA5B,EAAA,CAAG;gBAAA;kBAAO9F,CAAC,GAAC,CAAC,CAAC,EAACI,CAAC,GAAC,CAAC,CAAC,EAACE,CAAC,GAAC,CAAC,CAAC;kBAAA,IAAKR,CAAC;oBAAA4H,SAAA,CAAArD,IAAA;oBAAA;kBAAA;kBAAA,OAAAqD,SAAA,CAAA7C,MAAA,WAAO;oBAACiC,QAAQ,EAAC;sBAACC,IAAI,EAAC/G,CAAC;sBAACgH,QAAQ,EAAC5G;oBAAC,CAAC;oBAAC6G,OAAO,EAAC;sBAACC,UAAU,EAAC5G;oBAAC;kBAAC,CAAC;gBAAA;kBAAAoH,SAAA,CAAAtD,IAAA;kBAAA,KAAQxE,CAAC;oBAAA8H,SAAA,CAAArD,IAAA;oBAAA;kBAAA;kBAAAqD,SAAA,CAAArD,IAAA;kBAAA,OAAO3E,CAAC,CAACwI,MAAM,EAAE;gBAAA;kBAAAR,SAAA,CAAArD,IAAA;kBAAA;gBAAA;kBAAE3E,CAAC,GAAC,IAAIkC,CAAC,CAAC;oBAACpC,EAAE,EAACF,CAAC;oBAACmE,MAAM,EAAC;sBAACmD,GAAG,EAAC/G;oBAAC;kBAAC,CAAC,CAAC;kBAAA6H,SAAA,CAAArD,IAAA;kBAAA,OAAO3E,CAAC,CAAC6E,IAAI,CAAChF,CAAC,CAAC;gBAAA;kBAAA,KAAEG,CAAC,CAAC+D,MAAM,CAACqE,IAAI;oBAAAJ,SAAA,CAAArD,IAAA;oBAAA;kBAAA;kBAAA,OAAAqD,SAAA,CAAA7C,MAAA,WAAQ9C,CAAC,CAACrC,CAAC,CAAC;gBAAA;kBAAAgI,SAAA,CAAArD,IAAA;kBAAA;gBAAA;kBAAAqD,SAAA,CAAAtD,IAAA;kBAAAsD,SAAA,CAAAS,EAAA,GAAAT,SAAA;kBAAUhH,CAAC,CAAAgH,SAAA,CAAAS,EAAA,CAAG;gBAAA;kBAAA,OAAAT,SAAA,CAAA7C,MAAA,WAAO;oBAACiC,QAAQ,EAAC;sBAACC,IAAI,EAAC/G,CAAC;sBAACgH,QAAQ,EAAC5G;oBAAC,CAAC;oBAAC6G,OAAO,EAAC;sBAACC,UAAU,EAAC5G;oBAAC;kBAAC,CAAC;gBAAA;gBAAA;kBAAA,OAAAoH,SAAA,CAAAtC,IAAA;cAAA;YAAA,GAAAmC,QAAA;UAAA,CAAC;UAAA,SAAAV,qBAAAuB,GAAA,EAAAC,GAAA;YAAA,OAAAf,qBAAA,CAAA/E,KAAA,OAAAC,SAAA;UAAA;UAAA,OAAAqE,oBAAA;QAAA;MAAA;QAAA7D,GAAA;QAAAC,KAAA;UAAA,IAAAqF,6BAAA,GAAA1E,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAyE,SAAmCjJ,CAAC;YAAA,IAAAC,CAAA;YAAA,OAAAsE,mBAAA,GAAAI,IAAA,UAAAuE,UAAAC,SAAA;cAAA,kBAAAA,SAAA,CAAArE,IAAA,GAAAqE,SAAA,CAAApE,IAAA;gBAAA;kBAAM9E,CAAC,GAAC,CAAC,CAAC;kBAAAkJ,SAAA,CAAArE,IAAA;kBAAAqE,SAAA,CAAApE,IAAA;kBAAA,OAAa,IAAI,CAACuB,8BAA8B,CAACtG,CAAC,CAAC;gBAAA;kBAA9CC,CAAC,GAAAkJ,SAAA,CAAAnE,IAAA;kBAAAmE,SAAA,CAAApE,IAAA;kBAAA;gBAAA;kBAAAoE,SAAA,CAAArE,IAAA;kBAAAqE,SAAA,CAAA3D,EAAA,GAAA2D,SAAA;kBAAuD/H,CAAC,CAAA+H,SAAA,CAAA3D,EAAA,CAAG;gBAAA;kBAAA,OAAA2D,SAAA,CAAA5D,MAAA,WAAO;oBAACiC,QAAQ,EAAC;sBAACC,IAAI,EAACxH,CAAC;sBAACyH,QAAQ,EAAC,CAAC;oBAAC,CAAC;oBAACC,OAAO,EAAC;sBAACC,UAAU,EAAC,CAAC;oBAAC;kBAAC,CAAC;gBAAA;gBAAA;kBAAA,OAAAuB,SAAA,CAAArD,IAAA;cAAA;YAAA,GAAAmD,QAAA;UAAA,CAAC;UAAA,SAAAV,6BAAAa,GAAA;YAAA,OAAAJ,6BAAA,CAAA/F,KAAA,OAAAC,SAAA;UAAA;UAAA,OAAAqF,4BAAA;QAAA;MAAA;QAAA7E,GAAA;QAAAC,KAAA;UAAA,IAAA0F,+BAAA,GAAA/E,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAA8E,SAAqCtJ,CAAC;YAAA,IAAAC,CAAA,EAAAG,CAAA;YAAA,OAAAmE,mBAAA,GAAAI,IAAA,UAAA4E,UAAAC,SAAA;cAAA,kBAAAA,SAAA,CAAA1E,IAAA,GAAA0E,SAAA,CAAAzE,IAAA;gBAAA;kBAAQ9E,CAAC,GAAC,IAAI,CAACqH,GAAG,GAACnH,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEsJ,cAAc,CAAC,IAAI,CAACnC,GAAG,CAAC,GAAC,IAAI;kBAAA,IAAKrH,CAAC;oBAAAuJ,SAAA,CAAAzE,IAAA;oBAAA;kBAAA;kBAAA,OAAAyE,SAAA,CAAAjE,MAAA,WAAO,CAAC,CAAC;gBAAA;kBAAA,MAASmE,CAAC,CAACC,UAAU,KAAG1J,CAAC;oBAAAuJ,SAAA,CAAAzE,IAAA;oBAAA;kBAAA;kBAAAyE,SAAA,CAAAhE,EAAA,GAACkE,CAAC,CAAClB,IAAI;kBAAAgB,SAAA,CAAAzE,IAAA;kBAAA;gBAAA;kBAAAyE,SAAA,CAAAzE,IAAA;kBAAA,OAAO,IAAI,CAAC6E,iBAAiB,CAAC5J,CAAC,CAAC;gBAAA;kBAAAwJ,SAAA,CAAAhE,EAAA,GAAAgE,SAAA,CAAAxE,IAAA;gBAAA;kBAAzD5E,CAAC,GAAAoJ,SAAA,CAAAhE,EAAA;kBAAA,OAAAgE,SAAA,CAAAjE,MAAA,YAAgEmE,CAAC,CAACC,UAAU,GAAC1J,CAAC,EAACyJ,CAAC,CAAClB,IAAI,GAACpI,CAAC,EAACU,CAAC,CAACV,CAAC,CAAC,IAAE,IAAI,IAAEA,CAAC,CAACyJ,UAAU,IAAEzJ,CAAC,CAACyJ,UAAU,CAACC,QAAQ,CAAC,oBAAoB,CAAC;gBAAA;gBAAA;kBAAA,OAAAN,SAAA,CAAA1D,IAAA;cAAA;YAAA,GAAAwD,QAAA;UAAA,CAAC;UAAA,SAAAhD,+BAAAyD,GAAA;YAAA,OAAAV,+BAAA,CAAApG,KAAA,OAAAC,SAAA;UAAA;UAAA,OAAAoD,8BAAA;QAAA;MAAA;QAAA5C,GAAA;QAAAC,KAAA;UAAA,IAAAqG,kBAAA,GAAA1F,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAyF,SAAwBjK,CAAC;YAAA,IAAAkK,gBAAA,EAAAC,qBAAA,EAAAC,SAAA;YAAA,IAAAnK,CAAA,EAAAM,CAAA,EAAAC,CAAA,EAAAE,CAAA,EAAAI,CAAA,EAAAE,CAAA,EAAAE,CAAA;YAAA,OAAAqD,mBAAA,GAAAI,IAAA,UAAA0F,UAAAC,SAAA;cAAA,kBAAAA,SAAA,CAAAxF,IAAA,GAAAwF,SAAA,CAAAvF,IAAA;gBAAA;kBAAQ9E,CAAC,IAAAiK,gBAAA,GAAC,IAAI,CAAC9G,UAAU,cAAA8G,gBAAA,wBAAAC,qBAAA,GAAfD,gBAAA,CAAiB/F,MAAM,cAAAgG,qBAAA,uBAAvBA,qBAAA,CAAyB3B,IAAI;kBAAA,KAAIvI,CAAC;oBAAAqK,SAAA,CAAAvF,IAAA;oBAAA;kBAAA;kBAAA,OAAAuF,SAAA,CAAA/E,MAAA,WAAQtF,CAAC;gBAAA;kBAAOM,CAAC,GAACJ,CAAC,CAACoK,cAAc,EAAAH,SAAA,GAAC,IAAI,CAAC9C,GAAG,cAAA8C,SAAA,cAAAA,SAAA,GAAE,EAAE,CAAC;kBAAA,IAAK7J,CAAC,aAADA,CAAC,eAADA,CAAC,CAAEiK,eAAe;oBAAAF,SAAA,CAAAvF,IAAA;oBAAA;kBAAA;kBAAA,OAAAuF,SAAA,CAAA/E,MAAA,WAAQ,IAAI;gBAAA;kBAAO/E,CAAC,MAAAoF,MAAA,CAAIrF,CAAC,CAACiK,eAAe,oBAAgB9J,CAAC,GAAC2B,CAAC,CAACoI,UAAU,EAAE;kBAAA,MAAI/J,CAAC,IAAEA,CAAC,CAAC2H,MAAM,IAAE7G,CAAC,CAACd,CAAC,CAACgK,OAAO,CAAC,KAAGlJ,CAAC,CAAChB,CAAC,CAAC;oBAAA8J,SAAA,CAAAvF,IAAA;oBAAA;kBAAA;kBAAA,OAAAuF,SAAA,CAAA/E,MAAA,WAAQ7E,CAAC,CAAC8H,IAAI;gBAAA;kBAAO1H,CAAC,MAAA8E,MAAA,CAAIpF,CAAC;kBAAkBQ,CAAC,GAACJ,CAAC,CAACZ,CAAC,CAAC,GAACA,CAAC,CAACyI,MAAM,GAAC,IAAI;kBAAA6B,SAAA,CAAAvF,IAAA;kBAAA,OAASzE,CAAC,CAACF,CAAC,CAACU,CAAC,EAAC;oBAAC6J,QAAQ,EAAC,WAAW;oBAACC,KAAK,EAAC;sBAAClJ,CAAC,EAAC;oBAAM,CAAC;oBAAC+G,MAAM,EAACzH;kBAAC,CAAC,CAAC,CAAC;gBAAA;kBAAhEE,CAAC,GAAAoJ,SAAA,CAAAtF,IAAA;kBAAA,OAAAsF,SAAA,CAAA/E,MAAA,WAAuErE,CAAC,CAAC2J,EAAE,GAACtI,CAAC,CAACuI,QAAQ,CAAC5J,CAAC,CAACyC,KAAK,CAACoH,IAAI,CAAC,GAAC,IAAI;gBAAA;gBAAA;kBAAA,OAAAT,SAAA,CAAAxE,IAAA;cAAA;YAAA,GAAAmE,QAAA;UAAA,CAAC;UAAA,SAAAL,kBAAAoB,IAAA;YAAA,OAAAhB,kBAAA,CAAA/G,KAAA,OAAAC,SAAA;UAAA;UAAA,OAAA0G,iBAAA;QAAA;MAAA;QAAAlG,GAAA;QAAAC,KAAA,WAAAsH,KAAKjL,CAAC,EAACC,CAAC,EAAC;UAACA,CAAC,KAAGA,CAAC,CAACiL,KAAK,GAAC,IAAI,CAAC,EAAApH,IAAA,CAAAqH,eAAA,CAAAzI,CAAA,CAAA0I,SAAA,iBAAA3E,IAAA,OAAYzG,CAAC,EAACC,CAAC,CAAC;QAAA;MAAC;QAAAyD,GAAA;QAAAC,KAAA,WAAA0H,MAAMrL,CAAC,EAACC,CAAC,EAAC;UAAC,IAAME,CAAC,GAACF,CAAC,IAAEA,CAAC,CAACkE,MAAM;YAAC/D,CAAC,GAAC,IAAI,CAACgD,UAAU,IAAE,IAAI,CAACA,UAAU,CAAClD,EAAE,KAAG,IAAI,CAACkD,UAAU,CAACe,MAAM,IAAE9B,CAAC,CAACoI,UAAU,EAAE,CAAC;UAAC,OAAOtK,CAAC,IAAEC,CAAC,IAAE,CAACsB,CAAC,CAACtB,CAAC,CAACsK,OAAO,EAACvK,CAAC,CAACuK,OAAO,CAAC,IAAEzK,CAAC,CAACqL,QAAQ,IAAErL,CAAC,CAACqL,QAAQ,CAACC,IAAI,CAAC,IAAIhL,CAAC,CAAC,oBAAoB,gBAAAqF,MAAA,CAAe,IAAI,CAACC,KAAK,QAAAD,MAAA,CAAK,IAAI,CAAC1F,EAAE,oNAAgN;YAACgL,KAAK,EAAC;UAAI,CAAC,CAAC,CAAC,EAAC,IAAI,IAAApH,IAAA,CAAAqH,eAAA,CAAAzI,CAAA,CAAA0I,SAAA,kBAAA3E,IAAA,OAAczG,CAAC,EAAAwL,aAAA,CAAAA,aAAA,KAAKvL,CAAC;YAACiL,KAAK,EAAC;UAAI,GAAE;QAAA;MAAC;MAAA,OAAAxI,CAAA;IAAA,EAAn9G3C,EAAC,CAAm9G;IAAC,OAAOC,CAAC,CAAC,CAAC4B,CAAC,CAAC;MAAC6J,IAAI,EAACnJ;IAAC,CAAC,CAAC,CAAC,EAACI,CAAC,CAAC0I,SAAS,EAAC,YAAY,EAAC,IAAI,CAAC,EAACpL,CAAC,CAAC,CAAC8B,CAAC,CAAC,cAAc,EAAC,YAAY,EAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAACY,CAAC,CAAC0I,SAAS,EAAC,gBAAgB,EAAC,IAAI,CAAC,EAACpL,CAAC,CAAC,CAACkC,CAAC,CAAC,cAAc,EAAC,YAAY,EAAC;MAACgC,MAAM,EAAC;QAACuH,IAAI,EAACC;MAAM;IAAC,CAAC,CAAC,CAAC,EAAChJ,CAAC,CAAC0I,SAAS,EAAC,iBAAiB,EAAC,IAAI,CAAC,EAACpL,CAAC,CAAC,CAAC4B,CAAC,CAAC;MAAC+J,QAAQ,EAAC,CAAC;IAAC,CAAC,CAAC,CAAC,EAACjJ,CAAC,CAAC0I,SAAS,EAAC,oBAAoB,EAAC,KAAK,CAAC,CAAC,EAACpL,CAAC,CAAC,CAAC4B,CAAC,CAAC;MAAC6J,IAAI,EAACG,OAAO;MAACC,QAAQ,EAAC,CAAC;IAAC,CAAC,CAAC,CAAC,EAACnJ,CAAC,CAAC0I,SAAS,EAAC,0BAA0B,EAAC,KAAK,CAAC,CAAC,EAACpL,CAAC,CAAC,CAAC4B,CAAC,CAAC;MAAC6J,IAAI,EAACG,OAAO;MAACC,QAAQ,EAAC,CAAC;IAAC,CAAC,CAAC,CAAC,EAACnJ,CAAC,CAAC0I,SAAS,EAAC,8BAA8B,EAAC,KAAK,CAAC,CAAC,EAACpL,CAAC,CAAC,CAAC4B,CAAC,CAAC;MAAC6J,IAAI,EAACG,OAAO;MAACC,QAAQ,EAAC,CAAC;IAAC,CAAC,CAAC,CAAC,EAACnJ,CAAC,CAAC0I,SAAS,EAAC,6BAA6B,EAAC,KAAK,CAAC,CAAC,EAAC1I,CAAC,GAAC1C,CAAC,CAAC,CAACgC,CAAC,CAAC,gCAAgC,CAAC,CAAC,EAACU,CAAC,CAAC,EAACA,CAAC;EAAA,CAAC;EAACgH,CAAC,GAAC;IAACC,UAAU,EAAC,IAAI;IAACnB,IAAI,EAAC;EAAI,CAAC;AAAC,SAAOzI,CAAC,IAAI+L,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}