{"ast":null,"code":"import _regeneratorRuntime from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport r from \"../request.js\";\nimport t from \"../TimeExtent.js\";\nimport i from \"../core/Error.js\";\nimport { HandleOwnerMixin as o } from \"../core/HandleOwner.js\";\nimport { loadAll as s } from \"../core/loadAll.js\";\nimport { isSome as a } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as p } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as n, isAbortError as m } from \"../core/promiseUtils.js\";\nimport { property as l } from \"../core/accessorSupport/decorators/property.js\";\nimport { Integer as c } from \"../core/accessorSupport/ensureType.js\";\nimport \"../core/arrayUtils.js\";\nimport { reader as y } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as u } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as d } from \"../core/accessorSupport/decorators/writer.js\";\nimport { nameToId as h, OriginId as f } from \"../core/accessorSupport/PropertyOrigin.js\";\nimport g from \"../geometry/Extent.js\";\nimport { getScale as b } from \"../geometry/support/scaleUtils.js\";\nimport j from \"./Layer.js\";\nimport { APIKeyMixin as v } from \"./mixins/APIKeyMixin.js\";\nimport { ArcGISMapService as x } from \"./mixins/ArcGISMapService.js\";\nimport { ArcGISService as S } from \"./mixins/ArcGISService.js\";\nimport { BlendLayer as w } from \"./mixins/BlendLayer.js\";\nimport { CustomParametersMixin as I } from \"./mixins/CustomParametersMixin.js\";\nimport { OperationalLayer as O } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as T } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as E } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as L } from \"./mixins/ScaleRangeLayer.js\";\nimport { SublayersOwner as M } from \"./mixins/SublayersOwner.js\";\nimport { TemporalLayer as P } from \"./mixins/TemporalLayer.js\";\nimport { url as R } from \"./support/commonProperties.js\";\nimport { ExportImageParameters as U } from \"./support/ExportImageParameters.js\";\nimport { createBitmap as N } from \"./support/imageBitmapUtils.js\";\nimport A from \"./support/Sublayer.js\";\nimport { shouldWriteSublayerStructure as F } from \"./support/sublayerUtils.js\";\nimport { serviceSupportsSpatialReference as J } from \"./support/versionUtils.js\";\nimport q from \"../time/TimeReference.js\";\nvar k = /*#__PURE__*/function (_w) {\n  _inherits(k, _w);\n  var _super = _createSuper(k);\n  function k() {\n    var _this;\n    _classCallCheck(this, k);\n    for (var _len = arguments.length, e = new Array(_len), _key = 0; _key < _len; _key++) {\n      e[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(e)), _this.dateFieldsTimeReference = null, _this.datesInUnknownTimezone = !1, _this.dpi = 96, _this.gdbVersion = null, _this.imageFormat = \"png24\", _this.imageMaxHeight = 2048, _this.imageMaxWidth = 2048, _this.imageTransparency = !0, _this.isReference = null, _this.labelsVisible = !1, _this.operationalLayerType = \"ArcGISMapServiceLayer\", _this.preferredTimeReference = null, _this.sourceJSON = null, _this.sublayers = null, _this.type = \"map-image\", _this.url = null;\n    return _this;\n  }\n  _createClass(k, [{\n    key: \"normalizeCtorArgs\",\n    value: function normalizeCtorArgs(e, r) {\n      return \"string\" == typeof e ? _objectSpread({\n        url: e\n      }, r) : e;\n    }\n  }, {\n    key: \"load\",\n    value: function load(e) {\n      var _this2 = this;\n      var r = a(e) ? e.signal : null;\n      return this.addResolvingPromise(this.loadFromPortal({\n        supportedTypes: [\"Map Service\"]\n      }, e).catch(n).then(function () {\n        return _this2._fetchService(r);\n      })), Promise.resolve(this);\n    }\n  }, {\n    key: \"readImageFormat\",\n    value: function readImageFormat(e, r) {\n      var t = r.supportedImageFormatTypes;\n      return t && t.includes(\"PNG32\") ? \"png32\" : \"png24\";\n    }\n  }, {\n    key: \"writeSublayers\",\n    value: function writeSublayers(e, r, t, i) {\n      var _this$capabilities$ex;\n      if (!this.loaded || !e) return;\n      var o = e.slice().reverse().flatten(function (_ref) {\n        var e = _ref.sublayers;\n        return e && e.toArray().reverse();\n      }).toArray();\n      var s = !1;\n      if (this.capabilities && this.capabilities.operations.supportsExportMap && (_this$capabilities$ex = this.capabilities.exportMap) !== null && _this$capabilities$ex !== void 0 && _this$capabilities$ex.supportsDynamicLayers) {\n        var _e = h(i.origin);\n        if (_e === f.PORTAL_ITEM) {\n          var _e2 = this.createSublayersForOrigin(\"service\").sublayers;\n          s = F(o, _e2, f.SERVICE);\n        } else if (_e > f.PORTAL_ITEM) {\n          var _e3 = this.createSublayersForOrigin(\"portal-item\");\n          s = F(o, _e3.sublayers, h(_e3.origin));\n        }\n      }\n      var a = [],\n        p = _objectSpread({\n          writeSublayerStructure: s\n        }, i);\n      var n = s;\n      o.forEach(function (e) {\n        var r = e.write({}, p);\n        a.push(r), n = n || \"user\" === e.originOf(\"visible\");\n      });\n      a.some(function (e) {\n        return Object.keys(e).length > 1;\n      }) && (r.layers = a), n && (r.visibleLayers = o.filter(function (e) {\n        return e.visible;\n      }).map(function (e) {\n        return e.id;\n      }));\n    }\n  }, {\n    key: \"createExportImageParameters\",\n    value: function createExportImageParameters(e, r, t, i) {\n      var o = i && i.pixelRatio || 1;\n      e && this.version >= 10 && (e = e.clone().shiftCentralMeridian());\n      var s = new U({\n          layer: this,\n          floors: i === null || i === void 0 ? void 0 : i.floors,\n          scale: b({\n            extent: e,\n            width: r\n          }) * o\n        }),\n        a = s.toJSON();\n      s.destroy();\n      var p = !i || !i.rotation || this.version < 10.3 ? {} : {\n          rotation: -i.rotation\n        },\n        n = e && e.spatialReference,\n        m = n.wkid || JSON.stringify(n.toJSON());\n      a.dpi *= o;\n      var l = {};\n      if (i !== null && i !== void 0 && i.timeExtent) {\n        var _i$timeExtent$toJSON = i.timeExtent.toJSON(),\n          _e4 = _i$timeExtent$toJSON.start,\n          _r = _i$timeExtent$toJSON.end;\n        l.time = _e4 && _r && _e4 === _r ? \"\" + _e4 : \"\".concat(_e4 !== null && _e4 !== void 0 ? _e4 : \"null\", \",\").concat(_r !== null && _r !== void 0 ? _r : \"null\");\n      } else this.timeInfo && !this.timeInfo.hasLiveData && (l.time = \"null,null\");\n      return _objectSpread(_objectSpread(_objectSpread({\n        bbox: e && e.xmin + \",\" + e.ymin + \",\" + e.xmax + \",\" + e.ymax,\n        bboxSR: m,\n        imageSR: m,\n        size: r + \",\" + t\n      }, a), p), l);\n    }\n  }, {\n    key: \"fetchImage\",\n    value: function () {\n      var _fetchImage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e, r, t, i) {\n        var _yield$this$_fetchIma, o;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this._fetchImage(\"image\", e, r, t, i);\n            case 2:\n              _yield$this$_fetchIma = _context.sent;\n              o = _yield$this$_fetchIma.data;\n              return _context.abrupt(\"return\", o);\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function fetchImage(_x, _x2, _x3, _x4) {\n        return _fetchImage2.apply(this, arguments);\n      }\n      return fetchImage;\n    }()\n  }, {\n    key: \"fetchImageBitmap\",\n    value: function () {\n      var _fetchImageBitmap = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e, r, t, i) {\n        var _yield$this$_fetchIma2, o, s;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this._fetchImage(\"blob\", e, r, t, i);\n            case 2:\n              _yield$this$_fetchIma2 = _context2.sent;\n              o = _yield$this$_fetchIma2.data;\n              s = _yield$this$_fetchIma2.url;\n              return _context2.abrupt(\"return\", N(o, s));\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function fetchImageBitmap(_x5, _x6, _x7, _x8) {\n        return _fetchImageBitmap.apply(this, arguments);\n      }\n      return fetchImageBitmap;\n    }()\n  }, {\n    key: \"fetchRecomputedExtents\",\n    value: function () {\n      var _fetchRecomputedExtents = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var e,\n          i,\n          _yield$r,\n          o,\n          s,\n          a,\n          p,\n          n,\n          _args3 = arguments;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              e = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {};\n              i = _objectSpread(_objectSpread({}, e), {}, {\n                query: _objectSpread(_objectSpread({\n                  returnUpdates: !0,\n                  f: \"json\"\n                }, this.customParameters), {}, {\n                  token: this.apiKey\n                })\n              });\n              _context3.next = 4;\n              return r(this.url, i);\n            case 4:\n              _yield$r = _context3.sent;\n              o = _yield$r.data;\n              s = o.extent;\n              a = o.fullExtent;\n              p = o.timeExtent;\n              n = s || a;\n              return _context3.abrupt(\"return\", {\n                fullExtent: n && g.fromJSON(n),\n                timeExtent: p && t.fromJSON({\n                  start: p[0],\n                  end: p[1]\n                })\n              });\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function fetchRecomputedExtents() {\n        return _fetchRecomputedExtents.apply(this, arguments);\n      }\n      return fetchRecomputedExtents;\n    }()\n  }, {\n    key: \"loadAll\",\n    value: function loadAll() {\n      var _this3 = this;\n      return s(this, function (e) {\n        e(_this3.allSublayers);\n      });\n    }\n  }, {\n    key: \"serviceSupportsSpatialReference\",\n    value: function serviceSupportsSpatialReference(e) {\n      return J(this, e);\n    }\n  }, {\n    key: \"_fetchImage\",\n    value: function () {\n      var _fetchImage3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e, t, o, s, a) {\n        var _a$signal, _p$query, _this$capabilities, _this$capabilities$ex2;\n        var p, n, _yield$r2, _e5;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              p = {\n                responseType: e,\n                signal: (_a$signal = a === null || a === void 0 ? void 0 : a.signal) !== null && _a$signal !== void 0 ? _a$signal : null,\n                query: _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, this.parsedUrl.query), this.createExportImageParameters(t, o, s, a)), {}, {\n                  f: \"image\"\n                }, this.refreshParameters), this.customParameters), {}, {\n                  token: this.apiKey\n                })\n              }, n = this.parsedUrl.path + \"/export\";\n              if (!(null != ((_p$query = p.query) === null || _p$query === void 0 ? void 0 : _p$query.dynamicLayers) && !((_this$capabilities = this.capabilities) !== null && _this$capabilities !== void 0 && (_this$capabilities$ex2 = _this$capabilities.exportMap) !== null && _this$capabilities$ex2 !== void 0 && _this$capabilities$ex2.supportsDynamicLayers))) {\n                _context4.next = 3;\n                break;\n              }\n              throw new i(\"mapimagelayer:dynamiclayer-not-supported\", \"service \".concat(this.url, \" doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.\"), {\n                query: p.query\n              });\n            case 3:\n              _context4.prev = 3;\n              _context4.next = 6;\n              return r(n, p);\n            case 6:\n              _yield$r2 = _context4.sent;\n              _e5 = _yield$r2.data;\n              return _context4.abrupt(\"return\", {\n                data: _e5,\n                url: n\n              });\n            case 11:\n              _context4.prev = 11;\n              _context4.t0 = _context4[\"catch\"](3);\n              if (!m(_context4.t0)) {\n                _context4.next = 15;\n                break;\n              }\n              throw _context4.t0;\n            case 15:\n              throw new i(\"mapimagelayer:image-fetch-error\", \"Unable to load image: \".concat(n), {\n                error: _context4.t0\n              });\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this, [[3, 11]]);\n      }));\n      function _fetchImage(_x9, _x10, _x11, _x12, _x13) {\n        return _fetchImage3.apply(this, arguments);\n      }\n      return _fetchImage;\n    }()\n  }, {\n    key: \"_fetchService\",\n    value: function () {\n      var _fetchService2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(e) {\n        var _yield$r3, t, i;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              if (!this.sourceJSON) {\n                _context5.next = 2;\n                break;\n              }\n              return _context5.abrupt(\"return\", void this.read(this.sourceJSON, {\n                origin: \"service\",\n                url: this.parsedUrl\n              }));\n            case 2:\n              _context5.next = 4;\n              return r(this.parsedUrl.path, {\n                query: _objectSpread(_objectSpread(_objectSpread({\n                  f: \"json\"\n                }, this.parsedUrl.query), this.customParameters), {}, {\n                  token: this.apiKey\n                }),\n                signal: e\n              });\n            case 4:\n              _yield$r3 = _context5.sent;\n              t = _yield$r3.data;\n              i = _yield$r3.ssl;\n              i && (this.url = this.url.replace(/^http:/i, \"https:\")), this.sourceJSON = t, this.read(t, {\n                origin: \"service\",\n                url: this.parsedUrl\n              });\n            case 8:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function _fetchService(_x14) {\n        return _fetchService2.apply(this, arguments);\n      }\n      return _fetchService;\n    }()\n  }]);\n  return k;\n}(w(P(L(M(x(S(O(T(p(E(v(I(o(j))))))))))))));\ne([l({\n  type: q\n})], k.prototype, \"dateFieldsTimeReference\", void 0), e([l({\n  type: Boolean\n})], k.prototype, \"datesInUnknownTimezone\", void 0), e([l()], k.prototype, \"dpi\", void 0), e([l()], k.prototype, \"gdbVersion\", void 0), e([l()], k.prototype, \"imageFormat\", void 0), e([y(\"imageFormat\", [\"supportedImageFormatTypes\"])], k.prototype, \"readImageFormat\", null), e([l({\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"maxImageHeight\"\n        }\n      }\n    }\n  }\n})], k.prototype, \"imageMaxHeight\", void 0), e([l({\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"maxImageWidth\"\n        }\n      }\n    }\n  }\n})], k.prototype, \"imageMaxWidth\", void 0), e([l()], k.prototype, \"imageTransparency\", void 0), e([l({\n  type: Boolean,\n  json: {\n    read: !1,\n    write: {\n      enabled: !0,\n      overridePolicy: function overridePolicy() {\n        return {\n          enabled: !1\n        };\n      }\n    }\n  }\n})], k.prototype, \"isReference\", void 0), e([l({\n  json: {\n    read: !1,\n    write: !1\n  }\n})], k.prototype, \"labelsVisible\", void 0), e([l({\n  type: [\"ArcGISMapServiceLayer\"]\n})], k.prototype, \"operationalLayerType\", void 0), e([l({\n  json: {\n    read: !1,\n    write: !1\n  }\n})], k.prototype, \"popupEnabled\", void 0), e([l({\n  type: q\n})], k.prototype, \"preferredTimeReference\", void 0), e([l()], k.prototype, \"sourceJSON\", void 0), e([l({\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], k.prototype, \"sublayers\", void 0), e([d(\"sublayers\", {\n  layers: {\n    type: [A]\n  },\n  visibleLayers: {\n    type: [c]\n  }\n})], k.prototype, \"writeSublayers\", null), e([l({\n  type: [\"show\", \"hide\", \"hide-children\"]\n})], k.prototype, \"listMode\", void 0), e([l({\n  json: {\n    read: !1\n  },\n  readOnly: !0,\n  value: \"map-image\"\n})], k.prototype, \"type\", void 0), e([l(R)], k.prototype, \"url\", void 0), k = e([u(\"esri.layers.MapImageLayer\")], k);\nvar _ = k;\nexport { _ as default };","map":{"version":3,"names":["_","e","r","t","i","HandleOwnerMixin","o","loadAll","s","isSome","a","MultiOriginJSONMixin","p","throwIfAbortError","n","isAbortError","m","property","l","Integer","c","reader","y","subclass","u","writer","d","nameToId","h","OriginId","f","g","getScale","b","j","APIKeyMixin","v","ArcGISMapService","x","ArcGISService","S","BlendLayer","w","CustomParametersMixin","I","OperationalLayer","O","PortalLayer","T","RefreshableLayer","E","ScaleRangeLayer","L","SublayersOwner","M","TemporalLayer","P","url","R","ExportImageParameters","U","createBitmap","N","A","shouldWriteSublayerStructure","F","serviceSupportsSpatialReference","J","q","k","_w","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","Array","_key","call","apply","concat","dateFieldsTimeReference","datesInUnknownTimezone","dpi","gdbVersion","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","isReference","labelsVisible","operationalLayerType","preferredTimeReference","sourceJSON","sublayers","type","_createClass","key","value","normalizeCtorArgs","_objectSpread","load","_this2","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","then","_fetchService","Promise","resolve","readImageFormat","supportedImageFormatTypes","includes","writeSublayers","_this$capabilities$ex","loaded","slice","reverse","flatten","_ref","toArray","capabilities","operations","supportsExportMap","exportMap","supportsDynamicLayers","origin","PORTAL_ITEM","createSublayersForOrigin","SERVICE","writeSublayerStructure","forEach","write","push","originOf","some","Object","keys","layers","visibleLayers","filter","visible","map","id","createExportImageParameters","pixelRatio","version","clone","shiftCentralMeridian","layer","floors","scale","extent","width","toJSON","destroy","rotation","spatialReference","wkid","JSON","stringify","timeExtent","_i$timeExtent$toJSON","start","end","time","timeInfo","hasLiveData","bbox","xmin","ymin","xmax","ymax","bboxSR","imageSR","size","_fetchImage2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$this$_fetchIma","wrap","_callee$","_context","prev","next","_fetchImage","sent","data","abrupt","stop","fetchImage","_x","_x2","_x3","_x4","_fetchImageBitmap","_callee2","_yield$this$_fetchIma2","_callee2$","_context2","fetchImageBitmap","_x5","_x6","_x7","_x8","_fetchRecomputedExtents","_callee3","_yield$r","_args3","_callee3$","_context3","undefined","query","returnUpdates","customParameters","token","apiKey","fullExtent","fromJSON","fetchRecomputedExtents","_this3","allSublayers","_fetchImage3","_callee4","_a$signal","_p$query","_this$capabilities","_this$capabilities$ex2","_yield$r2","_e5","_callee4$","_context4","responseType","parsedUrl","refreshParameters","path","dynamicLayers","t0","error","_x9","_x10","_x11","_x12","_x13","_fetchService2","_callee5","_yield$r3","_callee5$","_context5","read","ssl","replace","_x14","prototype","Boolean","json","origins","service","source","enabled","overridePolicy","ignoreOrigin","readOnly","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/MapImageLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../TimeExtent.js\";import i from\"../core/Error.js\";import{HandleOwnerMixin as o}from\"../core/HandleOwner.js\";import{loadAll as s}from\"../core/loadAll.js\";import{isSome as a}from\"../core/maybe.js\";import{MultiOriginJSONMixin as p}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as n,isAbortError as m}from\"../core/promiseUtils.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{Integer as c}from\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{reader as y}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../core/accessorSupport/decorators/writer.js\";import{nameToId as h,OriginId as f}from\"../core/accessorSupport/PropertyOrigin.js\";import g from\"../geometry/Extent.js\";import{getScale as b}from\"../geometry/support/scaleUtils.js\";import j from\"./Layer.js\";import{APIKeyMixin as v}from\"./mixins/APIKeyMixin.js\";import{ArcGISMapService as x}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as S}from\"./mixins/ArcGISService.js\";import{BlendLayer as w}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as I}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as O}from\"./mixins/OperationalLayer.js\";import{PortalLayer as T}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as E}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as M}from\"./mixins/SublayersOwner.js\";import{TemporalLayer as P}from\"./mixins/TemporalLayer.js\";import{url as R}from\"./support/commonProperties.js\";import{ExportImageParameters as U}from\"./support/ExportImageParameters.js\";import{createBitmap as N}from\"./support/imageBitmapUtils.js\";import A from\"./support/Sublayer.js\";import{shouldWriteSublayerStructure as F}from\"./support/sublayerUtils.js\";import{serviceSupportsSpatialReference as J}from\"./support/versionUtils.js\";import q from\"../time/TimeReference.js\";let k=class extends(w(P(L(M(x(S(O(T(p(E(v(I(o(j)))))))))))))){constructor(...e){super(...e),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat=\"png24\",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType=\"ArcGISMapServiceLayer\",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type=\"map-image\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=a(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(n).then((()=>this._fetchService(r)))),Promise.resolve(this)}readImageFormat(e,r){const t=r.supportedImageFormatTypes;return t&&t.includes(\"PNG32\")?\"png32\":\"png24\"}writeSublayers(e,r,t,i){if(!this.loaded||!e)return;const o=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap?.supportsDynamicLayers){const e=h(i.origin);if(e===f.PORTAL_ITEM){const e=this.createSublayersForOrigin(\"service\").sublayers;s=F(o,e,f.SERVICE)}else if(e>f.PORTAL_ITEM){const e=this.createSublayersForOrigin(\"portal-item\");s=F(o,e.sublayers,h(e.origin))}}const a=[],p={writeSublayerStructure:s,...i};let n=s;o.forEach((e=>{const r=e.write({},p);a.push(r),n=n||\"user\"===e.originOf(\"visible\")}));a.some((e=>Object.keys(e).length>1))&&(r.layers=a),n&&(r.visibleLayers=o.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,r,t,i){const o=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const s=new U({layer:this,floors:i?.floors,scale:b({extent:e,width:r})*o}),a=s.toJSON();s.destroy();const p=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},n=e&&e.spatialReference,m=n.wkid||JSON.stringify(n.toJSON());a.dpi*=o;const l={};if(i?.timeExtent){const{start:e,end:r}=i.timeExtent.toJSON();l.time=e&&r&&e===r?\"\"+e:`${e??\"null\"},${r??\"null\"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(l.time=\"null,null\");return{bbox:e&&e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:m,imageSR:m,size:r+\",\"+t,...a,...p,...l}}async fetchImage(e,r,t,i){const{data:o}=await this._fetchImage(\"image\",e,r,t,i);return o}async fetchImageBitmap(e,r,t,i){const{data:o,url:s}=await this._fetchImage(\"blob\",e,r,t,i);return N(o,s)}async fetchRecomputedExtents(e={}){const i={...e,query:{returnUpdates:!0,f:\"json\",...this.customParameters,token:this.apiKey}},{data:o}=await r(this.url,i),{extent:s,fullExtent:a,timeExtent:p}=o,n=s||a;return{fullExtent:n&&g.fromJSON(n),timeExtent:p&&t.fromJSON({start:p[0],end:p[1]})}}loadAll(){return s(this,(e=>{e(this.allSublayers)}))}serviceSupportsSpatialReference(e){return J(this,e)}async _fetchImage(e,t,o,s,a){const p={responseType:e,signal:a?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(t,o,s,a),f:\"image\",...this.refreshParameters,...this.customParameters,token:this.apiKey}},n=this.parsedUrl.path+\"/export\";if(null!=p.query?.dynamicLayers&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new i(\"mapimagelayer:dynamiclayer-not-supported\",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:p.query});try{const{data:e}=await r(n,p);return{data:e,url:n}}catch(l){if(m(l))throw l;throw new i(\"mapimagelayer:image-fetch-error\",`Unable to load image: ${n}`,{error:l})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl});const{data:t,ssl:i}=await r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});i&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=t,this.read(t,{origin:\"service\",url:this.parsedUrl})}};e([l({type:q})],k.prototype,\"dateFieldsTimeReference\",void 0),e([l({type:Boolean})],k.prototype,\"datesInUnknownTimezone\",void 0),e([l()],k.prototype,\"dpi\",void 0),e([l()],k.prototype,\"gdbVersion\",void 0),e([l()],k.prototype,\"imageFormat\",void 0),e([y(\"imageFormat\",[\"supportedImageFormatTypes\"])],k.prototype,\"readImageFormat\",null),e([l({json:{origins:{service:{read:{source:\"maxImageHeight\"}}}}})],k.prototype,\"imageMaxHeight\",void 0),e([l({json:{origins:{service:{read:{source:\"maxImageWidth\"}}}}})],k.prototype,\"imageMaxWidth\",void 0),e([l()],k.prototype,\"imageTransparency\",void 0),e([l({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],k.prototype,\"isReference\",void 0),e([l({json:{read:!1,write:!1}})],k.prototype,\"labelsVisible\",void 0),e([l({type:[\"ArcGISMapServiceLayer\"]})],k.prototype,\"operationalLayerType\",void 0),e([l({json:{read:!1,write:!1}})],k.prototype,\"popupEnabled\",void 0),e([l({type:q})],k.prototype,\"preferredTimeReference\",void 0),e([l()],k.prototype,\"sourceJSON\",void 0),e([l({json:{write:{ignoreOrigin:!0}}})],k.prototype,\"sublayers\",void 0),e([d(\"sublayers\",{layers:{type:[A]},visibleLayers:{type:[c]}})],k.prototype,\"writeSublayers\",null),e([l({type:[\"show\",\"hide\",\"hide-children\"]})],k.prototype,\"listMode\",void 0),e([l({json:{read:!1},readOnly:!0,value:\"map-image\"})],k.prototype,\"type\",void 0),e([l(R)],k.prototype,\"url\",void 0),k=e([u(\"esri.layers.MapImageLayer\")],k);const _=k;export{_ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}