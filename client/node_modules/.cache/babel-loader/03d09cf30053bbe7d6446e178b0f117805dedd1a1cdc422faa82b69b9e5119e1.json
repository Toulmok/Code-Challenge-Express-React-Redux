{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { eachAlways as e } from \"../../../../../core/promiseUtils.js\";\nimport { BufferView as i } from \"./bufferview.js\";\nvar r = /*#__PURE__*/function () {\n  function r(e) {\n    _classCallCheck(this, r);\n    this._gltf = e, this._bufferViews = [], this._isFinalized = !1, e.buffers || (e.buffers = []), this.index = e.buffers.length;\n    var i = {\n      byteLength: -1\n    };\n    e.buffers.push(i), this._buffer = i;\n  }\n  _createClass(r, [{\n    key: \"addBufferView\",\n    value: function addBufferView(e, _r, t) {\n      if (this._finalizePromise) throw new Error(\"Cannot add buffer view after fiinalizing buffer\");\n      var f = new i(this, this._gltf, e, _r, t);\n      return this._bufferViews.push(f), f;\n    }\n  }, {\n    key: \"getByteOffset\",\n    value: function getByteOffset(e) {\n      var i = 0;\n      var _iterator = _createForOfIteratorHelper(this._bufferViews),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _r2 = _step.value;\n          if (_r2 === e) return i;\n          i += _r2.byteSize;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      throw new Error(\"Given bufferView was not present in this buffer\");\n    }\n  }, {\n    key: \"getViewFinalizePromises\",\n    value: function getViewFinalizePromises(e) {\n      var i = [];\n      var _iterator2 = _createForOfIteratorHelper(this._bufferViews),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _r3 = _step2.value;\n          if (e && _r3 === e) return i;\n          i.push(_r3.finalized);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return i;\n    }\n  }, {\n    key: \"getArrayBuffer\",\n    value: function getArrayBuffer() {\n      if (!this._isFinalized) throw new Error(\"Cannot get ArrayBuffer from Buffer before it is finalized\");\n      var e = this._getTotalSize(),\n        i = new ArrayBuffer(e);\n      var _r4 = 0;\n      var _iterator3 = _createForOfIteratorHelper(this._bufferViews),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var t = _step3.value;\n          t.writeOutToBuffer(i, _r4), _r4 += t.byteSize;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return i;\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      var _this = this,\n        _this$_gltf$extras;\n      if (this._finalizePromise) throw new Error(\"Buffer \".concat(this.index, \" was already finalized\"));\n      return this._finalizePromise = new Promise(function (i) {\n        i(e(_this.getViewFinalizePromises()));\n      }).then(function () {\n        _this._isFinalized = !0;\n        var e = _this.getArrayBuffer();\n        _this._buffer.byteLength = e.byteLength, _this._buffer.uri = e;\n      }), (_this$_gltf$extras = this._gltf.extras) !== null && _this$_gltf$extras !== void 0 && _this$_gltf$extras.promises.push(this._finalizePromise), this._finalizePromise;\n    }\n  }, {\n    key: \"_getTotalSize\",\n    value: function _getTotalSize() {\n      var e = 0;\n      var _iterator4 = _createForOfIteratorHelper(this._bufferViews),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _i = _step4.value;\n          e += _i.byteSize;\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      return e;\n    }\n  }]);\n  return r;\n}();\nexport { r as Buffer };","map":{"version":3,"names":["eachAlways","e","BufferView","i","r","_classCallCheck","_gltf","_bufferViews","_isFinalized","buffers","index","length","byteLength","push","_buffer","_createClass","key","value","addBufferView","t","_finalizePromise","Error","f","getByteOffset","_iterator","_createForOfIteratorHelper","_step","s","n","done","byteSize","err","getViewFinalizePromises","_iterator2","_step2","finalized","getArrayBuffer","_getTotalSize","ArrayBuffer","_iterator3","_step3","writeOutToBuffer","finalize","_this","_this$_gltf$extras","concat","Promise","then","uri","extras","promises","_iterator4","_step4","Buffer"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/buffer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{eachAlways as e}from\"../../../../../core/promiseUtils.js\";import{BufferView as i}from\"./bufferview.js\";class r{constructor(e){this._gltf=e,this._bufferViews=[],this._isFinalized=!1,e.buffers||(e.buffers=[]),this.index=e.buffers.length;const i={byteLength:-1};e.buffers.push(i),this._buffer=i}addBufferView(e,r,t){if(this._finalizePromise)throw new Error(\"Cannot add buffer view after fiinalizing buffer\");const f=new i(this,this._gltf,e,r,t);return this._bufferViews.push(f),f}getByteOffset(e){let i=0;for(const r of this._bufferViews){if(r===e)return i;i+=r.byteSize}throw new Error(\"Given bufferView was not present in this buffer\")}getViewFinalizePromises(e){const i=[];for(const r of this._bufferViews){if(e&&r===e)return i;i.push(r.finalized)}return i}getArrayBuffer(){if(!this._isFinalized)throw new Error(\"Cannot get ArrayBuffer from Buffer before it is finalized\");const e=this._getTotalSize(),i=new ArrayBuffer(e);let r=0;for(const t of this._bufferViews)t.writeOutToBuffer(i,r),r+=t.byteSize;return i}finalize(){if(this._finalizePromise)throw new Error(`Buffer ${this.index} was already finalized`);return this._finalizePromise=new Promise((i=>{i(e(this.getViewFinalizePromises()))})).then((()=>{this._isFinalized=!0;const e=this.getArrayBuffer();this._buffer.byteLength=e.byteLength,this._buffer.uri=e})),this._gltf.extras?.promises.push(this._finalizePromise),this._finalizePromise}_getTotalSize(){let e=0;for(const i of this._bufferViews)e+=i.byteSize;return e}}export{r as Buffer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}