{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { remove as t } from \"../../../../core/arrayUtils.js\";\nimport { isSome as i } from \"../../../../core/maybe.js\";\nimport { getObjectId as e } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nclass s {\n  constructor(t) {\n    this._graphicsCore = t, this._idToState = new Map(), this._states = new Set();\n    const i = t.owner.layer && t.owner.layer.objectIdField;\n    i ? (this._getGraphicId = t => e(t, i), this._getGraphics3DGraphicById = t => this._graphicsCore.getGraphics3DGraphicByObjectId(t)) : (this._getGraphicId = t => t.uid, this._getGraphics3DGraphicById = t => this._graphicsCore.getGraphics3DGraphicById(t));\n  }\n  destroy() {\n    this._idToState.clear(), this._states.forEach((t, i) => this.remove(i));\n  }\n  add(t) {\n    const e = {\n      remove: () => this.remove(t)\n    };\n    if (this._states.has(t)) return e;\n    const s = this._getGraphicId(t.graphic),\n      a = this._getGraphics3DGraphicById(s);\n    this._states.has(t) || this._states.add(t);\n    return this._ensureStateList(s).push(t), t.displaying = !!i(a) && a.isVisible(), t.isDraped = !!i(a) && a.isDraped, t.tracking = !0, i(a) && t.emit(\"changed\"), e;\n  }\n  remove(i) {\n    if (this._states.has(i)) {\n      if (this._idToState.size) {\n        const e = this._getGraphicId(i.graphic),\n          s = this._idToState.get(e);\n        s && (t(s, i), 0 === s.length && this._idToState.delete(e));\n      }\n      this._states.delete(i), i.tracking = !1, i.displaying = !1;\n    }\n  }\n  addGraphic(t) {\n    this._forEachState(t, i => {\n      i.displaying = t.isVisible(), i.isDraped = t.isDraped, i.emit(\"changed\");\n    });\n  }\n  removeGraphic(t) {\n    this._forEachState(t, t => {\n      t.displaying = !1, t.isDraped = !1;\n    });\n  }\n  updateGraphicGeometry(t) {\n    this._forEachState(t, t => t.emit(\"changed\"));\n  }\n  updateGraphicVisibility(t) {\n    this._forEachState(t, i => i.displaying = t.isVisible());\n  }\n  allGraphicsDeleted() {\n    this._states.forEach(t => {\n      t.displaying = !1;\n    });\n  }\n  _ensureStateList(t) {\n    const i = this._idToState.get(t);\n    if (i) return i;\n    const e = new Array();\n    return this._idToState.set(t, e), e;\n  }\n  _forEachState(t, i) {\n    if (0 === this._states.size || 0 === this._idToState.size) return;\n    const e = this._getGraphicId(t.graphic),\n      s = this._idToState.get(e);\n    null != s && s.forEach(i);\n  }\n}\nexport { s as GraphicStateTracking };","map":{"version":3,"names":["remove","t","isSome","i","getObjectId","e","s","constructor","_graphicsCore","_idToState","Map","_states","Set","owner","layer","objectIdField","_getGraphicId","_getGraphics3DGraphicById","getGraphics3DGraphicByObjectId","uid","getGraphics3DGraphicById","destroy","clear","forEach","add","has","graphic","a","_ensureStateList","push","displaying","isVisible","isDraped","tracking","emit","size","get","length","delete","addGraphic","_forEachState","removeGraphic","updateGraphicGeometry","updateGraphicVisibility","allGraphicsDeleted","Array","set","GraphicStateTracking"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{remove as t}from\"../../../../core/arrayUtils.js\";import{isSome as i}from\"../../../../core/maybe.js\";import{getObjectId as e}from\"../../../../layers/graphics/dehydratedFeatures.js\";class s{constructor(t){this._graphicsCore=t,this._idToState=new Map,this._states=new Set;const i=t.owner.layer&&t.owner.layer.objectIdField;i?(this._getGraphicId=t=>e(t,i),this._getGraphics3DGraphicById=t=>this._graphicsCore.getGraphics3DGraphicByObjectId(t)):(this._getGraphicId=t=>t.uid,this._getGraphics3DGraphicById=t=>this._graphicsCore.getGraphics3DGraphicById(t))}destroy(){this._idToState.clear(),this._states.forEach(((t,i)=>this.remove(i)))}add(t){const e={remove:()=>this.remove(t)};if(this._states.has(t))return e;const s=this._getGraphicId(t.graphic),a=this._getGraphics3DGraphicById(s);this._states.has(t)||this._states.add(t);return this._ensureStateList(s).push(t),t.displaying=!!i(a)&&a.isVisible(),t.isDraped=!!i(a)&&a.isDraped,t.tracking=!0,i(a)&&t.emit(\"changed\"),e}remove(i){if(this._states.has(i)){if(this._idToState.size){const e=this._getGraphicId(i.graphic),s=this._idToState.get(e);s&&(t(s,i),0===s.length&&this._idToState.delete(e))}this._states.delete(i),i.tracking=!1,i.displaying=!1}}addGraphic(t){this._forEachState(t,(i=>{i.displaying=t.isVisible(),i.isDraped=t.isDraped,i.emit(\"changed\")}))}removeGraphic(t){this._forEachState(t,(t=>{t.displaying=!1,t.isDraped=!1}))}updateGraphicGeometry(t){this._forEachState(t,(t=>t.emit(\"changed\")))}updateGraphicVisibility(t){this._forEachState(t,(i=>i.displaying=t.isVisible()))}allGraphicsDeleted(){this._states.forEach((t=>{t.displaying=!1}))}_ensureStateList(t){const i=this._idToState.get(t);if(i)return i;const e=new Array;return this._idToState.set(t,e),e}_forEachState(t,i){if(0===this._states.size||0===this._idToState.size)return;const e=this._getGraphicId(t.graphic),s=this._idToState.get(e);null!=s&&s.forEach(i)}}export{s as GraphicStateTracking};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}