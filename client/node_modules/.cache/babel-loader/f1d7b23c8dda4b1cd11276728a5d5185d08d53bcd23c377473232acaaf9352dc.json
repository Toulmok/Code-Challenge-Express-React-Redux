{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _objectSpread from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { remove as e } from \"../arrayUtils.js\";\nimport { makeHandle as t } from \"../handleUtils.js\";\nimport r from \"../Logger.js\";\nimport { isSome as s } from \"../maybe.js\";\nimport { throwIfAborted as i } from \"../promiseUtils.js\";\nimport { open as o } from \"./workers.js\";\nvar h = /*#__PURE__*/function () {\n  function h(e, t, s, i) {\n    var _this = this;\n    var _h = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    _classCallCheck(this, h);\n    this._mainMethod = t, this._transferLists = s, this._listeners = [], this._promise = o(e, _objectSpread(_objectSpread({}, _h), {}, {\n      schedule: i\n    })).then(function (e) {\n      if (void 0 === _this._thread) {\n        _this._thread = e, _this._promise = null, _h.hasInitialize && _this.broadcast({}, \"initialize\");\n        var _iterator = _createForOfIteratorHelper(_this._listeners),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _e = _step.value;\n            _this._connectListener(_e);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } else e.close();\n    }), this._promise.catch(function (t) {\n      return r.getLogger(\"esri.core.workers.WorkerHandle\").error(\"Failed to initialize \".concat(e, \" worker: \").concat(t));\n    });\n  }\n  _createClass(h, [{\n    key: \"on\",\n    value: function on(r, i) {\n      var _this2 = this;\n      var o = {\n        removed: !1,\n        eventName: r,\n        callback: i,\n        threadHandle: null\n      };\n      return this._listeners.push(o), this._connectListener(o), t(function () {\n        o.removed = !0, e(_this2._listeners, o), _this2._thread && s(o.threadHandle) && o.threadHandle.remove();\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this._thread && (this._thread.close(), this._thread = null), this._promise = null;\n    }\n  }, {\n    key: \"invoke\",\n    value: function invoke(e, t) {\n      return this.invokeMethod(this._mainMethod, e, t);\n    }\n  }, {\n    key: \"invokeMethod\",\n    value: function invokeMethod(e, t, r) {\n      var _this3 = this;\n      if (this._thread) {\n        var _s = this._transferLists[e],\n          _i = _s ? _s(t) : [];\n        return this._thread.invoke(e, t, {\n          transferList: _i,\n          signal: r\n        });\n      }\n      return this._promise ? this._promise.then(function () {\n        return i(r), _this3.invokeMethod(e, t, r);\n      }) : Promise.reject(null);\n    }\n  }, {\n    key: \"broadcast\",\n    value: function broadcast(e, t) {\n      var _this4 = this;\n      return this._thread ? Promise.all(this._thread.broadcast(t, e)).then(function () {}) : this._promise ? this._promise.then(function () {\n        return _this4.broadcast(e, t);\n      }) : Promise.reject();\n    }\n  }, {\n    key: \"promise\",\n    get: function get() {\n      return this._promise;\n    }\n  }, {\n    key: \"_connectListener\",\n    value: function _connectListener(e) {\n      this._thread && this._thread.on(e.eventName, e.callback).then(function (t) {\n        e.removed || (e.threadHandle = t);\n      });\n    }\n  }]);\n  return h;\n}();\nexport { h as WorkerHandle };","map":{"version":3,"names":["remove","e","makeHandle","t","r","isSome","s","throwIfAborted","i","open","o","h","_this","arguments","length","undefined","_classCallCheck","_mainMethod","_transferLists","_listeners","_promise","_objectSpread","schedule","then","_thread","hasInitialize","broadcast","_iterator","_createForOfIteratorHelper","_step","n","done","value","_connectListener","err","f","close","catch","getLogger","error","concat","_createClass","key","on","_this2","removed","eventName","callback","threadHandle","push","destroy","invoke","invokeMethod","_this3","transferList","signal","Promise","reject","_this4","all","get","WorkerHandle"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/core/workers/WorkerHandle.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{remove as e}from\"../arrayUtils.js\";import{makeHandle as t}from\"../handleUtils.js\";import r from\"../Logger.js\";import{isSome as s}from\"../maybe.js\";import{throwIfAborted as i}from\"../promiseUtils.js\";import{open as o}from\"./workers.js\";class h{constructor(e,t,s,i,h={}){this._mainMethod=t,this._transferLists=s,this._listeners=[],this._promise=o(e,{...h,schedule:i}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,h.hasInitialize&&this.broadcast({},\"initialize\");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>r.getLogger(\"esri.core.workers.WorkerHandle\").error(`Failed to initialize ${e} worker: ${t}`)))}on(r,i){const o={removed:!1,eventName:r,callback:i,threadHandle:null};return this._listeners.push(o),this._connectListener(o),t((()=>{o.removed=!0,e(this._listeners,o),this._thread&&s(o.threadHandle)&&o.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const s=this._transferLists[e],i=s?s(t):[];return this._thread.invoke(e,t,{transferList:i,signal:r})}return this._promise?this._promise.then((()=>(i(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}export{h as WorkerHandle};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}