{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../geometry/Extent.js\";\nimport a from \"../../geometry/Point.js\";\nimport l from \"../../geometry/SpatialReference.js\";\nimport i from \"../../layers/support/RasterInfo.js\";\nimport { parseUrl as s, encode as n, asValidOptions as r } from \"../utils.js\";\nimport o from \"../support/FeatureSet.js\";\nasync function u(u, m, f) {\n  const p = s(u),\n    {\n      renderingRule: c,\n      sourceJSON: d\n    } = m || {},\n    h = c ? JSON.stringify(c.rasterFunctionDefinition || c) : null,\n    g = n({\n      ...p.query,\n      renderingRule: h,\n      f: \"json\"\n    }),\n    v = r(g, f);\n  u = p.path;\n  const y = d || (await e(u, v).then(e => e.data)),\n    S = y.hasRasterAttributeTable ? e(`${u}/rasterAttributeTable`, v) : null,\n    V = y.hasColormap ? e(`${u}/colormap`, v) : null,\n    x = y.hasHistograms ? e(`${u}/histograms`, v) : null,\n    b = y.currentVersion >= 10.3 ? e(`${u}/keyProperties`, v) : null,\n    D = y.hasMultidimensions ? e(`${u}/multidimensionalInfo`, v) : null,\n    R = await Promise.allSettled([S, V, x, b, D]);\n  let T = null;\n  if (y.minValues && y.minValues.length === y.bandCount) {\n    T = [];\n    for (let e = 0; e < y.minValues.length; e++) T.push({\n      min: y.minValues[e],\n      max: y.maxValues[e],\n      avg: y.meanValues[e],\n      stddev: y.stdvValues[e]\n    });\n  }\n  const j = t.fromJSON(y.extent),\n    w = Math.ceil(j.width / y.pixelSizeX - .1),\n    J = Math.ceil(j.height / y.pixelSizeY - .1),\n    N = l.fromJSON(y.spatialReference || y.extent.spatialReference),\n    O = \"fulfilled\" === R[0].status && R[0].value ? o.fromJSON(R[0].value.data) : null,\n    I = \"fulfilled\" === R[1].status ? R[1].value?.data.colormap : null,\n    z = \"fulfilled\" === R[2].status ? R[2].value?.data.histograms : null,\n    C = \"fulfilled\" === R[3].status ? R[3].value?.data ?? {} : {},\n    $ = \"fulfilled\" === R[4].status ? R[4].value?.data.multidimensionalInfo : null;\n  $?.variables?.length && $.variables.forEach(e => {\n    e.statistics?.length && e.statistics.forEach(e => {\n      e.avg = e.mean, e.stddev = e.standardDeviation;\n    });\n  });\n  const {\n    defaultVariable: P,\n    serviceDataType: E\n  } = y;\n  P && P !== C.DefaultVariable && (C.DefaultVariable = P), E && E.includes(\"esriImageServiceDataTypeVector\") && !E.includes(C.DataType) && (C.DataType = E.replace(\"esriImageServiceDataType\", \"\"));\n  let M = y.noDataValue;\n  return y.noDataValues?.length && y.noDataValues.some(e => e !== M) && (M = y.noDataValues), new i({\n    width: w,\n    height: J,\n    bandCount: y.bandCount,\n    extent: t.fromJSON(y.extent),\n    spatialReference: N,\n    pixelSize: new a({\n      x: y.pixelSizeX,\n      y: y.pixelSizeY,\n      spatialReference: N\n    }),\n    pixelType: y.pixelType.toLowerCase(),\n    statistics: T,\n    attributeTable: O,\n    colormap: I,\n    histograms: z,\n    keyProperties: C,\n    noDataValue: M,\n    multidimensionalInfo: $\n  });\n}\nfunction m(e, t, a) {\n  return u(e, {\n    sourceJSON: t\n  }, a);\n}\nfunction f(e, t, a) {\n  return u(e, {\n    renderingRule: t\n  }, a);\n}\nexport { m as fetchServiceRasterInfo, f as generateRasterInfo };","map":{"version":3,"names":["e","t","a","l","i","parseUrl","s","encode","n","asValidOptions","r","o","u","m","f","p","renderingRule","c","sourceJSON","d","h","JSON","stringify","rasterFunctionDefinition","g","query","v","path","y","then","data","S","hasRasterAttributeTable","V","hasColormap","x","hasHistograms","b","currentVersion","D","hasMultidimensions","R","Promise","allSettled","T","minValues","length","bandCount","push","min","max","maxValues","avg","meanValues","stddev","stdvValues","j","fromJSON","extent","w","Math","ceil","width","pixelSizeX","J","height","pixelSizeY","N","spatialReference","O","status","value","I","colormap","z","histograms","C","$","multidimensionalInfo","variables","forEach","statistics","mean","standardDeviation","defaultVariable","P","serviceDataType","E","DefaultVariable","includes","DataType","replace","M","noDataValue","noDataValues","some","pixelSize","pixelType","toLowerCase","attributeTable","keyProperties","fetchServiceRasterInfo","generateRasterInfo"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/rest/imageService/fetchRasterInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../geometry/Extent.js\";import a from\"../../geometry/Point.js\";import l from\"../../geometry/SpatialReference.js\";import i from\"../../layers/support/RasterInfo.js\";import{parseUrl as s,encode as n,asValidOptions as r}from\"../utils.js\";import o from\"../support/FeatureSet.js\";async function u(u,m,f){const p=s(u),{renderingRule:c,sourceJSON:d}=m||{},h=c?JSON.stringify(c.rasterFunctionDefinition||c):null,g=n({...p.query,renderingRule:h,f:\"json\"}),v=r(g,f);u=p.path;const y=d||await e(u,v).then((e=>e.data)),S=y.hasRasterAttributeTable?e(`${u}/rasterAttributeTable`,v):null,V=y.hasColormap?e(`${u}/colormap`,v):null,x=y.hasHistograms?e(`${u}/histograms`,v):null,b=y.currentVersion>=10.3?e(`${u}/keyProperties`,v):null,D=y.hasMultidimensions?e(`${u}/multidimensionalInfo`,v):null,R=await Promise.allSettled([S,V,x,b,D]);let T=null;if(y.minValues&&y.minValues.length===y.bandCount){T=[];for(let e=0;e<y.minValues.length;e++)T.push({min:y.minValues[e],max:y.maxValues[e],avg:y.meanValues[e],stddev:y.stdvValues[e]})}const j=t.fromJSON(y.extent),w=Math.ceil(j.width/y.pixelSizeX-.1),J=Math.ceil(j.height/y.pixelSizeY-.1),N=l.fromJSON(y.spatialReference||y.extent.spatialReference),O=\"fulfilled\"===R[0].status&&R[0].value?o.fromJSON(R[0].value.data):null,I=\"fulfilled\"===R[1].status?R[1].value?.data.colormap:null,z=\"fulfilled\"===R[2].status?R[2].value?.data.histograms:null,C=\"fulfilled\"===R[3].status?R[3].value?.data??{}:{},$=\"fulfilled\"===R[4].status?R[4].value?.data.multidimensionalInfo:null;$?.variables?.length&&$.variables.forEach((e=>{e.statistics?.length&&e.statistics.forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation}))}));const{defaultVariable:P,serviceDataType:E}=y;P&&P!==C.DefaultVariable&&(C.DefaultVariable=P),E&&E.includes(\"esriImageServiceDataTypeVector\")&&!E.includes(C.DataType)&&(C.DataType=E.replace(\"esriImageServiceDataType\",\"\"));let M=y.noDataValue;return y.noDataValues?.length&&y.noDataValues.some((e=>e!==M))&&(M=y.noDataValues),new i({width:w,height:J,bandCount:y.bandCount,extent:t.fromJSON(y.extent),spatialReference:N,pixelSize:new a({x:y.pixelSizeX,y:y.pixelSizeY,spatialReference:N}),pixelType:y.pixelType.toLowerCase(),statistics:T,attributeTable:O,colormap:I,histograms:z,keyProperties:C,noDataValue:M,multidimensionalInfo:$})}function m(e,t,a){return u(e,{sourceJSON:t},a)}function f(e,t,a){return u(e,{renderingRule:t},a)}export{m as fetchServiceRasterInfo,f as generateRasterInfo};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}