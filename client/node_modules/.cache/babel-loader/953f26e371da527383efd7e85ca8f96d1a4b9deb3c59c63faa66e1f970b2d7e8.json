{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/PooledArray.js\";\nimport { isPromiseLike as t, createAbortError as r } from \"../../../../core/promiseUtils.js\";\nimport { union as n } from \"./depthRange.js\";\nimport { RenderSlot as s } from \"./RenderSlot.js\";\nclass i {\n  constructor(t) {\n    this._context = t, this._renderPlugins = new e(), this._slots = [];\n    for (let e = 0; e < s.MAX_SLOTS; ++e) this._slots[e] = [];\n  }\n  add(e, n, s) {\n    const i = () => {\n        if (s?.aborted) throw n.uninitializeRenderContext(), r();\n        this._renderPlugins.push(n);\n        for (const t of e) this._slots[t].push(n);\n        this._context.requestRender();\n      },\n      o = n.initializeRenderContext(this._context, s);\n    if (t(o)) return o.then(i);\n    i();\n  }\n  remove(e) {\n    if (null != this._renderPlugins.removeUnordered(e)) {\n      for (let t = 0; t < this._slots.length; ++t) this._slots[t] = this._slots[t].filter(t => t !== e);\n      e.uninitializeRenderContext(), this._context.requestRender();\n    }\n  }\n  prepareRender() {\n    this._renderPlugins.forAll(e => {\n      e.prepareRender && e.prepareRender(this._context.renderContext);\n    });\n  }\n  updateAnimation(e) {\n    let t = !1;\n    return this._renderPlugins.forAll(r => {\n      r.updateAnimation && (t = r.updateAnimation(e) || t);\n    }), t;\n  }\n  render() {\n    const e = this._slots[this._context.renderContext.bindParameters.slot],\n      t = new Array();\n    e.filter(e => {\n      if (!e.canRender) return !1;\n      if (o(e)) {\n        const r = e.prepareTechnique(this._context.renderContext);\n        return !!r && (t.push(r), !0);\n      }\n      return t.push(null), !0;\n    }).forEach((e, r) => e.render(this._context.renderContext, t[r]));\n  }\n  queryDepthRange(e) {\n    const t = d;\n    return t.near = 1 / 0, t.far = -1 / 0, this._renderPlugins.forAll(r => {\n      if (r.queryDepthRange) {\n        const s = r.queryDepthRange(e);\n        s && n(t, s, t);\n      }\n    }), t;\n  }\n  get needsTransparentPass() {\n    return this._renderPlugins.some(e => !!e.needsTransparentPass);\n  }\n  get needsHighlight() {\n    return this._renderPlugins.some(e => !!e.needsHighlight);\n  }\n  get needsLinearDepth() {\n    return this._renderPlugins.some(e => !!e.needsLinearDepth);\n  }\n  get needsLaserlineWithContrastControl() {\n    const e = this._slots[s.LASERLINES_CONTRAST_CONTROL];\n    return !!e && e.length > 0;\n  }\n  get renderOccludedFlags() {\n    return this._renderPlugins.reduce((e, t) => e | t.renderOccludedFlags, 0);\n  }\n}\nfunction o(e) {\n  return \"prepareTechnique\" in e;\n}\nconst d = {\n  near: 0,\n  far: 0\n};\nexport { i as RenderPluginManager };","map":{"version":3,"names":["e","isPromiseLike","t","createAbortError","r","union","n","RenderSlot","s","i","constructor","_context","_renderPlugins","_slots","MAX_SLOTS","add","aborted","uninitializeRenderContext","push","requestRender","o","initializeRenderContext","then","remove","removeUnordered","length","filter","prepareRender","forAll","renderContext","updateAnimation","render","bindParameters","slot","Array","canRender","prepareTechnique","forEach","queryDepthRange","d","near","far","needsTransparentPass","some","needsHighlight","needsLinearDepth","needsLaserlineWithContrastControl","LASERLINES_CONTRAST_CONTROL","renderOccludedFlags","reduce","RenderPluginManager"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderPluginManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/PooledArray.js\";import{isPromiseLike as t,createAbortError as r}from\"../../../../core/promiseUtils.js\";import{union as n}from\"./depthRange.js\";import{RenderSlot as s}from\"./RenderSlot.js\";class i{constructor(t){this._context=t,this._renderPlugins=new e,this._slots=[];for(let e=0;e<s.MAX_SLOTS;++e)this._slots[e]=[]}add(e,n,s){const i=()=>{if(s?.aborted)throw n.uninitializeRenderContext(),r();this._renderPlugins.push(n);for(const t of e)this._slots[t].push(n);this._context.requestRender()},o=n.initializeRenderContext(this._context,s);if(t(o))return o.then(i);i()}remove(e){if(null!=this._renderPlugins.removeUnordered(e)){for(let t=0;t<this._slots.length;++t)this._slots[t]=this._slots[t].filter((t=>t!==e));e.uninitializeRenderContext(),this._context.requestRender()}}prepareRender(){this._renderPlugins.forAll((e=>{e.prepareRender&&e.prepareRender(this._context.renderContext)}))}updateAnimation(e){let t=!1;return this._renderPlugins.forAll((r=>{r.updateAnimation&&(t=r.updateAnimation(e)||t)})),t}render(){const e=this._slots[this._context.renderContext.bindParameters.slot],t=new Array;e.filter((e=>{if(!e.canRender)return!1;if(o(e)){const r=e.prepareTechnique(this._context.renderContext);return!!r&&(t.push(r),!0)}return t.push(null),!0})).forEach(((e,r)=>e.render(this._context.renderContext,t[r])))}queryDepthRange(e){const t=d;return t.near=1/0,t.far=-1/0,this._renderPlugins.forAll((r=>{if(r.queryDepthRange){const s=r.queryDepthRange(e);s&&n(t,s,t)}})),t}get needsTransparentPass(){return this._renderPlugins.some((e=>!!e.needsTransparentPass))}get needsHighlight(){return this._renderPlugins.some((e=>!!e.needsHighlight))}get needsLinearDepth(){return this._renderPlugins.some((e=>!!e.needsLinearDepth))}get needsLaserlineWithContrastControl(){const e=this._slots[s.LASERLINES_CONTRAST_CONTROL];return!!e&&e.length>0}get renderOccludedFlags(){return this._renderPlugins.reduce(((e,t)=>e|t.renderOccludedFlags),0)}}function o(e){return\"prepareTechnique\"in e}const d={near:0,far:0};export{i as RenderPluginManager};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}