{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { isPowerOfTwo as r } from \"../../../../core/mathUtils.js\";\nimport { unwrapOrThrow as t } from \"../../../../core/maybe.js\";\nimport { TextureSamplingMode as o, CompressedTextureFormat as n } from \"../../../webgl/enums.js\";\nimport { Texture as a } from \"../../../webgl/Texture.js\";\nconst i = e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),\n  s = 542327876,\n  l = 131072,\n  m = 4;\nfunction u(e) {\n  return e.charCodeAt(0) + (e.charCodeAt(1) << 8) + (e.charCodeAt(2) << 16) + (e.charCodeAt(3) << 24);\n}\nfunction c(e) {\n  return String.fromCharCode(255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255);\n}\nconst h = u(\"DXT1\"),\n  p = u(\"DXT3\"),\n  d = u(\"DXT5\"),\n  g = 31,\n  f = 0,\n  C = 1,\n  w = 2,\n  D = 3,\n  T = 4,\n  _ = 7,\n  A = 20,\n  E = 21;\nfunction S(e, r, n) {\n  const {\n    textureData: i,\n    internalFormat: s,\n    width: l,\n    height: m\n  } = t(M(n, r.hasMipmap ?? !1));\n  return r.samplingMode = i.levels.length > 1 ? o.LINEAR_MIPMAP_LINEAR : o.LINEAR, r.hasMipmap = i.levels.length > 1, r.internalFormat = s, r.width = l, r.height = m, new a(e, r, i);\n}\nfunction M(e, t) {\n  const o = new Int32Array(e, 0, g);\n  if (o[f] !== s) return i.error(\"Invalid magic number in DDS header\"), null;\n  if (!(o[A] & m)) return i.error(\"Unsupported format, must contain a FourCC code\"), null;\n  const a = o[E];\n  let u, S;\n  switch (a) {\n    case h:\n      u = 8, S = n.COMPRESSED_RGB_S3TC_DXT1_EXT;\n      break;\n    case p:\n      u = 16, S = n.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n      break;\n    case d:\n      u = 16, S = n.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n      break;\n    default:\n      return i.error(\"Unsupported FourCC code:\", c(a)), null;\n  }\n  let M = 1,\n    x = o[T],\n    R = o[D];\n  0 == (3 & x) && 0 == (3 & R) || (i.warn(\"Rounding up compressed texture size to nearest multiple of 4.\"), x = x + 3 & -4, R = R + 3 & -4);\n  const b = x,\n    X = R;\n  let I, j;\n  o[w] & l && !1 !== t && (M = Math.max(1, o[_])), 1 === M || r(x) && r(R) || (i.warn(\"Ignoring mipmaps of non power of two sized compressed texture.\"), M = 1);\n  let v = o[C] + 4;\n  const F = [];\n  for (let r = 0; r < M; ++r) j = (x + 3 >> 2) * (R + 3 >> 2) * u, I = new Uint8Array(e, v, j), F.push(I), v += j, x = Math.max(1, x >> 1), R = Math.max(1, R >> 1);\n  return {\n    textureData: {\n      type: \"compressed\",\n      levels: F\n    },\n    internalFormat: S,\n    width: b,\n    height: X\n  };\n}\nexport { S as createDDSTexture, M as createDDSTextureData };","map":{"version":3,"names":["e","isPowerOfTwo","r","unwrapOrThrow","t","TextureSamplingMode","o","CompressedTextureFormat","n","Texture","a","i","getLogger","s","l","m","u","charCodeAt","c","String","fromCharCode","h","p","d","g","f","C","w","D","T","_","A","E","S","textureData","internalFormat","width","height","M","hasMipmap","samplingMode","levels","length","LINEAR_MIPMAP_LINEAR","LINEAR","Int32Array","error","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","x","R","warn","b","X","I","j","Math","max","v","F","Uint8Array","push","type","createDDSTexture","createDDSTextureData"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{isPowerOfTwo as r}from\"../../../../core/mathUtils.js\";import{unwrapOrThrow as t}from\"../../../../core/maybe.js\";import{TextureSamplingMode as o,CompressedTextureFormat as n}from\"../../../webgl/enums.js\";import{Texture as a}from\"../../../webgl/Texture.js\";const i=e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),s=542327876,l=131072,m=4;function u(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function c(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}const h=u(\"DXT1\"),p=u(\"DXT3\"),d=u(\"DXT5\"),g=31,f=0,C=1,w=2,D=3,T=4,_=7,A=20,E=21;function S(e,r,n){const{textureData:i,internalFormat:s,width:l,height:m}=t(M(n,r.hasMipmap??!1));return r.samplingMode=i.levels.length>1?o.LINEAR_MIPMAP_LINEAR:o.LINEAR,r.hasMipmap=i.levels.length>1,r.internalFormat=s,r.width=l,r.height=m,new a(e,r,i)}function M(e,t){const o=new Int32Array(e,0,g);if(o[f]!==s)return i.error(\"Invalid magic number in DDS header\"),null;if(!(o[A]&m))return i.error(\"Unsupported format, must contain a FourCC code\"),null;const a=o[E];let u,S;switch(a){case h:u=8,S=n.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case p:u=16,S=n.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case d:u=16,S=n.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return i.error(\"Unsupported FourCC code:\",c(a)),null}let M=1,x=o[T],R=o[D];0==(3&x)&&0==(3&R)||(i.warn(\"Rounding up compressed texture size to nearest multiple of 4.\"),x=x+3&-4,R=R+3&-4);const b=x,X=R;let I,j;o[w]&l&&!1!==t&&(M=Math.max(1,o[_])),1===M||r(x)&&r(R)||(i.warn(\"Ignoring mipmaps of non power of two sized compressed texture.\"),M=1);let v=o[C]+4;const F=[];for(let r=0;r<M;++r)j=(x+3>>2)*(R+3>>2)*u,I=new Uint8Array(e,v,j),F.push(I),v+=j,x=Math.max(1,x>>1),R=Math.max(1,R>>1);return{textureData:{type:\"compressed\",levels:F},internalFormat:S,width:b,height:X}}export{S as createDDSTexture,M as createDDSTextureData};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}