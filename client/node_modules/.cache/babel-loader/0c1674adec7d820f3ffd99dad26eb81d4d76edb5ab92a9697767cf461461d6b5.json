{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { BufferViewVec4u8 as t } from \"../../../../../geometry/support/buffer/BufferView.js\";\nimport { TextureType as e, PixelFormat as i, PixelType as s, TextureSamplingMode as r, TextureWrapMode as h } from \"../../../../webgl/enums.js\";\nimport { Texture as a } from \"../../../../webgl/Texture.js\";\nclass d {\n  constructor(d) {\n    let u = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    this._rctx = d, this._fieldCount = u, this.textureWidth = 4096, this._dirty = !0, this._texture = new a(this._rctx, {\n      target: e.TEXTURE_2D,\n      pixelFormat: i.RGBA,\n      dataType: s.UNSIGNED_BYTE,\n      samplingMode: r.NEAREST,\n      wrapMode: h.CLAMP_TO_EDGE,\n      width: this.textureWidth,\n      height: 1,\n      flipped: !1\n    }), this._data = new t(new ArrayBuffer(4 * this.textureWidth));\n  }\n  dispose() {\n    this._texture.dispose(), this._texture = void 0, this._data = void 0;\n  }\n  setData(t, e, i, s, r, h) {\n    const a = t * this._fieldCount + e;\n    this._dirty = !0, this._data.set(a, 0, i), this._data.set(a, 1, s), this._data.set(a, 2, r), this._data.set(a, 3, h);\n  }\n  setDataElement(t, e, i, s) {\n    const r = t * this._fieldCount + e;\n    this._dirty = !0, this._data.set(r, i, s);\n  }\n  resizeToFit(e) {\n    const i = e * this._fieldCount;\n    if (i >= this._data.count) {\n      const e = Math.ceil((i + 1) / this.textureWidth) * this.textureWidth,\n        s = new t(new ArrayBuffer(4 * e));\n      s.typedBuffer.set(this._data.typedBuffer), this._data = s;\n    }\n  }\n  updateTexture() {\n    if (!this._dirty) return;\n    const t = this._texture.descriptor.width,\n      e = this._texture.descriptor.height;\n    this._data.count > t * e && this._texture.resize(t, this._data.count / t), this._texture.setData(this._data.typedBuffer), this._dirty = !1;\n  }\n  get texture() {\n    return this._texture;\n  }\n}\nexport { d as TextureBackedBuffer };","map":{"version":3,"names":["BufferViewVec4u8","t","TextureType","e","PixelFormat","i","PixelType","s","TextureSamplingMode","r","TextureWrapMode","h","Texture","a","d","constructor","u","arguments","length","undefined","_rctx","_fieldCount","textureWidth","_dirty","_texture","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","samplingMode","NEAREST","wrapMode","CLAMP_TO_EDGE","width","height","flipped","_data","ArrayBuffer","dispose","setData","set","setDataElement","resizeToFit","count","Math","ceil","typedBuffer","updateTexture","descriptor","resize","texture","TextureBackedBuffer"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureBackedBuffer/TextureBackedBuffer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{BufferViewVec4u8 as t}from\"../../../../../geometry/support/buffer/BufferView.js\";import{TextureType as e,PixelFormat as i,PixelType as s,TextureSamplingMode as r,TextureWrapMode as h}from\"../../../../webgl/enums.js\";import{Texture as a}from\"../../../../webgl/Texture.js\";class d{constructor(d,u=1){this._rctx=d,this._fieldCount=u,this.textureWidth=4096,this._dirty=!0,this._texture=new a(this._rctx,{target:e.TEXTURE_2D,pixelFormat:i.RGBA,dataType:s.UNSIGNED_BYTE,samplingMode:r.NEAREST,wrapMode:h.CLAMP_TO_EDGE,width:this.textureWidth,height:1,flipped:!1}),this._data=new t(new ArrayBuffer(4*this.textureWidth))}dispose(){this._texture.dispose(),this._texture=void 0,this._data=void 0}setData(t,e,i,s,r,h){const a=t*this._fieldCount+e;this._dirty=!0,this._data.set(a,0,i),this._data.set(a,1,s),this._data.set(a,2,r),this._data.set(a,3,h)}setDataElement(t,e,i,s){const r=t*this._fieldCount+e;this._dirty=!0,this._data.set(r,i,s)}resizeToFit(e){const i=e*this._fieldCount;if(i>=this._data.count){const e=Math.ceil((i+1)/this.textureWidth)*this.textureWidth,s=new t(new ArrayBuffer(4*e));s.typedBuffer.set(this._data.typedBuffer),this._data=s}}updateTexture(){if(!this._dirty)return;const t=this._texture.descriptor.width,e=this._texture.descriptor.height;this._data.count>t*e&&this._texture.resize(t,this._data.count/t),this._texture.setData(this._data.typedBuffer),this._dirty=!1}get texture(){return this._texture}}export{d as TextureBackedBuffer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}