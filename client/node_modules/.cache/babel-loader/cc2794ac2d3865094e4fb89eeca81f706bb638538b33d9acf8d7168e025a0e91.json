{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../Graphic.js\";\nimport t from \"../request.js\";\nimport has from \"../core/has.js\";\nimport i from \"../core/Logger.js\";\nimport { isSome as r, removeMaybe as s, isNone as a } from \"../core/maybe.js\";\nimport { isAbortError as n } from \"../core/promiseUtils.js\";\nimport { watch as o } from \"../core/reactiveUtils.js\";\nimport { i as l } from \"../chunks/vec3.js\";\nimport { c as h } from \"../chunks/vec3f64.js\";\nimport { renderSRFromViewSR as d } from \"../geometry/support/coordinateSystem.js\";\nimport { PointIndex as _, PlaneIndex as u } from \"../geometry/support/frustum.js\";\nimport { WasmCullMode as c, VoxelRequestType as m, UpdateFlags as g, ContainerType as f } from \"../libs/vxl/enums.js\";\nimport { loadVoxelWASM as p } from \"../libs/vxl/VxlModule.js\";\nimport { ViewingMode as x } from \"../views/ViewingMode.js\";\nimport { VoxelTarget as y } from \"../views/3d/layers/i3s/Intersector.js\";\nimport { Frustum as v } from \"../views/3d/state/Frustum.js\";\nimport { RenderCoordsHelper as b } from \"../views/3d/support/RenderCoordsHelper.js\";\nimport { ShaderOutput as w } from \"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";\nimport { newIntersectorResult as T } from \"../views/3d/webgl-engine/lib/Intersector.js\";\nimport { IntersectorType as R, StoreResults as E } from \"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";\nimport { RenderFeature as L } from \"../views/3d/webgl-engine/lib/RenderFeature.js\";\nimport { RenderSlot as C } from \"../views/3d/webgl-engine/lib/RenderSlot.js\";\nimport { ContextType as F } from \"../views/webgl/context-util.js\";\nimport { CompareFunction as S, Face as V, StencilOperation as P } from \"../views/webgl/enums.js\";\nconst W = i.getLogger(\"esri.layers.VoxelWasmPerSceneView\");\nvar I;\n!function (e) {\n  e[e.Lifetime = 1] = \"Lifetime\", e[e.RequestResponse = 2] = \"RequestResponse\", e[e.Rendering = 3] = \"Rendering\", e[e.Error = 4] = \"Error\";\n}(I || (I = {}));\nclass k {\n  constructor(e) {\n    this._halfIntTexturesAvailable = !1, this._textureFloatLinearAvailable = !1, this._havePreparedWithAllLayers = !1, this._readyWatchHandle = null, this._qualityWatchHandle = null, this._stationaryWatchHandle = null, this._timeExtentWatchHandle = null, this._renderPluginContext = null, this._vxlPromise = null, this._vxl = null, this._pluginIsActive = !1, this._moreToLoad = !1, this._viewportWidth = -1, this._viewportHeight = -1, this._newLayers = [], this._layers = new Map(), this._shaderOutput = w.Color, this._renderSlot = C.VOXEL, this._rctx = null, this._renderTargetToRestore = null, this._lastFrameWasStationary = !1, this._wasmMemBlockSizes = [512, 1024, 2048, 4096, 8192, 16384, 32768, 65536], this._wasmMemBlocks = new Map(), this._dbgFlags = new Set(), this._captureFrustum = !1, this._frustum = null, this._frustumRenderableId = -1, this._renderCoordsHelper = null, this.type = R.VOXEL, this.slicePlaneEnabled = !0, this.isGround = !1, this.layerUid = [], this._view = e, this._initialize();\n  }\n  get canRender() {\n    return !!this._vxl && \"local\" === this._view.viewingMode;\n  }\n  _dbg(e, t) {\n    this._dbgFlags.has(e) && (e === I.Error ? W.error(t) : W.warn(t));\n  }\n  _removeRenderPlugin() {\n    this._pluginIsActive && this._view._stage && (this._dbg(I.Lifetime, \"--removeRenderPlugin--\"), this._view._stage.removeRenderPlugin(this)), this._pluginIsActive = !1;\n  }\n  _initialize() {\n    this._dbg(I.Lifetime, \"--initialize--\");\n    for (const e of this._wasmMemBlockSizes) this._wasmMemBlocks.set(e, 0);\n    this._readyWatchHandle = o(() => this._view.ready, e => {\n      e && \"local\" === this._view.viewingMode ? (this._dbg(I.Lifetime, \"view ready status changed to ready on a local view, calling addRenderPlugin\"), this._view._stage.addRenderPlugin([this._renderSlot], this), this._pluginIsActive = !0) : (this._dbg(I.Lifetime, \"view ready status changed, not ready or not a local view!\"), this._removeRenderPlugin());\n    }, {\n      initial: !0\n    }), this._qualityWatchHandle = o(() => this._view?.qualityProfile, e => {\n      this._dbg(I.Rendering, \"qualityProfile changed to \" + e), this._vxl && this._vxl.set_quality(this._toWasmQuality(e));\n    }, {\n      initial: !0\n    }), this._timeExtentWatchHandle = o(() => this._view?.timeExtent, () => {\n      if (this._vxl) {\n        const e = this._getTimeArgs(this._view?.timeExtent);\n        this._dbg(I.Rendering, \"sceneView timeExtent changed to useTime=\" + e.useTime + \" st=\" + e.startTime + \" et=\" + e.endTime), this._vxl.set_scene_time_extent(e.startTime, e.endTime, e.useTime), this._renderPluginContext.requestRender();\n      }\n    }, {\n      initial: !0\n    }), this._stationaryWatchHandle = o(() => this._view?.stationary, e => {\n      this._vxl && e && !this._lastFrameWasStationary && this._renderPluginContext.requestRender();\n    });\n  }\n  initializeRenderContext(e) {\n    this._dbg(I.Lifetime, \"--initializeRenderContext--\");\n    const t = e.renderContext.rctx;\n    t.type === F.WEBGL2 ? (this._renderPluginContext = e, this._rctx = e.renderContext.rctx, this._halfIntTexturesAvailable = !!this._rctx.capabilities.textureNorm16, this._textureFloatLinearAvailable = this._rctx.capabilities.textureFloatLinear, this._initializeWasm(t.gl)) : this._dbg(I.Error, \"WebGL 1 context only!\");\n  }\n  uninitializeRenderContext() {\n    this._renderPluginContext = null, this._rctx = null, this._dbg(I.Lifetime, \"--uninitializeRenderContext--\");\n  }\n  _restoreFramebuffer() {\n    if (!this._renderTargetToRestore) return;\n    const e = this._renderTargetToRestore.fbo;\n    if (!!!this._rctx) return void this._dbg(I.Error, \"no context in restoreFramebuffer!\");\n    this._rctx.bindFramebuffer(e, !0);\n    const t = this._renderTargetToRestore.viewport;\n    this._rctx.setViewport(t.x, t.y, t.width, t.height);\n  }\n  _bindPreviousDepthToSlot(e, t) {\n    const i = !!this._rctx,\n      r = !!this._renderTargetToRestore;\n    if (!i || !r) return 0;\n    const s = this._renderTargetToRestore.fbo.depthStencilTexture;\n    return s ? (0 === t ? this._rctx.bindTexture(null, e, !0) : this._rctx.bindTexture(s, e, !0), 1) : (this._dbg(I.Error, \"no depth/stencil texture exists!\"), 0);\n  }\n  _modifyResourceCount(e, t, i) {\n    if (!this._rctx) return void this._dbg(I.Error, \"modifyAllocation callback has no rendering context!\");\n    const r = e;\n    1 === i ? this._rctx.instanceCounter.increment(r, t) : this._rctx.instanceCounter.decrement(r, t);\n  }\n  _setBlendState(e, t, i, r) {\n    this._rctx ? (this._rctx.setBlendingEnabled(1 === e), this._rctx.setBlendFunction(t, i), this._rctx.setBlendEquation(r)) : this._dbg(I.Error, \"setBlendState callback has no rendering context!\");\n  }\n  _setFrontFace(e) {\n    this._rctx ? this._rctx.setFrontFace(e) : this._dbg(I.Error, \"setFrontFace callback has no rendering context!\");\n  }\n  _setDepthStencilStateFunction(e, t, i) {\n    this._rctx ? (this._rctx.setDepthFunction(i), this._rctx.setDepthTestEnabled(1 === e), this._rctx.setDepthWriteEnabled(1 === t), this._rctx.setStencilTestEnabled(!1), this._rctx.setStencilFunction(S.ALWAYS, 0, 255), this._rctx.setStencilOpSeparate(V.FRONT, P.KEEP, P.INCR, P.KEEP), this._rctx.setStencilOpSeparate(V.BACK, P.KEEP, P.DECR, P.KEEP)) : this._dbg(I.Error, \"setDepthStencilStateFunction callback has no rendering context!\");\n  }\n  _setRasterizerState(e) {\n    if (this._rctx) switch (e) {\n      case c.None:\n        this._rctx.setFaceCullingEnabled(!1);\n        break;\n      case c.Back:\n        this._rctx.setCullFace(V.BACK), this._rctx.setFaceCullingEnabled(!0);\n        break;\n      case c.Front:\n        this._rctx.setCullFace(V.FRONT), this._rctx.setFaceCullingEnabled(!0);\n    } else this._dbg(I.Error, \"setRasterizerState callback has no rendering context!\");\n  }\n  _setViewport(e, t, i, r) {\n    this._rctx ? this._rctx.setViewport(e, t, i, r) : this._dbg(I.Error, \"setViewport callback has no rendering context!\");\n  }\n  _updateMemoryUsage() {\n    this._layers.forEach((e, t) => {\n      if (e.needMemoryUsageUpdate) {\n        const i = this._vxl.estimate_memory_usage(t);\n        i >= 0 && (e.needMemoryUsageUpdate = !1, e.layerView.setUsedMemory(i));\n      }\n    });\n  }\n  _syncRequestsResponses() {\n    this._layers.forEach((e, i) => {\n      const r = [];\n      e.responses.forEach((t, s) => {\n        r.push(s), this._dbg(I.RequestResponse, \"responding for requestID:\" + s + \" size:\" + t.size), this._vxl.respond(i, s, t), t.requestType !== m.TreeIndex && t.requestType !== m.Section || (e.needMemoryUsageUpdate = !0);\n      });\n      const s = e.responses;\n      for (const t of r) s.delete(t);\n      const a = this._vxl.get_new_requests(i),\n        o = e.abortController.signal;\n      for (const l in a) {\n        e.outstandingRequestCount += 1, 1 === e.outstandingRequestCount && e.layerView.updatingFlagChanged();\n        const i = a[l],\n          r = {\n            responseType: \"array-buffer\",\n            signal: o\n          };\n        this._dbg(I.RequestResponse, \"making requestID:\" + l + \" url:\" + i.url), t(i.url, r).then(t => {\n          e.outstandingRequestCount -= 1, 0 === e.outstandingRequestCount && e.layerView.updatingFlagChanged(), this._dbg(I.RequestResponse, \"have response for requestID:\" + l);\n          let r = 0;\n          if (t.data.byteLength > 0) {\n            r = this._vxl._malloc(t.data.byteLength);\n            const e = new Uint8Array(this._vxl.HEAPU8.buffer, r, t.data.byteLength),\n              i = new Uint8Array(t.data);\n            for (let r = 0; r < t.data.byteLength; ++r) e[r] = i[r];\n          }\n          s.set(+l, {\n            responseType: i.responseType,\n            ptr: r,\n            size: t.data.byteLength,\n            success: !0,\n            requestType: i.requestType\n          });\n        }).catch(t => {\n          e.outstandingRequestCount -= 1, 0 === e.outstandingRequestCount && e.layerView.updatingFlagChanged(), n(t) || (this._dbg(I.Error, `requestID:${l} failed, error=${t.toString()}`), s.set(+l, {\n            responseType: i.responseType,\n            ptr: 0,\n            size: 0,\n            success: !1,\n            requestType: i.requestType\n          }));\n        });\n      }\n    });\n  }\n  updateWasmCamera(e) {\n    this._vxl.set_projection_matrix.apply(this._vxl, e.projectionMatrix), this._vxl.set_view_matrix.apply(this._vxl, e.viewMatrix), this._vxl.set_near_far(e.near, e.far);\n  }\n  isUpdating(e) {\n    if (!this._vxl && this._vxlPromise) return !0;\n    const t = this._layers.get(e);\n    return !!t && t.outstandingRequestCount > 0;\n  }\n  getLayerTimes(e) {\n    const t = [];\n    return this._layers.forEach((i, r) => {\n      if (i.layerView.wasmLayerId === e.wasmLayerId) {\n        const i = this._vxl.get_layer_epoch_times(r, e.layer.currentVariableId);\n        for (let e = 0; e < i.length; ++e) t.push(i[e]);\n      }\n    }), t;\n  }\n  getCurrentLayerTimeIndex(e) {\n    let t = 0;\n    return this._layers.forEach((i, r) => {\n      i.layerView.wasmLayerId === e.wasmLayerId && (t = this._vxl.get_layer_current_time_id(r));\n    }), t;\n  }\n  setEnabled(e, t) {\n    this._layers.forEach((i, r) => {\n      i.layerView.wasmLayerId === e.wasmLayerId && (this._vxl.set_enabled(r, t), i.needMemoryUsageUpdate = !0, this._renderPluginContext.requestRender());\n    });\n  }\n  setStaticSections(e, t) {\n    const i = {\n      mask: g.StaticSections,\n      staticSections: t\n    };\n    return this._doMaskedUIUpdate(e, i, !0);\n  }\n  setCurrentVariable(e, t) {\n    const i = {\n      mask: g.CurrentVariable,\n      currentVariable: t\n    };\n    return this._doMaskedUIUpdate(e, i, !0);\n  }\n  setRenderMode(e, t) {\n    const i = {\n      mask: g.RenderMode,\n      renderMode: t\n    };\n    return this._doMaskedUIUpdate(e, i, !0);\n  }\n  setVerticalExaggerationAndOffset(e, t, i, r) {\n    const s = {\n      mask: g.ExaggerationAndOffset,\n      volStyleDesc: {\n        volumeId: t,\n        verticalExaggeration: i,\n        verticalOffset: r\n      }\n    };\n    return this._doMaskedUIUpdate(e, s, !0);\n  }\n  setVariableStyles(e, t) {\n    const i = {\n      mask: g.VariableStyles,\n      variableStyles: t\n    };\n    return this._doMaskedUIUpdate(e, i, !0);\n  }\n  setVolumeStyles(e, t) {\n    const i = {\n      mask: g.VolumeStyles,\n      volumeStyles: t\n    };\n    return this._doMaskedUIUpdate(e, i, !0);\n  }\n  setEnableDynamicSections(e, t) {\n    const i = {\n      mask: g.ContainerVisibility,\n      containerIsVisible: t,\n      container: f.DynamicSections\n    };\n    return this._doMaskedUIUpdate(e, i, !0);\n  }\n  setEnableIsosurfaces(e, t) {\n    const i = {\n      mask: g.ContainerVisibility,\n      containerIsVisible: t,\n      container: f.Isosurfaces\n    };\n    return this._doMaskedUIUpdate(e, i, !0);\n  }\n  setEnableSections(e, t) {\n    const i = {\n      mask: g.ContainerVisibility,\n      containerIsVisible: t,\n      container: f.StaticSections\n    };\n    return this._doMaskedUIUpdate(e, i, !0);\n  }\n  setAnalysisSlice(e, t, i, r) {\n    const s = {\n      mask: g.AnalysisSlice,\n      analysisSlice: {\n        point: i,\n        normal: r,\n        enabled: t\n      }\n    };\n    return this._doMaskedUIUpdate(e, s, !0);\n  }\n  _doMaskedUIUpdate(e, t, i) {\n    if (!this._vxl) return !1;\n    let r = !1;\n    return this._layers.forEach((i, s) => {\n      if (i.layerView.wasmLayerId === e.wasmLayerId) {\n        const e = {\n          str: JSON.stringify(t),\n          byteCount: 0,\n          ptr: 0,\n          isReusable: !1\n        };\n        this._allocateBlock(e) && (r = 1 === this._vxl.handle_masked_ui_update(s, e.ptr, e.byteCount), e.isReusable || this._vxl._free(e.ptr));\n      }\n    }), r && i && this._renderPluginContext.requestRender(), r;\n  }\n  _addTriangleToWasmBuffer(e, t, i, r, s) {\n    return e[3 * t + 0] = i[0], e[3 * t + 1] = i[1], e[3 * t + 2] = i[2], e[3 * (t += 1) + 0] = r[0], e[3 * t + 1] = r[1], e[3 * t + 2] = r[2], e[3 * (t += 1) + 0] = s[0], e[3 * t + 1] = s[1], e[3 * t + 2] = s[2], t += 1;\n  }\n  _addNormalToWasmBuffer(e, t, i) {\n    return e[3 * t + 0] = i[0], e[3 * t + 1] = i[1], e[3 * t + 2] = i[2], t += 1;\n  }\n  _doCaptureFrustum() {\n    if (!this._vxl) return;\n    const e = 36,\n      t = e / 3,\n      i = this._vxl._malloc(3 * e * Float32Array.BYTES_PER_ELEMENT),\n      r = new Float32Array(this._vxl.HEAPF32.buffer, i, 3 * e),\n      s = this._vxl._malloc(3 * t * Float32Array.BYTES_PER_ELEMENT),\n      a = new Float32Array(this._vxl.HEAPF32.buffer, s, e),\n      n = this._frustum.points[_.NEAR_BOTTOM_LEFT],\n      o = this._frustum.points[_.NEAR_BOTTOM_RIGHT],\n      l = this._frustum.points[_.NEAR_TOP_RIGHT],\n      h = this._frustum.points[_.NEAR_TOP_LEFT],\n      d = this._frustum.points[_.FAR_BOTTOM_LEFT],\n      c = this._frustum.points[_.FAR_BOTTOM_RIGHT],\n      m = this._frustum.points[_.FAR_TOP_RIGHT],\n      g = this._frustum.points[_.FAR_TOP_LEFT];\n    let f = 0,\n      p = 0;\n    const x = this._frustum.planes[u.NEAR];\n    f = this._addTriangleToWasmBuffer(r, f, l, o, n), p = this._addNormalToWasmBuffer(a, p, x), f = this._addTriangleToWasmBuffer(r, f, n, h, l), p = this._addNormalToWasmBuffer(a, p, x);\n    const y = this._frustum.planes[u.FAR];\n    f = this._addTriangleToWasmBuffer(r, f, d, c, m), p = this._addNormalToWasmBuffer(a, p, y), f = this._addTriangleToWasmBuffer(r, f, m, g, d), p = this._addNormalToWasmBuffer(a, p, y);\n    const v = this._frustum.planes[u.TOP];\n    f = this._addTriangleToWasmBuffer(r, f, m, l, h), p = this._addNormalToWasmBuffer(a, p, v), f = this._addTriangleToWasmBuffer(r, f, h, g, m), p = this._addNormalToWasmBuffer(a, p, v);\n    const b = this._frustum.planes[u.BOTTOM];\n    f = this._addTriangleToWasmBuffer(r, f, n, o, c), p = this._addNormalToWasmBuffer(a, p, b), f = this._addTriangleToWasmBuffer(r, f, c, d, n), p = this._addNormalToWasmBuffer(a, p, b);\n    const w = this._frustum.planes[u.LEFT];\n    f = this._addTriangleToWasmBuffer(r, f, h, n, d), p = this._addNormalToWasmBuffer(a, p, w), f = this._addTriangleToWasmBuffer(r, f, d, g, h), p = this._addNormalToWasmBuffer(a, p, w);\n    const T = this._frustum.planes[u.RIGHT];\n    f = this._addTriangleToWasmBuffer(r, f, l, m, c), p = this._addNormalToWasmBuffer(a, p, T), f = this._addTriangleToWasmBuffer(r, f, c, o, l), p = this._addNormalToWasmBuffer(a, p, T), -1 !== this._frustumRenderableId && this._vxl.remove_generic_mesh(this._frustumRenderableId), this._frustumRenderableId = this._vxl.add_generic_mesh(i, 3 * e, s, e, 255, 0, 0, 64), this._vxl._free(i), this._vxl._free(s), this._captureFrustum = !1, this._renderPluginContext.requestRender();\n  }\n  captureFrustum() {\n    null === this._renderCoordsHelper && (this._renderCoordsHelper = b.create(x.Local, d(!1, this._view.spatialReference))), null === this._frustum && (this._frustum = new v(this._renderCoordsHelper)), this._captureFrustum = !0, null !== this._renderPluginContext && this._renderPluginContext.requestRender();\n  }\n  toggleFullVolumeExtentDraw(e) {\n    this._vxl && this._layers.forEach((t, i) => {\n      t.layerView.wasmLayerId === e.wasmLayerId && (this._vxl.toggle_full_volume_extent_draw(i), this._renderPluginContext.requestRender());\n    });\n  }\n  addVoxelLayer(e) {\n    if (!this._vxl) {\n      const t = {\n          layerView: e,\n          resolveCallback: null,\n          rejectCallback: null\n        },\n        i = new Promise((e, i) => {\n          t.resolveCallback = e, t.rejectCallback = i;\n        });\n      return this._newLayers.push(t), i;\n    }\n    const t = this._addVoxelLayer(e);\n    return t < 0 ? Promise.reject(-1) : Promise.resolve(t);\n  }\n  removeVoxelLayer(e) {\n    if (!this._vxl) {\n      const t = this._newLayers.findIndex(t => e.uid === t.layerView.uid);\n      t >= 0 && (this._newLayers[t].resolveCallback(-1), this._newLayers.splice(t, 1));\n      const i = this._newLayers.length;\n      return 0 === i && (this._dbg(I.Lifetime, \" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"), this.destroy()), i;\n    }\n    let t = -1;\n    this._layers.forEach((i, r) => {\n      if (i.layerView.wasmLayerId === e.wasmLayerId) {\n        t = r, i.abortController.abort(), this._vxl.remove_layer(t);\n        const s = this.layerUid.indexOf(e.layer.uid);\n        -1 !== s && this.layerUid.splice(s, 1);\n      }\n    }), t >= 0 && this._layers.delete(t);\n    const i = this._layers.size;\n    return 0 === i && (this._dbg(I.Lifetime, \" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"), this.destroy()), i;\n  }\n  _getBlockSize(e) {\n    for (const t of this._wasmMemBlockSizes) if (e < t) return t;\n    return -1;\n  }\n  _allocateBlock(e) {\n    e.byteCount = this._vxl.lengthBytesUTF8(e.str) + 1;\n    const t = this._getBlockSize(e.byteCount);\n    return t < 0 ? (e.isReusable = !1, e.ptr = this._vxl._malloc(e.byteCount)) : (e.isReusable = !0, e.ptr = this._wasmMemBlocks.get(t), 0 === e.ptr && (e.ptr = this._vxl._malloc(t), this._wasmMemBlocks.set(t, e.ptr))), 0 !== e.ptr && (this._vxl.stringToUTF8(e.str, e.ptr, e.byteCount), !0);\n  }\n  _getTimeArgs(e) {\n    let t = -Number.MAX_VALUE,\n      i = Number.MAX_VALUE,\n      s = !1;\n    return r(e) && (e.isAllTime ? s = !0 : (r(e.start) && (s = !0, t = e.start.getTime() / 1e3), r(e.end) && (s = !0, i = e.end.getTime() / 1e3))), {\n      startTime: t,\n      endTime: i,\n      useTime: s\n    };\n  }\n  _addVoxelLayer(e) {\n    const t = e.layer;\n    let i = -1;\n    const r = t.getConfiguration();\n    if (r.length < 1) return -1;\n    const s = {\n      str: r,\n      byteCount: 0,\n      ptr: 0,\n      isReusable: !1\n    };\n    if (!this._allocateBlock(s)) return -1;\n    const a = this._getTimeArgs(this._view?.timeExtent),\n      n = this._view.spatialReference.isWGS84 && t.spatialReference.isWGS84 ? 111319.49079327357 : 1;\n    if (i = this._vxl.add_layer(t.serviceRoot, s.ptr, s.byteCount, n, n, a.startTime, a.endTime, a.useTime, this._toWasmQuality(this._view.qualityProfile)), s.isReusable || this._vxl._free(s.ptr), i >= 0) {\n      t.test?.constantUpscaling && (this._setUpscalingLimits(0, .25, .25), this._setUpscalingLimits(1, .5, .5), this._setUpscalingLimits(2, .75, .75));\n      const r = new AbortController();\n      if (this._layers.set(i, {\n        layerView: e,\n        responses: new Map(),\n        outstandingRequestCount: 0,\n        abortController: r,\n        needMemoryUsageUpdate: !1\n      }), this.layerUid.push(e.layer.uid), !this._halfIntTexturesAvailable || has(\"mac\")) {\n        const t = [];\n        let i = \"\";\n        for (const r of e.layer.variables) \"Int16\" !== r.renderingFormat.type && \"UInt16\" !== r.renderingFormat.type || (t.push(r.name), r.id === e.layer.currentVariableId && (i = r.name));\n        \"\" !== i && W.error(\"#addVoxelLayer_error()\", e.layer, `The voxel layer '${e.layer.title}' cannot render the current variable '${i}' in this browser`), t.length > 0 && W.warn(\"#addVoxelLayer_warning()\", e.layer, `The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`);\n      }\n      if (!this._textureFloatLinearAvailable) {\n        const t = [];\n        let i = \"\";\n        for (const r of e.layer.variables) \"Float32\" === r.renderingFormat.type && (t.push(r.name), r.id === e.layer.currentVariableId && (i = r.name));\n        \"\" !== i && W.error(\"#addVoxelLayer_error()\", e.layer, `The voxel layer '${e.layer.title}' cannot render the current variable '${i}' in this browser`), t.length > 0 && W.warn(\"#addVoxelLayer_warning()\", e.layer, `The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`);\n      }\n      return has(\"esri-mobile\") && W.warnOnce(\"Mobile support differs across devices. Voxel layer might not display as expected.\"), i;\n    }\n    return -1;\n  }\n  prepareRender(e) {\n    if (!this._vxl) return;\n    const t = e.bindParameters.camera.viewForward,\n      i = e.bindParameters.camera.eye;\n    this._vxl.update_camera_pos_and_direction(i[0], i[1], i[2], t[0], t[1], t[2]);\n    const r = this._vxl.cull();\n    this._dbg(I.RequestResponse, \"missingResourceCount=\" + r), this._moreToLoad = r > 0, this._havePreparedWithAllLayers = 0 === this._newLayers.length, this._updateMemoryUsage();\n  }\n  render(e) {\n    if (!this._vxl || e.output !== this._shaderOutput || e.bindParameters.slot !== this._renderSlot) return;\n    for (const i of this._newLayers) {\n      const e = this._addVoxelLayer(i.layerView);\n      -1 === e ? i.rejectCallback(-1) : i.resolveCallback(e);\n    }\n    if (this._newLayers = [], 0 === this._layers.size) return void this._dbg(I.Error, \"No voxel layers but RenderPlugin instance is being asked to render!\");\n    this._lastFrameWasStationary = this._view.stationary, this._syncRequestsResponses(), this._beforeDraw(), this._vxl.begin_color_frame(!this._view._stage.renderer.isFeatureEnabled(L.HighQualityVoxel), e.bindParameters.lighting.mainLight.direction[0], e.bindParameters.lighting.mainLight.direction[1], e.bindParameters.lighting.mainLight.direction[2]);\n    const t = this._renderTargetToRestore.viewport;\n    t.width === this._viewportWidth && t.height === this._viewportHeight || (this._viewportWidth = t.width, this._viewportHeight = t.height, this._vxl.set_viewport(t.width, t.height), this._layers.forEach(e => {\n      e.needMemoryUsageUpdate = !0;\n    })), 0 === t.x && 0 === t.y || this._dbg(I.Error, \"Unsupported viewport parameters detected!\"), this.updateWasmCamera(e.bindParameters.camera), this._captureFrustum && (this._frustum.update(e.bindParameters.camera), this._doCaptureFrustum()), this._vxl.draw(), this._afterDraw(), (this._moreToLoad || !this._havePreparedWithAllLayers && this._layers.size > 0) && this._renderPluginContext.requestRender();\n  }\n  destroy() {\n    this._dbg(I.Lifetime, \"--destroy--\"), this._removeRenderPlugin(), this._readyWatchHandle = s(this._readyWatchHandle), this._qualityWatchHandle = s(this._qualityWatchHandle), this._timeExtentWatchHandle = s(this._timeExtentWatchHandle), this._stationaryWatchHandle = s(this._stationaryWatchHandle), this._vxl && (this._layers.forEach(e => {\n      e.abortController.abort();\n    }), this._wasmMemBlocks.forEach(e => {\n      0 !== e && this._vxl._free(e);\n    }), this._vxl.uninitialize_voxel_wasm(), this._vxl = null);\n  }\n  _initializeWasm(e) {\n    return this._vxl ? Promise.resolve() : (this._vxlPromise || (this._vxlPromise = p(e).then(e => {\n      if (this._vxl = e, this._vxlPromise = null, this._newLayers.length <= 0) return this._dbg(I.Lifetime, \" no voxel layers left after WASM downloaded, removing RenderPlugin and destroying\"), void this.destroy();\n      const t = this._getTimeArgs(this._view?.timeExtent),\n        i = this._vxl.addFunction(this._restoreFramebuffer.bind(this), \"v\"),\n        r = this._vxl.addFunction(this._setBlendState.bind(this), \"viiii\"),\n        s = this._vxl.addFunction(this._setFrontFace.bind(this), \"vi\"),\n        a = this._vxl.addFunction(this._setRasterizerState.bind(this), \"vi\"),\n        n = this._vxl.addFunction(this._setDepthStencilStateFunction.bind(this), \"viii\"),\n        o = this._vxl.addFunction(this._setViewport.bind(this), \"viiii\"),\n        l = this._vxl.addFunction(this._bindPreviousDepthToSlot.bind(this), \"iii\"),\n        h = this._vxl.addFunction(this._modifyResourceCount.bind(this), \"viii\"),\n        d = this._halfIntTexturesAvailable && !has(\"mac\"),\n        _ = this._textureFloatLinearAvailable;\n      this._vxl.initialize_voxel_wasm(i, r, s, a, n, o, l, h, t.startTime, t.endTime, t.useTime, d, _), this._renderPluginContext && this._renderPluginContext.requestRender();\n    }).catch(() => {\n      for (const e of this._newLayers) e.rejectCallback(-2);\n      this._dbg(I.Error, \" WASM failed to download, removing RenderPlugin and destroying\"), this.destroy();\n    })), this._vxlPromise);\n  }\n  pickDepth(e, t, i) {\n    if (!this._vxl || !this._rctx || 0 === this._layers.size) return null;\n    const r = i.viewport[3] - t;\n    if (e < 0 || e > i.viewport[2] || t < 0 || t > i.viewport[3]) return this._dbg(I.Error, `[js] pickDepth: outOfRange, screenXY=[${e.toFixed(0)}, ${r.toFixed(0)}]]`), null;\n    this._beforeDraw();\n    const s = i.viewForward,\n      a = i.eye;\n    this._vxl.update_camera_pos_and_direction(a[0], a[1], a[2], s[0], s[1], s[2]), this.updateWasmCamera(i), this._vxl.begin_frame();\n    const n = this._vxl.pick_depth(e, r);\n    if (this._afterDraw(), n.success) {\n      return n.distanceToCamera;\n    }\n    return null;\n  }\n  pickObject(e, t, i, r) {\n    if (!this._vxl || !this._rctx || 0 === this._layers.size) return null;\n    const s = Math.round(e),\n      a = Math.round(t);\n    if (s < 0 || s > i.viewport[2] || a < 0 || a > i.viewport[3]) return this._dbg(I.Error, `[js] pickObject: outOfRange, screenXY=[${s}, ${a}], vp=[${i.viewport.toString()}]`), null;\n    this._beforeDraw();\n    const n = i.viewForward,\n      o = i.eye;\n    this._vxl.update_camera_pos_and_direction(o[0], o[1], o[2], n[0], n[1], n[2]), this.updateWasmCamera(i), this._vxl.begin_frame();\n    let l = null;\n    if (0 === r.length) l = this._vxl.pick_object(s, a, 0, 0);else {\n      const e = {\n        str: JSON.stringify({\n          layerIds: r\n        }),\n        byteCount: 0,\n        ptr: 0,\n        isReusable: !1\n      };\n      this._allocateBlock(e) && (l = this._vxl.pick_object(s, a, e.ptr, e.byteCount), e.isReusable || this._vxl._free(e.ptr));\n    }\n    return this._afterDraw(), l;\n  }\n  _beforeDraw() {\n    this._renderTargetToRestore = {\n      fbo: this._rctx.getBoundFramebufferObject(),\n      viewport: this._rctx.getViewport()\n    }, this._rctx.setPolygonOffsetFillEnabled(!1), this._rctx.setScissorTestEnabled(!1), this._rctx.setColorMask(!0, !0, !0, !0);\n  }\n  _afterDraw() {\n    this._renderTargetToRestore.fbo = null, this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(), this._vxl.get_active_texture_unit()), this._rctx.externalVertexArrayObjectUpdate(), this._rctx.externalVertexBufferUpdate(), this._rctx.externalProgramUpdate();\n  }\n  intersect(e, t, i, r, s) {\n    if (!this._vxl || !this._rctx || 0 === this._layers.size || !e.options.selectionMode || e.options.isFiltered) return;\n    if (s[0] < 0 || s[0] > e.camera.viewport[2] || s[1] < 0 || s[1] > e.camera.viewport[3]) return this._dbg(I.Error, `[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=[${s[0].toFixed(0)}, ${s[1].toFixed(0)}]`), null;\n    const n = [];\n    this._layers.forEach(t => {\n      e.options.filteredLayerUids.includes(t.layerView.layer.uid) && n.push(t.layerView.wasmLayerId);\n    });\n    const o = this.pickObject(s[0], s[1], e.camera, n);\n    if (a(o) || -1 === o.layerId) return;\n    const d = this._layers.get(o.layerId);\n    if (d) {\n      const t = d.layerView.layer.uid,\n        s = o.distanceToCamera / l(i, r),\n        a = h();\n      a[0] = o.worldX, a[1] = o.worldY, a[2] = o.worldZ;\n      const n = {};\n      if (0 === o.uniqueValue.length ? n[\"Voxel.ServiceValue\"] = `${o.continuousValue.toLocaleString()} ${o.continuousValueUnits}` : n[\"Voxel.ServiceValue\"] = o.uniqueValue, n[\"Voxel.ServiceVariableLabel\"] = o.variableLabel, n[\"Voxel.Position\"] = o.voxelSpacePosition, o.nativeTime.length > 0) {\n        const e = new Date(o.epochTime);\n        n[\"Voxel.ServiceLocalTime\"] = e.toString(), n[\"Voxel.ServiceNativeTime\"] = o.nativeTime;\n      }\n      o.hasDepth && (n[\"Voxel.ServiceDepth\"] = `${o.depth.toLocaleString()} ${o.depthUnits}`);\n      const _ = o.faceNormal;\n      n[\"Voxel.WorldPosition\"] = `[${a[0]}, ${a[1]}, ${a[2]}]`;\n      const u = e => {\n          const i = new y(a, t, () => this._createVoxelGraphic(d.layerView.layer, n));\n          e.set(this.type, i, s, _);\n        },\n        c = e.results,\n        m = e.options.store === E.ALL;\n      if ((null == c.min.dist || s < c.min.dist) && u(c.min), (null == c.max.dist || s > c.max.dist) && u(c.max), m) {\n        const t = T(e.ray);\n        u(t), e.results.all.push(t);\n      }\n    }\n  }\n  _createVoxelGraphic(t, i) {\n    return new e({\n      layer: t,\n      sourceLayer: t,\n      attributes: i\n    });\n  }\n  _toWasmQuality(e) {\n    switch (e) {\n      case \"low\":\n        return 0;\n      case \"medium\":\n        return 1;\n      case \"high\":\n        return 2;\n    }\n  }\n  _setUpscalingLimits(e, t, i) {\n    this._vxl && this._vxl.set_upscaling_limits(e, t, i);\n  }\n}\nexport { k as default };","map":{"version":3,"names":["e","t","has","i","isSome","r","removeMaybe","s","isNone","a","isAbortError","n","watch","o","l","c","h","renderSRFromViewSR","d","PointIndex","_","PlaneIndex","u","WasmCullMode","VoxelRequestType","m","UpdateFlags","g","ContainerType","f","loadVoxelWASM","p","ViewingMode","x","VoxelTarget","y","Frustum","v","RenderCoordsHelper","b","ShaderOutput","w","newIntersectorResult","T","IntersectorType","R","StoreResults","E","RenderFeature","L","RenderSlot","C","ContextType","F","CompareFunction","S","Face","V","StencilOperation","P","W","getLogger","I","Lifetime","RequestResponse","Rendering","Error","k","constructor","_halfIntTexturesAvailable","_textureFloatLinearAvailable","_havePreparedWithAllLayers","_readyWatchHandle","_qualityWatchHandle","_stationaryWatchHandle","_timeExtentWatchHandle","_renderPluginContext","_vxlPromise","_vxl","_pluginIsActive","_moreToLoad","_viewportWidth","_viewportHeight","_newLayers","_layers","Map","_shaderOutput","Color","_renderSlot","VOXEL","_rctx","_renderTargetToRestore","_lastFrameWasStationary","_wasmMemBlockSizes","_wasmMemBlocks","_dbgFlags","Set","_captureFrustum","_frustum","_frustumRenderableId","_renderCoordsHelper","type","slicePlaneEnabled","isGround","layerUid","_view","_initialize","canRender","viewingMode","_dbg","error","warn","_removeRenderPlugin","_stage","removeRenderPlugin","set","ready","addRenderPlugin","initial","qualityProfile","set_quality","_toWasmQuality","timeExtent","_getTimeArgs","useTime","startTime","endTime","set_scene_time_extent","requestRender","stationary","initializeRenderContext","renderContext","rctx","WEBGL2","capabilities","textureNorm16","textureFloatLinear","_initializeWasm","gl","uninitializeRenderContext","_restoreFramebuffer","fbo","bindFramebuffer","viewport","setViewport","width","height","_bindPreviousDepthToSlot","depthStencilTexture","bindTexture","_modifyResourceCount","instanceCounter","increment","decrement","_setBlendState","setBlendingEnabled","setBlendFunction","setBlendEquation","_setFrontFace","setFrontFace","_setDepthStencilStateFunction","setDepthFunction","setDepthTestEnabled","setDepthWriteEnabled","setStencilTestEnabled","setStencilFunction","ALWAYS","setStencilOpSeparate","FRONT","KEEP","INCR","BACK","DECR","_setRasterizerState","None","setFaceCullingEnabled","Back","setCullFace","Front","_setViewport","_updateMemoryUsage","forEach","needMemoryUsageUpdate","estimate_memory_usage","layerView","setUsedMemory","_syncRequestsResponses","responses","push","size","respond","requestType","TreeIndex","Section","delete","get_new_requests","abortController","signal","outstandingRequestCount","updatingFlagChanged","responseType","url","then","data","byteLength","_malloc","Uint8Array","HEAPU8","buffer","ptr","success","catch","toString","updateWasmCamera","set_projection_matrix","apply","projectionMatrix","set_view_matrix","viewMatrix","set_near_far","near","far","isUpdating","get","getLayerTimes","wasmLayerId","get_layer_epoch_times","layer","currentVariableId","length","getCurrentLayerTimeIndex","get_layer_current_time_id","setEnabled","set_enabled","setStaticSections","mask","StaticSections","staticSections","_doMaskedUIUpdate","setCurrentVariable","CurrentVariable","currentVariable","setRenderMode","RenderMode","renderMode","setVerticalExaggerationAndOffset","ExaggerationAndOffset","volStyleDesc","volumeId","verticalExaggeration","verticalOffset","setVariableStyles","VariableStyles","variableStyles","setVolumeStyles","VolumeStyles","volumeStyles","setEnableDynamicSections","ContainerVisibility","containerIsVisible","container","DynamicSections","setEnableIsosurfaces","Isosurfaces","setEnableSections","setAnalysisSlice","AnalysisSlice","analysisSlice","point","normal","enabled","str","JSON","stringify","byteCount","isReusable","_allocateBlock","handle_masked_ui_update","_free","_addTriangleToWasmBuffer","_addNormalToWasmBuffer","_doCaptureFrustum","Float32Array","BYTES_PER_ELEMENT","HEAPF32","points","NEAR_BOTTOM_LEFT","NEAR_BOTTOM_RIGHT","NEAR_TOP_RIGHT","NEAR_TOP_LEFT","FAR_BOTTOM_LEFT","FAR_BOTTOM_RIGHT","FAR_TOP_RIGHT","FAR_TOP_LEFT","planes","NEAR","FAR","TOP","BOTTOM","LEFT","RIGHT","remove_generic_mesh","add_generic_mesh","captureFrustum","create","Local","spatialReference","toggleFullVolumeExtentDraw","toggle_full_volume_extent_draw","addVoxelLayer","resolveCallback","rejectCallback","Promise","_addVoxelLayer","reject","resolve","removeVoxelLayer","findIndex","uid","splice","destroy","abort","remove_layer","indexOf","_getBlockSize","lengthBytesUTF8","stringToUTF8","Number","MAX_VALUE","isAllTime","start","getTime","end","getConfiguration","isWGS84","add_layer","serviceRoot","test","constantUpscaling","_setUpscalingLimits","AbortController","variables","renderingFormat","name","id","title","warnOnce","prepareRender","bindParameters","camera","viewForward","eye","update_camera_pos_and_direction","cull","render","output","slot","_beforeDraw","begin_color_frame","renderer","isFeatureEnabled","HighQualityVoxel","lighting","mainLight","direction","set_viewport","update","draw","_afterDraw","uninitialize_voxel_wasm","addFunction","bind","initialize_voxel_wasm","pickDepth","toFixed","begin_frame","pick_depth","distanceToCamera","pickObject","Math","round","pick_object","layerIds","getBoundFramebufferObject","getViewport","setPolygonOffsetFillEnabled","setScissorTestEnabled","setColorMask","externalTextureUnitUpdate","get_texture_units_bound_in_frame","get_active_texture_unit","externalVertexArrayObjectUpdate","externalVertexBufferUpdate","externalProgramUpdate","intersect","options","selectionMode","isFiltered","filteredLayerUids","includes","layerId","worldX","worldY","worldZ","uniqueValue","continuousValue","toLocaleString","continuousValueUnits","variableLabel","voxelSpacePosition","nativeTime","Date","epochTime","hasDepth","depth","depthUnits","faceNormal","_createVoxelGraphic","results","store","ALL","min","dist","max","ray","all","sourceLayer","attributes","set_upscaling_limits","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../Graphic.js\";import t from\"../request.js\";import has from\"../core/has.js\";import i from\"../core/Logger.js\";import{isSome as r,removeMaybe as s,isNone as a}from\"../core/maybe.js\";import{isAbortError as n}from\"../core/promiseUtils.js\";import{watch as o}from\"../core/reactiveUtils.js\";import{i as l}from\"../chunks/vec3.js\";import{c as h}from\"../chunks/vec3f64.js\";import{renderSRFromViewSR as d}from\"../geometry/support/coordinateSystem.js\";import{PointIndex as _,PlaneIndex as u}from\"../geometry/support/frustum.js\";import{WasmCullMode as c,VoxelRequestType as m,UpdateFlags as g,ContainerType as f}from\"../libs/vxl/enums.js\";import{loadVoxelWASM as p}from\"../libs/vxl/VxlModule.js\";import{ViewingMode as x}from\"../views/ViewingMode.js\";import{VoxelTarget as y}from\"../views/3d/layers/i3s/Intersector.js\";import{Frustum as v}from\"../views/3d/state/Frustum.js\";import{RenderCoordsHelper as b}from\"../views/3d/support/RenderCoordsHelper.js\";import{ShaderOutput as w}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{newIntersectorResult as T}from\"../views/3d/webgl-engine/lib/Intersector.js\";import{IntersectorType as R,StoreResults as E}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{RenderFeature as L}from\"../views/3d/webgl-engine/lib/RenderFeature.js\";import{RenderSlot as C}from\"../views/3d/webgl-engine/lib/RenderSlot.js\";import{ContextType as F}from\"../views/webgl/context-util.js\";import{CompareFunction as S,Face as V,StencilOperation as P}from\"../views/webgl/enums.js\";const W=i.getLogger(\"esri.layers.VoxelWasmPerSceneView\");var I;!function(e){e[e.Lifetime=1]=\"Lifetime\",e[e.RequestResponse=2]=\"RequestResponse\",e[e.Rendering=3]=\"Rendering\",e[e.Error=4]=\"Error\"}(I||(I={}));class k{constructor(e){this._halfIntTexturesAvailable=!1,this._textureFloatLinearAvailable=!1,this._havePreparedWithAllLayers=!1,this._readyWatchHandle=null,this._qualityWatchHandle=null,this._stationaryWatchHandle=null,this._timeExtentWatchHandle=null,this._renderPluginContext=null,this._vxlPromise=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._shaderOutput=w.Color,this._renderSlot=C.VOXEL,this._rctx=null,this._renderTargetToRestore=null,this._lastFrameWasStationary=!1,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._captureFrustum=!1,this._frustum=null,this._frustumRenderableId=-1,this._renderCoordsHelper=null,this.type=R.VOXEL,this.slicePlaneEnabled=!0,this.isGround=!1,this.layerUid=[],this._view=e,this._initialize()}get canRender(){return!!this._vxl&&\"local\"===this._view.viewingMode}_dbg(e,t){this._dbgFlags.has(e)&&(e===I.Error?W.error(t):W.warn(t))}_removeRenderPlugin(){this._pluginIsActive&&this._view._stage&&(this._dbg(I.Lifetime,\"--removeRenderPlugin--\"),this._view._stage.removeRenderPlugin(this)),this._pluginIsActive=!1}_initialize(){this._dbg(I.Lifetime,\"--initialize--\");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this._readyWatchHandle=o((()=>this._view.ready),(e=>{e&&\"local\"===this._view.viewingMode?(this._dbg(I.Lifetime,\"view ready status changed to ready on a local view, calling addRenderPlugin\"),this._view._stage.addRenderPlugin([this._renderSlot],this),this._pluginIsActive=!0):(this._dbg(I.Lifetime,\"view ready status changed, not ready or not a local view!\"),this._removeRenderPlugin())}),{initial:!0}),this._qualityWatchHandle=o((()=>this._view?.qualityProfile),(e=>{this._dbg(I.Rendering,\"qualityProfile changed to \"+e),this._vxl&&this._vxl.set_quality(this._toWasmQuality(e))}),{initial:!0}),this._timeExtentWatchHandle=o((()=>this._view?.timeExtent),(()=>{if(this._vxl){const e=this._getTimeArgs(this._view?.timeExtent);this._dbg(I.Rendering,\"sceneView timeExtent changed to useTime=\"+e.useTime+\" st=\"+e.startTime+\" et=\"+e.endTime),this._vxl.set_scene_time_extent(e.startTime,e.endTime,e.useTime),this._renderPluginContext.requestRender()}}),{initial:!0}),this._stationaryWatchHandle=o((()=>this._view?.stationary),(e=>{this._vxl&&e&&!this._lastFrameWasStationary&&this._renderPluginContext.requestRender()}))}initializeRenderContext(e){this._dbg(I.Lifetime,\"--initializeRenderContext--\");const t=e.renderContext.rctx;t.type===F.WEBGL2?(this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this._textureFloatLinearAvailable=this._rctx.capabilities.textureFloatLinear,this._initializeWasm(t.gl)):this._dbg(I.Error,\"WebGL 1 context only!\")}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this._dbg(I.Lifetime,\"--uninitializeRenderContext--\")}_restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!!!this._rctx)return void this._dbg(I.Error,\"no context in restoreFramebuffer!\");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height)}_bindPreviousDepthToSlot(e,t){const i=!!this._rctx,r=!!this._renderTargetToRestore;if(!i||!r)return 0;const s=this._renderTargetToRestore.fbo.depthStencilTexture;return s?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(s,e,!0),1):(this._dbg(I.Error,\"no depth/stencil texture exists!\"),0)}_modifyResourceCount(e,t,i){if(!this._rctx)return void this._dbg(I.Error,\"modifyAllocation callback has no rendering context!\");const r=e;1===i?this._rctx.instanceCounter.increment(r,t):this._rctx.instanceCounter.decrement(r,t)}_setBlendState(e,t,i,r){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,i),this._rctx.setBlendEquation(r)):this._dbg(I.Error,\"setBlendState callback has no rendering context!\")}_setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this._dbg(I.Error,\"setFrontFace callback has no rendering context!\")}_setDepthStencilStateFunction(e,t,i){this._rctx?(this._rctx.setDepthFunction(i),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(S.ALWAYS,0,255),this._rctx.setStencilOpSeparate(V.FRONT,P.KEEP,P.INCR,P.KEEP),this._rctx.setStencilOpSeparate(V.BACK,P.KEEP,P.DECR,P.KEEP)):this._dbg(I.Error,\"setDepthStencilStateFunction callback has no rendering context!\")}_setRasterizerState(e){if(this._rctx)switch(e){case c.None:this._rctx.setFaceCullingEnabled(!1);break;case c.Back:this._rctx.setCullFace(V.BACK),this._rctx.setFaceCullingEnabled(!0);break;case c.Front:this._rctx.setCullFace(V.FRONT),this._rctx.setFaceCullingEnabled(!0)}else this._dbg(I.Error,\"setRasterizerState callback has no rendering context!\")}_setViewport(e,t,i,r){this._rctx?this._rctx.setViewport(e,t,i,r):this._dbg(I.Error,\"setViewport callback has no rendering context!\")}_updateMemoryUsage(){this._layers.forEach(((e,t)=>{if(e.needMemoryUsageUpdate){const i=this._vxl.estimate_memory_usage(t);i>=0&&(e.needMemoryUsageUpdate=!1,e.layerView.setUsedMemory(i))}}))}_syncRequestsResponses(){this._layers.forEach(((e,i)=>{const r=[];e.responses.forEach(((t,s)=>{r.push(s),this._dbg(I.RequestResponse,\"responding for requestID:\"+s+\" size:\"+t.size),this._vxl.respond(i,s,t),t.requestType!==m.TreeIndex&&t.requestType!==m.Section||(e.needMemoryUsageUpdate=!0)}));const s=e.responses;for(const t of r)s.delete(t);const a=this._vxl.get_new_requests(i),o=e.abortController.signal;for(const l in a){e.outstandingRequestCount+=1,1===e.outstandingRequestCount&&e.layerView.updatingFlagChanged();const i=a[l],r={responseType:\"array-buffer\",signal:o};this._dbg(I.RequestResponse,\"making requestID:\"+l+\" url:\"+i.url),t(i.url,r).then((t=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),this._dbg(I.RequestResponse,\"have response for requestID:\"+l);let r=0;if(t.data.byteLength>0){r=this._vxl._malloc(t.data.byteLength);const e=new Uint8Array(this._vxl.HEAPU8.buffer,r,t.data.byteLength),i=new Uint8Array(t.data);for(let r=0;r<t.data.byteLength;++r)e[r]=i[r]}s.set(+l,{responseType:i.responseType,ptr:r,size:t.data.byteLength,success:!0,requestType:i.requestType})})).catch((t=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),n(t)||(this._dbg(I.Error,`requestID:${l} failed, error=${t.toString()}`),s.set(+l,{responseType:i.responseType,ptr:0,size:0,success:!1,requestType:i.requestType}))}))}}))}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far)}isUpdating(e){if(!this._vxl&&this._vxlPromise)return!0;const t=this._layers.get(e);return!!t&&t.outstandingRequestCount>0}getLayerTimes(e){const t=[];return this._layers.forEach(((i,r)=>{if(i.layerView.wasmLayerId===e.wasmLayerId){const i=this._vxl.get_layer_epoch_times(r,e.layer.currentVariableId);for(let e=0;e<i.length;++e)t.push(i[e])}})),t}getCurrentLayerTimeIndex(e){let t=0;return this._layers.forEach(((i,r)=>{i.layerView.wasmLayerId===e.wasmLayerId&&(t=this._vxl.get_layer_current_time_id(r))})),t}setEnabled(e,t){this._layers.forEach(((i,r)=>{i.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.set_enabled(r,t),i.needMemoryUsageUpdate=!0,this._renderPluginContext.requestRender())}))}setStaticSections(e,t){const i={mask:g.StaticSections,staticSections:t};return this._doMaskedUIUpdate(e,i,!0)}setCurrentVariable(e,t){const i={mask:g.CurrentVariable,currentVariable:t};return this._doMaskedUIUpdate(e,i,!0)}setRenderMode(e,t){const i={mask:g.RenderMode,renderMode:t};return this._doMaskedUIUpdate(e,i,!0)}setVerticalExaggerationAndOffset(e,t,i,r){const s={mask:g.ExaggerationAndOffset,volStyleDesc:{volumeId:t,verticalExaggeration:i,verticalOffset:r}};return this._doMaskedUIUpdate(e,s,!0)}setVariableStyles(e,t){const i={mask:g.VariableStyles,variableStyles:t};return this._doMaskedUIUpdate(e,i,!0)}setVolumeStyles(e,t){const i={mask:g.VolumeStyles,volumeStyles:t};return this._doMaskedUIUpdate(e,i,!0)}setEnableDynamicSections(e,t){const i={mask:g.ContainerVisibility,containerIsVisible:t,container:f.DynamicSections};return this._doMaskedUIUpdate(e,i,!0)}setEnableIsosurfaces(e,t){const i={mask:g.ContainerVisibility,containerIsVisible:t,container:f.Isosurfaces};return this._doMaskedUIUpdate(e,i,!0)}setEnableSections(e,t){const i={mask:g.ContainerVisibility,containerIsVisible:t,container:f.StaticSections};return this._doMaskedUIUpdate(e,i,!0)}setAnalysisSlice(e,t,i,r){const s={mask:g.AnalysisSlice,analysisSlice:{point:i,normal:r,enabled:t}};return this._doMaskedUIUpdate(e,s,!0)}_doMaskedUIUpdate(e,t,i){if(!this._vxl)return!1;let r=!1;return this._layers.forEach(((i,s)=>{if(i.layerView.wasmLayerId===e.wasmLayerId){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(r=1===this._vxl.handle_masked_ui_update(s,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}})),r&&i&&this._renderPluginContext.requestRender(),r}_addTriangleToWasmBuffer(e,t,i,r,s){return e[3*t+0]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],e[3*(t+=1)+0]=r[0],e[3*t+1]=r[1],e[3*t+2]=r[2],e[3*(t+=1)+0]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],t+=1}_addNormalToWasmBuffer(e,t,i){return e[3*t+0]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],t+=1}_doCaptureFrustum(){if(!this._vxl)return;const e=36,t=e/3,i=this._vxl._malloc(3*e*Float32Array.BYTES_PER_ELEMENT),r=new Float32Array(this._vxl.HEAPF32.buffer,i,3*e),s=this._vxl._malloc(3*t*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(this._vxl.HEAPF32.buffer,s,e),n=this._frustum.points[_.NEAR_BOTTOM_LEFT],o=this._frustum.points[_.NEAR_BOTTOM_RIGHT],l=this._frustum.points[_.NEAR_TOP_RIGHT],h=this._frustum.points[_.NEAR_TOP_LEFT],d=this._frustum.points[_.FAR_BOTTOM_LEFT],c=this._frustum.points[_.FAR_BOTTOM_RIGHT],m=this._frustum.points[_.FAR_TOP_RIGHT],g=this._frustum.points[_.FAR_TOP_LEFT];let f=0,p=0;const x=this._frustum.planes[u.NEAR];f=this._addTriangleToWasmBuffer(r,f,l,o,n),p=this._addNormalToWasmBuffer(a,p,x),f=this._addTriangleToWasmBuffer(r,f,n,h,l),p=this._addNormalToWasmBuffer(a,p,x);const y=this._frustum.planes[u.FAR];f=this._addTriangleToWasmBuffer(r,f,d,c,m),p=this._addNormalToWasmBuffer(a,p,y),f=this._addTriangleToWasmBuffer(r,f,m,g,d),p=this._addNormalToWasmBuffer(a,p,y);const v=this._frustum.planes[u.TOP];f=this._addTriangleToWasmBuffer(r,f,m,l,h),p=this._addNormalToWasmBuffer(a,p,v),f=this._addTriangleToWasmBuffer(r,f,h,g,m),p=this._addNormalToWasmBuffer(a,p,v);const b=this._frustum.planes[u.BOTTOM];f=this._addTriangleToWasmBuffer(r,f,n,o,c),p=this._addNormalToWasmBuffer(a,p,b),f=this._addTriangleToWasmBuffer(r,f,c,d,n),p=this._addNormalToWasmBuffer(a,p,b);const w=this._frustum.planes[u.LEFT];f=this._addTriangleToWasmBuffer(r,f,h,n,d),p=this._addNormalToWasmBuffer(a,p,w),f=this._addTriangleToWasmBuffer(r,f,d,g,h),p=this._addNormalToWasmBuffer(a,p,w);const T=this._frustum.planes[u.RIGHT];f=this._addTriangleToWasmBuffer(r,f,l,m,c),p=this._addNormalToWasmBuffer(a,p,T),f=this._addTriangleToWasmBuffer(r,f,c,o,l),p=this._addNormalToWasmBuffer(a,p,T),-1!==this._frustumRenderableId&&this._vxl.remove_generic_mesh(this._frustumRenderableId),this._frustumRenderableId=this._vxl.add_generic_mesh(i,3*e,s,e,255,0,0,64),this._vxl._free(i),this._vxl._free(s),this._captureFrustum=!1,this._renderPluginContext.requestRender()}captureFrustum(){null===this._renderCoordsHelper&&(this._renderCoordsHelper=b.create(x.Local,d(!1,this._view.spatialReference))),null===this._frustum&&(this._frustum=new v(this._renderCoordsHelper)),this._captureFrustum=!0,null!==this._renderPluginContext&&this._renderPluginContext.requestRender()}toggleFullVolumeExtentDraw(e){this._vxl&&this._layers.forEach(((t,i)=>{t.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.toggle_full_volume_extent_draw(i),this._renderPluginContext.requestRender())}))}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},i=new Promise(((e,i)=>{t.resolveCallback=e,t.rejectCallback=i}));return this._newLayers.push(t),i}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e.uid===t.layerView.uid));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const i=this._newLayers.length;return 0===i&&(this._dbg(I.Lifetime,\" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"),this.destroy()),i}let t=-1;this._layers.forEach(((i,r)=>{if(i.layerView.wasmLayerId===e.wasmLayerId){t=r,i.abortController.abort(),this._vxl.remove_layer(t);const s=this.layerUid.indexOf(e.layer.uid);-1!==s&&this.layerUid.splice(s,1)}})),t>=0&&this._layers.delete(t);const i=this._layers.size;return 0===i&&(this._dbg(I.Lifetime,\" no voxel layers left after removing a layer, removing RenderPlugin and destroying\"),this.destroy()),i}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return-1}_allocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,i=Number.MAX_VALUE,s=!1;return r(e)&&(e.isAllTime?s=!0:(r(e.start)&&(s=!0,t=e.start.getTime()/1e3),r(e.end)&&(s=!0,i=e.end.getTime()/1e3))),{startTime:t,endTime:i,useTime:s}}_addVoxelLayer(e){const t=e.layer;let i=-1;const r=t.getConfiguration();if(r.length<1)return-1;const s={str:r,byteCount:0,ptr:0,isReusable:!1};if(!this._allocateBlock(s))return-1;const a=this._getTimeArgs(this._view?.timeExtent),n=this._view.spatialReference.isWGS84&&t.spatialReference.isWGS84?111319.49079327357:1;if(i=this._vxl.add_layer(t.serviceRoot,s.ptr,s.byteCount,n,n,a.startTime,a.endTime,a.useTime,this._toWasmQuality(this._view.qualityProfile)),s.isReusable||this._vxl._free(s.ptr),i>=0){t.test?.constantUpscaling&&(this._setUpscalingLimits(0,.25,.25),this._setUpscalingLimits(1,.5,.5),this._setUpscalingLimits(2,.75,.75));const r=new AbortController;if(this._layers.set(i,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:r,needMemoryUsageUpdate:!1}),this.layerUid.push(e.layer.uid),!this._halfIntTexturesAvailable||has(\"mac\")){const t=[];let i=\"\";for(const r of e.layer.variables)\"Int16\"!==r.renderingFormat.type&&\"UInt16\"!==r.renderingFormat.type||(t.push(r.name),r.id===e.layer.currentVariableId&&(i=r.name));\"\"!==i&&W.error(\"#addVoxelLayer_error()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${i}' in this browser`),t.length>0&&W.warn(\"#addVoxelLayer_warning()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}if(!this._textureFloatLinearAvailable){const t=[];let i=\"\";for(const r of e.layer.variables)\"Float32\"===r.renderingFormat.type&&(t.push(r.name),r.id===e.layer.currentVariableId&&(i=r.name));\"\"!==i&&W.error(\"#addVoxelLayer_error()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${i}' in this browser`),t.length>0&&W.warn(\"#addVoxelLayer_warning()\",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}return has(\"esri-mobile\")&&W.warnOnce(\"Mobile support differs across devices. Voxel layer might not display as expected.\"),i}return-1}prepareRender(e){if(!this._vxl)return;const t=e.bindParameters.camera.viewForward,i=e.bindParameters.camera.eye;this._vxl.update_camera_pos_and_direction(i[0],i[1],i[2],t[0],t[1],t[2]);const r=this._vxl.cull();this._dbg(I.RequestResponse,\"missingResourceCount=\"+r),this._moreToLoad=r>0,this._havePreparedWithAllLayers=0===this._newLayers.length,this._updateMemoryUsage()}render(e){if(!this._vxl||e.output!==this._shaderOutput||e.bindParameters.slot!==this._renderSlot)return;for(const i of this._newLayers){const e=this._addVoxelLayer(i.layerView);-1===e?i.rejectCallback(-1):i.resolveCallback(e)}if(this._newLayers=[],0===this._layers.size)return void this._dbg(I.Error,\"No voxel layers but RenderPlugin instance is being asked to render!\");this._lastFrameWasStationary=this._view.stationary,this._syncRequestsResponses(),this._beforeDraw(),this._vxl.begin_color_frame(!this._view._stage.renderer.isFeatureEnabled(L.HighQualityVoxel),e.bindParameters.lighting.mainLight.direction[0],e.bindParameters.lighting.mainLight.direction[1],e.bindParameters.lighting.mainLight.direction[2]);const t=this._renderTargetToRestore.viewport;t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height),this._layers.forEach((e=>{e.needMemoryUsageUpdate=!0}))),0===t.x&&0===t.y||this._dbg(I.Error,\"Unsupported viewport parameters detected!\"),this.updateWasmCamera(e.bindParameters.camera),this._captureFrustum&&(this._frustum.update(e.bindParameters.camera),this._doCaptureFrustum()),this._vxl.draw(),this._afterDraw(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender()}destroy(){this._dbg(I.Lifetime,\"--destroy--\"),this._removeRenderPlugin(),this._readyWatchHandle=s(this._readyWatchHandle),this._qualityWatchHandle=s(this._qualityWatchHandle),this._timeExtentWatchHandle=s(this._timeExtentWatchHandle),this._stationaryWatchHandle=s(this._stationaryWatchHandle),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort()})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e)})),this._vxl.uninitialize_voxel_wasm(),this._vxl=null)}_initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=p(e).then((e=>{if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this._dbg(I.Lifetime,\" no voxel layers left after WASM downloaded, removing RenderPlugin and destroying\"),void this.destroy();const t=this._getTimeArgs(this._view?.timeExtent),i=this._vxl.addFunction(this._restoreFramebuffer.bind(this),\"v\"),r=this._vxl.addFunction(this._setBlendState.bind(this),\"viiii\"),s=this._vxl.addFunction(this._setFrontFace.bind(this),\"vi\"),a=this._vxl.addFunction(this._setRasterizerState.bind(this),\"vi\"),n=this._vxl.addFunction(this._setDepthStencilStateFunction.bind(this),\"viii\"),o=this._vxl.addFunction(this._setViewport.bind(this),\"viiii\"),l=this._vxl.addFunction(this._bindPreviousDepthToSlot.bind(this),\"iii\"),h=this._vxl.addFunction(this._modifyResourceCount.bind(this),\"viii\"),d=this._halfIntTexturesAvailable&&!has(\"mac\"),_=this._textureFloatLinearAvailable;this._vxl.initialize_voxel_wasm(i,r,s,a,n,o,l,h,t.startTime,t.endTime,t.useTime,d,_),this._renderPluginContext&&this._renderPluginContext.requestRender()})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this._dbg(I.Error,\" WASM failed to download, removing RenderPlugin and destroying\"),this.destroy()}))),this._vxlPromise)}pickDepth(e,t,i){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const r=i.viewport[3]-t;if(e<0||e>i.viewport[2]||t<0||t>i.viewport[3])return this._dbg(I.Error,`[js] pickDepth: outOfRange, screenXY=[${e.toFixed(0)}, ${r.toFixed(0)}]]`),null;this._beforeDraw();const s=i.viewForward,a=i.eye;this._vxl.update_camera_pos_and_direction(a[0],a[1],a[2],s[0],s[1],s[2]),this.updateWasmCamera(i),this._vxl.begin_frame();const n=this._vxl.pick_depth(e,r);if(this._afterDraw(),n.success){return n.distanceToCamera}return null}pickObject(e,t,i,r){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const s=Math.round(e),a=Math.round(t);if(s<0||s>i.viewport[2]||a<0||a>i.viewport[3])return this._dbg(I.Error,`[js] pickObject: outOfRange, screenXY=[${s}, ${a}], vp=[${i.viewport.toString()}]`),null;this._beforeDraw();const n=i.viewForward,o=i.eye;this._vxl.update_camera_pos_and_direction(o[0],o[1],o[2],n[0],n[1],n[2]),this.updateWasmCamera(i),this._vxl.begin_frame();let l=null;if(0===r.length)l=this._vxl.pick_object(s,a,0,0);else{const e={str:JSON.stringify({layerIds:r}),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(l=this._vxl.pick_object(s,a,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}return this._afterDraw(),l}_beforeDraw(){this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._rctx.setPolygonOffsetFillEnabled(!1),this._rctx.setScissorTestEnabled(!1),this._rctx.setColorMask(!0,!0,!0,!0)}_afterDraw(){this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate(),this._rctx.externalProgramUpdate()}intersect(e,t,i,r,s){if(!this._vxl||!this._rctx||0===this._layers.size||!e.options.selectionMode||e.options.isFiltered)return;if(s[0]<0||s[0]>e.camera.viewport[2]||s[1]<0||s[1]>e.camera.viewport[3])return this._dbg(I.Error,`[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=[${s[0].toFixed(0)}, ${s[1].toFixed(0)}]`),null;const n=[];this._layers.forEach((t=>{e.options.filteredLayerUids.includes(t.layerView.layer.uid)&&n.push(t.layerView.wasmLayerId)}));const o=this.pickObject(s[0],s[1],e.camera,n);if(a(o)||-1===o.layerId)return;const d=this._layers.get(o.layerId);if(d){const t=d.layerView.layer.uid,s=o.distanceToCamera/l(i,r),a=h();a[0]=o.worldX,a[1]=o.worldY,a[2]=o.worldZ;const n={};if(0===o.uniqueValue.length?n[\"Voxel.ServiceValue\"]=`${o.continuousValue.toLocaleString()} ${o.continuousValueUnits}`:n[\"Voxel.ServiceValue\"]=o.uniqueValue,n[\"Voxel.ServiceVariableLabel\"]=o.variableLabel,n[\"Voxel.Position\"]=o.voxelSpacePosition,o.nativeTime.length>0){const e=new Date(o.epochTime);n[\"Voxel.ServiceLocalTime\"]=e.toString(),n[\"Voxel.ServiceNativeTime\"]=o.nativeTime}o.hasDepth&&(n[\"Voxel.ServiceDepth\"]=`${o.depth.toLocaleString()} ${o.depthUnits}`);const _=o.faceNormal;n[\"Voxel.WorldPosition\"]=`[${a[0]}, ${a[1]}, ${a[2]}]`;const u=e=>{const i=new y(a,t,(()=>this._createVoxelGraphic(d.layerView.layer,n)));e.set(this.type,i,s,_)},c=e.results,m=e.options.store===E.ALL;if((null==c.min.dist||s<c.min.dist)&&u(c.min),(null==c.max.dist||s>c.max.dist)&&u(c.max),m){const t=T(e.ray);u(t),e.results.all.push(t)}}}_createVoxelGraphic(t,i){return new e({layer:t,sourceLayer:t,attributes:i})}_toWasmQuality(e){switch(e){case\"low\":return 0;case\"medium\":return 1;case\"high\":return 2}}_setUpscalingLimits(e,t,i){this._vxl&&this._vxl.set_upscaling_limits(e,t,i)}}export{k as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}