{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport { equals as r, binaryIndexOf as s } from \"../../../../../core/arrayUtils.js\";\nimport n from \"../../../../../core/Logger.js\";\nimport { clamp as o } from \"../../../../../core/mathUtils.js\";\nimport { disposeMaybe as i, destroyMaybe as a, isNone as c, isSome as d } from \"../../../../../core/maybe.js\";\nimport { property as l } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as h } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { f as u, t as m, e as g } from \"../../../../../chunks/mat3.js\";\nimport { c as p } from \"../../../../../chunks/mat3f64.js\";\nimport { c as f } from \"../../../../../chunks/mat4f64.js\";\nimport { s as _, c as b, w as y, e as O } from \"../../../../../chunks/vec3.js\";\nimport { c as j } from \"../../../../../chunks/vec3f64.js\";\nimport { WatchUpdatingTracking as w } from \"../../../../../core/support/WatchUpdatingTracking.js\";\nimport { g as E, a as v } from \"../../../../../chunks/sphere.js\";\nimport { c as R } from \"../../../../../chunks/vec33.js\";\nimport { ViewingMode as x } from \"../../../../ViewingMode.js\";\nimport { encodeElevationOffset as T } from \"../../collections/Component/Material/shader/ComponentData.glsl.js\";\nimport { TwoVectorPosition as C } from \"../../core/util/TwoVectorPosition.js\";\nimport { GridLocalOriginFactory as M } from \"../GridLocalOriginFactory.js\";\nimport { applyToModelMatrix as P } from \"../localOriginHelper.js\";\nimport { LocalOriginManager as S } from \"../LocalOriginManager.js\";\nimport { Object3D as D } from \"../Object3D.js\";\nimport { VertexArrayObject as A } from \"../VertexArrayObject.js\";\nimport { VertexAttribute as k } from \"../VertexAttribute.js\";\nimport { VertexLayout as I, EdgeInputBufferLayout as U, EdgeShaderAttributeLocations as B, glVertexLayout as L } from \"./bufferLayouts.js\";\nimport { RegularEdgeBufferWriter as H, SilhouetteEdgeBufferWriter as V } from \"./edgeBufferWriters.js\";\nimport { EdgeType as N } from \"./edgePreprocessing.js\";\nimport { EdgeRenderer as G, LINE_WIDTH_FRACTION_FACTOR as z, EXTENSION_LENGTH_OFFSET as W } from \"./EdgeRenderer.js\";\nimport { EdgePassParameters as q } from \"./EdgeShaderParameters.js\";\nimport { EdgeWorkerHandle as K } from \"./EdgeWorkerHandle.js\";\nimport { Transparency as F } from \"./interfaces.js\";\nimport { generateStrokesTexture as Q } from \"./strokes.js\";\nimport { determineRendererType as J, determineEdgeTransparency as X, determineObjectTransparency as Y, fillComponenBufferIndices as Z } from \"./util.js\";\nimport { BufferManager as $ } from \"../TextureBackedBuffer/BufferManager.js\";\nimport { EdgeSilhouette as ee } from \"../../shaders/sources/edgeRenderer/EdgeUtil.glsl.js\";\nimport { BufferObject as te } from \"../../../../webgl/BufferObject.js\";\nimport { Usage as re } from \"../../../../webgl/enums.js\";\nlet se = class extends t {\n  constructor(e) {\n    super(e), this._updatingHandles = new w(), this._perObjectData = new Map(), this._perObjectDataEvictionCache = new Set(), this._renderers = new Map(), this._gpuMemoryUsage = 0, this._workerAbort = new AbortController(), this._tmpModelPosition = j(), this._localOrigins = new S(new M(e.renderSR));\n  }\n  initialize() {\n    this._worker = new K(this.schedule), this._componentColorManager = new $(this.rctx, 3);\n    const e = I.createBuffer(4);\n    for (let t = 0; t < 4; t++) e.sideness.set(t, 0, 0 === t || 3 === t ? 0 : 1), e.sideness.set(t, 1, 0 === t || 1 === t ? 0 : 1);\n    this._verticesBufferObject = te.createVertex(this.rctx, re.STATIC_DRAW, e.buffer);\n  }\n  destroy() {\n    this.destroyed || (this._perObjectData.forEach(e => this._discardObjectEntry(e)), this._perObjectData.clear(), this._strokesTexture = i(this._strokesTexture), this._componentColorManager = a(this._componentColorManager), this._workerAbort.abort(), this._worker.destroy(), this._verticesBufferObject = i(this._verticesBufferObject), this._renderers.clear(), this._updatingHandles.destroy());\n  }\n  get updating() {\n    return this._updatingHandles.updating;\n  }\n  get usedMemory() {\n    return this._gpuMemoryUsage;\n  }\n  shouldRender() {\n    return this._renderers.size > 0;\n  }\n  async addComponentObject(e, t, r, s, n, o, i, a) {\n    if (this.hasObject(e)) return this.getObjectMemoryUsage(e);\n    let c;\n    const d = new ie(new Promise(e => c = e), r.center, r.radius);\n    this._perObjectData.set(e, d);\n    const l = await this._updatingHandles.addPromise(this._addComponentGeometry(t, d, s, n, o, i, a));\n    return this.setNeedsRender(), c(), l;\n  }\n  async addOrUpdateObject3D(e, t, r, s) {\n    if (this.destroyed) return void n.getLogger(this.declaredClass).warn(\"Attempt to add an object to a destroyed instance\");\n    const o = this._perObjectData.get(e);\n    let i;\n    o?.renderables.length > 0 && this._perObjectDataEvictionCache.add(o);\n    const a = e.boundingVolumeWorldSpace.bounds,\n      c = new ie(new Promise(e => i = e), E(a), v(a));\n    this._perObjectData.set(e, c);\n    const d = new Array();\n    if (r.mergeGeometries && e.geometries.length > 1 && oe(e)) d.push(this._addObjectMergedGeometries(e, c, t, r, s));else for (let n = 0; n < e.geometries.length; n++) {\n      const o = e.geometries[n];\n      o.material.supportsEdges && d.push(this._addGeometry(e, c, o, t[0], r, s));\n    }\n    await this._updatingHandles.addPromise(Promise.all(d)), this._perObjectDataEvictionCache.delete(c), this._discardObjectEntry(o), this.setNeedsRender(), i();\n  }\n  _discardObjectEntry(e) {\n    e && (e.renderables.length && (e.renderables.forEach(e => this._removeRenderable(e)), this.setNeedsRender()), e.loaded = null);\n  }\n  hasObject(e) {\n    return this._perObjectData.has(e);\n  }\n  async updateAllComponentOpacities(e, t) {\n    const r = await this._updatingHandles.addPromise(this._getObjectEntry(e));\n    if (c(r)) return;\n    const s = t instanceof Array ? e => t[e] : () => t;\n    r.renderables.forEach(e => {\n      const t = e.components.meta.length;\n      for (let r = 0; r < t; r++) {\n        const t = s(r),\n          n = e.components.meta[r],\n          o = n.index;\n        n.material.opacity = t, e.components.buffer.textureBuffer.setDataElement(o, 1, 3, 255 * t);\n      }\n      this._updateTransparency(e);\n    }), this.setNeedsRender();\n  }\n  async getObjectMemoryUsage(e) {\n    const t = await this._getObjectEntry(e);\n    return d(t) ? t.renderables.reduce((e, t) => e + t.statistics.gpuMemoryUsage, 0) : 0;\n  }\n  async updateAllComponentMaterials(e, t, r, s) {\n    const n = e instanceof D,\n      o = !!r.hasSlicePlane,\n      i = J(t),\n      a = G.getKey(i, o, n),\n      d = await this._updatingHandles.addPromise(this._getObjectEntry(e));\n    c(d) || (d.renderables.forEach(e => {\n      if (a !== e.rendererKey) {\n        const t = this._renderers.get(e.rendererKey),\n          r = this._acquireRenderer(i, o, n);\n        t.removeRenderable(e), --t.refCount, e.rendererKey = a, r.addRenderable(e);\n      }\n      for (let r = 0; r < t.length; r++) e.components.meta[r].material = t[r];\n      s && this._updateComponentBuffer(e.components), this._updateTransparency(e);\n    }), this.setNeedsRender());\n  }\n  async updateAllVerticalOffsets(e, t) {\n    const r = await this._updatingHandles.addPromise(this._getObjectEntry(e));\n    c(r) || (r.renderables.forEach(e => {\n      const r = e.components.meta;\n      for (let s = 0; s < r.length; s++) e.components.meta[s].verticalOffset = t?.[s] ?? 0;\n      this._updateComponentBuffer(e.components);\n    }), this.setNeedsRender());\n  }\n  async updateObjectVisibility(e, t) {\n    const r = await this._updatingHandles.addPromise(this._getObjectEntry(e));\n    d(r) && (r.renderables.forEach(e => e.visible = t), this.setNeedsRender());\n  }\n  removeObject(e) {\n    const t = this._perObjectData.get(e);\n    t && (this._perObjectData.delete(e), this._discardObjectEntry(t));\n  }\n  async _getObjectEntry(e) {\n    const t = this._perObjectData.get(e);\n    if (!t) throw new Error(\"no object\");\n    return await t.loaded, null == t.loaded ? null : t;\n  }\n  render(e, t) {\n    if (c(this._componentColorManager)) return;\n    this._localOrigins.updateViewMatrices(e.camera.viewMatrix);\n    const r = e.camera.viewInverseTransposeMatrix,\n      s = j(),\n      n = new C();\n    let o = 0,\n      i = 0;\n    if (this._renderers.forEach(r => {\n      if (0 === r.refCount) this._renderers.delete(r.key), r.dispose();else {\n        let s = !0,\n          n = !0;\n        r.forEachRenderable(t => {\n          t.visible && (o += t.statistics.averageEdgeLength, i++, s && t.regular && (r.updateTechnique(e, !1), s = !1), n && t.silhouette && (r.updateTechnique(e, !0), n = !1));\n        }, t);\n      }\n    }), this._componentColorManager.garbageCollect(), this._componentColorManager.updateTextures(), 0 === i) return;\n    const a = new q(40 * o / i, t);\n    _(s, r[3], r[7], r[11]), n.set(s), b(a.transformWorldFromViewTH, n.high), b(a.transformWorldFromViewTL, n.low), u(a.transformViewFromCameraRelativeRS, e.camera.viewMatrix), m(_e, a.transformViewFromCameraRelativeRS), g(a.transformNormalViewFromGlobal, _e), a.transformProjFromView = e.camera.projectionMatrix, this._updateObjectCameraDistances(e), this._renderers.forEach(t => {\n      this._renderRegularEdges(t, e, a), this._renderSilhouetteEdges(t, e, a);\n    });\n  }\n  _updateTransparency(e) {\n    const t = X(e.components.meta),\n      r = Y(e.components.meta);\n    t === e.edgeTransparency && r === e.objectTransparency || (e.edgeTransparency = t, e.objectTransparency = r, this._renderers.get(e.rendererKey).setRenderablesDirty());\n  }\n  _computeModelTransformWithLocalOrigin(e, t, r) {\n    e.getCombinedStaticTransformation(t, r);\n    const s = d(t.localOrigin) ? this._localOrigins.register(t.localOrigin) : this._localOrigins.acquire(_(this._tmpModelPosition, r[12], r[13], r[14]));\n    return t.localOrigin = s.origin, P(s.origin.vec3, r), s;\n  }\n  _updateComponentBuffer(e) {\n    const {\n        meta: t,\n        buffer: r\n      } = e,\n      s = new Uint8Array(4);\n    for (let n = 0; n < t.length; n++) {\n      const e = t[n].material,\n        i = t[n].index,\n        a = o(Math.round(e.size * z), 0, 255),\n        c = o(e.extensionLength, -W, 255 - W) + W,\n        d = \"solid\" === e.type ? N.SOLID : N.SKETCH,\n        l = 255 * e.opacity,\n        h = e.color,\n        u = 255 * h[0],\n        m = 255 * h[1],\n        g = 255 * h[2],\n        p = 255 * h[3];\n      r.textureBuffer.setData(i, 0, u, m, g, p), r.textureBuffer.setData(i, 1, a, c, d, l), T(t[n].verticalOffset, s), r.textureBuffer.setData(i, 2, s[0], s[1], s[2], s[3]);\n    }\n  }\n  _createComponentBuffers(e) {\n    if (c(this._componentColorManager)) return null;\n    const t = new Array(),\n      r = this._componentColorManager.getBuffer(e.length);\n    for (let n = 0; n < e.length; n++) {\n      const s = e[n],\n        o = r.acquireIndex();\n      t.push({\n        index: o,\n        verticalOffset: 0,\n        material: s\n      });\n    }\n    const s = new ae(r, t);\n    return this._updateComponentBuffer(s), s;\n  }\n  _extractEdges(e, t, r, s, n) {\n    let o = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : n.length;\n    return this._worker.process({\n      data: t,\n      indices: n,\n      indicesLength: o,\n      writerSettings: e,\n      skipDeduplicate: r\n    }, this._workerAbort.signal, s);\n  }\n  _createRenderable(e, t, r, s, n) {\n    const o = t => d(this._verticesBufferObject) ? new ce(new A(this.rctx, B, {\n        vertices: L,\n        instances: t === ee.REGULAR ? H.glLayout : V.glLayout\n      }, {\n        vertices: this._verticesBufferObject,\n        instances: te.createVertex(this.rctx, re.STATIC_DRAW, t === ee.REGULAR ? e.regular.instancesData.buffer : e.silhouette.instancesData.buffer)\n      }), t === ee.REGULAR ? e.regular.lodInfo : e.silhouette.lodInfo) : null,\n      i = e.regular.lodInfo.lengths.length > 0 ? o(ee.REGULAR) : null,\n      a = e.silhouette.lodInfo.lengths.length > 0 ? o(ee.SILHOUETTE) : null,\n      c = (d(i) ? i.vao.size : 0) + (d(a) ? a.vao.size : 0);\n    return new le(i, a, {\n      gpuMemoryUsage: c,\n      externalMemoryUsage: n,\n      averageEdgeLength: e.averageEdgeLength\n    }, r, X(t.meta), Y(t.meta), t, s);\n  }\n  async _addGeometry(e, t, r, s, n, o) {\n    const i = r.vertexAttributes.get(k.POSITION),\n      a = r.indices.get(k.POSITION),\n      c = f(),\n      d = this._computeModelTransformWithLocalOrigin(e, r, c),\n      l = new fe(i, a, c, d);\n    return this._addPositionData(t, l, r.edgeIndicesLength, s, n, o);\n  }\n  async _addPositionData(e, t, r, s, n) {\n    let o = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;\n    if (null == e.loaded) return;\n    const i = this._createComponentBuffers([s]);\n    if (c(i) || r <= 0) return;\n    const a = this._acquireRenderer(s.type, !!n.hasSlicePlane, !0),\n      {\n        modelTransform: d,\n        origin: l\n      } = t,\n      h = t.indices,\n      u = t.position,\n      m = u.data.length / u.size,\n      g = U.createBuffer(m);\n    for (let c = 0; c < m; c++) g.position.set(c, 0, u.data[c * u.size + 0]), g.position.set(c, 1, u.data[c * u.size + 1]), g.position.set(c, 2, u.data[c * u.size + 2]);\n    Z(i.meta, [0, g.componentIndex.count], g.componentIndex);\n    const p = await this._updatingHandles.addPromise(this._extractEdges(a.writerSettings, g, !1, o, h, r));\n    if (null == e.loaded) return;\n    const f = this._createRenderable(p, i, new de(d, l), a.key, !1);\n    e.renderables.push(f), a.addRenderable(f), this._gpuMemoryUsage += f.statistics.gpuMemoryUsage;\n  }\n  async _addComponentGeometry(e, t, r, s, n, o, i) {\n    if (null == t.loaded) return 0;\n    const a = this._createComponentBuffers(o);\n    if (c(a)) return 0;\n    const d = J(o),\n      l = this._acquireRenderer(d, i.hasSlicePlane || !1, !1),\n      h = U.createBuffer(r.count);\n    R(h.position, r), Z(a.meta, n, h.componentIndex, s);\n    const u = !0,\n      m = l.writerSettings,\n      g = await this._updatingHandles.addPromise(this._extractEdges(m, h, u, !1, s));\n    if (null == t.loaded) return 0;\n    const p = this._createRenderable(g, a, e, l.key, !0);\n    return t.renderables.push(p), l.addRenderable(p), p.statistics.gpuMemoryUsage;\n  }\n  async _addObjectMergedGeometries(e, t, r, s, n) {\n    const o = new Map();\n    let i = 0,\n      a = null,\n      c = 0;\n    for (let f = 0; f < e.geometries.length; f++) {\n      const t = e.geometries[f];\n      if (!t.material.supportsEdges) continue;\n      !a && t.localOrigin && (a = t);\n      const r = t.vertexAttributes.get(k.POSITION);\n      c += r.data.length / r.size, i += t.edgeIndicesLength;\n    }\n    const d = c >= 65536 ? Uint32Array : Uint16Array,\n      l = i ? new d(i) : null,\n      h = [];\n    let u = 0;\n    for (let f = 0; f < e.geometries.length; f++) {\n      const t = e.geometries[f];\n      if (!t.material.supportsEdges) continue;\n      const r = t.vertexAttributes.get(k.POSITION),\n        s = t.indices.get(k.POSITION);\n      let n = o.get(r.data);\n      if (null == n) {\n        n = h.length / 3;\n        for (let e = 0; e < r.data.length; e += r.size) h.push(r.data[e + 0]), h.push(r.data[e + 1]), h.push(r.data[e + 2]);\n        o.set(r.data, n);\n      }\n      if (s) for (let e = 0; e < t.edgeIndicesLength; e++) l[u++] = n + s[e];\n    }\n    const m = a || e.geometries[0],\n      g = f(),\n      p = this._computeModelTransformWithLocalOrigin(e, m, g);\n    for (let f = 0; f < e.geometries.length; f++) e.geometries[f].localOrigin = p.origin;\n    const _ = new fe({\n      data: h,\n      size: 3\n    }, l, g, p);\n    await this._updatingHandles.addPromise(this._addPositionData(t, _, l.length, r[0], s, n));\n  }\n  _acquireRenderer(e, t, r) {\n    const s = G.getKey(e, t, r);\n    let n = this._renderers.get(s);\n    return c(this._strokesTexture) && (this._strokesTexture = Q(this.rctx)), n || (n = new G(this.rctx, this.techniqueRepository, {\n      type: e,\n      hasSlicePlane: t,\n      strokesTexture: this._strokesTexture,\n      legacy: r,\n      spherical: this.viewingMode === x.Global\n    }), this._renderers.set(s, n)), ++n.refCount, n;\n  }\n  _removeRenderable(e) {\n    ne(e.regular), ne(e.silhouette);\n    const t = this._renderers.get(e.rendererKey);\n    if (t) {\n      t.removeRenderable(e), --t.refCount, \"origin\" in e.transform && this._localOrigins.release(e.transform.origin), this._gpuMemoryUsage -= e.statistics.externalMemoryUsage ? 0 : e.statistics.gpuMemoryUsage;\n      for (const t of e.components.meta) e.components.buffer.releaseIndex(t.index);\n    }\n  }\n  _updateObjectCameraDistances(e) {\n    const t = e.camera.eye,\n      r = e.camera.viewForward,\n      s = j(),\n      n = e => {\n        y(s, e.center, t);\n        const n = O(s, r),\n          o = e.radius,\n          i = n < -o ? 1 / 0 : n < o ? 0 : n - o;\n        e.renderables.forEach(e => e.distanceToCamera = i);\n      };\n    this._perObjectData.forEach(n), this._perObjectDataEvictionCache.forEach(n);\n  }\n  _renderRegularEdges(e, t, r) {\n    const s = e.bindRegularEdges(r, t),\n      n = r.transparency,\n      o = t.camera.perScreenPixelRatio;\n    e.forEachRenderable(n => {\n      if (!ue(n) || !n.visible) return;\n      const i = pe(n.regular.lod.lengths, n.distanceToCamera, o);\n      e.renderRegularEdges(s, n, r, t, i);\n    }, n);\n  }\n  _renderSilhouetteEdges(e, t, r) {\n    const s = e.bindSilhouetteEdges(r, t),\n      n = r.transparency,\n      o = t.camera.perScreenPixelRatio;\n    e.forEachRenderable(n => {\n      if (!ge(n) || !n.visible) return;\n      const i = pe(n.silhouette.lod.lengths, n.distanceToCamera, o);\n      e.renderSilhouetteEdges(s, n, r, t, i);\n    }, n);\n  }\n  get test() {\n    return {\n      hasRenderedPrimitives: e => {\n        let t = !1;\n        const r = e.perScreenPixelRatio,\n          s = (e, s) => e.forEachRenderable(e => {\n            e.visible && !t && (ue(e) && (t = pe(e.regular.lod.lengths, e.distanceToCamera, r) > 0), !t && ge(e) && (t = pe(e.silhouette.lod.lengths, e.distanceToCamera, r) > 0));\n          }, s);\n        return this._renderers.forEach(e => {\n          t || (s(e, F.OPAQUE), s(e, F.TRANSPARENT));\n        }), t;\n      }\n    };\n  }\n};\nfunction ne(e) {\n  d(e) && (e.vao.vertexBuffers.instances.dispose(), e.vao.dispose(!1), e.vao = null);\n}\nfunction oe(e) {\n  let t = null,\n    s = null;\n  for (let n = 0; n < e.geometries.length; n++) {\n    const o = e.geometries[n];\n    if (o.material.supportsEdges) {\n      if (t) {\n        if (!r(t, o.transformation)) return !1;\n      } else t = o.transformation;\n      if (!s && d(o.localOrigin)) s = o;else if (s && d(s.localOrigin) && d(o.localOrigin) && s.localOrigin.id !== o.localOrigin.id) return !1;\n    }\n  }\n  return !0;\n}\ne([l({\n  constructOnly: !0\n})], se.prototype, \"rctx\", void 0), e([l({\n  constructOnly: !0\n})], se.prototype, \"renderSR\", void 0), e([l({\n  constructOnly: !0\n})], se.prototype, \"viewingMode\", void 0), e([l({\n  constructOnly: !0\n})], se.prototype, \"techniqueRepository\", void 0), e([l({\n  constructOnly: !0\n})], se.prototype, \"setNeedsRender\", void 0), e([l({\n  constructOnly: !0\n})], se.prototype, \"schedule\", void 0), e([l({\n  readOnly: !0\n})], se.prototype, \"_updatingHandles\", void 0), e([l({\n  readOnly: !0\n})], se.prototype, \"updating\", null), se = e([h(\"esri.views.3d.webgl-engine.lib.edgeRendering.EdgeView\")], se);\nclass ie {\n  constructor(e, t, r) {\n    this.center = t, this.radius = r, this.renderables = new Array(), this.loaded = e, this.loaded.then(() => {\n      null != this.loaded && (this.loaded = !0);\n    });\n  }\n}\nclass ae {\n  constructor(e, t) {\n    this.buffer = e, this.meta = t;\n  }\n}\nclass ce {\n  constructor(e, t) {\n    this.vao = e, this.lod = t;\n  }\n}\nclass de {\n  constructor(e, t) {\n    this.modelMatrix = e, this.origin = t;\n  }\n}\nclass le {\n  constructor(e, t, r, s, n, o, i, a) {\n    this.regular = e, this.silhouette = t, this.statistics = r, this.transform = s, this.edgeTransparency = n, this.objectTransparency = o, this.components = i, this.rendererKey = a, this.distanceToCamera = 0, this.visible = !0;\n  }\n}\nclass he extends le {}\nfunction ue(e) {\n  return d(e.regular);\n}\nclass me extends le {}\nfunction ge(e) {\n  return d(e.silhouette);\n}\nfunction pe(e, t, r) {\n  const n = t * r,\n    o = s(e, n, !0);\n  return -1 === o ? n < e[0] ? e.length : 0 : e.length - o;\n}\nclass fe {\n  constructor(e, t, r, s) {\n    this.position = e, this.indices = t, this.modelTransform = r, this.origin = s;\n  }\n}\nconst _e = p();\nexport { se as EdgeView, de as LegacyTransform, he as RegularRenderable, le as Renderable, me as SilhouetteRenderable };","map":{"version":3,"names":["_","e","t","equals","r","binaryIndexOf","s","n","clamp","o","disposeMaybe","i","destroyMaybe","a","isNone","c","isSome","d","property","l","subclass","h","f","u","m","g","p","b","w","y","O","j","WatchUpdatingTracking","E","v","R","ViewingMode","x","encodeElevationOffset","T","TwoVectorPosition","C","GridLocalOriginFactory","M","applyToModelMatrix","P","LocalOriginManager","S","Object3D","D","VertexArrayObject","A","VertexAttribute","k","VertexLayout","I","EdgeInputBufferLayout","U","EdgeShaderAttributeLocations","B","glVertexLayout","L","RegularEdgeBufferWriter","H","SilhouetteEdgeBufferWriter","V","EdgeType","N","EdgeRenderer","G","LINE_WIDTH_FRACTION_FACTOR","z","EXTENSION_LENGTH_OFFSET","W","EdgePassParameters","q","EdgeWorkerHandle","K","Transparency","F","generateStrokesTexture","Q","determineRendererType","J","determineEdgeTransparency","X","determineObjectTransparency","Y","fillComponenBufferIndices","Z","BufferManager","$","EdgeSilhouette","ee","BufferObject","te","Usage","re","se","constructor","_updatingHandles","_perObjectData","Map","_perObjectDataEvictionCache","Set","_renderers","_gpuMemoryUsage","_workerAbort","AbortController","_tmpModelPosition","_localOrigins","renderSR","initialize","_worker","schedule","_componentColorManager","rctx","createBuffer","sideness","set","_verticesBufferObject","createVertex","STATIC_DRAW","buffer","destroy","destroyed","forEach","_discardObjectEntry","clear","_strokesTexture","abort","updating","usedMemory","shouldRender","size","addComponentObject","hasObject","getObjectMemoryUsage","ie","Promise","center","radius","addPromise","_addComponentGeometry","setNeedsRender","addOrUpdateObject3D","getLogger","declaredClass","warn","get","renderables","length","add","boundingVolumeWorldSpace","bounds","Array","mergeGeometries","geometries","oe","push","_addObjectMergedGeometries","material","supportsEdges","_addGeometry","all","delete","_removeRenderable","loaded","has","updateAllComponentOpacities","_getObjectEntry","components","meta","index","opacity","textureBuffer","setDataElement","_updateTransparency","reduce","statistics","gpuMemoryUsage","updateAllComponentMaterials","hasSlicePlane","getKey","rendererKey","_acquireRenderer","removeRenderable","refCount","addRenderable","_updateComponentBuffer","updateAllVerticalOffsets","verticalOffset","updateObjectVisibility","visible","removeObject","Error","render","updateViewMatrices","camera","viewMatrix","viewInverseTransposeMatrix","key","dispose","forEachRenderable","averageEdgeLength","regular","updateTechnique","silhouette","garbageCollect","updateTextures","transformWorldFromViewTH","high","transformWorldFromViewTL","low","transformViewFromCameraRelativeRS","_e","transformNormalViewFromGlobal","transformProjFromView","projectionMatrix","_updateObjectCameraDistances","_renderRegularEdges","_renderSilhouetteEdges","edgeTransparency","objectTransparency","setRenderablesDirty","_computeModelTransformWithLocalOrigin","getCombinedStaticTransformation","localOrigin","register","acquire","origin","vec3","Uint8Array","Math","round","extensionLength","type","SOLID","SKETCH","color","setData","_createComponentBuffers","getBuffer","acquireIndex","ae","_extractEdges","arguments","undefined","process","data","indices","indicesLength","writerSettings","skipDeduplicate","signal","_createRenderable","ce","vertices","instances","REGULAR","glLayout","instancesData","lodInfo","lengths","SILHOUETTE","vao","le","externalMemoryUsage","vertexAttributes","POSITION","fe","_addPositionData","edgeIndicesLength","modelTransform","position","componentIndex","count","de","Uint32Array","Uint16Array","techniqueRepository","strokesTexture","legacy","spherical","viewingMode","Global","ne","transform","release","releaseIndex","eye","viewForward","distanceToCamera","bindRegularEdges","transparency","perScreenPixelRatio","ue","pe","lod","renderRegularEdges","bindSilhouetteEdges","ge","renderSilhouetteEdges","test","hasRenderedPrimitives","OPAQUE","TRANSPARENT","vertexBuffers","transformation","id","constructOnly","prototype","readOnly","then","modelMatrix","he","me","EdgeView","LegacyTransform","RegularRenderable","Renderable","SilhouetteRenderable"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/EdgeView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import{equals as r,binaryIndexOf as s}from\"../../../../../core/arrayUtils.js\";import n from\"../../../../../core/Logger.js\";import{clamp as o}from\"../../../../../core/mathUtils.js\";import{disposeMaybe as i,destroyMaybe as a,isNone as c,isSome as d}from\"../../../../../core/maybe.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{f as u,t as m,e as g}from\"../../../../../chunks/mat3.js\";import{c as p}from\"../../../../../chunks/mat3f64.js\";import{c as f}from\"../../../../../chunks/mat4f64.js\";import{s as _,c as b,w as y,e as O}from\"../../../../../chunks/vec3.js\";import{c as j}from\"../../../../../chunks/vec3f64.js\";import{WatchUpdatingTracking as w}from\"../../../../../core/support/WatchUpdatingTracking.js\";import{g as E,a as v}from\"../../../../../chunks/sphere.js\";import{c as R}from\"../../../../../chunks/vec33.js\";import{ViewingMode as x}from\"../../../../ViewingMode.js\";import{encodeElevationOffset as T}from\"../../collections/Component/Material/shader/ComponentData.glsl.js\";import{TwoVectorPosition as C}from\"../../core/util/TwoVectorPosition.js\";import{GridLocalOriginFactory as M}from\"../GridLocalOriginFactory.js\";import{applyToModelMatrix as P}from\"../localOriginHelper.js\";import{LocalOriginManager as S}from\"../LocalOriginManager.js\";import{Object3D as D}from\"../Object3D.js\";import{VertexArrayObject as A}from\"../VertexArrayObject.js\";import{VertexAttribute as k}from\"../VertexAttribute.js\";import{VertexLayout as I,EdgeInputBufferLayout as U,EdgeShaderAttributeLocations as B,glVertexLayout as L}from\"./bufferLayouts.js\";import{RegularEdgeBufferWriter as H,SilhouetteEdgeBufferWriter as V}from\"./edgeBufferWriters.js\";import{EdgeType as N}from\"./edgePreprocessing.js\";import{EdgeRenderer as G,LINE_WIDTH_FRACTION_FACTOR as z,EXTENSION_LENGTH_OFFSET as W}from\"./EdgeRenderer.js\";import{EdgePassParameters as q}from\"./EdgeShaderParameters.js\";import{EdgeWorkerHandle as K}from\"./EdgeWorkerHandle.js\";import{Transparency as F}from\"./interfaces.js\";import{generateStrokesTexture as Q}from\"./strokes.js\";import{determineRendererType as J,determineEdgeTransparency as X,determineObjectTransparency as Y,fillComponenBufferIndices as Z}from\"./util.js\";import{BufferManager as $}from\"../TextureBackedBuffer/BufferManager.js\";import{EdgeSilhouette as ee}from\"../../shaders/sources/edgeRenderer/EdgeUtil.glsl.js\";import{BufferObject as te}from\"../../../../webgl/BufferObject.js\";import{Usage as re}from\"../../../../webgl/enums.js\";let se=class extends t{constructor(e){super(e),this._updatingHandles=new w,this._perObjectData=new Map,this._perObjectDataEvictionCache=new Set,this._renderers=new Map,this._gpuMemoryUsage=0,this._workerAbort=new AbortController,this._tmpModelPosition=j(),this._localOrigins=new S(new M(e.renderSR))}initialize(){this._worker=new K(this.schedule),this._componentColorManager=new $(this.rctx,3);const e=I.createBuffer(4);for(let t=0;t<4;t++)e.sideness.set(t,0,0===t||3===t?0:1),e.sideness.set(t,1,0===t||1===t?0:1);this._verticesBufferObject=te.createVertex(this.rctx,re.STATIC_DRAW,e.buffer)}destroy(){this.destroyed||(this._perObjectData.forEach((e=>this._discardObjectEntry(e))),this._perObjectData.clear(),this._strokesTexture=i(this._strokesTexture),this._componentColorManager=a(this._componentColorManager),this._workerAbort.abort(),this._worker.destroy(),this._verticesBufferObject=i(this._verticesBufferObject),this._renderers.clear(),this._updatingHandles.destroy())}get updating(){return this._updatingHandles.updating}get usedMemory(){return this._gpuMemoryUsage}shouldRender(){return this._renderers.size>0}async addComponentObject(e,t,r,s,n,o,i,a){if(this.hasObject(e))return this.getObjectMemoryUsage(e);let c;const d=new ie(new Promise((e=>c=e)),r.center,r.radius);this._perObjectData.set(e,d);const l=await this._updatingHandles.addPromise(this._addComponentGeometry(t,d,s,n,o,i,a));return this.setNeedsRender(),c(),l}async addOrUpdateObject3D(e,t,r,s){if(this.destroyed)return void n.getLogger(this.declaredClass).warn(\"Attempt to add an object to a destroyed instance\");const o=this._perObjectData.get(e);let i;o?.renderables.length>0&&this._perObjectDataEvictionCache.add(o);const a=e.boundingVolumeWorldSpace.bounds,c=new ie(new Promise((e=>i=e)),E(a),v(a));this._perObjectData.set(e,c);const d=new Array;if(r.mergeGeometries&&e.geometries.length>1&&oe(e))d.push(this._addObjectMergedGeometries(e,c,t,r,s));else for(let n=0;n<e.geometries.length;n++){const o=e.geometries[n];o.material.supportsEdges&&d.push(this._addGeometry(e,c,o,t[0],r,s))}await this._updatingHandles.addPromise(Promise.all(d)),this._perObjectDataEvictionCache.delete(c),this._discardObjectEntry(o),this.setNeedsRender(),i()}_discardObjectEntry(e){e&&(e.renderables.length&&(e.renderables.forEach((e=>this._removeRenderable(e))),this.setNeedsRender()),e.loaded=null)}hasObject(e){return this._perObjectData.has(e)}async updateAllComponentOpacities(e,t){const r=await this._updatingHandles.addPromise(this._getObjectEntry(e));if(c(r))return;const s=t instanceof Array?e=>t[e]:()=>t;r.renderables.forEach((e=>{const t=e.components.meta.length;for(let r=0;r<t;r++){const t=s(r),n=e.components.meta[r],o=n.index;n.material.opacity=t,e.components.buffer.textureBuffer.setDataElement(o,1,3,255*t)}this._updateTransparency(e)})),this.setNeedsRender()}async getObjectMemoryUsage(e){const t=await this._getObjectEntry(e);return d(t)?t.renderables.reduce(((e,t)=>e+t.statistics.gpuMemoryUsage),0):0}async updateAllComponentMaterials(e,t,r,s){const n=e instanceof D,o=!!r.hasSlicePlane,i=J(t),a=G.getKey(i,o,n),d=await this._updatingHandles.addPromise(this._getObjectEntry(e));c(d)||(d.renderables.forEach((e=>{if(a!==e.rendererKey){const t=this._renderers.get(e.rendererKey),r=this._acquireRenderer(i,o,n);t.removeRenderable(e),--t.refCount,e.rendererKey=a,r.addRenderable(e)}for(let r=0;r<t.length;r++)e.components.meta[r].material=t[r];s&&this._updateComponentBuffer(e.components),this._updateTransparency(e)})),this.setNeedsRender())}async updateAllVerticalOffsets(e,t){const r=await this._updatingHandles.addPromise(this._getObjectEntry(e));c(r)||(r.renderables.forEach((e=>{const r=e.components.meta;for(let s=0;s<r.length;s++)e.components.meta[s].verticalOffset=t?.[s]??0;this._updateComponentBuffer(e.components)})),this.setNeedsRender())}async updateObjectVisibility(e,t){const r=await this._updatingHandles.addPromise(this._getObjectEntry(e));d(r)&&(r.renderables.forEach((e=>e.visible=t)),this.setNeedsRender())}removeObject(e){const t=this._perObjectData.get(e);t&&(this._perObjectData.delete(e),this._discardObjectEntry(t))}async _getObjectEntry(e){const t=this._perObjectData.get(e);if(!t)throw new Error(\"no object\");return await t.loaded,null==t.loaded?null:t}render(e,t){if(c(this._componentColorManager))return;this._localOrigins.updateViewMatrices(e.camera.viewMatrix);const r=e.camera.viewInverseTransposeMatrix,s=j(),n=new C;let o=0,i=0;if(this._renderers.forEach((r=>{if(0===r.refCount)this._renderers.delete(r.key),r.dispose();else{let s=!0,n=!0;r.forEachRenderable((t=>{t.visible&&(o+=t.statistics.averageEdgeLength,i++,s&&t.regular&&(r.updateTechnique(e,!1),s=!1),n&&t.silhouette&&(r.updateTechnique(e,!0),n=!1))}),t)}})),this._componentColorManager.garbageCollect(),this._componentColorManager.updateTextures(),0===i)return;const a=new q(40*o/i,t);_(s,r[3],r[7],r[11]),n.set(s),b(a.transformWorldFromViewTH,n.high),b(a.transformWorldFromViewTL,n.low),u(a.transformViewFromCameraRelativeRS,e.camera.viewMatrix),m(_e,a.transformViewFromCameraRelativeRS),g(a.transformNormalViewFromGlobal,_e),a.transformProjFromView=e.camera.projectionMatrix,this._updateObjectCameraDistances(e),this._renderers.forEach((t=>{this._renderRegularEdges(t,e,a),this._renderSilhouetteEdges(t,e,a)}))}_updateTransparency(e){const t=X(e.components.meta),r=Y(e.components.meta);t===e.edgeTransparency&&r===e.objectTransparency||(e.edgeTransparency=t,e.objectTransparency=r,this._renderers.get(e.rendererKey).setRenderablesDirty())}_computeModelTransformWithLocalOrigin(e,t,r){e.getCombinedStaticTransformation(t,r);const s=d(t.localOrigin)?this._localOrigins.register(t.localOrigin):this._localOrigins.acquire(_(this._tmpModelPosition,r[12],r[13],r[14]));return t.localOrigin=s.origin,P(s.origin.vec3,r),s}_updateComponentBuffer(e){const{meta:t,buffer:r}=e,s=new Uint8Array(4);for(let n=0;n<t.length;n++){const e=t[n].material,i=t[n].index,a=o(Math.round(e.size*z),0,255),c=o(e.extensionLength,-W,255-W)+W,d=\"solid\"===e.type?N.SOLID:N.SKETCH,l=255*e.opacity,h=e.color,u=255*h[0],m=255*h[1],g=255*h[2],p=255*h[3];r.textureBuffer.setData(i,0,u,m,g,p),r.textureBuffer.setData(i,1,a,c,d,l),T(t[n].verticalOffset,s),r.textureBuffer.setData(i,2,s[0],s[1],s[2],s[3])}}_createComponentBuffers(e){if(c(this._componentColorManager))return null;const t=new Array,r=this._componentColorManager.getBuffer(e.length);for(let n=0;n<e.length;n++){const s=e[n],o=r.acquireIndex();t.push({index:o,verticalOffset:0,material:s})}const s=new ae(r,t);return this._updateComponentBuffer(s),s}_extractEdges(e,t,r,s,n,o=n.length){return this._worker.process({data:t,indices:n,indicesLength:o,writerSettings:e,skipDeduplicate:r},this._workerAbort.signal,s)}_createRenderable(e,t,r,s,n){const o=t=>d(this._verticesBufferObject)?new ce(new A(this.rctx,B,{vertices:L,instances:t===ee.REGULAR?H.glLayout:V.glLayout},{vertices:this._verticesBufferObject,instances:te.createVertex(this.rctx,re.STATIC_DRAW,t===ee.REGULAR?e.regular.instancesData.buffer:e.silhouette.instancesData.buffer)}),t===ee.REGULAR?e.regular.lodInfo:e.silhouette.lodInfo):null,i=e.regular.lodInfo.lengths.length>0?o(ee.REGULAR):null,a=e.silhouette.lodInfo.lengths.length>0?o(ee.SILHOUETTE):null,c=(d(i)?i.vao.size:0)+(d(a)?a.vao.size:0);return new le(i,a,{gpuMemoryUsage:c,externalMemoryUsage:n,averageEdgeLength:e.averageEdgeLength},r,X(t.meta),Y(t.meta),t,s)}async _addGeometry(e,t,r,s,n,o){const i=r.vertexAttributes.get(k.POSITION),a=r.indices.get(k.POSITION),c=f(),d=this._computeModelTransformWithLocalOrigin(e,r,c),l=new fe(i,a,c,d);return this._addPositionData(t,l,r.edgeIndicesLength,s,n,o)}async _addPositionData(e,t,r,s,n,o=!1){if(null==e.loaded)return;const i=this._createComponentBuffers([s]);if(c(i)||r<=0)return;const a=this._acquireRenderer(s.type,!!n.hasSlicePlane,!0),{modelTransform:d,origin:l}=t,h=t.indices,u=t.position,m=u.data.length/u.size,g=U.createBuffer(m);for(let c=0;c<m;c++)g.position.set(c,0,u.data[c*u.size+0]),g.position.set(c,1,u.data[c*u.size+1]),g.position.set(c,2,u.data[c*u.size+2]);Z(i.meta,[0,g.componentIndex.count],g.componentIndex);const p=await this._updatingHandles.addPromise(this._extractEdges(a.writerSettings,g,!1,o,h,r));if(null==e.loaded)return;const f=this._createRenderable(p,i,new de(d,l),a.key,!1);e.renderables.push(f),a.addRenderable(f),this._gpuMemoryUsage+=f.statistics.gpuMemoryUsage}async _addComponentGeometry(e,t,r,s,n,o,i){if(null==t.loaded)return 0;const a=this._createComponentBuffers(o);if(c(a))return 0;const d=J(o),l=this._acquireRenderer(d,i.hasSlicePlane||!1,!1),h=U.createBuffer(r.count);R(h.position,r),Z(a.meta,n,h.componentIndex,s);const u=!0,m=l.writerSettings,g=await this._updatingHandles.addPromise(this._extractEdges(m,h,u,!1,s));if(null==t.loaded)return 0;const p=this._createRenderable(g,a,e,l.key,!0);return t.renderables.push(p),l.addRenderable(p),p.statistics.gpuMemoryUsage}async _addObjectMergedGeometries(e,t,r,s,n){const o=new Map;let i=0,a=null,c=0;for(let f=0;f<e.geometries.length;f++){const t=e.geometries[f];if(!t.material.supportsEdges)continue;!a&&t.localOrigin&&(a=t);const r=t.vertexAttributes.get(k.POSITION);c+=r.data.length/r.size,i+=t.edgeIndicesLength}const d=c>=65536?Uint32Array:Uint16Array,l=i?new d(i):null,h=[];let u=0;for(let f=0;f<e.geometries.length;f++){const t=e.geometries[f];if(!t.material.supportsEdges)continue;const r=t.vertexAttributes.get(k.POSITION),s=t.indices.get(k.POSITION);let n=o.get(r.data);if(null==n){n=h.length/3;for(let e=0;e<r.data.length;e+=r.size)h.push(r.data[e+0]),h.push(r.data[e+1]),h.push(r.data[e+2]);o.set(r.data,n)}if(s)for(let e=0;e<t.edgeIndicesLength;e++)l[u++]=n+s[e]}const m=a||e.geometries[0],g=f(),p=this._computeModelTransformWithLocalOrigin(e,m,g);for(let f=0;f<e.geometries.length;f++)e.geometries[f].localOrigin=p.origin;const _=new fe({data:h,size:3},l,g,p);await this._updatingHandles.addPromise(this._addPositionData(t,_,l.length,r[0],s,n))}_acquireRenderer(e,t,r){const s=G.getKey(e,t,r);let n=this._renderers.get(s);return c(this._strokesTexture)&&(this._strokesTexture=Q(this.rctx)),n||(n=new G(this.rctx,this.techniqueRepository,{type:e,hasSlicePlane:t,strokesTexture:this._strokesTexture,legacy:r,spherical:this.viewingMode===x.Global}),this._renderers.set(s,n)),++n.refCount,n}_removeRenderable(e){ne(e.regular),ne(e.silhouette);const t=this._renderers.get(e.rendererKey);if(t){t.removeRenderable(e),--t.refCount,\"origin\"in e.transform&&this._localOrigins.release(e.transform.origin),this._gpuMemoryUsage-=e.statistics.externalMemoryUsage?0:e.statistics.gpuMemoryUsage;for(const t of e.components.meta)e.components.buffer.releaseIndex(t.index)}}_updateObjectCameraDistances(e){const t=e.camera.eye,r=e.camera.viewForward,s=j(),n=e=>{y(s,e.center,t);const n=O(s,r),o=e.radius,i=n<-o?1/0:n<o?0:n-o;e.renderables.forEach((e=>e.distanceToCamera=i))};this._perObjectData.forEach(n),this._perObjectDataEvictionCache.forEach(n)}_renderRegularEdges(e,t,r){const s=e.bindRegularEdges(r,t),n=r.transparency,o=t.camera.perScreenPixelRatio;e.forEachRenderable((n=>{if(!ue(n)||!n.visible)return;const i=pe(n.regular.lod.lengths,n.distanceToCamera,o);e.renderRegularEdges(s,n,r,t,i)}),n)}_renderSilhouetteEdges(e,t,r){const s=e.bindSilhouetteEdges(r,t),n=r.transparency,o=t.camera.perScreenPixelRatio;e.forEachRenderable((n=>{if(!ge(n)||!n.visible)return;const i=pe(n.silhouette.lod.lengths,n.distanceToCamera,o);e.renderSilhouetteEdges(s,n,r,t,i)}),n)}get test(){return{hasRenderedPrimitives:e=>{let t=!1;const r=e.perScreenPixelRatio,s=(e,s)=>e.forEachRenderable((e=>{e.visible&&!t&&(ue(e)&&(t=pe(e.regular.lod.lengths,e.distanceToCamera,r)>0),!t&&ge(e)&&(t=pe(e.silhouette.lod.lengths,e.distanceToCamera,r)>0))}),s);return this._renderers.forEach((e=>{t||(s(e,F.OPAQUE),s(e,F.TRANSPARENT))})),t}}}};function ne(e){d(e)&&(e.vao.vertexBuffers.instances.dispose(),e.vao.dispose(!1),e.vao=null)}function oe(e){let t=null,s=null;for(let n=0;n<e.geometries.length;n++){const o=e.geometries[n];if(o.material.supportsEdges){if(t){if(!r(t,o.transformation))return!1}else t=o.transformation;if(!s&&d(o.localOrigin))s=o;else if(s&&d(s.localOrigin)&&d(o.localOrigin)&&s.localOrigin.id!==o.localOrigin.id)return!1}}return!0}e([l({constructOnly:!0})],se.prototype,\"rctx\",void 0),e([l({constructOnly:!0})],se.prototype,\"renderSR\",void 0),e([l({constructOnly:!0})],se.prototype,\"viewingMode\",void 0),e([l({constructOnly:!0})],se.prototype,\"techniqueRepository\",void 0),e([l({constructOnly:!0})],se.prototype,\"setNeedsRender\",void 0),e([l({constructOnly:!0})],se.prototype,\"schedule\",void 0),e([l({readOnly:!0})],se.prototype,\"_updatingHandles\",void 0),e([l({readOnly:!0})],se.prototype,\"updating\",null),se=e([h(\"esri.views.3d.webgl-engine.lib.edgeRendering.EdgeView\")],se);class ie{constructor(e,t,r){this.center=t,this.radius=r,this.renderables=new Array,this.loaded=e,this.loaded.then((()=>{null!=this.loaded&&(this.loaded=!0)}))}}class ae{constructor(e,t){this.buffer=e,this.meta=t}}class ce{constructor(e,t){this.vao=e,this.lod=t}}class de{constructor(e,t){this.modelMatrix=e,this.origin=t}}class le{constructor(e,t,r,s,n,o,i,a){this.regular=e,this.silhouette=t,this.statistics=r,this.transform=s,this.edgeTransparency=n,this.objectTransparency=o,this.components=i,this.rendererKey=a,this.distanceToCamera=0,this.visible=!0}}class he extends le{}function ue(e){return d(e.regular)}class me extends le{}function ge(e){return d(e.silhouette)}function pe(e,t,r){const n=t*r,o=s(e,n,!0);return-1===o?n<e[0]?e.length:0:e.length-o}class fe{constructor(e,t,r,s){this.position=e,this.indices=t,this.modelTransform=r,this.origin=s}}const _e=p();export{se as EdgeView,de as LegacyTransform,he as RegularRenderable,le as Renderable,me as SilhouetteRenderable};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,oCAAoC;AAAC,OAAOC,CAAC,MAAK,iCAAiC;AAAC,SAAOC,MAAM,IAAIC,CAAC,EAACC,aAAa,IAAIC,CAAC,QAAK,mCAAmC;AAAC,OAAOC,CAAC,MAAK,+BAA+B;AAAC,SAAOC,KAAK,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,4DAA4D;AAAC,OAAM,mDAAmD;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,4DAA4D;AAAC,SAAOC,CAAC,IAAIC,CAAC,EAACrB,CAAC,IAAIsB,CAAC,EAACvB,CAAC,IAAIwB,CAAC,QAAK,+BAA+B;AAAC,SAAOV,CAAC,IAAIW,CAAC,QAAK,kCAAkC;AAAC,SAAOX,CAAC,IAAIO,CAAC,QAAK,kCAAkC;AAAC,SAAOhB,CAAC,IAAIN,CAAC,EAACe,CAAC,IAAIY,CAAC,EAACC,CAAC,IAAIC,CAAC,EAAC5B,CAAC,IAAI6B,CAAC,QAAK,+BAA+B;AAAC,SAAOf,CAAC,IAAIgB,CAAC,QAAK,kCAAkC;AAAC,SAAOC,qBAAqB,IAAIJ,CAAC,QAAK,sDAAsD;AAAC,SAAOH,CAAC,IAAIQ,CAAC,EAACpB,CAAC,IAAIqB,CAAC,QAAK,iCAAiC;AAAC,SAAOnB,CAAC,IAAIoB,CAAC,QAAK,gCAAgC;AAAC,SAAOC,WAAW,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,QAAK,mEAAmE;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,sCAAsC;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,0BAA0B;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,gBAAgB;AAAC,SAAOC,iBAAiB,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,uBAAuB;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,qBAAqB,IAAIC,CAAC,EAACC,4BAA4B,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,QAAK,oBAAoB;AAAC,SAAOC,uBAAuB,IAAIC,CAAC,EAACC,0BAA0B,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,YAAY,IAAIC,CAAC,EAACC,0BAA0B,IAAIC,CAAC,EAACC,uBAAuB,IAAIC,CAAC,QAAK,mBAAmB;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,QAAK,2BAA2B;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,uBAAuB;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,iBAAiB;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,cAAc;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,EAACC,yBAAyB,IAAIC,CAAC,EAACC,2BAA2B,IAAIC,CAAC,EAACC,yBAAyB,IAAIC,CAAC,QAAK,WAAW;AAAC,SAAOC,aAAa,IAAIC,CAAC,QAAK,yCAAyC;AAAC,SAAOC,cAAc,IAAIC,EAAE,QAAK,qDAAqD;AAAC,SAAOC,YAAY,IAAIC,EAAE,QAAK,mCAAmC;AAAC,SAAOC,KAAK,IAAIC,EAAE,QAAK,4BAA4B;AAAC,IAAIC,EAAE,GAAC,cAAchG,CAAC;EAACiG,WAAWA,CAAClG,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC,EAAC,IAAI,CAACmG,gBAAgB,GAAC,IAAIxE,CAAC,IAAC,IAAI,CAACyE,cAAc,GAAC,IAAIC,GAAG,IAAC,IAAI,CAACC,2BAA2B,GAAC,IAAIC,GAAG,IAAC,IAAI,CAACC,UAAU,GAAC,IAAIH,GAAG,IAAC,IAAI,CAACI,eAAe,GAAC,CAAC,EAAC,IAAI,CAACC,YAAY,GAAC,IAAIC,eAAe,IAAC,IAAI,CAACC,iBAAiB,GAAC9E,CAAC,EAAE,EAAC,IAAI,CAAC+E,aAAa,GAAC,IAAI/D,CAAC,CAAC,IAAIJ,CAAC,CAAC1C,CAAC,CAAC8G,QAAQ,CAAC,CAAC;EAAA;EAACC,UAAUA,CAAA,EAAE;IAAC,IAAI,CAACC,OAAO,GAAC,IAAIpC,CAAC,CAAC,IAAI,CAACqC,QAAQ,CAAC,EAAC,IAAI,CAACC,sBAAsB,GAAC,IAAIxB,CAAC,CAAC,IAAI,CAACyB,IAAI,EAAC,CAAC,CAAC;IAAC,MAAMnH,CAAC,GAACsD,CAAC,CAAC8D,YAAY,CAAC,CAAC,CAAC;IAAC,KAAI,IAAInH,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC,CAAC,EAACA,CAAC,EAAE,EAACD,CAAC,CAACqH,QAAQ,CAACC,GAAG,CAACrH,CAAC,EAAC,CAAC,EAAC,CAAC,KAAGA,CAAC,IAAE,CAAC,KAAGA,CAAC,GAAC,CAAC,GAAC,CAAC,CAAC,EAACD,CAAC,CAACqH,QAAQ,CAACC,GAAG,CAACrH,CAAC,EAAC,CAAC,EAAC,CAAC,KAAGA,CAAC,IAAE,CAAC,KAAGA,CAAC,GAAC,CAAC,GAAC,CAAC,CAAC;IAAC,IAAI,CAACsH,qBAAqB,GAACzB,EAAE,CAAC0B,YAAY,CAAC,IAAI,CAACL,IAAI,EAACnB,EAAE,CAACyB,WAAW,EAACzH,CAAC,CAAC0H,MAAM,CAAC;EAAA;EAACC,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACC,SAAS,KAAG,IAAI,CAACxB,cAAc,CAACyB,OAAO,CAAE7H,CAAC,IAAE,IAAI,CAAC8H,mBAAmB,CAAC9H,CAAC,CAAC,CAAE,EAAC,IAAI,CAACoG,cAAc,CAAC2B,KAAK,EAAE,EAAC,IAAI,CAACC,eAAe,GAACtH,CAAC,CAAC,IAAI,CAACsH,eAAe,CAAC,EAAC,IAAI,CAACd,sBAAsB,GAACtG,CAAC,CAAC,IAAI,CAACsG,sBAAsB,CAAC,EAAC,IAAI,CAACR,YAAY,CAACuB,KAAK,EAAE,EAAC,IAAI,CAACjB,OAAO,CAACW,OAAO,EAAE,EAAC,IAAI,CAACJ,qBAAqB,GAAC7G,CAAC,CAAC,IAAI,CAAC6G,qBAAqB,CAAC,EAAC,IAAI,CAACf,UAAU,CAACuB,KAAK,EAAE,EAAC,IAAI,CAAC5B,gBAAgB,CAACwB,OAAO,EAAE,CAAC;EAAA;EAAC,IAAIO,QAAQA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC/B,gBAAgB,CAAC+B,QAAQ;EAAA;EAAC,IAAIC,UAAUA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC1B,eAAe;EAAA;EAAC2B,YAAYA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC5B,UAAU,CAAC6B,IAAI,GAAC,CAAC;EAAA;EAAC,MAAMC,kBAAkBA,CAACtI,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAG,IAAI,CAAC2H,SAAS,CAACvI,CAAC,CAAC,EAAC,OAAO,IAAI,CAACwI,oBAAoB,CAACxI,CAAC,CAAC;IAAC,IAAIc,CAAC;IAAC,MAAME,CAAC,GAAC,IAAIyH,EAAE,CAAC,IAAIC,OAAO,CAAE1I,CAAC,IAAEc,CAAC,GAACd,CAAC,CAAE,EAACG,CAAC,CAACwI,MAAM,EAACxI,CAAC,CAACyI,MAAM,CAAC;IAAC,IAAI,CAACxC,cAAc,CAACkB,GAAG,CAACtH,CAAC,EAACgB,CAAC,CAAC;IAAC,MAAME,CAAC,GAAC,MAAM,IAAI,CAACiF,gBAAgB,CAAC0C,UAAU,CAAC,IAAI,CAACC,qBAAqB,CAAC7I,CAAC,EAACe,CAAC,EAACX,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,CAAC,CAAC;IAAC,OAAO,IAAI,CAACmI,cAAc,EAAE,EAACjI,CAAC,EAAE,EAACI,CAAC;EAAA;EAAC,MAAM8H,mBAAmBA,CAAChJ,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAG,IAAI,CAACuH,SAAS,EAAC,OAAO,KAAKtH,CAAC,CAAC2I,SAAS,CAAC,IAAI,CAACC,aAAa,CAAC,CAACC,IAAI,CAAC,kDAAkD,CAAC;IAAC,MAAM3I,CAAC,GAAC,IAAI,CAAC4F,cAAc,CAACgD,GAAG,CAACpJ,CAAC,CAAC;IAAC,IAAIU,CAAC;IAACF,CAAC,EAAE6I,WAAW,CAACC,MAAM,GAAC,CAAC,IAAE,IAAI,CAAChD,2BAA2B,CAACiD,GAAG,CAAC/I,CAAC,CAAC;IAAC,MAAMI,CAAC,GAACZ,CAAC,CAACwJ,wBAAwB,CAACC,MAAM;MAAC3I,CAAC,GAAC,IAAI2H,EAAE,CAAC,IAAIC,OAAO,CAAE1I,CAAC,IAAEU,CAAC,GAACV,CAAC,CAAE,EAACgC,CAAC,CAACpB,CAAC,CAAC,EAACqB,CAAC,CAACrB,CAAC,CAAC,CAAC;IAAC,IAAI,CAACwF,cAAc,CAACkB,GAAG,CAACtH,CAAC,EAACc,CAAC,CAAC;IAAC,MAAME,CAAC,GAAC,IAAI0I,KAAK;IAAC,IAAGvJ,CAAC,CAACwJ,eAAe,IAAE3J,CAAC,CAAC4J,UAAU,CAACN,MAAM,GAAC,CAAC,IAAEO,EAAE,CAAC7J,CAAC,CAAC,EAACgB,CAAC,CAAC8I,IAAI,CAAC,IAAI,CAACC,0BAA0B,CAAC/J,CAAC,EAACc,CAAC,EAACb,CAAC,EAACE,CAAC,EAACE,CAAC,CAAC,CAAC,CAAC,KAAK,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAACN,CAAC,CAAC4J,UAAU,CAACN,MAAM,EAAChJ,CAAC,EAAE,EAAC;MAAC,MAAME,CAAC,GAACR,CAAC,CAAC4J,UAAU,CAACtJ,CAAC,CAAC;MAACE,CAAC,CAACwJ,QAAQ,CAACC,aAAa,IAAEjJ,CAAC,CAAC8I,IAAI,CAAC,IAAI,CAACI,YAAY,CAAClK,CAAC,EAACc,CAAC,EAACN,CAAC,EAACP,CAAC,CAAC,CAAC,CAAC,EAACE,CAAC,EAACE,CAAC,CAAC,CAAC;IAAA;IAAC,MAAM,IAAI,CAAC8F,gBAAgB,CAAC0C,UAAU,CAACH,OAAO,CAACyB,GAAG,CAACnJ,CAAC,CAAC,CAAC,EAAC,IAAI,CAACsF,2BAA2B,CAAC8D,MAAM,CAACtJ,CAAC,CAAC,EAAC,IAAI,CAACgH,mBAAmB,CAACtH,CAAC,CAAC,EAAC,IAAI,CAACuI,cAAc,EAAE,EAACrI,CAAC,EAAE;EAAA;EAACoH,mBAAmBA,CAAC9H,CAAC,EAAC;IAACA,CAAC,KAAGA,CAAC,CAACqJ,WAAW,CAACC,MAAM,KAAGtJ,CAAC,CAACqJ,WAAW,CAACxB,OAAO,CAAE7H,CAAC,IAAE,IAAI,CAACqK,iBAAiB,CAACrK,CAAC,CAAC,CAAE,EAAC,IAAI,CAAC+I,cAAc,EAAE,CAAC,EAAC/I,CAAC,CAACsK,MAAM,GAAC,IAAI,CAAC;EAAA;EAAC/B,SAASA,CAACvI,CAAC,EAAC;IAAC,OAAO,IAAI,CAACoG,cAAc,CAACmE,GAAG,CAACvK,CAAC,CAAC;EAAA;EAAC,MAAMwK,2BAA2BA,CAACxK,CAAC,EAACC,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,MAAM,IAAI,CAACgG,gBAAgB,CAAC0C,UAAU,CAAC,IAAI,CAAC4B,eAAe,CAACzK,CAAC,CAAC,CAAC;IAAC,IAAGc,CAAC,CAACX,CAAC,CAAC,EAAC;IAAO,MAAME,CAAC,GAACJ,CAAC,YAAYyJ,KAAK,GAAC1J,CAAC,IAAEC,CAAC,CAACD,CAAC,CAAC,GAAC,MAAIC,CAAC;IAACE,CAAC,CAACkJ,WAAW,CAACxB,OAAO,CAAE7H,CAAC,IAAE;MAAC,MAAMC,CAAC,GAACD,CAAC,CAAC0K,UAAU,CAACC,IAAI,CAACrB,MAAM;MAAC,KAAI,IAAInJ,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,CAAC,EAACE,CAAC,EAAE,EAAC;QAAC,MAAMF,CAAC,GAACI,CAAC,CAACF,CAAC,CAAC;UAACG,CAAC,GAACN,CAAC,CAAC0K,UAAU,CAACC,IAAI,CAACxK,CAAC,CAAC;UAACK,CAAC,GAACF,CAAC,CAACsK,KAAK;QAACtK,CAAC,CAAC0J,QAAQ,CAACa,OAAO,GAAC5K,CAAC,EAACD,CAAC,CAAC0K,UAAU,CAAChD,MAAM,CAACoD,aAAa,CAACC,cAAc,CAACvK,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,GAAG,GAACP,CAAC,CAAC;MAAA;MAAC,IAAI,CAAC+K,mBAAmB,CAAChL,CAAC,CAAC;IAAA,CAAC,CAAE,EAAC,IAAI,CAAC+I,cAAc,EAAE;EAAA;EAAC,MAAMP,oBAAoBA,CAACxI,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,MAAM,IAAI,CAACwK,eAAe,CAACzK,CAAC,CAAC;IAAC,OAAOgB,CAAC,CAACf,CAAC,CAAC,GAACA,CAAC,CAACoJ,WAAW,CAAC4B,MAAM,CAAE,CAACjL,CAAC,EAACC,CAAC,KAAGD,CAAC,GAACC,CAAC,CAACiL,UAAU,CAACC,cAAc,EAAE,CAAC,CAAC,GAAC,CAAC;EAAA;EAAC,MAAMC,2BAA2BA,CAACpL,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACN,CAAC,YAAYgD,CAAC;MAACxC,CAAC,GAAC,CAAC,CAACL,CAAC,CAACkL,aAAa;MAAC3K,CAAC,GAACwE,CAAC,CAACjF,CAAC,CAAC;MAACW,CAAC,GAACwD,CAAC,CAACkH,MAAM,CAAC5K,CAAC,EAACF,CAAC,EAACF,CAAC,CAAC;MAACU,CAAC,GAAC,MAAM,IAAI,CAACmF,gBAAgB,CAAC0C,UAAU,CAAC,IAAI,CAAC4B,eAAe,CAACzK,CAAC,CAAC,CAAC;IAACc,CAAC,CAACE,CAAC,CAAC,KAAGA,CAAC,CAACqI,WAAW,CAACxB,OAAO,CAAE7H,CAAC,IAAE;MAAC,IAAGY,CAAC,KAAGZ,CAAC,CAACuL,WAAW,EAAC;QAAC,MAAMtL,CAAC,GAAC,IAAI,CAACuG,UAAU,CAAC4C,GAAG,CAACpJ,CAAC,CAACuL,WAAW,CAAC;UAACpL,CAAC,GAAC,IAAI,CAACqL,gBAAgB,CAAC9K,CAAC,EAACF,CAAC,EAACF,CAAC,CAAC;QAACL,CAAC,CAACwL,gBAAgB,CAACzL,CAAC,CAAC,EAAC,EAAEC,CAAC,CAACyL,QAAQ,EAAC1L,CAAC,CAACuL,WAAW,GAAC3K,CAAC,EAACT,CAAC,CAACwL,aAAa,CAAC3L,CAAC,CAAC;MAAA;MAAC,KAAI,IAAIG,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,CAAC,CAACqJ,MAAM,EAACnJ,CAAC,EAAE,EAACH,CAAC,CAAC0K,UAAU,CAACC,IAAI,CAACxK,CAAC,CAAC,CAAC6J,QAAQ,GAAC/J,CAAC,CAACE,CAAC,CAAC;MAACE,CAAC,IAAE,IAAI,CAACuL,sBAAsB,CAAC5L,CAAC,CAAC0K,UAAU,CAAC,EAAC,IAAI,CAACM,mBAAmB,CAAChL,CAAC,CAAC;IAAA,CAAC,CAAE,EAAC,IAAI,CAAC+I,cAAc,EAAE,CAAC;EAAA;EAAC,MAAM8C,wBAAwBA,CAAC7L,CAAC,EAACC,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,MAAM,IAAI,CAACgG,gBAAgB,CAAC0C,UAAU,CAAC,IAAI,CAAC4B,eAAe,CAACzK,CAAC,CAAC,CAAC;IAACc,CAAC,CAACX,CAAC,CAAC,KAAGA,CAAC,CAACkJ,WAAW,CAACxB,OAAO,CAAE7H,CAAC,IAAE;MAAC,MAAMG,CAAC,GAACH,CAAC,CAAC0K,UAAU,CAACC,IAAI;MAAC,KAAI,IAAItK,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,CAAC,CAACmJ,MAAM,EAACjJ,CAAC,EAAE,EAACL,CAAC,CAAC0K,UAAU,CAACC,IAAI,CAACtK,CAAC,CAAC,CAACyL,cAAc,GAAC7L,CAAC,GAAGI,CAAC,CAAC,IAAE,CAAC;MAAC,IAAI,CAACuL,sBAAsB,CAAC5L,CAAC,CAAC0K,UAAU,CAAC;IAAA,CAAC,CAAE,EAAC,IAAI,CAAC3B,cAAc,EAAE,CAAC;EAAA;EAAC,MAAMgD,sBAAsBA,CAAC/L,CAAC,EAACC,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,MAAM,IAAI,CAACgG,gBAAgB,CAAC0C,UAAU,CAAC,IAAI,CAAC4B,eAAe,CAACzK,CAAC,CAAC,CAAC;IAACgB,CAAC,CAACb,CAAC,CAAC,KAAGA,CAAC,CAACkJ,WAAW,CAACxB,OAAO,CAAE7H,CAAC,IAAEA,CAAC,CAACgM,OAAO,GAAC/L,CAAC,CAAE,EAAC,IAAI,CAAC8I,cAAc,EAAE,CAAC;EAAA;EAACkD,YAAYA,CAACjM,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACmG,cAAc,CAACgD,GAAG,CAACpJ,CAAC,CAAC;IAACC,CAAC,KAAG,IAAI,CAACmG,cAAc,CAACgE,MAAM,CAACpK,CAAC,CAAC,EAAC,IAAI,CAAC8H,mBAAmB,CAAC7H,CAAC,CAAC,CAAC;EAAA;EAAC,MAAMwK,eAAeA,CAACzK,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACmG,cAAc,CAACgD,GAAG,CAACpJ,CAAC,CAAC;IAAC,IAAG,CAACC,CAAC,EAAC,MAAM,IAAIiM,KAAK,CAAC,WAAW,CAAC;IAAC,OAAO,MAAMjM,CAAC,CAACqK,MAAM,EAAC,IAAI,IAAErK,CAAC,CAACqK,MAAM,GAAC,IAAI,GAACrK,CAAC;EAAA;EAACkM,MAAMA,CAACnM,CAAC,EAACC,CAAC,EAAC;IAAC,IAAGa,CAAC,CAAC,IAAI,CAACoG,sBAAsB,CAAC,EAAC;IAAO,IAAI,CAACL,aAAa,CAACuF,kBAAkB,CAACpM,CAAC,CAACqM,MAAM,CAACC,UAAU,CAAC;IAAC,MAAMnM,CAAC,GAACH,CAAC,CAACqM,MAAM,CAACE,0BAA0B;MAAClM,CAAC,GAACyB,CAAC,EAAE;MAACxB,CAAC,GAAC,IAAIkC,CAAC;IAAC,IAAIhC,CAAC,GAAC,CAAC;MAACE,CAAC,GAAC,CAAC;IAAC,IAAG,IAAI,CAAC8F,UAAU,CAACqB,OAAO,CAAE1H,CAAC,IAAE;MAAC,IAAG,CAAC,KAAGA,CAAC,CAACuL,QAAQ,EAAC,IAAI,CAAClF,UAAU,CAAC4D,MAAM,CAACjK,CAAC,CAACqM,GAAG,CAAC,EAACrM,CAAC,CAACsM,OAAO,EAAE,CAAC,KAAI;QAAC,IAAIpM,CAAC,GAAC,CAAC,CAAC;UAACC,CAAC,GAAC,CAAC,CAAC;QAACH,CAAC,CAACuM,iBAAiB,CAAEzM,CAAC,IAAE;UAACA,CAAC,CAAC+L,OAAO,KAAGxL,CAAC,IAAEP,CAAC,CAACiL,UAAU,CAACyB,iBAAiB,EAACjM,CAAC,EAAE,EAACL,CAAC,IAAEJ,CAAC,CAAC2M,OAAO,KAAGzM,CAAC,CAAC0M,eAAe,CAAC7M,CAAC,EAAC,CAAC,CAAC,CAAC,EAACK,CAAC,GAAC,CAAC,CAAC,CAAC,EAACC,CAAC,IAAEL,CAAC,CAAC6M,UAAU,KAAG3M,CAAC,CAAC0M,eAAe,CAAC7M,CAAC,EAAC,CAAC,CAAC,CAAC,EAACM,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC;QAAA,CAAC,EAAEL,CAAC,CAAC;MAAA;IAAC,CAAC,CAAE,EAAC,IAAI,CAACiH,sBAAsB,CAAC6F,cAAc,EAAE,EAAC,IAAI,CAAC7F,sBAAsB,CAAC8F,cAAc,EAAE,EAAC,CAAC,KAAGtM,CAAC,EAAC;IAAO,MAAME,CAAC,GAAC,IAAI8D,CAAC,CAAC,EAAE,GAAClE,CAAC,GAACE,CAAC,EAACT,CAAC,CAAC;IAACF,CAAC,CAACM,CAAC,EAACF,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,EAAE,CAAC,CAAC,EAACG,CAAC,CAACgH,GAAG,CAACjH,CAAC,CAAC,EAACqB,CAAC,CAACd,CAAC,CAACqM,wBAAwB,EAAC3M,CAAC,CAAC4M,IAAI,CAAC,EAACxL,CAAC,CAACd,CAAC,CAACuM,wBAAwB,EAAC7M,CAAC,CAAC8M,GAAG,CAAC,EAAC9L,CAAC,CAACV,CAAC,CAACyM,iCAAiC,EAACrN,CAAC,CAACqM,MAAM,CAACC,UAAU,CAAC,EAAC/K,CAAC,CAAC+L,EAAE,EAAC1M,CAAC,CAACyM,iCAAiC,CAAC,EAAC7L,CAAC,CAACZ,CAAC,CAAC2M,6BAA6B,EAACD,EAAE,CAAC,EAAC1M,CAAC,CAAC4M,qBAAqB,GAACxN,CAAC,CAACqM,MAAM,CAACoB,gBAAgB,EAAC,IAAI,CAACC,4BAA4B,CAAC1N,CAAC,CAAC,EAAC,IAAI,CAACwG,UAAU,CAACqB,OAAO,CAAE5H,CAAC,IAAE;MAAC,IAAI,CAAC0N,mBAAmB,CAAC1N,CAAC,EAACD,CAAC,EAACY,CAAC,CAAC,EAAC,IAAI,CAACgN,sBAAsB,CAAC3N,CAAC,EAACD,CAAC,EAACY,CAAC,CAAC;IAAA,CAAC,CAAE;EAAA;EAACoK,mBAAmBA,CAAChL,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACmF,CAAC,CAACpF,CAAC,CAAC0K,UAAU,CAACC,IAAI,CAAC;MAACxK,CAAC,GAACmF,CAAC,CAACtF,CAAC,CAAC0K,UAAU,CAACC,IAAI,CAAC;IAAC1K,CAAC,KAAGD,CAAC,CAAC6N,gBAAgB,IAAE1N,CAAC,KAAGH,CAAC,CAAC8N,kBAAkB,KAAG9N,CAAC,CAAC6N,gBAAgB,GAAC5N,CAAC,EAACD,CAAC,CAAC8N,kBAAkB,GAAC3N,CAAC,EAAC,IAAI,CAACqG,UAAU,CAAC4C,GAAG,CAACpJ,CAAC,CAACuL,WAAW,CAAC,CAACwC,mBAAmB,EAAE,CAAC;EAAA;EAACC,qCAAqCA,CAAChO,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAACH,CAAC,CAACiO,+BAA+B,CAAChO,CAAC,EAACE,CAAC,CAAC;IAAC,MAAME,CAAC,GAACW,CAAC,CAACf,CAAC,CAACiO,WAAW,CAAC,GAAC,IAAI,CAACrH,aAAa,CAACsH,QAAQ,CAAClO,CAAC,CAACiO,WAAW,CAAC,GAAC,IAAI,CAACrH,aAAa,CAACuH,OAAO,CAACrO,CAAC,CAAC,IAAI,CAAC6G,iBAAiB,EAACzG,CAAC,CAAC,EAAE,CAAC,EAACA,CAAC,CAAC,EAAE,CAAC,EAACA,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAAC,OAAOF,CAAC,CAACiO,WAAW,GAAC7N,CAAC,CAACgO,MAAM,EAACzL,CAAC,CAACvC,CAAC,CAACgO,MAAM,CAACC,IAAI,EAACnO,CAAC,CAAC,EAACE,CAAC;EAAA;EAACuL,sBAAsBA,CAAC5L,CAAC,EAAC;IAAC,MAAK;QAAC2K,IAAI,EAAC1K,CAAC;QAACyH,MAAM,EAACvH;MAAC,CAAC,GAACH,CAAC;MAACK,CAAC,GAAC,IAAIkO,UAAU,CAAC,CAAC,CAAC;IAAC,KAAI,IAAIjO,CAAC,GAAC,CAAC,EAACA,CAAC,GAACL,CAAC,CAACqJ,MAAM,EAAChJ,CAAC,EAAE,EAAC;MAAC,MAAMN,CAAC,GAACC,CAAC,CAACK,CAAC,CAAC,CAAC0J,QAAQ;QAACtJ,CAAC,GAACT,CAAC,CAACK,CAAC,CAAC,CAACsK,KAAK;QAAChK,CAAC,GAACJ,CAAC,CAACgO,IAAI,CAACC,KAAK,CAACzO,CAAC,CAACqI,IAAI,GAAC/D,CAAC,CAAC,EAAC,CAAC,EAAC,GAAG,CAAC;QAACxD,CAAC,GAACN,CAAC,CAACR,CAAC,CAAC0O,eAAe,EAAC,CAAClK,CAAC,EAAC,GAAG,GAACA,CAAC,CAAC,GAACA,CAAC;QAACxD,CAAC,GAAC,OAAO,KAAGhB,CAAC,CAAC2O,IAAI,GAACzK,CAAC,CAAC0K,KAAK,GAAC1K,CAAC,CAAC2K,MAAM;QAAC3N,CAAC,GAAC,GAAG,GAAClB,CAAC,CAAC6K,OAAO;QAACzJ,CAAC,GAACpB,CAAC,CAAC8O,KAAK;QAACxN,CAAC,GAAC,GAAG,GAACF,CAAC,CAAC,CAAC,CAAC;QAACG,CAAC,GAAC,GAAG,GAACH,CAAC,CAAC,CAAC,CAAC;QAACI,CAAC,GAAC,GAAG,GAACJ,CAAC,CAAC,CAAC,CAAC;QAACK,CAAC,GAAC,GAAG,GAACL,CAAC,CAAC,CAAC,CAAC;MAACjB,CAAC,CAAC2K,aAAa,CAACiE,OAAO,CAACrO,CAAC,EAAC,CAAC,EAACY,CAAC,EAACC,CAAC,EAACC,CAAC,EAACC,CAAC,CAAC,EAACtB,CAAC,CAAC2K,aAAa,CAACiE,OAAO,CAACrO,CAAC,EAAC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,CAAC,EAACoB,CAAC,CAACrC,CAAC,CAACK,CAAC,CAAC,CAACwL,cAAc,EAACzL,CAAC,CAAC,EAACF,CAAC,CAAC2K,aAAa,CAACiE,OAAO,CAACrO,CAAC,EAAC,CAAC,EAACL,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,CAAC;IAAA;EAAC;EAAC2O,uBAAuBA,CAAChP,CAAC,EAAC;IAAC,IAAGc,CAAC,CAAC,IAAI,CAACoG,sBAAsB,CAAC,EAAC,OAAO,IAAI;IAAC,MAAMjH,CAAC,GAAC,IAAIyJ,KAAK;MAACvJ,CAAC,GAAC,IAAI,CAAC+G,sBAAsB,CAAC+H,SAAS,CAACjP,CAAC,CAACsJ,MAAM,CAAC;IAAC,KAAI,IAAIhJ,CAAC,GAAC,CAAC,EAACA,CAAC,GAACN,CAAC,CAACsJ,MAAM,EAAChJ,CAAC,EAAE,EAAC;MAAC,MAAMD,CAAC,GAACL,CAAC,CAACM,CAAC,CAAC;QAACE,CAAC,GAACL,CAAC,CAAC+O,YAAY,EAAE;MAACjP,CAAC,CAAC6J,IAAI,CAAC;QAACc,KAAK,EAACpK,CAAC;QAACsL,cAAc,EAAC,CAAC;QAAC9B,QAAQ,EAAC3J;MAAC,CAAC,CAAC;IAAA;IAAC,MAAMA,CAAC,GAAC,IAAI8O,EAAE,CAAChP,CAAC,EAACF,CAAC,CAAC;IAAC,OAAO,IAAI,CAAC2L,sBAAsB,CAACvL,CAAC,CAAC,EAACA,CAAC;EAAA;EAAC+O,aAAaA,CAACpP,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAAY;IAAA,IAAXE,CAAC,GAAA6O,SAAA,CAAA/F,MAAA,QAAA+F,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC/O,CAAC,CAACgJ,MAAM;IAAE,OAAO,IAAI,CAACtC,OAAO,CAACuI,OAAO,CAAC;MAACC,IAAI,EAACvP,CAAC;MAACwP,OAAO,EAACnP,CAAC;MAACoP,aAAa,EAAClP,CAAC;MAACmP,cAAc,EAAC3P,CAAC;MAAC4P,eAAe,EAACzP;IAAC,CAAC,EAAC,IAAI,CAACuG,YAAY,CAACmJ,MAAM,EAACxP,CAAC,CAAC;EAAA;EAACyP,iBAAiBA,CAAC9P,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAAC;IAAC,MAAME,CAAC,GAACP,CAAC,IAAEe,CAAC,CAAC,IAAI,CAACuG,qBAAqB,CAAC,GAAC,IAAIwI,EAAE,CAAC,IAAI7M,CAAC,CAAC,IAAI,CAACiE,IAAI,EAACzD,CAAC,EAAC;QAACsM,QAAQ,EAACpM,CAAC;QAACqM,SAAS,EAAChQ,CAAC,KAAG2F,EAAE,CAACsK,OAAO,GAACpM,CAAC,CAACqM,QAAQ,GAACnM,CAAC,CAACmM;MAAQ,CAAC,EAAC;QAACH,QAAQ,EAAC,IAAI,CAACzI,qBAAqB;QAAC0I,SAAS,EAACnK,EAAE,CAAC0B,YAAY,CAAC,IAAI,CAACL,IAAI,EAACnB,EAAE,CAACyB,WAAW,EAACxH,CAAC,KAAG2F,EAAE,CAACsK,OAAO,GAAClQ,CAAC,CAAC4M,OAAO,CAACwD,aAAa,CAAC1I,MAAM,GAAC1H,CAAC,CAAC8M,UAAU,CAACsD,aAAa,CAAC1I,MAAM;MAAC,CAAC,CAAC,EAACzH,CAAC,KAAG2F,EAAE,CAACsK,OAAO,GAAClQ,CAAC,CAAC4M,OAAO,CAACyD,OAAO,GAACrQ,CAAC,CAAC8M,UAAU,CAACuD,OAAO,CAAC,GAAC,IAAI;MAAC3P,CAAC,GAACV,CAAC,CAAC4M,OAAO,CAACyD,OAAO,CAACC,OAAO,CAAChH,MAAM,GAAC,CAAC,GAAC9I,CAAC,CAACoF,EAAE,CAACsK,OAAO,CAAC,GAAC,IAAI;MAACtP,CAAC,GAACZ,CAAC,CAAC8M,UAAU,CAACuD,OAAO,CAACC,OAAO,CAAChH,MAAM,GAAC,CAAC,GAAC9I,CAAC,CAACoF,EAAE,CAAC2K,UAAU,CAAC,GAAC,IAAI;MAACzP,CAAC,GAAC,CAACE,CAAC,CAACN,CAAC,CAAC,GAACA,CAAC,CAAC8P,GAAG,CAACnI,IAAI,GAAC,CAAC,KAAGrH,CAAC,CAACJ,CAAC,CAAC,GAACA,CAAC,CAAC4P,GAAG,CAACnI,IAAI,GAAC,CAAC,CAAC;IAAC,OAAO,IAAIoI,EAAE,CAAC/P,CAAC,EAACE,CAAC,EAAC;MAACuK,cAAc,EAACrK,CAAC;MAAC4P,mBAAmB,EAACpQ,CAAC;MAACqM,iBAAiB,EAAC3M,CAAC,CAAC2M;IAAiB,CAAC,EAACxM,CAAC,EAACiF,CAAC,CAACnF,CAAC,CAAC0K,IAAI,CAAC,EAACrF,CAAC,CAACrF,CAAC,CAAC0K,IAAI,CAAC,EAAC1K,CAAC,EAACI,CAAC,CAAC;EAAA;EAAC,MAAM6J,YAAYA,CAAClK,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAACP,CAAC,CAACwQ,gBAAgB,CAACvH,GAAG,CAAChG,CAAC,CAACwN,QAAQ,CAAC;MAAChQ,CAAC,GAACT,CAAC,CAACsP,OAAO,CAACrG,GAAG,CAAChG,CAAC,CAACwN,QAAQ,CAAC;MAAC9P,CAAC,GAACO,CAAC,EAAE;MAACL,CAAC,GAAC,IAAI,CAACgN,qCAAqC,CAAChO,CAAC,EAACG,CAAC,EAACW,CAAC,CAAC;MAACI,CAAC,GAAC,IAAI2P,EAAE,CAACnQ,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,CAAC;IAAC,OAAO,IAAI,CAAC8P,gBAAgB,CAAC7Q,CAAC,EAACiB,CAAC,EAACf,CAAC,CAAC4Q,iBAAiB,EAAC1Q,CAAC,EAACC,CAAC,EAACE,CAAC,CAAC;EAAA;EAAC,MAAMsQ,gBAAgBA,CAAC9Q,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAAM;IAAA,IAALE,CAAC,GAAA6O,SAAA,CAAA/F,MAAA,QAAA+F,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,CAAC,CAAC;IAAE,IAAG,IAAI,IAAErP,CAAC,CAACsK,MAAM,EAAC;IAAO,MAAM5J,CAAC,GAAC,IAAI,CAACsO,uBAAuB,CAAC,CAAC3O,CAAC,CAAC,CAAC;IAAC,IAAGS,CAAC,CAACJ,CAAC,CAAC,IAAEP,CAAC,IAAE,CAAC,EAAC;IAAO,MAAMS,CAAC,GAAC,IAAI,CAAC4K,gBAAgB,CAACnL,CAAC,CAACsO,IAAI,EAAC,CAAC,CAACrO,CAAC,CAAC+K,aAAa,EAAC,CAAC,CAAC,CAAC;MAAC;QAAC2F,cAAc,EAAChQ,CAAC;QAACqN,MAAM,EAACnN;MAAC,CAAC,GAACjB,CAAC;MAACmB,CAAC,GAACnB,CAAC,CAACwP,OAAO;MAACnO,CAAC,GAACrB,CAAC,CAACgR,QAAQ;MAAC1P,CAAC,GAACD,CAAC,CAACkO,IAAI,CAAClG,MAAM,GAAChI,CAAC,CAAC+G,IAAI;MAAC7G,CAAC,GAACgC,CAAC,CAAC4D,YAAY,CAAC7F,CAAC,CAAC;IAAC,KAAI,IAAIT,CAAC,GAAC,CAAC,EAACA,CAAC,GAACS,CAAC,EAACT,CAAC,EAAE,EAACU,CAAC,CAACyP,QAAQ,CAAC3J,GAAG,CAACxG,CAAC,EAAC,CAAC,EAACQ,CAAC,CAACkO,IAAI,CAAC1O,CAAC,GAACQ,CAAC,CAAC+G,IAAI,GAAC,CAAC,CAAC,CAAC,EAAC7G,CAAC,CAACyP,QAAQ,CAAC3J,GAAG,CAACxG,CAAC,EAAC,CAAC,EAACQ,CAAC,CAACkO,IAAI,CAAC1O,CAAC,GAACQ,CAAC,CAAC+G,IAAI,GAAC,CAAC,CAAC,CAAC,EAAC7G,CAAC,CAACyP,QAAQ,CAAC3J,GAAG,CAACxG,CAAC,EAAC,CAAC,EAACQ,CAAC,CAACkO,IAAI,CAAC1O,CAAC,GAACQ,CAAC,CAAC+G,IAAI,GAAC,CAAC,CAAC,CAAC;IAAC7C,CAAC,CAAC9E,CAAC,CAACiK,IAAI,EAAC,CAAC,CAAC,EAACnJ,CAAC,CAAC0P,cAAc,CAACC,KAAK,CAAC,EAAC3P,CAAC,CAAC0P,cAAc,CAAC;IAAC,MAAMzP,CAAC,GAAC,MAAM,IAAI,CAAC0E,gBAAgB,CAAC0C,UAAU,CAAC,IAAI,CAACuG,aAAa,CAACxO,CAAC,CAAC+O,cAAc,EAACnO,CAAC,EAAC,CAAC,CAAC,EAAChB,CAAC,EAACY,CAAC,EAACjB,CAAC,CAAC,CAAC;IAAC,IAAG,IAAI,IAAEH,CAAC,CAACsK,MAAM,EAAC;IAAO,MAAMjJ,CAAC,GAAC,IAAI,CAACyO,iBAAiB,CAACrO,CAAC,EAACf,CAAC,EAAC,IAAI0Q,EAAE,CAACpQ,CAAC,EAACE,CAAC,CAAC,EAACN,CAAC,CAAC4L,GAAG,EAAC,CAAC,CAAC,CAAC;IAACxM,CAAC,CAACqJ,WAAW,CAACS,IAAI,CAACzI,CAAC,CAAC,EAACT,CAAC,CAAC+K,aAAa,CAACtK,CAAC,CAAC,EAAC,IAAI,CAACoF,eAAe,IAAEpF,CAAC,CAAC6J,UAAU,CAACC,cAAc;EAAA;EAAC,MAAMrC,qBAAqBA,CAAC9I,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAG,IAAI,IAAET,CAAC,CAACqK,MAAM,EAAC,OAAO,CAAC;IAAC,MAAM1J,CAAC,GAAC,IAAI,CAACoO,uBAAuB,CAACxO,CAAC,CAAC;IAAC,IAAGM,CAAC,CAACF,CAAC,CAAC,EAAC,OAAO,CAAC;IAAC,MAAMI,CAAC,GAACkE,CAAC,CAAC1E,CAAC,CAAC;MAACU,CAAC,GAAC,IAAI,CAACsK,gBAAgB,CAACxK,CAAC,EAACN,CAAC,CAAC2K,aAAa,IAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;MAACjK,CAAC,GAACoC,CAAC,CAAC4D,YAAY,CAACjH,CAAC,CAACgR,KAAK,CAAC;IAACjP,CAAC,CAACd,CAAC,CAAC6P,QAAQ,EAAC9Q,CAAC,CAAC,EAACqF,CAAC,CAAC5E,CAAC,CAAC+J,IAAI,EAACrK,CAAC,EAACc,CAAC,CAAC8P,cAAc,EAAC7Q,CAAC,CAAC;IAAC,MAAMiB,CAAC,GAAC,CAAC,CAAC;MAACC,CAAC,GAACL,CAAC,CAACyO,cAAc;MAACnO,CAAC,GAAC,MAAM,IAAI,CAAC2E,gBAAgB,CAAC0C,UAAU,CAAC,IAAI,CAACuG,aAAa,CAAC7N,CAAC,EAACH,CAAC,EAACE,CAAC,EAAC,CAAC,CAAC,EAACjB,CAAC,CAAC,CAAC;IAAC,IAAG,IAAI,IAAEJ,CAAC,CAACqK,MAAM,EAAC,OAAO,CAAC;IAAC,MAAM7I,CAAC,GAAC,IAAI,CAACqO,iBAAiB,CAACtO,CAAC,EAACZ,CAAC,EAACZ,CAAC,EAACkB,CAAC,CAACsL,GAAG,EAAC,CAAC,CAAC,CAAC;IAAC,OAAOvM,CAAC,CAACoJ,WAAW,CAACS,IAAI,CAACrI,CAAC,CAAC,EAACP,CAAC,CAACyK,aAAa,CAAClK,CAAC,CAAC,EAACA,CAAC,CAACyJ,UAAU,CAACC,cAAc;EAAA;EAAC,MAAMpB,0BAA0BA,CAAC/J,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC,IAAI6F,GAAG;IAAC,IAAI3F,CAAC,GAAC,CAAC;MAACE,CAAC,GAAC,IAAI;MAACE,CAAC,GAAC,CAAC;IAAC,KAAI,IAAIO,CAAC,GAAC,CAAC,EAACA,CAAC,GAACrB,CAAC,CAAC4J,UAAU,CAACN,MAAM,EAACjI,CAAC,EAAE,EAAC;MAAC,MAAMpB,CAAC,GAACD,CAAC,CAAC4J,UAAU,CAACvI,CAAC,CAAC;MAAC,IAAG,CAACpB,CAAC,CAAC+J,QAAQ,CAACC,aAAa,EAAC;MAAS,CAACrJ,CAAC,IAAEX,CAAC,CAACiO,WAAW,KAAGtN,CAAC,GAACX,CAAC,CAAC;MAAC,MAAME,CAAC,GAACF,CAAC,CAAC0Q,gBAAgB,CAACvH,GAAG,CAAChG,CAAC,CAACwN,QAAQ,CAAC;MAAC9P,CAAC,IAAEX,CAAC,CAACqP,IAAI,CAAClG,MAAM,GAACnJ,CAAC,CAACkI,IAAI,EAAC3H,CAAC,IAAET,CAAC,CAAC8Q,iBAAiB;IAAA;IAAC,MAAM/P,CAAC,GAACF,CAAC,IAAE,KAAK,GAACuQ,WAAW,GAACC,WAAW;MAACpQ,CAAC,GAACR,CAAC,GAAC,IAAIM,CAAC,CAACN,CAAC,CAAC,GAAC,IAAI;MAACU,CAAC,GAAC,EAAE;IAAC,IAAIE,CAAC,GAAC,CAAC;IAAC,KAAI,IAAID,CAAC,GAAC,CAAC,EAACA,CAAC,GAACrB,CAAC,CAAC4J,UAAU,CAACN,MAAM,EAACjI,CAAC,EAAE,EAAC;MAAC,MAAMpB,CAAC,GAACD,CAAC,CAAC4J,UAAU,CAACvI,CAAC,CAAC;MAAC,IAAG,CAACpB,CAAC,CAAC+J,QAAQ,CAACC,aAAa,EAAC;MAAS,MAAM9J,CAAC,GAACF,CAAC,CAAC0Q,gBAAgB,CAACvH,GAAG,CAAChG,CAAC,CAACwN,QAAQ,CAAC;QAACvQ,CAAC,GAACJ,CAAC,CAACwP,OAAO,CAACrG,GAAG,CAAChG,CAAC,CAACwN,QAAQ,CAAC;MAAC,IAAItQ,CAAC,GAACE,CAAC,CAAC4I,GAAG,CAACjJ,CAAC,CAACqP,IAAI,CAAC;MAAC,IAAG,IAAI,IAAElP,CAAC,EAAC;QAACA,CAAC,GAACc,CAAC,CAACkI,MAAM,GAAC,CAAC;QAAC,KAAI,IAAItJ,CAAC,GAAC,CAAC,EAACA,CAAC,GAACG,CAAC,CAACqP,IAAI,CAAClG,MAAM,EAACtJ,CAAC,IAAEG,CAAC,CAACkI,IAAI,EAACjH,CAAC,CAAC0I,IAAI,CAAC3J,CAAC,CAACqP,IAAI,CAACxP,CAAC,GAAC,CAAC,CAAC,CAAC,EAACoB,CAAC,CAAC0I,IAAI,CAAC3J,CAAC,CAACqP,IAAI,CAACxP,CAAC,GAAC,CAAC,CAAC,CAAC,EAACoB,CAAC,CAAC0I,IAAI,CAAC3J,CAAC,CAACqP,IAAI,CAACxP,CAAC,GAAC,CAAC,CAAC,CAAC;QAACQ,CAAC,CAAC8G,GAAG,CAACnH,CAAC,CAACqP,IAAI,EAAClP,CAAC,CAAC;MAAA;MAAC,IAAGD,CAAC,EAAC,KAAI,IAAIL,CAAC,GAAC,CAAC,EAACA,CAAC,GAACC,CAAC,CAAC8Q,iBAAiB,EAAC/Q,CAAC,EAAE,EAACkB,CAAC,CAACI,CAAC,EAAE,CAAC,GAAChB,CAAC,GAACD,CAAC,CAACL,CAAC,CAAC;IAAA;IAAC,MAAMuB,CAAC,GAACX,CAAC,IAAEZ,CAAC,CAAC4J,UAAU,CAAC,CAAC,CAAC;MAACpI,CAAC,GAACH,CAAC,EAAE;MAACI,CAAC,GAAC,IAAI,CAACuM,qCAAqC,CAAChO,CAAC,EAACuB,CAAC,EAACC,CAAC,CAAC;IAAC,KAAI,IAAIH,CAAC,GAAC,CAAC,EAACA,CAAC,GAACrB,CAAC,CAAC4J,UAAU,CAACN,MAAM,EAACjI,CAAC,EAAE,EAACrB,CAAC,CAAC4J,UAAU,CAACvI,CAAC,CAAC,CAAC6M,WAAW,GAACzM,CAAC,CAAC4M,MAAM;IAAC,MAAMtO,CAAC,GAAC,IAAI8Q,EAAE,CAAC;MAACrB,IAAI,EAACpO,CAAC;MAACiH,IAAI,EAAC;IAAC,CAAC,EAACnH,CAAC,EAACM,CAAC,EAACC,CAAC,CAAC;IAAC,MAAM,IAAI,CAAC0E,gBAAgB,CAAC0C,UAAU,CAAC,IAAI,CAACiI,gBAAgB,CAAC7Q,CAAC,EAACF,CAAC,EAACmB,CAAC,CAACoI,MAAM,EAACnJ,CAAC,CAAC,CAAC,CAAC,EAACE,CAAC,EAACC,CAAC,CAAC,CAAC;EAAA;EAACkL,gBAAgBA,CAACxL,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAAC+D,CAAC,CAACkH,MAAM,CAACtL,CAAC,EAACC,CAAC,EAACE,CAAC,CAAC;IAAC,IAAIG,CAAC,GAAC,IAAI,CAACkG,UAAU,CAAC4C,GAAG,CAAC/I,CAAC,CAAC;IAAC,OAAOS,CAAC,CAAC,IAAI,CAACkH,eAAe,CAAC,KAAG,IAAI,CAACA,eAAe,GAAChD,CAAC,CAAC,IAAI,CAACmC,IAAI,CAAC,CAAC,EAAC7G,CAAC,KAAGA,CAAC,GAAC,IAAI8D,CAAC,CAAC,IAAI,CAAC+C,IAAI,EAAC,IAAI,CAACoK,mBAAmB,EAAC;MAAC5C,IAAI,EAAC3O,CAAC;MAACqL,aAAa,EAACpL,CAAC;MAACuR,cAAc,EAAC,IAAI,CAACxJ,eAAe;MAACyJ,MAAM,EAACtR,CAAC;MAACuR,SAAS,EAAC,IAAI,CAACC,WAAW,KAAGvP,CAAC,CAACwP;IAAM,CAAC,CAAC,EAAC,IAAI,CAACpL,UAAU,CAACc,GAAG,CAACjH,CAAC,EAACC,CAAC,CAAC,CAAC,EAAC,EAAEA,CAAC,CAACoL,QAAQ,EAACpL,CAAC;EAAA;EAAC+J,iBAAiBA,CAACrK,CAAC,EAAC;IAAC6R,EAAE,CAAC7R,CAAC,CAAC4M,OAAO,CAAC,EAACiF,EAAE,CAAC7R,CAAC,CAAC8M,UAAU,CAAC;IAAC,MAAM7M,CAAC,GAAC,IAAI,CAACuG,UAAU,CAAC4C,GAAG,CAACpJ,CAAC,CAACuL,WAAW,CAAC;IAAC,IAAGtL,CAAC,EAAC;MAACA,CAAC,CAACwL,gBAAgB,CAACzL,CAAC,CAAC,EAAC,EAAEC,CAAC,CAACyL,QAAQ,EAAC,QAAQ,IAAG1L,CAAC,CAAC8R,SAAS,IAAE,IAAI,CAACjL,aAAa,CAACkL,OAAO,CAAC/R,CAAC,CAAC8R,SAAS,CAACzD,MAAM,CAAC,EAAC,IAAI,CAAC5H,eAAe,IAAEzG,CAAC,CAACkL,UAAU,CAACwF,mBAAmB,GAAC,CAAC,GAAC1Q,CAAC,CAACkL,UAAU,CAACC,cAAc;MAAC,KAAI,MAAMlL,CAAC,IAAID,CAAC,CAAC0K,UAAU,CAACC,IAAI,EAAC3K,CAAC,CAAC0K,UAAU,CAAChD,MAAM,CAACsK,YAAY,CAAC/R,CAAC,CAAC2K,KAAK,CAAC;IAAA;EAAC;EAAC8C,4BAA4BA,CAAC1N,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACqM,MAAM,CAAC4F,GAAG;MAAC9R,CAAC,GAACH,CAAC,CAACqM,MAAM,CAAC6F,WAAW;MAAC7R,CAAC,GAACyB,CAAC,EAAE;MAACxB,CAAC,GAACN,CAAC,IAAE;QAAC4B,CAAC,CAACvB,CAAC,EAACL,CAAC,CAAC2I,MAAM,EAAC1I,CAAC,CAAC;QAAC,MAAMK,CAAC,GAACuB,CAAC,CAACxB,CAAC,EAACF,CAAC,CAAC;UAACK,CAAC,GAACR,CAAC,CAAC4I,MAAM;UAAClI,CAAC,GAACJ,CAAC,GAAC,CAACE,CAAC,GAAC,CAAC,GAAC,CAAC,GAACF,CAAC,GAACE,CAAC,GAAC,CAAC,GAACF,CAAC,GAACE,CAAC;QAACR,CAAC,CAACqJ,WAAW,CAACxB,OAAO,CAAE7H,CAAC,IAAEA,CAAC,CAACmS,gBAAgB,GAACzR,CAAC,CAAE;MAAA,CAAC;IAAC,IAAI,CAAC0F,cAAc,CAACyB,OAAO,CAACvH,CAAC,CAAC,EAAC,IAAI,CAACgG,2BAA2B,CAACuB,OAAO,CAACvH,CAAC,CAAC;EAAA;EAACqN,mBAAmBA,CAAC3N,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAACL,CAAC,CAACoS,gBAAgB,CAACjS,CAAC,EAACF,CAAC,CAAC;MAACK,CAAC,GAACH,CAAC,CAACkS,YAAY;MAAC7R,CAAC,GAACP,CAAC,CAACoM,MAAM,CAACiG,mBAAmB;IAACtS,CAAC,CAAC0M,iBAAiB,CAAEpM,CAAC,IAAE;MAAC,IAAG,CAACiS,EAAE,CAACjS,CAAC,CAAC,IAAE,CAACA,CAAC,CAAC0L,OAAO,EAAC;MAAO,MAAMtL,CAAC,GAAC8R,EAAE,CAAClS,CAAC,CAACsM,OAAO,CAAC6F,GAAG,CAACnC,OAAO,EAAChQ,CAAC,CAAC6R,gBAAgB,EAAC3R,CAAC,CAAC;MAACR,CAAC,CAAC0S,kBAAkB,CAACrS,CAAC,EAACC,CAAC,EAACH,CAAC,EAACF,CAAC,EAACS,CAAC,CAAC;IAAA,CAAC,EAAEJ,CAAC,CAAC;EAAA;EAACsN,sBAAsBA,CAAC5N,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAAC,MAAME,CAAC,GAACL,CAAC,CAAC2S,mBAAmB,CAACxS,CAAC,EAACF,CAAC,CAAC;MAACK,CAAC,GAACH,CAAC,CAACkS,YAAY;MAAC7R,CAAC,GAACP,CAAC,CAACoM,MAAM,CAACiG,mBAAmB;IAACtS,CAAC,CAAC0M,iBAAiB,CAAEpM,CAAC,IAAE;MAAC,IAAG,CAACsS,EAAE,CAACtS,CAAC,CAAC,IAAE,CAACA,CAAC,CAAC0L,OAAO,EAAC;MAAO,MAAMtL,CAAC,GAAC8R,EAAE,CAAClS,CAAC,CAACwM,UAAU,CAAC2F,GAAG,CAACnC,OAAO,EAAChQ,CAAC,CAAC6R,gBAAgB,EAAC3R,CAAC,CAAC;MAACR,CAAC,CAAC6S,qBAAqB,CAACxS,CAAC,EAACC,CAAC,EAACH,CAAC,EAACF,CAAC,EAACS,CAAC,CAAC;IAAA,CAAC,EAAEJ,CAAC,CAAC;EAAA;EAAC,IAAIwS,IAAIA,CAAA,EAAE;IAAC,OAAM;MAACC,qBAAqB,EAAC/S,CAAC,IAAE;QAAC,IAAIC,CAAC,GAAC,CAAC,CAAC;QAAC,MAAME,CAAC,GAACH,CAAC,CAACsS,mBAAmB;UAACjS,CAAC,GAACA,CAACL,CAAC,EAACK,CAAC,KAAGL,CAAC,CAAC0M,iBAAiB,CAAE1M,CAAC,IAAE;YAACA,CAAC,CAACgM,OAAO,IAAE,CAAC/L,CAAC,KAAGsS,EAAE,CAACvS,CAAC,CAAC,KAAGC,CAAC,GAACuS,EAAE,CAACxS,CAAC,CAAC4M,OAAO,CAAC6F,GAAG,CAACnC,OAAO,EAACtQ,CAAC,CAACmS,gBAAgB,EAAChS,CAAC,CAAC,GAAC,CAAC,CAAC,EAAC,CAACF,CAAC,IAAE2S,EAAE,CAAC5S,CAAC,CAAC,KAAGC,CAAC,GAACuS,EAAE,CAACxS,CAAC,CAAC8M,UAAU,CAAC2F,GAAG,CAACnC,OAAO,EAACtQ,CAAC,CAACmS,gBAAgB,EAAChS,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC;UAAA,CAAC,EAAEE,CAAC,CAAC;QAAC,OAAO,IAAI,CAACmG,UAAU,CAACqB,OAAO,CAAE7H,CAAC,IAAE;UAACC,CAAC,KAAGI,CAAC,CAACL,CAAC,EAAC8E,CAAC,CAACkO,MAAM,CAAC,EAAC3S,CAAC,CAACL,CAAC,EAAC8E,CAAC,CAACmO,WAAW,CAAC,CAAC;QAAA,CAAC,CAAE,EAAChT,CAAC;MAAA;IAAC,CAAC;EAAA;AAAC,CAAC;AAAC,SAAS4R,EAAEA,CAAC7R,CAAC,EAAC;EAACgB,CAAC,CAAChB,CAAC,CAAC,KAAGA,CAAC,CAACwQ,GAAG,CAAC0C,aAAa,CAACjD,SAAS,CAACxD,OAAO,EAAE,EAACzM,CAAC,CAACwQ,GAAG,CAAC/D,OAAO,CAAC,CAAC,CAAC,CAAC,EAACzM,CAAC,CAACwQ,GAAG,GAAC,IAAI,CAAC;AAAA;AAAC,SAAS3G,EAAEA,CAAC7J,CAAC,EAAC;EAAC,IAAIC,CAAC,GAAC,IAAI;IAACI,CAAC,GAAC,IAAI;EAAC,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAACN,CAAC,CAAC4J,UAAU,CAACN,MAAM,EAAChJ,CAAC,EAAE,EAAC;IAAC,MAAME,CAAC,GAACR,CAAC,CAAC4J,UAAU,CAACtJ,CAAC,CAAC;IAAC,IAAGE,CAAC,CAACwJ,QAAQ,CAACC,aAAa,EAAC;MAAC,IAAGhK,CAAC,EAAC;QAAC,IAAG,CAACE,CAAC,CAACF,CAAC,EAACO,CAAC,CAAC2S,cAAc,CAAC,EAAC,OAAM,CAAC,CAAC;MAAA,CAAC,MAAKlT,CAAC,GAACO,CAAC,CAAC2S,cAAc;MAAC,IAAG,CAAC9S,CAAC,IAAEW,CAAC,CAACR,CAAC,CAAC0N,WAAW,CAAC,EAAC7N,CAAC,GAACG,CAAC,CAAC,KAAK,IAAGH,CAAC,IAAEW,CAAC,CAACX,CAAC,CAAC6N,WAAW,CAAC,IAAElN,CAAC,CAACR,CAAC,CAAC0N,WAAW,CAAC,IAAE7N,CAAC,CAAC6N,WAAW,CAACkF,EAAE,KAAG5S,CAAC,CAAC0N,WAAW,CAACkF,EAAE,EAAC,OAAM,CAAC,CAAC;IAAA;EAAC;EAAC,OAAM,CAAC,CAAC;AAAA;AAACpT,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACmS,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACpN,EAAE,CAACqN,SAAS,EAAC,MAAM,EAAC,KAAK,CAAC,CAAC,EAACtT,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACmS,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACpN,EAAE,CAACqN,SAAS,EAAC,UAAU,EAAC,KAAK,CAAC,CAAC,EAACtT,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACmS,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACpN,EAAE,CAACqN,SAAS,EAAC,aAAa,EAAC,KAAK,CAAC,CAAC,EAACtT,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACmS,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACpN,EAAE,CAACqN,SAAS,EAAC,qBAAqB,EAAC,KAAK,CAAC,CAAC,EAACtT,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACmS,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACpN,EAAE,CAACqN,SAAS,EAAC,gBAAgB,EAAC,KAAK,CAAC,CAAC,EAACtT,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACmS,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACpN,EAAE,CAACqN,SAAS,EAAC,UAAU,EAAC,KAAK,CAAC,CAAC,EAACtT,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACqS,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACtN,EAAE,CAACqN,SAAS,EAAC,kBAAkB,EAAC,KAAK,CAAC,CAAC,EAACtT,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACqS,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACtN,EAAE,CAACqN,SAAS,EAAC,UAAU,EAAC,IAAI,CAAC,EAACrN,EAAE,GAACjG,CAAC,CAAC,CAACoB,CAAC,CAAC,uDAAuD,CAAC,CAAC,EAAC6E,EAAE,CAAC;AAAC,MAAMwC,EAAE;EAACvC,WAAWA,CAAClG,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;IAAC,IAAI,CAACwI,MAAM,GAAC1I,CAAC,EAAC,IAAI,CAAC2I,MAAM,GAACzI,CAAC,EAAC,IAAI,CAACkJ,WAAW,GAAC,IAAIK,KAAK,IAAC,IAAI,CAACY,MAAM,GAACtK,CAAC,EAAC,IAAI,CAACsK,MAAM,CAACkJ,IAAI,CAAE,MAAI;MAAC,IAAI,IAAE,IAAI,CAAClJ,MAAM,KAAG,IAAI,CAACA,MAAM,GAAC,CAAC,CAAC,CAAC;IAAA,CAAC,CAAE;EAAA;AAAC;AAAC,MAAM6E,EAAE;EAACjJ,WAAWA,CAAClG,CAAC,EAACC,CAAC,EAAC;IAAC,IAAI,CAACyH,MAAM,GAAC1H,CAAC,EAAC,IAAI,CAAC2K,IAAI,GAAC1K,CAAC;EAAA;AAAC;AAAC,MAAM8P,EAAE;EAAC7J,WAAWA,CAAClG,CAAC,EAACC,CAAC,EAAC;IAAC,IAAI,CAACuQ,GAAG,GAACxQ,CAAC,EAAC,IAAI,CAACyS,GAAG,GAACxS,CAAC;EAAA;AAAC;AAAC,MAAMmR,EAAE;EAAClL,WAAWA,CAAClG,CAAC,EAACC,CAAC,EAAC;IAAC,IAAI,CAACwT,WAAW,GAACzT,CAAC,EAAC,IAAI,CAACqO,MAAM,GAACpO,CAAC;EAAA;AAAC;AAAC,MAAMwQ,EAAE;EAACvK,WAAWA,CAAClG,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAI,CAACgM,OAAO,GAAC5M,CAAC,EAAC,IAAI,CAAC8M,UAAU,GAAC7M,CAAC,EAAC,IAAI,CAACiL,UAAU,GAAC/K,CAAC,EAAC,IAAI,CAAC2R,SAAS,GAACzR,CAAC,EAAC,IAAI,CAACwN,gBAAgB,GAACvN,CAAC,EAAC,IAAI,CAACwN,kBAAkB,GAACtN,CAAC,EAAC,IAAI,CAACkK,UAAU,GAAChK,CAAC,EAAC,IAAI,CAAC6K,WAAW,GAAC3K,CAAC,EAAC,IAAI,CAACuR,gBAAgB,GAAC,CAAC,EAAC,IAAI,CAACnG,OAAO,GAAC,CAAC,CAAC;EAAA;AAAC;AAAC,MAAM0H,EAAE,SAASjD,EAAE;AAAE,SAAS8B,EAAEA,CAACvS,CAAC,EAAC;EAAC,OAAOgB,CAAC,CAAChB,CAAC,CAAC4M,OAAO,CAAC;AAAA;AAAC,MAAM+G,EAAE,SAASlD,EAAE;AAAE,SAASmC,EAAEA,CAAC5S,CAAC,EAAC;EAAC,OAAOgB,CAAC,CAAChB,CAAC,CAAC8M,UAAU,CAAC;AAAA;AAAC,SAAS0F,EAAEA,CAACxS,CAAC,EAACC,CAAC,EAACE,CAAC,EAAC;EAAC,MAAMG,CAAC,GAACL,CAAC,GAACE,CAAC;IAACK,CAAC,GAACH,CAAC,CAACL,CAAC,EAACM,CAAC,EAAC,CAAC,CAAC,CAAC;EAAC,OAAM,CAAC,CAAC,KAAGE,CAAC,GAACF,CAAC,GAACN,CAAC,CAAC,CAAC,CAAC,GAACA,CAAC,CAACsJ,MAAM,GAAC,CAAC,GAACtJ,CAAC,CAACsJ,MAAM,GAAC9I,CAAC;AAAA;AAAC,MAAMqQ,EAAE;EAAC3K,WAAWA,CAAClG,CAAC,EAACC,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAI,CAAC4Q,QAAQ,GAACjR,CAAC,EAAC,IAAI,CAACyP,OAAO,GAACxP,CAAC,EAAC,IAAI,CAAC+Q,cAAc,GAAC7Q,CAAC,EAAC,IAAI,CAACkO,MAAM,GAAChO,CAAC;EAAA;AAAC;AAAC,MAAMiN,EAAE,GAAC7L,CAAC,EAAE;AAAC,SAAOwE,EAAE,IAAI2N,QAAQ,EAACxC,EAAE,IAAIyC,eAAe,EAACH,EAAE,IAAII,iBAAiB,EAACrD,EAAE,IAAIsD,UAAU,EAACJ,EAAE,IAAIK,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}