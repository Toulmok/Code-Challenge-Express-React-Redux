{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../request.js\";\nimport r from \"../../core/Error.js\";\nimport { isNone as o } from \"../../core/maybe.js\";\nimport { isDataProtocol as s, isBlobProtocol as i, isAbsolute as n, dataToBlob as a, join as m } from \"../../core/urlUtils.js\";\nimport { generateUUID as p } from \"../../core/uuid.js\";\nimport { property as c } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { reader as l } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as u } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as d } from \"../../core/accessorSupport/decorators/writer.js\";\nimport f from \"./MediaElementBase.js\";\nimport { getResourceContentExtension as g } from \"../../portal/support/resourceExtension.js\";\nimport { f as h, t as y, i as v, M as j } from \"../../chunks/persistableUrlUtils.js\";\nlet I = class extends f {\n  constructor(e) {\n    super(e), this.content = null, this.image = null, this.type = \"image\", this.image = null;\n  }\n  load() {\n    const e = this.image;\n    if (\"string\" == typeof e) {\n      const r = t(e, {\n        responseType: \"image\"\n      }).then(_ref => {\n        let {\n          data: e\n        } = _ref;\n        this._set(\"content\", e);\n      });\n      this.addResolvingPromise(r);\n    } else if (e instanceof HTMLImageElement) {\n      const t = e.decode().then(() => {\n        this._set(\"content\", e);\n      });\n      this.addResolvingPromise(t);\n    } else e ? this._set(\"content\", e) : this.addResolvingPromise(Promise.reject(new r(\"image-element:invalid-image-type\", \"Invalid image type\", {\n      image: e\n    })));\n    return Promise.resolve(this);\n  }\n  readImage(e, t, r) {\n    return h(t.url, r);\n  }\n  writeImage(e, t, r, a) {\n    if (o(e)) return;\n    const m = a?.portalItem,\n      p = a?.resources;\n    if (!m || !p) return void (\"string\" == typeof e && (t[r] = y(e, a)));\n    const c = \"string\" != typeof e || s(e) || i(e) ? null : e;\n    if (c) {\n      if (null == v(c)) return void (t[r] = c);\n      const e = y(c, {\n        ...a,\n        verifyItemRelativeUrls: a && a.verifyItemRelativeUrls ? {\n          writtenUrls: a.verifyItemRelativeUrls.writtenUrls,\n          rootPath: void 0\n        } : void 0\n      }, j.NO);\n      if (m && e && !n(e)) return p.toKeep.push({\n        resource: m.resourceFromPath(e),\n        compress: !1\n      }), void (t[r] = e);\n    }\n    t[r] = \"<pending>\", p.pendingOperations.push(E(e).then(e => {\n      const o = U(e, m);\n      t[r] = o.itemRelativeUrl, p.toAdd.push({\n        resource: o,\n        content: e,\n        compress: !1,\n        finish: e => {\n          this.image = e.url;\n        }\n      });\n    }));\n  }\n};\ne([c({\n  readOnly: !0\n})], I.prototype, \"content\", void 0), e([c({\n  json: {\n    name: \"url\",\n    type: String\n  }\n})], I.prototype, \"image\", void 0), e([l(\"image\", [\"url\"])], I.prototype, \"readImage\", null), e([d(\"image\")], I.prototype, \"writeImage\", null), e([c({\n  readOnly: !0,\n  json: {\n    name: \"mediaType\"\n  }\n})], I.prototype, \"type\", void 0), I = e([u(\"esri.layers.support.ImageElement\")], I);\nconst w = I;\nasync function E(e) {\n  if (\"string\" == typeof e) {\n    if (i(e)) {\n      const {\n        data: r\n      } = await t(e, {\n        responseType: \"blob\"\n      });\n      return r;\n    }\n    if (s(e)) return a(e);\n    return E((await t(e, {\n      responseType: \"image\"\n    })).data);\n  }\n  return new Promise(t => T(e).toBlob(t));\n}\nfunction T(e) {\n  if (e instanceof HTMLCanvasElement) return e;\n  const t = e instanceof HTMLImageElement ? e.naturalWidth : e.width,\n    r = e instanceof HTMLImageElement ? e.naturalHeight : e.height,\n    o = document.createElement(\"canvas\"),\n    s = o.getContext(\"2d\");\n  return o.width = t, o.height = r, e instanceof HTMLImageElement ? s.drawImage(e, 0, 0, e.width, e.height) : e instanceof ImageData && s.putImageData(e, 0, 0), o;\n}\nfunction U(e, t) {\n  const r = p(),\n    o = `${m(\"media\", r)}.${g(e)}`;\n  return t.resourceFromPath(o);\n}\nexport { w as default };","map":{"version":3,"names":["_","e","t","r","isNone","o","isDataProtocol","s","isBlobProtocol","i","isAbsolute","n","dataToBlob","a","join","m","generateUUID","p","property","c","reader","l","subclass","u","writer","d","f","getResourceContentExtension","g","h","y","v","M","j","I","constructor","content","image","type","load","responseType","then","_ref","data","_set","addResolvingPromise","HTMLImageElement","decode","Promise","reject","resolve","readImage","url","writeImage","portalItem","resources","verifyItemRelativeUrls","writtenUrls","rootPath","NO","toKeep","push","resource","resourceFromPath","compress","pendingOperations","E","U","itemRelativeUrl","toAdd","finish","readOnly","prototype","json","name","String","w","T","toBlob","HTMLCanvasElement","naturalWidth","width","naturalHeight","height","document","createElement","getContext","drawImage","ImageData","putImageData","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/support/ImageElement.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import r from\"../../core/Error.js\";import{isNone as o}from\"../../core/maybe.js\";import{isDataProtocol as s,isBlobProtocol as i,isAbsolute as n,dataToBlob as a,join as m}from\"../../core/urlUtils.js\";import{generateUUID as p}from\"../../core/uuid.js\";import{property as c}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../../core/accessorSupport/decorators/writer.js\";import f from\"./MediaElementBase.js\";import{getResourceContentExtension as g}from\"../../portal/support/resourceExtension.js\";import{f as h,t as y,i as v,M as j}from\"../../chunks/persistableUrlUtils.js\";let I=class extends f{constructor(e){super(e),this.content=null,this.image=null,this.type=\"image\",this.image=null}load(){const e=this.image;if(\"string\"==typeof e){const r=t(e,{responseType:\"image\"}).then((({data:e})=>{this._set(\"content\",e)}));this.addResolvingPromise(r)}else if(e instanceof HTMLImageElement){const t=e.decode().then((()=>{this._set(\"content\",e)}));this.addResolvingPromise(t)}else e?this._set(\"content\",e):this.addResolvingPromise(Promise.reject(new r(\"image-element:invalid-image-type\",\"Invalid image type\",{image:e})));return Promise.resolve(this)}readImage(e,t,r){return h(t.url,r)}writeImage(e,t,r,a){if(o(e))return;const m=a?.portalItem,p=a?.resources;if(!m||!p)return void(\"string\"==typeof e&&(t[r]=y(e,a)));const c=\"string\"!=typeof e||s(e)||i(e)?null:e;if(c){if(null==v(c))return void(t[r]=c);const e=y(c,{...a,verifyItemRelativeUrls:a&&a.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},j.NO);if(m&&e&&!n(e))return p.toKeep.push({resource:m.resourceFromPath(e),compress:!1}),void(t[r]=e)}t[r]=\"<pending>\",p.pendingOperations.push(E(e).then((e=>{const o=U(e,m);t[r]=o.itemRelativeUrl,p.toAdd.push({resource:o,content:e,compress:!1,finish:e=>{this.image=e.url}})})))}};e([c({readOnly:!0})],I.prototype,\"content\",void 0),e([c({json:{name:\"url\",type:String}})],I.prototype,\"image\",void 0),e([l(\"image\",[\"url\"])],I.prototype,\"readImage\",null),e([d(\"image\")],I.prototype,\"writeImage\",null),e([c({readOnly:!0,json:{name:\"mediaType\"}})],I.prototype,\"type\",void 0),I=e([u(\"esri.layers.support.ImageElement\")],I);const w=I;async function E(e){if(\"string\"==typeof e){if(i(e)){const{data:r}=await t(e,{responseType:\"blob\"});return r}if(s(e))return a(e);return E((await t(e,{responseType:\"image\"})).data)}return new Promise((t=>T(e).toBlob(t)))}function T(e){if(e instanceof HTMLCanvasElement)return e;const t=e instanceof HTMLImageElement?e.naturalWidth:e.width,r=e instanceof HTMLImageElement?e.naturalHeight:e.height,o=document.createElement(\"canvas\"),s=o.getContext(\"2d\");return o.width=t,o.height=r,e instanceof HTMLImageElement?s.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&s.putImageData(e,0,0),o}function U(e,t){const r=p(),o=`${m(\"media\",r)}.${g(e)}`;return t.resourceFromPath(o)}export{w as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,2BAA2B;AAAC,OAAOC,CAAC,MAAK,kBAAkB;AAAC,OAAOC,CAAC,MAAK,qBAAqB;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,qBAAqB;AAAC,SAAOC,cAAc,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,EAACC,UAAU,IAAIC,CAAC,EAACC,IAAI,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,oBAAoB;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,mDAAmD;AAAC,OAAM,0CAA0C;AAAC,OAAM,0BAA0B;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,iDAAiD;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,mDAAmD;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,iDAAiD;AAAC,OAAOC,CAAC,MAAK,uBAAuB;AAAC,SAAOC,2BAA2B,IAAIC,CAAC,QAAK,2CAA2C;AAAC,SAAOF,CAAC,IAAIG,CAAC,EAAC3B,CAAC,IAAI4B,CAAC,EAACrB,CAAC,IAAIsB,CAAC,EAACC,CAAC,IAAIC,CAAC,QAAK,qCAAqC;AAAC,IAAIC,CAAC,GAAC,cAAcR,CAAC;EAACS,WAAWA,CAAClC,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC,EAAC,IAAI,CAACmC,OAAO,GAAC,IAAI,EAAC,IAAI,CAACC,KAAK,GAAC,IAAI,EAAC,IAAI,CAACC,IAAI,GAAC,OAAO,EAAC,IAAI,CAACD,KAAK,GAAC,IAAI;EAAA;EAACE,IAAIA,CAAA,EAAE;IAAC,MAAMtC,CAAC,GAAC,IAAI,CAACoC,KAAK;IAAC,IAAG,QAAQ,IAAE,OAAOpC,CAAC,EAAC;MAAC,MAAME,CAAC,GAACD,CAAC,CAACD,CAAC,EAAC;QAACuC,YAAY,EAAC;MAAO,CAAC,CAAC,CAACC,IAAI,CAAEC,IAAA,IAAY;QAAA,IAAX;UAACC,IAAI,EAAC1C;QAAC,CAAC,GAAAyC,IAAA;QAAI,IAAI,CAACE,IAAI,CAAC,SAAS,EAAC3C,CAAC,CAAC;MAAA,CAAC,CAAE;MAAC,IAAI,CAAC4C,mBAAmB,CAAC1C,CAAC,CAAC;IAAA,CAAC,MAAK,IAAGF,CAAC,YAAY6C,gBAAgB,EAAC;MAAC,MAAM5C,CAAC,GAACD,CAAC,CAAC8C,MAAM,EAAE,CAACN,IAAI,CAAE,MAAI;QAAC,IAAI,CAACG,IAAI,CAAC,SAAS,EAAC3C,CAAC,CAAC;MAAA,CAAC,CAAE;MAAC,IAAI,CAAC4C,mBAAmB,CAAC3C,CAAC,CAAC;IAAA,CAAC,MAAKD,CAAC,GAAC,IAAI,CAAC2C,IAAI,CAAC,SAAS,EAAC3C,CAAC,CAAC,GAAC,IAAI,CAAC4C,mBAAmB,CAACG,OAAO,CAACC,MAAM,CAAC,IAAI9C,CAAC,CAAC,kCAAkC,EAAC,oBAAoB,EAAC;MAACkC,KAAK,EAACpC;IAAC,CAAC,CAAC,CAAC,CAAC;IAAC,OAAO+C,OAAO,CAACE,OAAO,CAAC,IAAI,CAAC;EAAA;EAACC,SAASA,CAAClD,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAAC,OAAO0B,CAAC,CAAC3B,CAAC,CAACkD,GAAG,EAACjD,CAAC,CAAC;EAAA;EAACkD,UAAUA,CAACpD,CAAC,EAACC,CAAC,EAACC,CAAC,EAACU,CAAC,EAAC;IAAC,IAAGR,CAAC,CAACJ,CAAC,CAAC,EAAC;IAAO,MAAMc,CAAC,GAACF,CAAC,EAAEyC,UAAU;MAACrC,CAAC,GAACJ,CAAC,EAAE0C,SAAS;IAAC,IAAG,CAACxC,CAAC,IAAE,CAACE,CAAC,EAAC,OAAO,MAAK,QAAQ,IAAE,OAAOhB,CAAC,KAAGC,CAAC,CAACC,CAAC,CAAC,GAAC2B,CAAC,CAAC7B,CAAC,EAACY,CAAC,CAAC,CAAC,CAAC;IAAC,MAAMM,CAAC,GAAC,QAAQ,IAAE,OAAOlB,CAAC,IAAEM,CAAC,CAACN,CAAC,CAAC,IAAEQ,CAAC,CAACR,CAAC,CAAC,GAAC,IAAI,GAACA,CAAC;IAAC,IAAGkB,CAAC,EAAC;MAAC,IAAG,IAAI,IAAEY,CAAC,CAACZ,CAAC,CAAC,EAAC,OAAO,MAAKjB,CAAC,CAACC,CAAC,CAAC,GAACgB,CAAC,CAAC;MAAC,MAAMlB,CAAC,GAAC6B,CAAC,CAACX,CAAC,EAAC;QAAC,GAAGN,CAAC;QAAC2C,sBAAsB,EAAC3C,CAAC,IAAEA,CAAC,CAAC2C,sBAAsB,GAAC;UAACC,WAAW,EAAC5C,CAAC,CAAC2C,sBAAsB,CAACC,WAAW;UAACC,QAAQ,EAAC,KAAK;QAAC,CAAC,GAAC,KAAK;MAAC,CAAC,EAACzB,CAAC,CAAC0B,EAAE,CAAC;MAAC,IAAG5C,CAAC,IAAEd,CAAC,IAAE,CAACU,CAAC,CAACV,CAAC,CAAC,EAAC,OAAOgB,CAAC,CAAC2C,MAAM,CAACC,IAAI,CAAC;QAACC,QAAQ,EAAC/C,CAAC,CAACgD,gBAAgB,CAAC9D,CAAC,CAAC;QAAC+D,QAAQ,EAAC,CAAC;MAAC,CAAC,CAAC,EAAC,MAAK9D,CAAC,CAACC,CAAC,CAAC,GAACF,CAAC,CAAC;IAAA;IAACC,CAAC,CAACC,CAAC,CAAC,GAAC,WAAW,EAACc,CAAC,CAACgD,iBAAiB,CAACJ,IAAI,CAACK,CAAC,CAACjE,CAAC,CAAC,CAACwC,IAAI,CAAExC,CAAC,IAAE;MAAC,MAAMI,CAAC,GAAC8D,CAAC,CAAClE,CAAC,EAACc,CAAC,CAAC;MAACb,CAAC,CAACC,CAAC,CAAC,GAACE,CAAC,CAAC+D,eAAe,EAACnD,CAAC,CAACoD,KAAK,CAACR,IAAI,CAAC;QAACC,QAAQ,EAACzD,CAAC;QAAC+B,OAAO,EAACnC,CAAC;QAAC+D,QAAQ,EAAC,CAAC,CAAC;QAACM,MAAM,EAACrE,CAAC,IAAE;UAAC,IAAI,CAACoC,KAAK,GAACpC,CAAC,CAACmD,GAAG;QAAA;MAAC,CAAC,CAAC;IAAA,CAAC,CAAE,CAAC;EAAA;AAAC,CAAC;AAACnD,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACoD,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACrC,CAAC,CAACsC,SAAS,EAAC,SAAS,EAAC,KAAK,CAAC,CAAC,EAACvE,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACsD,IAAI,EAAC;IAACC,IAAI,EAAC,KAAK;IAACpC,IAAI,EAACqC;EAAM;AAAC,CAAC,CAAC,CAAC,EAACzC,CAAC,CAACsC,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAACvE,CAAC,CAAC,CAACoB,CAAC,CAAC,OAAO,EAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAACa,CAAC,CAACsC,SAAS,EAAC,WAAW,EAAC,IAAI,CAAC,EAACvE,CAAC,CAAC,CAACwB,CAAC,CAAC,OAAO,CAAC,CAAC,EAACS,CAAC,CAACsC,SAAS,EAAC,YAAY,EAAC,IAAI,CAAC,EAACvE,CAAC,CAAC,CAACkB,CAAC,CAAC;EAACoD,QAAQ,EAAC,CAAC,CAAC;EAACE,IAAI,EAAC;IAACC,IAAI,EAAC;EAAW;AAAC,CAAC,CAAC,CAAC,EAACxC,CAAC,CAACsC,SAAS,EAAC,MAAM,EAAC,KAAK,CAAC,CAAC,EAACtC,CAAC,GAACjC,CAAC,CAAC,CAACsB,CAAC,CAAC,kCAAkC,CAAC,CAAC,EAACW,CAAC,CAAC;AAAC,MAAM0C,CAAC,GAAC1C,CAAC;AAAC,eAAegC,CAACA,CAACjE,CAAC,EAAC;EAAC,IAAG,QAAQ,IAAE,OAAOA,CAAC,EAAC;IAAC,IAAGQ,CAAC,CAACR,CAAC,CAAC,EAAC;MAAC,MAAK;QAAC0C,IAAI,EAACxC;MAAC,CAAC,GAAC,MAAMD,CAAC,CAACD,CAAC,EAAC;QAACuC,YAAY,EAAC;MAAM,CAAC,CAAC;MAAC,OAAOrC,CAAC;IAAA;IAAC,IAAGI,CAAC,CAACN,CAAC,CAAC,EAAC,OAAOY,CAAC,CAACZ,CAAC,CAAC;IAAC,OAAOiE,CAAC,CAAC,CAAC,MAAMhE,CAAC,CAACD,CAAC,EAAC;MAACuC,YAAY,EAAC;IAAO,CAAC,CAAC,EAAEG,IAAI,CAAC;EAAA;EAAC,OAAO,IAAIK,OAAO,CAAE9C,CAAC,IAAE2E,CAAC,CAAC5E,CAAC,CAAC,CAAC6E,MAAM,CAAC5E,CAAC,CAAC,CAAE;AAAA;AAAC,SAAS2E,CAACA,CAAC5E,CAAC,EAAC;EAAC,IAAGA,CAAC,YAAY8E,iBAAiB,EAAC,OAAO9E,CAAC;EAAC,MAAMC,CAAC,GAACD,CAAC,YAAY6C,gBAAgB,GAAC7C,CAAC,CAAC+E,YAAY,GAAC/E,CAAC,CAACgF,KAAK;IAAC9E,CAAC,GAACF,CAAC,YAAY6C,gBAAgB,GAAC7C,CAAC,CAACiF,aAAa,GAACjF,CAAC,CAACkF,MAAM;IAAC9E,CAAC,GAAC+E,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAAC9E,CAAC,GAACF,CAAC,CAACiF,UAAU,CAAC,IAAI,CAAC;EAAC,OAAOjF,CAAC,CAAC4E,KAAK,GAAC/E,CAAC,EAACG,CAAC,CAAC8E,MAAM,GAAChF,CAAC,EAACF,CAAC,YAAY6C,gBAAgB,GAACvC,CAAC,CAACgF,SAAS,CAACtF,CAAC,EAAC,CAAC,EAAC,CAAC,EAACA,CAAC,CAACgF,KAAK,EAAChF,CAAC,CAACkF,MAAM,CAAC,GAAClF,CAAC,YAAYuF,SAAS,IAAEjF,CAAC,CAACkF,YAAY,CAACxF,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,EAACI,CAAC;AAAA;AAAC,SAAS8D,CAACA,CAAClE,CAAC,EAACC,CAAC,EAAC;EAAC,MAAMC,CAAC,GAACc,CAAC,EAAE;IAACZ,CAAC,GAAE,GAAEU,CAAC,CAAC,OAAO,EAACZ,CAAC,CAAE,IAAGyB,CAAC,CAAC3B,CAAC,CAAE,EAAC;EAAC,OAAOC,CAAC,CAAC6D,gBAAgB,CAAC1D,CAAC,CAAC;AAAA;AAAC,SAAOuE,CAAC,IAAIc,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}