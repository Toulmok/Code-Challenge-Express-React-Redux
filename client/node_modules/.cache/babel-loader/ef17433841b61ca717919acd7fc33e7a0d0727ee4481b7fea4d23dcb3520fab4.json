{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../../../chunks/tslib.es6.js\";\nimport s from \"../../../core/Accessor.js\";\nimport t from \"../../../core/Collection.js\";\nimport o from \"../../../core/Logger.js\";\nimport { isNone as e, abortMaybe as n, destroyMaybe as a } from \"../../../core/maybe.js\";\nimport { on as r } from \"../../../core/reactiveUtils.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as m } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { AnalysisView3D as p } from \"./AnalysisView3D.js\";\nimport { DimensionController as d } from \"./Dimension/DimensionController.js\";\nimport { DimensionTool as c } from \"./Dimension/DimensionTool.js\";\nimport { DimensionVisualization as u } from \"./Dimension/DimensionVisualization.js\";\nimport { LengthDimensionComputation as h } from \"./Dimension/LengthDimensionComputation.js\";\nimport { applyProjectionAndElevationAlignment as y, logFailedGeometryProjectionError as _ } from \"./support/projectionUtils.js\";\nimport { connectAnalysisViewToTool as D, removeAnalysisViewTool as f, activateAnalysisViewTool as v } from \"../../analysis/analysisViewUtils.js\";\nimport j from \"../../analysis/DimensionAnalysisView.js\";\nlet g = class extends j(p(s)) {\n  constructor(i) {\n    super(i), this.type = \"dimension-view-3d\", this.tool = null, this.computations = new t(), this.selectedDimension = null, this._dimensionsToComputations = new Map(), this._placementTask = null, this._projectAndAlignPoint = null;\n  }\n  initialize() {\n    this._projectAndAlignPoint = i => {\n      if (e(i)) return null;\n      const {\n          spatialReference: s,\n          elevationProvider: t\n        } = this.view,\n        n = y(i, s, t);\n      return e(n) && _(this.analysis, i.spatialReference, o.getLogger(this.declaredClass)), n;\n    }, this.addHandles([D(this, c), r(() => this.analysis.dimensions, \"after-add\", i => this._onDimensionAdd(i.item), {\n      onListenerAdd: i => {\n        for (const s of i) this._onDimensionAdd(s);\n      },\n      onListenerRemove: () => {\n        this._onDimensionsClear();\n      }\n    }), r(() => this.analysis.dimensions, \"after-remove\", i => this._onDimensionRemove(i.item))]), this._analysisVisualization = new u({\n      analysisViewData: this,\n      view: this.view\n    }), this._analysisController = new d({\n      analysisViewData: this,\n      view: this.view\n    });\n  }\n  destroy() {\n    this._placementTask = n(this._placementTask), this._analysisVisualization = a(this._analysisVisualization), f(this);\n  }\n  get updating() {\n    return this._analysisVisualization?.loadingMessages ?? !1;\n  }\n  get results() {\n    return this.analysis.dimensions.map(i => this._dimensionsToComputations.get(i).result);\n  }\n  get selectedComputation() {\n    const {\n      selectedDimension: i\n    } = this;\n    return e(i) ? null : this._dimensionsToComputations.get(i);\n  }\n  get testInfo() {\n    return {\n      visualization: this._analysisVisualization,\n      controller: this._analysisController\n    };\n  }\n  async createLengthDimensions(i) {\n    return this.selectedDimension = null, this._placementTask = n(this._placementTask), this._placementTask = v(this, i), this._placementTask.promise;\n  }\n  _onDimensionAdd(i) {\n    const {\n      computations: s,\n      _dimensionsToComputations: t\n    } = this;\n    if (t.has(i)) return;\n    const o = new h({\n      dimension: i,\n      projectAndAlignPoint: this._projectAndAlignPoint\n    });\n    s.add(o), t.set(i, o);\n  }\n  _onDimensionRemove(i) {\n    const {\n        computations: s,\n        _dimensionsToComputations: t\n      } = this,\n      o = s.findIndex(s => s.dimension === i),\n      e = s.getItemAt(o);\n    e.dimension === this.selectedDimension && (this.selectedDimension = null), s.removeAt(o), t.delete(i), a(e);\n  }\n  _onDimensionsClear() {\n    this.computations.drain(i => i.destroy()), this._dimensionsToComputations.clear();\n  }\n};\ni([l({\n  readOnly: !0\n})], g.prototype, \"type\", void 0), i([l()], g.prototype, \"tool\", void 0), i([l()], g.prototype, \"updating\", null), i([l({\n  readOnly: !0\n})], g.prototype, \"results\", null), i([l({\n  readOnly: !0\n})], g.prototype, \"computations\", void 0), i([l()], g.prototype, \"selectedDimension\", void 0), i([l()], g.prototype, \"selectedComputation\", null), i([l()], g.prototype, \"_analysisVisualization\", void 0), i([l()], g.prototype, \"_analysisController\", void 0), i([l()], g.prototype, \"_dimensionsToComputations\", void 0), i([l()], g.prototype, \"_placementTask\", void 0), g = i([m(\"esri.views.3d.analysis.DimensionAnalysisView3D\")], g);\nconst w = g;\nexport { w as default };","map":{"version":3,"names":["_","i","s","t","o","isNone","e","abortMaybe","n","destroyMaybe","a","on","r","property","l","subclass","m","AnalysisView3D","p","DimensionController","d","DimensionTool","c","DimensionVisualization","u","LengthDimensionComputation","h","applyProjectionAndElevationAlignment","y","logFailedGeometryProjectionError","connectAnalysisViewToTool","D","removeAnalysisViewTool","f","activateAnalysisViewTool","v","j","g","constructor","type","tool","computations","selectedDimension","_dimensionsToComputations","Map","_placementTask","_projectAndAlignPoint","initialize","spatialReference","elevationProvider","view","analysis","getLogger","declaredClass","addHandles","dimensions","_onDimensionAdd","item","onListenerAdd","onListenerRemove","_onDimensionsClear","_onDimensionRemove","_analysisVisualization","analysisViewData","_analysisController","destroy","updating","loadingMessages","results","map","get","result","selectedComputation","testInfo","visualization","controller","createLengthDimensions","promise","has","dimension","projectAndAlignPoint","add","set","findIndex","getItemAt","removeAt","delete","drain","clear","readOnly","prototype","w","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/analysis/DimensionAnalysisView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Accessor.js\";import t from\"../../../core/Collection.js\";import o from\"../../../core/Logger.js\";import{isNone as e,abortMaybe as n,destroyMaybe as a}from\"../../../core/maybe.js\";import{on as r}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as m}from\"../../../core/accessorSupport/decorators/subclass.js\";import{AnalysisView3D as p}from\"./AnalysisView3D.js\";import{DimensionController as d}from\"./Dimension/DimensionController.js\";import{DimensionTool as c}from\"./Dimension/DimensionTool.js\";import{DimensionVisualization as u}from\"./Dimension/DimensionVisualization.js\";import{LengthDimensionComputation as h}from\"./Dimension/LengthDimensionComputation.js\";import{applyProjectionAndElevationAlignment as y,logFailedGeometryProjectionError as _}from\"./support/projectionUtils.js\";import{connectAnalysisViewToTool as D,removeAnalysisViewTool as f,activateAnalysisViewTool as v}from\"../../analysis/analysisViewUtils.js\";import j from\"../../analysis/DimensionAnalysisView.js\";let g=class extends(j(p(s))){constructor(i){super(i),this.type=\"dimension-view-3d\",this.tool=null,this.computations=new t,this.selectedDimension=null,this._dimensionsToComputations=new Map,this._placementTask=null,this._projectAndAlignPoint=null}initialize(){this._projectAndAlignPoint=i=>{if(e(i))return null;const{spatialReference:s,elevationProvider:t}=this.view,n=y(i,s,t);return e(n)&&_(this.analysis,i.spatialReference,o.getLogger(this.declaredClass)),n},this.addHandles([D(this,c),r((()=>this.analysis.dimensions),\"after-add\",(i=>this._onDimensionAdd(i.item)),{onListenerAdd:i=>{for(const s of i)this._onDimensionAdd(s)},onListenerRemove:()=>{this._onDimensionsClear()}}),r((()=>this.analysis.dimensions),\"after-remove\",(i=>this._onDimensionRemove(i.item)))]),this._analysisVisualization=new u({analysisViewData:this,view:this.view}),this._analysisController=new d({analysisViewData:this,view:this.view})}destroy(){this._placementTask=n(this._placementTask),this._analysisVisualization=a(this._analysisVisualization),f(this)}get updating(){return this._analysisVisualization?.loadingMessages??!1}get results(){return this.analysis.dimensions.map((i=>this._dimensionsToComputations.get(i).result))}get selectedComputation(){const{selectedDimension:i}=this;return e(i)?null:this._dimensionsToComputations.get(i)}get testInfo(){return{visualization:this._analysisVisualization,controller:this._analysisController}}async createLengthDimensions(i){return this.selectedDimension=null,this._placementTask=n(this._placementTask),this._placementTask=v(this,i),this._placementTask.promise}_onDimensionAdd(i){const{computations:s,_dimensionsToComputations:t}=this;if(t.has(i))return;const o=new h({dimension:i,projectAndAlignPoint:this._projectAndAlignPoint});s.add(o),t.set(i,o)}_onDimensionRemove(i){const{computations:s,_dimensionsToComputations:t}=this,o=s.findIndex((s=>s.dimension===i)),e=s.getItemAt(o);e.dimension===this.selectedDimension&&(this.selectedDimension=null),s.removeAt(o),t.delete(i),a(e)}_onDimensionsClear(){this.computations.drain((i=>i.destroy())),this._dimensionsToComputations.clear()}};i([l({readOnly:!0})],g.prototype,\"type\",void 0),i([l()],g.prototype,\"tool\",void 0),i([l()],g.prototype,\"updating\",null),i([l({readOnly:!0})],g.prototype,\"results\",null),i([l({readOnly:!0})],g.prototype,\"computations\",void 0),i([l()],g.prototype,\"selectedDimension\",void 0),i([l()],g.prototype,\"selectedComputation\",null),i([l()],g.prototype,\"_analysisVisualization\",void 0),i([l()],g.prototype,\"_analysisController\",void 0),i([l()],g.prototype,\"_dimensionsToComputations\",void 0),i([l()],g.prototype,\"_placementTask\",void 0),g=i([m(\"esri.views.3d.analysis.DimensionAnalysisView3D\")],g);const w=g;export{w as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}