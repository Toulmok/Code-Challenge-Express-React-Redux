{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { d as e, f as s } from \"./vec4f64.js\";\nimport { ScreenSpacePass as a } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";\nimport { ReadLinearDepth as o } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";\nimport { CameraSpace as r } from \"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";\nimport { RgbaFloatEncoding as i } from \"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";\nimport { Float4PassUniform as t } from \"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";\nimport { FloatPassUniform as l } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { NoParameters as n, glsl as d } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as c } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as m } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nimport { a as h } from \"./ShadowCastAccumulate.glsl.js\";\nimport { ShadowCastVisualization as p } from \"../views/3d/webgl-engine/shaders/ShadowCastVisualizeTechniqueConfiguration.js\";\nclass u extends n {\n  constructor(s) {\n    super(), this.shadowCastMap = s, this.sampleScale = 0, this.opacityFromElevation = 1, this.color = e(g), this.bandSize = .1, this.threshold = .5;\n  }\n}\nconst g = s(.01, 0, .25, 1);\nfunction w(e) {\n  const s = new c(),\n    n = s.fragment;\n  n.include(i), n.include(o), s.include(r), s.include(a);\n  const {\n    visualization: u,\n    bandsEnabled: g\n  } = e;\n  n.constants.add(\"inverseSampleValue\", \"float\", h), n.uniforms.add([new m(\"shadowCastMap\", e => e.shadowCastMap), new l(\"sampleScale\", e => e.sampleScale), new l(\"opacityFromElevation\", e => e.opacityFromElevation), new t(\"uColor\", e => e.color)]);\n  const w = u === p.Gradient,\n    f = u === p.Threshold;\n  return w && g ? n.uniforms.add(new l(\"bandSize\", e => e.bandSize)) : f && n.uniforms.add(new l(\"threshold\", e => e.threshold)), n.code.add(d`\n      void main(void) {\n        vec4 record = texture2D(shadowCastMap, uv);\n        float pixelSamples = record.r * inverseSampleValue;\n        if (pixelSamples < 1.0) {\n          discard;\n        }\n\n        float strength = pixelSamples * sampleScale;\n\n        ${f ? d`\n            if (strength <= threshold) {\n              discard;\n            }` : \"\"}\n\n        ${w && g ? d`strength = ceil(strength / bandSize) * bandSize;` : \"\"}\n\n        gl_FragColor = vec4(uColor.xyz, uColor.a * opacityFromElevation ${w ? d`* strength` : \"\"});\n      }\n    `), s;\n}\nconst f = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  ShadowCastVisualizePassParameters: u,\n  build: w\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { u as S, f as a, w as b };","map":{"version":3,"names":["d","e","f","s","ScreenSpacePass","a","ReadLinearDepth","o","CameraSpace","r","RgbaFloatEncoding","i","Float4PassUniform","t","FloatPassUniform","l","NoParameters","n","glsl","ShaderBuilder","c","Texture2DPassUniform","m","h","ShadowCastVisualization","p","u","constructor","shadowCastMap","sampleScale","opacityFromElevation","color","g","bandSize","threshold","w","fragment","include","visualization","bandsEnabled","constants","add","uniforms","Gradient","Threshold","code","Object","freeze","defineProperty","__proto__","ShadowCastVisualizePassParameters","build","Symbol","toStringTag","value","S","b"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/chunks/ShadowCastVisualize.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{d as e,f as s}from\"./vec4f64.js\";import{ScreenSpacePass as a}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadLinearDepth as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{CameraSpace as r}from\"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";import{RgbaFloatEncoding as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float4PassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{NoParameters as n,glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as c}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{a as h}from\"./ShadowCastAccumulate.glsl.js\";import{ShadowCastVisualization as p}from\"../views/3d/webgl-engine/shaders/ShadowCastVisualizeTechniqueConfiguration.js\";class u extends n{constructor(s){super(),this.shadowCastMap=s,this.sampleScale=0,this.opacityFromElevation=1,this.color=e(g),this.bandSize=.1,this.threshold=.5}}const g=s(.01,0,.25,1);function w(e){const s=new c,n=s.fragment;n.include(i),n.include(o),s.include(r),s.include(a);const{visualization:u,bandsEnabled:g}=e;n.constants.add(\"inverseSampleValue\",\"float\",h),n.uniforms.add([new m(\"shadowCastMap\",(e=>e.shadowCastMap)),new l(\"sampleScale\",(e=>e.sampleScale)),new l(\"opacityFromElevation\",(e=>e.opacityFromElevation)),new t(\"uColor\",(e=>e.color))]);const w=u===p.Gradient,f=u===p.Threshold;return w&&g?n.uniforms.add(new l(\"bandSize\",(e=>e.bandSize))):f&&n.uniforms.add(new l(\"threshold\",(e=>e.threshold))),n.code.add(d`\n      void main(void) {\n        vec4 record = texture2D(shadowCastMap, uv);\n        float pixelSamples = record.r * inverseSampleValue;\n        if (pixelSamples < 1.0) {\n          discard;\n        }\n\n        float strength = pixelSamples * sampleScale;\n\n        ${f?d`\n            if (strength <= threshold) {\n              discard;\n            }`:\"\"}\n\n        ${w&&g?d`strength = ceil(strength / bandSize) * bandSize;`:\"\"}\n\n        gl_FragColor = vec4(uColor.xyz, uColor.a * opacityFromElevation ${w?d`* strength`:\"\"});\n      }\n    `),s}const f=Object.freeze(Object.defineProperty({__proto__:null,ShadowCastVisualizePassParameters:u,build:w},Symbol.toStringTag,{value:\"Module\"}));export{u as S,f as a,w as b};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}