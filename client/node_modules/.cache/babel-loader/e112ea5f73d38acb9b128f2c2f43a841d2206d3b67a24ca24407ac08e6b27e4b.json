{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { clamp as t } from \"../../../core/mathUtils.js\";\nimport { isNone as a } from \"../../../core/maybe.js\";\nimport { ElevationSamplerData as o } from \"../../../layers/support/ElevationSamplerData.js\";\nimport { bilerp as r } from \"../support/mathUtils.js\";\nimport { ELEVATION_NODATA_VALUE as s } from \"./TerrainConst.js\";\nclass i {\n  constructor(t, a, r) {\n    this.type = \"elevation\", this.level = t[0], this.i = t[1], this.j = t[2], this.extent = a, this.samplerData = new o(r, a);\n  }\n  computeMinMaxValue(t, a, o, i) {\n    i.min = 1 / 0, i.max = -1 / 0, i.hasNoDataValues = !1;\n    const e = t - this.level;\n    if (e <= 0) return i;\n    const l = 2 ** e;\n    if (!(Math.floor(a / l) === this.i && Math.floor(o / l) === this.j)) return i;\n    let n = 1 / 0,\n      h = -1 / 0;\n    const m = this.samplerData.data.width,\n      f = this.samplerData.data.values,\n      c = .5 * s;\n    let u = (m - 1) / l,\n      p = (o - this.j * l) * u,\n      M = (a - this.i * l) * u;\n    if (u < 1) {\n      const t = Math.floor(p),\n        a = Math.floor(M),\n        o = t + a * m,\n        s = f[o],\n        e = f[o + 1],\n        l = f[o + m],\n        n = f[o + m + 1];\n      if (s + e + l + n < c) {\n        const o = p - t,\n          h = M - a,\n          m = r(s, e, l, n, o, h),\n          f = r(s, e, l, n, o + u, h),\n          c = r(s, e, l, n, o, h + u),\n          x = r(s, e, l, n, o + u, h + u);\n        return i.min = Math.min(m, f, c, x), i.max = Math.max(m, f, c, x), i;\n      }\n      p = t, M = a, u = 1;\n    } else p = Math.floor(p), M = Math.floor(M), u = Math.ceil(u);\n    for (let r = p; r <= p + u; r++) for (let t = M; t <= M + u; t++) {\n      const a = f[r + t * m];\n      a < c ? (n = Math.min(n, a), h = Math.max(h, a)) : i.hasNoDataValues = !0;\n    }\n    return i.min = n, i.max = h, i;\n  }\n}\nconst e = .5 * s;\nfunction l(o, r, s) {\n  if (a(s)) return null;\n  for (const a of s) {\n    if (!a) continue;\n    const s = a.safeWidth;\n    let i = t(a.dy * (a.y1 - r), 0, s),\n      l = t(a.dx * (o - a.x0), 0, s);\n    const n = Math.floor(i),\n      h = Math.floor(l),\n      m = a.data.width,\n      f = n * m + h,\n      c = a.data.values,\n      u = c[f],\n      p = c[f + 1],\n      M = f + m,\n      x = c[M],\n      d = c[M + 1];\n    if (u + x + p + d < e) {\n      i -= n, l -= h;\n      const t = u + (p - u) * l;\n      return t + (x + (d - x) * l - t) * i;\n    }\n  }\n  return null;\n}\nexport { i as ElevationData, l as sampleElevation };","map":{"version":3,"names":["clamp","t","isNone","a","ElevationSamplerData","o","bilerp","r","ELEVATION_NODATA_VALUE","s","i","constructor","type","level","j","extent","samplerData","computeMinMaxValue","min","max","hasNoDataValues","e","l","Math","floor","n","h","m","data","width","f","values","c","u","p","M","x","ceil","safeWidth","dy","y1","dx","x0","d","ElevationData","sampleElevation"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/terrain/ElevationData.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../core/mathUtils.js\";import{isNone as a}from\"../../../core/maybe.js\";import{ElevationSamplerData as o}from\"../../../layers/support/ElevationSamplerData.js\";import{bilerp as r}from\"../support/mathUtils.js\";import{ELEVATION_NODATA_VALUE as s}from\"./TerrainConst.js\";class i{constructor(t,a,r){this.type=\"elevation\",this.level=t[0],this.i=t[1],this.j=t[2],this.extent=a,this.samplerData=new o(r,a)}computeMinMaxValue(t,a,o,i){i.min=1/0,i.max=-1/0,i.hasNoDataValues=!1;const e=t-this.level;if(e<=0)return i;const l=2**e;if(!(Math.floor(a/l)===this.i&&Math.floor(o/l)===this.j))return i;let n=1/0,h=-1/0;const m=this.samplerData.data.width,f=this.samplerData.data.values,c=.5*s;let u=(m-1)/l,p=(o-this.j*l)*u,M=(a-this.i*l)*u;if(u<1){const t=Math.floor(p),a=Math.floor(M),o=t+a*m,s=f[o],e=f[o+1],l=f[o+m],n=f[o+m+1];if(s+e+l+n<c){const o=p-t,h=M-a,m=r(s,e,l,n,o,h),f=r(s,e,l,n,o+u,h),c=r(s,e,l,n,o,h+u),x=r(s,e,l,n,o+u,h+u);return i.min=Math.min(m,f,c,x),i.max=Math.max(m,f,c,x),i}p=t,M=a,u=1}else p=Math.floor(p),M=Math.floor(M),u=Math.ceil(u);for(let r=p;r<=p+u;r++)for(let t=M;t<=M+u;t++){const a=f[r+t*m];a<c?(n=Math.min(n,a),h=Math.max(h,a)):i.hasNoDataValues=!0}return i.min=n,i.max=h,i}}const e=.5*s;function l(o,r,s){if(a(s))return null;for(const a of s){if(!a)continue;const s=a.safeWidth;let i=t(a.dy*(a.y1-r),0,s),l=t(a.dx*(o-a.x0),0,s);const n=Math.floor(i),h=Math.floor(l),m=a.data.width,f=n*m+h,c=a.data.values,u=c[f],p=c[f+1],M=f+m,x=c[M],d=c[M+1];if(u+x+p+d<e){i-=n,l-=h;const t=u+(p-u)*l;return t+(x+(d-x)*l-t)*i}}return null}export{i as ElevationData,l as sampleElevation};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,KAAK,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,wBAAwB;AAAC,SAAOC,oBAAoB,IAAIC,CAAC,QAAK,iDAAiD;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,yBAAyB;AAAC,SAAOC,sBAAsB,IAAIC,CAAC,QAAK,mBAAmB;AAAC,MAAMC,CAAC;EAACC,WAAWA,CAACV,CAAC,EAACE,CAAC,EAACI,CAAC,EAAC;IAAC,IAAI,CAACK,IAAI,GAAC,WAAW,EAAC,IAAI,CAACC,KAAK,GAACZ,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACS,CAAC,GAACT,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACa,CAAC,GAACb,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACc,MAAM,GAACZ,CAAC,EAAC,IAAI,CAACa,WAAW,GAAC,IAAIX,CAAC,CAACE,CAAC,EAACJ,CAAC,CAAC;EAAA;EAACc,kBAAkBA,CAAChB,CAAC,EAACE,CAAC,EAACE,CAAC,EAACK,CAAC,EAAC;IAACA,CAAC,CAACQ,GAAG,GAAC,CAAC,GAAC,CAAC,EAACR,CAAC,CAACS,GAAG,GAAC,CAAC,CAAC,GAAC,CAAC,EAACT,CAAC,CAACU,eAAe,GAAC,CAAC,CAAC;IAAC,MAAMC,CAAC,GAACpB,CAAC,GAAC,IAAI,CAACY,KAAK;IAAC,IAAGQ,CAAC,IAAE,CAAC,EAAC,OAAOX,CAAC;IAAC,MAAMY,CAAC,GAAC,CAAC,IAAED,CAAC;IAAC,IAAG,EAAEE,IAAI,CAACC,KAAK,CAACrB,CAAC,GAACmB,CAAC,CAAC,KAAG,IAAI,CAACZ,CAAC,IAAEa,IAAI,CAACC,KAAK,CAACnB,CAAC,GAACiB,CAAC,CAAC,KAAG,IAAI,CAACR,CAAC,CAAC,EAAC,OAAOJ,CAAC;IAAC,IAAIe,CAAC,GAAC,CAAC,GAAC,CAAC;MAACC,CAAC,GAAC,CAAC,CAAC,GAAC,CAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACX,WAAW,CAACY,IAAI,CAACC,KAAK;MAACC,CAAC,GAAC,IAAI,CAACd,WAAW,CAACY,IAAI,CAACG,MAAM;MAACC,CAAC,GAAC,EAAE,GAACvB,CAAC;IAAC,IAAIwB,CAAC,GAAC,CAACN,CAAC,GAAC,CAAC,IAAEL,CAAC;MAACY,CAAC,GAAC,CAAC7B,CAAC,GAAC,IAAI,CAACS,CAAC,GAACQ,CAAC,IAAEW,CAAC;MAACE,CAAC,GAAC,CAAChC,CAAC,GAAC,IAAI,CAACO,CAAC,GAACY,CAAC,IAAEW,CAAC;IAAC,IAAGA,CAAC,GAAC,CAAC,EAAC;MAAC,MAAMhC,CAAC,GAACsB,IAAI,CAACC,KAAK,CAACU,CAAC,CAAC;QAAC/B,CAAC,GAACoB,IAAI,CAACC,KAAK,CAACW,CAAC,CAAC;QAAC9B,CAAC,GAACJ,CAAC,GAACE,CAAC,GAACwB,CAAC;QAAClB,CAAC,GAACqB,CAAC,CAACzB,CAAC,CAAC;QAACgB,CAAC,GAACS,CAAC,CAACzB,CAAC,GAAC,CAAC,CAAC;QAACiB,CAAC,GAACQ,CAAC,CAACzB,CAAC,GAACsB,CAAC,CAAC;QAACF,CAAC,GAACK,CAAC,CAACzB,CAAC,GAACsB,CAAC,GAAC,CAAC,CAAC;MAAC,IAAGlB,CAAC,GAACY,CAAC,GAACC,CAAC,GAACG,CAAC,GAACO,CAAC,EAAC;QAAC,MAAM3B,CAAC,GAAC6B,CAAC,GAACjC,CAAC;UAACyB,CAAC,GAACS,CAAC,GAAChC,CAAC;UAACwB,CAAC,GAACpB,CAAC,CAACE,CAAC,EAACY,CAAC,EAACC,CAAC,EAACG,CAAC,EAACpB,CAAC,EAACqB,CAAC,CAAC;UAACI,CAAC,GAACvB,CAAC,CAACE,CAAC,EAACY,CAAC,EAACC,CAAC,EAACG,CAAC,EAACpB,CAAC,GAAC4B,CAAC,EAACP,CAAC,CAAC;UAACM,CAAC,GAACzB,CAAC,CAACE,CAAC,EAACY,CAAC,EAACC,CAAC,EAACG,CAAC,EAACpB,CAAC,EAACqB,CAAC,GAACO,CAAC,CAAC;UAACG,CAAC,GAAC7B,CAAC,CAACE,CAAC,EAACY,CAAC,EAACC,CAAC,EAACG,CAAC,EAACpB,CAAC,GAAC4B,CAAC,EAACP,CAAC,GAACO,CAAC,CAAC;QAAC,OAAOvB,CAAC,CAACQ,GAAG,GAACK,IAAI,CAACL,GAAG,CAACS,CAAC,EAACG,CAAC,EAACE,CAAC,EAACI,CAAC,CAAC,EAAC1B,CAAC,CAACS,GAAG,GAACI,IAAI,CAACJ,GAAG,CAACQ,CAAC,EAACG,CAAC,EAACE,CAAC,EAACI,CAAC,CAAC,EAAC1B,CAAC;MAAA;MAACwB,CAAC,GAACjC,CAAC,EAACkC,CAAC,GAAChC,CAAC,EAAC8B,CAAC,GAAC,CAAC;IAAA,CAAC,MAAKC,CAAC,GAACX,IAAI,CAACC,KAAK,CAACU,CAAC,CAAC,EAACC,CAAC,GAACZ,IAAI,CAACC,KAAK,CAACW,CAAC,CAAC,EAACF,CAAC,GAACV,IAAI,CAACc,IAAI,CAACJ,CAAC,CAAC;IAAC,KAAI,IAAI1B,CAAC,GAAC2B,CAAC,EAAC3B,CAAC,IAAE2B,CAAC,GAACD,CAAC,EAAC1B,CAAC,EAAE,EAAC,KAAI,IAAIN,CAAC,GAACkC,CAAC,EAAClC,CAAC,IAAEkC,CAAC,GAACF,CAAC,EAAChC,CAAC,EAAE,EAAC;MAAC,MAAME,CAAC,GAAC2B,CAAC,CAACvB,CAAC,GAACN,CAAC,GAAC0B,CAAC,CAAC;MAACxB,CAAC,GAAC6B,CAAC,IAAEP,CAAC,GAACF,IAAI,CAACL,GAAG,CAACO,CAAC,EAACtB,CAAC,CAAC,EAACuB,CAAC,GAACH,IAAI,CAACJ,GAAG,CAACO,CAAC,EAACvB,CAAC,CAAC,IAAEO,CAAC,CAACU,eAAe,GAAC,CAAC,CAAC;IAAA;IAAC,OAAOV,CAAC,CAACQ,GAAG,GAACO,CAAC,EAACf,CAAC,CAACS,GAAG,GAACO,CAAC,EAAChB,CAAC;EAAA;AAAC;AAAC,MAAMW,CAAC,GAAC,EAAE,GAACZ,CAAC;AAAC,SAASa,CAACA,CAACjB,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;EAAC,IAAGN,CAAC,CAACM,CAAC,CAAC,EAAC,OAAO,IAAI;EAAC,KAAI,MAAMN,CAAC,IAAIM,CAAC,EAAC;IAAC,IAAG,CAACN,CAAC,EAAC;IAAS,MAAMM,CAAC,GAACN,CAAC,CAACmC,SAAS;IAAC,IAAI5B,CAAC,GAACT,CAAC,CAACE,CAAC,CAACoC,EAAE,IAAEpC,CAAC,CAACqC,EAAE,GAACjC,CAAC,CAAC,EAAC,CAAC,EAACE,CAAC,CAAC;MAACa,CAAC,GAACrB,CAAC,CAACE,CAAC,CAACsC,EAAE,IAAEpC,CAAC,GAACF,CAAC,CAACuC,EAAE,CAAC,EAAC,CAAC,EAACjC,CAAC,CAAC;IAAC,MAAMgB,CAAC,GAACF,IAAI,CAACC,KAAK,CAACd,CAAC,CAAC;MAACgB,CAAC,GAACH,IAAI,CAACC,KAAK,CAACF,CAAC,CAAC;MAACK,CAAC,GAACxB,CAAC,CAACyB,IAAI,CAACC,KAAK;MAACC,CAAC,GAACL,CAAC,GAACE,CAAC,GAACD,CAAC;MAACM,CAAC,GAAC7B,CAAC,CAACyB,IAAI,CAACG,MAAM;MAACE,CAAC,GAACD,CAAC,CAACF,CAAC,CAAC;MAACI,CAAC,GAACF,CAAC,CAACF,CAAC,GAAC,CAAC,CAAC;MAACK,CAAC,GAACL,CAAC,GAACH,CAAC;MAACS,CAAC,GAACJ,CAAC,CAACG,CAAC,CAAC;MAACQ,CAAC,GAACX,CAAC,CAACG,CAAC,GAAC,CAAC,CAAC;IAAC,IAAGF,CAAC,GAACG,CAAC,GAACF,CAAC,GAACS,CAAC,GAACtB,CAAC,EAAC;MAACX,CAAC,IAAEe,CAAC,EAACH,CAAC,IAAEI,CAAC;MAAC,MAAMzB,CAAC,GAACgC,CAAC,GAAC,CAACC,CAAC,GAACD,CAAC,IAAEX,CAAC;MAAC,OAAOrB,CAAC,GAAC,CAACmC,CAAC,GAAC,CAACO,CAAC,GAACP,CAAC,IAAEd,CAAC,GAACrB,CAAC,IAAES,CAAC;IAAA;EAAC;EAAC,OAAO,IAAI;AAAA;AAAC,SAAOA,CAAC,IAAIkC,aAAa,EAACtB,CAAC,IAAIuB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}