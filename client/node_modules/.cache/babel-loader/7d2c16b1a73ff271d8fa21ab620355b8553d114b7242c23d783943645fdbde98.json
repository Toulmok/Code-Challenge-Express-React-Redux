{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { create as e, offset as t, copy as r } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { RenderTargetType as s, OverlayIndex as i } from \"./interfaces.js\";\nimport { ValidationState as a } from \"../webgl-engine/lib/basicInterfaces.js\";\nimport { fromValues as o } from \"../webgl-engine/lib/LocalOriginFactory.js\";\nvar n;\n!function (e) {\n  e[e.None = 0] = \"None\", e[e.ColorAndWater = 1] = \"ColorAndWater\", e[e.Highlight = 2] = \"Highlight\", e[e.Occluded = 3] = \"Occluded\", e[e.ObjectAndLayerIdColor = 4] = \"ObjectAndLayerIdColor\";\n}(n || (n = {}));\nclass h {\n  get extent() {\n    return this._extent;\n  }\n  constructor(t, r) {\n    this.index = t, this.renderTargets = r, this._extent = e(), this.resolution = 0, this.renderLocalOrigin = o(0, 0, 0, \"O\"), this.pixelRatio = 1, this.mapUnitsPerPixel = 1, this.canvasGeometries = new g(), this.hasDrapedFeatureSource = !1, this.hasDrapedRasterSource = !1, this.hasTargetWithoutRasterImage = !1, this.index = t, this.validTargets = new Array(r.renderTargets.length).fill(!1);\n  }\n  getValidTexture(e) {\n    return this.validTargets[e] ? this.renderTargets.getTarget(e).getTexture() : null;\n  }\n  get _needsColorWithoutRasterImage() {\n    return this.hasDrapedRasterSource && this.hasDrapedFeatureSource && this.hasTargetWithoutRasterImage;\n  }\n  getColorTexture(e) {\n    const t = e === n.ColorAndWater ? this.renderTargets.getTarget(s.Color) : e === n.Highlight ? this.renderTargets.getTarget(s.Highlight) : e === n.ObjectAndLayerIdColor ? this.renderTargets.getTarget(s.ObjectAndLayerIdColor) : this.renderTargets.getTarget(s.Occluded);\n    return t ? t.getTexture() : null;\n  }\n  getColorTextureNoRasterImage() {\n    return this._needsColorWithoutRasterImage ? this.getValidTexture(s.ColorNoRasterImage) : this.hasDrapedFeatureSource ? this.getValidTexture(s.Color) : null;\n  }\n  getNormalTexture(e) {\n    const t = e === n.ColorAndWater ? this.renderTargets.getTarget(s.Water) : null;\n    return t ? t.getTexture() : null;\n  }\n  draw(e, t) {\n    const r = this.computeRenderTargetValidityBitfield();\n    for (const i of this.renderTargets.renderTargets) i.type !== s.ColorNoRasterImage || this._needsColorWithoutRasterImage ? this.validTargets[i.type] = e.drawTarget(this, i, t) : this.validTargets[i.type] = !1;\n    return r ^ this.computeRenderTargetValidityBitfield() ? a.CHANGED : a.UNCHANGED;\n  }\n  computeRenderTargetValidityBitfield() {\n    const e = this.validTargets;\n    return +e[s.Color] | +e[s.ColorNoRasterImage] << 1 | +e[s.Highlight] << 2 | +e[s.Water] << 3 | +e[s.Occluded] << 4;\n  }\n  setupGeometryViewsCyclical(e) {\n    this.setupGeometryViewsDirect();\n    const r = .001 * e.range;\n    if (this._extent[0] - r <= e.min) {\n      const r = this.canvasGeometries.extents[this.canvasGeometries.numViews++];\n      t(this._extent, e.range, 0, r);\n    }\n    if (this._extent[2] + r >= e.max) {\n      const r = this.canvasGeometries.extents[this.canvasGeometries.numViews++];\n      t(this._extent, -e.range, 0, r);\n    }\n  }\n  setupGeometryViewsDirect() {\n    this.canvasGeometries.numViews = 1, r(this.canvasGeometries.extents[0], this._extent);\n  }\n  hasSomeSizedView() {\n    for (let e = 0; e < this.canvasGeometries.numViews; e++) {\n      const t = this.canvasGeometries.extents[e];\n      if (t[0] !== t[2] && t[1] !== t[3]) return !0;\n    }\n    return !1;\n  }\n  applyViewport(e) {\n    e.setViewport(this.index === i.INNER ? 0 : this.resolution, 0, this.resolution, this.resolution);\n  }\n}\nclass g {\n  constructor() {\n    this.extents = [e(), e(), e()], this.numViews = 0;\n  }\n}\nexport { h as Overlay, n as OverlaySource };","map":{"version":3,"names":["create","e","offset","t","copy","r","RenderTargetType","s","OverlayIndex","i","ValidationState","a","fromValues","o","n","None","ColorAndWater","Highlight","Occluded","ObjectAndLayerIdColor","h","extent","_extent","constructor","index","renderTargets","resolution","renderLocalOrigin","pixelRatio","mapUnitsPerPixel","canvasGeometries","g","hasDrapedFeatureSource","hasDrapedRasterSource","hasTargetWithoutRasterImage","validTargets","Array","length","fill","getValidTexture","getTarget","getTexture","_needsColorWithoutRasterImage","getColorTexture","Color","getColorTextureNoRasterImage","ColorNoRasterImage","getNormalTexture","Water","draw","computeRenderTargetValidityBitfield","type","drawTarget","CHANGED","UNCHANGED","setupGeometryViewsCyclical","setupGeometryViewsDirect","range","min","extents","numViews","max","hasSomeSizedView","applyViewport","setViewport","INNER","Overlay","OverlaySource"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/terrain/Overlay.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{create as e,offset as t,copy as r}from\"../../../geometry/support/aaBoundingRect.js\";import{RenderTargetType as s,OverlayIndex as i}from\"./interfaces.js\";import{ValidationState as a}from\"../webgl-engine/lib/basicInterfaces.js\";import{fromValues as o}from\"../webgl-engine/lib/LocalOriginFactory.js\";var n;!function(e){e[e.None=0]=\"None\",e[e.ColorAndWater=1]=\"ColorAndWater\",e[e.Highlight=2]=\"Highlight\",e[e.Occluded=3]=\"Occluded\",e[e.ObjectAndLayerIdColor=4]=\"ObjectAndLayerIdColor\"}(n||(n={}));class h{get extent(){return this._extent}constructor(t,r){this.index=t,this.renderTargets=r,this._extent=e(),this.resolution=0,this.renderLocalOrigin=o(0,0,0,\"O\"),this.pixelRatio=1,this.mapUnitsPerPixel=1,this.canvasGeometries=new g,this.hasDrapedFeatureSource=!1,this.hasDrapedRasterSource=!1,this.hasTargetWithoutRasterImage=!1,this.index=t,this.validTargets=new Array(r.renderTargets.length).fill(!1)}getValidTexture(e){return this.validTargets[e]?this.renderTargets.getTarget(e).getTexture():null}get _needsColorWithoutRasterImage(){return this.hasDrapedRasterSource&&this.hasDrapedFeatureSource&&this.hasTargetWithoutRasterImage}getColorTexture(e){const t=e===n.ColorAndWater?this.renderTargets.getTarget(s.Color):e===n.Highlight?this.renderTargets.getTarget(s.Highlight):e===n.ObjectAndLayerIdColor?this.renderTargets.getTarget(s.ObjectAndLayerIdColor):this.renderTargets.getTarget(s.Occluded);return t?t.getTexture():null}getColorTextureNoRasterImage(){return this._needsColorWithoutRasterImage?this.getValidTexture(s.ColorNoRasterImage):this.hasDrapedFeatureSource?this.getValidTexture(s.Color):null}getNormalTexture(e){const t=e===n.ColorAndWater?this.renderTargets.getTarget(s.Water):null;return t?t.getTexture():null}draw(e,t){const r=this.computeRenderTargetValidityBitfield();for(const i of this.renderTargets.renderTargets)i.type!==s.ColorNoRasterImage||this._needsColorWithoutRasterImage?this.validTargets[i.type]=e.drawTarget(this,i,t):this.validTargets[i.type]=!1;return r^this.computeRenderTargetValidityBitfield()?a.CHANGED:a.UNCHANGED}computeRenderTargetValidityBitfield(){const e=this.validTargets;return+e[s.Color]|+e[s.ColorNoRasterImage]<<1|+e[s.Highlight]<<2|+e[s.Water]<<3|+e[s.Occluded]<<4}setupGeometryViewsCyclical(e){this.setupGeometryViewsDirect();const r=.001*e.range;if(this._extent[0]-r<=e.min){const r=this.canvasGeometries.extents[this.canvasGeometries.numViews++];t(this._extent,e.range,0,r)}if(this._extent[2]+r>=e.max){const r=this.canvasGeometries.extents[this.canvasGeometries.numViews++];t(this._extent,-e.range,0,r)}}setupGeometryViewsDirect(){this.canvasGeometries.numViews=1,r(this.canvasGeometries.extents[0],this._extent)}hasSomeSizedView(){for(let e=0;e<this.canvasGeometries.numViews;e++){const t=this.canvasGeometries.extents[e];if(t[0]!==t[2]&&t[1]!==t[3])return!0}return!1}applyViewport(e){e.setViewport(this.index===i.INNER?0:this.resolution,0,this.resolution,this.resolution)}}class g{constructor(){this.extents=[e(),e(),e()],this.numViews=0}}export{h as Overlay,n as OverlaySource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}