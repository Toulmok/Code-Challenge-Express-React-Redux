{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../../../core/maybe.js\";\nimport { f as t, c as r } from \"../../../chunks/vec3f64.js\";\nimport { projectVectorToVector as i } from \"../../../geometry/projection.js\";\nimport a from \"../../../geometry/SpatialReference.js\";\nimport { wrap as s } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { create as o } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { isPlateCarree as n } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { TileFrustumVisibility as c } from \"./interfaces.js\";\nimport { createPlanarGlobePatch as l, updateCornersPlanar as h, updateEdgesAndCornersPlanar as m } from \"./PatchGeometryFactory.js\";\nimport { Tile as d, CenterPosition as u } from \"./Tile.js\";\nimport { intersectAabbInvDirBefore as p } from \"../webgl-engine/materials/internal/MaterialUtil.js\";\nclass f extends d {\n  get horizontalScale() {\n    return this._horizontalScaleFactor;\n  }\n  constructor(e, t, r) {\n    super(), this._horizontalScaleFactor = 1, this._extentInRenderSR = o(), void 0 !== e && this.init(e, t, r);\n  }\n  init(r, s, o) {\n    super.init(r, s, o);\n    const c = o.view.renderSpatialReference,\n      l = o.spatialReference,\n      h = e(c) && n(c) && e(l) && l.isGeographic ? this.ellipsoid.radius * Math.PI / 180 : 1;\n    this._horizontalScaleFactor = h;\n    const m = this.surface.isWebMercatorOnPlateeCarree,\n      d = this._extentInRenderSR,\n      u = this.extent;\n    if (m) {\n      const e = t(u[0], u[1], 0);\n      i(e, a.WebMercator, e, a.PlateCarree);\n      const r = t(u[2], u[3], 0);\n      i(r, a.WebMercator, r, a.PlateCarree), d[0] = e[0], d[1] = e[1], d[2] = r[0], d[3] = r[1];\n    } else for (let e = 0; e < 4; ++e) d[e] = u[e] * h;\n    this.centerAtSeaLevel[0] = .5 * (d[0] + d[2]), this.centerAtSeaLevel[1] = .5 * (d[1] + d[3]), this.centerAtSeaLevel[2] = 0, this._edgeLen = Math.max(d[2] - d[0], d[3] - d[1]), this._edgeLen2 = this._edgeLen * this._edgeLen, this.updateRadiusAndCenter();\n  }\n  updateRadiusAndCenter() {\n    this._updateCenter();\n    const e = this._extentInRenderSR,\n      t = .5 * (e[2] - e[0]),\n      r = .5 * (e[3] - e[1]),\n      i = Math.sqrt(t * t + r * r),\n      a = .5 * (this.elevationBounds[0] - this.elevationBounds[1]),\n      s = Math.max(i, a);\n    this._center[u.MIDDLE][3] = s;\n  }\n  _calculateFrustumVisibilityStatus(e) {\n    const t = this._aabb(),\n      r = t[0],\n      i = t[1],\n      a = t[2],\n      s = t[3],\n      o = t[4],\n      n = t[5];\n    let l = !0;\n    for (let h = 0; h < 6; h++) {\n      const t = e[h],\n        m = t[0],\n        d = t[1],\n        u = t[2],\n        p = t[3];\n      if (m * (m > 0 ? r : s) + d * (d > 0 ? i : o) + u * (u > 0 ? a : n) + p >= 0) return c.OUTSIDE;\n      l = l && m * (m < 0 ? r : s) + d * (d < 0 ? i : o) + u * (u < 0 ? a : n) + p <= 0;\n    }\n    return l ? c.INSIDE : c.INTERSECTS;\n  }\n  _aabb() {\n    const e = this._extentInRenderSR;\n    return s(e[0], e[1], this.elevationBounds[0], e[2], e[3], this.elevationBounds[1]);\n  }\n  intersectsRay(e, t, r, i) {\n    return S[0] = 1 / t[0], S[1] = 1 / t[1], S[2] = 1 / t[2], p(this._aabb(), e, S, r, i);\n  }\n  createGeometry() {\n    l(this.renderData, this._horizontalScaleFactor), this.setMemoryDirty();\n  }\n  getDefaultVerticesPerSide() {\n    return this.level < 9 ? 3 : 2;\n  }\n  updateCornerElevations() {\n    h(this.renderData, this._horizontalScaleFactor);\n  }\n  updateEdgeElevations() {\n    m(this.renderData, this._horizontalScaleFactor);\n  }\n}\nconst S = r();\nexport { f as PlanarPatch };","map":{"version":3,"names":["isSome","e","f","t","c","r","projectVectorToVector","i","a","wrap","s","create","o","isPlateCarree","n","TileFrustumVisibility","createPlanarGlobePatch","l","updateCornersPlanar","h","updateEdgesAndCornersPlanar","m","Tile","d","CenterPosition","u","intersectAabbInvDirBefore","p","horizontalScale","_horizontalScaleFactor","constructor","_extentInRenderSR","init","view","renderSpatialReference","spatialReference","isGeographic","ellipsoid","radius","Math","PI","surface","isWebMercatorOnPlateeCarree","extent","WebMercator","PlateCarree","centerAtSeaLevel","_edgeLen","max","_edgeLen2","updateRadiusAndCenter","_updateCenter","sqrt","elevationBounds","_center","MIDDLE","_calculateFrustumVisibilityStatus","_aabb","OUTSIDE","INSIDE","INTERSECTS","intersectsRay","S","createGeometry","renderData","setMemoryDirty","getDefaultVerticesPerSide","level","updateCornerElevations","updateEdgeElevations","PlanarPatch"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/terrain/PlanarPatch.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{f as t,c as r}from\"../../../chunks/vec3f64.js\";import{projectVectorToVector as i}from\"../../../geometry/projection.js\";import a from\"../../../geometry/SpatialReference.js\";import{wrap as s}from\"../../../geometry/support/aaBoundingBox.js\";import{create as o}from\"../../../geometry/support/aaBoundingRect.js\";import{isPlateCarree as n}from\"../../../geometry/support/spatialReferenceUtils.js\";import{TileFrustumVisibility as c}from\"./interfaces.js\";import{createPlanarGlobePatch as l,updateCornersPlanar as h,updateEdgesAndCornersPlanar as m}from\"./PatchGeometryFactory.js\";import{Tile as d,CenterPosition as u}from\"./Tile.js\";import{intersectAabbInvDirBefore as p}from\"../webgl-engine/materials/internal/MaterialUtil.js\";class f extends d{get horizontalScale(){return this._horizontalScaleFactor}constructor(e,t,r){super(),this._horizontalScaleFactor=1,this._extentInRenderSR=o(),void 0!==e&&this.init(e,t,r)}init(r,s,o){super.init(r,s,o);const c=o.view.renderSpatialReference,l=o.spatialReference,h=e(c)&&n(c)&&e(l)&&l.isGeographic?this.ellipsoid.radius*Math.PI/180:1;this._horizontalScaleFactor=h;const m=this.surface.isWebMercatorOnPlateeCarree,d=this._extentInRenderSR,u=this.extent;if(m){const e=t(u[0],u[1],0);i(e,a.WebMercator,e,a.PlateCarree);const r=t(u[2],u[3],0);i(r,a.WebMercator,r,a.PlateCarree),d[0]=e[0],d[1]=e[1],d[2]=r[0],d[3]=r[1]}else for(let e=0;e<4;++e)d[e]=u[e]*h;this.centerAtSeaLevel[0]=.5*(d[0]+d[2]),this.centerAtSeaLevel[1]=.5*(d[1]+d[3]),this.centerAtSeaLevel[2]=0,this._edgeLen=Math.max(d[2]-d[0],d[3]-d[1]),this._edgeLen2=this._edgeLen*this._edgeLen,this.updateRadiusAndCenter()}updateRadiusAndCenter(){this._updateCenter();const e=this._extentInRenderSR,t=.5*(e[2]-e[0]),r=.5*(e[3]-e[1]),i=Math.sqrt(t*t+r*r),a=.5*(this.elevationBounds[0]-this.elevationBounds[1]),s=Math.max(i,a);this._center[u.MIDDLE][3]=s}_calculateFrustumVisibilityStatus(e){const t=this._aabb(),r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],n=t[5];let l=!0;for(let h=0;h<6;h++){const t=e[h],m=t[0],d=t[1],u=t[2],p=t[3];if(m*(m>0?r:s)+d*(d>0?i:o)+u*(u>0?a:n)+p>=0)return c.OUTSIDE;l=l&&m*(m<0?r:s)+d*(d<0?i:o)+u*(u<0?a:n)+p<=0}return l?c.INSIDE:c.INTERSECTS}_aabb(){const e=this._extentInRenderSR;return s(e[0],e[1],this.elevationBounds[0],e[2],e[3],this.elevationBounds[1])}intersectsRay(e,t,r,i){return S[0]=1/t[0],S[1]=1/t[1],S[2]=1/t[2],p(this._aabb(),e,S,r,i)}createGeometry(){l(this.renderData,this._horizontalScaleFactor),this.setMemoryDirty()}getDefaultVerticesPerSide(){return this.level<9?3:2}updateCornerElevations(){h(this.renderData,this._horizontalScaleFactor)}updateEdgeElevations(){m(this.renderData,this._horizontalScaleFactor)}}const S=r();export{f as PlanarPatch};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}