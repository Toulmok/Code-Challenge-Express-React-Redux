{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { unwrap as e } from \"../../../core/maybe.js\";\nimport { a as t, h as i, v as s, w as r } from \"../../../chunks/vec2.js\";\nimport { a as o } from \"../../../chunks/vec2f64.js\";\nimport { s as n, z as a } from \"../../../chunks/vec3.js\";\nimport { a as p, c as h } from \"../../../chunks/vec3f64.js\";\nimport { absoluteHeightElevationInfo as c } from \"../../../support/elevationInfoUtils.js\";\nimport { SnappingAlgorithm as d } from \"./SnappingAlgorithm.js\";\nimport { VerticalHalfPlaneConstraint as g } from \"./SnappingConstraint.js\";\nimport { anyMapPointToSnappingPoint as f, asSnappingPoint as l } from \"./SnappingPoint.js\";\nimport { squaredScreenDistance as m } from \"./snappingUtils.js\";\nimport { RightAngleSnappingCandidate as x, OtherVertexType as v } from \"./candidates/RightAngleSnappingCandidate.js\";\nimport { vectorToScreenPoint as E } from \"../support/viewUtils.js\";\nclass V extends d {\n  snapNewVertex(e, t) {\n    const i = t.editGeometryOperations.data.components[0],\n      s = i.vertices.length,\n      r = [];\n    if (s < 2) return r;\n    const {\n        view: o\n      } = this,\n      n = E(e, t.spatialReference, c, o),\n      a = i.vertices[s - 1];\n    if (this.edgeExceedsShortLineThreshold(a.leftEdge, t)) {\n      const i = f(a.pos, o, t),\n        s = f(a.leftEdge.leftVertex.pos, o, t);\n      this._checkForSnappingCandidate(r, s, i, e, n, t);\n    }\n    const p = i.vertices[0];\n    if (this.edgeExceedsShortLineThreshold(p.rightEdge, t)) {\n      const i = f(p.pos, o, t),\n        s = f(p.rightEdge.rightVertex.pos, o, t);\n      this._checkForSnappingCandidate(r, s, i, e, n, t);\n    }\n    return r;\n  }\n  snapExistingVertex(t, i) {\n    const s = [],\n      r = e(i.vertexHandle);\n    if (r.component.vertices.length < 3) return s;\n    const {\n        view: o\n      } = this,\n      n = E(t, i.spatialReference, c, o),\n      a = r.leftEdge,\n      p = r.rightEdge;\n    if (a && a.leftVertex.leftEdge) {\n      const e = a.leftVertex.leftEdge;\n      if (this.edgeExceedsShortLineThreshold(e, i)) {\n        const r = f(e.rightVertex.pos, o, i),\n          a = f(e.leftVertex.pos, o, i);\n        this._checkForSnappingCandidate(s, a, r, t, n, i);\n      }\n    }\n    if (p && p.rightVertex.rightEdge) {\n      const e = p.rightVertex.rightEdge;\n      if (this.edgeExceedsShortLineThreshold(e, i)) {\n        const r = f(e.leftVertex.pos, o, i),\n          a = f(e.rightVertex.pos, o, i);\n        this._checkForSnappingCandidate(s, a, r, t, n, i);\n      }\n    }\n    return s;\n  }\n  _checkForSnappingCandidate(e, o, d, f, V, j) {\n    const {\n      spatialReference: k,\n      pointer: w\n    } = j;\n    t(u, d, o);\n    const C = n(S, u[1], -u[0], 0),\n      T = i(C, t(u, f, d)) / s(C),\n      F = l(r(p(f), d, C, T));\n    if (m(V, E(F, k, c, this.view)) < this.squaredProximityThreshold(w)) {\n      if (this.isVertical(F, d) || this.isVertical(d, o)) return;\n      const t = a(h(), d, C, Math.sign(T));\n      e.push(new x({\n        targetPoint: F,\n        constraint: new g(d, l(t)),\n        previousVertex: o,\n        otherVertex: d,\n        otherVertexType: v.CENTER,\n        isDraped: \"on-the-ground\" === j.elevationInfo?.mode\n      }));\n    }\n  }\n}\nconst u = o(),\n  S = h();\nexport { V as RightAngleSnapper };","map":{"version":3,"names":["unwrap","e","a","t","h","i","v","s","w","r","o","n","z","p","c","absoluteHeightElevationInfo","SnappingAlgorithm","d","VerticalHalfPlaneConstraint","g","anyMapPointToSnappingPoint","f","asSnappingPoint","l","squaredScreenDistance","m","RightAngleSnappingCandidate","x","OtherVertexType","vectorToScreenPoint","E","V","snapNewVertex","editGeometryOperations","data","components","vertices","length","view","spatialReference","edgeExceedsShortLineThreshold","leftEdge","pos","leftVertex","_checkForSnappingCandidate","rightEdge","rightVertex","snapExistingVertex","vertexHandle","component","j","k","pointer","u","C","S","T","F","squaredProximityThreshold","isVertical","Math","sign","push","targetPoint","constraint","previousVertex","otherVertex","otherVertexType","CENTER","isDraped","elevationInfo","mode","RightAngleSnapper"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/RightAngleSnapper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../../../core/maybe.js\";import{a as t,h as i,v as s,w as r}from\"../../../chunks/vec2.js\";import{a as o}from\"../../../chunks/vec2f64.js\";import{s as n,z as a}from\"../../../chunks/vec3.js\";import{a as p,c as h}from\"../../../chunks/vec3f64.js\";import{absoluteHeightElevationInfo as c}from\"../../../support/elevationInfoUtils.js\";import{SnappingAlgorithm as d}from\"./SnappingAlgorithm.js\";import{VerticalHalfPlaneConstraint as g}from\"./SnappingConstraint.js\";import{anyMapPointToSnappingPoint as f,asSnappingPoint as l}from\"./SnappingPoint.js\";import{squaredScreenDistance as m}from\"./snappingUtils.js\";import{RightAngleSnappingCandidate as x,OtherVertexType as v}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as E}from\"../support/viewUtils.js\";class V extends d{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],s=i.vertices.length,r=[];if(s<2)return r;const{view:o}=this,n=E(e,t.spatialReference,c,o),a=i.vertices[s-1];if(this.edgeExceedsShortLineThreshold(a.leftEdge,t)){const i=f(a.pos,o,t),s=f(a.leftEdge.leftVertex.pos,o,t);this._checkForSnappingCandidate(r,s,i,e,n,t)}const p=i.vertices[0];if(this.edgeExceedsShortLineThreshold(p.rightEdge,t)){const i=f(p.pos,o,t),s=f(p.rightEdge.rightVertex.pos,o,t);this._checkForSnappingCandidate(r,s,i,e,n,t)}return r}snapExistingVertex(t,i){const s=[],r=e(i.vertexHandle);if(r.component.vertices.length<3)return s;const{view:o}=this,n=E(t,i.spatialReference,c,o),a=r.leftEdge,p=r.rightEdge;if(a&&a.leftVertex.leftEdge){const e=a.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(e,i)){const r=f(e.rightVertex.pos,o,i),a=f(e.leftVertex.pos,o,i);this._checkForSnappingCandidate(s,a,r,t,n,i)}}if(p&&p.rightVertex.rightEdge){const e=p.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(e,i)){const r=f(e.leftVertex.pos,o,i),a=f(e.rightVertex.pos,o,i);this._checkForSnappingCandidate(s,a,r,t,n,i)}}return s}_checkForSnappingCandidate(e,o,d,f,V,j){const{spatialReference:k,pointer:w}=j;t(u,d,o);const C=n(S,u[1],-u[0],0),T=i(C,t(u,f,d))/s(C),F=l(r(p(f),d,C,T));if(m(V,E(F,k,c,this.view))<this.squaredProximityThreshold(w)){if(this.isVertical(F,d)||this.isVertical(d,o))return;const t=a(h(),d,C,Math.sign(T));e.push(new x({targetPoint:F,constraint:new g(d,l(t)),previousVertex:o,otherVertex:d,otherVertexType:v.CENTER,isDraped:\"on-the-ground\"===j.elevationInfo?.mode}))}}}const u=o(),S=h();export{V as RightAngleSnapper};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}