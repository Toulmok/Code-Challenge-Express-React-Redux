{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Color.js\";\nimport i from \"../../../core/Accessor.js\";\nimport { isSome as r, disposeMaybe as s, isNone as n } from \"../../../core/maybe.js\";\nimport o from \"../../../core/ObjectPool.js\";\nimport { property as a } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as l } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { I as h } from \"../../../chunks/mat4f64.js\";\nimport { b as c, s as d, e as u } from \"../../../chunks/vec3.js\";\nimport { Z as p, f, c as _ } from \"../../../chunks/vec3f64.js\";\nimport { Z as g } from \"../../../chunks/vec4f64.js\";\nimport { create as m, set as b } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { BufferViewVec3f as y } from \"../../../geometry/support/buffer/BufferView.js\";\nimport { ViewingMode as T } from \"../../ViewingMode.js\";\nimport { TextureUpdate as R } from \"./interfaces.js\";\nimport { LayerClass as v } from \"./LayerClass.js\";\nimport { OverlaySource as O } from \"./Overlay.js\";\nimport { overlayRenderOccludedFlag as x } from \"./OverlayRenderer.js\";\nimport { clearCaches as C } from \"./PatchGeometry.js\";\nimport { PatchRenderData as D } from \"./PatchRenderData.js\";\nimport { RenderOrder as P } from \"./RenderOrder.js\";\nimport { ENABLE_TERRAIN_INTERNAL_CHECKS as S } from \"./terrainUtils.js\";\nimport { TileRenderer as q } from \"./TileRenderer.js\";\nimport { TileUpdate as E } from \"./TileUpdate.js\";\nimport { IteratorPreorder as A, sortTiles as w, compareTiles as N } from \"./tileUtils.js\";\nimport { componentMinimalSizeForIntersectionData as j, ComponentIntersectionData as G } from \"../webgl-engine/collections/Component/ComponentIntersectionData.js\";\nimport { ShaderOutput as I } from \"../webgl-engine/core/shaderLibrary/ShaderOutput.js\";\nimport { OverlayMode as L } from \"../webgl-engine/core/shaderLibrary/terrain/Overlay.glsl.js\";\nimport { T as F } from \"../../../chunks/Terrain.glsl.js\";\nimport { TileBlendInput as U } from \"../webgl-engine/core/shaderLibrary/terrain/TileBlendInput.js\";\nimport { Attribute as k } from \"../webgl-engine/lib/Attribute.js\";\nimport { RenderRequestType as B } from \"../webgl-engine/lib/basicInterfaces.js\";\nimport { createEmptyTexture as M } from \"../webgl-engine/lib/glUtil3D.js\";\nimport { newIntersectorResult as z } from \"../webgl-engine/lib/Intersector.js\";\nimport { IntersectorType as H, StoreResults as V } from \"../webgl-engine/lib/IntersectorInterfaces.js\";\nimport { RenderOccludedFlag as W } from \"../webgl-engine/lib/Material.js\";\nimport { RenderSlot as Y } from \"../webgl-engine/lib/RenderSlot.js\";\nimport { getSettings as Q } from \"../webgl-engine/lib/screenSizePerspectiveUtils.js\";\nimport { VertexAttribute as X } from \"../webgl-engine/lib/VertexAttribute.js\";\nimport { TERRAIN_ID as Z, getVerticalOffsetTerrain as K } from \"../webgl-engine/lib/verticalOffsetUtils.js\";\nimport { DrawParameters as J } from \"../webgl-engine/materials/DrawParameters.js\";\nimport { intersectAabbInvDirBefore as $, intersectTriangles as ee } from \"../webgl-engine/materials/internal/MaterialUtil.js\";\nimport { TerrainTechnique as te } from \"../webgl-engine/shaders/TerrainTechnique.js\";\nimport { TerrainTechniqueConfiguration as ie } from \"../webgl-engine/shaders/TerrainTechniqueConfiguration.js\";\nimport { PrimitiveType as re } from \"../../webgl/enums.js\";\nconst se = 7,\n  ne = 10,\n  oe = m();\nvar ae;\n!function (e) {\n  e[e.Opaque = 0] = \"Opaque\", e[e.Semitransparent = 1] = \"Semitransparent\", e[e.TransparentWithDraped = 2] = \"TransparentWithDraped\", e[e.Empty = 3] = \"Empty\";\n}(ae || (ae = {}));\nlet le = class extends i {\n  get _isGlobal() {\n    return this._stage.viewingMode === T.Global;\n  }\n  get shading() {\n    return this._techniqueConfiguration.shading;\n  }\n  set shading(e) {\n    this._techniqueConfiguration.shading = e;\n  }\n  constructor(e) {\n    super(e), this.type = H.TERRAIN, this.isGround = !0, this._tileSize = 256, this._techniqueConfiguration = new ie(), this._passParameters = new F(), this._rctx = null, this._renderDataPool = new o(D), this._patchGroups = new Map(), this._patchGroupsDirty = !0, this._patchSortingDirty = !0, this._tileIterator = new A(), this._highestVisibleLODTile = null, this._visible = !0, this._transparencyState = ae.Opaque, this._velvetOverground = !0, this._castShadows = !0, this._emptyTex = null, this._tileRenderer = null, this._stencilEnabledLayerExtents = new Array(), this._numTilesRendered = 0, this._numTilesCulled = 0, this._numOriginsRendered = 0, this.needsHighlight = !1, this.renderOccludedFlags = W.Occlude;\n  }\n  initialize() {\n    const e = [Y.OPAQUE_TERRAIN, Y.TRANSPARENT_TERRAIN, Y.OCCLUDED_TERRAIN];\n    this._stage.addRenderPlugin(e, this);\n  }\n  destroy() {\n    this._stage.removeRenderPlugin(this), C();\n  }\n  get canRender() {\n    return this._visible && !!this._rootTiles && !this.renderingDisabled;\n  }\n  set renderingDisabled(e) {\n    this._set(\"renderingDisabled\", !!e), this.setDirty();\n  }\n  set transparency(e) {\n    this._transparencyState !== e && (this._techniqueConfiguration.invisible = e === ae.TransparentWithDraped || e === ae.Empty, this._transparencyState = e, this.setNeedsRender());\n  }\n  get transparency() {\n    return this._transparencyState;\n  }\n  get needsLinearDepth() {\n    return this._overlayRenderer.hasWater;\n  }\n  get renderPatchBorders() {\n    return !!this._techniqueConfiguration.tileBorders;\n  }\n  set renderPatchBorders(e) {\n    this._techniqueConfiguration.tileBorders !== e && (this._techniqueConfiguration.tileBorders = e, this.setNeedsRender(), this.notifyChange(\"renderPatchBorders\"));\n  }\n  get visualizeNormals() {\n    return !!this._techniqueConfiguration.visualizeNormals;\n  }\n  set visualizeNormals(e) {\n    this._techniqueConfiguration.visualizeNormals !== e && (this._techniqueConfiguration.visualizeNormals = e, this.setNeedsRender(), this.notifyChange(\"visualizeNormals\"));\n  }\n  get cullBackFaces() {\n    return this._techniqueConfiguration.backfaceCullingEnabled;\n  }\n  set cullBackFaces(e) {\n    this._techniqueConfiguration.backfaceCullingEnabled !== e && (this._techniqueConfiguration.backfaceCullingEnabled = e, this.notifyChange(\"cullBackFaces\"), this.setNeedsRender());\n  }\n  set renderOrder(e) {\n    this._set(\"renderOrder\", e), this._setSortingDirty();\n  }\n  set velvetOverground(e) {\n    this._velvetOverground !== e && (this._velvetOverground = e, this.setNeedsRender());\n  }\n  get layerUid() {\n    return Z;\n  }\n  get slicePlaneEnabled() {\n    return this._techniqueConfiguration.hasSlicePlane;\n  }\n  set slicePlaneEnabled(e) {\n    this._techniqueConfiguration.hasSlicePlane !== e && (this._techniqueConfiguration.hasSlicePlane = e, this.setNeedsRender());\n  }\n  set textureFadingEnabled(e) {\n    this._techniqueConfiguration.textureFadingEnabled !== e && (this._techniqueConfiguration.textureFadingEnabled = e, this.setNeedsRender());\n  }\n  set pbrMode(e) {\n    this._techniqueConfiguration.pbrMode !== e && (this._techniqueConfiguration.pbrMode = e, this.setNeedsRender());\n  }\n  setDebugScreenSizePerspective(e) {\n    this._techniqueConfiguration.screenSizePerspective !== e && (this._techniqueConfiguration.screenSizePerspective = e, this.setNeedsRender());\n  }\n  setRootTiles(e) {\n    this._rootTiles = e, this.setDirty();\n  }\n  setNeedsHighlight(e) {\n    this.needsHighlight = e, this.setNeedsRender();\n  }\n  setRenderOccludedOverlay(e) {\n    this.renderOccludedFlags = e ? x : W.Occlude, this.setNeedsRender();\n  }\n  setStencilEnabledLayerExtents(e) {\n    this._stencilEnabledLayerExtents = e, this._setSortingDirty();\n  }\n  setTileSize(e) {\n    this._tileSize = e, r(this._tileRenderer) && (this._tileRenderer.tileSize = e), this.setDirty();\n  }\n  _prepareTileForLoading(e) {\n    e.renderData || (e.renderData = this._renderDataPool.acquire(), e.renderData.init(e), e.renderData.localOrigin = this._getLocalOriginOfTile(e));\n  }\n  loadTile(e) {\n    this._prepareTileForLoading(e), this.updateTileGeometryState(e), this.updateTileTexture(e, E.TEXTURE_FADING);\n  }\n  updateTileTexture(e, t) {\n    r(this._tileRenderer) && (this._tileRenderer.updateTileTexture(e, t === E.TEXTURE_FADING ? R.FADING : R.UNFADED), this.setNeedsRender(), e.resetPendingUpdate(t));\n  }\n  updateTileGeometryState(e) {\n    for (const i of e.layerInfo[v.ELEVATION]) i.pendingUpdates &= ~E.GEOMETRY;\n    e.resetPendingUpdate(E.GEOMETRY);\n    const t = e.renderData.updateGeometryState();\n    return t && this.setDirty(), t;\n  }\n  updateGeometryIfNeeded(e) {\n    e.isLoaded && e.renderData.updateGeometryIfNeeded(this._rctx);\n  }\n  unloadTile(e) {\n    const t = e.renderData;\n    t && (t.releaseGeometry(), this._renderDataPool.release(t), t.clear(), e.renderData = null, e.setMemoryDirty(), this.setDirty());\n  }\n  _getLocalOriginOfTile(e) {\n    const t = ne - se,\n      i = Math.max(0, Math.floor((e.level - t) / se) * se);\n    if (this._isGlobal && 0 === i) return p;\n    for (; e.parent && e.level > i;) e = e.parent;\n    return e.centerAtSeaLevel;\n  }\n  setVisibility(e) {\n    this._visible = e, this.setDirty();\n  }\n  getStats() {\n    return {\n      numTilesRendered: this._numTilesRendered,\n      numTilesCulled: this._numTilesCulled,\n      numOriginsRendered: this._numOriginsRendered\n    };\n  }\n  set wireframe(e) {\n    this._get(\"wireframe\") !== e && (this._set(\"wireframe\", e), this.setNeedsRender());\n  }\n  setDirty() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : B.UPDATE;\n    this._patchGroupsDirty = !0, this._context.requestRender(e);\n  }\n  _setSortingDirty() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : B.UPDATE;\n    this._patchSortingDirty = !0, this._context.requestRender(e);\n  }\n  setNeedsRender() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : B.UPDATE;\n    this._context.requestRender(e);\n  }\n  initializeRenderContext(e) {\n    this._context = e, this._rctx = e.renderContext.rctx, this._techniqueRepository = e.techniqueRepository, this._tileRenderer = new q(this._rctx, this._tileSize, this._techniqueRepository), this.updateTileBackground(), this._emptyTex = M(this._rctx);\n  }\n  uninitializeRenderContext() {\n    this._emptyTex = s(this._emptyTex), this._tileRenderer = s(this._tileRenderer);\n  }\n  intersect(e, t, i, s) {\n    if (!this._rootTiles || e.options.selectOpaqueTerrainOnly && e.options.selectionMode && this.transparency !== ae.Opaque) return;\n    const o = he,\n      a = ce;\n    c(o, s, i), d(a, 1 / o[0], 1 / o[1], 1 / o[2]);\n    const l = e.results.min,\n      p = e.results.max,\n      f = e.results.ground,\n      _ = e.options.store === V.MIN,\n      g = !!e.results.ground.target,\n      m = K(e.verticalOffset),\n      T = e.tolerance;\n    let R,\n      v = _ && r(l.dist) ? l.dist : 1 / 0;\n    const O = d => {\n        const g = d.renderData;\n        if (!g?.vao) return;\n        const O = g.geometryInfo;\n        b(oe, O.boundingBox);\n        const x = g.localOrigin;\n        r(m) && (m.localOrigin = x, m.applyToAabb(oe));\n        const C = oe;\n        if (de[0] = i[0] - x[0], de[1] = i[1] - x[1], de[2] = i[2] - x[2], !$(C, de, a, T, v)) return;\n        const D = (e, t, i) => {\n            e.set(this.type, d, t, i, h), v = _ && r(l.dist) ? l.dist : 1 / 0;\n          },\n          P = (a, h) => {\n            if (r(h) && a >= 0 && (e.options.backfacesTerrain || u(h, o) < 0) && (e.options.invisibleTerrain || !e.options.selectionMode || null == t || t(i, s, a))) {\n              if ((null == f.dist || a < f.dist) && D(f, a, h), e.options.isFiltered) return;\n              e.options.store === V.ALL && (n(R) ? (R = z(e.ray), D(R, a, h), e.results.all.push(R)) : a < R.dist && D(R, a, h)), (null == l.dist || a < l.dist) && D(l, a, h), e.options.store !== V.MIN && (null == p.dist || a > p.dist) && D(p, a, h);\n            }\n          },\n          S = ue;\n        c(S, s, x);\n        const q = O.indices,\n          E = O.vertexAttributes,\n          A = E.getField(X.POSITION, y),\n          w = new k(A.typedBuffer, 3, !1, E.stride / 4),\n          N = O.indexCount / 3;\n        if (n(m) && N > j) {\n          const e = d.renderData;\n          n(e.intersectionData) && (e.intersectionData = new G(q, 0, N, w)), e.intersectionData.intersectRay({\n            r0: de,\n            r1: S\n          }, P);\n        } else ee(de, S, 0, N, q, w, null, m, P);\n      },\n      x = this._rootTiles;\n    if (r(x)) {\n      (() => {\n        const t = this._tileIterator;\n        t.reset(x);\n        const s = e.options.invisibleTerrain;\n        for (let e = t.next(); e; e = t.next()) !(e.visible || s && e.intersectsClippingArea) || !r(m) && !e.intersectsRay(i, o, T, v) || g && this._useStencilForTile(e) ? t.skipSubtree() : O(e);\n      })();\n    }\n  }\n  processScaleRangeQueries(e, t) {\n    if (!t.done) for (this._updatePatchGroups(); e.updating && !t.done;) {\n      e.prepare();\n      for (const t of this._patchGroups.values()) for (const i of t) r(i.renderData?.textureReference) && e.queriesForTile(i);\n      e.process(), t.madeProgress();\n    }\n  }\n  prepareTechnique(e) {\n    if (e.bindParameters.slot === Y.OCCLUDED_TERRAIN) {\n      if (0 == (e.renderOccludedMask & x)) return null;\n    } else {\n      const t = this.transparency === ae.Opaque ? Y.OPAQUE_TERRAIN : Y.TRANSPARENT_TERRAIN;\n      if (e.bindParameters.slot !== t) return null;\n    }\n    switch (e.output) {\n      case I.Color:\n        return this.transparency === ae.Empty ? null : (this._techniqueConfiguration.hasScreenSpaceReflections = e.bindParameters.ssr.enabled, this._techniqueConfiguration.hasCloudsReflections = r(e.bindParameters.cloudsFade.data), this._techniqueConfiguration.receiveShadows = e.bindParameters.shadowMap.ready, this._techniqueConfiguration.receiveAmbientOcclusion = e.bindParameters.ssaoHelper.active, this._techniqueConfiguration.overlayMode = this._overlayRenderer.isEmpty ? L.Disabled : this._overlayRenderer.hasWater ? L.EnabledWithWater : L.Enabled, this._updateTechnique(I.Color, e.bindParameters.slot === Y.OCCLUDED_TERRAIN));\n      case I.Shadow:\n      case I.ShadowExcludeHighlight:\n        return this._castShadows && 1 === e.bindParameters.lighting.globalFactor ? (this._techniqueConfiguration.receiveShadows = this._techniqueConfiguration.receiveAmbientOcclusion = !1, this._updateTechnique(I.Shadow, !1)) : null;\n      case I.Depth:\n        return this.transparency === ae.Empty ? null : (this._techniqueConfiguration.receiveShadows = this._techniqueConfiguration.receiveAmbientOcclusion = !1, this._updateTechnique(I.Depth, !1));\n      case I.Normal:\n        return this.transparency === ae.Empty ? null : (this._techniqueConfiguration.receiveShadows = this._techniqueConfiguration.receiveAmbientOcclusion = !1, this._updateTechnique(I.Normal, !1));\n      case I.ObjectAndLayerIdColor:\n        return this.transparency === ae.Empty ? null : this._updateTechnique(I.ObjectAndLayerIdColor, !1);\n      case I.Highlight:\n        return this.transparency !== ae.Empty && this.needsHighlight ? (this._techniqueConfiguration.receiveShadows = this._techniqueConfiguration.receiveAmbientOcclusion = !1, this._updateTechnique(I.Highlight, !1)) : null;\n    }\n    return null;\n  }\n  render(e, t) {\n    const i = 1 === e.bindParameters.lighting.globalFactor;\n    switch (this._updatePatchGroups(), t.useStencil = !1, e.output) {\n      case I.Color:\n        {\n          const i = e.bindParameters.slot === Y.OCCLUDED_TERRAIN ? O.Occluded : O.ColorAndWater;\n          this.transparency === ae.Opaque ? this._renderMaterialPass(e, t, i) : e.offscreenRenderingHelper.renderToTargets(() => this._renderMaterialPass(e, t, i), e.offscreenRenderingHelper.tmpColor, e.offscreenRenderingHelper.mainDepth, [0, 0, 0, 0]);\n          break;\n        }\n      case I.Depth:\n      case I.Normal:\n        this._renderAuxiliaryPass(e, t, O.None);\n        break;\n      case I.Highlight:\n        this.needsHighlight && this._renderAuxiliaryPass(e, t, O.Highlight);\n        break;\n      case I.Shadow:\n      case I.ShadowExcludeHighlight:\n        this._castShadows && i && this._renderAuxiliaryPass(e, t, O.None);\n        break;\n      case I.ObjectAndLayerIdColor:\n        this._renderAuxiliaryPass(e, t, O.ObjectAndLayerIdColor);\n    }\n  }\n  _renderMaterialPass(e, t, i) {\n    const {\n      rctx: r\n    } = e;\n    this._passParameters.overlaySource = i, r.bindTechnique(t, this._passParameters, e.bindParameters), this._numTilesRendered = 0, this._numTilesCulled = 0, this._numOriginsRendered = 0, this._renderPatchGroups(e, t, i);\n  }\n  _renderAuxiliaryPass(e, t, i) {\n    const r = e.rctx;\n    this._passParameters.overlaySource = i, r.bindTechnique(t, this._passParameters, e.bindParameters), this._renderPatchGroupsAuxiliary(e, t, i);\n  }\n  updateTileBackground() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    if (n(this._tileRenderer)) return;\n    const i = this._tileRenderer;\n    let s = null;\n    if (r(e)) {\n      const i = t.toUnitRGBA(e);\n      s = f(i[0] || 0, i[1] || 0, i[2] || 0);\n    }\n    i.setBackground(s), this._allTiles.forAll(e => i.updateTileTexture(e, R.FADING)), this._techniqueConfiguration.tileBlendInput = i.backgroundIsGrid ? U.GridComposite : r(i.backgroundColor) ? U.ColorComposite : U.LayerOnly, this.setNeedsRender();\n  }\n  _updatePatchGroups() {\n    if (this._patchGroupsDirty && (this._highestVisibleLODTile = null, this._rebuildPatchGroups(), this._patchGroupsDirty = !1, this._patchSortingDirty = !0), this._patchSortingDirty && this.renderOrder !== P.NONE) {\n      const e = Array.from(this._patchGroups.values()),\n        t = this._stencilEnabledLayerExtents;\n      for (const i of e) w(this.renderOrder, i, t);\n      e.sort((e, t) => N(e[0], t[0], this.renderOrder)), this._patchGroups = new Map(e.map(e => [e[0].renderData.localOrigin, e])), this._patchSortingDirty = !1;\n    }\n  }\n  _rebuildPatchGroups() {\n    const e = this._rootTiles;\n    if (!n(e)) {\n      e[0]?.surface.checkAllTilesWaterproofness(), this._patchGroups.clear();\n      for (const t of e) this._rebuildPatchGroupsForRootTile(t);\n    }\n  }\n  _rebuildPatchGroupsForRootTile(e) {\n    const t = this._tileIterator;\n    for (t.resetOne(e); !t.done;) {\n      const e = t.next(),\n        i = e.renderData;\n      if (!i) {\n        this._numTilesCulled++;\n        continue;\n      }\n      if (!e.visible) {\n        this._numTilesCulled++, t.skipSubtree();\n        continue;\n      }\n      const r = i.localOrigin;\n      let s = this._patchGroups.get(r);\n      s || (s = new Array(), this._patchGroups.set(r, s)), s.push(e), (!this._highestVisibleLODTile || e.vlevel > this._highestVisibleLODTile.vlevel) && (this._highestVisibleLODTile = e), t.skipSubtree();\n    }\n  }\n  _useStencilForTile(e) {\n    for (const t of this._stencilEnabledLayerExtents) if (e.intersectsExtent(t)) return !0;\n    return !1;\n  }\n  _renderPatchGroupsAuxiliary(e, t, i) {\n    const r = this._stencilEnabledLayerExtents.length > 0;\n    this._patchGroups.forEach(s => {\n      const n = s[0].renderData.localOrigin;\n      t.program.bindDraw(new J(n), e.bindParameters, this._passParameters);\n      for (let o = 0; o < s.length; o++) this._renderPatch(e, t, s[o], re.TRIANGLES, r, i);\n    }), e.rctx.bindVAO(null);\n  }\n  _renderPatchGroups(e, t, i) {\n    const s = e.bindParameters.camera,\n      o = t.program;\n    if (this._techniqueConfiguration.screenSizePerspective && this.pointsOfInterest) {\n      const e = Q(this._stage.viewingMode, this._ellipsoidRadius),\n        t = this.pointsOfInterest.centerOnSurfaceFrequent.distance;\n      e.update({\n        distance: t,\n        fovY: s.fovY\n      });\n    }\n    const a = this._stencilEnabledLayerExtents.length > 0,\n      l = i === O.Occluded;\n    l && (o.bindTexture(\"tex\", this._emptyTex), o.setUniform3fv(\"textureOpacities\", p), o.setUniform4fv(\"texOffsetAndScale\", g));\n    const h = r(this._tileRenderer) && r(this._tileRenderer.backgroundColor) ? this._tileRenderer.backgroundColor : p;\n    this._techniqueConfiguration.tileBlendInput === U.ColorComposite && o.setUniform3fv(\"backgroundColor\", h);\n    const c = this.wireframe ? re.LINES : re.TRIANGLES;\n    this._techniqueConfiguration.textureFadingEnabled && o.bindTexture(\"texNext\", this._emptyTex);\n    const d = this._patchGroups;\n    for (const u of d.values()) {\n      const s = u[0].renderData.localOrigin;\n      t.program.bindDraw(new J(s), e.bindParameters, this._passParameters), this._numOriginsRendered++;\n      for (const h of u) {\n        const s = h.renderData,\n          d = s.textureReference;\n        if (!n(d)) {\n          if (!l) {\n            o.setUniform4fv(\"texOffsetAndScale\", d.offsetAndScale), o.bindTexture(\"tex\", d.texture.texture);\n            const e = s.textureFadeFactor,\n              t = e < 1 ? s.nextTextureReference : null;\n            this._techniqueConfiguration.textureFadingEnabled && r(t) && e < 1 ? (o.setUniform1f(\"fadeFactor\", e), o.setUniform4fv(\"nextTexOffsetAndScale\", t.offsetAndScale), o.setUniform3fv(\"nextTexOpacities\", t.opacities), o.bindTexture(\"texNext\", t.texture.texture)) : o.setUniform1f(\"fadeFactor\", 1), s.textureIsFading && this.setNeedsRender(), o.setUniform3fv(\"textureOpacities\", d.opacities);\n          }\n          this._renderPatch(e, t, h, c, a, i), h.renderOrder = this._numTilesRendered, this._numTilesRendered++;\n        }\n      }\n    }\n    e.rctx.bindVAO(null);\n  }\n  _renderPatch(e, t, i, r, s, o) {\n    const a = i.renderData,\n      l = a.vao,\n      h = l.indexBuffer;\n    if (n(h)) return void (S && console.error(\"Rendered tile with no indices: \", i.lij, \" : \", a));\n    const c = t.program;\n    o === O.None || this._overlayRenderer.isEmpty || this._bindOverlayPatchData(c, a.overlay), s && (t.useStencil = this._useStencilForTile(i), t.bindPipelineState(e.rctx, e.bindParameters.slot));\n    const d = a.geometryInfo.indexCount;\n    e.rctx.bindVAO(l), c.assertCompatibleVertexAttributeLocations(l), e.rctx.drawElements(r, d, h.indexType, 0);\n  }\n  _bindOverlayPatchData(e, t) {\n    e.setUniform4fv(\"overlayTexOffset\", t.offsets), e.setUniform4fv(\"overlayTexScale\", t.scales);\n  }\n  _updateTechnique(e, t) {\n    return this._techniqueConfiguration.output = e, e === I.Color && (this._techniqueConfiguration.atmosphere = this._isGlobal && this._velvetOverground), this._techniqueConfiguration.renderOccluded = t, this._techniqueConfiguration.stencilEnabled = !1, this._shaderTechnique = this._techniqueRepository.releaseAndAcquire(te, this._techniqueConfiguration, this._shaderTechnique), this._shaderTechnique;\n  }\n  get test() {\n    return {\n      tileRenderer: this._tileRenderer\n    };\n  }\n};\ne([a({\n  constructOnly: !0\n})], le.prototype, \"_overlayRenderer\", void 0), e([a({\n  constructOnly: !0\n})], le.prototype, \"_stage\", void 0), e([a({\n  readOnly: !0\n})], le.prototype, \"_isGlobal\", null), e([a({\n  constructOnly: !0\n})], le.prototype, \"_allTiles\", void 0), e([a({\n  constructOnly: !0\n})], le.prototype, \"_ellipsoidRadius\", void 0), e([a({\n  value: !1\n})], le.prototype, \"renderingDisabled\", null), e([a()], le.prototype, \"renderPatchBorders\", null), e([a()], le.prototype, \"visualizeNormals\", null), e([a()], le.prototype, \"cullBackFaces\", null), e([a({\n  value: P.FRONT_TO_BACK\n})], le.prototype, \"renderOrder\", null), e([a()], le.prototype, \"wireframe\", null), le = e([l(\"esri.views.3d.terrain.TerrainRenderer\")], le);\nconst he = _(),\n  ce = _(),\n  de = _(),\n  ue = _();\nexport { le as TerrainRenderer, ae as TransparencyMode };","map":{"version":3,"names":["_","e","t","i","isSome","r","disposeMaybe","s","isNone","n","o","property","a","subclass","l","I","h","b","c","d","u","Z","p","f","g","create","m","set","BufferViewVec3f","y","ViewingMode","T","TextureUpdate","R","LayerClass","v","OverlaySource","O","overlayRenderOccludedFlag","x","clearCaches","C","PatchRenderData","D","RenderOrder","P","ENABLE_TERRAIN_INTERNAL_CHECKS","S","TileRenderer","q","TileUpdate","E","IteratorPreorder","A","sortTiles","w","compareTiles","N","componentMinimalSizeForIntersectionData","j","ComponentIntersectionData","G","ShaderOutput","OverlayMode","L","F","TileBlendInput","U","Attribute","k","RenderRequestType","B","createEmptyTexture","M","newIntersectorResult","z","IntersectorType","H","StoreResults","V","RenderOccludedFlag","W","RenderSlot","Y","getSettings","Q","VertexAttribute","X","TERRAIN_ID","getVerticalOffsetTerrain","K","DrawParameters","J","intersectAabbInvDirBefore","$","intersectTriangles","ee","TerrainTechnique","te","TerrainTechniqueConfiguration","ie","PrimitiveType","re","se","ne","oe","ae","Opaque","Semitransparent","TransparentWithDraped","Empty","le","_isGlobal","_stage","viewingMode","Global","shading","_techniqueConfiguration","constructor","type","TERRAIN","isGround","_tileSize","_passParameters","_rctx","_renderDataPool","_patchGroups","Map","_patchGroupsDirty","_patchSortingDirty","_tileIterator","_highestVisibleLODTile","_visible","_transparencyState","_velvetOverground","_castShadows","_emptyTex","_tileRenderer","_stencilEnabledLayerExtents","Array","_numTilesRendered","_numTilesCulled","_numOriginsRendered","needsHighlight","renderOccludedFlags","Occlude","initialize","OPAQUE_TERRAIN","TRANSPARENT_TERRAIN","OCCLUDED_TERRAIN","addRenderPlugin","destroy","removeRenderPlugin","canRender","_rootTiles","renderingDisabled","_set","setDirty","transparency","invisible","setNeedsRender","needsLinearDepth","_overlayRenderer","hasWater","renderPatchBorders","tileBorders","notifyChange","visualizeNormals","cullBackFaces","backfaceCullingEnabled","renderOrder","_setSortingDirty","velvetOverground","layerUid","slicePlaneEnabled","hasSlicePlane","textureFadingEnabled","pbrMode","setDebugScreenSizePerspective","screenSizePerspective","setRootTiles","setNeedsHighlight","setRenderOccludedOverlay","setStencilEnabledLayerExtents","setTileSize","tileSize","_prepareTileForLoading","renderData","acquire","init","localOrigin","_getLocalOriginOfTile","loadTile","updateTileGeometryState","updateTileTexture","TEXTURE_FADING","FADING","UNFADED","resetPendingUpdate","layerInfo","ELEVATION","pendingUpdates","GEOMETRY","updateGeometryState","updateGeometryIfNeeded","isLoaded","unloadTile","releaseGeometry","release","clear","setMemoryDirty","Math","max","floor","level","parent","centerAtSeaLevel","setVisibility","getStats","numTilesRendered","numTilesCulled","numOriginsRendered","wireframe","_get","arguments","length","undefined","UPDATE","_context","requestRender","initializeRenderContext","renderContext","rctx","_techniqueRepository","techniqueRepository","updateTileBackground","uninitializeRenderContext","intersect","options","selectOpaqueTerrainOnly","selectionMode","he","ce","results","min","ground","store","MIN","target","verticalOffset","tolerance","dist","vao","geometryInfo","boundingBox","applyToAabb","de","backfacesTerrain","invisibleTerrain","isFiltered","ALL","ray","all","push","ue","indices","vertexAttributes","getField","POSITION","typedBuffer","stride","indexCount","intersectionData","intersectRay","r0","r1","reset","next","visible","intersectsClippingArea","intersectsRay","_useStencilForTile","skipSubtree","processScaleRangeQueries","done","_updatePatchGroups","updating","prepare","values","textureReference","queriesForTile","process","madeProgress","prepareTechnique","bindParameters","slot","renderOccludedMask","output","Color","hasScreenSpaceReflections","ssr","enabled","hasCloudsReflections","cloudsFade","data","receiveShadows","shadowMap","ready","receiveAmbientOcclusion","ssaoHelper","active","overlayMode","isEmpty","Disabled","EnabledWithWater","Enabled","_updateTechnique","Shadow","ShadowExcludeHighlight","lighting","globalFactor","Depth","Normal","ObjectAndLayerIdColor","Highlight","render","useStencil","Occluded","ColorAndWater","_renderMaterialPass","offscreenRenderingHelper","renderToTargets","tmpColor","mainDepth","_renderAuxiliaryPass","None","overlaySource","bindTechnique","_renderPatchGroups","_renderPatchGroupsAuxiliary","toUnitRGBA","setBackground","_allTiles","forAll","tileBlendInput","backgroundIsGrid","GridComposite","backgroundColor","ColorComposite","LayerOnly","_rebuildPatchGroups","NONE","from","sort","map","surface","checkAllTilesWaterproofness","_rebuildPatchGroupsForRootTile","resetOne","get","vlevel","intersectsExtent","forEach","program","bindDraw","_renderPatch","TRIANGLES","bindVAO","camera","pointsOfInterest","_ellipsoidRadius","centerOnSurfaceFrequent","distance","update","fovY","bindTexture","setUniform3fv","setUniform4fv","LINES","offsetAndScale","texture","textureFadeFactor","nextTextureReference","setUniform1f","opacities","textureIsFading","indexBuffer","console","error","lij","_bindOverlayPatchData","overlay","bindPipelineState","assertCompatibleVertexAttributeLocations","drawElements","indexType","offsets","scales","atmosphere","renderOccluded","stencilEnabled","_shaderTechnique","releaseAndAcquire","test","tileRenderer","constructOnly","prototype","readOnly","value","FRONT_TO_BACK","TerrainRenderer","TransparencyMode"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/terrain/TerrainRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import i from\"../../../core/Accessor.js\";import{isSome as r,disposeMaybe as s,isNone as n}from\"../../../core/maybe.js\";import o from\"../../../core/ObjectPool.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{I as h}from\"../../../chunks/mat4f64.js\";import{b as c,s as d,e as u}from\"../../../chunks/vec3.js\";import{Z as p,f,c as _}from\"../../../chunks/vec3f64.js\";import{Z as g}from\"../../../chunks/vec4f64.js\";import{create as m,set as b}from\"../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as y}from\"../../../geometry/support/buffer/BufferView.js\";import{ViewingMode as T}from\"../../ViewingMode.js\";import{TextureUpdate as R}from\"./interfaces.js\";import{LayerClass as v}from\"./LayerClass.js\";import{OverlaySource as O}from\"./Overlay.js\";import{overlayRenderOccludedFlag as x}from\"./OverlayRenderer.js\";import{clearCaches as C}from\"./PatchGeometry.js\";import{PatchRenderData as D}from\"./PatchRenderData.js\";import{RenderOrder as P}from\"./RenderOrder.js\";import{ENABLE_TERRAIN_INTERNAL_CHECKS as S}from\"./terrainUtils.js\";import{TileRenderer as q}from\"./TileRenderer.js\";import{TileUpdate as E}from\"./TileUpdate.js\";import{IteratorPreorder as A,sortTiles as w,compareTiles as N}from\"./tileUtils.js\";import{componentMinimalSizeForIntersectionData as j,ComponentIntersectionData as G}from\"../webgl-engine/collections/Component/ComponentIntersectionData.js\";import{ShaderOutput as I}from\"../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{OverlayMode as L}from\"../webgl-engine/core/shaderLibrary/terrain/Overlay.glsl.js\";import{T as F}from\"../../../chunks/Terrain.glsl.js\";import{TileBlendInput as U}from\"../webgl-engine/core/shaderLibrary/terrain/TileBlendInput.js\";import{Attribute as k}from\"../webgl-engine/lib/Attribute.js\";import{RenderRequestType as B}from\"../webgl-engine/lib/basicInterfaces.js\";import{createEmptyTexture as M}from\"../webgl-engine/lib/glUtil3D.js\";import{newIntersectorResult as z}from\"../webgl-engine/lib/Intersector.js\";import{IntersectorType as H,StoreResults as V}from\"../webgl-engine/lib/IntersectorInterfaces.js\";import{RenderOccludedFlag as W}from\"../webgl-engine/lib/Material.js\";import{RenderSlot as Y}from\"../webgl-engine/lib/RenderSlot.js\";import{getSettings as Q}from\"../webgl-engine/lib/screenSizePerspectiveUtils.js\";import{VertexAttribute as X}from\"../webgl-engine/lib/VertexAttribute.js\";import{TERRAIN_ID as Z,getVerticalOffsetTerrain as K}from\"../webgl-engine/lib/verticalOffsetUtils.js\";import{DrawParameters as J}from\"../webgl-engine/materials/DrawParameters.js\";import{intersectAabbInvDirBefore as $,intersectTriangles as ee}from\"../webgl-engine/materials/internal/MaterialUtil.js\";import{TerrainTechnique as te}from\"../webgl-engine/shaders/TerrainTechnique.js\";import{TerrainTechniqueConfiguration as ie}from\"../webgl-engine/shaders/TerrainTechniqueConfiguration.js\";import{PrimitiveType as re}from\"../../webgl/enums.js\";const se=7,ne=10,oe=m();var ae;!function(e){e[e.Opaque=0]=\"Opaque\",e[e.Semitransparent=1]=\"Semitransparent\",e[e.TransparentWithDraped=2]=\"TransparentWithDraped\",e[e.Empty=3]=\"Empty\"}(ae||(ae={}));let le=class extends i{get _isGlobal(){return this._stage.viewingMode===T.Global}get shading(){return this._techniqueConfiguration.shading}set shading(e){this._techniqueConfiguration.shading=e}constructor(e){super(e),this.type=H.TERRAIN,this.isGround=!0,this._tileSize=256,this._techniqueConfiguration=new ie,this._passParameters=new F,this._rctx=null,this._renderDataPool=new o(D),this._patchGroups=new Map,this._patchGroupsDirty=!0,this._patchSortingDirty=!0,this._tileIterator=new A,this._highestVisibleLODTile=null,this._visible=!0,this._transparencyState=ae.Opaque,this._velvetOverground=!0,this._castShadows=!0,this._emptyTex=null,this._tileRenderer=null,this._stencilEnabledLayerExtents=new Array,this._numTilesRendered=0,this._numTilesCulled=0,this._numOriginsRendered=0,this.needsHighlight=!1,this.renderOccludedFlags=W.Occlude}initialize(){const e=[Y.OPAQUE_TERRAIN,Y.TRANSPARENT_TERRAIN,Y.OCCLUDED_TERRAIN];this._stage.addRenderPlugin(e,this)}destroy(){this._stage.removeRenderPlugin(this),C()}get canRender(){return this._visible&&!!this._rootTiles&&!this.renderingDisabled}set renderingDisabled(e){this._set(\"renderingDisabled\",!!e),this.setDirty()}set transparency(e){this._transparencyState!==e&&(this._techniqueConfiguration.invisible=e===ae.TransparentWithDraped||e===ae.Empty,this._transparencyState=e,this.setNeedsRender())}get transparency(){return this._transparencyState}get needsLinearDepth(){return this._overlayRenderer.hasWater}get renderPatchBorders(){return!!this._techniqueConfiguration.tileBorders}set renderPatchBorders(e){this._techniqueConfiguration.tileBorders!==e&&(this._techniqueConfiguration.tileBorders=e,this.setNeedsRender(),this.notifyChange(\"renderPatchBorders\"))}get visualizeNormals(){return!!this._techniqueConfiguration.visualizeNormals}set visualizeNormals(e){this._techniqueConfiguration.visualizeNormals!==e&&(this._techniqueConfiguration.visualizeNormals=e,this.setNeedsRender(),this.notifyChange(\"visualizeNormals\"))}get cullBackFaces(){return this._techniqueConfiguration.backfaceCullingEnabled}set cullBackFaces(e){this._techniqueConfiguration.backfaceCullingEnabled!==e&&(this._techniqueConfiguration.backfaceCullingEnabled=e,this.notifyChange(\"cullBackFaces\"),this.setNeedsRender())}set renderOrder(e){this._set(\"renderOrder\",e),this._setSortingDirty()}set velvetOverground(e){this._velvetOverground!==e&&(this._velvetOverground=e,this.setNeedsRender())}get layerUid(){return Z}get slicePlaneEnabled(){return this._techniqueConfiguration.hasSlicePlane}set slicePlaneEnabled(e){this._techniqueConfiguration.hasSlicePlane!==e&&(this._techniqueConfiguration.hasSlicePlane=e,this.setNeedsRender())}set textureFadingEnabled(e){this._techniqueConfiguration.textureFadingEnabled!==e&&(this._techniqueConfiguration.textureFadingEnabled=e,this.setNeedsRender())}set pbrMode(e){this._techniqueConfiguration.pbrMode!==e&&(this._techniqueConfiguration.pbrMode=e,this.setNeedsRender())}setDebugScreenSizePerspective(e){this._techniqueConfiguration.screenSizePerspective!==e&&(this._techniqueConfiguration.screenSizePerspective=e,this.setNeedsRender())}setRootTiles(e){this._rootTiles=e,this.setDirty()}setNeedsHighlight(e){this.needsHighlight=e,this.setNeedsRender()}setRenderOccludedOverlay(e){this.renderOccludedFlags=e?x:W.Occlude,this.setNeedsRender()}setStencilEnabledLayerExtents(e){this._stencilEnabledLayerExtents=e,this._setSortingDirty()}setTileSize(e){this._tileSize=e,r(this._tileRenderer)&&(this._tileRenderer.tileSize=e),this.setDirty()}_prepareTileForLoading(e){e.renderData||(e.renderData=this._renderDataPool.acquire(),e.renderData.init(e),e.renderData.localOrigin=this._getLocalOriginOfTile(e))}loadTile(e){this._prepareTileForLoading(e),this.updateTileGeometryState(e),this.updateTileTexture(e,E.TEXTURE_FADING)}updateTileTexture(e,t){r(this._tileRenderer)&&(this._tileRenderer.updateTileTexture(e,t===E.TEXTURE_FADING?R.FADING:R.UNFADED),this.setNeedsRender(),e.resetPendingUpdate(t))}updateTileGeometryState(e){for(const i of e.layerInfo[v.ELEVATION])i.pendingUpdates&=~E.GEOMETRY;e.resetPendingUpdate(E.GEOMETRY);const t=e.renderData.updateGeometryState();return t&&this.setDirty(),t}updateGeometryIfNeeded(e){e.isLoaded&&e.renderData.updateGeometryIfNeeded(this._rctx)}unloadTile(e){const t=e.renderData;t&&(t.releaseGeometry(),this._renderDataPool.release(t),t.clear(),e.renderData=null,e.setMemoryDirty(),this.setDirty())}_getLocalOriginOfTile(e){const t=ne-se,i=Math.max(0,Math.floor((e.level-t)/se)*se);if(this._isGlobal&&0===i)return p;for(;e.parent&&e.level>i;)e=e.parent;return e.centerAtSeaLevel}setVisibility(e){this._visible=e,this.setDirty()}getStats(){return{numTilesRendered:this._numTilesRendered,numTilesCulled:this._numTilesCulled,numOriginsRendered:this._numOriginsRendered}}set wireframe(e){this._get(\"wireframe\")!==e&&(this._set(\"wireframe\",e),this.setNeedsRender())}setDirty(e=B.UPDATE){this._patchGroupsDirty=!0,this._context.requestRender(e)}_setSortingDirty(e=B.UPDATE){this._patchSortingDirty=!0,this._context.requestRender(e)}setNeedsRender(e=B.UPDATE){this._context.requestRender(e)}initializeRenderContext(e){this._context=e,this._rctx=e.renderContext.rctx,this._techniqueRepository=e.techniqueRepository,this._tileRenderer=new q(this._rctx,this._tileSize,this._techniqueRepository),this.updateTileBackground(),this._emptyTex=M(this._rctx)}uninitializeRenderContext(){this._emptyTex=s(this._emptyTex),this._tileRenderer=s(this._tileRenderer)}intersect(e,t,i,s){if(!this._rootTiles||e.options.selectOpaqueTerrainOnly&&e.options.selectionMode&&this.transparency!==ae.Opaque)return;const o=he,a=ce;c(o,s,i),d(a,1/o[0],1/o[1],1/o[2]);const l=e.results.min,p=e.results.max,f=e.results.ground,_=e.options.store===V.MIN,g=!!e.results.ground.target,m=K(e.verticalOffset),T=e.tolerance;let R,v=_&&r(l.dist)?l.dist:1/0;const O=d=>{const g=d.renderData;if(!g?.vao)return;const O=g.geometryInfo;b(oe,O.boundingBox);const x=g.localOrigin;r(m)&&(m.localOrigin=x,m.applyToAabb(oe));const C=oe;if(de[0]=i[0]-x[0],de[1]=i[1]-x[1],de[2]=i[2]-x[2],!$(C,de,a,T,v))return;const D=(e,t,i)=>{e.set(this.type,d,t,i,h),v=_&&r(l.dist)?l.dist:1/0},P=(a,h)=>{if(r(h)&&a>=0&&(e.options.backfacesTerrain||u(h,o)<0)&&(e.options.invisibleTerrain||!e.options.selectionMode||null==t||t(i,s,a))){if((null==f.dist||a<f.dist)&&D(f,a,h),e.options.isFiltered)return;e.options.store===V.ALL&&(n(R)?(R=z(e.ray),D(R,a,h),e.results.all.push(R)):a<R.dist&&D(R,a,h)),(null==l.dist||a<l.dist)&&D(l,a,h),e.options.store!==V.MIN&&(null==p.dist||a>p.dist)&&D(p,a,h)}},S=ue;c(S,s,x);const q=O.indices,E=O.vertexAttributes,A=E.getField(X.POSITION,y),w=new k(A.typedBuffer,3,!1,E.stride/4),N=O.indexCount/3;if(n(m)&&N>j){const e=d.renderData;n(e.intersectionData)&&(e.intersectionData=new G(q,0,N,w)),e.intersectionData.intersectRay({r0:de,r1:S},P)}else ee(de,S,0,N,q,w,null,m,P)},x=this._rootTiles;if(r(x)){(()=>{const t=this._tileIterator;t.reset(x);const s=e.options.invisibleTerrain;for(let e=t.next();e;e=t.next())!(e.visible||s&&e.intersectsClippingArea)||!r(m)&&!e.intersectsRay(i,o,T,v)||g&&this._useStencilForTile(e)?t.skipSubtree():O(e)})()}}processScaleRangeQueries(e,t){if(!t.done)for(this._updatePatchGroups();e.updating&&!t.done;){e.prepare();for(const t of this._patchGroups.values())for(const i of t)r(i.renderData?.textureReference)&&e.queriesForTile(i);e.process(),t.madeProgress()}}prepareTechnique(e){if(e.bindParameters.slot===Y.OCCLUDED_TERRAIN){if(0==(e.renderOccludedMask&x))return null}else{const t=this.transparency===ae.Opaque?Y.OPAQUE_TERRAIN:Y.TRANSPARENT_TERRAIN;if(e.bindParameters.slot!==t)return null}switch(e.output){case I.Color:return this.transparency===ae.Empty?null:(this._techniqueConfiguration.hasScreenSpaceReflections=e.bindParameters.ssr.enabled,this._techniqueConfiguration.hasCloudsReflections=r(e.bindParameters.cloudsFade.data),this._techniqueConfiguration.receiveShadows=e.bindParameters.shadowMap.ready,this._techniqueConfiguration.receiveAmbientOcclusion=e.bindParameters.ssaoHelper.active,this._techniqueConfiguration.overlayMode=this._overlayRenderer.isEmpty?L.Disabled:this._overlayRenderer.hasWater?L.EnabledWithWater:L.Enabled,this._updateTechnique(I.Color,e.bindParameters.slot===Y.OCCLUDED_TERRAIN));case I.Shadow:case I.ShadowExcludeHighlight:return this._castShadows&&1===e.bindParameters.lighting.globalFactor?(this._techniqueConfiguration.receiveShadows=this._techniqueConfiguration.receiveAmbientOcclusion=!1,this._updateTechnique(I.Shadow,!1)):null;case I.Depth:return this.transparency===ae.Empty?null:(this._techniqueConfiguration.receiveShadows=this._techniqueConfiguration.receiveAmbientOcclusion=!1,this._updateTechnique(I.Depth,!1));case I.Normal:return this.transparency===ae.Empty?null:(this._techniqueConfiguration.receiveShadows=this._techniqueConfiguration.receiveAmbientOcclusion=!1,this._updateTechnique(I.Normal,!1));case I.ObjectAndLayerIdColor:return this.transparency===ae.Empty?null:this._updateTechnique(I.ObjectAndLayerIdColor,!1);case I.Highlight:return this.transparency!==ae.Empty&&this.needsHighlight?(this._techniqueConfiguration.receiveShadows=this._techniqueConfiguration.receiveAmbientOcclusion=!1,this._updateTechnique(I.Highlight,!1)):null}return null}render(e,t){const i=1===e.bindParameters.lighting.globalFactor;switch(this._updatePatchGroups(),t.useStencil=!1,e.output){case I.Color:{const i=e.bindParameters.slot===Y.OCCLUDED_TERRAIN?O.Occluded:O.ColorAndWater;this.transparency===ae.Opaque?this._renderMaterialPass(e,t,i):e.offscreenRenderingHelper.renderToTargets((()=>this._renderMaterialPass(e,t,i)),e.offscreenRenderingHelper.tmpColor,e.offscreenRenderingHelper.mainDepth,[0,0,0,0]);break}case I.Depth:case I.Normal:this._renderAuxiliaryPass(e,t,O.None);break;case I.Highlight:this.needsHighlight&&this._renderAuxiliaryPass(e,t,O.Highlight);break;case I.Shadow:case I.ShadowExcludeHighlight:this._castShadows&&i&&this._renderAuxiliaryPass(e,t,O.None);break;case I.ObjectAndLayerIdColor:this._renderAuxiliaryPass(e,t,O.ObjectAndLayerIdColor)}}_renderMaterialPass(e,t,i){const{rctx:r}=e;this._passParameters.overlaySource=i,r.bindTechnique(t,this._passParameters,e.bindParameters),this._numTilesRendered=0,this._numTilesCulled=0,this._numOriginsRendered=0,this._renderPatchGroups(e,t,i)}_renderAuxiliaryPass(e,t,i){const r=e.rctx;this._passParameters.overlaySource=i,r.bindTechnique(t,this._passParameters,e.bindParameters),this._renderPatchGroupsAuxiliary(e,t,i)}updateTileBackground(e=null){if(n(this._tileRenderer))return;const i=this._tileRenderer;let s=null;if(r(e)){const i=t.toUnitRGBA(e);s=f(i[0]||0,i[1]||0,i[2]||0)}i.setBackground(s),this._allTiles.forAll((e=>i.updateTileTexture(e,R.FADING))),this._techniqueConfiguration.tileBlendInput=i.backgroundIsGrid?U.GridComposite:r(i.backgroundColor)?U.ColorComposite:U.LayerOnly,this.setNeedsRender()}_updatePatchGroups(){if(this._patchGroupsDirty&&(this._highestVisibleLODTile=null,this._rebuildPatchGroups(),this._patchGroupsDirty=!1,this._patchSortingDirty=!0),this._patchSortingDirty&&this.renderOrder!==P.NONE){const e=Array.from(this._patchGroups.values()),t=this._stencilEnabledLayerExtents;for(const i of e)w(this.renderOrder,i,t);e.sort(((e,t)=>N(e[0],t[0],this.renderOrder))),this._patchGroups=new Map(e.map((e=>[e[0].renderData.localOrigin,e]))),this._patchSortingDirty=!1}}_rebuildPatchGroups(){const e=this._rootTiles;if(!n(e)){e[0]?.surface.checkAllTilesWaterproofness(),this._patchGroups.clear();for(const t of e)this._rebuildPatchGroupsForRootTile(t)}}_rebuildPatchGroupsForRootTile(e){const t=this._tileIterator;for(t.resetOne(e);!t.done;){const e=t.next(),i=e.renderData;if(!i){this._numTilesCulled++;continue}if(!e.visible){this._numTilesCulled++,t.skipSubtree();continue}const r=i.localOrigin;let s=this._patchGroups.get(r);s||(s=new Array,this._patchGroups.set(r,s)),s.push(e),(!this._highestVisibleLODTile||e.vlevel>this._highestVisibleLODTile.vlevel)&&(this._highestVisibleLODTile=e),t.skipSubtree()}}_useStencilForTile(e){for(const t of this._stencilEnabledLayerExtents)if(e.intersectsExtent(t))return!0;return!1}_renderPatchGroupsAuxiliary(e,t,i){const r=this._stencilEnabledLayerExtents.length>0;this._patchGroups.forEach((s=>{const n=s[0].renderData.localOrigin;t.program.bindDraw(new J(n),e.bindParameters,this._passParameters);for(let o=0;o<s.length;o++)this._renderPatch(e,t,s[o],re.TRIANGLES,r,i)})),e.rctx.bindVAO(null)}_renderPatchGroups(e,t,i){const s=e.bindParameters.camera,o=t.program;if(this._techniqueConfiguration.screenSizePerspective&&this.pointsOfInterest){const e=Q(this._stage.viewingMode,this._ellipsoidRadius),t=this.pointsOfInterest.centerOnSurfaceFrequent.distance;e.update({distance:t,fovY:s.fovY})}const a=this._stencilEnabledLayerExtents.length>0,l=i===O.Occluded;l&&(o.bindTexture(\"tex\",this._emptyTex),o.setUniform3fv(\"textureOpacities\",p),o.setUniform4fv(\"texOffsetAndScale\",g));const h=r(this._tileRenderer)&&r(this._tileRenderer.backgroundColor)?this._tileRenderer.backgroundColor:p;this._techniqueConfiguration.tileBlendInput===U.ColorComposite&&o.setUniform3fv(\"backgroundColor\",h);const c=this.wireframe?re.LINES:re.TRIANGLES;this._techniqueConfiguration.textureFadingEnabled&&o.bindTexture(\"texNext\",this._emptyTex);const d=this._patchGroups;for(const u of d.values()){const s=u[0].renderData.localOrigin;t.program.bindDraw(new J(s),e.bindParameters,this._passParameters),this._numOriginsRendered++;for(const h of u){const s=h.renderData,d=s.textureReference;if(!n(d)){if(!l){o.setUniform4fv(\"texOffsetAndScale\",d.offsetAndScale),o.bindTexture(\"tex\",d.texture.texture);const e=s.textureFadeFactor,t=e<1?s.nextTextureReference:null;this._techniqueConfiguration.textureFadingEnabled&&r(t)&&e<1?(o.setUniform1f(\"fadeFactor\",e),o.setUniform4fv(\"nextTexOffsetAndScale\",t.offsetAndScale),o.setUniform3fv(\"nextTexOpacities\",t.opacities),o.bindTexture(\"texNext\",t.texture.texture)):o.setUniform1f(\"fadeFactor\",1),s.textureIsFading&&this.setNeedsRender(),o.setUniform3fv(\"textureOpacities\",d.opacities)}this._renderPatch(e,t,h,c,a,i),h.renderOrder=this._numTilesRendered,this._numTilesRendered++}}}e.rctx.bindVAO(null)}_renderPatch(e,t,i,r,s,o){const a=i.renderData,l=a.vao,h=l.indexBuffer;if(n(h))return void(S&&console.error(\"Rendered tile with no indices: \",i.lij,\" : \",a));const c=t.program;o===O.None||this._overlayRenderer.isEmpty||this._bindOverlayPatchData(c,a.overlay),s&&(t.useStencil=this._useStencilForTile(i),t.bindPipelineState(e.rctx,e.bindParameters.slot));const d=a.geometryInfo.indexCount;e.rctx.bindVAO(l),c.assertCompatibleVertexAttributeLocations(l),e.rctx.drawElements(r,d,h.indexType,0)}_bindOverlayPatchData(e,t){e.setUniform4fv(\"overlayTexOffset\",t.offsets),e.setUniform4fv(\"overlayTexScale\",t.scales)}_updateTechnique(e,t){return this._techniqueConfiguration.output=e,e===I.Color&&(this._techniqueConfiguration.atmosphere=this._isGlobal&&this._velvetOverground),this._techniqueConfiguration.renderOccluded=t,this._techniqueConfiguration.stencilEnabled=!1,this._shaderTechnique=this._techniqueRepository.releaseAndAcquire(te,this._techniqueConfiguration,this._shaderTechnique),this._shaderTechnique}get test(){return{tileRenderer:this._tileRenderer}}};e([a({constructOnly:!0})],le.prototype,\"_overlayRenderer\",void 0),e([a({constructOnly:!0})],le.prototype,\"_stage\",void 0),e([a({readOnly:!0})],le.prototype,\"_isGlobal\",null),e([a({constructOnly:!0})],le.prototype,\"_allTiles\",void 0),e([a({constructOnly:!0})],le.prototype,\"_ellipsoidRadius\",void 0),e([a({value:!1})],le.prototype,\"renderingDisabled\",null),e([a()],le.prototype,\"renderPatchBorders\",null),e([a()],le.prototype,\"visualizeNormals\",null),e([a()],le.prototype,\"cullBackFaces\",null),e([a({value:P.FRONT_TO_BACK})],le.prototype,\"renderOrder\",null),e([a()],le.prototype,\"wireframe\",null),le=e([l(\"esri.views.3d.terrain.TerrainRenderer\")],le);const he=_(),ce=_(),de=_(),ue=_();export{le as TerrainRenderer,ae as TransparencyMode};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}