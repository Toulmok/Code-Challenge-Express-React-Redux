{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { screenPointObjectToArray as e, createScreenPointArray as r, createRenderScreenPointArray as t } from \"../../../../core/screenUtils.js\";\nimport { s as o } from \"../../../../chunks/vec4.js\";\nimport { c as a } from \"../../../../chunks/vec4f64.js\";\nimport { BooleanPassUniform as n } from \"../core/shaderModules/BooleanPassUniform.js\";\nimport { Float4PassUniform as s } from \"../core/shaderModules/Float4PassUniform.js\";\nimport { NoParameters as i, glsl as u } from \"../core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as m } from \"../core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as l } from \"../core/shaderModules/Texture2DPassUniform.js\";\nimport { VertexAttribute as d } from \"../lib/VertexAttribute.js\";\nclass c {}\nclass f extends i {\n  constructor() {\n    super(...arguments), this.textures = new c();\n  }\n}\nfunction v() {\n  const e = new m();\n  return e.attributes.add(d.POSITION, \"vec2\"), e.vertex.uniforms.add(new s(\"drawPosition\", (e, r) => x(e, r))), e.varyings.add(\"vUV\", \"vec2\"), e.vertex.code.add(u`void main(void) {\nvUV = position;\ngl_Position = vec4(drawPosition.xy + vec2(position - 0.5) * drawPosition.zw, 0.0, 1.0);\n}`), e.fragment.uniforms.add(new l(\"textureInput\", e => e.textures.input)), e.fragment.uniforms.add(new l(\"textureMask\", e => e.textures.mask)), e.fragment.uniforms.add(new l(\"textureOverlay\", e => e.textures.overlay)), e.fragment.uniforms.add(new n(\"maskEnabled\", e => e.magnifier.maskEnabled)), e.fragment.uniforms.add(new n(\"overlayEnabled\", e => e.magnifier.overlayEnabled)), e.fragment.code.add(u`const float barrelFactor = 1.1;\nvec2 barrel(vec2 uv) {\nvec2 uvn = uv * 2.0 - 1.0;\nif (uvn.x == 0.0 && uvn.y == 0.0) {\nreturn vec2(0.5, 0.5);\n}\nfloat theta = atan(uvn.y, uvn.x);\nfloat r = pow(length(uvn), barrelFactor);\nreturn r * vec2(cos(theta), sin(theta)) * 0.5 + 0.5;\n}\nvoid main() {\nfloat mask = maskEnabled ? texture2D(textureMask, vUV).a : 1.0;\nvec4 inputColor = texture2D(textureInput, barrel(vUV)) * mask;\nvec4 overlayColor = overlayEnabled ? texture2D(textureOverlay, vUV) : vec4(0);\ngl_FragColor = overlayColor + (1.0 - overlayColor.a) * inputColor;\n}`), e;\n}\nfunction x(r, t) {\n  const a = t.camera.pixelRatio,\n    n = r.magnifier.offset.x * a,\n    s = r.magnifier.offset.y * a;\n  e(r.magnifier.position, p);\n  const i = t.camera.screenToRender(p, g),\n    u = Math.ceil(a * r.magnifier.size),\n    m = t.camera.fullWidth,\n    l = t.camera.fullHeight;\n  return o(h, (i[0] + n) / m * 2 - 1, (i[1] - s) / l * 2 - 1, u / m * 2, u / l * 2);\n}\nconst p = r(),\n  g = t(),\n  h = a();\nexport { f as MagnifierPassParameters, c as TextureResources, v as build };","map":{"version":3,"names":["screenPointObjectToArray","e","createScreenPointArray","r","createRenderScreenPointArray","t","s","o","c","a","BooleanPassUniform","n","Float4PassUniform","NoParameters","i","glsl","u","ShaderBuilder","m","Texture2DPassUniform","l","VertexAttribute","d","f","constructor","arguments","textures","v","attributes","add","POSITION","vertex","uniforms","x","varyings","code","fragment","input","mask","overlay","magnifier","maskEnabled","overlayEnabled","camera","pixelRatio","offset","y","position","p","screenToRender","g","Math","ceil","size","fullWidth","fullHeight","h","MagnifierPassParameters","TextureResources","build"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/shaders/Magnifier.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{screenPointObjectToArray as e,createScreenPointArray as r,createRenderScreenPointArray as t}from\"../../../../core/screenUtils.js\";import{s as o}from\"../../../../chunks/vec4.js\";import{c as a}from\"../../../../chunks/vec4f64.js\";import{BooleanPassUniform as n}from\"../core/shaderModules/BooleanPassUniform.js\";import{Float4PassUniform as s}from\"../core/shaderModules/Float4PassUniform.js\";import{NoParameters as i,glsl as u}from\"../core/shaderModules/interfaces.js\";import{ShaderBuilder as m}from\"../core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as l}from\"../core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as d}from\"../lib/VertexAttribute.js\";class c{}class f extends i{constructor(){super(...arguments),this.textures=new c}}function v(){const e=new m;return e.attributes.add(d.POSITION,\"vec2\"),e.vertex.uniforms.add(new s(\"drawPosition\",((e,r)=>x(e,r)))),e.varyings.add(\"vUV\",\"vec2\"),e.vertex.code.add(u`void main(void) {\nvUV = position;\ngl_Position = vec4(drawPosition.xy + vec2(position - 0.5) * drawPosition.zw, 0.0, 1.0);\n}`),e.fragment.uniforms.add(new l(\"textureInput\",(e=>e.textures.input))),e.fragment.uniforms.add(new l(\"textureMask\",(e=>e.textures.mask))),e.fragment.uniforms.add(new l(\"textureOverlay\",(e=>e.textures.overlay))),e.fragment.uniforms.add(new n(\"maskEnabled\",(e=>e.magnifier.maskEnabled))),e.fragment.uniforms.add(new n(\"overlayEnabled\",(e=>e.magnifier.overlayEnabled))),e.fragment.code.add(u`const float barrelFactor = 1.1;\nvec2 barrel(vec2 uv) {\nvec2 uvn = uv * 2.0 - 1.0;\nif (uvn.x == 0.0 && uvn.y == 0.0) {\nreturn vec2(0.5, 0.5);\n}\nfloat theta = atan(uvn.y, uvn.x);\nfloat r = pow(length(uvn), barrelFactor);\nreturn r * vec2(cos(theta), sin(theta)) * 0.5 + 0.5;\n}\nvoid main() {\nfloat mask = maskEnabled ? texture2D(textureMask, vUV).a : 1.0;\nvec4 inputColor = texture2D(textureInput, barrel(vUV)) * mask;\nvec4 overlayColor = overlayEnabled ? texture2D(textureOverlay, vUV) : vec4(0);\ngl_FragColor = overlayColor + (1.0 - overlayColor.a) * inputColor;\n}`),e}function x(r,t){const a=t.camera.pixelRatio,n=r.magnifier.offset.x*a,s=r.magnifier.offset.y*a;e(r.magnifier.position,p);const i=t.camera.screenToRender(p,g),u=Math.ceil(a*r.magnifier.size),m=t.camera.fullWidth,l=t.camera.fullHeight;return o(h,(i[0]+n)/m*2-1,(i[1]-s)/l*2-1,u/m*2,u/l*2)}const p=r(),g=t(),h=a();export{f as MagnifierPassParameters,c as TextureResources,v as build};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}