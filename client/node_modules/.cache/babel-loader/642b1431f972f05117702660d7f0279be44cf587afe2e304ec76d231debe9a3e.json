{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport { HandleOwner as t } from \"../../../core/HandleOwner.js\";\nimport r from \"../../../core/Handles.js\";\nimport { someMap as s } from \"../../../core/MapUtils.js\";\nimport { isSome as o, isNone as n, unwrap as a } from \"../../../core/maybe.js\";\nimport { eachAlwaysValues as i, throwIfAborted as c } from \"../../../core/promiseUtils.js\";\nimport { sync as u, watch as p, syncAndInitial as d } from \"../../../core/reactiveUtils.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as h } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { k as g } from \"../../../chunks/vec2.js\";\nimport { d as m, c as y } from \"../../../chunks/vec3.js\";\nimport { c as S } from \"../../../chunks/vec3f64.js\";\nimport { g as f } from \"../../../chunks/common.js\";\nimport { SnappingTypes as w } from \"../../../layers/graphics/data/QueryEngineResult.js\";\nimport { absoluteHeightElevationInfo as v } from \"../../../support/elevationInfoUtils.js\";\nimport { VerticalHalfPlaneConstraint as _ } from \"./SnappingConstraint.js\";\nimport { SnappingDomain as j } from \"./SnappingDomain.js\";\nimport { anyMapPointToSnappingPoint as C } from \"./SnappingPoint.js\";\nimport { sortCandidatesInPlace as F, screenDistance as x } from \"./snappingUtils.js\";\nimport { DrapedEdgeSnappingCandidate as b } from \"./candidates/DrapedEdgeSnappingCandidate.js\";\nimport { EdgeSnappingCandidate as R } from \"./candidates/EdgeSnappingCandidate.js\";\nimport { FeatureSnappingCandidate as L } from \"./candidates/FeatureSnappingCandidate.js\";\nimport { RightAngleSnappingCandidate as M, OtherVertexType as E } from \"./candidates/RightAngleSnappingCandidate.js\";\nimport { vectorToScreenPoint as H } from \"../support/viewUtils.js\";\nlet V = class extends t {\n  get updating() {\n    return s(this.snappingSources, _ref => {\n      let {\n        snappingSource: e\n      } = _ref;\n      return e.updating;\n    }) || this.updatingHandles.updating;\n  }\n  get snappingSources() {\n    const e = this._get(\"snappingSources\") || new Map(),\n      t = new Map();\n    if (o(this.options) && o(this.options.featureSources)) for (const r of this.options.featureSources.items) {\n      const s = r.layer.uid,\n        n = e.get(s);\n      if (n) {\n        e.delete(s), t.set(s, n);\n        continue;\n      }\n      if (!r.layer.loaded) {\n        this.updatingHandles.addPromise(r.layer.load());\n        continue;\n      }\n      const a = this._createSourceInfo(r);\n      o(a) && t.set(s, a);\n    }\n    for (const [, r] of e) r.destroy();\n    return t;\n  }\n  constructor(e) {\n    super(e), this.options = null, this._domain = j.FEATURE, this._sourceModules = {\n      featureService: {\n        module: null,\n        loader: null\n      },\n      featureCollection: {\n        module: null,\n        loader: null\n      },\n      graphics: {\n        module: null,\n        loader: null\n      },\n      notes: {\n        module: null,\n        loader: null\n      },\n      scene: {\n        module: null,\n        loader: null\n      }\n    };\n  }\n  initialize() {\n    this.updatingHandles.add(() => this.snappingSources, () => this.notifyChange(\"updating\"), u), o(this.view) && this.handles.add([this.view.on(\"layerview-create\", e => this._updateLayerView(e.layer, e.layerView)), this.view.on(\"layerview-destroy\", e => this._updateLayerView(e.layer, null))]);\n  }\n  _updateLayerView(e, t) {\n    for (const [, r] of this.snappingSources) r.snappingSource.layerSource.layer === e && (r.layerView = t);\n  }\n  destroy() {\n    this._set(\"options\", null);\n    for (const [, e] of this.snappingSources) e.destroy();\n  }\n  async fetchCandidates(e, t, r, s) {\n    if (!(t & this._domain) || n(this.options) || !this.options.effectiveFeatureEnabled) return [];\n    const u = [],\n      p = this._computeScreenSizeDistanceParameters(e, r),\n      d = {\n        distance: p,\n        mode: a(this.view)?.type ?? \"2d\",\n        point: e,\n        coordinateHelper: r.coordinateHelper,\n        types: this._types\n      };\n    for (const [, {\n      snappingSource: n,\n      layerView: a\n    }] of this.snappingSources) !n.layerSource.enabled || o(a) && a.suspended || u.push(n.fetchCandidates(d, s).then(e => e.filter(e => !this._candidateIsExcluded(n, e, r.excludeFeature))));\n    const l = (await i(u)).flat();\n    return this._addRightAngleCandidates(l, e, p, r), c(s), F(e, l), l;\n  }\n  _addRightAngleCandidates(e, t, r, s) {\n    const n = o(s.vertexHandle) ? s.vertexHandle.rightEdge?.rightVertex?.pos : o(s.editGeometryOperations) && \"polygon\" === s.editGeometryOperations.data.type ? a(s.editGeometryOperations.data.components[0]?.getFirstVertex())?.pos : null,\n      i = o(s.vertexHandle) ? s.vertexHandle.leftEdge?.leftVertex?.pos : o(s.editGeometryOperations) ? a(s.editGeometryOperations.data.components[0]?.getLastVertex())?.pos : null,\n      {\n        view: c\n      } = this,\n      u = C(n, c, s),\n      p = C(i, c, s),\n      d = e.length;\n    for (let o = 0; o < d; o++) this._addRightAngleCandidate(e[o], p, t, r, e), this._addRightAngleCandidate(e[o], u, t, r, e);\n  }\n  _addRightAngleCandidate(e, t, r, s, o) {\n    if (n(t) || !G(e)) return;\n    const a = e.constraint.closestTo(t),\n      i = (a[0] - r[0]) / s.x,\n      c = (a[1] - r[1]) / s.y,\n      {\n        start: u,\n        end: p\n      } = e.constraint;\n    if (i * i + c * c <= 1) {\n      const r = new M({\n        targetPoint: a,\n        otherVertex: t,\n        otherVertexType: E.NEXT,\n        previousVertex: g(a, u) > g(a, p) ? u : p,\n        constraint: new _(t, a),\n        objectId: e.objectId,\n        isDraped: e.isDraped\n      });\n      o.push(r);\n    }\n  }\n  _computeScreenSizeDistanceParameters(e, t) {\n    let r = o(this.options) ? this.options.distance * (\"touch\" === t.pointer ? this.options.touchSensitivityMultiplier : 1) : 0;\n    return n(this.view) ? {\n      x: r,\n      y: r,\n      z: r,\n      distance: r\n    } : \"2d\" === this.view.type ? (r *= this.view.resolution, {\n      x: r,\n      y: r,\n      z: r,\n      distance: r\n    }) : this._computeScreenSizeDistanceParameters3D(e, r, this.view, t);\n  }\n  _computeScreenSizeDistanceParameters3D(e, t, r, s) {\n    const {\n      spatialReference: o\n    } = s;\n    r.renderCoordsHelper.toRenderCoords(e, o, D);\n    const n = r.state.camera.computeScreenPixelSizeAt(D),\n      a = n * r.renderCoordsHelper.unitInMeters / r.mapCoordsHelper.unitInMeters,\n      i = t * a,\n      c = H(e, o, v, r),\n      u = c ? O(c, e, a, 0, 0, r, s) : 0,\n      p = c ? O(c, e, 0, a, 0, r, s) : 0,\n      d = c ? O(c, e, 0, 0, a, r, s) : 0;\n    return {\n      x: 0 === u ? 0 : i / u,\n      y: 0 === p ? 0 : i / p,\n      z: 0 === d ? 0 : i / d,\n      distance: n * t\n    };\n  }\n  get _types() {\n    return w.EDGE | w.VERTEX;\n  }\n  _candidateIsExcluded(e, t, r) {\n    if (n(r)) return !1;\n    const s = this._getCandidateObjectId(t);\n    if (n(s)) return !1;\n    const o = e.layerSource.layer;\n    return \"graphics\" === o.type ? r.uid === s : r.sourceLayer === o && !(!r.attributes || !(\"objectIdField\" in o)) && r.attributes[o.objectIdField] === s;\n  }\n  _getCandidateObjectId(e) {\n    return e instanceof L ? e.objectId : null;\n  }\n  _createSourceInfo(e) {\n    const t = this._createFeatureSnappingSourceType(e);\n    if (n(t)) return null;\n    if (\"loading\" in t) return this.updatingHandles.addPromise(t.loading.then(() => {\n      this.destroyed || this.notifyChange(\"snappingSources\");\n    })), null;\n    const r = o(this.view) ? this.view.allLayerViews.find(t => t.layer === e.layer) : null;\n    return new I(t.source, r);\n  }\n  _createFeatureSnappingSourceType(e) {\n    switch (e.layer.type) {\n      case \"feature\":\n      case \"geojson\":\n      case \"csv\":\n      case \"oriented-imagery\":\n      case \"subtype-group\":\n      case \"wfs\":\n        return this._createFeatureSnappingSourceFeatureLayer(e);\n      case \"graphics\":\n        return this._createFeatureSnappingSourceGraphicsLayer(e);\n      case \"map-notes\":\n        return this._createFeatureSnappingSourceMapNotesLayer(e);\n      case \"scene\":\n      case \"building-scene\":\n        return this._createFeatureSnappingSourceSceneLayer(e);\n    }\n    return null;\n  }\n  _createFeatureSnappingSourceSceneLayer(e) {\n    const {\n      view: t\n    } = this;\n    if (n(t) || \"3d\" !== t.type) return null;\n    const r = this._getSourceModule(\"scene\");\n    return o(r.module) ? {\n      source: new r.module.SceneLayerSnappingSource({\n        layerSource: e,\n        view: t\n      })\n    } : {\n      loading: r.loader\n    };\n  }\n  _createFeatureSnappingSourceFeatureLayer(e) {\n    switch (e.layer.source?.type) {\n      case \"feature-layer\":\n      case \"oriented-imagery\":\n        {\n          const t = this._getSourceModule(\"featureService\");\n          return o(t.module) ? {\n            source: new t.module.FeatureServiceSnappingSource({\n              spatialReference: this.spatialReference,\n              view: this.view,\n              layerSource: e\n            })\n          } : {\n            loading: t.loader\n          };\n        }\n      case \"memory\":\n      case \"csv\":\n      case \"geojson\":\n      case \"wfs\":\n        {\n          if (\"mesh\" === e.layer.geometryType) return null;\n          const t = this._getSourceModule(\"featureCollection\");\n          return o(t.module) ? {\n            source: new t.module.FeatureCollectionSnappingSource({\n              layerSource: e,\n              view: this.view\n            })\n          } : {\n            loading: t.loader\n          };\n        }\n    }\n    return null;\n  }\n  _createFeatureSnappingSourceGraphicsLayer(e) {\n    const t = this._getSourceModule(\"graphics\");\n    return o(t.module) ? {\n      source: new t.module.GraphicsSnappingSource({\n        getGraphicsLayers: () => [e.layer],\n        spatialReference: this.spatialReference,\n        view: this.view,\n        layerSource: e\n      })\n    } : {\n      loading: t.loader\n    };\n  }\n  _createFeatureSnappingSourceMapNotesLayer(e) {\n    const t = this._getSourceModule(\"notes\");\n    return o(t.module) ? {\n      source: new t.module.GraphicsSnappingSource({\n        getGraphicsLayers: () => o(e.layer.sublayers) ? e.layer.sublayers.toArray() : [],\n        spatialReference: this.spatialReference,\n        view: this.view,\n        layerSource: e\n      })\n    } : {\n      loading: t.loader\n    };\n  }\n  _getSourceModule(e) {\n    const t = this._sourceModules[e];\n    if (n(t.loader)) {\n      const r = this._loadSourceModule(e).then(e => {\n        t.module = e;\n      });\n      return t.loader = r, {\n        module: t.module,\n        loader: r\n      };\n    }\n    return {\n      module: t.module,\n      loader: t.loader\n    };\n  }\n  _loadSourceModule(e) {\n    const t = this.updatingHandles;\n    switch (e) {\n      case \"featureService\":\n        return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));\n      case \"featureCollection\":\n        return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));\n      case \"graphics\":\n      case \"notes\":\n        return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));\n      case \"scene\":\n        return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"));\n    }\n  }\n};\ne([l({\n  constructOnly: !0\n})], V.prototype, \"spatialReference\", void 0), e([l({\n  constructOnly: !0\n})], V.prototype, \"view\", void 0), e([l()], V.prototype, \"options\", void 0), e([l({\n  readOnly: !0\n})], V.prototype, \"updating\", null), e([l({\n  readOnly: !0\n})], V.prototype, \"snappingSources\", null), V = e([h(\"esri.views.interactive.snapping.FeatureSnappingEngine\")], V);\nclass I {\n  constructor(e, t) {\n    this.snappingSource = e, this.layerView = t, this.handles = new r();\n    const s = this.snappingSource.layerSource.layer;\n    if (\"refresh\" in s) {\n      const t = s;\n      this.handles.add(t.on(\"refresh\", () => e.refresh()));\n    }\n    this.handles.add([p(() => e.updating, t => e.layerSource.updating = t, d), p(() => e.availability, t => e.layerSource.availability = t, d)]);\n  }\n  destroy() {\n    this.snappingSource.destroy(), this.handles.destroy();\n  }\n}\nfunction G(e) {\n  return (e instanceof R || e instanceof b) && !P(e);\n}\nfunction P(_ref2) {\n  let {\n    constraint: {\n      start: e,\n      end: t\n    }\n  } = _ref2;\n  const r = m(e, t),\n    s = g(e, t);\n  return r < f() || s / r < A;\n}\nfunction O(e, t, r, s, o, n, _ref3) {\n  let {\n    spatialReference: a\n  } = _ref3;\n  const i = y(z, t);\n  i[0] += r, i[1] += s, i[2] += o;\n  const c = H(i, a, v, n);\n  return c ? x(c, e) : 1 / 0;\n}\nconst D = S(),\n  z = S(),\n  A = 1e-4;\nexport { V as FeatureSnappingEngine };","map":{"version":3,"names":["_","e","HandleOwner","t","r","someMap","s","isSome","o","isNone","n","unwrap","a","eachAlwaysValues","i","throwIfAborted","c","sync","u","watch","p","syncAndInitial","d","property","l","subclass","h","k","g","m","y","S","f","SnappingTypes","w","absoluteHeightElevationInfo","v","VerticalHalfPlaneConstraint","SnappingDomain","j","anyMapPointToSnappingPoint","C","sortCandidatesInPlace","F","screenDistance","x","DrapedEdgeSnappingCandidate","b","EdgeSnappingCandidate","R","FeatureSnappingCandidate","L","RightAngleSnappingCandidate","M","OtherVertexType","E","vectorToScreenPoint","H","V","updating","snappingSources","_ref","snappingSource","updatingHandles","_get","Map","options","featureSources","items","layer","uid","get","delete","set","loaded","addPromise","load","_createSourceInfo","destroy","constructor","_domain","FEATURE","_sourceModules","featureService","module","loader","featureCollection","graphics","notes","scene","initialize","add","notifyChange","view","handles","on","_updateLayerView","layerView","layerSource","_set","fetchCandidates","effectiveFeatureEnabled","_computeScreenSizeDistanceParameters","distance","mode","type","point","coordinateHelper","types","_types","enabled","suspended","push","then","filter","_candidateIsExcluded","excludeFeature","flat","_addRightAngleCandidates","vertexHandle","rightEdge","rightVertex","pos","editGeometryOperations","data","components","getFirstVertex","leftEdge","leftVertex","getLastVertex","length","_addRightAngleCandidate","G","constraint","closestTo","start","end","targetPoint","otherVertex","otherVertexType","NEXT","previousVertex","objectId","isDraped","pointer","touchSensitivityMultiplier","z","resolution","_computeScreenSizeDistanceParameters3D","spatialReference","renderCoordsHelper","toRenderCoords","D","state","camera","computeScreenPixelSizeAt","unitInMeters","mapCoordsHelper","O","EDGE","VERTEX","_getCandidateObjectId","sourceLayer","attributes","objectIdField","_createFeatureSnappingSourceType","loading","destroyed","allLayerViews","find","I","source","_createFeatureSnappingSourceFeatureLayer","_createFeatureSnappingSourceGraphicsLayer","_createFeatureSnappingSourceMapNotesLayer","_createFeatureSnappingSourceSceneLayer","_getSourceModule","SceneLayerSnappingSource","FeatureServiceSnappingSource","geometryType","FeatureCollectionSnappingSource","GraphicsSnappingSource","getGraphicsLayers","sublayers","toArray","_loadSourceModule","constructOnly","prototype","readOnly","refresh","availability","P","_ref2","A","_ref3","FeatureSnappingEngine"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../core/HandleOwner.js\";import r from\"../../../core/Handles.js\";import{someMap as s}from\"../../../core/MapUtils.js\";import{isSome as o,isNone as n,unwrap as a}from\"../../../core/maybe.js\";import{eachAlwaysValues as i,throwIfAborted as c}from\"../../../core/promiseUtils.js\";import{sync as u,watch as p,syncAndInitial as d}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{k as g}from\"../../../chunks/vec2.js\";import{d as m,c as y}from\"../../../chunks/vec3.js\";import{c as S}from\"../../../chunks/vec3f64.js\";import{g as f}from\"../../../chunks/common.js\";import{SnappingTypes as w}from\"../../../layers/graphics/data/QueryEngineResult.js\";import{absoluteHeightElevationInfo as v}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as _}from\"./SnappingConstraint.js\";import{SnappingDomain as j}from\"./SnappingDomain.js\";import{anyMapPointToSnappingPoint as C}from\"./SnappingPoint.js\";import{sortCandidatesInPlace as F,screenDistance as x}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as b}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as R}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as L}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as M,OtherVertexType as E}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as H}from\"../support/viewUtils.js\";let V=class extends t{get updating(){return s(this.snappingSources,(({snappingSource:e})=>e.updating))||this.updatingHandles.updating}get snappingSources(){const e=this._get(\"snappingSources\")||new Map,t=new Map;if(o(this.options)&&o(this.options.featureSources))for(const r of this.options.featureSources.items){const s=r.layer.uid,n=e.get(s);if(n){e.delete(s),t.set(s,n);continue}if(!r.layer.loaded){this.updatingHandles.addPromise(r.layer.load());continue}const a=this._createSourceInfo(r);o(a)&&t.set(s,a)}for(const[,r]of e)r.destroy();return t}constructor(e){super(e),this.options=null,this._domain=j.FEATURE,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){this.updatingHandles.add((()=>this.snappingSources),(()=>this.notifyChange(\"updating\")),u),o(this.view)&&this.handles.add([this.view.on(\"layerview-create\",(e=>this._updateLayerView(e.layer,e.layerView))),this.view.on(\"layerview-destroy\",(e=>this._updateLayerView(e.layer,null)))])}_updateLayerView(e,t){for(const[,r]of this.snappingSources)r.snappingSource.layerSource.layer===e&&(r.layerView=t)}destroy(){this._set(\"options\",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,t,r,s){if(!(t&this._domain)||n(this.options)||!this.options.effectiveFeatureEnabled)return[];const u=[],p=this._computeScreenSizeDistanceParameters(e,r),d={distance:p,mode:a(this.view)?.type??\"2d\",point:e,coordinateHelper:r.coordinateHelper,types:this._types};for(const[,{snappingSource:n,layerView:a}]of this.snappingSources)!n.layerSource.enabled||o(a)&&a.suspended||u.push(n.fetchCandidates(d,s).then((e=>e.filter((e=>!this._candidateIsExcluded(n,e,r.excludeFeature))))));const l=(await i(u)).flat();return this._addRightAngleCandidates(l,e,p,r),c(s),F(e,l),l}_addRightAngleCandidates(e,t,r,s){const n=o(s.vertexHandle)?s.vertexHandle.rightEdge?.rightVertex?.pos:o(s.editGeometryOperations)&&\"polygon\"===s.editGeometryOperations.data.type?a(s.editGeometryOperations.data.components[0]?.getFirstVertex())?.pos:null,i=o(s.vertexHandle)?s.vertexHandle.leftEdge?.leftVertex?.pos:o(s.editGeometryOperations)?a(s.editGeometryOperations.data.components[0]?.getLastVertex())?.pos:null,{view:c}=this,u=C(n,c,s),p=C(i,c,s),d=e.length;for(let o=0;o<d;o++)this._addRightAngleCandidate(e[o],p,t,r,e),this._addRightAngleCandidate(e[o],u,t,r,e)}_addRightAngleCandidate(e,t,r,s,o){if(n(t)||!G(e))return;const a=e.constraint.closestTo(t),i=(a[0]-r[0])/s.x,c=(a[1]-r[1])/s.y,{start:u,end:p}=e.constraint;if(i*i+c*c<=1){const r=new M({targetPoint:a,otherVertex:t,otherVertexType:E.NEXT,previousVertex:g(a,u)>g(a,p)?u:p,constraint:new _(t,a),objectId:e.objectId,isDraped:e.isDraped});o.push(r)}}_computeScreenSizeDistanceParameters(e,t){let r=o(this.options)?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return n(this.view)?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,s){const{spatialReference:o}=s;r.renderCoordsHelper.toRenderCoords(e,o,D);const n=r.state.camera.computeScreenPixelSizeAt(D),a=n*r.renderCoordsHelper.unitInMeters/r.mapCoordsHelper.unitInMeters,i=t*a,c=H(e,o,v,r),u=c?O(c,e,a,0,0,r,s):0,p=c?O(c,e,0,a,0,r,s):0,d=c?O(c,e,0,0,a,r,s):0;return{x:0===u?0:i/u,y:0===p?0:i/p,z:0===d?0:i/d,distance:n*t}}get _types(){return w.EDGE|w.VERTEX}_candidateIsExcluded(e,t,r){if(n(r))return!1;const s=this._getCandidateObjectId(t);if(n(s))return!1;const o=e.layerSource.layer;return\"graphics\"===o.type?r.uid===s:r.sourceLayer===o&&(!(!r.attributes||!(\"objectIdField\"in o))&&r.attributes[o.objectIdField]===s)}_getCandidateObjectId(e){return e instanceof L?e.objectId:null}_createSourceInfo(e){const t=this._createFeatureSnappingSourceType(e);if(n(t))return null;if(\"loading\"in t)return this.updatingHandles.addPromise(t.loading.then((()=>{this.destroyed||this.notifyChange(\"snappingSources\")}))),null;const r=o(this.view)?this.view.allLayerViews.find((t=>t.layer===e.layer)):null;return new I(t.source,r)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}_createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(n(t)||\"3d\"!==t.type)return null;const r=this._getSourceModule(\"scene\");return o(r.module)?{source:new r.module.SceneLayerSnappingSource({layerSource:e,view:t})}:{loading:r.loader}}_createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":{const t=this._getSourceModule(\"featureService\");return o(t.module)?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":{if(\"mesh\"===e.layer.geometryType)return null;const t=this._getSourceModule(\"featureCollection\");return o(t.module)?{source:new t.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:t.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const t=this._getSourceModule(\"graphics\");return o(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_createFeatureSnappingSourceMapNotesLayer(e){const t=this._getSourceModule(\"notes\");return o(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>o(e.layer.sublayers)?e.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_getSourceModule(e){const t=this._sourceModules[e];if(n(t.loader)){const r=this._loadSourceModule(e).then((e=>{t.module=e}));return t.loader=r,{module:t.module,loader:r}}return{module:t.module,loader:t.loader}}_loadSourceModule(e){const t=this.updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}};e([l({constructOnly:!0})],V.prototype,\"spatialReference\",void 0),e([l({constructOnly:!0})],V.prototype,\"view\",void 0),e([l()],V.prototype,\"options\",void 0),e([l({readOnly:!0})],V.prototype,\"updating\",null),e([l({readOnly:!0})],V.prototype,\"snappingSources\",null),V=e([h(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],V);class I{constructor(e,t){this.snappingSource=e,this.layerView=t,this.handles=new r;const s=this.snappingSource.layerSource.layer;if(\"refresh\"in s){const t=s;this.handles.add(t.on(\"refresh\",(()=>e.refresh())))}this.handles.add([p((()=>e.updating),(t=>e.layerSource.updating=t),d),p((()=>e.availability),(t=>e.layerSource.availability=t),d)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}function G(e){return(e instanceof R||e instanceof b)&&!P(e)}function P({constraint:{start:e,end:t}}){const r=m(e,t),s=g(e,t);return r<f()||s/r<A}function O(e,t,r,s,o,n,{spatialReference:a}){const i=y(z,t);i[0]+=r,i[1]+=s,i[2]+=o;const c=H(i,a,v,n);return c?x(c,e):1/0}const D=S(),z=S(),A=1e-4;export{V as FeatureSnappingEngine};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}