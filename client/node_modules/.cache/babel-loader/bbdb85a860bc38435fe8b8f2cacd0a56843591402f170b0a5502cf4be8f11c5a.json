{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { i as e } from \"./vec3.js\";\nimport { ScreenSpacePass as r } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";\nimport { ReadLinearDepth as o } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";\nimport { Float2DrawUniform as t } from \"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";\nimport { Float2PassUniform as a } from \"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";\nimport { FloatPassUniform as n } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { glsl as l } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as s } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DDrawUniform as i } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";\nimport { Texture2DPassUniform as d } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nconst f = 4;\nfunction c() {\n  const c = new s(),\n    u = c.fragment;\n  c.include(r);\n  const m = (f + 1) / 2,\n    p = 1 / (2 * m * m);\n  return u.include(o), u.uniforms.add([new d(\"depthMap\", e => e.depthTexture), new i(\"tex\", e => e.colorTexture), new t(\"blurSize\", e => e.blurSize), new n(\"projScale\", (r, o) => {\n    const t = e(o.camera.eye, o.camera.center);\n    return t > 5e4 ? Math.max(0, r.projScale - (t - 5e4)) : r.projScale;\n  }), new a(\"nearFar\", (e, r) => r.camera.nearFar)]), u.code.add(l`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture2D(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${l.float(p)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `), u.code.add(l`\n    void main(void) {\n      float b = 0.0;\n      float w_total = 0.0;\n\n      float center_d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float sharpness = -0.05 * projScale / center_d;\n      for (int r = -${l.int(f)}; r <= ${l.int(f)}; ++r) {\n        float rf = float(r);\n        vec2 uvOffset = uv + rf * blurSize;\n        blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n      }\n\n      gl_FragColor = vec4(b / w_total);\n    }\n  `), c;\n}\nconst u = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  build: c\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { u as S, c as b };","map":{"version":3,"names":["i","e","ScreenSpacePass","r","ReadLinearDepth","o","Float2DrawUniform","t","Float2PassUniform","a","FloatPassUniform","n","glsl","l","ShaderBuilder","s","Texture2DDrawUniform","Texture2DPassUniform","d","f","c","u","fragment","include","m","p","uniforms","add","depthTexture","colorTexture","blurSize","camera","eye","center","Math","max","projScale","nearFar","code","float","int","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","S","b"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/chunks/SSAOBlur.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{i as e}from\"./vec3.js\";import{ScreenSpacePass as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadLinearDepth as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{Float2PassUniform as a}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as l}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as s}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DDrawUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";const f=4;function c(){const c=new s,u=c.fragment;c.include(r);const m=(f+1)/2,p=1/(2*m*m);return u.include(o),u.uniforms.add([new d(\"depthMap\",(e=>e.depthTexture)),new i(\"tex\",(e=>e.colorTexture)),new t(\"blurSize\",(e=>e.blurSize)),new n(\"projScale\",((r,o)=>{const t=e(o.camera.eye,o.camera.center);return t>5e4?Math.max(0,r.projScale-(t-5e4)):r.projScale})),new a(\"nearFar\",((e,r)=>r.camera.nearFar))]),u.code.add(l`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture2D(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${l.float(p)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `),u.code.add(l`\n    void main(void) {\n      float b = 0.0;\n      float w_total = 0.0;\n\n      float center_d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float sharpness = -0.05 * projScale / center_d;\n      for (int r = -${l.int(f)}; r <= ${l.int(f)}; ++r) {\n        float rf = float(r);\n        vec2 uvOffset = uv + rf * blurSize;\n        blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n      }\n\n      gl_FragColor = vec4(b / w_total);\n    }\n  `),c}const u=Object.freeze(Object.defineProperty({__proto__:null,build:c},Symbol.toStringTag,{value:\"Module\"}));export{u as S,c as b};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}