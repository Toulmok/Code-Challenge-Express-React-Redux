{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../../geometry.js\";\nimport { remove as e } from \"../../../../core/arrayUtils.js\";\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { onAbort as r, createAbortError as s } from \"../../../../core/promiseUtils.js\";\nimport { TaskPriority as i, noBudget as o } from \"../../../support/Scheduler.js\";\nimport n from \"../../../../geometry/Multipoint.js\";\nclass a {\n  constructor(e, t) {\n    this.spatialReference = e, this._view = t;\n  }\n  getElevation(e, t, r) {\n    return this._view.elevationProvider.getElevation(e, t, 0, this.spatialReference, r);\n  }\n  async queryElevation(e, t, r, s, i) {\n    return this._view.elevationProvider.queryElevation(e, t, 0, this.spatialReference, i, r, s);\n  }\n}\nclass l {\n  constructor(e, t, r, s) {\n    this.spatialReference = t, this._getElevationQueryProvider = r, this._queries = new Array(), this._queryOptions = {\n      ...s,\n      ignoreInvisibleLayers: !0\n    }, this._frameTask = e.registerTask(i.ELEVATION_QUERY, this);\n  }\n  destroy() {\n    this._frameTask.remove();\n  }\n  queryElevation(t, i, o) {\n    let n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    return new Promise((a, l) => {\n      const u = {\n        x: t,\n        y: i,\n        minDemResolution: n,\n        result: {\n          resolve: a,\n          reject: l\n        },\n        signal: o\n      };\n      this._queries.push(u), r(o, () => {\n        e(this._queries, u), l(s());\n      });\n    });\n  }\n  get running() {\n    return this._queries.length > 0;\n  }\n  runTask(e) {\n    const i = this._queries;\n    this._queries = [];\n    const o = this._getElevationQueryProvider();\n    if (!o) return i.forEach(e => e.result.reject()), void e.madeProgress();\n    const a = i.map(e => [e.x, e.y]),\n      l = i.reduce((e, t) => Math.min(e, t.minDemResolution), 1 / 0),\n      u = new n({\n        points: a,\n        spatialReference: this.spatialReference\n      }),\n      c = i.length > 1 && i.some(e => !!e.signal) ? new AbortController() : null,\n      h = t(c) ? c.signal : i[0].signal;\n    if (t(c)) {\n      let e = 0;\n      i.forEach(t => r(t.signal, () => {\n        e++, t.result.reject(s()), e === i.length && c.abort();\n      }));\n    }\n    const m = {\n      ...this._queryOptions,\n      minDemResolution: l,\n      signal: h\n    };\n    o.queryElevation(u, m).then(e => {\n      i.forEach((r, i) => {\n        t(r.signal) && r.signal.aborted ? r.result.reject(s()) : r.result.resolve(e.geometry.points[i][2]);\n      });\n    }).catch(e => {\n      i.forEach(t => t.result.reject(e));\n    }), e.madeProgress();\n  }\n  get test() {\n    const e = this;\n    return {\n      update: () => e._queries.length > 0 && e.runTask(o)\n    };\n  }\n}\nexport { l as ElevationQuery, a as ViewElevationProvider };","map":{"version":3,"names":["remove","e","isSome","t","onAbort","r","createAbortError","s","TaskPriority","i","noBudget","o","n","a","constructor","spatialReference","_view","getElevation","elevationProvider","queryElevation","l","_getElevationQueryProvider","_queries","Array","_queryOptions","ignoreInvisibleLayers","_frameTask","registerTask","ELEVATION_QUERY","destroy","arguments","length","undefined","Promise","u","x","y","minDemResolution","result","resolve","reject","signal","push","running","runTask","forEach","madeProgress","map","reduce","Math","min","points","c","some","AbortController","h","abort","m","then","aborted","geometry","catch","test","update","ElevationQuery","ViewElevationProvider"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/ElevationQuery.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import{remove as e}from\"../../../../core/arrayUtils.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{onAbort as r,createAbortError as s}from\"../../../../core/promiseUtils.js\";import{TaskPriority as i,noBudget as o}from\"../../../support/Scheduler.js\";import n from\"../../../../geometry/Multipoint.js\";class a{constructor(e,t){this.spatialReference=e,this._view=t}getElevation(e,t,r){return this._view.elevationProvider.getElevation(e,t,0,this.spatialReference,r)}async queryElevation(e,t,r,s,i){return this._view.elevationProvider.queryElevation(e,t,0,this.spatialReference,i,r,s)}}class l{constructor(e,t,r,s){this.spatialReference=t,this._getElevationQueryProvider=r,this._queries=new Array,this._queryOptions={...s,ignoreInvisibleLayers:!0},this._frameTask=e.registerTask(i.ELEVATION_QUERY,this)}destroy(){this._frameTask.remove()}queryElevation(t,i,o,n=0){return new Promise(((a,l)=>{const u={x:t,y:i,minDemResolution:n,result:{resolve:a,reject:l},signal:o};this._queries.push(u),r(o,(()=>{e(this._queries,u),l(s())}))}))}get running(){return this._queries.length>0}runTask(e){const i=this._queries;this._queries=[];const o=this._getElevationQueryProvider();if(!o)return i.forEach((e=>e.result.reject())),void e.madeProgress();const a=i.map((e=>[e.x,e.y])),l=i.reduce(((e,t)=>Math.min(e,t.minDemResolution)),1/0),u=new n({points:a,spatialReference:this.spatialReference}),c=i.length>1&&i.some((e=>!!e.signal))?new AbortController:null,h=t(c)?c.signal:i[0].signal;if(t(c)){let e=0;i.forEach((t=>r(t.signal,(()=>{e++,t.result.reject(s()),e===i.length&&c.abort()}))))}const m={...this._queryOptions,minDemResolution:l,signal:h};o.queryElevation(u,m).then((e=>{i.forEach(((r,i)=>{t(r.signal)&&r.signal.aborted?r.result.reject(s()):r.result.resolve(e.geometry.points[i][2])}))})).catch((e=>{i.forEach((t=>t.result.reject(e)))})),e.madeProgress()}get test(){const e=this;return{update:()=>e._queries.length>0&&e.runTask(o)}}}export{l as ElevationQuery,a as ViewElevationProvider};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}