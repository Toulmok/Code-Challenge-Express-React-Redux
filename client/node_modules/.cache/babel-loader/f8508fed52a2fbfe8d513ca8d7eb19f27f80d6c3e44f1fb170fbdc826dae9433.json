{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport \"../../../../renderers/ClassBreaksRenderer.js\";\nimport \"../../../../renderers/DictionaryRenderer.js\";\nimport \"../../../../renderers/DotDensityRenderer.js\";\nimport \"../../../../renderers/HeatmapRenderer.js\";\nimport \"../../../../renderers/PieChartRenderer.js\";\nimport \"../../../../renderers/Renderer.js\";\nimport \"../../../../renderers/SimpleRenderer.js\";\nimport i from \"../../../../renderers/UniqueValueRenderer.js\";\nimport \"../../../../renderers/support/jsonUtils.js\";\nimport \"../../../../symbols.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport \"../../../../core/has.js\";\nimport r from \"../../../../core/Error.js\";\nimport s from \"../../../../core/Handles.js\";\nimport { makeHandle as a } from \"../../../../core/handleUtils.js\";\nimport n from \"../../../../core/Logger.js\";\nimport { someMap as o, findInMap as l } from \"../../../../core/MapUtils.js\";\nimport { isSome as h, unwrapOr as d, isNone as p, destroyMaybe as c, removeMaybe as y, get as m, disposeMaybe as g, unwrap as u } from \"../../../../core/maybe.js\";\nimport b from \"../../../../core/PooledArray.js\";\nimport { throwIfAborted as _, eachAlways as f, createDeferred as v, isAbortError as C } from \"../../../../core/promiseUtils.js\";\nimport { watch as S, when as w, on as G, syncAndInitial as x, whenOnce as P } from \"../../../../core/reactiveUtils.js\";\nimport { schedule as R } from \"../../../../core/scheduling.js\";\nimport { property as D } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as E } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { diff as I, isEmpty as U } from \"../../../../core/accessorSupport/diffUtils.js\";\nimport { s as A, a as O, g as L } from \"../../../../chunks/vec3.js\";\nimport { c as j } from \"../../../../chunks/vec3f64.js\";\nimport { projectVectorToVector as V, projectXYZToVector as F, canProjectWithoutEngine as T, projectBuffer as k } from \"../../../../geometry/projection.js\";\nimport { create as z, center as W, fromRect as M, equals as N } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { create as B } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { equals as H } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport q from \"../../../../layers/Layer.js\";\nimport { getObjectId as Y, computeAABB as $, hasGeometry as Z } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport { hydrateGraphic as J } from \"../../../../layers/graphics/hydratedFeatures.js\";\nimport { isSupportedRenderer3D as Q, validateTo3D as K } from \"../../../../renderers/support/rendererConversion.js\";\nimport { loadArcade as X } from \"../../../../support/arcadeOnDemand.js\";\nimport { getDefaultSymbol3D as ee } from \"../../../../symbols/support/defaults3D.js\";\nimport { to3D as ie } from \"../../../../symbols/support/symbolConversion.js\";\nimport { ViewElevationProvider as te } from \"./ElevationQuery.js\";\nimport { VisibilityFlag as re, VisibilityGroup as se } from \"./enums.js\";\nimport { extractExpressionInfo as ae, createContext as ne } from \"./featureExpressionInfoUtils.js\";\nimport { Graphics3DFeatureStore as oe } from \"./Graphics3DFeatureStore.js\";\nimport le from \"./Graphics3DGraphicCreationContext.js\";\nimport { Graphics3DSymbolCreationContext as he } from \"./Graphics3DSymbolCreationContext.js\";\nimport { make as de } from \"./Graphics3DSymbolFactory.js\";\nimport pe from \"./Graphics3DWebStyleSymbol.js\";\nimport { GraphicStateTracking as ce } from \"./GraphicStateTracking.js\";\nimport { computeCentroid as ye } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as me } from \"./interfaces.js\";\nimport { LoadStatus as ge } from \"./Loadable.js\";\nimport { SpatialIndex2D as ue } from \"./SpatialIndex2D.js\";\nimport { averageSymbolComplexities as be, defaultSymbolComplexity as _e } from \"./symbolComplexity.js\";\nimport { StageLayerElevationProvider as fe } from \"../support/StageLayerElevationProvider.js\";\nimport { toBoundingRect as ve } from \"../../support/extentUtils.js\";\nimport { PropertiesPool as Ce } from \"../../support/PropertiesPool.js\";\nimport { GridLocalOriginFactory as Se } from \"../../webgl-engine/lib/GridLocalOriginFactory.js\";\nimport { UpdatePolicy as we } from \"../../webgl-engine/lib/UpdatePolicy.js\";\nimport { WebGLLayer as Ge } from \"../../webgl-engine/lib/WebGLLayer.js\";\nimport { ImmediateTask as xe, noBudget as Pe, TaskPriority as Re, Task as De } from \"../../../support/Scheduler.js\";\nimport Ee from \"../../../../geometry/Extent.js\";\nimport Ie from \"../../../../geometry/Point.js\";\nimport Ue from \"../../../../symbols/LabelSymbol3D.js\";\nimport Ae from \"../../../../symbols/TextSymbol.js\";\nimport Oe from \"../../../../symbols/WebStyleSymbol.js\";\nvar Le;\nconst je = j(),\n  Ve = z(),\n  Fe = \"esri.views.3d.layers.graphics.Graphics3DCore\",\n  Te = n.getLogger(Fe);\nlet ke = Le = class extends t {\n  get _viewSpatialReference() {\n    return this.owner.view.spatialReference;\n  }\n  get spatialIndex() {\n    return this._spatialIndex || (this._spatialIndex = new ue({\n      objectIdField: this.owner.layer?.objectIdField,\n      spatialReference: this._viewSpatialReference,\n      hasZ: !!this.hasZ,\n      hasM: !!this.hasM\n    }), this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values()))), this._spatialIndex.update(), this._spatialIndex;\n  }\n  get numberOfGraphics() {\n    return this._numberOfGraphics;\n  }\n  get effectiveUpdatePolicy() {\n    return h(this.currentRenderer) && \"dictionary\" === this.currentRenderer.type ? we.ASYNC : d(this._forcedUpdatePolicy, this.preferredUpdatePolicy);\n  }\n  get featureStore() {\n    return this._featureStore;\n  }\n  get initializePromise() {\n    return this._initializePromise;\n  }\n  get scaleVisibility() {\n    return this._scaleVisibility;\n  }\n  get elevationAlignment() {\n    return this._elevationAlignment;\n  }\n  get objectStates() {\n    return this._objectStates;\n  }\n  get filterVisibility() {\n    return this._filterVisibility;\n  }\n  get updating() {\n    return !!(this._graphicsWaitingForSymbol.size > 0 || this.running || this._elevationAlignment?.updating || h(this._scaleVisibility) && this._scaleVisibility.updating || h(this._filterVisibility) && this._filterVisibility.updating || this._rendererChangeAbortController || this._elevationInfoChangeAbortController || this._updatingPendingLoadedGraphicsChange || this._frameTask.updating || this._loadingSymbols > 0);\n  }\n  get running() {\n    return this._pendingUpdates.size > 0 || !!this._spatialIndex?.updating;\n  }\n  get suspendedOrOutsideOfView() {\n    return this.owner.suspended || !!this.owner.suspendInfo?.outsideOfView;\n  }\n  get updatingRemaining() {\n    return this.updating ? this._pendingUpdates.size + .1 * (this._spatialIndex?.updatingRemaining || 0) + .1 * (this._elevationAlignment?.updatingRemaining || 0) : 0;\n  }\n  get displayFeatureLimit() {\n    const e = this.owner && this.owner.view && this.owner.view.qualitySettings,\n      i = e ? e.graphics3D.minTotalNumberOfFeatures : 0,\n      t = e ? e.graphics3D.maxTotalNumberOfFeatures : 0,\n      r = e ? e.graphics3D.maxTotalNumberOfPrimitives : 0,\n      s = this.averageSymbolComplexity,\n      a = Math.max(1, h(s) ? s.primitivesPerFeature : 1),\n      n = h(s) && s.drawCallsPerFeature > 0 ? t / s.drawCallsPerFeature * .3 : t,\n      o = Math.ceil(r / a),\n      l = Math.max(i, Math.min(t, o, n)),\n      d = this._get(\"displayFeatureLimit\");\n    return d && d.minimumTotalNumberOfFeatures === i && d.maximumTotalNumberOfFeatures === t && d.maximumTotalNumberOfPrimitives === r && d.averageSymbolComplexity === s && d.maximumNumberOfFeatures === l ? d : {\n      minimumTotalNumberOfFeatures: i,\n      maximumTotalNumberOfFeatures: t,\n      maximumTotalNumberOfPrimitives: r,\n      averageSymbolComplexity: s,\n      maximumNumberOfFeatures: l\n    };\n  }\n  get averageSymbolComplexity() {\n    const e = be(this._symbolComplexities),\n      i = this._get(\"averageSymbolComplexity\");\n    return 0 === e.numComplexities || h(i) && (e.estimated && (i.primitivesPerFeature >= e.primitivesPerFeature || i.primitivesPerCoordinate >= e.primitivesPerCoordinate || i.drawCallsPerFeature >= e.drawCallsPerFeature) || i.primitivesPerFeature === e.primitivesPerFeature && i.primitivesPerCoordinate === e.primitivesPerCoordinate && i.drawCallsPerFeature === e.drawCallsPerFeature) ? i : e;\n  }\n  get usedMemory() {\n    const e = h(this.averageSymbolComplexity) && this.labelsEnabled ? this.averageSymbolComplexity.memory.bytesPerFeatureLabel * this._numberOfGraphics : 0,\n      i = this._getSymbolComplexitiesUsed().reduce((e, i) => e + i.memory.resourceBytes, 0);\n    return this._usedMemory + e + i;\n  }\n  get usedMemoryPerGraphic() {\n    if (this._usedMemory && this._numberOfGraphics) {\n      const e = this._numberOfGraphics / (this._numberOfGraphics + Math.max(this._pendingAdds, this._pendingRemoves));\n      return this._usedMemory / this._numberOfGraphics * e;\n    }\n    if (h(this.averageSymbolComplexity)) {\n      const e = this.labelsEnabled ? this.averageSymbolComplexity.memory.bytesPerFeatureLabel : 0;\n      return this.averageSymbolComplexity.memory.bytesPerFeature + e;\n    }\n    return 0;\n  }\n  get unprocessedMemoryEstimate() {\n    return (this._pendingAdds - this._pendingRemoves) * this.usedMemoryPerGraphic;\n  }\n  get _symbolComplexities() {\n    return this.currentRenderer ? this._getSymbolComplexitiesUsedOrRenderer(this.currentRenderer) : this._getSymbolComplexitiesUsed();\n  }\n  get visible() {\n    return this._visible;\n  }\n  _getConvertedSymbol(e) {\n    if (\"web-style\" === e.type) return e.clone();\n    const i = this._symbolConversionCache.get(e.id);\n    if (h(i)) return i;\n    const t = ie(e, {\n        geometryType: this.layer?.geometryType ?? void 0,\n        retainId: !0,\n        hasLabelingContext: this._hasLabelingContext(e)\n      }),\n      r = t.symbol || null;\n    return p(r) && t.error && Te.error(t.error.message), this._symbolConversionCache.set(e.id, r), r;\n  }\n  _getSymbolComplexitiesUsedOrRenderer(e) {\n    if (p(e)) return [];\n    const i = e.getSymbols(),\n      t = \"backgroundFillSymbol\" in e ? e.backgroundFillSymbol : null;\n    if (!(t || i && i.length)) return [];\n    const r = [],\n      s = this._getSymbolComplexityUsedOrRenderer(t);\n    h(s) && r.push(s);\n    for (const a of i) {\n      const e = this._getSymbolComplexityUsedOrRenderer(a);\n      h(e) && r.push(e);\n    }\n    return r;\n  }\n  _getSymbolComplexityUsedOrRenderer(e) {\n    if (p(e)) return null;\n    const i = this._symbols.get(e.id);\n    if (h(i)) return i.complexity;\n    const t = this._getConvertedSymbol(e);\n    return h(t) ? _e(t) : null;\n  }\n  _getSymbolComplexitiesUsed() {\n    const e = [];\n    return this._symbols.forEach(i => {\n      h(i) && e.push(i.complexity);\n    }), e;\n  }\n  get _objectIdField() {\n    return this.layer.objectIdField;\n  }\n  constructor(e) {\n    super(e), this._propertiesPool = new Ce({\n      computedExtent: Ee\n    }, this), this.computedExtent = null, this.currentRenderer = null, this.rendererHasGeometryOperations = !1, this._graphicStateTracking = null, this.graphics3DGraphics = new Map(), this.stageLayer = null, this.stage = null, this._graphicsDrapedUids = new Set(), this._graphicsBySymbol = new Map(), this._symbolConversionCache = new Map(), this._symbols = new Map(), this._graphicsWithoutSymbol = new Map(), this._graphicsWaitingForSymbol = new Map(), this._graphicsUpdateId = 0, this._handles = new s(), this._frameTask = xe, this._suspendSymbolCleanup = !1, this._arcadeOnDemand = null, this._rendererChangeAbortController = null, this._elevationInfoChangeAbortController = null, this._initializeAbortController = null, this._scaleVisibility = null, this._filterVisibility = null, this._spatialIndex = null, this.extentPadding = 0, this._updatingPendingLoadedGraphicsChange = null, this._featureStore = null, this._deconflictor = null, this._labeler = null, this._objectStates = null, this._viewElevationProvider = null, this._stageLayerElevationProvider = null, this._sharedSymbolResourcesOwnerHandle = null, this._whenGraphics3DGraphicRequests = {}, this._pendingUpdates = new Map(), this._numberOfGraphics = 0, this._numberOfGraphicsProvidingElevation = 0, this._pendingAdds = 0, this._pendingRemoves = 0, this._applyPendingRemovesFirst = !1, this._loadingSymbols = 0, this._pendingUpdatesPool = new b({\n      allocator: e => e || new We(),\n      deallocator: e => (e.clear(), e)\n    }), this._symbolWarningLogged = !1, this._geometryWarningLogged = !1, this._objectIdInvisibleSet = new Set(), this._whenSymbolRemoved = new b(), this.preferredUpdatePolicy = we.SYNC, this._forcedUpdatePolicy = null, this.elevationFeatureExpressionEnabled = !0, this.owner = null, this.layer = null, this.graphicSymbolSupported = !0, this.getRenderingInfoWithoutRenderer = !1, this.setUidToIdOnAdd = !0, this.hasZ = null, this.hasM = null, this._usedMemory = 0, this._visible = !1, this._startCreateGraphics = !1, this.symbolCreationContext = new he(e.owner.view.resourceController.scheduler, (e, i) => this._frameTask.schedule(e, i));\n  }\n  initialize() {\n    this._featureStore = new oe({\n      objectIdField: this.owner.layer && this.owner.layer.objectIdField,\n      hasZ: !!this.hasZ,\n      hasM: !!this.hasM,\n      viewSpatialReference: this._viewSpatialReference,\n      featureSpatialReference: this.owner.featureSpatialReference,\n      getSpatialIndex: () => this.spatialIndex,\n      forEach: e => this.graphics3DGraphics.forEach(e)\n    });\n    const e = (e, i, t) => this.spatialIndex.queryGraphicUIDsInExtent(e, i, t),\n      {\n        componentFactories: i\n      } = this;\n    if (h(i.elevationAlignment)) {\n      const t = i.elevationAlignment(this, e);\n      this._elevationAlignment = t;\n    }\n    if (h(i.scaleVisibility)) {\n      const t = i.scaleVisibility(this, e);\n      this._scaleVisibility = t;\n    }\n    if (h(i.filterVisibility)) {\n      const e = i.filterVisibility({\n        featureStore: this._featureStore,\n        getFeatureCount: () => this.graphics3DGraphics.size,\n        updateFeatureVisibilities: e => this.modifyGraphics3DGraphicVisibilities(i => i.setVisibilityFlag(re.FILTER, e(Y(i.graphic, this._objectIdField)), se.GRAPHIC)),\n        setAllFeaturesVisibility: e => this.modifyGraphics3DGraphicVisibilities(i => i.setVisibilityFlag(re.FILTER, e, se.GRAPHIC)),\n        clearFeaturesVisibility: () => this.modifyGraphics3DGraphicVisibilities(e => e.clearVisibilityFlag(re.FILTER))\n      });\n      this._filterVisibility = e;\n    }\n    if (h(i.deconflictor)) {\n      const e = i.deconflictor(this);\n      this._deconflictor = e;\n    }\n    if (h(i.labeler) && h(this._scaleVisibility)) {\n      const e = i.labeler(this, this._scaleVisibility);\n      this._labeler = e;\n    }\n    if (h(i.objectStates)) {\n      const e = i.objectStates(this);\n      this._objectStates = e;\n    }\n    this._initializeAbortController = new AbortController(), this._initializePromise = this._initializeAsync();\n  }\n  async _initializeAsync() {\n    const e = this._initializeAbortController?.signal,\n      i = this.owner.view;\n    this._viewElevationProvider = new te(this._viewSpatialReference, i), this._initializeStage(i, this.layer.uid);\n    const t = i.sharedSymbolResources;\n    this.symbolCreationContext.sharedResources = t, this._sharedSymbolResourcesOwnerHandle = t.addGraphicsOwner(this.owner), h(this.currentRenderer) && (this.symbolCreationContext.renderer = this.currentRenderer), this.symbolCreationContext.stage = this.stage, this.symbolCreationContext.streamDataRequester = t.streamDataRequester, this.symbolCreationContext.renderCoordsHelper = i.renderCoordsHelper, this.symbolCreationContext.layer = this.layer, this.symbolCreationContext.graphicsCoreOwner = this.owner, this.symbolCreationContext.localOriginFactory = new Se(i.renderSpatialReference), this.symbolCreationContext.elevationProvider = i.elevationProvider, this.symbolCreationContext.notifyGraphicGeometryChanged = e => this.notifyGraphicGeometryChanged(e), this.symbolCreationContext.notifyGraphicVisibilityChanged = e => this.notifyGraphicVisibilityChanged(e);\n    const r = ae(this.layer.elevationInfo, this.elevationFeatureExpressionEnabled);\n    if (this.symbolCreationContext.featureExpressionInfoContext = await ne(r, this._viewSpatialReference, e, Te), _(e), this.symbolCreationContext.screenSizePerspectiveEnabled = i.screenSizePerspectiveEnabled && !!this.layer.screenSizePerspectiveEnabled, this.symbolCreationContext.slicePlaneEnabled = !!this.owner.slicePlaneEnabled, this.symbolCreationContext.physicalBasedRenderingEnabled = !!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled, this.symbolCreationContext.skipHighSymbolLods = !!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods, \"drapeSourceType\" in this.owner) {\n      const {\n        owner: e\n      } = this;\n      this.symbolCreationContext.drapeSourceRenderer = i.basemapTerrain.overlayManager.registerGeometryDrapeSource(e), this._handles.add(a(() => i.basemapTerrain.overlayManager.unregisterDrapeSource(e)));\n    }\n    this._handles.add([S(() => this.suspendedOrOutsideOfView, () => this._frameTask.reschedule(() => this._updateLayerVisibility())), S(() => [this.layer?.screenSizePerspectiveEnabled, this.owner.view.screenSizePerspectiveEnabled], () => {\n      const e = i.screenSizePerspectiveEnabled && !!this.layer.screenSizePerspectiveEnabled;\n      e !== this.symbolCreationContext.screenSizePerspectiveEnabled && (this.symbolCreationContext.screenSizePerspectiveEnabled = e, this._labeler?.reset(), this.recreateAllGraphicsAndSymbols());\n    }), S(() => this.owner.slicePlaneEnabled, e => this._slicePlaneEnabledChange(!!e)), S(() => this.owner.view.state?.rasterPixelRatio, () => this._pixelRatioChange()), S(() => !!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled, e => this._physicalBasedRenderingChange(e)), S(() => !!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods, e => this._skipHighSymbolLoDsChange(e)), w(() => i.basemapTerrain?.tilingScheme, e => {\n      if (!e.spatialReference.equals(this.symbolCreationContext.overlaySR) && h(i.basemapTerrain.spatialReference) && (this.symbolCreationContext.overlaySR = i.basemapTerrain.spatialReference), this._handles.has(\"loaded-graphics\")) this.recreateAllGraphics();else {\n        const e = () => this.owner?.loadedGraphics;\n        this._handles.add([G(e, \"change\", e => {\n          this._graphicsCollectionChanged(e), this._signalUpdatingDuringAsyncLoadedGraphicsChange();\n        }, {\n          onListenerAdd: () => {\n            this.recreateAllGraphics(), this._signalUpdatingDuringAsyncLoadedGraphicsChange();\n          }\n        })], \"loaded-graphics\");\n      }\n    }, {\n      initial: !0\n    }), S(() => this.effectiveUpdatePolicy, e => {\n      h(this.stageLayer) && (this.stageLayer.updatePolicy = e), this.symbolCreationContext.isAsync = this.effectiveUpdatePolicy === we.ASYNC, e === we.SYNC && this.runTask(Pe);\n    }, x)]), this._frameTask = i.resourceController.scheduler.registerTask(Re.GRAPHICS_CORE, this), this.layer && \"featureReduction\" in this.layer && this._handles.add(S(() => this.layer.featureReduction, () => this._deconflictor.featureReductionChange())), this.notifyChange(\"averageSymbolComplexity\"), this.rendererChange(this.owner.renderer).catch(() => {}), this._initializeAbortController = null;\n  }\n  _abortInitialize() {\n    this._initializeAbortController && (this._initializeAbortController.abort(), this._initializeAbortController = null);\n  }\n  destroy() {\n    this._abortInitialize(), this._abortRendererChange(), this._abortElevationInfoChange(), this._frameTask.remove(), this._frameTask = xe, this.owner.view.deconflictor.removeGraphicsOwner(this), this.owner.view.labeler.removeGraphicsOwner(this), this._elevationAlignment = c(this._elevationAlignment), this._scaleVisibility = c(this._scaleVisibility), this._filterVisibility = c(this._filterVisibility), this._deconflictor = null, this._labeler = null, this._objectStates = c(this._objectStates), this.clear(), this._featureStore = c(this._featureStore), this._updatingPendingLoadedGraphicsChange = y(this._updatingPendingLoadedGraphicsChange), this._graphicStateTracking = c(this._graphicStateTracking), this.stage && (this.stage.remove(this.stageLayer), this.stageLayer = null, this.stage = null), this._handles = c(this._handles), this._set(\"owner\", null);\n    for (const e in this._whenGraphics3DGraphicRequests) this._whenGraphics3DGraphicRequests[e].reject(new r(\"graphic:layer-destroyed\", \"Layer has been destroyed\"));\n    this._whenGraphics3DGraphicRequests = null, this._sharedSymbolResourcesOwnerHandle = y(this._sharedSymbolResourcesOwnerHandle), this._propertiesPool = c(this._propertiesPool), this._pendingUpdatesPool = null, this._symbolConversionCache.clear(), this._objectIdInvisibleSet.clear(), this._spatialIndex = c(this._spatialIndex);\n  }\n  clear() {\n    this._objectStates?.allGraphicsDeleted(), h(this._graphicStateTracking) && this._graphicStateTracking.allGraphicsDeleted(), this.graphics3DGraphics.forEach(e => e.destroy()), this._spatialIndex?.clear(), this.graphics3DGraphics.clear(), this._numberOfGraphics = 0, this._usedMemory = 0, this._updateLayerVisibility(), this._symbols.forEach(c), this._symbols.clear(), this._graphicsBySymbol.clear(), this._graphicsWithoutSymbol.clear(), this._graphicsWaitingForSymbol.clear(), this._pendingUpdates.clear(), this._pendingUpdatesPool.clear(), this._pendingAdds = 0, this._pendingRemoves = 0, this._applyPendingRemovesFirst = !1, this.notifyChange(\"updating\"), this.notifyChange(\"running\"), this.notifyChange(\"updatingRemaining\"), this._featureStore.events.emit(\"changed\");\n  }\n  _initializeStage(e, i) {\n    this.stage = e._stage, this.stageLayer = new Ge({\n      pickable: !this.suspendedOrOutsideOfView,\n      updatePolicy: this.effectiveUpdatePolicy\n    }, i), this.stage.add(this.stageLayer);\n    const t = this.stageLayer.events;\n    t.on(\"objectTransformation\", e => this.notifyGraphicGeometryChanged(e.metadata.graphicUid)), t.on(\"visibilityChanged\", e => this.notifyGraphicVisibilityChanged(e.metadata.graphicUid)), t.on(\"objectGeometryAdded\", e => this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid)), t.on(\"objectGeometryRemoved\", e => this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid)), t.on(\"objectGeometryUpdated\", e => this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid));\n  }\n  notifyGraphicGeometryChanged(e) {\n    if (p(this._graphicStateTracking) || p(e)) return;\n    const i = this.graphics3DGraphics.get(e);\n    i && this._graphicStateTracking.updateGraphicGeometry(i);\n  }\n  notifyGraphicVisibilityChanged(e) {\n    if (p(this._graphicStateTracking) || p(e)) return;\n    const i = this.graphics3DGraphics.get(e);\n    i && this._graphicStateTracking.updateGraphicVisibility(i);\n  }\n  _updateLayerVisibility() {\n    const e = this.displayFeatureLimit.maximumNumberOfFeatures,\n      i = this._numberOfGraphics > e * Me,\n      t = !this.suspendedOrOutsideOfView && !i;\n    t !== this._visible && (this._visible = t, t ? (this.stageLayer.pickable = !0, this.updateAllGraphicsVisibility()) : (this.stageLayer.pickable = !1, this._hideAllGraphics()), this._updateStageLayerVisibility());\n  }\n  _updateStageLayerVisibility() {\n    this.stageLayer.visible = this._visible && (null == this.layer.opacity || this.layer.opacity > 0);\n  }\n  getGraphics3DGraphicById(e) {\n    return null != e ? this.graphics3DGraphics.get(e) : void 0;\n  }\n  getGraphics3DGraphicByObjectId(e) {\n    return this.owner.layer?.objectIdField ? this._findGraphics3DGraphicByObjectId(e) : null;\n  }\n  _getGraphicObjectID(e) {\n    let i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.owner.layer && this.owner.layer.objectIdField;\n    return Y(e, i);\n  }\n  get graphics3DGraphicsByObjectID() {\n    const e = this.owner.layer && this.owner.layer.objectIdField;\n    if (!e) return;\n    const i = new Map();\n    return this.graphics3DGraphics.forEach(t => {\n      if (!t) return;\n      const r = t.graphic,\n        s = this._getGraphicObjectID(r, e);\n      h(s) && i.set(s, t);\n    }), i;\n  }\n  get labelsEnabled() {\n    return !(!this._labeler || !this._labeler.layerLabelsEnabled());\n  }\n  async updateLabelingInfo(e) {\n    const i = this._deconflictor && this._deconflictor.labelingInfoChange(e),\n      t = this._labeler && this._labeler.labelingInfoChange(e);\n    await f([i, t]);\n  }\n  updateVisibilityInfo() {\n    this._deconflictor && this._deconflictor.labelingInfoChange(), this._labeler && this._labeler.visibilityInfoChange();\n  }\n  get symbolUpdateType() {\n    if (this._pendingUpdates.size > 0) return \"unknown\";\n    let e = 0,\n      i = 0;\n    return o(this._symbols, (t, r) => {\n      if (h(t)) {\n        const s = t.getFastUpdateStatus();\n        if (s.loading > 0) return !0;\n        this._graphicsBySymbol.has(r) && (i += s.fast, e += s.slow);\n      }\n      return !1;\n    }) ? \"unknown\" : i >= 0 && 0 === e ? \"fast\" : e >= 0 && 0 === i ? \"slow\" : \"mixed\";\n  }\n  runTask(e) {\n    if (this._frameTask.processQueue(e), this._applyPendingUpdates(e), this.notifyChange(\"running\"), this.running || this.notifyChange(\"updating\"), this.notifyChange(\"updatingRemaining\"), !e.hasProgressed) return De.YIELD;\n  }\n  setObjectIdVisibility(e, i) {\n    i ? this._objectIdInvisibleSet.delete(e) : this._objectIdInvisibleSet.add(e);\n    const t = this._findGraphics3DGraphicByObjectId(e);\n    h(t) && this._updateUserVisibility(t);\n  }\n  _findGraphics3DGraphicByObjectId(e) {\n    return l(this.graphics3DGraphics, i => this._getGraphicObjectID(i.graphic) === e);\n  }\n  _updateUserVisibility(e) {\n    if (p(e)) return !1;\n    const i = e.graphic,\n      t = this._getGraphicObjectID(i),\n      r = i.visible && !this.owner.suspended && (p(t) || !this._objectIdInvisibleSet.has(t));\n    return e.setVisibilityFlag(re.USER_SETTING, r, se.GRAPHIC);\n  }\n  _whenGraphics3DGraphic(e) {\n    const i = this.graphics3DGraphics.get(e.uid);\n    if (i) return Promise.resolve(i);\n    const t = this._whenGraphics3DGraphicRequests[e.uid];\n    if (t) return t.promise;\n    const r = v();\n    return this._whenGraphics3DGraphicRequests[e.uid] = r, r.promise;\n  }\n  async _boundsForGraphics3DGraphic(e, i) {\n    const t = this._viewSpatialReference,\n      r = this.owner.view.renderSpatialReference,\n      s = this.owner.view.basemapTerrain.spatialReference,\n      a = (e, i, s) => k(e, r, i, e, t, i, s),\n      n = (e, i, r) => k(e, s, i, e, t, i, r),\n      o = this._viewElevationProvider ? {\n        service: this._viewElevationProvider,\n        useViewElevation: !!h(i) && !!i.useViewElevation,\n        minDemResolution: h(i) ? i.minDemResolution : null,\n        minDemResolutionForPoints: this.owner.view.resolution\n      } : null,\n      l = await e.getProjectedBoundingBox(a, n, o, m(i, \"signal\"));\n    if (!l) return null;\n    const p = l.boundingBox;\n    if (l.requiresDrapedElevation) {\n      const e = this.symbolCreationContext.elevationProvider;\n      if (e) {\n        W(p, je);\n        const i = d(e.getElevation(je[0], je[1], 0, t, \"ground\"), 0);\n        p[2] = Math.min(p[2], i), p[5] = Math.max(p[5], i);\n      }\n    }\n    return {\n      boundingBox: p,\n      screenSpaceObjects: l.screenSpaceObjects\n    };\n  }\n  async whenGraphicBounds(e, i) {\n    await P(() => this.owner?.loadedGraphics);\n    const t = this.owner.layer && this.owner.layer.objectIdField,\n      s = this.owner.loadedGraphics.find(i => i === e || null != t && null != i.attributes && e.attributes && i.attributes[t] === e.attributes[t]);\n    if (!s) throw new r(\"internal:graphic-not-part-of-view\", \"Graphic is not part of this view\");\n    const a = await this._whenGraphics3DGraphic(s);\n    return this._boundsForGraphics3DGraphic(a, i);\n  }\n  computeAttachmentOrigin(e, i) {\n    const t = this.graphics3DGraphics.get(e.uid);\n    if (!t) return null;\n    const r = t.computeAttachmentOrigin();\n    if (0 === r.render.num && 0 === r.draped.num) return null;\n    A(Ne, 0, 0, 0);\n    let s = 0;\n    if (r.render.num > 0) {\n      if (!V(r.render.origin, this.symbolCreationContext.renderCoordsHelper.spatialReference, Be, i)) return null;\n      O(Ne, Ne, Be), s++;\n    }\n    if (r.draped.num > 0) {\n      const [e, t] = r.draped.origin,\n        a = d(this._viewElevationProvider.getElevation(e, t, \"ground\"), 0);\n      if (A(Be, e, t, a), !V(Be, this._viewElevationProvider.spatialReference, Be, i)) return null;\n      O(Ne, Ne, Be), s++;\n    }\n    return s > 1 && L(Ne, Ne, 1 / s), new Ie({\n      x: Ne[0],\n      y: Ne[1],\n      z: Ne[2],\n      spatialReference: i\n    });\n  }\n  getSymbolLayerSize(e, i) {\n    const t = this._symbols.get(e.id);\n    if (p(t)) throw new r(\"internal:symbol-not-part-of-view\", \"Symbol is not part of this view\");\n    const s = e.symbolLayers.indexOf(i);\n    if (-1 === s) throw new r(\"internal:missing-symbol-layer\", \"Symbol layer is not in symbol\");\n    const a = t.getSymbolLayerSize(s);\n    if (p(a)) throw new r(\"internal:missing-size\", \"Symbol layer has no valid size\");\n    return a;\n  }\n  _graphicsCollectionChanged(e) {\n    this._startCreateGraphics && (this.add(e.added), this.remove(e.removed));\n  }\n  graphicUpdateHandler(e) {\n    const i = e.graphic.uid,\n      t = this.graphics3DGraphics.get(i);\n    if (!p(t) || !p(this._graphicsWithoutSymbol.get(i))) switch (e.property) {\n      case \"visible\":\n        this._graphicUpdateVisibleHandler(t);\n        break;\n      case \"geometry\":\n        this._graphicUpdateGeometryHandler(t, e);\n        break;\n      case \"symbol\":\n        this._graphicUpdateSymbolHandler(t, e);\n        break;\n      case \"attributes\":\n        break;\n      case \"transform\":\n        this._graphicUpdateTransformHandler(t, e);\n    }\n  }\n  _graphicUpdateGeometryHandler(e, i) {\n    const t = i.graphic.geometry;\n    if (p(t)) return void this._recreateGraphic(i.graphic);\n    if (p(e)) {\n      const e = i.graphic.symbol && i.graphic.symbol.id;\n      if (e) {\n        const i = this._symbols.get(e);\n        if (h(i) && i.loadStatus === ge.LOADING) return;\n      }\n      return void this._recreateGraphic(i.graphic);\n    }\n    const r = e.graphics3DSymbol;\n    !p(i.newValue) && r.updateGeometry(e, i.newValue) || this._recreateGraphic(e.graphic), this._expandComputedExtent(t);\n  }\n  _graphicUpdateSymbolHandler(e, i) {\n    const t = i.graphic,\n      r = h(e) ? e.graphics3DSymbol : h(i.oldValue) ? this._symbols.get(i.oldValue.id) : null;\n    if (p(r) || p(i.newValue)) return void this._recreateGraphic(t);\n    const s = r.symbol,\n      a = this._getConvertedSymbol(i.newValue);\n    if (h(a) && (a.type !== s.type || \"web-style\" === a.type) || \"web-style\" === s.type) return void this._recreateGraphic(t);\n    const n = this._graphicsBySymbol.get(s.id);\n    if (n && 1 !== n.size) return void this._recreateGraphic(t);\n    const o = I(s, a);\n    if (p(o)) return void this._updateSymbolMapping(s.id, a);\n    const l = {\n      diff: o,\n      graphics3DGraphicPatches: [],\n      symbolStatePatches: []\n    };\n    if (r.prepareSymbolPatch(l), !U(l.diff)) return void this._recreateGraphic(t);\n    const d = this._getRenderingInfo(t);\n    if (p(d)) return void this._recreateGraphic(t);\n    const c = r.extentPadding;\n    for (const h of l.symbolStatePatches) h();\n    if (c !== r.extentPadding && this._recomputeExtentPadding(), h(e)) for (const h of l.graphics3DGraphicPatches) h(e, d);\n    this._updateSymbolMapping(s.id, a);\n  }\n  _graphicUpdateVisibleHandler(e) {\n    this._updateUserVisibility(e) && (this._labeler && this.owner.view.labeler.setDirty(), this.owner.view.deconflictor.setDirty());\n  }\n  _graphicUpdateTransformHandler(e, i) {}\n  recreateGraphics(e) {\n    this._suspendSymbolCleanup = !0, this.remove(e), this.add(e), this._suspendSymbolCleanup = !1, this.effectiveUpdatePolicy === we.SYNC && this._cleanupSymbols();\n  }\n  _recreateGraphic(e) {\n    this.recreateGraphics([e]);\n  }\n  _beginGraphicUpdate(e) {\n    const i = this._graphicsUpdateId;\n    return this._graphicsUpdateId++, this._graphicsWaitingForSymbol.set(e.uid, i), 1 === this._graphicsWaitingForSymbol.size && this.notifyChange(\"updating\"), i;\n  }\n  _endGraphicUpdate(e) {\n    e && (this._graphicsWaitingForSymbol.delete(e.uid), 0 === this._graphicsWaitingForSymbol.size && (this._cleanupSymbols(), this.notifyChange(\"updating\")));\n  }\n  _recomputeExtentPadding() {\n    let e = 0;\n    this._symbols.forEach(i => {\n      h(i) && (e = Math.max(e, i.extentPadding));\n    }), this._set(\"extentPadding\", e);\n  }\n  _expandComputedExtent(e) {\n    const i = Ve,\n      t = e.spatialReference;\n    $(e, i);\n    const r = this._viewSpatialReference,\n      s = Le.tmpVec;\n    if (H(t, r) || F(i[0], i[1], 0, t, s, r) && (i[0] = s[0], i[1] = s[1], F(i[3], i[4], 0, t, s, r), i[3] = s[0], i[4] = s[1]), !(isFinite(i[0]) && isFinite(i[3]) && isFinite(i[1]) && isFinite(i[4]))) return;\n    const a = this.computedExtent;\n    let n = null;\n    const o = isFinite(i[2]) && isFinite(i[5]),\n      l = o && (!a || null == a.zmin || i[2] < a.zmin),\n      h = o && (!a || null == a.zmax || i[5] > a.zmax);\n    if (a) {\n      (i[0] < a.xmin || i[1] < a.ymin || i[3] > a.xmax || i[4] > a.ymax || l || h) && (n = this._propertiesPool.get(\"computedExtent\"), n.xmin = Math.min(i[0], a.xmin), n.ymin = Math.min(i[1], a.ymin), n.xmax = Math.max(i[3], a.xmax), n.ymax = Math.max(i[4], a.ymax), n.spatialReference = r);\n    } else n = this._propertiesPool.get(\"computedExtent\"), n.xmin = i[0], n.ymin = i[1], n.xmax = i[3], n.ymax = i[4], n.spatialReference = r;\n    n && (l && (n.zmin = i[2]), h && (n.zmax = i[5]), this._set(\"computedExtent\", n));\n  }\n  _abortElevationInfoChange() {\n    this._elevationInfoChangeAbortController && (this._elevationInfoChangeAbortController.abort(), this._elevationInfoChangeAbortController = null);\n  }\n  async elevationInfoChange() {\n    this._abortElevationInfoChange();\n    const e = new AbortController();\n    this._elevationInfoChangeAbortController = e;\n    const i = ae(this.layer.elevationInfo, this.elevationFeatureExpressionEnabled);\n    this.symbolCreationContext.featureExpressionInfoContext = await ne(i, this._viewSpatialReference, e.signal, Te), _(e.signal), this._elevationInfoChangeAbortController = null, this._labeler?.elevationInfoChange(), this.forEachGraphics3DSymbol((e, i, t) => {\n      e.globalPropertyChanged(\"elevationInfo\", i) ? i.forEach(e => {\n        const i = e.graphic,\n          t = e.labelLayers;\n        for (const r of t) {\n          r.graphics3DSymbolLayer.updateGraphicElevationContext(i, r);\n        }\n      }) : this._recreateSymbol(t);\n    }), this.updateStageLayerElevationProvider(), this._elevationAlignment?.elevationInfoChange();\n  }\n  updateStageLayerElevationProvider() {\n    this._stageLayerElevationProvider ? (this.layer.elevationInfo && \"relative-to-scene\" === this.layer.elevationInfo.mode || 0 === this._numberOfGraphicsProvidingElevation) && (this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider), this._stageLayerElevationProvider = g(this._stageLayerElevationProvider)) : (!this.layer.elevationInfo || this.layer.elevationInfo && \"relative-to-scene\" !== this.layer.elevationInfo.mode) && this._numberOfGraphicsProvidingElevation > 0 && (this._stageLayerElevationProvider = new fe({\n      layer: this.layer,\n      stageLayer: this.stageLayer,\n      view: this.owner.view\n    }), this.owner.view.elevationProvider.register(\"scene\", this._stageLayerElevationProvider));\n  }\n  _clearSymbolsAndGraphics() {\n    this.clear(), h(this._filterVisibility) && this._filterVisibility.clear(), this._labeler?.reset(), this._deconflictor?.clear(), this._elevationAlignment?.clear(), this.stageLayer?.invalidateSpatialQueryAccelerator(), this._stageLayerElevationProvider && (this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider), this._stageLayerElevationProvider = g(this._stageLayerElevationProvider));\n  }\n  startCreateGraphics() {\n    this._startCreateGraphics = !0, this.recreateAllGraphics();\n  }\n  recreateAllGraphics() {\n    this._recreateAllGraphics(!1);\n  }\n  recreateAllGraphicsAndSymbols() {\n    this._recreateAllGraphics(!0);\n  }\n  _recreateAllGraphics() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    if (!this._startCreateGraphics) return;\n    const {\n        loadedGraphics: i,\n        view: t\n      } = this.owner,\n      r = t.basemapTerrain.tilingScheme && i && i.length ? i.toArray() : null;\n    !e && r || this._clearSymbolsAndGraphics(), this.symbolCreationContext.screenSizePerspectiveEnabled = this.owner.view.screenSizePerspectiveEnabled && !!this.layer.screenSizePerspectiveEnabled, this.symbolCreationContext.slicePlaneEnabled = !!this.owner.slicePlaneEnabled, this._set(\"computedExtent\", null), r && (e ? this.add(r) : this.recreateGraphics(r));\n  }\n  _recreateSymbol(e) {\n    const i = this._graphicsBySymbol.get(e),\n      t = [];\n    i && (i.forEach((e, i) => {\n      const r = e.usedMemory;\n      this._conditionalRemove(e, i), this._spatialIndex?.remove(e), t.push(e.graphic), e.destroy(), this._removeGraphics3DGraphic(i, r), this._updateLayerVisibility(), this._featureStore.events.emit(\"changed\");\n    }), this._graphicsBySymbol.set(e, new Map()));\n    const r = this._symbols.get(e);\n    c(r), this._symbols.delete(e), this.add(t);\n  }\n  _recreateGraphicsForSymbol(e) {\n    const i = this._graphicsBySymbol.get(e);\n    if (i) {\n      const e = [];\n      i.forEach(i => e.push(i.graphic)), this.recreateGraphics(e);\n    }\n  }\n  _conditionalRemove(e, i) {\n    this._graphicsDrapedUids.delete(i), this._objectStates?.removeGraphic(e), this._labeler?.removeGraphic(e), this._deconflictor?.removeGraphic(e), h(this._graphicStateTracking) && this._graphicStateTracking.removeGraphic(e);\n  }\n  add(e) {\n    e && 0 !== e.length && (this.owner.view.basemapTerrain && this.owner.view.basemapTerrain.tilingScheme ? (this._updatePolicyForGraphics(e) === we.ASYNC ? this._addDelayed(e) : this._addImmediate(e), this.notifyChange(\"updating\")) : Te.error(\"#add()\", \"Cannot add graphics before terrain surface has been initialized\"));\n  }\n  _updatePolicyForGraphics(e) {\n    if (this.effectiveUpdatePolicy === we.SYNC && (\"mesh\" === this.layer.geometryType || null == this.layer.geometryType)) for (const i of e) if (h(i.geometry) && \"mesh\" === i.geometry.type && !i.geometry.loaded) return we.ASYNC;\n    return this.effectiveUpdatePolicy;\n  }\n  _addImmediate(e) {\n    this._geometryWarningLogged = !1, this._symbolWarningLogged = !1;\n    for (const i of e) this._addGraphic(i, this._getRenderingInfo(i, Te), we.SYNC);\n    this._cleanupSymbols(), this._labeler && (this.owner.view.labeler.setDirty(), this._cleanupSymbols()), this.owner.view.deconflictor.setDirty();\n  }\n  _addDelayed(e) {\n    for (const i of e) {\n      const e = i.uid;\n      let t = this._pendingUpdates.get(e);\n      t ? t.add ? t.state !== ze.NEW && t.abortController?.abort() : this._pendingAdds++ : (t = this._pendingUpdatesPool.pushNew(), this._pendingAdds++, this._pendingUpdates.set(e, t)), t.add = i;\n    }\n    this.notifyChange(\"running\"), this.notifyChange(\"updatingRemaining\");\n  }\n  remove(e) {\n    this.effectiveUpdatePolicy === we.ASYNC ? this._removeDelayed(e) : this._removeImmediate(e), this.notifyChange(\"updating\");\n  }\n  _removeImmediate(e) {\n    for (const i of e) this._removeGraphic(i);\n    this._cleanupSymbols(), this._labeler && this.owner.view.labeler.setDirty(), this.owner.view.deconflictor.setDirty();\n  }\n  _removeDelayed(e) {\n    for (const i of e) {\n      const e = i.uid,\n        t = this._pendingUpdates.get(e);\n      if (t) t.add && (t.remove ? t.add = null : this._pendingUpdates.delete(e), t.state === ze.LOADING && t.abortController?.abort(), this._pendingAdds--);else {\n        const t = this._pendingUpdatesPool.pushNew();\n        t.remove = i, this._pendingUpdates.set(e, t), this._pendingRemoves++, this._applyPendingRemovesFirst = !0;\n      }\n    }\n    0 === this._pendingUpdates.size && this._finishPendingUpdates(), this.notifyChange(\"running\"), this.notifyChange(\"updatingRemaining\");\n  }\n  _finishPendingUpdates() {\n    this._pendingUpdatesPool.clear(), this._cleanupSymbols(), (this._pendingAdds || this._pendingRemoves) && Te.warn(\"pendingAdds/Removes in inconsistent state!\"), this._pendingAdds = 0, this._pendingRemoves = 0, this._applyPendingRemovesFirst = !1;\n  }\n  _applyPendingUpdates(e) {\n    if (this._geometryWarningLogged = !1, this._symbolWarningLogged = !1, 0 === this._pendingUpdates.size && this._spatialIndex?.updating) return this._spatialIndex.update(), void e.madeProgress();\n    if (this._applyPendingRemovesFirst) {\n      this._applyPendingRemovesFirst = !1;\n      for (const [i, t] of this._pendingUpdates) {\n        if (e.done) {\n          this._applyPendingRemovesFirst = !0;\n          break;\n        }\n        if (t.remove && !t.add && (this._pendingRemoves--, e.madeProgress(), this._removeGraphic(t.remove), t.remove = null, this._pendingUpdates.delete(i), 0 === this._pendingRemoves)) break;\n      }\n    }\n    for (const [i, t] of this._pendingUpdates) {\n      if (e.done) break;\n      t.add && t.state === ze.NEW && this._processPendingUpdateNew(t);\n      let r = this.effectiveUpdatePolicy;\n      if (!t.remove || t.add && t.state !== ze.READY || (this._pendingRemoves--, e.madeProgress(), this._removeGraphic(t.remove), t.remove = null, r = we.SYNC), t.add) switch (t.state) {\n        case ze.READY:\n          this._addGraphic(t.add, t.renderingInfo, r), t.add = null, this._pendingAdds--, e.madeProgress();\n          break;\n        case ze.REJECTED:\n          t.add = null, this._pendingAdds--;\n        case ze.LOADING:\n      }\n      null == t.remove && null == t.add && this._pendingUpdates.delete(i);\n    }\n    0 === this._pendingUpdates.size && (this._finishPendingUpdates(), this.notifyChange(\"running\"));\n  }\n  _processPendingUpdateNew(e) {\n    if (!e.add) return void (e.state = ze.READY);\n    const i = e.add.geometry;\n    h(i) && \"mesh\" === i.type && !i.loaded ? this._processPendingUpdateNewMesh(e, i) : this._processPendingUpdateNewRenderingInfo(e);\n  }\n  async _processPendingUpdateNewMesh(e, i) {\n    e.state = ze.LOADING, e.abortController = new AbortController();\n    const t = e.abortController.signal;\n    try {\n      await i.load({\n        signal: t\n      });\n    } catch (r) {\n      return this._processPendingUpdateNewError(e, r);\n    }\n    e.abortController = null, this._processPendingUpdateNewRenderingInfo(e);\n  }\n  _processPendingUpdateNewError(e, i) {\n    e.abortController = null, C(i) ? e.state = ze.NEW : e.state = ze.REJECTED;\n  }\n  async _processPendingUpdateNewRenderingInfo(e) {\n    if (p(this.layer.renderer) || \"dictionary\" !== this.layer.renderer.type) return e.renderingInfo = this._getRenderingInfo(e.add, Te), void (e.state = ze.READY);\n    e.state = ze.LOADING, e.abortController = new AbortController();\n    let i = null;\n    try {\n      i = await this._getRenderingInfoAsync(e.add, {\n        signal: e.abortController.signal\n      });\n    } catch (t) {\n      return e.abortController = null, void (C(t) ? e.state = ze.NEW : e.state = ze.REJECTED);\n    }\n    p(i) || p(i.symbol) ? (Te && !this._symbolWarningLogged && (this._symbolWarningLogged = !0, Te.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)), e.renderingInfo = null) : e.renderingInfo = i, e.state = ze.READY;\n  }\n  _addGraphic(e, i, t) {\n    if (this._graphicsWithoutSymbol.set(e.uid, e), p(i) || p(i.symbol) || !Z(e)) return;\n    h(this.stage.renderView.objectAndLayerIdRenderHelper) && this.setUidToIdOnAdd && this.stage.renderView.objectAndLayerIdRenderHelper.setUidToObjectAndLayerId(e.objectId, e.uid, this.layer.id, this.layer.uid, !!this.layer.popupEnabled);\n    const r = i.symbol,\n      s = this.getOrCreateGraphics3DSymbol(r, i.renderer);\n    if (p(s)) return;\n    this._expandComputedExtent(e.geometry);\n    const a = this._beginGraphicUpdate(e),\n      n = new le(e, i, this.layer);\n    let o = !1;\n    const l = e => {\n      e === s.symbol.id && (o = !0);\n    };\n    this._whenSymbolRemoved.push(l);\n    const d = () => {\n        if (--this._loadingSymbols, this.destroyed) return;\n        this._whenSymbolRemoved.removeUnordered(l);\n        if (this._graphicsWaitingForSymbol.get(e.uid) !== a || o || s.destroyed || this.graphicSymbolSupported && e.symbol && e.symbol.id !== s.symbol.id) --s.referenced, this._cleanupSymbols();else {\n          const i = this._createGraphics3DGraphic(s, n);\n          this._spatialIndex && h(i) && this._spatialIndex.add(i), --s.referenced, this._endGraphicUpdate(e);\n        }\n        this._featureStore.events.emit(\"changed\"), this._labeler && this.owner.view.labeler.setDirty();\n      },\n      c = i => {\n        --this._loadingSymbols, this.destroyed || (this._whenSymbolRemoved.removeUnordered(l), o || (C(i) ? this.add([e]) : s.destroyed || this._endGraphicUpdate(e)));\n      };\n    ++this._loadingSymbols, t === we.ASYNC ? s.load(() => this._frameTask.schedule(d), e => this._frameTask.schedule(() => c(e))) : s.load(d, c);\n  }\n  _removeGraphic(e) {\n    const i = e.uid,\n      t = this.graphics3DGraphics.get(i);\n    if (t) {\n      t.graphics3DSymbol.onRemoveGraphic(t);\n      const e = t.usedMemory,\n        r = t.isElevationSource;\n      this._conditionalRemove(t, i), this._spatialIndex?.remove(t);\n      const s = t.graphics3DSymbol.symbol.id;\n      this._graphicsBySymbol.get(s)?.delete(i), this._graphicsWithoutSymbol.delete(i), this._removeGraphics3DGraphic(i, e, r), t.destroy(), this._featureStore.events.emit(\"changed\");\n    } else this._graphicsWithoutSymbol.delete(i), this._graphicsWaitingForSymbol.delete(i), 0 === this._graphicsWaitingForSymbol.size && (this._cleanupSymbols(), this.notifyChange(\"updating\"));\n  }\n  _hasLabelingContext(e) {\n    if (e instanceof Ue || e instanceof Ae) {\n      const i = this.symbolCreationContext.layer;\n      return !!i.labelingInfo && i.labelingInfo.some(i => i.symbol === e);\n    }\n    return !1;\n  }\n  _hasValidSymbolCreationContext(e) {\n    return !(e instanceof Ue && !this._hasLabelingContext(e)) || (Te.error(\"LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported.\"), !1);\n  }\n  _getRenderingInfo(e, i) {\n    const t = e.geometry;\n    if (p(t)) return i && !this._geometryWarningLogged && (this._geometryWarningLogged = !0, i.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)), null;\n    if (!T(t.spatialReference, this._viewSpatialReference)) return i && !this._geometryWarningLogged && (this._geometryWarningLogged = !0, i.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)), null;\n    if (!this.graphicSymbolSupported && h(e.symbol)) return i && !this._symbolWarningLogged && (this._symbolWarningLogged = !0, i.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)), null;\n    const r = this.rendererHasGeometryOperations ? J(e, this.layer) : e;\n    let s;\n    if (this.owner.getRenderingInfo && (this.getRenderingInfoWithoutRenderer || h(this.currentRenderer))) s = this.owner.getRenderingInfo(r, this.currentRenderer, this._arcadeOnDemand);else {\n      s = {\n        symbol: r.symbol || ee(r.geometry)\n      };\n    }\n    return p(s) || p(s.symbol) ? (i && !this._symbolWarningLogged && (this._symbolWarningLogged = !0, i.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)), null) : s;\n  }\n  _getRenderingInfoAsync(e, i) {\n    const t = e.geometry;\n    if (p(t)) return Te && !this._geometryWarningLogged && (this._geometryWarningLogged = !0, Te.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)), null;\n    if (!this.graphicSymbolSupported && h(e.symbol)) return Te && !this._symbolWarningLogged && (this._symbolWarningLogged = !0, Te.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)), null;\n    const r = this.rendererHasGeometryOperations ? J(e, this.layer) : e;\n    return this.owner.getRenderingInfoAsync(r, this.currentRenderer, this._arcadeOnDemand, i);\n  }\n  _createGraphics3DSymbol(e, i) {\n    if (!this._hasValidSymbolCreationContext(e)) return null;\n    const t = this._getConvertedSymbol(e);\n    if (!t) return null;\n    let r;\n    if (h(i) && \"backgroundFillSymbol\" in i && i.backgroundFillSymbol) {\n      const e = ie(i.backgroundFillSymbol, {\n        ignoreDrivers: !0\n      });\n      h(e.symbol) && \"web-style\" !== e.symbol.type && \"cim\" !== e.symbol.type && (r = e.symbol.symbolLayers);\n    }\n    const s = de(t, this.symbolCreationContext, r);\n    return s.load(() => {\n      const e = s.extentPadding;\n      e > this.extentPadding && this._set(\"extentPadding\", e), this.notifyChange(\"averageSymbolComplexity\");\n    }, () => {}), s;\n  }\n  getOrCreateGraphics3DSymbol(e, i) {\n    let t = this._symbols.get(e.id);\n    return void 0 === t && (t = e instanceof Oe ? new pe(e, e => this._frameTask.schedule(e), e => this._createGraphics3DSymbol(e, i)) : this._createGraphics3DSymbol(e, i), this._symbols.set(e.id, t)), h(t) && ++t.referenced, t;\n  }\n  trackGraphicState(e) {\n    return p(this._graphicStateTracking) && (this._graphicStateTracking = new ce(this)), this._graphicStateTracking.add(e);\n  }\n  _addGraphics3DGraphic(e) {\n    this._usedMemory += e.usedMemory, this.graphics3DGraphics.set(e.graphic.uid, e), this._numberOfGraphics++, e.isElevationSource && (this._numberOfGraphicsProvidingElevation++, this.updateStageLayerElevationProvider()), this._updateLayerVisibility();\n  }\n  _removeGraphics3DGraphic(e, i) {\n    let t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    this._usedMemory -= i, this.graphics3DGraphics.delete(e), this._numberOfGraphics--, t && (this._numberOfGraphicsProvidingElevation--, this.updateStageLayerElevationProvider()), this._updateLayerVisibility();\n  }\n  _createGraphics3DGraphic(e, i) {\n    const t = i.graphic;\n    if (this._graphicsWithoutSymbol.delete(t.uid), !this._symbols.has(e.symbol.id)) return this.add([t]), null;\n    if (this.graphics3DGraphics.has(t.uid)) return null;\n    const r = e.createGraphics3DGraphic(i);\n    if (p(r)) return null;\n    this._addGraphics3DGraphic(r);\n    const s = e.symbol.id;\n    this._graphicsBySymbol.has(s) || this._graphicsBySymbol.set(s, new Map()), this._graphicsBySymbol.get(s).set(t.uid, r);\n    if (r.isDraped && this._graphicsDrapedUids.add(t.uid), r.centroid = null, h(t.geometry) && \"point\" !== t.geometry.type && (r.centroid = ye(t.geometry, this._viewSpatialReference)), this._updateUserVisibility(r), h(this._scaleVisibility) && this._scaleVisibility.updateVisibility(r), h(this._filterVisibility)) {\n      const {\n        defaultVisibility: e\n      } = this._filterVisibility;\n      r.setVisibilityFlag(re.FILTER, e, se.GRAPHIC), e || this._filterVisibility.reapply();\n    }\n    this._deconflictor?.addGraphic(r), this._labeler?.addGraphic(r), this._objectStates?.addGraphic(r), this._deconflictor && this.owner.view.deconflictor.setInitialIconVisibilityFlag(this, r), r.initialize(this.stage, this.stageLayer, this.owner), h(this._graphicStateTracking) && this._graphicStateTracking.addGraphic(r);\n    const a = this._whenGraphics3DGraphicRequests[t.uid];\n    return a && (delete this._whenGraphics3DGraphicRequests[t.uid], a.resolve(r)), r;\n  }\n  _abortRendererChange() {\n    this._rendererChangeAbortController && (this._rendererChangeAbortController.abort(), this._rendererChangeAbortController = null);\n  }\n  async rendererChange(e) {\n    if (this._abortRendererChange(), e !== this.currentRenderer) if (this._validateRenderer(e), p(e) && this._currentRendererChange(null, !1), Q(e)) {\n      if (h(e) && e.arcadeRequired) {\n        const i = new AbortController();\n        this._rendererChangeAbortController = i;\n        const {\n          arcadeUtils: t\n        } = await this._ensureArcade();\n        _(i);\n        const r = t.hasGeometryOperations(e);\n        r && (await t.enableGeometryOperations(), _(i)), this.effectiveUpdatePolicy === we.ASYNC ? await this._frameTask.schedule(() => this._currentRendererChange(e, r), i.signal) : this._currentRendererChange(e, r), this._rendererChangeAbortController = null;\n      } else if (this.effectiveUpdatePolicy === we.ASYNC) {\n        const i = new AbortController();\n        this._rendererChangeAbortController = i, await this._frameTask.schedule(() => this._currentRendererChange(e, !1), i.signal), this._rendererChangeAbortController = null;\n      } else this._currentRendererChange(e, !1);\n    } else this._currentRendererChange(e, !1);\n  }\n  async _ensureArcade() {\n    return p(this._arcadeOnDemand) ? (this._arcadeOnDemand = await X(), this._arcadeOnDemand) : this._arcadeOnDemand;\n  }\n  _currentRendererChange(e, i) {\n    this.currentRenderer = e, this.rendererHasGeometryOperations = i, this.symbolCreationContext.arcade = u(this._arcadeOnDemand);\n    const t = this.symbolCreationContext.renderer;\n    if (e === t) return;\n    if (this._symbolConversionCache.clear(), p(e)) return this.symbolCreationContext.renderer = null, void this.recreateAllGraphicsAndSymbols();\n    const r = I(t, e);\n    this._updateUnchangedSymbolMappings(r, e, t), this.symbolCreationContext.renderer = e, p(r) || (\"complete\" === r.type ? this.recreateAllGraphicsAndSymbols() : \"partial\" === r.type && (this._applyRendererDiff(r, e, t) ? this._volatileGraphicsUpdated() : this.recreateAllGraphicsAndSymbols()), this.notifyChange(\"averageSymbolComplexity\"));\n  }\n  _diffHasSymbolChange(e) {\n    for (const i in e.diff) switch (i) {\n      case \"visualVariables\":\n      case \"defaultSymbol\":\n      case \"uniqueValueInfos\":\n        break;\n      case \"uniqueValueGroups\":\n      case \"authoringInfo\":\n      case \"fieldDelimiter\":\n        delete e.diff[i];\n        break;\n      default:\n        return !0;\n    }\n    return !1;\n  }\n  _applySymbolSetDiff(e, i, t) {\n    e = e || [], i = i || [];\n    const r = [];\n    for (const s of i) {\n      const i = this._graphicsBySymbol.get(s.id);\n      i && i.forEach((a, n) => {\n        const o = a.graphic,\n          l = this.layer instanceof q ? this.layer : null,\n          h = u(this._arcadeOnDemand);\n        if (s === t.defaultSymbol && t.getSymbol(J(o, l), {\n          arcade: h\n        }) === t.defaultSymbol) return;\n        const d = a.usedMemory;\n        e.length || t.defaultSymbol ? r.push(o) : this._graphicsWithoutSymbol.set(n, o);\n        const p = this.graphics3DGraphics.get(n);\n        this._conditionalRemove(p, n), a.destroy(), i.delete(n), this._removeGraphics3DGraphic(n, d), this._updateLayerVisibility();\n      }), this._whenSymbolRemoved.forAll(e => e(s.id));\n    }\n    (e.length || r.length) && (this._graphicsWithoutSymbol.forEach(e => r.push(e)), this._graphicsWithoutSymbol.clear(), this.add(r)), this._cleanupSymbols(), this._labeler && this.owner.view.labeler.setDirty(), this.owner.view.deconflictor.setDirty();\n  }\n  _applyUniqueValueRendererDiff(e, i, t) {\n    const r = e.diff.defaultSymbol,\n      s = e.diff.uniqueValueInfos;\n    if (r || s) {\n      const a = s ? s.added.map(e => e.symbol).filter(h) : [],\n        n = s ? s.removed.map(e => e.symbol).filter(h) : [];\n      if (s) for (let e = 0; e < s.changed.length; e++) a.push(s.changed[e].newValue.symbol), n.push(s.changed[e].oldValue.symbol);\n      return r ? (t.defaultSymbol && n.push(t.defaultSymbol), i.defaultSymbol && a.push(i.defaultSymbol)) : t.defaultSymbol && a.length && n.push(i.defaultSymbol), this._applySymbolSetDiff(a, n, i), delete e.diff.defaultSymbol, delete e.diff.uniqueValueInfos, !0;\n    }\n    return !1;\n  }\n  _calculateUnchangedSymbolMapping(e, i, t) {\n    if (\"unique-value\" !== i?.type || \"unique-value\" !== t?.type || h(e) && \"partial\" !== e.type) return [];\n    const r = e => h(e) ? e.id : null,\n      s = e && e.diff,\n      a = s && s.defaultSymbol,\n      n = s && s.uniqueValueInfos;\n    let o;\n    if (n) o = n.unchanged.map(e => ({\n      oldId: r(e.oldValue.symbol),\n      newId: r(e.newValue.symbol)\n    }));else {\n      o = [];\n      for (const e of t.uniqueValueInfos ?? []) {\n        const t = r(e.symbol),\n          s = i.uniqueValueInfos?.find(i => i.value === e.value);\n        s && t !== r(s.symbol) && o.push({\n          oldId: t,\n          newId: r(s.symbol)\n        });\n      }\n    }\n    return !a && t.defaultSymbol && o.push({\n      oldId: r(t.defaultSymbol),\n      newId: r(i.defaultSymbol)\n    }), o;\n  }\n  _updateSymbolMapping(e, i) {\n    const t = h(i) && i ? \"string\" == typeof i ? i : i.id : null;\n    if (p(e) || e === t) return;\n    const r = this._graphicsBySymbol.get(e);\n    this._graphicsBySymbol.delete(e), void 0 !== r && this._graphicsBySymbol.set(t, r);\n    const s = this._symbols.get(e);\n    if (void 0 !== s && (this._symbols.delete(e), this._symbols.set(t, s), h(s))) {\n      const e = \"string\" == typeof i ? null : i;\n      h(e) ? s.symbol = e : s.symbol.id = t;\n    }\n  }\n  _updateUnchangedSymbolMappings(e, i, t) {\n    const r = this._calculateUnchangedSymbolMapping(e, i, t);\n    for (const {\n      oldId: s,\n      newId: a\n    } of r) this._updateSymbolMapping(s, a);\n  }\n  _applyRendererDiff(e, t, r) {\n    if (this._diffHasSymbolChange(e)) return !1;\n    if (t instanceof i && r instanceof i && this._applyUniqueValueRendererDiff(e, t, r) && 0 === Object.keys(e.diff).length) return !0;\n    for (const [i] of this._graphicsBySymbol) {\n      const r = this._symbols.get(i);\n      if (h(r)) switch (r.applyRendererDiff(e, t)) {\n        case me.Recreate_Symbol:\n          this._recreateSymbol(i);\n          break;\n        case me.Recreate_Graphics:\n          this._recreateGraphicsForSymbol(i);\n        case me.Fast_Update:\n      }\n    }\n    return !0;\n  }\n  opacityChange() {\n    this.forEachGraphics3DSymbol((e, i) => e.globalPropertyChanged(\"opacity\", i)), this._updateStageLayerVisibility();\n  }\n  _slicePlaneEnabledChange(e) {\n    e !== this.symbolCreationContext.slicePlaneEnabled && (this.symbolCreationContext.slicePlaneEnabled = e, this.stageLayer.sliceable = e, this.forEachGraphics3DSymbol((e, i) => e.globalPropertyChanged(\"slicePlaneEnabled\", i)), this._deconflictor && this._deconflictor.slicePlaneEnabledChange(), this._labeler && this._labeler.slicePlaneEnabledChange());\n  }\n  _physicalBasedRenderingChange(e) {\n    this.symbolCreationContext.physicalBasedRenderingEnabled = e, this.forEachGraphics3DSymbol((e, i, t) => {\n      e.globalPropertyChanged(\"physicalBasedRenderingEnabled\", i) || this._recreateSymbol(t);\n    });\n  }\n  _skipHighSymbolLoDsChange(e) {\n    this.symbolCreationContext.skipHighSymbolLods = e, this.forEachGraphics3DSymbol((e, i, t) => {\n      e.globalPropertyChanged(\"skipHighSymbolLods\", i) || this._recreateSymbol(t);\n    });\n  }\n  _pixelRatioChange() {\n    this.forEachGraphics3DSymbol((e, i, t) => {\n      e.globalPropertyChanged(\"pixelRatio\", i) || this._recreateSymbol(t);\n    });\n  }\n  _signalUpdatingDuringAsyncLoadedGraphicsChange() {\n    this._updatingPendingLoadedGraphicsChange && this._updatingPendingLoadedGraphicsChange.remove(), this._updatingPendingLoadedGraphicsChange = R(() => {\n      this._updatingPendingLoadedGraphicsChange = null;\n    });\n  }\n  setClippingExtent(e, i) {\n    const t = this.symbolCreationContext.clippingExtent,\n      r = B();\n    return ve(e, r, i) ? this.symbolCreationContext.clippingExtent = M(z(), r) : this.symbolCreationContext.clippingExtent = null, !N(this.symbolCreationContext.clippingExtent, t);\n  }\n  modifyGraphics3DGraphicVisibilities(e) {\n    let i = !1;\n    this.graphics3DGraphics.forEach(t => {\n      e(t) && (i = !0);\n    }), i && (this.owner.view.labeler?.setDirty(), this.owner.view.deconflictor.setDirty());\n  }\n  forEachGraphics3DSymbol(e) {\n    for (const [i, t] of this._symbols) {\n      if (p(t)) return;\n      e(t, this._graphicsBySymbol.get(i) || He, i);\n    }\n  }\n  updateAllGraphicsVisibility() {\n    h(this._filterVisibility) && this._filterVisibility.reapply(), this.modifyGraphics3DGraphicVisibilities(e => {\n      const i = this._updateUserVisibility(e),\n        t = h(this._scaleVisibility) && this._scaleVisibility.updateVisibility(e);\n      return i || t;\n    });\n  }\n  _hideAllGraphics() {\n    this.modifyGraphics3DGraphicVisibilities(e => e.setVisibilityFlag(re.USER_SETTING, !1, se.GRAPHIC));\n  }\n  _validateRenderer(e) {\n    const i = K(e, {\n      geometryType: this.layer?.geometryType\n    });\n    if (i) {\n      const e = `Renderer for layer '${this.layer.title ? `${this.layer.title}, ` : \"\"}, id:${this.layer.id}' is not supported in a SceneView`;\n      Te.warn(e, i.message);\n    }\n  }\n  _volatileGraphicsUpdated() {\n    this._labeler?.reset(), this.stageLayer.shaderTransformationChanged(), this.notifyChange(\"updating\");\n  }\n  _cleanupSymbols() {\n    if (this._graphicsWaitingForSymbol.size > 0 || this._suspendSymbolCleanup) return;\n    let e = !1;\n    this._symbols.forEach((i, t) => {\n      if (p(i) || i.referenced > 0) return;\n      const r = this._graphicsBySymbol.get(t);\n      r && 0 !== r.size || (this._graphicsBySymbol.delete(t), this._symbols.delete(t), c(i), e = !0);\n    }), e && (this._recomputeExtentPadding(), this.notifyChange(\"averageSymbolComplexity\"));\n  }\n  get test() {\n    return {\n      snapshotInternals: () => ({\n        graphics: [...this.graphics3DGraphics.keys()].sort(),\n        symbols: [...this._symbols.keys()].sort(),\n        graphicsBySymbol: [...this._graphicsBySymbol.keys()].sort().map(e => ({\n          symbolId: e,\n          graphics: [...this._graphicsBySymbol.get(e).keys()].sort()\n        })),\n        graphicsWithoutSymbol: [...this._graphicsWithoutSymbol.keys()].sort(),\n        graphicsDrapedUids: [...this._graphicsDrapedUids].sort(),\n        pendingUpdates: this._pendingUpdates\n      }),\n      symbols: this._symbols,\n      filterVisibility: this._filterVisibility,\n      numPending: this._pendingUpdates.size,\n      forceUpdatePolicy: e => {\n        this._forcedUpdatePolicy = e;\n      }\n    };\n  }\n  get performanceInfo() {\n    return {\n      visible: this.graphics3DGraphics.size,\n      missing: this._graphicsWithoutSymbol.size,\n      pending: this._pendingUpdates.size\n    };\n  }\n};\nvar ze;\nke.tmpVec = j(), e([D({\n  readOnly: !0\n})], ke.prototype, \"computedExtent\", void 0), e([D()], ke.prototype, \"currentRenderer\", void 0), e([D()], ke.prototype, \"rendererHasGeometryOperations\", void 0), e([D()], ke.prototype, \"_frameTask\", void 0), e([D({\n  readOnly: !0\n})], ke.prototype, \"_viewSpatialReference\", null), e([D()], ke.prototype, \"_rendererChangeAbortController\", void 0), e([D()], ke.prototype, \"_elevationInfoChangeAbortController\", void 0), e([D()], ke.prototype, \"_initializeAbortController\", void 0), e([D()], ke.prototype, \"_elevationAlignment\", void 0), e([D()], ke.prototype, \"_scaleVisibility\", void 0), e([D()], ke.prototype, \"_filterVisibility\", void 0), e([D()], ke.prototype, \"_initializePromise\", void 0), e([D()], ke.prototype, \"_spatialIndex\", void 0), e([D({\n  readOnly: !0\n})], ke.prototype, \"extentPadding\", void 0), e([D()], ke.prototype, \"_updatingPendingLoadedGraphicsChange\", void 0), e([D()], ke.prototype, \"_featureStore\", void 0), e([D()], ke.prototype, \"_deconflictor\", void 0), e([D()], ke.prototype, \"_labeler\", void 0), e([D()], ke.prototype, \"_objectStates\", void 0), e([D()], ke.prototype, \"_loadingSymbols\", void 0), e([D()], ke.prototype, \"preferredUpdatePolicy\", void 0), e([D()], ke.prototype, \"_forcedUpdatePolicy\", void 0), e([D({\n  readOnly: !0\n})], ke.prototype, \"effectiveUpdatePolicy\", null), e([D({\n  constructOnly: !0\n})], ke.prototype, \"elevationFeatureExpressionEnabled\", void 0), e([D({\n  constructOnly: !0\n})], ke.prototype, \"owner\", void 0), e([D({\n  constructOnly: !0\n})], ke.prototype, \"layer\", void 0), e([D({\n  constructOnly: !0\n})], ke.prototype, \"graphicSymbolSupported\", void 0), e([D({\n  constructOnly: !0\n})], ke.prototype, \"getRenderingInfoWithoutRenderer\", void 0), e([D({\n  constructOnly: !0\n})], ke.prototype, \"componentFactories\", void 0), e([D({\n  constructOnly: !0\n})], ke.prototype, \"setUidToIdOnAdd\", void 0), e([D()], ke.prototype, \"featureStore\", null), e([D()], ke.prototype, \"initializePromise\", null), e([D()], ke.prototype, \"scaleVisibility\", null), e([D()], ke.prototype, \"elevationAlignment\", null), e([D()], ke.prototype, \"objectStates\", null), e([D()], ke.prototype, \"filterVisibility\", null), e([D({\n  readOnly: !0\n})], ke.prototype, \"updating\", null), e([D({\n  readOnly: !0\n})], ke.prototype, \"running\", null), e([D({\n  readOnly: !0\n})], ke.prototype, \"suspendedOrOutsideOfView\", null), e([D({\n  readOnly: !0,\n  dependsOn: []\n})], ke.prototype, \"updatingRemaining\", null), e([D({\n  readOnly: !0,\n  dependsOn: [\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfPrimitives\", \"owner.view.qualitySettings.graphics3D.maxTotalNumberOfFeatures\", \"averageSymbolComplexity\"]\n})], ke.prototype, \"displayFeatureLimit\", null), e([D({\n  readOnly: !0,\n  dependsOn: []\n})], ke.prototype, \"averageSymbolComplexity\", null), e([D({\n  constructOnly: !0\n})], ke.prototype, \"hasZ\", void 0), e([D({\n  constructOnly: !0\n})], ke.prototype, \"hasM\", void 0), e([D()], ke.prototype, \"_objectIdField\", null), ke = Le = e([E(Fe)], ke), function (e) {\n  e[e.NEW = 0] = \"NEW\", e[e.LOADING = 1] = \"LOADING\", e[e.READY = 2] = \"READY\", e[e.REJECTED = 3] = \"REJECTED\";\n}(ze || (ze = {}));\nclass We {\n  constructor() {\n    this.add = null, this.renderingInfo = null, this.state = ze.NEW, this.abortController = null, this.remove = null;\n  }\n  clear() {\n    this.add = null, this.renderingInfo = null, this.state = ze.NEW, this.abortController = null, this.remove = null;\n  }\n}\nconst Me = 10,\n  Ne = j(),\n  Be = j(),\n  He = new Map();\nexport { ke as Graphics3DCore };","map":{"version":3,"names":["_","e","i","t","r","s","makeHandle","a","n","someMap","o","findInMap","l","isSome","h","unwrapOr","d","isNone","p","destroyMaybe","c","removeMaybe","y","get","m","disposeMaybe","g","unwrap","u","b","throwIfAborted","eachAlways","f","createDeferred","v","isAbortError","C","watch","S","when","w","on","G","syncAndInitial","x","whenOnce","P","schedule","R","property","D","subclass","E","diff","I","isEmpty","U","A","O","L","j","projectVectorToVector","V","projectXYZToVector","F","canProjectWithoutEngine","T","projectBuffer","k","create","z","center","W","fromRect","M","equals","N","B","H","q","getObjectId","Y","computeAABB","$","hasGeometry","Z","hydrateGraphic","J","isSupportedRenderer3D","Q","validateTo3D","K","loadArcade","X","getDefaultSymbol3D","ee","to3D","ie","ViewElevationProvider","te","VisibilityFlag","re","VisibilityGroup","se","extractExpressionInfo","ae","createContext","ne","Graphics3DFeatureStore","oe","le","Graphics3DSymbolCreationContext","he","make","de","pe","GraphicStateTracking","ce","computeCentroid","ye","ApplyRendererDiffResult","me","LoadStatus","ge","SpatialIndex2D","ue","averageSymbolComplexities","be","defaultSymbolComplexity","_e","StageLayerElevationProvider","fe","toBoundingRect","ve","PropertiesPool","Ce","GridLocalOriginFactory","Se","UpdatePolicy","we","WebGLLayer","Ge","ImmediateTask","xe","noBudget","Pe","TaskPriority","Re","Task","De","Ee","Ie","Ue","Ae","Oe","Le","je","Ve","Fe","Te","getLogger","ke","_viewSpatialReference","owner","view","spatialReference","spatialIndex","_spatialIndex","objectIdField","layer","hasZ","hasM","setup","Array","from","graphics3DGraphics","values","update","numberOfGraphics","_numberOfGraphics","effectiveUpdatePolicy","currentRenderer","type","ASYNC","_forcedUpdatePolicy","preferredUpdatePolicy","featureStore","_featureStore","initializePromise","_initializePromise","scaleVisibility","_scaleVisibility","elevationAlignment","_elevationAlignment","objectStates","_objectStates","filterVisibility","_filterVisibility","updating","_graphicsWaitingForSymbol","size","running","_rendererChangeAbortController","_elevationInfoChangeAbortController","_updatingPendingLoadedGraphicsChange","_frameTask","_loadingSymbols","_pendingUpdates","suspendedOrOutsideOfView","suspended","suspendInfo","outsideOfView","updatingRemaining","displayFeatureLimit","qualitySettings","graphics3D","minTotalNumberOfFeatures","maxTotalNumberOfFeatures","maxTotalNumberOfPrimitives","averageSymbolComplexity","Math","max","primitivesPerFeature","drawCallsPerFeature","ceil","min","_get","minimumTotalNumberOfFeatures","maximumTotalNumberOfFeatures","maximumTotalNumberOfPrimitives","maximumNumberOfFeatures","_symbolComplexities","numComplexities","estimated","primitivesPerCoordinate","usedMemory","labelsEnabled","memory","bytesPerFeatureLabel","_getSymbolComplexitiesUsed","reduce","resourceBytes","_usedMemory","usedMemoryPerGraphic","_pendingAdds","_pendingRemoves","bytesPerFeature","unprocessedMemoryEstimate","_getSymbolComplexitiesUsedOrRenderer","visible","_visible","_getConvertedSymbol","clone","_symbolConversionCache","id","geometryType","retainId","hasLabelingContext","_hasLabelingContext","symbol","error","message","set","getSymbols","backgroundFillSymbol","length","_getSymbolComplexityUsedOrRenderer","push","_symbols","complexity","forEach","_objectIdField","constructor","_propertiesPool","computedExtent","rendererHasGeometryOperations","_graphicStateTracking","Map","stageLayer","stage","_graphicsDrapedUids","Set","_graphicsBySymbol","_graphicsWithoutSymbol","_graphicsUpdateId","_handles","_suspendSymbolCleanup","_arcadeOnDemand","_initializeAbortController","extentPadding","_deconflictor","_labeler","_viewElevationProvider","_stageLayerElevationProvider","_sharedSymbolResourcesOwnerHandle","_whenGraphics3DGraphicRequests","_numberOfGraphicsProvidingElevation","_applyPendingRemovesFirst","_pendingUpdatesPool","allocator","We","deallocator","clear","_symbolWarningLogged","_geometryWarningLogged","_objectIdInvisibleSet","_whenSymbolRemoved","SYNC","elevationFeatureExpressionEnabled","graphicSymbolSupported","getRenderingInfoWithoutRenderer","setUidToIdOnAdd","_startCreateGraphics","symbolCreationContext","resourceController","scheduler","initialize","viewSpatialReference","featureSpatialReference","getSpatialIndex","queryGraphicUIDsInExtent","componentFactories","getFeatureCount","updateFeatureVisibilities","modifyGraphics3DGraphicVisibilities","setVisibilityFlag","FILTER","graphic","GRAPHIC","setAllFeaturesVisibility","clearFeaturesVisibility","clearVisibilityFlag","deconflictor","labeler","AbortController","_initializeAsync","signal","_initializeStage","uid","sharedSymbolResources","sharedResources","addGraphicsOwner","renderer","streamDataRequester","renderCoordsHelper","graphicsCoreOwner","localOriginFactory","renderSpatialReference","elevationProvider","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","elevationInfo","featureExpressionInfoContext","screenSizePerspectiveEnabled","slicePlaneEnabled","physicalBasedRenderingEnabled","physicallyBasedRenderingEnabled","skipHighSymbolLods","drapeSourceRenderer","basemapTerrain","overlayManager","registerGeometryDrapeSource","add","unregisterDrapeSource","reschedule","_updateLayerVisibility","reset","recreateAllGraphicsAndSymbols","_slicePlaneEnabledChange","state","rasterPixelRatio","_pixelRatioChange","_physicalBasedRenderingChange","_skipHighSymbolLoDsChange","tilingScheme","overlaySR","has","recreateAllGraphics","loadedGraphics","_graphicsCollectionChanged","_signalUpdatingDuringAsyncLoadedGraphicsChange","onListenerAdd","initial","updatePolicy","isAsync","runTask","registerTask","GRAPHICS_CORE","featureReduction","featureReductionChange","notifyChange","rendererChange","catch","_abortInitialize","abort","destroy","_abortRendererChange","_abortElevationInfoChange","remove","removeGraphicsOwner","_set","reject","allGraphicsDeleted","events","emit","_stage","pickable","metadata","graphicUid","object","updateGraphicGeometry","updateGraphicVisibility","Me","updateAllGraphicsVisibility","_hideAllGraphics","_updateStageLayerVisibility","opacity","getGraphics3DGraphicById","getGraphics3DGraphicByObjectId","_findGraphics3DGraphicByObjectId","_getGraphicObjectID","arguments","undefined","graphics3DGraphicsByObjectID","layerLabelsEnabled","updateLabelingInfo","labelingInfoChange","updateVisibilityInfo","visibilityInfoChange","symbolUpdateType","getFastUpdateStatus","loading","fast","slow","processQueue","_applyPendingUpdates","hasProgressed","YIELD","setObjectIdVisibility","delete","_updateUserVisibility","USER_SETTING","_whenGraphics3DGraphic","Promise","resolve","promise","_boundsForGraphics3DGraphic","service","useViewElevation","minDemResolution","minDemResolutionForPoints","resolution","getProjectedBoundingBox","boundingBox","requiresDrapedElevation","getElevation","screenSpaceObjects","whenGraphicBounds","find","attributes","computeAttachmentOrigin","render","num","draped","Ne","origin","Be","getSymbolLayerSize","symbolLayers","indexOf","added","removed","graphicUpdateHandler","_graphicUpdateVisibleHandler","_graphicUpdateGeometryHandler","_graphicUpdateSymbolHandler","_graphicUpdateTransformHandler","geometry","_recreateGraphic","loadStatus","LOADING","graphics3DSymbol","newValue","updateGeometry","_expandComputedExtent","oldValue","_updateSymbolMapping","graphics3DGraphicPatches","symbolStatePatches","prepareSymbolPatch","_getRenderingInfo","_recomputeExtentPadding","setDirty","recreateGraphics","_cleanupSymbols","_beginGraphicUpdate","_endGraphicUpdate","tmpVec","isFinite","zmin","zmax","xmin","ymin","xmax","ymax","elevationInfoChange","forEachGraphics3DSymbol","globalPropertyChanged","labelLayers","graphics3DSymbolLayer","updateGraphicElevationContext","_recreateSymbol","updateStageLayerElevationProvider","mode","unregister","register","_clearSymbolsAndGraphics","invalidateSpatialQueryAccelerator","startCreateGraphics","_recreateAllGraphics","toArray","_conditionalRemove","_removeGraphics3DGraphic","_recreateGraphicsForSymbol","removeGraphic","_updatePolicyForGraphics","_addDelayed","_addImmediate","loaded","_addGraphic","ze","NEW","abortController","pushNew","_removeDelayed","_removeImmediate","_removeGraphic","_finishPendingUpdates","warn","madeProgress","done","_processPendingUpdateNew","READY","renderingInfo","REJECTED","_processPendingUpdateNewMesh","_processPendingUpdateNewRenderingInfo","load","_processPendingUpdateNewError","_getRenderingInfoAsync","renderView","objectAndLayerIdRenderHelper","setUidToObjectAndLayerId","objectId","popupEnabled","getOrCreateGraphics3DSymbol","destroyed","removeUnordered","referenced","_createGraphics3DGraphic","onRemoveGraphic","isElevationSource","labelingInfo","some","_hasValidSymbolCreationContext","getRenderingInfo","getRenderingInfoAsync","_createGraphics3DSymbol","ignoreDrivers","trackGraphicState","_addGraphics3DGraphic","createGraphics3DGraphic","isDraped","centroid","updateVisibility","defaultVisibility","reapply","addGraphic","setInitialIconVisibilityFlag","_validateRenderer","_currentRendererChange","arcadeRequired","arcadeUtils","_ensureArcade","hasGeometryOperations","enableGeometryOperations","arcade","_updateUnchangedSymbolMappings","_applyRendererDiff","_volatileGraphicsUpdated","_diffHasSymbolChange","_applySymbolSetDiff","defaultSymbol","getSymbol","forAll","_applyUniqueValueRendererDiff","uniqueValueInfos","map","filter","changed","_calculateUnchangedSymbolMapping","unchanged","oldId","newId","value","Object","keys","applyRendererDiff","Recreate_Symbol","Recreate_Graphics","Fast_Update","opacityChange","sliceable","slicePlaneEnabledChange","setClippingExtent","clippingExtent","He","title","shaderTransformationChanged","test","snapshotInternals","graphics","sort","symbols","graphicsBySymbol","symbolId","graphicsWithoutSymbol","graphicsDrapedUids","pendingUpdates","numPending","forceUpdatePolicy","performanceInfo","missing","pending","readOnly","prototype","constructOnly","dependsOn","Graphics3DCore"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import\"../../../../renderers/ClassBreaksRenderer.js\";import\"../../../../renderers/DictionaryRenderer.js\";import\"../../../../renderers/DotDensityRenderer.js\";import\"../../../../renderers/HeatmapRenderer.js\";import\"../../../../renderers/PieChartRenderer.js\";import\"../../../../renderers/Renderer.js\";import\"../../../../renderers/SimpleRenderer.js\";import i from\"../../../../renderers/UniqueValueRenderer.js\";import\"../../../../renderers/support/jsonUtils.js\";import\"../../../../symbols.js\";import t from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import r from\"../../../../core/Error.js\";import s from\"../../../../core/Handles.js\";import{makeHandle as a}from\"../../../../core/handleUtils.js\";import n from\"../../../../core/Logger.js\";import{someMap as o,findInMap as l}from\"../../../../core/MapUtils.js\";import{isSome as h,unwrapOr as d,isNone as p,destroyMaybe as c,removeMaybe as y,get as m,disposeMaybe as g,unwrap as u}from\"../../../../core/maybe.js\";import b from\"../../../../core/PooledArray.js\";import{throwIfAborted as _,eachAlways as f,createDeferred as v,isAbortError as C}from\"../../../../core/promiseUtils.js\";import{watch as S,when as w,on as G,syncAndInitial as x,whenOnce as P}from\"../../../../core/reactiveUtils.js\";import{schedule as R}from\"../../../../core/scheduling.js\";import{property as D}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as E}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as I,isEmpty as U}from\"../../../../core/accessorSupport/diffUtils.js\";import{s as A,a as O,g as L}from\"../../../../chunks/vec3.js\";import{c as j}from\"../../../../chunks/vec3f64.js\";import{projectVectorToVector as V,projectXYZToVector as F,canProjectWithoutEngine as T,projectBuffer as k}from\"../../../../geometry/projection.js\";import{create as z,center as W,fromRect as M,equals as N}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as B}from\"../../../../geometry/support/aaBoundingRect.js\";import{equals as H}from\"../../../../geometry/support/spatialReferenceUtils.js\";import q from\"../../../../layers/Layer.js\";import{getObjectId as Y,computeAABB as $,hasGeometry as Z}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as J}from\"../../../../layers/graphics/hydratedFeatures.js\";import{isSupportedRenderer3D as Q,validateTo3D as K}from\"../../../../renderers/support/rendererConversion.js\";import{loadArcade as X}from\"../../../../support/arcadeOnDemand.js\";import{getDefaultSymbol3D as ee}from\"../../../../symbols/support/defaults3D.js\";import{to3D as ie}from\"../../../../symbols/support/symbolConversion.js\";import{ViewElevationProvider as te}from\"./ElevationQuery.js\";import{VisibilityFlag as re,VisibilityGroup as se}from\"./enums.js\";import{extractExpressionInfo as ae,createContext as ne}from\"./featureExpressionInfoUtils.js\";import{Graphics3DFeatureStore as oe}from\"./Graphics3DFeatureStore.js\";import le from\"./Graphics3DGraphicCreationContext.js\";import{Graphics3DSymbolCreationContext as he}from\"./Graphics3DSymbolCreationContext.js\";import{make as de}from\"./Graphics3DSymbolFactory.js\";import pe from\"./Graphics3DWebStyleSymbol.js\";import{GraphicStateTracking as ce}from\"./GraphicStateTracking.js\";import{computeCentroid as ye}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as me}from\"./interfaces.js\";import{LoadStatus as ge}from\"./Loadable.js\";import{SpatialIndex2D as ue}from\"./SpatialIndex2D.js\";import{averageSymbolComplexities as be,defaultSymbolComplexity as _e}from\"./symbolComplexity.js\";import{StageLayerElevationProvider as fe}from\"../support/StageLayerElevationProvider.js\";import{toBoundingRect as ve}from\"../../support/extentUtils.js\";import{PropertiesPool as Ce}from\"../../support/PropertiesPool.js\";import{GridLocalOriginFactory as Se}from\"../../webgl-engine/lib/GridLocalOriginFactory.js\";import{UpdatePolicy as we}from\"../../webgl-engine/lib/UpdatePolicy.js\";import{WebGLLayer as Ge}from\"../../webgl-engine/lib/WebGLLayer.js\";import{ImmediateTask as xe,noBudget as Pe,TaskPriority as Re,Task as De}from\"../../../support/Scheduler.js\";import Ee from\"../../../../geometry/Extent.js\";import Ie from\"../../../../geometry/Point.js\";import Ue from\"../../../../symbols/LabelSymbol3D.js\";import Ae from\"../../../../symbols/TextSymbol.js\";import Oe from\"../../../../symbols/WebStyleSymbol.js\";var Le;const je=j(),Ve=z(),Fe=\"esri.views.3d.layers.graphics.Graphics3DCore\",Te=n.getLogger(Fe);let ke=Le=class extends t{get _viewSpatialReference(){return this.owner.view.spatialReference}get spatialIndex(){return this._spatialIndex||(this._spatialIndex=new ue({objectIdField:this.owner.layer?.objectIdField,spatialReference:this._viewSpatialReference,hasZ:!!this.hasZ,hasM:!!this.hasM}),this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values()))),this._spatialIndex.update(),this._spatialIndex}get numberOfGraphics(){return this._numberOfGraphics}get effectiveUpdatePolicy(){return h(this.currentRenderer)&&\"dictionary\"===this.currentRenderer.type?we.ASYNC:d(this._forcedUpdatePolicy,this.preferredUpdatePolicy)}get featureStore(){return this._featureStore}get initializePromise(){return this._initializePromise}get scaleVisibility(){return this._scaleVisibility}get elevationAlignment(){return this._elevationAlignment}get objectStates(){return this._objectStates}get filterVisibility(){return this._filterVisibility}get updating(){return!!(this._graphicsWaitingForSymbol.size>0||this.running||this._elevationAlignment?.updating||h(this._scaleVisibility)&&this._scaleVisibility.updating||h(this._filterVisibility)&&this._filterVisibility.updating||this._rendererChangeAbortController||this._elevationInfoChangeAbortController||this._updatingPendingLoadedGraphicsChange||this._frameTask.updating||this._loadingSymbols>0)}get running(){return this._pendingUpdates.size>0||!!this._spatialIndex?.updating}get suspendedOrOutsideOfView(){return this.owner.suspended||!!this.owner.suspendInfo?.outsideOfView}get updatingRemaining(){return this.updating?this._pendingUpdates.size+.1*(this._spatialIndex?.updatingRemaining||0)+.1*(this._elevationAlignment?.updatingRemaining||0):0}get displayFeatureLimit(){const e=this.owner&&this.owner.view&&this.owner.view.qualitySettings,i=e?e.graphics3D.minTotalNumberOfFeatures:0,t=e?e.graphics3D.maxTotalNumberOfFeatures:0,r=e?e.graphics3D.maxTotalNumberOfPrimitives:0,s=this.averageSymbolComplexity,a=Math.max(1,h(s)?s.primitivesPerFeature:1),n=h(s)&&s.drawCallsPerFeature>0?t/s.drawCallsPerFeature*.3:t,o=Math.ceil(r/a),l=Math.max(i,Math.min(t,o,n)),d=this._get(\"displayFeatureLimit\");return d&&d.minimumTotalNumberOfFeatures===i&&d.maximumTotalNumberOfFeatures===t&&d.maximumTotalNumberOfPrimitives===r&&d.averageSymbolComplexity===s&&d.maximumNumberOfFeatures===l?d:{minimumTotalNumberOfFeatures:i,maximumTotalNumberOfFeatures:t,maximumTotalNumberOfPrimitives:r,averageSymbolComplexity:s,maximumNumberOfFeatures:l}}get averageSymbolComplexity(){const e=be(this._symbolComplexities),i=this._get(\"averageSymbolComplexity\");return 0===e.numComplexities||h(i)&&(e.estimated&&(i.primitivesPerFeature>=e.primitivesPerFeature||i.primitivesPerCoordinate>=e.primitivesPerCoordinate||i.drawCallsPerFeature>=e.drawCallsPerFeature)||i.primitivesPerFeature===e.primitivesPerFeature&&i.primitivesPerCoordinate===e.primitivesPerCoordinate&&i.drawCallsPerFeature===e.drawCallsPerFeature)?i:e}get usedMemory(){const e=h(this.averageSymbolComplexity)&&this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel*this._numberOfGraphics:0,i=this._getSymbolComplexitiesUsed().reduce(((e,i)=>e+i.memory.resourceBytes),0);return this._usedMemory+e+i}get usedMemoryPerGraphic(){if(this._usedMemory&&this._numberOfGraphics){const e=this._numberOfGraphics/(this._numberOfGraphics+Math.max(this._pendingAdds,this._pendingRemoves));return this._usedMemory/this._numberOfGraphics*e}if(h(this.averageSymbolComplexity)){const e=this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel:0;return this.averageSymbolComplexity.memory.bytesPerFeature+e}return 0}get unprocessedMemoryEstimate(){return(this._pendingAdds-this._pendingRemoves)*this.usedMemoryPerGraphic}get _symbolComplexities(){return this.currentRenderer?this._getSymbolComplexitiesUsedOrRenderer(this.currentRenderer):this._getSymbolComplexitiesUsed()}get visible(){return this._visible}_getConvertedSymbol(e){if(\"web-style\"===e.type)return e.clone();const i=this._symbolConversionCache.get(e.id);if(h(i))return i;const t=ie(e,{geometryType:this.layer?.geometryType??void 0,retainId:!0,hasLabelingContext:this._hasLabelingContext(e)}),r=t.symbol||null;return p(r)&&t.error&&Te.error(t.error.message),this._symbolConversionCache.set(e.id,r),r}_getSymbolComplexitiesUsedOrRenderer(e){if(p(e))return[];const i=e.getSymbols(),t=\"backgroundFillSymbol\"in e?e.backgroundFillSymbol:null;if(!(t||i&&i.length))return[];const r=[],s=this._getSymbolComplexityUsedOrRenderer(t);h(s)&&r.push(s);for(const a of i){const e=this._getSymbolComplexityUsedOrRenderer(a);h(e)&&r.push(e)}return r}_getSymbolComplexityUsedOrRenderer(e){if(p(e))return null;const i=this._symbols.get(e.id);if(h(i))return i.complexity;const t=this._getConvertedSymbol(e);return h(t)?_e(t):null}_getSymbolComplexitiesUsed(){const e=[];return this._symbols.forEach((i=>{h(i)&&e.push(i.complexity)})),e}get _objectIdField(){return this.layer.objectIdField}constructor(e){super(e),this._propertiesPool=new Ce({computedExtent:Ee},this),this.computedExtent=null,this.currentRenderer=null,this.rendererHasGeometryOperations=!1,this._graphicStateTracking=null,this.graphics3DGraphics=new Map,this.stageLayer=null,this.stage=null,this._graphicsDrapedUids=new Set,this._graphicsBySymbol=new Map,this._symbolConversionCache=new Map,this._symbols=new Map,this._graphicsWithoutSymbol=new Map,this._graphicsWaitingForSymbol=new Map,this._graphicsUpdateId=0,this._handles=new s,this._frameTask=xe,this._suspendSymbolCleanup=!1,this._arcadeOnDemand=null,this._rendererChangeAbortController=null,this._elevationInfoChangeAbortController=null,this._initializeAbortController=null,this._scaleVisibility=null,this._filterVisibility=null,this._spatialIndex=null,this.extentPadding=0,this._updatingPendingLoadedGraphicsChange=null,this._featureStore=null,this._deconflictor=null,this._labeler=null,this._objectStates=null,this._viewElevationProvider=null,this._stageLayerElevationProvider=null,this._sharedSymbolResourcesOwnerHandle=null,this._whenGraphics3DGraphicRequests={},this._pendingUpdates=new Map,this._numberOfGraphics=0,this._numberOfGraphicsProvidingElevation=0,this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1,this._loadingSymbols=0,this._pendingUpdatesPool=new b({allocator:e=>e||new We,deallocator:e=>(e.clear(),e)}),this._symbolWarningLogged=!1,this._geometryWarningLogged=!1,this._objectIdInvisibleSet=new Set,this._whenSymbolRemoved=new b,this.preferredUpdatePolicy=we.SYNC,this._forcedUpdatePolicy=null,this.elevationFeatureExpressionEnabled=!0,this.owner=null,this.layer=null,this.graphicSymbolSupported=!0,this.getRenderingInfoWithoutRenderer=!1,this.setUidToIdOnAdd=!0,this.hasZ=null,this.hasM=null,this._usedMemory=0,this._visible=!1,this._startCreateGraphics=!1,this.symbolCreationContext=new he(e.owner.view.resourceController.scheduler,((e,i)=>this._frameTask.schedule(e,i)))}initialize(){this._featureStore=new oe({objectIdField:this.owner.layer&&this.owner.layer.objectIdField,hasZ:!!this.hasZ,hasM:!!this.hasM,viewSpatialReference:this._viewSpatialReference,featureSpatialReference:this.owner.featureSpatialReference,getSpatialIndex:()=>this.spatialIndex,forEach:e=>this.graphics3DGraphics.forEach(e)});const e=(e,i,t)=>this.spatialIndex.queryGraphicUIDsInExtent(e,i,t),{componentFactories:i}=this;if(h(i.elevationAlignment)){const t=i.elevationAlignment(this,e);this._elevationAlignment=t}if(h(i.scaleVisibility)){const t=i.scaleVisibility(this,e);this._scaleVisibility=t}if(h(i.filterVisibility)){const e=i.filterVisibility({featureStore:this._featureStore,getFeatureCount:()=>this.graphics3DGraphics.size,updateFeatureVisibilities:e=>this.modifyGraphics3DGraphicVisibilities((i=>i.setVisibilityFlag(re.FILTER,e(Y(i.graphic,this._objectIdField)),se.GRAPHIC))),setAllFeaturesVisibility:e=>this.modifyGraphics3DGraphicVisibilities((i=>i.setVisibilityFlag(re.FILTER,e,se.GRAPHIC))),clearFeaturesVisibility:()=>this.modifyGraphics3DGraphicVisibilities((e=>e.clearVisibilityFlag(re.FILTER)))});this._filterVisibility=e}if(h(i.deconflictor)){const e=i.deconflictor(this);this._deconflictor=e}if(h(i.labeler)&&h(this._scaleVisibility)){const e=i.labeler(this,this._scaleVisibility);this._labeler=e}if(h(i.objectStates)){const e=i.objectStates(this);this._objectStates=e}this._initializeAbortController=new AbortController,this._initializePromise=this._initializeAsync()}async _initializeAsync(){const e=this._initializeAbortController?.signal,i=this.owner.view;this._viewElevationProvider=new te(this._viewSpatialReference,i),this._initializeStage(i,this.layer.uid);const t=i.sharedSymbolResources;this.symbolCreationContext.sharedResources=t,this._sharedSymbolResourcesOwnerHandle=t.addGraphicsOwner(this.owner),h(this.currentRenderer)&&(this.symbolCreationContext.renderer=this.currentRenderer),this.symbolCreationContext.stage=this.stage,this.symbolCreationContext.streamDataRequester=t.streamDataRequester,this.symbolCreationContext.renderCoordsHelper=i.renderCoordsHelper,this.symbolCreationContext.layer=this.layer,this.symbolCreationContext.graphicsCoreOwner=this.owner,this.symbolCreationContext.localOriginFactory=new Se(i.renderSpatialReference),this.symbolCreationContext.elevationProvider=i.elevationProvider,this.symbolCreationContext.notifyGraphicGeometryChanged=e=>this.notifyGraphicGeometryChanged(e),this.symbolCreationContext.notifyGraphicVisibilityChanged=e=>this.notifyGraphicVisibilityChanged(e);const r=ae(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);if(this.symbolCreationContext.featureExpressionInfoContext=await ne(r,this._viewSpatialReference,e,Te),_(e),this.symbolCreationContext.screenSizePerspectiveEnabled=i.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.symbolCreationContext.physicalBasedRenderingEnabled=!!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled,this.symbolCreationContext.skipHighSymbolLods=!!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods,\"drapeSourceType\"in this.owner){const{owner:e}=this;this.symbolCreationContext.drapeSourceRenderer=i.basemapTerrain.overlayManager.registerGeometryDrapeSource(e),this._handles.add(a((()=>i.basemapTerrain.overlayManager.unregisterDrapeSource(e))))}this._handles.add([S((()=>this.suspendedOrOutsideOfView),(()=>this._frameTask.reschedule((()=>this._updateLayerVisibility())))),S((()=>[this.layer?.screenSizePerspectiveEnabled,this.owner.view.screenSizePerspectiveEnabled]),(()=>{const e=i.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled;e!==this.symbolCreationContext.screenSizePerspectiveEnabled&&(this.symbolCreationContext.screenSizePerspectiveEnabled=e,this._labeler?.reset(),this.recreateAllGraphicsAndSymbols())})),S((()=>this.owner.slicePlaneEnabled),(e=>this._slicePlaneEnabledChange(!!e))),S((()=>this.owner.view.state?.rasterPixelRatio),(()=>this._pixelRatioChange())),S((()=>!!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled),(e=>this._physicalBasedRenderingChange(e))),S((()=>!!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods),(e=>this._skipHighSymbolLoDsChange(e))),w((()=>i.basemapTerrain?.tilingScheme),(e=>{if(!e.spatialReference.equals(this.symbolCreationContext.overlaySR)&&h(i.basemapTerrain.spatialReference)&&(this.symbolCreationContext.overlaySR=i.basemapTerrain.spatialReference),this._handles.has(\"loaded-graphics\"))this.recreateAllGraphics();else{const e=()=>this.owner?.loadedGraphics;this._handles.add([G(e,\"change\",(e=>{this._graphicsCollectionChanged(e),this._signalUpdatingDuringAsyncLoadedGraphicsChange()}),{onListenerAdd:()=>{this.recreateAllGraphics(),this._signalUpdatingDuringAsyncLoadedGraphicsChange()}})],\"loaded-graphics\")}}),{initial:!0}),S((()=>this.effectiveUpdatePolicy),(e=>{h(this.stageLayer)&&(this.stageLayer.updatePolicy=e),this.symbolCreationContext.isAsync=this.effectiveUpdatePolicy===we.ASYNC,e===we.SYNC&&this.runTask(Pe)}),x)]),this._frameTask=i.resourceController.scheduler.registerTask(Re.GRAPHICS_CORE,this),this.layer&&\"featureReduction\"in this.layer&&this._handles.add(S((()=>this.layer.featureReduction),(()=>this._deconflictor.featureReductionChange()))),this.notifyChange(\"averageSymbolComplexity\"),this.rendererChange(this.owner.renderer).catch((()=>{})),this._initializeAbortController=null}_abortInitialize(){this._initializeAbortController&&(this._initializeAbortController.abort(),this._initializeAbortController=null)}destroy(){this._abortInitialize(),this._abortRendererChange(),this._abortElevationInfoChange(),this._frameTask.remove(),this._frameTask=xe,this.owner.view.deconflictor.removeGraphicsOwner(this),this.owner.view.labeler.removeGraphicsOwner(this),this._elevationAlignment=c(this._elevationAlignment),this._scaleVisibility=c(this._scaleVisibility),this._filterVisibility=c(this._filterVisibility),this._deconflictor=null,this._labeler=null,this._objectStates=c(this._objectStates),this.clear(),this._featureStore=c(this._featureStore),this._updatingPendingLoadedGraphicsChange=y(this._updatingPendingLoadedGraphicsChange),this._graphicStateTracking=c(this._graphicStateTracking),this.stage&&(this.stage.remove(this.stageLayer),this.stageLayer=null,this.stage=null),this._handles=c(this._handles),this._set(\"owner\",null);for(const e in this._whenGraphics3DGraphicRequests)this._whenGraphics3DGraphicRequests[e].reject(new r(\"graphic:layer-destroyed\",\"Layer has been destroyed\"));this._whenGraphics3DGraphicRequests=null,this._sharedSymbolResourcesOwnerHandle=y(this._sharedSymbolResourcesOwnerHandle),this._propertiesPool=c(this._propertiesPool),this._pendingUpdatesPool=null,this._symbolConversionCache.clear(),this._objectIdInvisibleSet.clear(),this._spatialIndex=c(this._spatialIndex)}clear(){this._objectStates?.allGraphicsDeleted(),h(this._graphicStateTracking)&&this._graphicStateTracking.allGraphicsDeleted(),this.graphics3DGraphics.forEach((e=>e.destroy())),this._spatialIndex?.clear(),this.graphics3DGraphics.clear(),this._numberOfGraphics=0,this._usedMemory=0,this._updateLayerVisibility(),this._symbols.forEach(c),this._symbols.clear(),this._graphicsBySymbol.clear(),this._graphicsWithoutSymbol.clear(),this._graphicsWaitingForSymbol.clear(),this._pendingUpdates.clear(),this._pendingUpdatesPool.clear(),this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1,this.notifyChange(\"updating\"),this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\"),this._featureStore.events.emit(\"changed\")}_initializeStage(e,i){this.stage=e._stage,this.stageLayer=new Ge({pickable:!this.suspendedOrOutsideOfView,updatePolicy:this.effectiveUpdatePolicy},i),this.stage.add(this.stageLayer);const t=this.stageLayer.events;t.on(\"objectTransformation\",(e=>this.notifyGraphicGeometryChanged(e.metadata.graphicUid))),t.on(\"visibilityChanged\",(e=>this.notifyGraphicVisibilityChanged(e.metadata.graphicUid))),t.on(\"objectGeometryAdded\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid))),t.on(\"objectGeometryRemoved\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid))),t.on(\"objectGeometryUpdated\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid)))}notifyGraphicGeometryChanged(e){if(p(this._graphicStateTracking)||p(e))return;const i=this.graphics3DGraphics.get(e);i&&this._graphicStateTracking.updateGraphicGeometry(i)}notifyGraphicVisibilityChanged(e){if(p(this._graphicStateTracking)||p(e))return;const i=this.graphics3DGraphics.get(e);i&&this._graphicStateTracking.updateGraphicVisibility(i)}_updateLayerVisibility(){const e=this.displayFeatureLimit.maximumNumberOfFeatures,i=this._numberOfGraphics>e*Me,t=!this.suspendedOrOutsideOfView&&!i;t!==this._visible&&(this._visible=t,t?(this.stageLayer.pickable=!0,this.updateAllGraphicsVisibility()):(this.stageLayer.pickable=!1,this._hideAllGraphics()),this._updateStageLayerVisibility())}_updateStageLayerVisibility(){this.stageLayer.visible=this._visible&&(null==this.layer.opacity||this.layer.opacity>0)}getGraphics3DGraphicById(e){return null!=e?this.graphics3DGraphics.get(e):void 0}getGraphics3DGraphicByObjectId(e){return this.owner.layer?.objectIdField?this._findGraphics3DGraphicByObjectId(e):null}_getGraphicObjectID(e,i=this.owner.layer&&this.owner.layer.objectIdField){return Y(e,i)}get graphics3DGraphicsByObjectID(){const e=this.owner.layer&&this.owner.layer.objectIdField;if(!e)return;const i=new Map;return this.graphics3DGraphics.forEach((t=>{if(!t)return;const r=t.graphic,s=this._getGraphicObjectID(r,e);h(s)&&i.set(s,t)})),i}get labelsEnabled(){return!(!this._labeler||!this._labeler.layerLabelsEnabled())}async updateLabelingInfo(e){const i=this._deconflictor&&this._deconflictor.labelingInfoChange(e),t=this._labeler&&this._labeler.labelingInfoChange(e);await f([i,t])}updateVisibilityInfo(){this._deconflictor&&this._deconflictor.labelingInfoChange(),this._labeler&&this._labeler.visibilityInfoChange()}get symbolUpdateType(){if(this._pendingUpdates.size>0)return\"unknown\";let e=0,i=0;return o(this._symbols,((t,r)=>{if(h(t)){const s=t.getFastUpdateStatus();if(s.loading>0)return!0;this._graphicsBySymbol.has(r)&&(i+=s.fast,e+=s.slow)}return!1}))?\"unknown\":i>=0&&0===e?\"fast\":e>=0&&0===i?\"slow\":\"mixed\"}runTask(e){if(this._frameTask.processQueue(e),this._applyPendingUpdates(e),this.notifyChange(\"running\"),this.running||this.notifyChange(\"updating\"),this.notifyChange(\"updatingRemaining\"),!e.hasProgressed)return De.YIELD}setObjectIdVisibility(e,i){i?this._objectIdInvisibleSet.delete(e):this._objectIdInvisibleSet.add(e);const t=this._findGraphics3DGraphicByObjectId(e);h(t)&&this._updateUserVisibility(t)}_findGraphics3DGraphicByObjectId(e){return l(this.graphics3DGraphics,(i=>this._getGraphicObjectID(i.graphic)===e))}_updateUserVisibility(e){if(p(e))return!1;const i=e.graphic,t=this._getGraphicObjectID(i),r=i.visible&&!this.owner.suspended&&(p(t)||!this._objectIdInvisibleSet.has(t));return e.setVisibilityFlag(re.USER_SETTING,r,se.GRAPHIC)}_whenGraphics3DGraphic(e){const i=this.graphics3DGraphics.get(e.uid);if(i)return Promise.resolve(i);const t=this._whenGraphics3DGraphicRequests[e.uid];if(t)return t.promise;const r=v();return this._whenGraphics3DGraphicRequests[e.uid]=r,r.promise}async _boundsForGraphics3DGraphic(e,i){const t=this._viewSpatialReference,r=this.owner.view.renderSpatialReference,s=this.owner.view.basemapTerrain.spatialReference,a=(e,i,s)=>k(e,r,i,e,t,i,s),n=(e,i,r)=>k(e,s,i,e,t,i,r),o=this._viewElevationProvider?{service:this._viewElevationProvider,useViewElevation:!!h(i)&&!!i.useViewElevation,minDemResolution:h(i)?i.minDemResolution:null,minDemResolutionForPoints:this.owner.view.resolution}:null,l=await e.getProjectedBoundingBox(a,n,o,m(i,\"signal\"));if(!l)return null;const p=l.boundingBox;if(l.requiresDrapedElevation){const e=this.symbolCreationContext.elevationProvider;if(e){W(p,je);const i=d(e.getElevation(je[0],je[1],0,t,\"ground\"),0);p[2]=Math.min(p[2],i),p[5]=Math.max(p[5],i)}}return{boundingBox:p,screenSpaceObjects:l.screenSpaceObjects}}async whenGraphicBounds(e,i){await P((()=>this.owner?.loadedGraphics));const t=this.owner.layer&&this.owner.layer.objectIdField,s=this.owner.loadedGraphics.find((i=>i===e||null!=t&&null!=i.attributes&&e.attributes&&i.attributes[t]===e.attributes[t]));if(!s)throw new r(\"internal:graphic-not-part-of-view\",\"Graphic is not part of this view\");const a=await this._whenGraphics3DGraphic(s);return this._boundsForGraphics3DGraphic(a,i)}computeAttachmentOrigin(e,i){const t=this.graphics3DGraphics.get(e.uid);if(!t)return null;const r=t.computeAttachmentOrigin();if(0===r.render.num&&0===r.draped.num)return null;A(Ne,0,0,0);let s=0;if(r.render.num>0){if(!V(r.render.origin,this.symbolCreationContext.renderCoordsHelper.spatialReference,Be,i))return null;O(Ne,Ne,Be),s++}if(r.draped.num>0){const[e,t]=r.draped.origin,a=d(this._viewElevationProvider.getElevation(e,t,\"ground\"),0);if(A(Be,e,t,a),!V(Be,this._viewElevationProvider.spatialReference,Be,i))return null;O(Ne,Ne,Be),s++}return s>1&&L(Ne,Ne,1/s),new Ie({x:Ne[0],y:Ne[1],z:Ne[2],spatialReference:i})}getSymbolLayerSize(e,i){const t=this._symbols.get(e.id);if(p(t))throw new r(\"internal:symbol-not-part-of-view\",\"Symbol is not part of this view\");const s=e.symbolLayers.indexOf(i);if(-1===s)throw new r(\"internal:missing-symbol-layer\",\"Symbol layer is not in symbol\");const a=t.getSymbolLayerSize(s);if(p(a))throw new r(\"internal:missing-size\",\"Symbol layer has no valid size\");return a}_graphicsCollectionChanged(e){this._startCreateGraphics&&(this.add(e.added),this.remove(e.removed))}graphicUpdateHandler(e){const i=e.graphic.uid,t=this.graphics3DGraphics.get(i);if(!p(t)||!p(this._graphicsWithoutSymbol.get(i)))switch(e.property){case\"visible\":this._graphicUpdateVisibleHandler(t);break;case\"geometry\":this._graphicUpdateGeometryHandler(t,e);break;case\"symbol\":this._graphicUpdateSymbolHandler(t,e);break;case\"attributes\":break;case\"transform\":this._graphicUpdateTransformHandler(t,e)}}_graphicUpdateGeometryHandler(e,i){const t=i.graphic.geometry;if(p(t))return void this._recreateGraphic(i.graphic);if(p(e)){const e=i.graphic.symbol&&i.graphic.symbol.id;if(e){const i=this._symbols.get(e);if(h(i)&&i.loadStatus===ge.LOADING)return}return void this._recreateGraphic(i.graphic)}const r=e.graphics3DSymbol;!p(i.newValue)&&r.updateGeometry(e,i.newValue)||this._recreateGraphic(e.graphic),this._expandComputedExtent(t)}_graphicUpdateSymbolHandler(e,i){const t=i.graphic,r=h(e)?e.graphics3DSymbol:h(i.oldValue)?this._symbols.get(i.oldValue.id):null;if(p(r)||p(i.newValue))return void this._recreateGraphic(t);const s=r.symbol,a=this._getConvertedSymbol(i.newValue);if(h(a)&&(a.type!==s.type||\"web-style\"===a.type)||\"web-style\"===s.type)return void this._recreateGraphic(t);const n=this._graphicsBySymbol.get(s.id);if(n&&1!==n.size)return void this._recreateGraphic(t);const o=I(s,a);if(p(o))return void this._updateSymbolMapping(s.id,a);const l={diff:o,graphics3DGraphicPatches:[],symbolStatePatches:[]};if(r.prepareSymbolPatch(l),!U(l.diff))return void this._recreateGraphic(t);const d=this._getRenderingInfo(t);if(p(d))return void this._recreateGraphic(t);const c=r.extentPadding;for(const h of l.symbolStatePatches)h();if(c!==r.extentPadding&&this._recomputeExtentPadding(),h(e))for(const h of l.graphics3DGraphicPatches)h(e,d);this._updateSymbolMapping(s.id,a)}_graphicUpdateVisibleHandler(e){this._updateUserVisibility(e)&&(this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}_graphicUpdateTransformHandler(e,i){}recreateGraphics(e){this._suspendSymbolCleanup=!0,this.remove(e),this.add(e),this._suspendSymbolCleanup=!1,this.effectiveUpdatePolicy===we.SYNC&&this._cleanupSymbols()}_recreateGraphic(e){this.recreateGraphics([e])}_beginGraphicUpdate(e){const i=this._graphicsUpdateId;return this._graphicsUpdateId++,this._graphicsWaitingForSymbol.set(e.uid,i),1===this._graphicsWaitingForSymbol.size&&this.notifyChange(\"updating\"),i}_endGraphicUpdate(e){e&&(this._graphicsWaitingForSymbol.delete(e.uid),0===this._graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"updating\")))}_recomputeExtentPadding(){let e=0;this._symbols.forEach((i=>{h(i)&&(e=Math.max(e,i.extentPadding))})),this._set(\"extentPadding\",e)}_expandComputedExtent(e){const i=Ve,t=e.spatialReference;$(e,i);const r=this._viewSpatialReference,s=Le.tmpVec;if(H(t,r)||F(i[0],i[1],0,t,s,r)&&(i[0]=s[0],i[1]=s[1],F(i[3],i[4],0,t,s,r),i[3]=s[0],i[4]=s[1]),!(isFinite(i[0])&&isFinite(i[3])&&isFinite(i[1])&&isFinite(i[4])))return;const a=this.computedExtent;let n=null;const o=isFinite(i[2])&&isFinite(i[5]),l=o&&(!a||null==a.zmin||i[2]<a.zmin),h=o&&(!a||null==a.zmax||i[5]>a.zmax);if(a){(i[0]<a.xmin||i[1]<a.ymin||i[3]>a.xmax||i[4]>a.ymax||l||h)&&(n=this._propertiesPool.get(\"computedExtent\"),n.xmin=Math.min(i[0],a.xmin),n.ymin=Math.min(i[1],a.ymin),n.xmax=Math.max(i[3],a.xmax),n.ymax=Math.max(i[4],a.ymax),n.spatialReference=r)}else n=this._propertiesPool.get(\"computedExtent\"),n.xmin=i[0],n.ymin=i[1],n.xmax=i[3],n.ymax=i[4],n.spatialReference=r;n&&(l&&(n.zmin=i[2]),h&&(n.zmax=i[5]),this._set(\"computedExtent\",n))}_abortElevationInfoChange(){this._elevationInfoChangeAbortController&&(this._elevationInfoChangeAbortController.abort(),this._elevationInfoChangeAbortController=null)}async elevationInfoChange(){this._abortElevationInfoChange();const e=new AbortController;this._elevationInfoChangeAbortController=e;const i=ae(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await ne(i,this._viewSpatialReference,e.signal,Te),_(e.signal),this._elevationInfoChangeAbortController=null,this._labeler?.elevationInfoChange(),this.forEachGraphics3DSymbol(((e,i,t)=>{e.globalPropertyChanged(\"elevationInfo\",i)?i.forEach((e=>{const i=e.graphic,t=e.labelLayers;for(const r of t){r.graphics3DSymbolLayer.updateGraphicElevationContext(i,r)}})):this._recreateSymbol(t)})),this.updateStageLayerElevationProvider(),this._elevationAlignment?.elevationInfoChange()}updateStageLayerElevationProvider(){this._stageLayerElevationProvider?(this.layer.elevationInfo&&\"relative-to-scene\"===this.layer.elevationInfo.mode||0===this._numberOfGraphicsProvidingElevation)&&(this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider),this._stageLayerElevationProvider=g(this._stageLayerElevationProvider)):(!this.layer.elevationInfo||this.layer.elevationInfo&&\"relative-to-scene\"!==this.layer.elevationInfo.mode)&&this._numberOfGraphicsProvidingElevation>0&&(this._stageLayerElevationProvider=new fe({layer:this.layer,stageLayer:this.stageLayer,view:this.owner.view}),this.owner.view.elevationProvider.register(\"scene\",this._stageLayerElevationProvider))}_clearSymbolsAndGraphics(){this.clear(),h(this._filterVisibility)&&this._filterVisibility.clear(),this._labeler?.reset(),this._deconflictor?.clear(),this._elevationAlignment?.clear(),this.stageLayer?.invalidateSpatialQueryAccelerator(),this._stageLayerElevationProvider&&(this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider),this._stageLayerElevationProvider=g(this._stageLayerElevationProvider))}startCreateGraphics(){this._startCreateGraphics=!0,this.recreateAllGraphics()}recreateAllGraphics(){this._recreateAllGraphics(!1)}recreateAllGraphicsAndSymbols(){this._recreateAllGraphics(!0)}_recreateAllGraphics(e=!1){if(!this._startCreateGraphics)return;const{loadedGraphics:i,view:t}=this.owner,r=t.basemapTerrain.tilingScheme&&i&&i.length?i.toArray():null;!e&&r||this._clearSymbolsAndGraphics(),this.symbolCreationContext.screenSizePerspectiveEnabled=this.owner.view.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this._set(\"computedExtent\",null),r&&(e?this.add(r):this.recreateGraphics(r))}_recreateSymbol(e){const i=this._graphicsBySymbol.get(e),t=[];i&&(i.forEach(((e,i)=>{const r=e.usedMemory;this._conditionalRemove(e,i),this._spatialIndex?.remove(e),t.push(e.graphic),e.destroy(),this._removeGraphics3DGraphic(i,r),this._updateLayerVisibility(),this._featureStore.events.emit(\"changed\")})),this._graphicsBySymbol.set(e,new Map));const r=this._symbols.get(e);c(r),this._symbols.delete(e),this.add(t)}_recreateGraphicsForSymbol(e){const i=this._graphicsBySymbol.get(e);if(i){const e=[];i.forEach((i=>e.push(i.graphic))),this.recreateGraphics(e)}}_conditionalRemove(e,i){this._graphicsDrapedUids.delete(i),this._objectStates?.removeGraphic(e),this._labeler?.removeGraphic(e),this._deconflictor?.removeGraphic(e),h(this._graphicStateTracking)&&this._graphicStateTracking.removeGraphic(e)}add(e){e&&0!==e.length&&(this.owner.view.basemapTerrain&&this.owner.view.basemapTerrain.tilingScheme?(this._updatePolicyForGraphics(e)===we.ASYNC?this._addDelayed(e):this._addImmediate(e),this.notifyChange(\"updating\")):Te.error(\"#add()\",\"Cannot add graphics before terrain surface has been initialized\"))}_updatePolicyForGraphics(e){if(this.effectiveUpdatePolicy===we.SYNC&&(\"mesh\"===this.layer.geometryType||null==this.layer.geometryType))for(const i of e)if(h(i.geometry)&&\"mesh\"===i.geometry.type&&!i.geometry.loaded)return we.ASYNC;return this.effectiveUpdatePolicy}_addImmediate(e){this._geometryWarningLogged=!1,this._symbolWarningLogged=!1;for(const i of e)this._addGraphic(i,this._getRenderingInfo(i,Te),we.SYNC);this._cleanupSymbols(),this._labeler&&(this.owner.view.labeler.setDirty(),this._cleanupSymbols()),this.owner.view.deconflictor.setDirty()}_addDelayed(e){for(const i of e){const e=i.uid;let t=this._pendingUpdates.get(e);t?t.add?t.state!==ze.NEW&&t.abortController?.abort():this._pendingAdds++:(t=this._pendingUpdatesPool.pushNew(),this._pendingAdds++,this._pendingUpdates.set(e,t)),t.add=i}this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\")}remove(e){this.effectiveUpdatePolicy===we.ASYNC?this._removeDelayed(e):this._removeImmediate(e),this.notifyChange(\"updating\")}_removeImmediate(e){for(const i of e)this._removeGraphic(i);this._cleanupSymbols(),this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_removeDelayed(e){for(const i of e){const e=i.uid,t=this._pendingUpdates.get(e);if(t)t.add&&(t.remove?t.add=null:this._pendingUpdates.delete(e),t.state===ze.LOADING&&t.abortController?.abort(),this._pendingAdds--);else{const t=this._pendingUpdatesPool.pushNew();t.remove=i,this._pendingUpdates.set(e,t),this._pendingRemoves++,this._applyPendingRemovesFirst=!0}}0===this._pendingUpdates.size&&this._finishPendingUpdates(),this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\")}_finishPendingUpdates(){this._pendingUpdatesPool.clear(),this._cleanupSymbols(),(this._pendingAdds||this._pendingRemoves)&&Te.warn(\"pendingAdds/Removes in inconsistent state!\"),this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1}_applyPendingUpdates(e){if(this._geometryWarningLogged=!1,this._symbolWarningLogged=!1,0===this._pendingUpdates.size&&this._spatialIndex?.updating)return this._spatialIndex.update(),void e.madeProgress();if(this._applyPendingRemovesFirst){this._applyPendingRemovesFirst=!1;for(const[i,t]of this._pendingUpdates){if(e.done){this._applyPendingRemovesFirst=!0;break}if(t.remove&&!t.add&&(this._pendingRemoves--,e.madeProgress(),this._removeGraphic(t.remove),t.remove=null,this._pendingUpdates.delete(i),0===this._pendingRemoves))break}}for(const[i,t]of this._pendingUpdates){if(e.done)break;t.add&&t.state===ze.NEW&&this._processPendingUpdateNew(t);let r=this.effectiveUpdatePolicy;if(!t.remove||t.add&&t.state!==ze.READY||(this._pendingRemoves--,e.madeProgress(),this._removeGraphic(t.remove),t.remove=null,r=we.SYNC),t.add)switch(t.state){case ze.READY:this._addGraphic(t.add,t.renderingInfo,r),t.add=null,this._pendingAdds--,e.madeProgress();break;case ze.REJECTED:t.add=null,this._pendingAdds--;case ze.LOADING:}null==t.remove&&null==t.add&&this._pendingUpdates.delete(i)}0===this._pendingUpdates.size&&(this._finishPendingUpdates(),this.notifyChange(\"running\"))}_processPendingUpdateNew(e){if(!e.add)return void(e.state=ze.READY);const i=e.add.geometry;h(i)&&\"mesh\"===i.type&&!i.loaded?this._processPendingUpdateNewMesh(e,i):this._processPendingUpdateNewRenderingInfo(e)}async _processPendingUpdateNewMesh(e,i){e.state=ze.LOADING,e.abortController=new AbortController;const t=e.abortController.signal;try{await i.load({signal:t})}catch(r){return this._processPendingUpdateNewError(e,r)}e.abortController=null,this._processPendingUpdateNewRenderingInfo(e)}_processPendingUpdateNewError(e,i){e.abortController=null,C(i)?e.state=ze.NEW:e.state=ze.REJECTED}async _processPendingUpdateNewRenderingInfo(e){if(p(this.layer.renderer)||\"dictionary\"!==this.layer.renderer.type)return e.renderingInfo=this._getRenderingInfo(e.add,Te),void(e.state=ze.READY);e.state=ze.LOADING,e.abortController=new AbortController;let i=null;try{i=await this._getRenderingInfoAsync(e.add,{signal:e.abortController.signal})}catch(t){return e.abortController=null,void(C(t)?e.state=ze.NEW:e.state=ze.REJECTED)}p(i)||p(i.symbol)?(Te&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,Te.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),e.renderingInfo=null):e.renderingInfo=i,e.state=ze.READY}_addGraphic(e,i,t){if(this._graphicsWithoutSymbol.set(e.uid,e),p(i)||p(i.symbol)||!Z(e))return;h(this.stage.renderView.objectAndLayerIdRenderHelper)&&this.setUidToIdOnAdd&&this.stage.renderView.objectAndLayerIdRenderHelper.setUidToObjectAndLayerId(e.objectId,e.uid,this.layer.id,this.layer.uid,!!this.layer.popupEnabled);const r=i.symbol,s=this.getOrCreateGraphics3DSymbol(r,i.renderer);if(p(s))return;this._expandComputedExtent(e.geometry);const a=this._beginGraphicUpdate(e),n=new le(e,i,this.layer);let o=!1;const l=e=>{e===s.symbol.id&&(o=!0)};this._whenSymbolRemoved.push(l);const d=()=>{if(--this._loadingSymbols,this.destroyed)return;this._whenSymbolRemoved.removeUnordered(l);if(this._graphicsWaitingForSymbol.get(e.uid)!==a||o||s.destroyed||this.graphicSymbolSupported&&e.symbol&&e.symbol.id!==s.symbol.id)--s.referenced,this._cleanupSymbols();else{const i=this._createGraphics3DGraphic(s,n);this._spatialIndex&&h(i)&&this._spatialIndex.add(i),--s.referenced,this._endGraphicUpdate(e)}this._featureStore.events.emit(\"changed\"),this._labeler&&this.owner.view.labeler.setDirty()},c=i=>{--this._loadingSymbols,this.destroyed||(this._whenSymbolRemoved.removeUnordered(l),o||(C(i)?this.add([e]):s.destroyed||this._endGraphicUpdate(e)))};++this._loadingSymbols,t===we.ASYNC?s.load((()=>this._frameTask.schedule(d)),(e=>this._frameTask.schedule((()=>c(e))))):s.load(d,c)}_removeGraphic(e){const i=e.uid,t=this.graphics3DGraphics.get(i);if(t){t.graphics3DSymbol.onRemoveGraphic(t);const e=t.usedMemory,r=t.isElevationSource;this._conditionalRemove(t,i),this._spatialIndex?.remove(t);const s=t.graphics3DSymbol.symbol.id;this._graphicsBySymbol.get(s)?.delete(i),this._graphicsWithoutSymbol.delete(i),this._removeGraphics3DGraphic(i,e,r),t.destroy(),this._featureStore.events.emit(\"changed\")}else this._graphicsWithoutSymbol.delete(i),this._graphicsWaitingForSymbol.delete(i),0===this._graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"updating\"))}_hasLabelingContext(e){if(e instanceof Ue||e instanceof Ae){const i=this.symbolCreationContext.layer;return!!i.labelingInfo&&i.labelingInfo.some((i=>i.symbol===e))}return!1}_hasValidSymbolCreationContext(e){return!(e instanceof Ue&&!this._hasLabelingContext(e))||(Te.error(\"LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported.\"),!1)}_getRenderingInfo(e,i){const t=e.geometry;if(p(t))return i&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,i.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!T(t.spatialReference,this._viewSpatialReference))return i&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,i.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)),null;if(!this.graphicSymbolSupported&&h(e.symbol))return i&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,i.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?J(e,this.layer):e;let s;if(this.owner.getRenderingInfo&&(this.getRenderingInfoWithoutRenderer||h(this.currentRenderer)))s=this.owner.getRenderingInfo(r,this.currentRenderer,this._arcadeOnDemand);else{s={symbol:r.symbol||ee(r.geometry)}}return p(s)||p(s.symbol)?(i&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,i.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),null):s}_getRenderingInfoAsync(e,i){const t=e.geometry;if(p(t))return Te&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,Te.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!this.graphicSymbolSupported&&h(e.symbol))return Te&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,Te.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?J(e,this.layer):e;return this.owner.getRenderingInfoAsync(r,this.currentRenderer,this._arcadeOnDemand,i)}_createGraphics3DSymbol(e,i){if(!this._hasValidSymbolCreationContext(e))return null;const t=this._getConvertedSymbol(e);if(!t)return null;let r;if(h(i)&&\"backgroundFillSymbol\"in i&&i.backgroundFillSymbol){const e=ie(i.backgroundFillSymbol,{ignoreDrivers:!0});h(e.symbol)&&\"web-style\"!==e.symbol.type&&\"cim\"!==e.symbol.type&&(r=e.symbol.symbolLayers)}const s=de(t,this.symbolCreationContext,r);return s.load((()=>{const e=s.extentPadding;e>this.extentPadding&&this._set(\"extentPadding\",e),this.notifyChange(\"averageSymbolComplexity\")}),(()=>{})),s}getOrCreateGraphics3DSymbol(e,i){let t=this._symbols.get(e.id);return void 0===t&&(t=e instanceof Oe?new pe(e,(e=>this._frameTask.schedule(e)),(e=>this._createGraphics3DSymbol(e,i))):this._createGraphics3DSymbol(e,i),this._symbols.set(e.id,t)),h(t)&&++t.referenced,t}trackGraphicState(e){return p(this._graphicStateTracking)&&(this._graphicStateTracking=new ce(this)),this._graphicStateTracking.add(e)}_addGraphics3DGraphic(e){this._usedMemory+=e.usedMemory,this.graphics3DGraphics.set(e.graphic.uid,e),this._numberOfGraphics++,e.isElevationSource&&(this._numberOfGraphicsProvidingElevation++,this.updateStageLayerElevationProvider()),this._updateLayerVisibility()}_removeGraphics3DGraphic(e,i,t=!1){this._usedMemory-=i,this.graphics3DGraphics.delete(e),this._numberOfGraphics--,t&&(this._numberOfGraphicsProvidingElevation--,this.updateStageLayerElevationProvider()),this._updateLayerVisibility()}_createGraphics3DGraphic(e,i){const t=i.graphic;if(this._graphicsWithoutSymbol.delete(t.uid),!this._symbols.has(e.symbol.id))return this.add([t]),null;if(this.graphics3DGraphics.has(t.uid))return null;const r=e.createGraphics3DGraphic(i);if(p(r))return null;this._addGraphics3DGraphic(r);const s=e.symbol.id;this._graphicsBySymbol.has(s)||this._graphicsBySymbol.set(s,new Map),this._graphicsBySymbol.get(s).set(t.uid,r);if(r.isDraped&&this._graphicsDrapedUids.add(t.uid),r.centroid=null,h(t.geometry)&&\"point\"!==t.geometry.type&&(r.centroid=ye(t.geometry,this._viewSpatialReference)),this._updateUserVisibility(r),h(this._scaleVisibility)&&this._scaleVisibility.updateVisibility(r),h(this._filterVisibility)){const{defaultVisibility:e}=this._filterVisibility;r.setVisibilityFlag(re.FILTER,e,se.GRAPHIC),e||this._filterVisibility.reapply()}this._deconflictor?.addGraphic(r),this._labeler?.addGraphic(r),this._objectStates?.addGraphic(r),this._deconflictor&&this.owner.view.deconflictor.setInitialIconVisibilityFlag(this,r),r.initialize(this.stage,this.stageLayer,this.owner),h(this._graphicStateTracking)&&this._graphicStateTracking.addGraphic(r);const a=this._whenGraphics3DGraphicRequests[t.uid];return a&&(delete this._whenGraphics3DGraphicRequests[t.uid],a.resolve(r)),r}_abortRendererChange(){this._rendererChangeAbortController&&(this._rendererChangeAbortController.abort(),this._rendererChangeAbortController=null)}async rendererChange(e){if(this._abortRendererChange(),e!==this.currentRenderer)if(this._validateRenderer(e),p(e)&&this._currentRendererChange(null,!1),Q(e))if(h(e)&&e.arcadeRequired){const i=new AbortController;this._rendererChangeAbortController=i;const{arcadeUtils:t}=await this._ensureArcade();_(i);const r=t.hasGeometryOperations(e);r&&(await t.enableGeometryOperations(),_(i)),this.effectiveUpdatePolicy===we.ASYNC?await this._frameTask.schedule((()=>this._currentRendererChange(e,r)),i.signal):this._currentRendererChange(e,r),this._rendererChangeAbortController=null}else if(this.effectiveUpdatePolicy===we.ASYNC){const i=new AbortController;this._rendererChangeAbortController=i,await this._frameTask.schedule((()=>this._currentRendererChange(e,!1)),i.signal),this._rendererChangeAbortController=null}else this._currentRendererChange(e,!1);else this._currentRendererChange(e,!1)}async _ensureArcade(){return p(this._arcadeOnDemand)?(this._arcadeOnDemand=await X(),this._arcadeOnDemand):this._arcadeOnDemand}_currentRendererChange(e,i){this.currentRenderer=e,this.rendererHasGeometryOperations=i,this.symbolCreationContext.arcade=u(this._arcadeOnDemand);const t=this.symbolCreationContext.renderer;if(e===t)return;if(this._symbolConversionCache.clear(),p(e))return this.symbolCreationContext.renderer=null,void this.recreateAllGraphicsAndSymbols();const r=I(t,e);this._updateUnchangedSymbolMappings(r,e,t),this.symbolCreationContext.renderer=e,p(r)||(\"complete\"===r.type?this.recreateAllGraphicsAndSymbols():\"partial\"===r.type&&(this._applyRendererDiff(r,e,t)?this._volatileGraphicsUpdated():this.recreateAllGraphicsAndSymbols()),this.notifyChange(\"averageSymbolComplexity\"))}_diffHasSymbolChange(e){for(const i in e.diff)switch(i){case\"visualVariables\":case\"defaultSymbol\":case\"uniqueValueInfos\":break;case\"uniqueValueGroups\":case\"authoringInfo\":case\"fieldDelimiter\":delete e.diff[i];break;default:return!0}return!1}_applySymbolSetDiff(e,i,t){e=e||[],i=i||[];const r=[];for(const s of i){const i=this._graphicsBySymbol.get(s.id);i&&i.forEach(((a,n)=>{const o=a.graphic,l=this.layer instanceof q?this.layer:null,h=u(this._arcadeOnDemand);if(s===t.defaultSymbol&&t.getSymbol(J(o,l),{arcade:h})===t.defaultSymbol)return;const d=a.usedMemory;e.length||t.defaultSymbol?r.push(o):this._graphicsWithoutSymbol.set(n,o);const p=this.graphics3DGraphics.get(n);this._conditionalRemove(p,n),a.destroy(),i.delete(n),this._removeGraphics3DGraphic(n,d),this._updateLayerVisibility()})),this._whenSymbolRemoved.forAll((e=>e(s.id)))}(e.length||r.length)&&(this._graphicsWithoutSymbol.forEach((e=>r.push(e))),this._graphicsWithoutSymbol.clear(),this.add(r)),this._cleanupSymbols(),this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_applyUniqueValueRendererDiff(e,i,t){const r=e.diff.defaultSymbol,s=e.diff.uniqueValueInfos;if(r||s){const a=s?s.added.map((e=>e.symbol)).filter(h):[],n=s?s.removed.map((e=>e.symbol)).filter(h):[];if(s)for(let e=0;e<s.changed.length;e++)a.push(s.changed[e].newValue.symbol),n.push(s.changed[e].oldValue.symbol);return r?(t.defaultSymbol&&n.push(t.defaultSymbol),i.defaultSymbol&&a.push(i.defaultSymbol)):t.defaultSymbol&&a.length&&n.push(i.defaultSymbol),this._applySymbolSetDiff(a,n,i),delete e.diff.defaultSymbol,delete e.diff.uniqueValueInfos,!0}return!1}_calculateUnchangedSymbolMapping(e,i,t){if(\"unique-value\"!==i?.type||\"unique-value\"!==t?.type||h(e)&&\"partial\"!==e.type)return[];const r=e=>h(e)?e.id:null,s=e&&e.diff,a=s&&s.defaultSymbol,n=s&&s.uniqueValueInfos;let o;if(n)o=n.unchanged.map((e=>({oldId:r(e.oldValue.symbol),newId:r(e.newValue.symbol)})));else{o=[];for(const e of t.uniqueValueInfos??[]){const t=r(e.symbol),s=i.uniqueValueInfos?.find((i=>i.value===e.value));s&&t!==r(s.symbol)&&o.push({oldId:t,newId:r(s.symbol)})}}return!a&&t.defaultSymbol&&o.push({oldId:r(t.defaultSymbol),newId:r(i.defaultSymbol)}),o}_updateSymbolMapping(e,i){const t=h(i)&&i?\"string\"==typeof i?i:i.id:null;if(p(e)||e===t)return;const r=this._graphicsBySymbol.get(e);this._graphicsBySymbol.delete(e),void 0!==r&&this._graphicsBySymbol.set(t,r);const s=this._symbols.get(e);if(void 0!==s&&(this._symbols.delete(e),this._symbols.set(t,s),h(s))){const e=\"string\"==typeof i?null:i;h(e)?s.symbol=e:s.symbol.id=t}}_updateUnchangedSymbolMappings(e,i,t){const r=this._calculateUnchangedSymbolMapping(e,i,t);for(const{oldId:s,newId:a}of r)this._updateSymbolMapping(s,a)}_applyRendererDiff(e,t,r){if(this._diffHasSymbolChange(e))return!1;if(t instanceof i&&r instanceof i&&this._applyUniqueValueRendererDiff(e,t,r)&&0===Object.keys(e.diff).length)return!0;for(const[i]of this._graphicsBySymbol){const r=this._symbols.get(i);if(h(r))switch(r.applyRendererDiff(e,t)){case me.Recreate_Symbol:this._recreateSymbol(i);break;case me.Recreate_Graphics:this._recreateGraphicsForSymbol(i);case me.Fast_Update:}}return!0}opacityChange(){this.forEachGraphics3DSymbol(((e,i)=>e.globalPropertyChanged(\"opacity\",i))),this._updateStageLayerVisibility()}_slicePlaneEnabledChange(e){e!==this.symbolCreationContext.slicePlaneEnabled&&(this.symbolCreationContext.slicePlaneEnabled=e,this.stageLayer.sliceable=e,this.forEachGraphics3DSymbol(((e,i)=>e.globalPropertyChanged(\"slicePlaneEnabled\",i))),this._deconflictor&&this._deconflictor.slicePlaneEnabledChange(),this._labeler&&this._labeler.slicePlaneEnabledChange())}_physicalBasedRenderingChange(e){this.symbolCreationContext.physicalBasedRenderingEnabled=e,this.forEachGraphics3DSymbol(((e,i,t)=>{e.globalPropertyChanged(\"physicalBasedRenderingEnabled\",i)||this._recreateSymbol(t)}))}_skipHighSymbolLoDsChange(e){this.symbolCreationContext.skipHighSymbolLods=e,this.forEachGraphics3DSymbol(((e,i,t)=>{e.globalPropertyChanged(\"skipHighSymbolLods\",i)||this._recreateSymbol(t)}))}_pixelRatioChange(){this.forEachGraphics3DSymbol(((e,i,t)=>{e.globalPropertyChanged(\"pixelRatio\",i)||this._recreateSymbol(t)}))}_signalUpdatingDuringAsyncLoadedGraphicsChange(){this._updatingPendingLoadedGraphicsChange&&this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=R((()=>{this._updatingPendingLoadedGraphicsChange=null}))}setClippingExtent(e,i){const t=this.symbolCreationContext.clippingExtent,r=B();return ve(e,r,i)?this.symbolCreationContext.clippingExtent=M(z(),r):this.symbolCreationContext.clippingExtent=null,!N(this.symbolCreationContext.clippingExtent,t)}modifyGraphics3DGraphicVisibilities(e){let i=!1;this.graphics3DGraphics.forEach((t=>{e(t)&&(i=!0)})),i&&(this.owner.view.labeler?.setDirty(),this.owner.view.deconflictor.setDirty())}forEachGraphics3DSymbol(e){for(const[i,t]of this._symbols){if(p(t))return;e(t,this._graphicsBySymbol.get(i)||He,i)}}updateAllGraphicsVisibility(){h(this._filterVisibility)&&this._filterVisibility.reapply(),this.modifyGraphics3DGraphicVisibilities((e=>{const i=this._updateUserVisibility(e),t=h(this._scaleVisibility)&&this._scaleVisibility.updateVisibility(e);return i||t}))}_hideAllGraphics(){this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(re.USER_SETTING,!1,se.GRAPHIC)))}_validateRenderer(e){const i=K(e,{geometryType:this.layer?.geometryType});if(i){const e=`Renderer for layer '${this.layer.title?`${this.layer.title}, `:\"\"}, id:${this.layer.id}' is not supported in a SceneView`;Te.warn(e,i.message)}}_volatileGraphicsUpdated(){this._labeler?.reset(),this.stageLayer.shaderTransformationChanged(),this.notifyChange(\"updating\")}_cleanupSymbols(){if(this._graphicsWaitingForSymbol.size>0||this._suspendSymbolCleanup)return;let e=!1;this._symbols.forEach(((i,t)=>{if(p(i)||i.referenced>0)return;const r=this._graphicsBySymbol.get(t);r&&0!==r.size||(this._graphicsBySymbol.delete(t),this._symbols.delete(t),c(i),e=!0)})),e&&(this._recomputeExtentPadding(),this.notifyChange(\"averageSymbolComplexity\"))}get test(){return{snapshotInternals:()=>({graphics:[...this.graphics3DGraphics.keys()].sort(),symbols:[...this._symbols.keys()].sort(),graphicsBySymbol:[...this._graphicsBySymbol.keys()].sort().map((e=>({symbolId:e,graphics:[...this._graphicsBySymbol.get(e).keys()].sort()}))),graphicsWithoutSymbol:[...this._graphicsWithoutSymbol.keys()].sort(),graphicsDrapedUids:[...this._graphicsDrapedUids].sort(),pendingUpdates:this._pendingUpdates}),symbols:this._symbols,filterVisibility:this._filterVisibility,numPending:this._pendingUpdates.size,forceUpdatePolicy:e=>{this._forcedUpdatePolicy=e}}}get performanceInfo(){return{visible:this.graphics3DGraphics.size,missing:this._graphicsWithoutSymbol.size,pending:this._pendingUpdates.size}}};var ze;ke.tmpVec=j(),e([D({readOnly:!0})],ke.prototype,\"computedExtent\",void 0),e([D()],ke.prototype,\"currentRenderer\",void 0),e([D()],ke.prototype,\"rendererHasGeometryOperations\",void 0),e([D()],ke.prototype,\"_frameTask\",void 0),e([D({readOnly:!0})],ke.prototype,\"_viewSpatialReference\",null),e([D()],ke.prototype,\"_rendererChangeAbortController\",void 0),e([D()],ke.prototype,\"_elevationInfoChangeAbortController\",void 0),e([D()],ke.prototype,\"_initializeAbortController\",void 0),e([D()],ke.prototype,\"_elevationAlignment\",void 0),e([D()],ke.prototype,\"_scaleVisibility\",void 0),e([D()],ke.prototype,\"_filterVisibility\",void 0),e([D()],ke.prototype,\"_initializePromise\",void 0),e([D()],ke.prototype,\"_spatialIndex\",void 0),e([D({readOnly:!0})],ke.prototype,\"extentPadding\",void 0),e([D()],ke.prototype,\"_updatingPendingLoadedGraphicsChange\",void 0),e([D()],ke.prototype,\"_featureStore\",void 0),e([D()],ke.prototype,\"_deconflictor\",void 0),e([D()],ke.prototype,\"_labeler\",void 0),e([D()],ke.prototype,\"_objectStates\",void 0),e([D()],ke.prototype,\"_loadingSymbols\",void 0),e([D()],ke.prototype,\"preferredUpdatePolicy\",void 0),e([D()],ke.prototype,\"_forcedUpdatePolicy\",void 0),e([D({readOnly:!0})],ke.prototype,\"effectiveUpdatePolicy\",null),e([D({constructOnly:!0})],ke.prototype,\"elevationFeatureExpressionEnabled\",void 0),e([D({constructOnly:!0})],ke.prototype,\"owner\",void 0),e([D({constructOnly:!0})],ke.prototype,\"layer\",void 0),e([D({constructOnly:!0})],ke.prototype,\"graphicSymbolSupported\",void 0),e([D({constructOnly:!0})],ke.prototype,\"getRenderingInfoWithoutRenderer\",void 0),e([D({constructOnly:!0})],ke.prototype,\"componentFactories\",void 0),e([D({constructOnly:!0})],ke.prototype,\"setUidToIdOnAdd\",void 0),e([D()],ke.prototype,\"featureStore\",null),e([D()],ke.prototype,\"initializePromise\",null),e([D()],ke.prototype,\"scaleVisibility\",null),e([D()],ke.prototype,\"elevationAlignment\",null),e([D()],ke.prototype,\"objectStates\",null),e([D()],ke.prototype,\"filterVisibility\",null),e([D({readOnly:!0})],ke.prototype,\"updating\",null),e([D({readOnly:!0})],ke.prototype,\"running\",null),e([D({readOnly:!0})],ke.prototype,\"suspendedOrOutsideOfView\",null),e([D({readOnly:!0,dependsOn:[]})],ke.prototype,\"updatingRemaining\",null),e([D({readOnly:!0,dependsOn:[\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfPrimitives\",\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfFeatures\",\"averageSymbolComplexity\"]})],ke.prototype,\"displayFeatureLimit\",null),e([D({readOnly:!0,dependsOn:[]})],ke.prototype,\"averageSymbolComplexity\",null),e([D({constructOnly:!0})],ke.prototype,\"hasZ\",void 0),e([D({constructOnly:!0})],ke.prototype,\"hasM\",void 0),e([D()],ke.prototype,\"_objectIdField\",null),ke=Le=e([E(Fe)],ke),function(e){e[e.NEW=0]=\"NEW\",e[e.LOADING=1]=\"LOADING\",e[e.READY=2]=\"READY\",e[e.REJECTED=3]=\"REJECTED\"}(ze||(ze={}));class We{constructor(){this.add=null,this.renderingInfo=null,this.state=ze.NEW,this.abortController=null,this.remove=null}clear(){this.add=null,this.renderingInfo=null,this.state=ze.NEW,this.abortController=null,this.remove=null}}const Me=10,Ne=j(),Be=j(),He=new Map;export{ke as Graphics3DCore};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAC,QAAK,iCAAiC;AAAC,OAAM,yBAAyB;AAAC,OAAM,8CAA8C;AAAC,OAAM,6CAA6C;AAAC,OAAM,6CAA6C;AAAC,OAAM,0CAA0C;AAAC,OAAM,2CAA2C;AAAC,OAAM,mCAAmC;AAAC,OAAM,yCAAyC;AAAC,OAAOC,CAAC,MAAK,8CAA8C;AAAC,OAAM,4CAA4C;AAAC,OAAM,wBAAwB;AAAC,OAAOC,CAAC,MAAK,8BAA8B;AAAC,OAAM,yBAAyB;AAAC,OAAOC,CAAC,MAAK,2BAA2B;AAAC,OAAOC,CAAC,MAAK,6BAA6B;AAAC,SAAOC,UAAU,IAAIC,CAAC,QAAK,iCAAiC;AAAC,OAAOC,CAAC,MAAK,4BAA4B;AAAC,SAAOC,OAAO,IAAIC,CAAC,EAACC,SAAS,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,MAAM,IAAIC,CAAC,EAACC,QAAQ,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,EAACC,GAAG,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,QAAK,2BAA2B;AAAC,OAAOC,CAAC,MAAK,iCAAiC;AAAC,SAAOC,cAAc,IAAI9B,CAAC,EAAC+B,UAAU,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,QAAK,kCAAkC;AAAC,SAAOC,KAAK,IAAIC,CAAC,EAACC,IAAI,IAAIC,CAAC,EAACC,EAAE,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,EAACC,QAAQ,IAAIC,CAAC,QAAK,mCAAmC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,gCAAgC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,yDAAyD;AAAC,OAAM,gDAAgD;AAAC,OAAM,gCAAgC;AAAC,SAAOC,QAAQ,IAAIC,CAAC,QAAK,yDAAyD;AAAC,SAAOC,IAAI,IAAIC,CAAC,EAACC,OAAO,IAAIC,CAAC,QAAK,+CAA+C;AAAC,SAAOnD,CAAC,IAAIoD,CAAC,EAAClD,CAAC,IAAImD,CAAC,EAAChC,CAAC,IAAIiC,CAAC,QAAK,4BAA4B;AAAC,SAAOvC,CAAC,IAAIwC,CAAC,QAAK,+BAA+B;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,EAACC,kBAAkB,IAAIC,CAAC,EAACC,uBAAuB,IAAIC,CAAC,EAACC,aAAa,IAAIC,CAAC,QAAK,oCAAoC;AAAC,SAAOC,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,EAACC,QAAQ,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,QAAK,+CAA+C;AAAC,SAAOP,MAAM,IAAIQ,CAAC,QAAK,gDAAgD;AAAC,SAAOF,MAAM,IAAIG,CAAC,QAAK,uDAAuD;AAAC,OAAOC,CAAC,MAAK,6BAA6B;AAAC,SAAOC,WAAW,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,EAACC,WAAW,IAAIC,CAAC,QAAK,mDAAmD;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,iDAAiD;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,QAAK,qDAAqD;AAAC,SAAOC,UAAU,IAAIC,CAAC,QAAK,uCAAuC;AAAC,SAAOC,kBAAkB,IAAIC,EAAE,QAAK,2CAA2C;AAAC,SAAOC,IAAI,IAAIC,EAAE,QAAK,iDAAiD;AAAC,SAAOC,qBAAqB,IAAIC,EAAE,QAAK,qBAAqB;AAAC,SAAOC,cAAc,IAAIC,EAAE,EAACC,eAAe,IAAIC,EAAE,QAAK,YAAY;AAAC,SAAOC,qBAAqB,IAAIC,EAAE,EAACC,aAAa,IAAIC,EAAE,QAAK,iCAAiC;AAAC,SAAOC,sBAAsB,IAAIC,EAAE,QAAK,6BAA6B;AAAC,OAAOC,EAAE,MAAK,uCAAuC;AAAC,SAAOC,+BAA+B,IAAIC,EAAE,QAAK,sCAAsC;AAAC,SAAOC,IAAI,IAAIC,EAAE,QAAK,8BAA8B;AAAC,OAAOC,EAAE,MAAK,+BAA+B;AAAC,SAAOC,oBAAoB,IAAIC,EAAE,QAAK,2BAA2B;AAAC,SAAOC,eAAe,IAAIC,EAAE,QAAK,mBAAmB;AAAC,SAAOC,uBAAuB,IAAIC,EAAE,QAAK,iBAAiB;AAAC,SAAOC,UAAU,IAAIC,EAAE,QAAK,eAAe;AAAC,SAAOC,cAAc,IAAIC,EAAE,QAAK,qBAAqB;AAAC,SAAOC,yBAAyB,IAAIC,EAAE,EAACC,uBAAuB,IAAIC,EAAE,QAAK,uBAAuB;AAAC,SAAOC,2BAA2B,IAAIC,EAAE,QAAK,2CAA2C;AAAC,SAAOC,cAAc,IAAIC,EAAE,QAAK,8BAA8B;AAAC,SAAOC,cAAc,IAAIC,EAAE,QAAK,iCAAiC;AAAC,SAAOC,sBAAsB,IAAIC,EAAE,QAAK,kDAAkD;AAAC,SAAOC,YAAY,IAAIC,EAAE,QAAK,wCAAwC;AAAC,SAAOC,UAAU,IAAIC,EAAE,QAAK,sCAAsC;AAAC,SAAOC,aAAa,IAAIC,EAAE,EAACC,QAAQ,IAAIC,EAAE,EAACC,YAAY,IAAIC,EAAE,EAACC,IAAI,IAAIC,EAAE,QAAK,+BAA+B;AAAC,OAAOC,EAAE,MAAK,gCAAgC;AAAC,OAAOC,EAAE,MAAK,+BAA+B;AAAC,OAAOC,EAAE,MAAK,sCAAsC;AAAC,OAAOC,EAAE,MAAK,mCAAmC;AAAC,OAAOC,EAAE,MAAK,uCAAuC;AAAC,IAAIC,EAAE;AAAC,MAAMC,EAAE,GAAChG,CAAC,EAAE;EAACiG,EAAE,GAACvF,CAAC,EAAE;EAACwF,EAAE,GAAC,8CAA8C;EAACC,EAAE,GAACvJ,CAAC,CAACwJ,SAAS,CAACF,EAAE,CAAC;AAAC,IAAIG,EAAE,GAACN,EAAE,GAAC,cAAcxJ,CAAC;EAAC,IAAI+J,qBAAqBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,gBAAgB;EAAA;EAAC,IAAIC,YAAYA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,aAAa,KAAG,IAAI,CAACA,aAAa,GAAC,IAAI1C,EAAE,CAAC;MAAC2C,aAAa,EAAC,IAAI,CAACL,KAAK,CAACM,KAAK,EAAED,aAAa;MAACH,gBAAgB,EAAC,IAAI,CAACH,qBAAqB;MAACQ,IAAI,EAAC,CAAC,CAAC,IAAI,CAACA,IAAI;MAACC,IAAI,EAAC,CAAC,CAAC,IAAI,CAACA;IAAI,CAAC,CAAC,EAAC,IAAI,CAACJ,aAAa,CAACK,KAAK,CAACC,KAAK,CAACC,IAAI,CAAC,IAAI,CAACC,kBAAkB,CAACC,MAAM,EAAE,CAAC,CAAC,CAAC,EAAC,IAAI,CAACT,aAAa,CAACU,MAAM,EAAE,EAAC,IAAI,CAACV,aAAa;EAAA;EAAC,IAAIW,gBAAgBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,iBAAiB;EAAA;EAAC,IAAIC,qBAAqBA,CAAA,EAAE;IAAC,OAAOtK,CAAC,CAAC,IAAI,CAACuK,eAAe,CAAC,IAAE,YAAY,KAAG,IAAI,CAACA,eAAe,CAACC,IAAI,GAAC3C,EAAE,CAAC4C,KAAK,GAACvK,CAAC,CAAC,IAAI,CAACwK,mBAAmB,EAAC,IAAI,CAACC,qBAAqB,CAAC;EAAA;EAAC,IAAIC,YAAYA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,aAAa;EAAA;EAAC,IAAIC,iBAAiBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,kBAAkB;EAAA;EAAC,IAAIC,eAAeA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,gBAAgB;EAAA;EAAC,IAAIC,kBAAkBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,mBAAmB;EAAA;EAAC,IAAIC,YAAYA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,aAAa;EAAA;EAAC,IAAIC,gBAAgBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,iBAAiB;EAAA;EAAC,IAAIC,QAAQA,CAAA,EAAE;IAAC,OAAM,CAAC,EAAE,IAAI,CAACC,yBAAyB,CAACC,IAAI,GAAC,CAAC,IAAE,IAAI,CAACC,OAAO,IAAE,IAAI,CAACR,mBAAmB,EAAEK,QAAQ,IAAExL,CAAC,CAAC,IAAI,CAACiL,gBAAgB,CAAC,IAAE,IAAI,CAACA,gBAAgB,CAACO,QAAQ,IAAExL,CAAC,CAAC,IAAI,CAACuL,iBAAiB,CAAC,IAAE,IAAI,CAACA,iBAAiB,CAACC,QAAQ,IAAE,IAAI,CAACI,8BAA8B,IAAE,IAAI,CAACC,mCAAmC,IAAE,IAAI,CAACC,oCAAoC,IAAE,IAAI,CAACC,UAAU,CAACP,QAAQ,IAAE,IAAI,CAACQ,eAAe,GAAC,CAAC,CAAC;EAAA;EAAC,IAAIL,OAAOA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACM,eAAe,CAACP,IAAI,GAAC,CAAC,IAAE,CAAC,CAAC,IAAI,CAACjC,aAAa,EAAE+B,QAAQ;EAAA;EAAC,IAAIU,wBAAwBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAC7C,KAAK,CAAC8C,SAAS,IAAE,CAAC,CAAC,IAAI,CAAC9C,KAAK,CAAC+C,WAAW,EAAEC,aAAa;EAAA;EAAC,IAAIC,iBAAiBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACd,QAAQ,GAAC,IAAI,CAACS,eAAe,CAACP,IAAI,GAAC,EAAE,IAAE,IAAI,CAACjC,aAAa,EAAE6C,iBAAiB,IAAE,CAAC,CAAC,GAAC,EAAE,IAAE,IAAI,CAACnB,mBAAmB,EAAEmB,iBAAiB,IAAE,CAAC,CAAC,GAAC,CAAC;EAAA;EAAC,IAAIC,mBAAmBA,CAAA,EAAE;IAAC,MAAMpN,CAAC,GAAC,IAAI,CAACkK,KAAK,IAAE,IAAI,CAACA,KAAK,CAACC,IAAI,IAAE,IAAI,CAACD,KAAK,CAACC,IAAI,CAACkD,eAAe;MAACpN,CAAC,GAACD,CAAC,GAACA,CAAC,CAACsN,UAAU,CAACC,wBAAwB,GAAC,CAAC;MAACrN,CAAC,GAACF,CAAC,GAACA,CAAC,CAACsN,UAAU,CAACE,wBAAwB,GAAC,CAAC;MAACrN,CAAC,GAACH,CAAC,GAACA,CAAC,CAACsN,UAAU,CAACG,0BAA0B,GAAC,CAAC;MAACrN,CAAC,GAAC,IAAI,CAACsN,uBAAuB;MAACpN,CAAC,GAACqN,IAAI,CAACC,GAAG,CAAC,CAAC,EAAC/M,CAAC,CAACT,CAAC,CAAC,GAACA,CAAC,CAACyN,oBAAoB,GAAC,CAAC,CAAC;MAACtN,CAAC,GAACM,CAAC,CAACT,CAAC,CAAC,IAAEA,CAAC,CAAC0N,mBAAmB,GAAC,CAAC,GAAC5N,CAAC,GAACE,CAAC,CAAC0N,mBAAmB,GAAC,EAAE,GAAC5N,CAAC;MAACO,CAAC,GAACkN,IAAI,CAACI,IAAI,CAAC5N,CAAC,GAACG,CAAC,CAAC;MAACK,CAAC,GAACgN,IAAI,CAACC,GAAG,CAAC3N,CAAC,EAAC0N,IAAI,CAACK,GAAG,CAAC9N,CAAC,EAACO,CAAC,EAACF,CAAC,CAAC,CAAC;MAACQ,CAAC,GAAC,IAAI,CAACkN,IAAI,CAAC,qBAAqB,CAAC;IAAC,OAAOlN,CAAC,IAAEA,CAAC,CAACmN,4BAA4B,KAAGjO,CAAC,IAAEc,CAAC,CAACoN,4BAA4B,KAAGjO,CAAC,IAAEa,CAAC,CAACqN,8BAA8B,KAAGjO,CAAC,IAAEY,CAAC,CAAC2M,uBAAuB,KAAGtN,CAAC,IAAEW,CAAC,CAACsN,uBAAuB,KAAG1N,CAAC,GAACI,CAAC,GAAC;MAACmN,4BAA4B,EAACjO,CAAC;MAACkO,4BAA4B,EAACjO,CAAC;MAACkO,8BAA8B,EAACjO,CAAC;MAACuN,uBAAuB,EAACtN,CAAC;MAACiO,uBAAuB,EAAC1N;IAAC,CAAC;EAAA;EAAC,IAAI+M,uBAAuBA,CAAA,EAAE;IAAC,MAAM1N,CAAC,GAAC8H,EAAE,CAAC,IAAI,CAACwG,mBAAmB,CAAC;MAACrO,CAAC,GAAC,IAAI,CAACgO,IAAI,CAAC,yBAAyB,CAAC;IAAC,OAAO,CAAC,KAAGjO,CAAC,CAACuO,eAAe,IAAE1N,CAAC,CAACZ,CAAC,CAAC,KAAGD,CAAC,CAACwO,SAAS,KAAGvO,CAAC,CAAC4N,oBAAoB,IAAE7N,CAAC,CAAC6N,oBAAoB,IAAE5N,CAAC,CAACwO,uBAAuB,IAAEzO,CAAC,CAACyO,uBAAuB,IAAExO,CAAC,CAAC6N,mBAAmB,IAAE9N,CAAC,CAAC8N,mBAAmB,CAAC,IAAE7N,CAAC,CAAC4N,oBAAoB,KAAG7N,CAAC,CAAC6N,oBAAoB,IAAE5N,CAAC,CAACwO,uBAAuB,KAAGzO,CAAC,CAACyO,uBAAuB,IAAExO,CAAC,CAAC6N,mBAAmB,KAAG9N,CAAC,CAAC8N,mBAAmB,CAAC,GAAC7N,CAAC,GAACD,CAAC;EAAA;EAAC,IAAI0O,UAAUA,CAAA,EAAE;IAAC,MAAM1O,CAAC,GAACa,CAAC,CAAC,IAAI,CAAC6M,uBAAuB,CAAC,IAAE,IAAI,CAACiB,aAAa,GAAC,IAAI,CAACjB,uBAAuB,CAACkB,MAAM,CAACC,oBAAoB,GAAC,IAAI,CAAC3D,iBAAiB,GAAC,CAAC;MAACjL,CAAC,GAAC,IAAI,CAAC6O,0BAA0B,EAAE,CAACC,MAAM,CAAE,CAAC/O,CAAC,EAACC,CAAC,KAAGD,CAAC,GAACC,CAAC,CAAC2O,MAAM,CAACI,aAAa,EAAE,CAAC,CAAC;IAAC,OAAO,IAAI,CAACC,WAAW,GAACjP,CAAC,GAACC,CAAC;EAAA;EAAC,IAAIiP,oBAAoBA,CAAA,EAAE;IAAC,IAAG,IAAI,CAACD,WAAW,IAAE,IAAI,CAAC/D,iBAAiB,EAAC;MAAC,MAAMlL,CAAC,GAAC,IAAI,CAACkL,iBAAiB,IAAE,IAAI,CAACA,iBAAiB,GAACyC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACuB,YAAY,EAAC,IAAI,CAACC,eAAe,CAAC,CAAC;MAAC,OAAO,IAAI,CAACH,WAAW,GAAC,IAAI,CAAC/D,iBAAiB,GAAClL,CAAC;IAAA;IAAC,IAAGa,CAAC,CAAC,IAAI,CAAC6M,uBAAuB,CAAC,EAAC;MAAC,MAAM1N,CAAC,GAAC,IAAI,CAAC2O,aAAa,GAAC,IAAI,CAACjB,uBAAuB,CAACkB,MAAM,CAACC,oBAAoB,GAAC,CAAC;MAAC,OAAO,IAAI,CAACnB,uBAAuB,CAACkB,MAAM,CAACS,eAAe,GAACrP,CAAC;IAAA;IAAC,OAAO,CAAC;EAAA;EAAC,IAAIsP,yBAAyBA,CAAA,EAAE;IAAC,OAAM,CAAC,IAAI,CAACH,YAAY,GAAC,IAAI,CAACC,eAAe,IAAE,IAAI,CAACF,oBAAoB;EAAA;EAAC,IAAIZ,mBAAmBA,CAAA,EAAE;IAAC,OAAO,IAAI,CAAClD,eAAe,GAAC,IAAI,CAACmE,oCAAoC,CAAC,IAAI,CAACnE,eAAe,CAAC,GAAC,IAAI,CAAC0D,0BAA0B,EAAE;EAAA;EAAC,IAAIU,OAAOA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACC,QAAQ;EAAA;EAACC,mBAAmBA,CAAC1P,CAAC,EAAC;IAAC,IAAG,WAAW,KAAGA,CAAC,CAACqL,IAAI,EAAC,OAAOrL,CAAC,CAAC2P,KAAK,EAAE;IAAC,MAAM1P,CAAC,GAAC,IAAI,CAAC2P,sBAAsB,CAACtO,GAAG,CAACtB,CAAC,CAAC6P,EAAE,CAAC;IAAC,IAAGhP,CAAC,CAACZ,CAAC,CAAC,EAAC,OAAOA,CAAC;IAAC,MAAMC,CAAC,GAAC8F,EAAE,CAAChG,CAAC,EAAC;QAAC8P,YAAY,EAAC,IAAI,CAACtF,KAAK,EAAEsF,YAAY,IAAE,KAAK,CAAC;QAACC,QAAQ,EAAC,CAAC,CAAC;QAACC,kBAAkB,EAAC,IAAI,CAACC,mBAAmB,CAACjQ,CAAC;MAAC,CAAC,CAAC;MAACG,CAAC,GAACD,CAAC,CAACgQ,MAAM,IAAE,IAAI;IAAC,OAAOjP,CAAC,CAACd,CAAC,CAAC,IAAED,CAAC,CAACiQ,KAAK,IAAErG,EAAE,CAACqG,KAAK,CAACjQ,CAAC,CAACiQ,KAAK,CAACC,OAAO,CAAC,EAAC,IAAI,CAACR,sBAAsB,CAACS,GAAG,CAACrQ,CAAC,CAAC6P,EAAE,EAAC1P,CAAC,CAAC,EAACA,CAAC;EAAA;EAACoP,oCAAoCA,CAACvP,CAAC,EAAC;IAAC,IAAGiB,CAAC,CAACjB,CAAC,CAAC,EAAC,OAAM,EAAE;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACsQ,UAAU,EAAE;MAACpQ,CAAC,GAAC,sBAAsB,IAAGF,CAAC,GAACA,CAAC,CAACuQ,oBAAoB,GAAC,IAAI;IAAC,IAAG,EAAErQ,CAAC,IAAED,CAAC,IAAEA,CAAC,CAACuQ,MAAM,CAAC,EAAC,OAAM,EAAE;IAAC,MAAMrQ,CAAC,GAAC,EAAE;MAACC,CAAC,GAAC,IAAI,CAACqQ,kCAAkC,CAACvQ,CAAC,CAAC;IAACW,CAAC,CAACT,CAAC,CAAC,IAAED,CAAC,CAACuQ,IAAI,CAACtQ,CAAC,CAAC;IAAC,KAAI,MAAME,CAAC,IAAIL,CAAC,EAAC;MAAC,MAAMD,CAAC,GAAC,IAAI,CAACyQ,kCAAkC,CAACnQ,CAAC,CAAC;MAACO,CAAC,CAACb,CAAC,CAAC,IAAEG,CAAC,CAACuQ,IAAI,CAAC1Q,CAAC,CAAC;IAAA;IAAC,OAAOG,CAAC;EAAA;EAACsQ,kCAAkCA,CAACzQ,CAAC,EAAC;IAAC,IAAGiB,CAAC,CAACjB,CAAC,CAAC,EAAC,OAAO,IAAI;IAAC,MAAMC,CAAC,GAAC,IAAI,CAAC0Q,QAAQ,CAACrP,GAAG,CAACtB,CAAC,CAAC6P,EAAE,CAAC;IAAC,IAAGhP,CAAC,CAACZ,CAAC,CAAC,EAAC,OAAOA,CAAC,CAAC2Q,UAAU;IAAC,MAAM1Q,CAAC,GAAC,IAAI,CAACwP,mBAAmB,CAAC1P,CAAC,CAAC;IAAC,OAAOa,CAAC,CAACX,CAAC,CAAC,GAAC8H,EAAE,CAAC9H,CAAC,CAAC,GAAC,IAAI;EAAA;EAAC4O,0BAA0BA,CAAA,EAAE;IAAC,MAAM9O,CAAC,GAAC,EAAE;IAAC,OAAO,IAAI,CAAC2Q,QAAQ,CAACE,OAAO,CAAE5Q,CAAC,IAAE;MAACY,CAAC,CAACZ,CAAC,CAAC,IAAED,CAAC,CAAC0Q,IAAI,CAACzQ,CAAC,CAAC2Q,UAAU,CAAC;IAAA,CAAC,CAAE,EAAC5Q,CAAC;EAAA;EAAC,IAAI8Q,cAAcA,CAAA,EAAE;IAAC,OAAO,IAAI,CAACtG,KAAK,CAACD,aAAa;EAAA;EAACwG,WAAWA,CAAC/Q,CAAC,EAAC;IAAC,KAAK,CAACA,CAAC,CAAC,EAAC,IAAI,CAACgR,eAAe,GAAC,IAAI1I,EAAE,CAAC;MAAC2I,cAAc,EAAC5H;IAAE,CAAC,EAAC,IAAI,CAAC,EAAC,IAAI,CAAC4H,cAAc,GAAC,IAAI,EAAC,IAAI,CAAC7F,eAAe,GAAC,IAAI,EAAC,IAAI,CAAC8F,6BAA6B,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,qBAAqB,GAAC,IAAI,EAAC,IAAI,CAACrG,kBAAkB,GAAC,IAAIsG,GAAG,IAAC,IAAI,CAACC,UAAU,GAAC,IAAI,EAAC,IAAI,CAACC,KAAK,GAAC,IAAI,EAAC,IAAI,CAACC,mBAAmB,GAAC,IAAIC,GAAG,IAAC,IAAI,CAACC,iBAAiB,GAAC,IAAIL,GAAG,IAAC,IAAI,CAACxB,sBAAsB,GAAC,IAAIwB,GAAG,IAAC,IAAI,CAACT,QAAQ,GAAC,IAAIS,GAAG,IAAC,IAAI,CAACM,sBAAsB,GAAC,IAAIN,GAAG,IAAC,IAAI,CAAC9E,yBAAyB,GAAC,IAAI8E,GAAG,IAAC,IAAI,CAACO,iBAAiB,GAAC,CAAC,EAAC,IAAI,CAACC,QAAQ,GAAC,IAAIxR,CAAC,IAAC,IAAI,CAACwM,UAAU,GAAC9D,EAAE,EAAC,IAAI,CAAC+I,qBAAqB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,eAAe,GAAC,IAAI,EAAC,IAAI,CAACrF,8BAA8B,GAAC,IAAI,EAAC,IAAI,CAACC,mCAAmC,GAAC,IAAI,EAAC,IAAI,CAACqF,0BAA0B,GAAC,IAAI,EAAC,IAAI,CAACjG,gBAAgB,GAAC,IAAI,EAAC,IAAI,CAACM,iBAAiB,GAAC,IAAI,EAAC,IAAI,CAAC9B,aAAa,GAAC,IAAI,EAAC,IAAI,CAAC0H,aAAa,GAAC,CAAC,EAAC,IAAI,CAACrF,oCAAoC,GAAC,IAAI,EAAC,IAAI,CAACjB,aAAa,GAAC,IAAI,EAAC,IAAI,CAACuG,aAAa,GAAC,IAAI,EAAC,IAAI,CAACC,QAAQ,GAAC,IAAI,EAAC,IAAI,CAAChG,aAAa,GAAC,IAAI,EAAC,IAAI,CAACiG,sBAAsB,GAAC,IAAI,EAAC,IAAI,CAACC,4BAA4B,GAAC,IAAI,EAAC,IAAI,CAACC,iCAAiC,GAAC,IAAI,EAAC,IAAI,CAACC,8BAA8B,GAAC,CAAC,CAAC,EAAC,IAAI,CAACxF,eAAe,GAAC,IAAIsE,GAAG,IAAC,IAAI,CAAClG,iBAAiB,GAAC,CAAC,EAAC,IAAI,CAACqH,mCAAmC,GAAC,CAAC,EAAC,IAAI,CAACpD,YAAY,GAAC,CAAC,EAAC,IAAI,CAACC,eAAe,GAAC,CAAC,EAAC,IAAI,CAACoD,yBAAyB,GAAC,CAAC,CAAC,EAAC,IAAI,CAAC3F,eAAe,GAAC,CAAC,EAAC,IAAI,CAAC4F,mBAAmB,GAAC,IAAI7Q,CAAC,CAAC;MAAC8Q,SAAS,EAAC1S,CAAC,IAAEA,CAAC,IAAE,IAAI2S,EAAE;MAACC,WAAW,EAAC5S,CAAC,KAAGA,CAAC,CAAC6S,KAAK,EAAE,EAAC7S,CAAC;IAAC,CAAC,CAAC,EAAC,IAAI,CAAC8S,oBAAoB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,sBAAsB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,qBAAqB,GAAC,IAAIxB,GAAG,IAAC,IAAI,CAACyB,kBAAkB,GAAC,IAAIrR,CAAC,IAAC,IAAI,CAAC4J,qBAAqB,GAAC9C,EAAE,CAACwK,IAAI,EAAC,IAAI,CAAC3H,mBAAmB,GAAC,IAAI,EAAC,IAAI,CAAC4H,iCAAiC,GAAC,CAAC,CAAC,EAAC,IAAI,CAACjJ,KAAK,GAAC,IAAI,EAAC,IAAI,CAACM,KAAK,GAAC,IAAI,EAAC,IAAI,CAAC4I,sBAAsB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,+BAA+B,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,eAAe,GAAC,CAAC,CAAC,EAAC,IAAI,CAAC7I,IAAI,GAAC,IAAI,EAAC,IAAI,CAACC,IAAI,GAAC,IAAI,EAAC,IAAI,CAACuE,WAAW,GAAC,CAAC,EAAC,IAAI,CAACQ,QAAQ,GAAC,CAAC,CAAC,EAAC,IAAI,CAAC8D,oBAAoB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACC,qBAAqB,GAAC,IAAIzM,EAAE,CAAC/G,CAAC,CAACkK,KAAK,CAACC,IAAI,CAACsJ,kBAAkB,CAACC,SAAS,EAAE,CAAC1T,CAAC,EAACC,CAAC,KAAG,IAAI,CAAC2M,UAAU,CAAC9J,QAAQ,CAAC9C,CAAC,EAACC,CAAC,CAAC,CAAE;EAAA;EAAC0T,UAAUA,CAAA,EAAE;IAAC,IAAI,CAACjI,aAAa,GAAC,IAAI9E,EAAE,CAAC;MAAC2D,aAAa,EAAC,IAAI,CAACL,KAAK,CAACM,KAAK,IAAE,IAAI,CAACN,KAAK,CAACM,KAAK,CAACD,aAAa;MAACE,IAAI,EAAC,CAAC,CAAC,IAAI,CAACA,IAAI;MAACC,IAAI,EAAC,CAAC,CAAC,IAAI,CAACA,IAAI;MAACkJ,oBAAoB,EAAC,IAAI,CAAC3J,qBAAqB;MAAC4J,uBAAuB,EAAC,IAAI,CAAC3J,KAAK,CAAC2J,uBAAuB;MAACC,eAAe,EAACA,CAAA,KAAI,IAAI,CAACzJ,YAAY;MAACwG,OAAO,EAAC7Q,CAAC,IAAE,IAAI,CAAC8K,kBAAkB,CAAC+F,OAAO,CAAC7Q,CAAC;IAAC,CAAC,CAAC;IAAC,MAAMA,CAAC,GAACA,CAACA,CAAC,EAACC,CAAC,EAACC,CAAC,KAAG,IAAI,CAACmK,YAAY,CAAC0J,wBAAwB,CAAC/T,CAAC,EAACC,CAAC,EAACC,CAAC,CAAC;MAAC;QAAC8T,kBAAkB,EAAC/T;MAAC,CAAC,GAAC,IAAI;IAAC,IAAGY,CAAC,CAACZ,CAAC,CAAC8L,kBAAkB,CAAC,EAAC;MAAC,MAAM7L,CAAC,GAACD,CAAC,CAAC8L,kBAAkB,CAAC,IAAI,EAAC/L,CAAC,CAAC;MAAC,IAAI,CAACgM,mBAAmB,GAAC9L,CAAC;IAAA;IAAC,IAAGW,CAAC,CAACZ,CAAC,CAAC4L,eAAe,CAAC,EAAC;MAAC,MAAM3L,CAAC,GAACD,CAAC,CAAC4L,eAAe,CAAC,IAAI,EAAC7L,CAAC,CAAC;MAAC,IAAI,CAAC8L,gBAAgB,GAAC5L,CAAC;IAAA;IAAC,IAAGW,CAAC,CAACZ,CAAC,CAACkM,gBAAgB,CAAC,EAAC;MAAC,MAAMnM,CAAC,GAACC,CAAC,CAACkM,gBAAgB,CAAC;QAACV,YAAY,EAAC,IAAI,CAACC,aAAa;QAACuI,eAAe,EAACA,CAAA,KAAI,IAAI,CAACnJ,kBAAkB,CAACyB,IAAI;QAAC2H,yBAAyB,EAAClU,CAAC,IAAE,IAAI,CAACmU,mCAAmC,CAAElU,CAAC,IAAEA,CAAC,CAACmU,iBAAiB,CAAChO,EAAE,CAACiO,MAAM,EAACrU,CAAC,CAACgF,CAAC,CAAC/E,CAAC,CAACqU,OAAO,EAAC,IAAI,CAACxD,cAAc,CAAC,CAAC,EAACxK,EAAE,CAACiO,OAAO,CAAC,CAAE;QAACC,wBAAwB,EAACxU,CAAC,IAAE,IAAI,CAACmU,mCAAmC,CAAElU,CAAC,IAAEA,CAAC,CAACmU,iBAAiB,CAAChO,EAAE,CAACiO,MAAM,EAACrU,CAAC,EAACsG,EAAE,CAACiO,OAAO,CAAC,CAAE;QAACE,uBAAuB,EAACA,CAAA,KAAI,IAAI,CAACN,mCAAmC,CAAEnU,CAAC,IAAEA,CAAC,CAAC0U,mBAAmB,CAACtO,EAAE,CAACiO,MAAM,CAAC;MAAE,CAAC,CAAC;MAAC,IAAI,CAACjI,iBAAiB,GAACpM,CAAC;IAAA;IAAC,IAAGa,CAAC,CAACZ,CAAC,CAAC0U,YAAY,CAAC,EAAC;MAAC,MAAM3U,CAAC,GAACC,CAAC,CAAC0U,YAAY,CAAC,IAAI,CAAC;MAAC,IAAI,CAAC1C,aAAa,GAACjS,CAAC;IAAA;IAAC,IAAGa,CAAC,CAACZ,CAAC,CAAC2U,OAAO,CAAC,IAAE/T,CAAC,CAAC,IAAI,CAACiL,gBAAgB,CAAC,EAAC;MAAC,MAAM9L,CAAC,GAACC,CAAC,CAAC2U,OAAO,CAAC,IAAI,EAAC,IAAI,CAAC9I,gBAAgB,CAAC;MAAC,IAAI,CAACoG,QAAQ,GAAClS,CAAC;IAAA;IAAC,IAAGa,CAAC,CAACZ,CAAC,CAACgM,YAAY,CAAC,EAAC;MAAC,MAAMjM,CAAC,GAACC,CAAC,CAACgM,YAAY,CAAC,IAAI,CAAC;MAAC,IAAI,CAACC,aAAa,GAAClM,CAAC;IAAA;IAAC,IAAI,CAAC+R,0BAA0B,GAAC,IAAI8C,eAAe,IAAC,IAAI,CAACjJ,kBAAkB,GAAC,IAAI,CAACkJ,gBAAgB,EAAE;EAAA;EAAC,MAAMA,gBAAgBA,CAAA,EAAE;IAAC,MAAM9U,CAAC,GAAC,IAAI,CAAC+R,0BAA0B,EAAEgD,MAAM;MAAC9U,CAAC,GAAC,IAAI,CAACiK,KAAK,CAACC,IAAI;IAAC,IAAI,CAACgI,sBAAsB,GAAC,IAAIjM,EAAE,CAAC,IAAI,CAAC+D,qBAAqB,EAAChK,CAAC,CAAC,EAAC,IAAI,CAAC+U,gBAAgB,CAAC/U,CAAC,EAAC,IAAI,CAACuK,KAAK,CAACyK,GAAG,CAAC;IAAC,MAAM/U,CAAC,GAACD,CAAC,CAACiV,qBAAqB;IAAC,IAAI,CAAC1B,qBAAqB,CAAC2B,eAAe,GAACjV,CAAC,EAAC,IAAI,CAACmS,iCAAiC,GAACnS,CAAC,CAACkV,gBAAgB,CAAC,IAAI,CAAClL,KAAK,CAAC,EAACrJ,CAAC,CAAC,IAAI,CAACuK,eAAe,CAAC,KAAG,IAAI,CAACoI,qBAAqB,CAAC6B,QAAQ,GAAC,IAAI,CAACjK,eAAe,CAAC,EAAC,IAAI,CAACoI,qBAAqB,CAAClC,KAAK,GAAC,IAAI,CAACA,KAAK,EAAC,IAAI,CAACkC,qBAAqB,CAAC8B,mBAAmB,GAACpV,CAAC,CAACoV,mBAAmB,EAAC,IAAI,CAAC9B,qBAAqB,CAAC+B,kBAAkB,GAACtV,CAAC,CAACsV,kBAAkB,EAAC,IAAI,CAAC/B,qBAAqB,CAAChJ,KAAK,GAAC,IAAI,CAACA,KAAK,EAAC,IAAI,CAACgJ,qBAAqB,CAACgC,iBAAiB,GAAC,IAAI,CAACtL,KAAK,EAAC,IAAI,CAACsJ,qBAAqB,CAACiC,kBAAkB,GAAC,IAAIjN,EAAE,CAACvI,CAAC,CAACyV,sBAAsB,CAAC,EAAC,IAAI,CAAClC,qBAAqB,CAACmC,iBAAiB,GAAC1V,CAAC,CAAC0V,iBAAiB,EAAC,IAAI,CAACnC,qBAAqB,CAACoC,4BAA4B,GAAC5V,CAAC,IAAE,IAAI,CAAC4V,4BAA4B,CAAC5V,CAAC,CAAC,EAAC,IAAI,CAACwT,qBAAqB,CAACqC,8BAA8B,GAAC7V,CAAC,IAAE,IAAI,CAAC6V,8BAA8B,CAAC7V,CAAC,CAAC;IAAC,MAAMG,CAAC,GAACqG,EAAE,CAAC,IAAI,CAACgE,KAAK,CAACsL,aAAa,EAAC,IAAI,CAAC3C,iCAAiC,CAAC;IAAC,IAAG,IAAI,CAACK,qBAAqB,CAACuC,4BAA4B,GAAC,MAAMrP,EAAE,CAACvG,CAAC,EAAC,IAAI,CAAC8J,qBAAqB,EAACjK,CAAC,EAAC8J,EAAE,CAAC,EAAC/J,CAAC,CAACC,CAAC,CAAC,EAAC,IAAI,CAACwT,qBAAqB,CAACwC,4BAA4B,GAAC/V,CAAC,CAAC+V,4BAA4B,IAAE,CAAC,CAAC,IAAI,CAACxL,KAAK,CAACwL,4BAA4B,EAAC,IAAI,CAACxC,qBAAqB,CAACyC,iBAAiB,GAAC,CAAC,CAAC,IAAI,CAAC/L,KAAK,CAAC+L,iBAAiB,EAAC,IAAI,CAACzC,qBAAqB,CAAC0C,6BAA6B,GAAC,CAAC,CAAC,IAAI,CAAChM,KAAK,CAACC,IAAI,CAACkD,eAAe,EAAE8I,+BAA+B,EAAC,IAAI,CAAC3C,qBAAqB,CAAC4C,kBAAkB,GAAC,CAAC,CAAC,IAAI,CAAClM,KAAK,CAACC,IAAI,CAACkD,eAAe,EAAEC,UAAU,EAAE8I,kBAAkB,EAAC,iBAAiB,IAAG,IAAI,CAAClM,KAAK,EAAC;MAAC,MAAK;QAACA,KAAK,EAAClK;MAAC,CAAC,GAAC,IAAI;MAAC,IAAI,CAACwT,qBAAqB,CAAC6C,mBAAmB,GAACpW,CAAC,CAACqW,cAAc,CAACC,cAAc,CAACC,2BAA2B,CAACxW,CAAC,CAAC,EAAC,IAAI,CAAC4R,QAAQ,CAAC6E,GAAG,CAACnW,CAAC,CAAE,MAAIL,CAAC,CAACqW,cAAc,CAACC,cAAc,CAACG,qBAAqB,CAAC1W,CAAC,CAAC,CAAE,CAAC;IAAA;IAAC,IAAI,CAAC4R,QAAQ,CAAC6E,GAAG,CAAC,CAACpU,CAAC,CAAE,MAAI,IAAI,CAAC0K,wBAAwB,EAAG,MAAI,IAAI,CAACH,UAAU,CAAC+J,UAAU,CAAE,MAAI,IAAI,CAACC,sBAAsB,EAAE,CAAE,CAAE,EAACvU,CAAC,CAAE,MAAI,CAAC,IAAI,CAACmI,KAAK,EAAEwL,4BAA4B,EAAC,IAAI,CAAC9L,KAAK,CAACC,IAAI,CAAC6L,4BAA4B,CAAC,EAAG,MAAI;MAAC,MAAMhW,CAAC,GAACC,CAAC,CAAC+V,4BAA4B,IAAE,CAAC,CAAC,IAAI,CAACxL,KAAK,CAACwL,4BAA4B;MAAChW,CAAC,KAAG,IAAI,CAACwT,qBAAqB,CAACwC,4BAA4B,KAAG,IAAI,CAACxC,qBAAqB,CAACwC,4BAA4B,GAAChW,CAAC,EAAC,IAAI,CAACkS,QAAQ,EAAE2E,KAAK,EAAE,EAAC,IAAI,CAACC,6BAA6B,EAAE,CAAC;IAAA,CAAC,CAAE,EAACzU,CAAC,CAAE,MAAI,IAAI,CAAC6H,KAAK,CAAC+L,iBAAiB,EAAGjW,CAAC,IAAE,IAAI,CAAC+W,wBAAwB,CAAC,CAAC,CAAC/W,CAAC,CAAC,CAAE,EAACqC,CAAC,CAAE,MAAI,IAAI,CAAC6H,KAAK,CAACC,IAAI,CAAC6M,KAAK,EAAEC,gBAAgB,EAAG,MAAI,IAAI,CAACC,iBAAiB,EAAE,CAAE,EAAC7U,CAAC,CAAE,MAAI,CAAC,CAAC,IAAI,CAAC6H,KAAK,CAACC,IAAI,CAACkD,eAAe,EAAE8I,+BAA+B,EAAGnW,CAAC,IAAE,IAAI,CAACmX,6BAA6B,CAACnX,CAAC,CAAC,CAAE,EAACqC,CAAC,CAAE,MAAI,CAAC,CAAC,IAAI,CAAC6H,KAAK,CAACC,IAAI,CAACkD,eAAe,EAAEC,UAAU,EAAE8I,kBAAkB,EAAGpW,CAAC,IAAE,IAAI,CAACoX,yBAAyB,CAACpX,CAAC,CAAC,CAAE,EAACuC,CAAC,CAAE,MAAItC,CAAC,CAACqW,cAAc,EAAEe,YAAY,EAAGrX,CAAC,IAAE;MAAC,IAAG,CAACA,CAAC,CAACoK,gBAAgB,CAAC1F,MAAM,CAAC,IAAI,CAAC8O,qBAAqB,CAAC8D,SAAS,CAAC,IAAEzW,CAAC,CAACZ,CAAC,CAACqW,cAAc,CAAClM,gBAAgB,CAAC,KAAG,IAAI,CAACoJ,qBAAqB,CAAC8D,SAAS,GAACrX,CAAC,CAACqW,cAAc,CAAClM,gBAAgB,CAAC,EAAC,IAAI,CAACwH,QAAQ,CAAC2F,GAAG,CAAC,iBAAiB,CAAC,EAAC,IAAI,CAACC,mBAAmB,EAAE,CAAC,KAAI;QAAC,MAAMxX,CAAC,GAACA,CAAA,KAAI,IAAI,CAACkK,KAAK,EAAEuN,cAAc;QAAC,IAAI,CAAC7F,QAAQ,CAAC6E,GAAG,CAAC,CAAChU,CAAC,CAACzC,CAAC,EAAC,QAAQ,EAAEA,CAAC,IAAE;UAAC,IAAI,CAAC0X,0BAA0B,CAAC1X,CAAC,CAAC,EAAC,IAAI,CAAC2X,8CAA8C,EAAE;QAAA,CAAC,EAAE;UAACC,aAAa,EAACA,CAAA,KAAI;YAAC,IAAI,CAACJ,mBAAmB,EAAE,EAAC,IAAI,CAACG,8CAA8C,EAAE;UAAA;QAAC,CAAC,CAAC,CAAC,EAAC,iBAAiB,CAAC;MAAA;IAAC,CAAC,EAAE;MAACE,OAAO,EAAC,CAAC;IAAC,CAAC,CAAC,EAACxV,CAAC,CAAE,MAAI,IAAI,CAAC8I,qBAAqB,EAAGnL,CAAC,IAAE;MAACa,CAAC,CAAC,IAAI,CAACwQ,UAAU,CAAC,KAAG,IAAI,CAACA,UAAU,CAACyG,YAAY,GAAC9X,CAAC,CAAC,EAAC,IAAI,CAACwT,qBAAqB,CAACuE,OAAO,GAAC,IAAI,CAAC5M,qBAAqB,KAAGzC,EAAE,CAAC4C,KAAK,EAACtL,CAAC,KAAG0I,EAAE,CAACwK,IAAI,IAAE,IAAI,CAAC8E,OAAO,CAAChP,EAAE,CAAC;IAAA,CAAC,EAAErG,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACiK,UAAU,GAAC3M,CAAC,CAACwT,kBAAkB,CAACC,SAAS,CAACuE,YAAY,CAAC/O,EAAE,CAACgP,aAAa,EAAC,IAAI,CAAC,EAAC,IAAI,CAAC1N,KAAK,IAAE,kBAAkB,IAAG,IAAI,CAACA,KAAK,IAAE,IAAI,CAACoH,QAAQ,CAAC6E,GAAG,CAACpU,CAAC,CAAE,MAAI,IAAI,CAACmI,KAAK,CAAC2N,gBAAgB,EAAG,MAAI,IAAI,CAAClG,aAAa,CAACmG,sBAAsB,EAAE,CAAE,CAAC,EAAC,IAAI,CAACC,YAAY,CAAC,yBAAyB,CAAC,EAAC,IAAI,CAACC,cAAc,CAAC,IAAI,CAACpO,KAAK,CAACmL,QAAQ,CAAC,CAACkD,KAAK,CAAE,MAAI,CAAC,CAAC,CAAE,EAAC,IAAI,CAACxG,0BAA0B,GAAC,IAAI;EAAA;EAACyG,gBAAgBA,CAAA,EAAE;IAAC,IAAI,CAACzG,0BAA0B,KAAG,IAAI,CAACA,0BAA0B,CAAC0G,KAAK,EAAE,EAAC,IAAI,CAAC1G,0BAA0B,GAAC,IAAI,CAAC;EAAA;EAAC2G,OAAOA,CAAA,EAAE;IAAC,IAAI,CAACF,gBAAgB,EAAE,EAAC,IAAI,CAACG,oBAAoB,EAAE,EAAC,IAAI,CAACC,yBAAyB,EAAE,EAAC,IAAI,CAAChM,UAAU,CAACiM,MAAM,EAAE,EAAC,IAAI,CAACjM,UAAU,GAAC9D,EAAE,EAAC,IAAI,CAACoB,KAAK,CAACC,IAAI,CAACwK,YAAY,CAACmE,mBAAmB,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC5O,KAAK,CAACC,IAAI,CAACyK,OAAO,CAACkE,mBAAmB,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC9M,mBAAmB,GAAC7K,CAAC,CAAC,IAAI,CAAC6K,mBAAmB,CAAC,EAAC,IAAI,CAACF,gBAAgB,GAAC3K,CAAC,CAAC,IAAI,CAAC2K,gBAAgB,CAAC,EAAC,IAAI,CAACM,iBAAiB,GAACjL,CAAC,CAAC,IAAI,CAACiL,iBAAiB,CAAC,EAAC,IAAI,CAAC6F,aAAa,GAAC,IAAI,EAAC,IAAI,CAACC,QAAQ,GAAC,IAAI,EAAC,IAAI,CAAChG,aAAa,GAAC/K,CAAC,CAAC,IAAI,CAAC+K,aAAa,CAAC,EAAC,IAAI,CAAC2G,KAAK,EAAE,EAAC,IAAI,CAACnH,aAAa,GAACvK,CAAC,CAAC,IAAI,CAACuK,aAAa,CAAC,EAAC,IAAI,CAACiB,oCAAoC,GAACtL,CAAC,CAAC,IAAI,CAACsL,oCAAoC,CAAC,EAAC,IAAI,CAACwE,qBAAqB,GAAChQ,CAAC,CAAC,IAAI,CAACgQ,qBAAqB,CAAC,EAAC,IAAI,CAACG,KAAK,KAAG,IAAI,CAACA,KAAK,CAACuH,MAAM,CAAC,IAAI,CAACxH,UAAU,CAAC,EAAC,IAAI,CAACA,UAAU,GAAC,IAAI,EAAC,IAAI,CAACC,KAAK,GAAC,IAAI,CAAC,EAAC,IAAI,CAACM,QAAQ,GAACzQ,CAAC,CAAC,IAAI,CAACyQ,QAAQ,CAAC,EAAC,IAAI,CAACmH,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC;IAAC,KAAI,MAAM/Y,CAAC,IAAI,IAAI,CAACsS,8BAA8B,EAAC,IAAI,CAACA,8BAA8B,CAACtS,CAAC,CAAC,CAACgZ,MAAM,CAAC,IAAI7Y,CAAC,CAAC,yBAAyB,EAAC,0BAA0B,CAAC,CAAC;IAAC,IAAI,CAACmS,8BAA8B,GAAC,IAAI,EAAC,IAAI,CAACD,iCAAiC,GAAChR,CAAC,CAAC,IAAI,CAACgR,iCAAiC,CAAC,EAAC,IAAI,CAACrB,eAAe,GAAC7P,CAAC,CAAC,IAAI,CAAC6P,eAAe,CAAC,EAAC,IAAI,CAACyB,mBAAmB,GAAC,IAAI,EAAC,IAAI,CAAC7C,sBAAsB,CAACiD,KAAK,EAAE,EAAC,IAAI,CAACG,qBAAqB,CAACH,KAAK,EAAE,EAAC,IAAI,CAACvI,aAAa,GAACnJ,CAAC,CAAC,IAAI,CAACmJ,aAAa,CAAC;EAAA;EAACuI,KAAKA,CAAA,EAAE;IAAC,IAAI,CAAC3G,aAAa,EAAE+M,kBAAkB,EAAE,EAACpY,CAAC,CAAC,IAAI,CAACsQ,qBAAqB,CAAC,IAAE,IAAI,CAACA,qBAAqB,CAAC8H,kBAAkB,EAAE,EAAC,IAAI,CAACnO,kBAAkB,CAAC+F,OAAO,CAAE7Q,CAAC,IAAEA,CAAC,CAAC0Y,OAAO,EAAE,CAAE,EAAC,IAAI,CAACpO,aAAa,EAAEuI,KAAK,EAAE,EAAC,IAAI,CAAC/H,kBAAkB,CAAC+H,KAAK,EAAE,EAAC,IAAI,CAAC3H,iBAAiB,GAAC,CAAC,EAAC,IAAI,CAAC+D,WAAW,GAAC,CAAC,EAAC,IAAI,CAAC2H,sBAAsB,EAAE,EAAC,IAAI,CAACjG,QAAQ,CAACE,OAAO,CAAC1P,CAAC,CAAC,EAAC,IAAI,CAACwP,QAAQ,CAACkC,KAAK,EAAE,EAAC,IAAI,CAACpB,iBAAiB,CAACoB,KAAK,EAAE,EAAC,IAAI,CAACnB,sBAAsB,CAACmB,KAAK,EAAE,EAAC,IAAI,CAACvG,yBAAyB,CAACuG,KAAK,EAAE,EAAC,IAAI,CAAC/F,eAAe,CAAC+F,KAAK,EAAE,EAAC,IAAI,CAACJ,mBAAmB,CAACI,KAAK,EAAE,EAAC,IAAI,CAAC1D,YAAY,GAAC,CAAC,EAAC,IAAI,CAACC,eAAe,GAAC,CAAC,EAAC,IAAI,CAACoD,yBAAyB,GAAC,CAAC,CAAC,EAAC,IAAI,CAAC6F,YAAY,CAAC,UAAU,CAAC,EAAC,IAAI,CAACA,YAAY,CAAC,SAAS,CAAC,EAAC,IAAI,CAACA,YAAY,CAAC,mBAAmB,CAAC,EAAC,IAAI,CAAC3M,aAAa,CAACwN,MAAM,CAACC,IAAI,CAAC,SAAS,CAAC;EAAA;EAACnE,gBAAgBA,CAAChV,CAAC,EAACC,CAAC,EAAC;IAAC,IAAI,CAACqR,KAAK,GAACtR,CAAC,CAACoZ,MAAM,EAAC,IAAI,CAAC/H,UAAU,GAAC,IAAIzI,EAAE,CAAC;MAACyQ,QAAQ,EAAC,CAAC,IAAI,CAACtM,wBAAwB;MAAC+K,YAAY,EAAC,IAAI,CAAC3M;IAAqB,CAAC,EAAClL,CAAC,CAAC,EAAC,IAAI,CAACqR,KAAK,CAACmF,GAAG,CAAC,IAAI,CAACpF,UAAU,CAAC;IAAC,MAAMnR,CAAC,GAAC,IAAI,CAACmR,UAAU,CAAC6H,MAAM;IAAChZ,CAAC,CAACsC,EAAE,CAAC,sBAAsB,EAAExC,CAAC,IAAE,IAAI,CAAC4V,4BAA4B,CAAC5V,CAAC,CAACsZ,QAAQ,CAACC,UAAU,CAAC,CAAE,EAACrZ,CAAC,CAACsC,EAAE,CAAC,mBAAmB,EAAExC,CAAC,IAAE,IAAI,CAAC6V,8BAA8B,CAAC7V,CAAC,CAACsZ,QAAQ,CAACC,UAAU,CAAC,CAAE,EAACrZ,CAAC,CAACsC,EAAE,CAAC,qBAAqB,EAAExC,CAAC,IAAE,IAAI,CAAC4V,4BAA4B,CAAC5V,CAAC,CAACwZ,MAAM,CAACF,QAAQ,CAACC,UAAU,CAAC,CAAE,EAACrZ,CAAC,CAACsC,EAAE,CAAC,uBAAuB,EAAExC,CAAC,IAAE,IAAI,CAAC4V,4BAA4B,CAAC5V,CAAC,CAACwZ,MAAM,CAACF,QAAQ,CAACC,UAAU,CAAC,CAAE,EAACrZ,CAAC,CAACsC,EAAE,CAAC,uBAAuB,EAAExC,CAAC,IAAE,IAAI,CAAC4V,4BAA4B,CAAC5V,CAAC,CAACwZ,MAAM,CAACF,QAAQ,CAACC,UAAU,CAAC,CAAE;EAAA;EAAC3D,4BAA4BA,CAAC5V,CAAC,EAAC;IAAC,IAAGiB,CAAC,CAAC,IAAI,CAACkQ,qBAAqB,CAAC,IAAElQ,CAAC,CAACjB,CAAC,CAAC,EAAC;IAAO,MAAMC,CAAC,GAAC,IAAI,CAAC6K,kBAAkB,CAACxJ,GAAG,CAACtB,CAAC,CAAC;IAACC,CAAC,IAAE,IAAI,CAACkR,qBAAqB,CAACsI,qBAAqB,CAACxZ,CAAC,CAAC;EAAA;EAAC4V,8BAA8BA,CAAC7V,CAAC,EAAC;IAAC,IAAGiB,CAAC,CAAC,IAAI,CAACkQ,qBAAqB,CAAC,IAAElQ,CAAC,CAACjB,CAAC,CAAC,EAAC;IAAO,MAAMC,CAAC,GAAC,IAAI,CAAC6K,kBAAkB,CAACxJ,GAAG,CAACtB,CAAC,CAAC;IAACC,CAAC,IAAE,IAAI,CAACkR,qBAAqB,CAACuI,uBAAuB,CAACzZ,CAAC,CAAC;EAAA;EAAC2W,sBAAsBA,CAAA,EAAE;IAAC,MAAM5W,CAAC,GAAC,IAAI,CAACoN,mBAAmB,CAACiB,uBAAuB;MAACpO,CAAC,GAAC,IAAI,CAACiL,iBAAiB,GAAClL,CAAC,GAAC2Z,EAAE;MAACzZ,CAAC,GAAC,CAAC,IAAI,CAAC6M,wBAAwB,IAAE,CAAC9M,CAAC;IAACC,CAAC,KAAG,IAAI,CAACuP,QAAQ,KAAG,IAAI,CAACA,QAAQ,GAACvP,CAAC,EAACA,CAAC,IAAE,IAAI,CAACmR,UAAU,CAACgI,QAAQ,GAAC,CAAC,CAAC,EAAC,IAAI,CAACO,2BAA2B,EAAE,KAAG,IAAI,CAACvI,UAAU,CAACgI,QAAQ,GAAC,CAAC,CAAC,EAAC,IAAI,CAACQ,gBAAgB,EAAE,CAAC,EAAC,IAAI,CAACC,2BAA2B,EAAE,CAAC;EAAA;EAACA,2BAA2BA,CAAA,EAAE;IAAC,IAAI,CAACzI,UAAU,CAAC7B,OAAO,GAAC,IAAI,CAACC,QAAQ,KAAG,IAAI,IAAE,IAAI,CAACjF,KAAK,CAACuP,OAAO,IAAE,IAAI,CAACvP,KAAK,CAACuP,OAAO,GAAC,CAAC,CAAC;EAAA;EAACC,wBAAwBA,CAACha,CAAC,EAAC;IAAC,OAAO,IAAI,IAAEA,CAAC,GAAC,IAAI,CAAC8K,kBAAkB,CAACxJ,GAAG,CAACtB,CAAC,CAAC,GAAC,KAAK,CAAC;EAAA;EAACia,8BAA8BA,CAACja,CAAC,EAAC;IAAC,OAAO,IAAI,CAACkK,KAAK,CAACM,KAAK,EAAED,aAAa,GAAC,IAAI,CAAC2P,gCAAgC,CAACla,CAAC,CAAC,GAAC,IAAI;EAAA;EAACma,mBAAmBA,CAACna,CAAC,EAAoD;IAAA,IAAnDC,CAAC,GAAAma,SAAA,CAAA5J,MAAA,QAAA4J,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,IAAI,CAAClQ,KAAK,CAACM,KAAK,IAAE,IAAI,CAACN,KAAK,CAACM,KAAK,CAACD,aAAa;IAAE,OAAOvF,CAAC,CAAChF,CAAC,EAACC,CAAC,CAAC;EAAA;EAAC,IAAIqa,4BAA4BA,CAAA,EAAE;IAAC,MAAMta,CAAC,GAAC,IAAI,CAACkK,KAAK,CAACM,KAAK,IAAE,IAAI,CAACN,KAAK,CAACM,KAAK,CAACD,aAAa;IAAC,IAAG,CAACvK,CAAC,EAAC;IAAO,MAAMC,CAAC,GAAC,IAAImR,GAAG;IAAC,OAAO,IAAI,CAACtG,kBAAkB,CAAC+F,OAAO,CAAE3Q,CAAC,IAAE;MAAC,IAAG,CAACA,CAAC,EAAC;MAAO,MAAMC,CAAC,GAACD,CAAC,CAACoU,OAAO;QAAClU,CAAC,GAAC,IAAI,CAAC+Z,mBAAmB,CAACha,CAAC,EAACH,CAAC,CAAC;MAACa,CAAC,CAACT,CAAC,CAAC,IAAEH,CAAC,CAACoQ,GAAG,CAACjQ,CAAC,EAACF,CAAC,CAAC;IAAA,CAAC,CAAE,EAACD,CAAC;EAAA;EAAC,IAAI0O,aAAaA,CAAA,EAAE;IAAC,OAAM,EAAE,CAAC,IAAI,CAACuD,QAAQ,IAAE,CAAC,IAAI,CAACA,QAAQ,CAACqI,kBAAkB,EAAE,CAAC;EAAA;EAAC,MAAMC,kBAAkBA,CAACxa,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACgS,aAAa,IAAE,IAAI,CAACA,aAAa,CAACwI,kBAAkB,CAACza,CAAC,CAAC;MAACE,CAAC,GAAC,IAAI,CAACgS,QAAQ,IAAE,IAAI,CAACA,QAAQ,CAACuI,kBAAkB,CAACza,CAAC,CAAC;IAAC,MAAM+B,CAAC,CAAC,CAAC9B,CAAC,EAACC,CAAC,CAAC,CAAC;EAAA;EAACwa,oBAAoBA,CAAA,EAAE;IAAC,IAAI,CAACzI,aAAa,IAAE,IAAI,CAACA,aAAa,CAACwI,kBAAkB,EAAE,EAAC,IAAI,CAACvI,QAAQ,IAAE,IAAI,CAACA,QAAQ,CAACyI,oBAAoB,EAAE;EAAA;EAAC,IAAIC,gBAAgBA,CAAA,EAAE;IAAC,IAAG,IAAI,CAAC9N,eAAe,CAACP,IAAI,GAAC,CAAC,EAAC,OAAM,SAAS;IAAC,IAAIvM,CAAC,GAAC,CAAC;MAACC,CAAC,GAAC,CAAC;IAAC,OAAOQ,CAAC,CAAC,IAAI,CAACkQ,QAAQ,EAAE,CAACzQ,CAAC,EAACC,CAAC,KAAG;MAAC,IAAGU,CAAC,CAACX,CAAC,CAAC,EAAC;QAAC,MAAME,CAAC,GAACF,CAAC,CAAC2a,mBAAmB,EAAE;QAAC,IAAGza,CAAC,CAAC0a,OAAO,GAAC,CAAC,EAAC,OAAM,CAAC,CAAC;QAAC,IAAI,CAACrJ,iBAAiB,CAAC8F,GAAG,CAACpX,CAAC,CAAC,KAAGF,CAAC,IAAEG,CAAC,CAAC2a,IAAI,EAAC/a,CAAC,IAAEI,CAAC,CAAC4a,IAAI,CAAC;MAAA;MAAC,OAAM,CAAC,CAAC;IAAA,CAAC,CAAE,GAAC,SAAS,GAAC/a,CAAC,IAAE,CAAC,IAAE,CAAC,KAAGD,CAAC,GAAC,MAAM,GAACA,CAAC,IAAE,CAAC,IAAE,CAAC,KAAGC,CAAC,GAAC,MAAM,GAAC,OAAO;EAAA;EAAC+X,OAAOA,CAAChY,CAAC,EAAC;IAAC,IAAG,IAAI,CAAC4M,UAAU,CAACqO,YAAY,CAACjb,CAAC,CAAC,EAAC,IAAI,CAACkb,oBAAoB,CAAClb,CAAC,CAAC,EAAC,IAAI,CAACqY,YAAY,CAAC,SAAS,CAAC,EAAC,IAAI,CAAC7L,OAAO,IAAE,IAAI,CAAC6L,YAAY,CAAC,UAAU,CAAC,EAAC,IAAI,CAACA,YAAY,CAAC,mBAAmB,CAAC,EAAC,CAACrY,CAAC,CAACmb,aAAa,EAAC,OAAO/R,EAAE,CAACgS,KAAK;EAAA;EAACC,qBAAqBA,CAACrb,CAAC,EAACC,CAAC,EAAC;IAACA,CAAC,GAAC,IAAI,CAAC+S,qBAAqB,CAACsI,MAAM,CAACtb,CAAC,CAAC,GAAC,IAAI,CAACgT,qBAAqB,CAACyD,GAAG,CAACzW,CAAC,CAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAACga,gCAAgC,CAACla,CAAC,CAAC;IAACa,CAAC,CAACX,CAAC,CAAC,IAAE,IAAI,CAACqb,qBAAqB,CAACrb,CAAC,CAAC;EAAA;EAACga,gCAAgCA,CAACla,CAAC,EAAC;IAAC,OAAOW,CAAC,CAAC,IAAI,CAACmK,kBAAkB,EAAE7K,CAAC,IAAE,IAAI,CAACka,mBAAmB,CAACla,CAAC,CAACqU,OAAO,CAAC,KAAGtU,CAAC,CAAE;EAAA;EAACub,qBAAqBA,CAACvb,CAAC,EAAC;IAAC,IAAGiB,CAAC,CAACjB,CAAC,CAAC,EAAC,OAAM,CAAC,CAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACsU,OAAO;MAACpU,CAAC,GAAC,IAAI,CAACia,mBAAmB,CAACla,CAAC,CAAC;MAACE,CAAC,GAACF,CAAC,CAACuP,OAAO,IAAE,CAAC,IAAI,CAACtF,KAAK,CAAC8C,SAAS,KAAG/L,CAAC,CAACf,CAAC,CAAC,IAAE,CAAC,IAAI,CAAC8S,qBAAqB,CAACuE,GAAG,CAACrX,CAAC,CAAC,CAAC;IAAC,OAAOF,CAAC,CAACoU,iBAAiB,CAAChO,EAAE,CAACoV,YAAY,EAACrb,CAAC,EAACmG,EAAE,CAACiO,OAAO,CAAC;EAAA;EAACkH,sBAAsBA,CAACzb,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAAC6K,kBAAkB,CAACxJ,GAAG,CAACtB,CAAC,CAACiV,GAAG,CAAC;IAAC,IAAGhV,CAAC,EAAC,OAAOyb,OAAO,CAACC,OAAO,CAAC1b,CAAC,CAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACoS,8BAA8B,CAACtS,CAAC,CAACiV,GAAG,CAAC;IAAC,IAAG/U,CAAC,EAAC,OAAOA,CAAC,CAAC0b,OAAO;IAAC,MAAMzb,CAAC,GAAC8B,CAAC,EAAE;IAAC,OAAO,IAAI,CAACqQ,8BAA8B,CAACtS,CAAC,CAACiV,GAAG,CAAC,GAAC9U,CAAC,EAACA,CAAC,CAACyb,OAAO;EAAA;EAAC,MAAMC,2BAA2BA,CAAC7b,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAAC+J,qBAAqB;MAAC9J,CAAC,GAAC,IAAI,CAAC+J,KAAK,CAACC,IAAI,CAACuL,sBAAsB;MAACtV,CAAC,GAAC,IAAI,CAAC8J,KAAK,CAACC,IAAI,CAACmM,cAAc,CAAClM,gBAAgB;MAAC9J,CAAC,GAACA,CAACN,CAAC,EAACC,CAAC,EAACG,CAAC,KAAG+D,CAAC,CAACnE,CAAC,EAACG,CAAC,EAACF,CAAC,EAACD,CAAC,EAACE,CAAC,EAACD,CAAC,EAACG,CAAC,CAAC;MAACG,CAAC,GAACA,CAACP,CAAC,EAACC,CAAC,EAACE,CAAC,KAAGgE,CAAC,CAACnE,CAAC,EAACI,CAAC,EAACH,CAAC,EAACD,CAAC,EAACE,CAAC,EAACD,CAAC,EAACE,CAAC,CAAC;MAACM,CAAC,GAAC,IAAI,CAAC0R,sBAAsB,GAAC;QAAC2J,OAAO,EAAC,IAAI,CAAC3J,sBAAsB;QAAC4J,gBAAgB,EAAC,CAAC,CAAClb,CAAC,CAACZ,CAAC,CAAC,IAAE,CAAC,CAACA,CAAC,CAAC8b,gBAAgB;QAACC,gBAAgB,EAACnb,CAAC,CAACZ,CAAC,CAAC,GAACA,CAAC,CAAC+b,gBAAgB,GAAC,IAAI;QAACC,yBAAyB,EAAC,IAAI,CAAC/R,KAAK,CAACC,IAAI,CAAC+R;MAAU,CAAC,GAAC,IAAI;MAACvb,CAAC,GAAC,MAAMX,CAAC,CAACmc,uBAAuB,CAAC7b,CAAC,EAACC,CAAC,EAACE,CAAC,EAACc,CAAC,CAACtB,CAAC,EAAC,QAAQ,CAAC,CAAC;IAAC,IAAG,CAACU,CAAC,EAAC,OAAO,IAAI;IAAC,MAAMM,CAAC,GAACN,CAAC,CAACyb,WAAW;IAAC,IAAGzb,CAAC,CAAC0b,uBAAuB,EAAC;MAAC,MAAMrc,CAAC,GAAC,IAAI,CAACwT,qBAAqB,CAACmC,iBAAiB;MAAC,IAAG3V,CAAC,EAAC;QAACuE,CAAC,CAACtD,CAAC,EAAC0I,EAAE,CAAC;QAAC,MAAM1J,CAAC,GAACc,CAAC,CAACf,CAAC,CAACsc,YAAY,CAAC3S,EAAE,CAAC,CAAC,CAAC,EAACA,EAAE,CAAC,CAAC,CAAC,EAAC,CAAC,EAACzJ,CAAC,EAAC,QAAQ,CAAC,EAAC,CAAC,CAAC;QAACe,CAAC,CAAC,CAAC,CAAC,GAAC0M,IAAI,CAACK,GAAG,CAAC/M,CAAC,CAAC,CAAC,CAAC,EAAChB,CAAC,CAAC,EAACgB,CAAC,CAAC,CAAC,CAAC,GAAC0M,IAAI,CAACC,GAAG,CAAC3M,CAAC,CAAC,CAAC,CAAC,EAAChB,CAAC,CAAC;MAAA;IAAC;IAAC,OAAM;MAACmc,WAAW,EAACnb,CAAC;MAACsb,kBAAkB,EAAC5b,CAAC,CAAC4b;IAAkB,CAAC;EAAA;EAAC,MAAMC,iBAAiBA,CAACxc,CAAC,EAACC,CAAC,EAAC;IAAC,MAAM4C,CAAC,CAAE,MAAI,IAAI,CAACqH,KAAK,EAAEuN,cAAc,CAAE;IAAC,MAAMvX,CAAC,GAAC,IAAI,CAACgK,KAAK,CAACM,KAAK,IAAE,IAAI,CAACN,KAAK,CAACM,KAAK,CAACD,aAAa;MAACnK,CAAC,GAAC,IAAI,CAAC8J,KAAK,CAACuN,cAAc,CAACgF,IAAI,CAAExc,CAAC,IAAEA,CAAC,KAAGD,CAAC,IAAE,IAAI,IAAEE,CAAC,IAAE,IAAI,IAAED,CAAC,CAACyc,UAAU,IAAE1c,CAAC,CAAC0c,UAAU,IAAEzc,CAAC,CAACyc,UAAU,CAACxc,CAAC,CAAC,KAAGF,CAAC,CAAC0c,UAAU,CAACxc,CAAC,CAAC,CAAE;IAAC,IAAG,CAACE,CAAC,EAAC,MAAM,IAAID,CAAC,CAAC,mCAAmC,EAAC,kCAAkC,CAAC;IAAC,MAAMG,CAAC,GAAC,MAAM,IAAI,CAACmb,sBAAsB,CAACrb,CAAC,CAAC;IAAC,OAAO,IAAI,CAACyb,2BAA2B,CAACvb,CAAC,EAACL,CAAC,CAAC;EAAA;EAAC0c,uBAAuBA,CAAC3c,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAAC4K,kBAAkB,CAACxJ,GAAG,CAACtB,CAAC,CAACiV,GAAG,CAAC;IAAC,IAAG,CAAC/U,CAAC,EAAC,OAAO,IAAI;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACyc,uBAAuB,EAAE;IAAC,IAAG,CAAC,KAAGxc,CAAC,CAACyc,MAAM,CAACC,GAAG,IAAE,CAAC,KAAG1c,CAAC,CAAC2c,MAAM,CAACD,GAAG,EAAC,OAAO,IAAI;IAACrZ,CAAC,CAACuZ,EAAE,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC;IAAC,IAAI3c,CAAC,GAAC,CAAC;IAAC,IAAGD,CAAC,CAACyc,MAAM,CAACC,GAAG,GAAC,CAAC,EAAC;MAAC,IAAG,CAAChZ,CAAC,CAAC1D,CAAC,CAACyc,MAAM,CAACI,MAAM,EAAC,IAAI,CAACxJ,qBAAqB,CAAC+B,kBAAkB,CAACnL,gBAAgB,EAAC6S,EAAE,EAAChd,CAAC,CAAC,EAAC,OAAO,IAAI;MAACwD,CAAC,CAACsZ,EAAE,EAACA,EAAE,EAACE,EAAE,CAAC,EAAC7c,CAAC,EAAE;IAAA;IAAC,IAAGD,CAAC,CAAC2c,MAAM,CAACD,GAAG,GAAC,CAAC,EAAC;MAAC,MAAK,CAAC7c,CAAC,EAACE,CAAC,CAAC,GAACC,CAAC,CAAC2c,MAAM,CAACE,MAAM;QAAC1c,CAAC,GAACS,CAAC,CAAC,IAAI,CAACoR,sBAAsB,CAACmK,YAAY,CAACtc,CAAC,EAACE,CAAC,EAAC,QAAQ,CAAC,EAAC,CAAC,CAAC;MAAC,IAAGsD,CAAC,CAACyZ,EAAE,EAACjd,CAAC,EAACE,CAAC,EAACI,CAAC,CAAC,EAAC,CAACuD,CAAC,CAACoZ,EAAE,EAAC,IAAI,CAAC9K,sBAAsB,CAAC/H,gBAAgB,EAAC6S,EAAE,EAAChd,CAAC,CAAC,EAAC,OAAO,IAAI;MAACwD,CAAC,CAACsZ,EAAE,EAACA,EAAE,EAACE,EAAE,CAAC,EAAC7c,CAAC,EAAE;IAAA;IAAC,OAAOA,CAAC,GAAC,CAAC,IAAEsD,CAAC,CAACqZ,EAAE,EAACA,EAAE,EAAC,CAAC,GAAC3c,CAAC,CAAC,EAAC,IAAIkJ,EAAE,CAAC;MAAC3G,CAAC,EAACoa,EAAE,CAAC,CAAC,CAAC;MAAC1b,CAAC,EAAC0b,EAAE,CAAC,CAAC,CAAC;MAAC1Y,CAAC,EAAC0Y,EAAE,CAAC,CAAC,CAAC;MAAC3S,gBAAgB,EAACnK;IAAC,CAAC,CAAC;EAAA;EAACid,kBAAkBA,CAACld,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACyQ,QAAQ,CAACrP,GAAG,CAACtB,CAAC,CAAC6P,EAAE,CAAC;IAAC,IAAG5O,CAAC,CAACf,CAAC,CAAC,EAAC,MAAM,IAAIC,CAAC,CAAC,kCAAkC,EAAC,iCAAiC,CAAC;IAAC,MAAMC,CAAC,GAACJ,CAAC,CAACmd,YAAY,CAACC,OAAO,CAACnd,CAAC,CAAC;IAAC,IAAG,CAAC,CAAC,KAAGG,CAAC,EAAC,MAAM,IAAID,CAAC,CAAC,+BAA+B,EAAC,+BAA+B,CAAC;IAAC,MAAMG,CAAC,GAACJ,CAAC,CAACgd,kBAAkB,CAAC9c,CAAC,CAAC;IAAC,IAAGa,CAAC,CAACX,CAAC,CAAC,EAAC,MAAM,IAAIH,CAAC,CAAC,uBAAuB,EAAC,gCAAgC,CAAC;IAAC,OAAOG,CAAC;EAAA;EAACoX,0BAA0BA,CAAC1X,CAAC,EAAC;IAAC,IAAI,CAACuT,oBAAoB,KAAG,IAAI,CAACkD,GAAG,CAACzW,CAAC,CAACqd,KAAK,CAAC,EAAC,IAAI,CAACxE,MAAM,CAAC7Y,CAAC,CAACsd,OAAO,CAAC,CAAC;EAAA;EAACC,oBAAoBA,CAACvd,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACsU,OAAO,CAACW,GAAG;MAAC/U,CAAC,GAAC,IAAI,CAAC4K,kBAAkB,CAACxJ,GAAG,CAACrB,CAAC,CAAC;IAAC,IAAG,CAACgB,CAAC,CAACf,CAAC,CAAC,IAAE,CAACe,CAAC,CAAC,IAAI,CAACyQ,sBAAsB,CAACpQ,GAAG,CAACrB,CAAC,CAAC,CAAC,EAAC,QAAOD,CAAC,CAACgD,QAAQ;MAAE,KAAI,SAAS;QAAC,IAAI,CAACwa,4BAA4B,CAACtd,CAAC,CAAC;QAAC;MAAM,KAAI,UAAU;QAAC,IAAI,CAACud,6BAA6B,CAACvd,CAAC,EAACF,CAAC,CAAC;QAAC;MAAM,KAAI,QAAQ;QAAC,IAAI,CAAC0d,2BAA2B,CAACxd,CAAC,EAACF,CAAC,CAAC;QAAC;MAAM,KAAI,YAAY;QAAC;MAAM,KAAI,WAAW;QAAC,IAAI,CAAC2d,8BAA8B,CAACzd,CAAC,EAACF,CAAC,CAAC;IAAA;EAAC;EAACyd,6BAA6BA,CAACzd,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACqU,OAAO,CAACsJ,QAAQ;IAAC,IAAG3c,CAAC,CAACf,CAAC,CAAC,EAAC,OAAO,KAAK,IAAI,CAAC2d,gBAAgB,CAAC5d,CAAC,CAACqU,OAAO,CAAC;IAAC,IAAGrT,CAAC,CAACjB,CAAC,CAAC,EAAC;MAAC,MAAMA,CAAC,GAACC,CAAC,CAACqU,OAAO,CAACpE,MAAM,IAAEjQ,CAAC,CAACqU,OAAO,CAACpE,MAAM,CAACL,EAAE;MAAC,IAAG7P,CAAC,EAAC;QAAC,MAAMC,CAAC,GAAC,IAAI,CAAC0Q,QAAQ,CAACrP,GAAG,CAACtB,CAAC,CAAC;QAAC,IAAGa,CAAC,CAACZ,CAAC,CAAC,IAAEA,CAAC,CAAC6d,UAAU,KAAGpW,EAAE,CAACqW,OAAO,EAAC;MAAM;MAAC,OAAO,KAAK,IAAI,CAACF,gBAAgB,CAAC5d,CAAC,CAACqU,OAAO,CAAC;IAAA;IAAC,MAAMnU,CAAC,GAACH,CAAC,CAACge,gBAAgB;IAAC,CAAC/c,CAAC,CAAChB,CAAC,CAACge,QAAQ,CAAC,IAAE9d,CAAC,CAAC+d,cAAc,CAACle,CAAC,EAACC,CAAC,CAACge,QAAQ,CAAC,IAAE,IAAI,CAACJ,gBAAgB,CAAC7d,CAAC,CAACsU,OAAO,CAAC,EAAC,IAAI,CAAC6J,qBAAqB,CAACje,CAAC,CAAC;EAAA;EAACwd,2BAA2BA,CAAC1d,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACqU,OAAO;MAACnU,CAAC,GAACU,CAAC,CAACb,CAAC,CAAC,GAACA,CAAC,CAACge,gBAAgB,GAACnd,CAAC,CAACZ,CAAC,CAACme,QAAQ,CAAC,GAAC,IAAI,CAACzN,QAAQ,CAACrP,GAAG,CAACrB,CAAC,CAACme,QAAQ,CAACvO,EAAE,CAAC,GAAC,IAAI;IAAC,IAAG5O,CAAC,CAACd,CAAC,CAAC,IAAEc,CAAC,CAAChB,CAAC,CAACge,QAAQ,CAAC,EAAC,OAAO,KAAK,IAAI,CAACJ,gBAAgB,CAAC3d,CAAC,CAAC;IAAC,MAAME,CAAC,GAACD,CAAC,CAAC+P,MAAM;MAAC5P,CAAC,GAAC,IAAI,CAACoP,mBAAmB,CAACzP,CAAC,CAACge,QAAQ,CAAC;IAAC,IAAGpd,CAAC,CAACP,CAAC,CAAC,KAAGA,CAAC,CAAC+K,IAAI,KAAGjL,CAAC,CAACiL,IAAI,IAAE,WAAW,KAAG/K,CAAC,CAAC+K,IAAI,CAAC,IAAE,WAAW,KAAGjL,CAAC,CAACiL,IAAI,EAAC,OAAO,KAAK,IAAI,CAACwS,gBAAgB,CAAC3d,CAAC,CAAC;IAAC,MAAMK,CAAC,GAAC,IAAI,CAACkR,iBAAiB,CAACnQ,GAAG,CAAClB,CAAC,CAACyP,EAAE,CAAC;IAAC,IAAGtP,CAAC,IAAE,CAAC,KAAGA,CAAC,CAACgM,IAAI,EAAC,OAAO,KAAK,IAAI,CAACsR,gBAAgB,CAAC3d,CAAC,CAAC;IAAC,MAAMO,CAAC,GAAC4C,CAAC,CAACjD,CAAC,EAACE,CAAC,CAAC;IAAC,IAAGW,CAAC,CAACR,CAAC,CAAC,EAAC,OAAO,KAAK,IAAI,CAAC4d,oBAAoB,CAACje,CAAC,CAACyP,EAAE,EAACvP,CAAC,CAAC;IAAC,MAAMK,CAAC,GAAC;MAACyC,IAAI,EAAC3C,CAAC;MAAC6d,wBAAwB,EAAC,EAAE;MAACC,kBAAkB,EAAC;IAAE,CAAC;IAAC,IAAGpe,CAAC,CAACqe,kBAAkB,CAAC7d,CAAC,CAAC,EAAC,CAAC4C,CAAC,CAAC5C,CAAC,CAACyC,IAAI,CAAC,EAAC,OAAO,KAAK,IAAI,CAACya,gBAAgB,CAAC3d,CAAC,CAAC;IAAC,MAAMa,CAAC,GAAC,IAAI,CAAC0d,iBAAiB,CAACve,CAAC,CAAC;IAAC,IAAGe,CAAC,CAACF,CAAC,CAAC,EAAC,OAAO,KAAK,IAAI,CAAC8c,gBAAgB,CAAC3d,CAAC,CAAC;IAAC,MAAMiB,CAAC,GAAChB,CAAC,CAAC6R,aAAa;IAAC,KAAI,MAAMnR,CAAC,IAAIF,CAAC,CAAC4d,kBAAkB,EAAC1d,CAAC,EAAE;IAAC,IAAGM,CAAC,KAAGhB,CAAC,CAAC6R,aAAa,IAAE,IAAI,CAAC0M,uBAAuB,EAAE,EAAC7d,CAAC,CAACb,CAAC,CAAC,EAAC,KAAI,MAAMa,CAAC,IAAIF,CAAC,CAAC2d,wBAAwB,EAACzd,CAAC,CAACb,CAAC,EAACe,CAAC,CAAC;IAAC,IAAI,CAACsd,oBAAoB,CAACje,CAAC,CAACyP,EAAE,EAACvP,CAAC,CAAC;EAAA;EAACkd,4BAA4BA,CAACxd,CAAC,EAAC;IAAC,IAAI,CAACub,qBAAqB,CAACvb,CAAC,CAAC,KAAG,IAAI,CAACkS,QAAQ,IAAE,IAAI,CAAChI,KAAK,CAACC,IAAI,CAACyK,OAAO,CAAC+J,QAAQ,EAAE,EAAC,IAAI,CAACzU,KAAK,CAACC,IAAI,CAACwK,YAAY,CAACgK,QAAQ,EAAE,CAAC;EAAA;EAAChB,8BAA8BA,CAAC3d,CAAC,EAACC,CAAC,EAAC,CAAC;EAAC2e,gBAAgBA,CAAC5e,CAAC,EAAC;IAAC,IAAI,CAAC6R,qBAAqB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACgH,MAAM,CAAC7Y,CAAC,CAAC,EAAC,IAAI,CAACyW,GAAG,CAACzW,CAAC,CAAC,EAAC,IAAI,CAAC6R,qBAAqB,GAAC,CAAC,CAAC,EAAC,IAAI,CAAC1G,qBAAqB,KAAGzC,EAAE,CAACwK,IAAI,IAAE,IAAI,CAAC2L,eAAe,EAAE;EAAA;EAAChB,gBAAgBA,CAAC7d,CAAC,EAAC;IAAC,IAAI,CAAC4e,gBAAgB,CAAC,CAAC5e,CAAC,CAAC,CAAC;EAAA;EAAC8e,mBAAmBA,CAAC9e,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAAC0R,iBAAiB;IAAC,OAAO,IAAI,CAACA,iBAAiB,EAAE,EAAC,IAAI,CAACrF,yBAAyB,CAAC+D,GAAG,CAACrQ,CAAC,CAACiV,GAAG,EAAChV,CAAC,CAAC,EAAC,CAAC,KAAG,IAAI,CAACqM,yBAAyB,CAACC,IAAI,IAAE,IAAI,CAAC8L,YAAY,CAAC,UAAU,CAAC,EAACpY,CAAC;EAAA;EAAC8e,iBAAiBA,CAAC/e,CAAC,EAAC;IAACA,CAAC,KAAG,IAAI,CAACsM,yBAAyB,CAACgP,MAAM,CAACtb,CAAC,CAACiV,GAAG,CAAC,EAAC,CAAC,KAAG,IAAI,CAAC3I,yBAAyB,CAACC,IAAI,KAAG,IAAI,CAACsS,eAAe,EAAE,EAAC,IAAI,CAACxG,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC;EAAA;EAACqG,uBAAuBA,CAAA,EAAE;IAAC,IAAI1e,CAAC,GAAC,CAAC;IAAC,IAAI,CAAC2Q,QAAQ,CAACE,OAAO,CAAE5Q,CAAC,IAAE;MAACY,CAAC,CAACZ,CAAC,CAAC,KAAGD,CAAC,GAAC2N,IAAI,CAACC,GAAG,CAAC5N,CAAC,EAACC,CAAC,CAAC+R,aAAa,CAAC,CAAC;IAAA,CAAC,CAAE,EAAC,IAAI,CAAC+G,IAAI,CAAC,eAAe,EAAC/Y,CAAC,CAAC;EAAA;EAACme,qBAAqBA,CAACne,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC2J,EAAE;MAAC1J,CAAC,GAACF,CAAC,CAACoK,gBAAgB;IAAClF,CAAC,CAAClF,CAAC,EAACC,CAAC,CAAC;IAAC,MAAME,CAAC,GAAC,IAAI,CAAC8J,qBAAqB;MAAC7J,CAAC,GAACsJ,EAAE,CAACsV,MAAM;IAAC,IAAGna,CAAC,CAAC3E,CAAC,EAACC,CAAC,CAAC,IAAE4D,CAAC,CAAC9D,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,EAACC,CAAC,EAACE,CAAC,EAACD,CAAC,CAAC,KAAGF,CAAC,CAAC,CAAC,CAAC,GAACG,CAAC,CAAC,CAAC,CAAC,EAACH,CAAC,CAAC,CAAC,CAAC,GAACG,CAAC,CAAC,CAAC,CAAC,EAAC2D,CAAC,CAAC9D,CAAC,CAAC,CAAC,CAAC,EAACA,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,EAACC,CAAC,EAACE,CAAC,EAACD,CAAC,CAAC,EAACF,CAAC,CAAC,CAAC,CAAC,GAACG,CAAC,CAAC,CAAC,CAAC,EAACH,CAAC,CAAC,CAAC,CAAC,GAACG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,EAAE6e,QAAQ,CAAChf,CAAC,CAAC,CAAC,CAAC,CAAC,IAAEgf,QAAQ,CAAChf,CAAC,CAAC,CAAC,CAAC,CAAC,IAAEgf,QAAQ,CAAChf,CAAC,CAAC,CAAC,CAAC,CAAC,IAAEgf,QAAQ,CAAChf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;IAAO,MAAMK,CAAC,GAAC,IAAI,CAAC2Q,cAAc;IAAC,IAAI1Q,CAAC,GAAC,IAAI;IAAC,MAAME,CAAC,GAACwe,QAAQ,CAAChf,CAAC,CAAC,CAAC,CAAC,CAAC,IAAEgf,QAAQ,CAAChf,CAAC,CAAC,CAAC,CAAC,CAAC;MAACU,CAAC,GAACF,CAAC,KAAG,CAACH,CAAC,IAAE,IAAI,IAAEA,CAAC,CAAC4e,IAAI,IAAEjf,CAAC,CAAC,CAAC,CAAC,GAACK,CAAC,CAAC4e,IAAI,CAAC;MAACre,CAAC,GAACJ,CAAC,KAAG,CAACH,CAAC,IAAE,IAAI,IAAEA,CAAC,CAAC6e,IAAI,IAAElf,CAAC,CAAC,CAAC,CAAC,GAACK,CAAC,CAAC6e,IAAI,CAAC;IAAC,IAAG7e,CAAC,EAAC;MAAC,CAACL,CAAC,CAAC,CAAC,CAAC,GAACK,CAAC,CAAC8e,IAAI,IAAEnf,CAAC,CAAC,CAAC,CAAC,GAACK,CAAC,CAAC+e,IAAI,IAAEpf,CAAC,CAAC,CAAC,CAAC,GAACK,CAAC,CAACgf,IAAI,IAAErf,CAAC,CAAC,CAAC,CAAC,GAACK,CAAC,CAACif,IAAI,IAAE5e,CAAC,IAAEE,CAAC,MAAIN,CAAC,GAAC,IAAI,CAACyQ,eAAe,CAAC1P,GAAG,CAAC,gBAAgB,CAAC,EAACf,CAAC,CAAC6e,IAAI,GAACzR,IAAI,CAACK,GAAG,CAAC/N,CAAC,CAAC,CAAC,CAAC,EAACK,CAAC,CAAC8e,IAAI,CAAC,EAAC7e,CAAC,CAAC8e,IAAI,GAAC1R,IAAI,CAACK,GAAG,CAAC/N,CAAC,CAAC,CAAC,CAAC,EAACK,CAAC,CAAC+e,IAAI,CAAC,EAAC9e,CAAC,CAAC+e,IAAI,GAAC3R,IAAI,CAACC,GAAG,CAAC3N,CAAC,CAAC,CAAC,CAAC,EAACK,CAAC,CAACgf,IAAI,CAAC,EAAC/e,CAAC,CAACgf,IAAI,GAAC5R,IAAI,CAACC,GAAG,CAAC3N,CAAC,CAAC,CAAC,CAAC,EAACK,CAAC,CAACif,IAAI,CAAC,EAAChf,CAAC,CAAC6J,gBAAgB,GAACjK,CAAC,CAAC;IAAA,CAAC,MAAKI,CAAC,GAAC,IAAI,CAACyQ,eAAe,CAAC1P,GAAG,CAAC,gBAAgB,CAAC,EAACf,CAAC,CAAC6e,IAAI,GAACnf,CAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAAC8e,IAAI,GAACpf,CAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAAC+e,IAAI,GAACrf,CAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAACgf,IAAI,GAACtf,CAAC,CAAC,CAAC,CAAC,EAACM,CAAC,CAAC6J,gBAAgB,GAACjK,CAAC;IAACI,CAAC,KAAGI,CAAC,KAAGJ,CAAC,CAAC2e,IAAI,GAACjf,CAAC,CAAC,CAAC,CAAC,CAAC,EAACY,CAAC,KAAGN,CAAC,CAAC4e,IAAI,GAAClf,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAAC8Y,IAAI,CAAC,gBAAgB,EAACxY,CAAC,CAAC,CAAC;EAAA;EAACqY,yBAAyBA,CAAA,EAAE;IAAC,IAAI,CAAClM,mCAAmC,KAAG,IAAI,CAACA,mCAAmC,CAAC+L,KAAK,EAAE,EAAC,IAAI,CAAC/L,mCAAmC,GAAC,IAAI,CAAC;EAAA;EAAC,MAAM8S,mBAAmBA,CAAA,EAAE;IAAC,IAAI,CAAC5G,yBAAyB,EAAE;IAAC,MAAM5Y,CAAC,GAAC,IAAI6U,eAAe;IAAC,IAAI,CAACnI,mCAAmC,GAAC1M,CAAC;IAAC,MAAMC,CAAC,GAACuG,EAAE,CAAC,IAAI,CAACgE,KAAK,CAACsL,aAAa,EAAC,IAAI,CAAC3C,iCAAiC,CAAC;IAAC,IAAI,CAACK,qBAAqB,CAACuC,4BAA4B,GAAC,MAAMrP,EAAE,CAACzG,CAAC,EAAC,IAAI,CAACgK,qBAAqB,EAACjK,CAAC,CAAC+U,MAAM,EAACjL,EAAE,CAAC,EAAC/J,CAAC,CAACC,CAAC,CAAC+U,MAAM,CAAC,EAAC,IAAI,CAACrI,mCAAmC,GAAC,IAAI,EAAC,IAAI,CAACwF,QAAQ,EAAEsN,mBAAmB,EAAE,EAAC,IAAI,CAACC,uBAAuB,CAAE,CAACzf,CAAC,EAACC,CAAC,EAACC,CAAC,KAAG;MAACF,CAAC,CAAC0f,qBAAqB,CAAC,eAAe,EAACzf,CAAC,CAAC,GAACA,CAAC,CAAC4Q,OAAO,CAAE7Q,CAAC,IAAE;QAAC,MAAMC,CAAC,GAACD,CAAC,CAACsU,OAAO;UAACpU,CAAC,GAACF,CAAC,CAAC2f,WAAW;QAAC,KAAI,MAAMxf,CAAC,IAAID,CAAC,EAAC;UAACC,CAAC,CAACyf,qBAAqB,CAACC,6BAA6B,CAAC5f,CAAC,EAACE,CAAC,CAAC;QAAA;MAAC,CAAC,CAAE,GAAC,IAAI,CAAC2f,eAAe,CAAC5f,CAAC,CAAC;IAAA,CAAC,CAAE,EAAC,IAAI,CAAC6f,iCAAiC,EAAE,EAAC,IAAI,CAAC/T,mBAAmB,EAAEwT,mBAAmB,EAAE;EAAA;EAACO,iCAAiCA,CAAA,EAAE;IAAC,IAAI,CAAC3N,4BAA4B,GAAC,CAAC,IAAI,CAAC5H,KAAK,CAACsL,aAAa,IAAE,mBAAmB,KAAG,IAAI,CAACtL,KAAK,CAACsL,aAAa,CAACkK,IAAI,IAAE,CAAC,KAAG,IAAI,CAACzN,mCAAmC,MAAI,IAAI,CAACrI,KAAK,CAACC,IAAI,CAACwL,iBAAiB,CAACsK,UAAU,CAAC,IAAI,CAAC7N,4BAA4B,CAAC,EAAC,IAAI,CAACA,4BAA4B,GAAC3Q,CAAC,CAAC,IAAI,CAAC2Q,4BAA4B,CAAC,CAAC,GAAC,CAAC,CAAC,IAAI,CAAC5H,KAAK,CAACsL,aAAa,IAAE,IAAI,CAACtL,KAAK,CAACsL,aAAa,IAAE,mBAAmB,KAAG,IAAI,CAACtL,KAAK,CAACsL,aAAa,CAACkK,IAAI,KAAG,IAAI,CAACzN,mCAAmC,GAAC,CAAC,KAAG,IAAI,CAACH,4BAA4B,GAAC,IAAIlK,EAAE,CAAC;MAACsC,KAAK,EAAC,IAAI,CAACA,KAAK;MAAC6G,UAAU,EAAC,IAAI,CAACA,UAAU;MAAClH,IAAI,EAAC,IAAI,CAACD,KAAK,CAACC;IAAI,CAAC,CAAC,EAAC,IAAI,CAACD,KAAK,CAACC,IAAI,CAACwL,iBAAiB,CAACuK,QAAQ,CAAC,OAAO,EAAC,IAAI,CAAC9N,4BAA4B,CAAC,CAAC;EAAA;EAAC+N,wBAAwBA,CAAA,EAAE;IAAC,IAAI,CAACtN,KAAK,EAAE,EAAChS,CAAC,CAAC,IAAI,CAACuL,iBAAiB,CAAC,IAAE,IAAI,CAACA,iBAAiB,CAACyG,KAAK,EAAE,EAAC,IAAI,CAACX,QAAQ,EAAE2E,KAAK,EAAE,EAAC,IAAI,CAAC5E,aAAa,EAAEY,KAAK,EAAE,EAAC,IAAI,CAAC7G,mBAAmB,EAAE6G,KAAK,EAAE,EAAC,IAAI,CAACxB,UAAU,EAAE+O,iCAAiC,EAAE,EAAC,IAAI,CAAChO,4BAA4B,KAAG,IAAI,CAAClI,KAAK,CAACC,IAAI,CAACwL,iBAAiB,CAACsK,UAAU,CAAC,IAAI,CAAC7N,4BAA4B,CAAC,EAAC,IAAI,CAACA,4BAA4B,GAAC3Q,CAAC,CAAC,IAAI,CAAC2Q,4BAA4B,CAAC,CAAC;EAAA;EAACiO,mBAAmBA,CAAA,EAAE;IAAC,IAAI,CAAC9M,oBAAoB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACiE,mBAAmB,EAAE;EAAA;EAACA,mBAAmBA,CAAA,EAAE;IAAC,IAAI,CAAC8I,oBAAoB,CAAC,CAAC,CAAC,CAAC;EAAA;EAACxJ,6BAA6BA,CAAA,EAAE;IAAC,IAAI,CAACwJ,oBAAoB,CAAC,CAAC,CAAC,CAAC;EAAA;EAACA,oBAAoBA,CAAA,EAAM;IAAA,IAALtgB,CAAC,GAAAoa,SAAA,CAAA5J,MAAA,QAAA4J,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,CAAC,CAAC;IAAE,IAAG,CAAC,IAAI,CAAC7G,oBAAoB,EAAC;IAAO,MAAK;QAACkE,cAAc,EAACxX,CAAC;QAACkK,IAAI,EAACjK;MAAC,CAAC,GAAC,IAAI,CAACgK,KAAK;MAAC/J,CAAC,GAACD,CAAC,CAACoW,cAAc,CAACe,YAAY,IAAEpX,CAAC,IAAEA,CAAC,CAACuQ,MAAM,GAACvQ,CAAC,CAACsgB,OAAO,EAAE,GAAC,IAAI;IAAC,CAACvgB,CAAC,IAAEG,CAAC,IAAE,IAAI,CAACggB,wBAAwB,EAAE,EAAC,IAAI,CAAC3M,qBAAqB,CAACwC,4BAA4B,GAAC,IAAI,CAAC9L,KAAK,CAACC,IAAI,CAAC6L,4BAA4B,IAAE,CAAC,CAAC,IAAI,CAACxL,KAAK,CAACwL,4BAA4B,EAAC,IAAI,CAACxC,qBAAqB,CAACyC,iBAAiB,GAAC,CAAC,CAAC,IAAI,CAAC/L,KAAK,CAAC+L,iBAAiB,EAAC,IAAI,CAAC8C,IAAI,CAAC,gBAAgB,EAAC,IAAI,CAAC,EAAC5Y,CAAC,KAAGH,CAAC,GAAC,IAAI,CAACyW,GAAG,CAACtW,CAAC,CAAC,GAAC,IAAI,CAACye,gBAAgB,CAACze,CAAC,CAAC,CAAC;EAAA;EAAC2f,eAAeA,CAAC9f,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACwR,iBAAiB,CAACnQ,GAAG,CAACtB,CAAC,CAAC;MAACE,CAAC,GAAC,EAAE;IAACD,CAAC,KAAGA,CAAC,CAAC4Q,OAAO,CAAE,CAAC7Q,CAAC,EAACC,CAAC,KAAG;MAAC,MAAME,CAAC,GAACH,CAAC,CAAC0O,UAAU;MAAC,IAAI,CAAC8R,kBAAkB,CAACxgB,CAAC,EAACC,CAAC,CAAC,EAAC,IAAI,CAACqK,aAAa,EAAEuO,MAAM,CAAC7Y,CAAC,CAAC,EAACE,CAAC,CAACwQ,IAAI,CAAC1Q,CAAC,CAACsU,OAAO,CAAC,EAACtU,CAAC,CAAC0Y,OAAO,EAAE,EAAC,IAAI,CAAC+H,wBAAwB,CAACxgB,CAAC,EAACE,CAAC,CAAC,EAAC,IAAI,CAACyW,sBAAsB,EAAE,EAAC,IAAI,CAAClL,aAAa,CAACwN,MAAM,CAACC,IAAI,CAAC,SAAS,CAAC;IAAA,CAAC,CAAE,EAAC,IAAI,CAAC1H,iBAAiB,CAACpB,GAAG,CAACrQ,CAAC,EAAC,IAAIoR,GAAG,GAAC,CAAC;IAAC,MAAMjR,CAAC,GAAC,IAAI,CAACwQ,QAAQ,CAACrP,GAAG,CAACtB,CAAC,CAAC;IAACmB,CAAC,CAAChB,CAAC,CAAC,EAAC,IAAI,CAACwQ,QAAQ,CAAC2K,MAAM,CAACtb,CAAC,CAAC,EAAC,IAAI,CAACyW,GAAG,CAACvW,CAAC,CAAC;EAAA;EAACwgB,0BAA0BA,CAAC1gB,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACwR,iBAAiB,CAACnQ,GAAG,CAACtB,CAAC,CAAC;IAAC,IAAGC,CAAC,EAAC;MAAC,MAAMD,CAAC,GAAC,EAAE;MAACC,CAAC,CAAC4Q,OAAO,CAAE5Q,CAAC,IAAED,CAAC,CAAC0Q,IAAI,CAACzQ,CAAC,CAACqU,OAAO,CAAC,CAAE,EAAC,IAAI,CAACsK,gBAAgB,CAAC5e,CAAC,CAAC;IAAA;EAAC;EAACwgB,kBAAkBA,CAACxgB,CAAC,EAACC,CAAC,EAAC;IAAC,IAAI,CAACsR,mBAAmB,CAAC+J,MAAM,CAACrb,CAAC,CAAC,EAAC,IAAI,CAACiM,aAAa,EAAEyU,aAAa,CAAC3gB,CAAC,CAAC,EAAC,IAAI,CAACkS,QAAQ,EAAEyO,aAAa,CAAC3gB,CAAC,CAAC,EAAC,IAAI,CAACiS,aAAa,EAAE0O,aAAa,CAAC3gB,CAAC,CAAC,EAACa,CAAC,CAAC,IAAI,CAACsQ,qBAAqB,CAAC,IAAE,IAAI,CAACA,qBAAqB,CAACwP,aAAa,CAAC3gB,CAAC,CAAC;EAAA;EAACyW,GAAGA,CAACzW,CAAC,EAAC;IAACA,CAAC,IAAE,CAAC,KAAGA,CAAC,CAACwQ,MAAM,KAAG,IAAI,CAACtG,KAAK,CAACC,IAAI,CAACmM,cAAc,IAAE,IAAI,CAACpM,KAAK,CAACC,IAAI,CAACmM,cAAc,CAACe,YAAY,IAAE,IAAI,CAACuJ,wBAAwB,CAAC5gB,CAAC,CAAC,KAAG0I,EAAE,CAAC4C,KAAK,GAAC,IAAI,CAACuV,WAAW,CAAC7gB,CAAC,CAAC,GAAC,IAAI,CAAC8gB,aAAa,CAAC9gB,CAAC,CAAC,EAAC,IAAI,CAACqY,YAAY,CAAC,UAAU,CAAC,IAAEvO,EAAE,CAACqG,KAAK,CAAC,QAAQ,EAAC,iEAAiE,CAAC,CAAC;EAAA;EAACyQ,wBAAwBA,CAAC5gB,CAAC,EAAC;IAAC,IAAG,IAAI,CAACmL,qBAAqB,KAAGzC,EAAE,CAACwK,IAAI,KAAG,MAAM,KAAG,IAAI,CAAC1I,KAAK,CAACsF,YAAY,IAAE,IAAI,IAAE,IAAI,CAACtF,KAAK,CAACsF,YAAY,CAAC,EAAC,KAAI,MAAM7P,CAAC,IAAID,CAAC,EAAC,IAAGa,CAAC,CAACZ,CAAC,CAAC2d,QAAQ,CAAC,IAAE,MAAM,KAAG3d,CAAC,CAAC2d,QAAQ,CAACvS,IAAI,IAAE,CAACpL,CAAC,CAAC2d,QAAQ,CAACmD,MAAM,EAAC,OAAOrY,EAAE,CAAC4C,KAAK;IAAC,OAAO,IAAI,CAACH,qBAAqB;EAAA;EAAC2V,aAAaA,CAAC9gB,CAAC,EAAC;IAAC,IAAI,CAAC+S,sBAAsB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACD,oBAAoB,GAAC,CAAC,CAAC;IAAC,KAAI,MAAM7S,CAAC,IAAID,CAAC,EAAC,IAAI,CAACghB,WAAW,CAAC/gB,CAAC,EAAC,IAAI,CAACwe,iBAAiB,CAACxe,CAAC,EAAC6J,EAAE,CAAC,EAACpB,EAAE,CAACwK,IAAI,CAAC;IAAC,IAAI,CAAC2L,eAAe,EAAE,EAAC,IAAI,CAAC3M,QAAQ,KAAG,IAAI,CAAChI,KAAK,CAACC,IAAI,CAACyK,OAAO,CAAC+J,QAAQ,EAAE,EAAC,IAAI,CAACE,eAAe,EAAE,CAAC,EAAC,IAAI,CAAC3U,KAAK,CAACC,IAAI,CAACwK,YAAY,CAACgK,QAAQ,EAAE;EAAA;EAACkC,WAAWA,CAAC7gB,CAAC,EAAC;IAAC,KAAI,MAAMC,CAAC,IAAID,CAAC,EAAC;MAAC,MAAMA,CAAC,GAACC,CAAC,CAACgV,GAAG;MAAC,IAAI/U,CAAC,GAAC,IAAI,CAAC4M,eAAe,CAACxL,GAAG,CAACtB,CAAC,CAAC;MAACE,CAAC,GAACA,CAAC,CAACuW,GAAG,GAACvW,CAAC,CAAC8W,KAAK,KAAGiK,EAAE,CAACC,GAAG,IAAEhhB,CAAC,CAACihB,eAAe,EAAE1I,KAAK,EAAE,GAAC,IAAI,CAACtJ,YAAY,EAAE,IAAEjP,CAAC,GAAC,IAAI,CAACuS,mBAAmB,CAAC2O,OAAO,EAAE,EAAC,IAAI,CAACjS,YAAY,EAAE,EAAC,IAAI,CAACrC,eAAe,CAACuD,GAAG,CAACrQ,CAAC,EAACE,CAAC,CAAC,CAAC,EAACA,CAAC,CAACuW,GAAG,GAACxW,CAAC;IAAA;IAAC,IAAI,CAACoY,YAAY,CAAC,SAAS,CAAC,EAAC,IAAI,CAACA,YAAY,CAAC,mBAAmB,CAAC;EAAA;EAACQ,MAAMA,CAAC7Y,CAAC,EAAC;IAAC,IAAI,CAACmL,qBAAqB,KAAGzC,EAAE,CAAC4C,KAAK,GAAC,IAAI,CAAC+V,cAAc,CAACrhB,CAAC,CAAC,GAAC,IAAI,CAACshB,gBAAgB,CAACthB,CAAC,CAAC,EAAC,IAAI,CAACqY,YAAY,CAAC,UAAU,CAAC;EAAA;EAACiJ,gBAAgBA,CAACthB,CAAC,EAAC;IAAC,KAAI,MAAMC,CAAC,IAAID,CAAC,EAAC,IAAI,CAACuhB,cAAc,CAACthB,CAAC,CAAC;IAAC,IAAI,CAAC4e,eAAe,EAAE,EAAC,IAAI,CAAC3M,QAAQ,IAAE,IAAI,CAAChI,KAAK,CAACC,IAAI,CAACyK,OAAO,CAAC+J,QAAQ,EAAE,EAAC,IAAI,CAACzU,KAAK,CAACC,IAAI,CAACwK,YAAY,CAACgK,QAAQ,EAAE;EAAA;EAAC0C,cAAcA,CAACrhB,CAAC,EAAC;IAAC,KAAI,MAAMC,CAAC,IAAID,CAAC,EAAC;MAAC,MAAMA,CAAC,GAACC,CAAC,CAACgV,GAAG;QAAC/U,CAAC,GAAC,IAAI,CAAC4M,eAAe,CAACxL,GAAG,CAACtB,CAAC,CAAC;MAAC,IAAGE,CAAC,EAACA,CAAC,CAACuW,GAAG,KAAGvW,CAAC,CAAC2Y,MAAM,GAAC3Y,CAAC,CAACuW,GAAG,GAAC,IAAI,GAAC,IAAI,CAAC3J,eAAe,CAACwO,MAAM,CAACtb,CAAC,CAAC,EAACE,CAAC,CAAC8W,KAAK,KAAGiK,EAAE,CAAClD,OAAO,IAAE7d,CAAC,CAACihB,eAAe,EAAE1I,KAAK,EAAE,EAAC,IAAI,CAACtJ,YAAY,EAAE,CAAC,CAAC,KAAI;QAAC,MAAMjP,CAAC,GAAC,IAAI,CAACuS,mBAAmB,CAAC2O,OAAO,EAAE;QAAClhB,CAAC,CAAC2Y,MAAM,GAAC5Y,CAAC,EAAC,IAAI,CAAC6M,eAAe,CAACuD,GAAG,CAACrQ,CAAC,EAACE,CAAC,CAAC,EAAC,IAAI,CAACkP,eAAe,EAAE,EAAC,IAAI,CAACoD,yBAAyB,GAAC,CAAC,CAAC;MAAA;IAAC;IAAC,CAAC,KAAG,IAAI,CAAC1F,eAAe,CAACP,IAAI,IAAE,IAAI,CAACiV,qBAAqB,EAAE,EAAC,IAAI,CAACnJ,YAAY,CAAC,SAAS,CAAC,EAAC,IAAI,CAACA,YAAY,CAAC,mBAAmB,CAAC;EAAA;EAACmJ,qBAAqBA,CAAA,EAAE;IAAC,IAAI,CAAC/O,mBAAmB,CAACI,KAAK,EAAE,EAAC,IAAI,CAACgM,eAAe,EAAE,EAAC,CAAC,IAAI,CAAC1P,YAAY,IAAE,IAAI,CAACC,eAAe,KAAGtF,EAAE,CAAC2X,IAAI,CAAC,4CAA4C,CAAC,EAAC,IAAI,CAACtS,YAAY,GAAC,CAAC,EAAC,IAAI,CAACC,eAAe,GAAC,CAAC,EAAC,IAAI,CAACoD,yBAAyB,GAAC,CAAC,CAAC;EAAA;EAAC0I,oBAAoBA,CAAClb,CAAC,EAAC;IAAC,IAAG,IAAI,CAAC+S,sBAAsB,GAAC,CAAC,CAAC,EAAC,IAAI,CAACD,oBAAoB,GAAC,CAAC,CAAC,EAAC,CAAC,KAAG,IAAI,CAAChG,eAAe,CAACP,IAAI,IAAE,IAAI,CAACjC,aAAa,EAAE+B,QAAQ,EAAC,OAAO,IAAI,CAAC/B,aAAa,CAACU,MAAM,EAAE,EAAC,KAAKhL,CAAC,CAAC0hB,YAAY,EAAE;IAAC,IAAG,IAAI,CAAClP,yBAAyB,EAAC;MAAC,IAAI,CAACA,yBAAyB,GAAC,CAAC,CAAC;MAAC,KAAI,MAAK,CAACvS,CAAC,EAACC,CAAC,CAAC,IAAG,IAAI,CAAC4M,eAAe,EAAC;QAAC,IAAG9M,CAAC,CAAC2hB,IAAI,EAAC;UAAC,IAAI,CAACnP,yBAAyB,GAAC,CAAC,CAAC;UAAC;QAAK;QAAC,IAAGtS,CAAC,CAAC2Y,MAAM,IAAE,CAAC3Y,CAAC,CAACuW,GAAG,KAAG,IAAI,CAACrH,eAAe,EAAE,EAACpP,CAAC,CAAC0hB,YAAY,EAAE,EAAC,IAAI,CAACH,cAAc,CAACrhB,CAAC,CAAC2Y,MAAM,CAAC,EAAC3Y,CAAC,CAAC2Y,MAAM,GAAC,IAAI,EAAC,IAAI,CAAC/L,eAAe,CAACwO,MAAM,CAACrb,CAAC,CAAC,EAAC,CAAC,KAAG,IAAI,CAACmP,eAAe,CAAC,EAAC;MAAK;IAAC;IAAC,KAAI,MAAK,CAACnP,CAAC,EAACC,CAAC,CAAC,IAAG,IAAI,CAAC4M,eAAe,EAAC;MAAC,IAAG9M,CAAC,CAAC2hB,IAAI,EAAC;MAAMzhB,CAAC,CAACuW,GAAG,IAAEvW,CAAC,CAAC8W,KAAK,KAAGiK,EAAE,CAACC,GAAG,IAAE,IAAI,CAACU,wBAAwB,CAAC1hB,CAAC,CAAC;MAAC,IAAIC,CAAC,GAAC,IAAI,CAACgL,qBAAqB;MAAC,IAAG,CAACjL,CAAC,CAAC2Y,MAAM,IAAE3Y,CAAC,CAACuW,GAAG,IAAEvW,CAAC,CAAC8W,KAAK,KAAGiK,EAAE,CAACY,KAAK,KAAG,IAAI,CAACzS,eAAe,EAAE,EAACpP,CAAC,CAAC0hB,YAAY,EAAE,EAAC,IAAI,CAACH,cAAc,CAACrhB,CAAC,CAAC2Y,MAAM,CAAC,EAAC3Y,CAAC,CAAC2Y,MAAM,GAAC,IAAI,EAAC1Y,CAAC,GAACuI,EAAE,CAACwK,IAAI,CAAC,EAAChT,CAAC,CAACuW,GAAG,EAAC,QAAOvW,CAAC,CAAC8W,KAAK;QAAE,KAAKiK,EAAE,CAACY,KAAK;UAAC,IAAI,CAACb,WAAW,CAAC9gB,CAAC,CAACuW,GAAG,EAACvW,CAAC,CAAC4hB,aAAa,EAAC3hB,CAAC,CAAC,EAACD,CAAC,CAACuW,GAAG,GAAC,IAAI,EAAC,IAAI,CAACtH,YAAY,EAAE,EAACnP,CAAC,CAAC0hB,YAAY,EAAE;UAAC;QAAM,KAAKT,EAAE,CAACc,QAAQ;UAAC7hB,CAAC,CAACuW,GAAG,GAAC,IAAI,EAAC,IAAI,CAACtH,YAAY,EAAE;QAAC,KAAK8R,EAAE,CAAClD,OAAO;MAAC;MAAC,IAAI,IAAE7d,CAAC,CAAC2Y,MAAM,IAAE,IAAI,IAAE3Y,CAAC,CAACuW,GAAG,IAAE,IAAI,CAAC3J,eAAe,CAACwO,MAAM,CAACrb,CAAC,CAAC;IAAA;IAAC,CAAC,KAAG,IAAI,CAAC6M,eAAe,CAACP,IAAI,KAAG,IAAI,CAACiV,qBAAqB,EAAE,EAAC,IAAI,CAACnJ,YAAY,CAAC,SAAS,CAAC,CAAC;EAAA;EAACuJ,wBAAwBA,CAAC5hB,CAAC,EAAC;IAAC,IAAG,CAACA,CAAC,CAACyW,GAAG,EAAC,OAAO,MAAKzW,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAACY,KAAK,CAAC;IAAC,MAAM5hB,CAAC,GAACD,CAAC,CAACyW,GAAG,CAACmH,QAAQ;IAAC/c,CAAC,CAACZ,CAAC,CAAC,IAAE,MAAM,KAAGA,CAAC,CAACoL,IAAI,IAAE,CAACpL,CAAC,CAAC8gB,MAAM,GAAC,IAAI,CAACiB,4BAA4B,CAAChiB,CAAC,EAACC,CAAC,CAAC,GAAC,IAAI,CAACgiB,qCAAqC,CAACjiB,CAAC,CAAC;EAAA;EAAC,MAAMgiB,4BAA4BA,CAAChiB,CAAC,EAACC,CAAC,EAAC;IAACD,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAAClD,OAAO,EAAC/d,CAAC,CAACmhB,eAAe,GAAC,IAAItM,eAAe;IAAC,MAAM3U,CAAC,GAACF,CAAC,CAACmhB,eAAe,CAACpM,MAAM;IAAC,IAAG;MAAC,MAAM9U,CAAC,CAACiiB,IAAI,CAAC;QAACnN,MAAM,EAAC7U;MAAC,CAAC,CAAC;IAAA,CAAC,QAAMC,CAAC,EAAC;MAAC,OAAO,IAAI,CAACgiB,6BAA6B,CAACniB,CAAC,EAACG,CAAC,CAAC;IAAA;IAACH,CAAC,CAACmhB,eAAe,GAAC,IAAI,EAAC,IAAI,CAACc,qCAAqC,CAACjiB,CAAC,CAAC;EAAA;EAACmiB,6BAA6BA,CAACniB,CAAC,EAACC,CAAC,EAAC;IAACD,CAAC,CAACmhB,eAAe,GAAC,IAAI,EAAChf,CAAC,CAAClC,CAAC,CAAC,GAACD,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAACC,GAAG,GAAClhB,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAACc,QAAQ;EAAA;EAAC,MAAME,qCAAqCA,CAACjiB,CAAC,EAAC;IAAC,IAAGiB,CAAC,CAAC,IAAI,CAACuJ,KAAK,CAAC6K,QAAQ,CAAC,IAAE,YAAY,KAAG,IAAI,CAAC7K,KAAK,CAAC6K,QAAQ,CAAChK,IAAI,EAAC,OAAOrL,CAAC,CAAC8hB,aAAa,GAAC,IAAI,CAACrD,iBAAiB,CAACze,CAAC,CAACyW,GAAG,EAAC3M,EAAE,CAAC,EAAC,MAAK9J,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAACY,KAAK,CAAC;IAAC7hB,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAAClD,OAAO,EAAC/d,CAAC,CAACmhB,eAAe,GAAC,IAAItM,eAAe;IAAC,IAAI5U,CAAC,GAAC,IAAI;IAAC,IAAG;MAACA,CAAC,GAAC,MAAM,IAAI,CAACmiB,sBAAsB,CAACpiB,CAAC,CAACyW,GAAG,EAAC;QAAC1B,MAAM,EAAC/U,CAAC,CAACmhB,eAAe,CAACpM;MAAM,CAAC,CAAC;IAAA,CAAC,QAAM7U,CAAC,EAAC;MAAC,OAAOF,CAAC,CAACmhB,eAAe,GAAC,IAAI,EAAC,MAAKhf,CAAC,CAACjC,CAAC,CAAC,GAACF,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAACC,GAAG,GAAClhB,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAACc,QAAQ,CAAC;IAAA;IAAC9gB,CAAC,CAAChB,CAAC,CAAC,IAAEgB,CAAC,CAAChB,CAAC,CAACiQ,MAAM,CAAC,IAAEpG,EAAE,IAAE,CAAC,IAAI,CAACgJ,oBAAoB,KAAG,IAAI,CAACA,oBAAoB,GAAC,CAAC,CAAC,EAAChJ,EAAE,CAAC2X,IAAI,CAAE,oBAAmB,IAAI,CAACjX,KAAK,CAACqF,EAAG,oCAAmC,CAAC,CAAC,EAAC7P,CAAC,CAAC8hB,aAAa,GAAC,IAAI,IAAE9hB,CAAC,CAAC8hB,aAAa,GAAC7hB,CAAC,EAACD,CAAC,CAACgX,KAAK,GAACiK,EAAE,CAACY,KAAK;EAAA;EAACb,WAAWA,CAAChhB,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAAC,IAAG,IAAI,CAACwR,sBAAsB,CAACrB,GAAG,CAACrQ,CAAC,CAACiV,GAAG,EAACjV,CAAC,CAAC,EAACiB,CAAC,CAAChB,CAAC,CAAC,IAAEgB,CAAC,CAAChB,CAAC,CAACiQ,MAAM,CAAC,IAAE,CAAC9K,CAAC,CAACpF,CAAC,CAAC,EAAC;IAAOa,CAAC,CAAC,IAAI,CAACyQ,KAAK,CAAC+Q,UAAU,CAACC,4BAA4B,CAAC,IAAE,IAAI,CAAChP,eAAe,IAAE,IAAI,CAAChC,KAAK,CAAC+Q,UAAU,CAACC,4BAA4B,CAACC,wBAAwB,CAACviB,CAAC,CAACwiB,QAAQ,EAACxiB,CAAC,CAACiV,GAAG,EAAC,IAAI,CAACzK,KAAK,CAACqF,EAAE,EAAC,IAAI,CAACrF,KAAK,CAACyK,GAAG,EAAC,CAAC,CAAC,IAAI,CAACzK,KAAK,CAACiY,YAAY,CAAC;IAAC,MAAMtiB,CAAC,GAACF,CAAC,CAACiQ,MAAM;MAAC9P,CAAC,GAAC,IAAI,CAACsiB,2BAA2B,CAACviB,CAAC,EAACF,CAAC,CAACoV,QAAQ,CAAC;IAAC,IAAGpU,CAAC,CAACb,CAAC,CAAC,EAAC;IAAO,IAAI,CAAC+d,qBAAqB,CAACne,CAAC,CAAC4d,QAAQ,CAAC;IAAC,MAAMtd,CAAC,GAAC,IAAI,CAACwe,mBAAmB,CAAC9e,CAAC,CAAC;MAACO,CAAC,GAAC,IAAIsG,EAAE,CAAC7G,CAAC,EAACC,CAAC,EAAC,IAAI,CAACuK,KAAK,CAAC;IAAC,IAAI/J,CAAC,GAAC,CAAC,CAAC;IAAC,MAAME,CAAC,GAACX,CAAC,IAAE;MAACA,CAAC,KAAGI,CAAC,CAAC8P,MAAM,CAACL,EAAE,KAAGpP,CAAC,GAAC,CAAC,CAAC,CAAC;IAAA,CAAC;IAAC,IAAI,CAACwS,kBAAkB,CAACvC,IAAI,CAAC/P,CAAC,CAAC;IAAC,MAAMI,CAAC,GAACA,CAAA,KAAI;QAAC,IAAG,EAAE,IAAI,CAAC8L,eAAe,EAAC,IAAI,CAAC8V,SAAS,EAAC;QAAO,IAAI,CAAC1P,kBAAkB,CAAC2P,eAAe,CAACjiB,CAAC,CAAC;QAAC,IAAG,IAAI,CAAC2L,yBAAyB,CAAChL,GAAG,CAACtB,CAAC,CAACiV,GAAG,CAAC,KAAG3U,CAAC,IAAEG,CAAC,IAAEL,CAAC,CAACuiB,SAAS,IAAE,IAAI,CAACvP,sBAAsB,IAAEpT,CAAC,CAACkQ,MAAM,IAAElQ,CAAC,CAACkQ,MAAM,CAACL,EAAE,KAAGzP,CAAC,CAAC8P,MAAM,CAACL,EAAE,EAAC,EAAEzP,CAAC,CAACyiB,UAAU,EAAC,IAAI,CAAChE,eAAe,EAAE,CAAC,KAAI;UAAC,MAAM5e,CAAC,GAAC,IAAI,CAAC6iB,wBAAwB,CAAC1iB,CAAC,EAACG,CAAC,CAAC;UAAC,IAAI,CAAC+J,aAAa,IAAEzJ,CAAC,CAACZ,CAAC,CAAC,IAAE,IAAI,CAACqK,aAAa,CAACmM,GAAG,CAACxW,CAAC,CAAC,EAAC,EAAEG,CAAC,CAACyiB,UAAU,EAAC,IAAI,CAAC9D,iBAAiB,CAAC/e,CAAC,CAAC;QAAA;QAAC,IAAI,CAAC0L,aAAa,CAACwN,MAAM,CAACC,IAAI,CAAC,SAAS,CAAC,EAAC,IAAI,CAACjH,QAAQ,IAAE,IAAI,CAAChI,KAAK,CAACC,IAAI,CAACyK,OAAO,CAAC+J,QAAQ,EAAE;MAAA,CAAC;MAACxd,CAAC,GAAClB,CAAC,IAAE;QAAC,EAAE,IAAI,CAAC4M,eAAe,EAAC,IAAI,CAAC8V,SAAS,KAAG,IAAI,CAAC1P,kBAAkB,CAAC2P,eAAe,CAACjiB,CAAC,CAAC,EAACF,CAAC,KAAG0B,CAAC,CAAClC,CAAC,CAAC,GAAC,IAAI,CAACwW,GAAG,CAAC,CAACzW,CAAC,CAAC,CAAC,GAACI,CAAC,CAACuiB,SAAS,IAAE,IAAI,CAAC5D,iBAAiB,CAAC/e,CAAC,CAAC,CAAC,CAAC;MAAA,CAAC;IAAC,EAAE,IAAI,CAAC6M,eAAe,EAAC3M,CAAC,KAAGwI,EAAE,CAAC4C,KAAK,GAAClL,CAAC,CAAC8hB,IAAI,CAAE,MAAI,IAAI,CAACtV,UAAU,CAAC9J,QAAQ,CAAC/B,CAAC,CAAC,EAAGf,CAAC,IAAE,IAAI,CAAC4M,UAAU,CAAC9J,QAAQ,CAAE,MAAI3B,CAAC,CAACnB,CAAC,CAAC,CAAE,CAAE,GAACI,CAAC,CAAC8hB,IAAI,CAACnhB,CAAC,EAACI,CAAC,CAAC;EAAA;EAACogB,cAAcA,CAACvhB,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACiV,GAAG;MAAC/U,CAAC,GAAC,IAAI,CAAC4K,kBAAkB,CAACxJ,GAAG,CAACrB,CAAC,CAAC;IAAC,IAAGC,CAAC,EAAC;MAACA,CAAC,CAAC8d,gBAAgB,CAAC+E,eAAe,CAAC7iB,CAAC,CAAC;MAAC,MAAMF,CAAC,GAACE,CAAC,CAACwO,UAAU;QAACvO,CAAC,GAACD,CAAC,CAAC8iB,iBAAiB;MAAC,IAAI,CAACxC,kBAAkB,CAACtgB,CAAC,EAACD,CAAC,CAAC,EAAC,IAAI,CAACqK,aAAa,EAAEuO,MAAM,CAAC3Y,CAAC,CAAC;MAAC,MAAME,CAAC,GAACF,CAAC,CAAC8d,gBAAgB,CAAC9N,MAAM,CAACL,EAAE;MAAC,IAAI,CAAC4B,iBAAiB,CAACnQ,GAAG,CAAClB,CAAC,CAAC,EAAEkb,MAAM,CAACrb,CAAC,CAAC,EAAC,IAAI,CAACyR,sBAAsB,CAAC4J,MAAM,CAACrb,CAAC,CAAC,EAAC,IAAI,CAACwgB,wBAAwB,CAACxgB,CAAC,EAACD,CAAC,EAACG,CAAC,CAAC,EAACD,CAAC,CAACwY,OAAO,EAAE,EAAC,IAAI,CAAChN,aAAa,CAACwN,MAAM,CAACC,IAAI,CAAC,SAAS,CAAC;IAAA,CAAC,MAAK,IAAI,CAACzH,sBAAsB,CAAC4J,MAAM,CAACrb,CAAC,CAAC,EAAC,IAAI,CAACqM,yBAAyB,CAACgP,MAAM,CAACrb,CAAC,CAAC,EAAC,CAAC,KAAG,IAAI,CAACqM,yBAAyB,CAACC,IAAI,KAAG,IAAI,CAACsS,eAAe,EAAE,EAAC,IAAI,CAACxG,YAAY,CAAC,UAAU,CAAC,CAAC;EAAA;EAACpI,mBAAmBA,CAACjQ,CAAC,EAAC;IAAC,IAAGA,CAAC,YAAYuJ,EAAE,IAAEvJ,CAAC,YAAYwJ,EAAE,EAAC;MAAC,MAAMvJ,CAAC,GAAC,IAAI,CAACuT,qBAAqB,CAAChJ,KAAK;MAAC,OAAM,CAAC,CAACvK,CAAC,CAACgjB,YAAY,IAAEhjB,CAAC,CAACgjB,YAAY,CAACC,IAAI,CAAEjjB,CAAC,IAAEA,CAAC,CAACiQ,MAAM,KAAGlQ,CAAC,CAAE;IAAA;IAAC,OAAM,CAAC,CAAC;EAAA;EAACmjB,8BAA8BA,CAACnjB,CAAC,EAAC;IAAC,OAAM,EAAEA,CAAC,YAAYuJ,EAAE,IAAE,CAAC,IAAI,CAAC0G,mBAAmB,CAACjQ,CAAC,CAAC,CAAC,KAAG8J,EAAE,CAACqG,KAAK,CAAC,iHAAiH,CAAC,EAAC,CAAC,CAAC,CAAC;EAAA;EAACsO,iBAAiBA,CAACze,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACF,CAAC,CAAC4d,QAAQ;IAAC,IAAG3c,CAAC,CAACf,CAAC,CAAC,EAAC,OAAOD,CAAC,IAAE,CAAC,IAAI,CAAC8S,sBAAsB,KAAG,IAAI,CAACA,sBAAsB,GAAC,CAAC,CAAC,EAAC9S,CAAC,CAACwhB,IAAI,CAAE,oBAAmB,IAAI,CAACjX,KAAK,CAACqF,EAAG,sCAAqC,CAAC,CAAC,EAAC,IAAI;IAAC,IAAG,CAAC5L,CAAC,CAAC/D,CAAC,CAACkK,gBAAgB,EAAC,IAAI,CAACH,qBAAqB,CAAC,EAAC,OAAOhK,CAAC,IAAE,CAAC,IAAI,CAAC8S,sBAAsB,KAAG,IAAI,CAACA,sBAAsB,GAAC,CAAC,CAAC,EAAC9S,CAAC,CAACwhB,IAAI,CAAE,oBAAmB,IAAI,CAACjX,KAAK,CAACqF,EAAG,yDAAwD,CAAC,CAAC,EAAC,IAAI;IAAC,IAAG,CAAC,IAAI,CAACuD,sBAAsB,IAAEvS,CAAC,CAACb,CAAC,CAACkQ,MAAM,CAAC,EAAC,OAAOjQ,CAAC,IAAE,CAAC,IAAI,CAAC6S,oBAAoB,KAAG,IAAI,CAACA,oBAAoB,GAAC,CAAC,CAAC,EAAC7S,CAAC,CAACwhB,IAAI,CAAE,oBAAmB,IAAI,CAACjX,KAAK,CAACqF,EAAG,0DAAyD,CAAC,CAAC,EAAC,IAAI;IAAC,MAAM1P,CAAC,GAAC,IAAI,CAAC+Q,6BAA6B,GAAC5L,CAAC,CAACtF,CAAC,EAAC,IAAI,CAACwK,KAAK,CAAC,GAACxK,CAAC;IAAC,IAAII,CAAC;IAAC,IAAG,IAAI,CAAC8J,KAAK,CAACkZ,gBAAgB,KAAG,IAAI,CAAC/P,+BAA+B,IAAExS,CAAC,CAAC,IAAI,CAACuK,eAAe,CAAC,CAAC,EAAChL,CAAC,GAAC,IAAI,CAAC8J,KAAK,CAACkZ,gBAAgB,CAACjjB,CAAC,EAAC,IAAI,CAACiL,eAAe,EAAC,IAAI,CAAC0G,eAAe,CAAC,CAAC,KAAI;MAAC1R,CAAC,GAAC;QAAC8P,MAAM,EAAC/P,CAAC,CAAC+P,MAAM,IAAEpK,EAAE,CAAC3F,CAAC,CAACyd,QAAQ;MAAC,CAAC;IAAA;IAAC,OAAO3c,CAAC,CAACb,CAAC,CAAC,IAAEa,CAAC,CAACb,CAAC,CAAC8P,MAAM,CAAC,IAAEjQ,CAAC,IAAE,CAAC,IAAI,CAAC6S,oBAAoB,KAAG,IAAI,CAACA,oBAAoB,GAAC,CAAC,CAAC,EAAC7S,CAAC,CAACwhB,IAAI,CAAE,oBAAmB,IAAI,CAACjX,KAAK,CAACqF,EAAG,oCAAmC,CAAC,CAAC,EAAC,IAAI,IAAEzP,CAAC;EAAA;EAACgiB,sBAAsBA,CAACpiB,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACF,CAAC,CAAC4d,QAAQ;IAAC,IAAG3c,CAAC,CAACf,CAAC,CAAC,EAAC,OAAO4J,EAAE,IAAE,CAAC,IAAI,CAACiJ,sBAAsB,KAAG,IAAI,CAACA,sBAAsB,GAAC,CAAC,CAAC,EAACjJ,EAAE,CAAC2X,IAAI,CAAE,oBAAmB,IAAI,CAACjX,KAAK,CAACqF,EAAG,sCAAqC,CAAC,CAAC,EAAC,IAAI;IAAC,IAAG,CAAC,IAAI,CAACuD,sBAAsB,IAAEvS,CAAC,CAACb,CAAC,CAACkQ,MAAM,CAAC,EAAC,OAAOpG,EAAE,IAAE,CAAC,IAAI,CAACgJ,oBAAoB,KAAG,IAAI,CAACA,oBAAoB,GAAC,CAAC,CAAC,EAAChJ,EAAE,CAAC2X,IAAI,CAAE,oBAAmB,IAAI,CAACjX,KAAK,CAACqF,EAAG,0DAAyD,CAAC,CAAC,EAAC,IAAI;IAAC,MAAM1P,CAAC,GAAC,IAAI,CAAC+Q,6BAA6B,GAAC5L,CAAC,CAACtF,CAAC,EAAC,IAAI,CAACwK,KAAK,CAAC,GAACxK,CAAC;IAAC,OAAO,IAAI,CAACkK,KAAK,CAACmZ,qBAAqB,CAACljB,CAAC,EAAC,IAAI,CAACiL,eAAe,EAAC,IAAI,CAAC0G,eAAe,EAAC7R,CAAC,CAAC;EAAA;EAACqjB,uBAAuBA,CAACtjB,CAAC,EAACC,CAAC,EAAC;IAAC,IAAG,CAAC,IAAI,CAACkjB,8BAA8B,CAACnjB,CAAC,CAAC,EAAC,OAAO,IAAI;IAAC,MAAME,CAAC,GAAC,IAAI,CAACwP,mBAAmB,CAAC1P,CAAC,CAAC;IAAC,IAAG,CAACE,CAAC,EAAC,OAAO,IAAI;IAAC,IAAIC,CAAC;IAAC,IAAGU,CAAC,CAACZ,CAAC,CAAC,IAAE,sBAAsB,IAAGA,CAAC,IAAEA,CAAC,CAACsQ,oBAAoB,EAAC;MAAC,MAAMvQ,CAAC,GAACgG,EAAE,CAAC/F,CAAC,CAACsQ,oBAAoB,EAAC;QAACgT,aAAa,EAAC,CAAC;MAAC,CAAC,CAAC;MAAC1iB,CAAC,CAACb,CAAC,CAACkQ,MAAM,CAAC,IAAE,WAAW,KAAGlQ,CAAC,CAACkQ,MAAM,CAAC7E,IAAI,IAAE,KAAK,KAAGrL,CAAC,CAACkQ,MAAM,CAAC7E,IAAI,KAAGlL,CAAC,GAACH,CAAC,CAACkQ,MAAM,CAACiN,YAAY,CAAC;IAAA;IAAC,MAAM/c,CAAC,GAAC6G,EAAE,CAAC/G,CAAC,EAAC,IAAI,CAACsT,qBAAqB,EAACrT,CAAC,CAAC;IAAC,OAAOC,CAAC,CAAC8hB,IAAI,CAAE,MAAI;MAAC,MAAMliB,CAAC,GAACI,CAAC,CAAC4R,aAAa;MAAChS,CAAC,GAAC,IAAI,CAACgS,aAAa,IAAE,IAAI,CAAC+G,IAAI,CAAC,eAAe,EAAC/Y,CAAC,CAAC,EAAC,IAAI,CAACqY,YAAY,CAAC,yBAAyB,CAAC;IAAA,CAAC,EAAG,MAAI,CAAC,CAAC,CAAE,EAACjY,CAAC;EAAA;EAACsiB,2BAA2BA,CAAC1iB,CAAC,EAACC,CAAC,EAAC;IAAC,IAAIC,CAAC,GAAC,IAAI,CAACyQ,QAAQ,CAACrP,GAAG,CAACtB,CAAC,CAAC6P,EAAE,CAAC;IAAC,OAAO,KAAK,CAAC,KAAG3P,CAAC,KAAGA,CAAC,GAACF,CAAC,YAAYyJ,EAAE,GAAC,IAAIvC,EAAE,CAAClH,CAAC,EAAEA,CAAC,IAAE,IAAI,CAAC4M,UAAU,CAAC9J,QAAQ,CAAC9C,CAAC,CAAC,EAAGA,CAAC,IAAE,IAAI,CAACsjB,uBAAuB,CAACtjB,CAAC,EAACC,CAAC,CAAC,CAAE,GAAC,IAAI,CAACqjB,uBAAuB,CAACtjB,CAAC,EAACC,CAAC,CAAC,EAAC,IAAI,CAAC0Q,QAAQ,CAACN,GAAG,CAACrQ,CAAC,CAAC6P,EAAE,EAAC3P,CAAC,CAAC,CAAC,EAACW,CAAC,CAACX,CAAC,CAAC,IAAE,EAAEA,CAAC,CAAC2iB,UAAU,EAAC3iB,CAAC;EAAA;EAACsjB,iBAAiBA,CAACxjB,CAAC,EAAC;IAAC,OAAOiB,CAAC,CAAC,IAAI,CAACkQ,qBAAqB,CAAC,KAAG,IAAI,CAACA,qBAAqB,GAAC,IAAI/J,EAAE,CAAC,IAAI,CAAC,CAAC,EAAC,IAAI,CAAC+J,qBAAqB,CAACsF,GAAG,CAACzW,CAAC,CAAC;EAAA;EAACyjB,qBAAqBA,CAACzjB,CAAC,EAAC;IAAC,IAAI,CAACiP,WAAW,IAAEjP,CAAC,CAAC0O,UAAU,EAAC,IAAI,CAAC5D,kBAAkB,CAACuF,GAAG,CAACrQ,CAAC,CAACsU,OAAO,CAACW,GAAG,EAACjV,CAAC,CAAC,EAAC,IAAI,CAACkL,iBAAiB,EAAE,EAAClL,CAAC,CAACgjB,iBAAiB,KAAG,IAAI,CAACzQ,mCAAmC,EAAE,EAAC,IAAI,CAACwN,iCAAiC,EAAE,CAAC,EAAC,IAAI,CAACnJ,sBAAsB,EAAE;EAAA;EAAC6J,wBAAwBA,CAACzgB,CAAC,EAACC,CAAC,EAAM;IAAA,IAALC,CAAC,GAAAka,SAAA,CAAA5J,MAAA,QAAA4J,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,CAAC,CAAC;IAAE,IAAI,CAACnL,WAAW,IAAEhP,CAAC,EAAC,IAAI,CAAC6K,kBAAkB,CAACwQ,MAAM,CAACtb,CAAC,CAAC,EAAC,IAAI,CAACkL,iBAAiB,EAAE,EAAChL,CAAC,KAAG,IAAI,CAACqS,mCAAmC,EAAE,EAAC,IAAI,CAACwN,iCAAiC,EAAE,CAAC,EAAC,IAAI,CAACnJ,sBAAsB,EAAE;EAAA;EAACkM,wBAAwBA,CAAC9iB,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACqU,OAAO;IAAC,IAAG,IAAI,CAAC5C,sBAAsB,CAAC4J,MAAM,CAACpb,CAAC,CAAC+U,GAAG,CAAC,EAAC,CAAC,IAAI,CAACtE,QAAQ,CAAC4G,GAAG,CAACvX,CAAC,CAACkQ,MAAM,CAACL,EAAE,CAAC,EAAC,OAAO,IAAI,CAAC4G,GAAG,CAAC,CAACvW,CAAC,CAAC,CAAC,EAAC,IAAI;IAAC,IAAG,IAAI,CAAC4K,kBAAkB,CAACyM,GAAG,CAACrX,CAAC,CAAC+U,GAAG,CAAC,EAAC,OAAO,IAAI;IAAC,MAAM9U,CAAC,GAACH,CAAC,CAAC0jB,uBAAuB,CAACzjB,CAAC,CAAC;IAAC,IAAGgB,CAAC,CAACd,CAAC,CAAC,EAAC,OAAO,IAAI;IAAC,IAAI,CAACsjB,qBAAqB,CAACtjB,CAAC,CAAC;IAAC,MAAMC,CAAC,GAACJ,CAAC,CAACkQ,MAAM,CAACL,EAAE;IAAC,IAAI,CAAC4B,iBAAiB,CAAC8F,GAAG,CAACnX,CAAC,CAAC,IAAE,IAAI,CAACqR,iBAAiB,CAACpB,GAAG,CAACjQ,CAAC,EAAC,IAAIgR,GAAG,GAAC,EAAC,IAAI,CAACK,iBAAiB,CAACnQ,GAAG,CAAClB,CAAC,CAAC,CAACiQ,GAAG,CAACnQ,CAAC,CAAC+U,GAAG,EAAC9U,CAAC,CAAC;IAAC,IAAGA,CAAC,CAACwjB,QAAQ,IAAE,IAAI,CAACpS,mBAAmB,CAACkF,GAAG,CAACvW,CAAC,CAAC+U,GAAG,CAAC,EAAC9U,CAAC,CAACyjB,QAAQ,GAAC,IAAI,EAAC/iB,CAAC,CAACX,CAAC,CAAC0d,QAAQ,CAAC,IAAE,OAAO,KAAG1d,CAAC,CAAC0d,QAAQ,CAACvS,IAAI,KAAGlL,CAAC,CAACyjB,QAAQ,GAACtc,EAAE,CAACpH,CAAC,CAAC0d,QAAQ,EAAC,IAAI,CAAC3T,qBAAqB,CAAC,CAAC,EAAC,IAAI,CAACsR,qBAAqB,CAACpb,CAAC,CAAC,EAACU,CAAC,CAAC,IAAI,CAACiL,gBAAgB,CAAC,IAAE,IAAI,CAACA,gBAAgB,CAAC+X,gBAAgB,CAAC1jB,CAAC,CAAC,EAACU,CAAC,CAAC,IAAI,CAACuL,iBAAiB,CAAC,EAAC;MAAC,MAAK;QAAC0X,iBAAiB,EAAC9jB;MAAC,CAAC,GAAC,IAAI,CAACoM,iBAAiB;MAACjM,CAAC,CAACiU,iBAAiB,CAAChO,EAAE,CAACiO,MAAM,EAACrU,CAAC,EAACsG,EAAE,CAACiO,OAAO,CAAC,EAACvU,CAAC,IAAE,IAAI,CAACoM,iBAAiB,CAAC2X,OAAO,EAAE;IAAA;IAAC,IAAI,CAAC9R,aAAa,EAAE+R,UAAU,CAAC7jB,CAAC,CAAC,EAAC,IAAI,CAAC+R,QAAQ,EAAE8R,UAAU,CAAC7jB,CAAC,CAAC,EAAC,IAAI,CAAC+L,aAAa,EAAE8X,UAAU,CAAC7jB,CAAC,CAAC,EAAC,IAAI,CAAC8R,aAAa,IAAE,IAAI,CAAC/H,KAAK,CAACC,IAAI,CAACwK,YAAY,CAACsP,4BAA4B,CAAC,IAAI,EAAC9jB,CAAC,CAAC,EAACA,CAAC,CAACwT,UAAU,CAAC,IAAI,CAACrC,KAAK,EAAC,IAAI,CAACD,UAAU,EAAC,IAAI,CAACnH,KAAK,CAAC,EAACrJ,CAAC,CAAC,IAAI,CAACsQ,qBAAqB,CAAC,IAAE,IAAI,CAACA,qBAAqB,CAAC6S,UAAU,CAAC7jB,CAAC,CAAC;IAAC,MAAMG,CAAC,GAAC,IAAI,CAACgS,8BAA8B,CAACpS,CAAC,CAAC+U,GAAG,CAAC;IAAC,OAAO3U,CAAC,KAAG,OAAO,IAAI,CAACgS,8BAA8B,CAACpS,CAAC,CAAC+U,GAAG,CAAC,EAAC3U,CAAC,CAACqb,OAAO,CAACxb,CAAC,CAAC,CAAC,EAACA,CAAC;EAAA;EAACwY,oBAAoBA,CAAA,EAAE;IAAC,IAAI,CAAClM,8BAA8B,KAAG,IAAI,CAACA,8BAA8B,CAACgM,KAAK,EAAE,EAAC,IAAI,CAAChM,8BAA8B,GAAC,IAAI,CAAC;EAAA;EAAC,MAAM6L,cAAcA,CAACtY,CAAC,EAAC;IAAC,IAAG,IAAI,CAAC2Y,oBAAoB,EAAE,EAAC3Y,CAAC,KAAG,IAAI,CAACoL,eAAe,EAAC,IAAG,IAAI,CAAC8Y,iBAAiB,CAAClkB,CAAC,CAAC,EAACiB,CAAC,CAACjB,CAAC,CAAC,IAAE,IAAI,CAACmkB,sBAAsB,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC,EAAC3e,CAAC,CAACxF,CAAC,CAAC;MAAC,IAAGa,CAAC,CAACb,CAAC,CAAC,IAAEA,CAAC,CAACokB,cAAc,EAAC;QAAC,MAAMnkB,CAAC,GAAC,IAAI4U,eAAe;QAAC,IAAI,CAACpI,8BAA8B,GAACxM,CAAC;QAAC,MAAK;UAACokB,WAAW,EAACnkB;QAAC,CAAC,GAAC,MAAM,IAAI,CAACokB,aAAa,EAAE;QAACvkB,CAAC,CAACE,CAAC,CAAC;QAAC,MAAME,CAAC,GAACD,CAAC,CAACqkB,qBAAqB,CAACvkB,CAAC,CAAC;QAACG,CAAC,KAAG,MAAMD,CAAC,CAACskB,wBAAwB,EAAE,EAACzkB,CAAC,CAACE,CAAC,CAAC,CAAC,EAAC,IAAI,CAACkL,qBAAqB,KAAGzC,EAAE,CAAC4C,KAAK,GAAC,MAAM,IAAI,CAACsB,UAAU,CAAC9J,QAAQ,CAAE,MAAI,IAAI,CAACqhB,sBAAsB,CAACnkB,CAAC,EAACG,CAAC,CAAC,EAAEF,CAAC,CAAC8U,MAAM,CAAC,GAAC,IAAI,CAACoP,sBAAsB,CAACnkB,CAAC,EAACG,CAAC,CAAC,EAAC,IAAI,CAACsM,8BAA8B,GAAC,IAAI;MAAA,CAAC,MAAK,IAAG,IAAI,CAACtB,qBAAqB,KAAGzC,EAAE,CAAC4C,KAAK,EAAC;QAAC,MAAMrL,CAAC,GAAC,IAAI4U,eAAe;QAAC,IAAI,CAACpI,8BAA8B,GAACxM,CAAC,EAAC,MAAM,IAAI,CAAC2M,UAAU,CAAC9J,QAAQ,CAAE,MAAI,IAAI,CAACqhB,sBAAsB,CAACnkB,CAAC,EAAC,CAAC,CAAC,CAAC,EAAEC,CAAC,CAAC8U,MAAM,CAAC,EAAC,IAAI,CAACtI,8BAA8B,GAAC,IAAI;MAAA,CAAC,MAAK,IAAI,CAAC0X,sBAAsB,CAACnkB,CAAC,EAAC,CAAC,CAAC,CAAC;IAAC,OAAK,IAAI,CAACmkB,sBAAsB,CAACnkB,CAAC,EAAC,CAAC,CAAC,CAAC;EAAA;EAAC,MAAMskB,aAAaA,CAAA,EAAE;IAAC,OAAOrjB,CAAC,CAAC,IAAI,CAAC6Q,eAAe,CAAC,IAAE,IAAI,CAACA,eAAe,GAAC,MAAMlM,CAAC,EAAE,EAAC,IAAI,CAACkM,eAAe,IAAE,IAAI,CAACA,eAAe;EAAA;EAACqS,sBAAsBA,CAACnkB,CAAC,EAACC,CAAC,EAAC;IAAC,IAAI,CAACmL,eAAe,GAACpL,CAAC,EAAC,IAAI,CAACkR,6BAA6B,GAACjR,CAAC,EAAC,IAAI,CAACuT,qBAAqB,CAACiR,MAAM,GAAC9iB,CAAC,CAAC,IAAI,CAACmQ,eAAe,CAAC;IAAC,MAAM5R,CAAC,GAAC,IAAI,CAACsT,qBAAqB,CAAC6B,QAAQ;IAAC,IAAGrV,CAAC,KAAGE,CAAC,EAAC;IAAO,IAAG,IAAI,CAAC0P,sBAAsB,CAACiD,KAAK,EAAE,EAAC5R,CAAC,CAACjB,CAAC,CAAC,EAAC,OAAO,IAAI,CAACwT,qBAAqB,CAAC6B,QAAQ,GAAC,IAAI,EAAC,KAAK,IAAI,CAACyB,6BAA6B,EAAE;IAAC,MAAM3W,CAAC,GAACkD,CAAC,CAACnD,CAAC,EAACF,CAAC,CAAC;IAAC,IAAI,CAAC0kB,8BAA8B,CAACvkB,CAAC,EAACH,CAAC,EAACE,CAAC,CAAC,EAAC,IAAI,CAACsT,qBAAqB,CAAC6B,QAAQ,GAACrV,CAAC,EAACiB,CAAC,CAACd,CAAC,CAAC,KAAG,UAAU,KAAGA,CAAC,CAACkL,IAAI,GAAC,IAAI,CAACyL,6BAA6B,EAAE,GAAC,SAAS,KAAG3W,CAAC,CAACkL,IAAI,KAAG,IAAI,CAACsZ,kBAAkB,CAACxkB,CAAC,EAACH,CAAC,EAACE,CAAC,CAAC,GAAC,IAAI,CAAC0kB,wBAAwB,EAAE,GAAC,IAAI,CAAC9N,6BAA6B,EAAE,CAAC,EAAC,IAAI,CAACuB,YAAY,CAAC,yBAAyB,CAAC,CAAC;EAAA;EAACwM,oBAAoBA,CAAC7kB,CAAC,EAAC;IAAC,KAAI,MAAMC,CAAC,IAAID,CAAC,CAACoD,IAAI,EAAC,QAAOnD,CAAC;MAAE,KAAI,iBAAiB;MAAC,KAAI,eAAe;MAAC,KAAI,kBAAkB;QAAC;MAAM,KAAI,mBAAmB;MAAC,KAAI,eAAe;MAAC,KAAI,gBAAgB;QAAC,OAAOD,CAAC,CAACoD,IAAI,CAACnD,CAAC,CAAC;QAAC;MAAM;QAAQ,OAAM,CAAC,CAAC;IAAA;IAAC,OAAM,CAAC,CAAC;EAAA;EAAC6kB,mBAAmBA,CAAC9kB,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAACF,CAAC,GAACA,CAAC,IAAE,EAAE,EAACC,CAAC,GAACA,CAAC,IAAE,EAAE;IAAC,MAAME,CAAC,GAAC,EAAE;IAAC,KAAI,MAAMC,CAAC,IAAIH,CAAC,EAAC;MAAC,MAAMA,CAAC,GAAC,IAAI,CAACwR,iBAAiB,CAACnQ,GAAG,CAAClB,CAAC,CAACyP,EAAE,CAAC;MAAC5P,CAAC,IAAEA,CAAC,CAAC4Q,OAAO,CAAE,CAACvQ,CAAC,EAACC,CAAC,KAAG;QAAC,MAAME,CAAC,GAACH,CAAC,CAACgU,OAAO;UAAC3T,CAAC,GAAC,IAAI,CAAC6J,KAAK,YAAY1F,CAAC,GAAC,IAAI,CAAC0F,KAAK,GAAC,IAAI;UAAC3J,CAAC,GAACc,CAAC,CAAC,IAAI,CAACmQ,eAAe,CAAC;QAAC,IAAG1R,CAAC,KAAGF,CAAC,CAAC6kB,aAAa,IAAE7kB,CAAC,CAAC8kB,SAAS,CAAC1f,CAAC,CAAC7E,CAAC,EAACE,CAAC,CAAC,EAAC;UAAC8jB,MAAM,EAAC5jB;QAAC,CAAC,CAAC,KAAGX,CAAC,CAAC6kB,aAAa,EAAC;QAAO,MAAMhkB,CAAC,GAACT,CAAC,CAACoO,UAAU;QAAC1O,CAAC,CAACwQ,MAAM,IAAEtQ,CAAC,CAAC6kB,aAAa,GAAC5kB,CAAC,CAACuQ,IAAI,CAACjQ,CAAC,CAAC,GAAC,IAAI,CAACiR,sBAAsB,CAACrB,GAAG,CAAC9P,CAAC,EAACE,CAAC,CAAC;QAAC,MAAMQ,CAAC,GAAC,IAAI,CAAC6J,kBAAkB,CAACxJ,GAAG,CAACf,CAAC,CAAC;QAAC,IAAI,CAACigB,kBAAkB,CAACvf,CAAC,EAACV,CAAC,CAAC,EAACD,CAAC,CAACoY,OAAO,EAAE,EAACzY,CAAC,CAACqb,MAAM,CAAC/a,CAAC,CAAC,EAAC,IAAI,CAACkgB,wBAAwB,CAAClgB,CAAC,EAACQ,CAAC,CAAC,EAAC,IAAI,CAAC6V,sBAAsB,EAAE;MAAA,CAAC,CAAE,EAAC,IAAI,CAAC3D,kBAAkB,CAACgS,MAAM,CAAEjlB,CAAC,IAAEA,CAAC,CAACI,CAAC,CAACyP,EAAE,CAAC,CAAE;IAAA;IAAC,CAAC7P,CAAC,CAACwQ,MAAM,IAAErQ,CAAC,CAACqQ,MAAM,MAAI,IAAI,CAACkB,sBAAsB,CAACb,OAAO,CAAE7Q,CAAC,IAAEG,CAAC,CAACuQ,IAAI,CAAC1Q,CAAC,CAAC,CAAE,EAAC,IAAI,CAAC0R,sBAAsB,CAACmB,KAAK,EAAE,EAAC,IAAI,CAAC4D,GAAG,CAACtW,CAAC,CAAC,CAAC,EAAC,IAAI,CAAC0e,eAAe,EAAE,EAAC,IAAI,CAAC3M,QAAQ,IAAE,IAAI,CAAChI,KAAK,CAACC,IAAI,CAACyK,OAAO,CAAC+J,QAAQ,EAAE,EAAC,IAAI,CAACzU,KAAK,CAACC,IAAI,CAACwK,YAAY,CAACgK,QAAQ,EAAE;EAAA;EAACuG,6BAA6BA,CAACllB,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACH,CAAC,CAACoD,IAAI,CAAC2hB,aAAa;MAAC3kB,CAAC,GAACJ,CAAC,CAACoD,IAAI,CAAC+hB,gBAAgB;IAAC,IAAGhlB,CAAC,IAAEC,CAAC,EAAC;MAAC,MAAME,CAAC,GAACF,CAAC,GAACA,CAAC,CAACid,KAAK,CAAC+H,GAAG,CAAEplB,CAAC,IAAEA,CAAC,CAACkQ,MAAM,CAAE,CAACmV,MAAM,CAACxkB,CAAC,CAAC,GAAC,EAAE;QAACN,CAAC,GAACH,CAAC,GAACA,CAAC,CAACkd,OAAO,CAAC8H,GAAG,CAAEplB,CAAC,IAAEA,CAAC,CAACkQ,MAAM,CAAE,CAACmV,MAAM,CAACxkB,CAAC,CAAC,GAAC,EAAE;MAAC,IAAGT,CAAC,EAAC,KAAI,IAAIJ,CAAC,GAAC,CAAC,EAACA,CAAC,GAACI,CAAC,CAACklB,OAAO,CAAC9U,MAAM,EAACxQ,CAAC,EAAE,EAACM,CAAC,CAACoQ,IAAI,CAACtQ,CAAC,CAACklB,OAAO,CAACtlB,CAAC,CAAC,CAACie,QAAQ,CAAC/N,MAAM,CAAC,EAAC3P,CAAC,CAACmQ,IAAI,CAACtQ,CAAC,CAACklB,OAAO,CAACtlB,CAAC,CAAC,CAACoe,QAAQ,CAAClO,MAAM,CAAC;MAAC,OAAO/P,CAAC,IAAED,CAAC,CAAC6kB,aAAa,IAAExkB,CAAC,CAACmQ,IAAI,CAACxQ,CAAC,CAAC6kB,aAAa,CAAC,EAAC9kB,CAAC,CAAC8kB,aAAa,IAAEzkB,CAAC,CAACoQ,IAAI,CAACzQ,CAAC,CAAC8kB,aAAa,CAAC,IAAE7kB,CAAC,CAAC6kB,aAAa,IAAEzkB,CAAC,CAACkQ,MAAM,IAAEjQ,CAAC,CAACmQ,IAAI,CAACzQ,CAAC,CAAC8kB,aAAa,CAAC,EAAC,IAAI,CAACD,mBAAmB,CAACxkB,CAAC,EAACC,CAAC,EAACN,CAAC,CAAC,EAAC,OAAOD,CAAC,CAACoD,IAAI,CAAC2hB,aAAa,EAAC,OAAO/kB,CAAC,CAACoD,IAAI,CAAC+hB,gBAAgB,EAAC,CAAC,CAAC;IAAA;IAAC,OAAM,CAAC,CAAC;EAAA;EAACI,gCAAgCA,CAACvlB,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAAC,IAAG,cAAc,KAAGD,CAAC,EAAEoL,IAAI,IAAE,cAAc,KAAGnL,CAAC,EAAEmL,IAAI,IAAExK,CAAC,CAACb,CAAC,CAAC,IAAE,SAAS,KAAGA,CAAC,CAACqL,IAAI,EAAC,OAAM,EAAE;IAAC,MAAMlL,CAAC,GAACH,CAAC,IAAEa,CAAC,CAACb,CAAC,CAAC,GAACA,CAAC,CAAC6P,EAAE,GAAC,IAAI;MAACzP,CAAC,GAACJ,CAAC,IAAEA,CAAC,CAACoD,IAAI;MAAC9C,CAAC,GAACF,CAAC,IAAEA,CAAC,CAAC2kB,aAAa;MAACxkB,CAAC,GAACH,CAAC,IAAEA,CAAC,CAAC+kB,gBAAgB;IAAC,IAAI1kB,CAAC;IAAC,IAAGF,CAAC,EAACE,CAAC,GAACF,CAAC,CAACilB,SAAS,CAACJ,GAAG,CAAEplB,CAAC,KAAG;MAACylB,KAAK,EAACtlB,CAAC,CAACH,CAAC,CAACoe,QAAQ,CAAClO,MAAM,CAAC;MAACwV,KAAK,EAACvlB,CAAC,CAACH,CAAC,CAACie,QAAQ,CAAC/N,MAAM;IAAC,CAAC,CAAC,CAAE,CAAC,KAAI;MAACzP,CAAC,GAAC,EAAE;MAAC,KAAI,MAAMT,CAAC,IAAIE,CAAC,CAACilB,gBAAgB,IAAE,EAAE,EAAC;QAAC,MAAMjlB,CAAC,GAACC,CAAC,CAACH,CAAC,CAACkQ,MAAM,CAAC;UAAC9P,CAAC,GAACH,CAAC,CAACklB,gBAAgB,EAAE1I,IAAI,CAAExc,CAAC,IAAEA,CAAC,CAAC0lB,KAAK,KAAG3lB,CAAC,CAAC2lB,KAAK,CAAE;QAACvlB,CAAC,IAAEF,CAAC,KAAGC,CAAC,CAACC,CAAC,CAAC8P,MAAM,CAAC,IAAEzP,CAAC,CAACiQ,IAAI,CAAC;UAAC+U,KAAK,EAACvlB,CAAC;UAACwlB,KAAK,EAACvlB,CAAC,CAACC,CAAC,CAAC8P,MAAM;QAAC,CAAC,CAAC;MAAA;IAAC;IAAC,OAAM,CAAC5P,CAAC,IAAEJ,CAAC,CAAC6kB,aAAa,IAAEtkB,CAAC,CAACiQ,IAAI,CAAC;MAAC+U,KAAK,EAACtlB,CAAC,CAACD,CAAC,CAAC6kB,aAAa,CAAC;MAACW,KAAK,EAACvlB,CAAC,CAACF,CAAC,CAAC8kB,aAAa;IAAC,CAAC,CAAC,EAACtkB,CAAC;EAAA;EAAC4d,oBAAoBA,CAACre,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACW,CAAC,CAACZ,CAAC,CAAC,IAAEA,CAAC,GAAC,QAAQ,IAAE,OAAOA,CAAC,GAACA,CAAC,GAACA,CAAC,CAAC4P,EAAE,GAAC,IAAI;IAAC,IAAG5O,CAAC,CAACjB,CAAC,CAAC,IAAEA,CAAC,KAAGE,CAAC,EAAC;IAAO,MAAMC,CAAC,GAAC,IAAI,CAACsR,iBAAiB,CAACnQ,GAAG,CAACtB,CAAC,CAAC;IAAC,IAAI,CAACyR,iBAAiB,CAAC6J,MAAM,CAACtb,CAAC,CAAC,EAAC,KAAK,CAAC,KAAGG,CAAC,IAAE,IAAI,CAACsR,iBAAiB,CAACpB,GAAG,CAACnQ,CAAC,EAACC,CAAC,CAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACuQ,QAAQ,CAACrP,GAAG,CAACtB,CAAC,CAAC;IAAC,IAAG,KAAK,CAAC,KAAGI,CAAC,KAAG,IAAI,CAACuQ,QAAQ,CAAC2K,MAAM,CAACtb,CAAC,CAAC,EAAC,IAAI,CAAC2Q,QAAQ,CAACN,GAAG,CAACnQ,CAAC,EAACE,CAAC,CAAC,EAACS,CAAC,CAACT,CAAC,CAAC,CAAC,EAAC;MAAC,MAAMJ,CAAC,GAAC,QAAQ,IAAE,OAAOC,CAAC,GAAC,IAAI,GAACA,CAAC;MAACY,CAAC,CAACb,CAAC,CAAC,GAACI,CAAC,CAAC8P,MAAM,GAAClQ,CAAC,GAACI,CAAC,CAAC8P,MAAM,CAACL,EAAE,GAAC3P,CAAC;IAAA;EAAC;EAACwkB,8BAA8BA,CAAC1kB,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAAColB,gCAAgC,CAACvlB,CAAC,EAACC,CAAC,EAACC,CAAC,CAAC;IAAC,KAAI,MAAK;MAACulB,KAAK,EAACrlB,CAAC;MAACslB,KAAK,EAACplB;IAAC,CAAC,IAAGH,CAAC,EAAC,IAAI,CAACke,oBAAoB,CAACje,CAAC,EAACE,CAAC,CAAC;EAAA;EAACqkB,kBAAkBA,CAAC3kB,CAAC,EAACE,CAAC,EAACC,CAAC,EAAC;IAAC,IAAG,IAAI,CAAC0kB,oBAAoB,CAAC7kB,CAAC,CAAC,EAAC,OAAM,CAAC,CAAC;IAAC,IAAGE,CAAC,YAAYD,CAAC,IAAEE,CAAC,YAAYF,CAAC,IAAE,IAAI,CAACilB,6BAA6B,CAACllB,CAAC,EAACE,CAAC,EAACC,CAAC,CAAC,IAAE,CAAC,KAAGylB,MAAM,CAACC,IAAI,CAAC7lB,CAAC,CAACoD,IAAI,CAAC,CAACoN,MAAM,EAAC,OAAM,CAAC,CAAC;IAAC,KAAI,MAAK,CAACvQ,CAAC,CAAC,IAAG,IAAI,CAACwR,iBAAiB,EAAC;MAAC,MAAMtR,CAAC,GAAC,IAAI,CAACwQ,QAAQ,CAACrP,GAAG,CAACrB,CAAC,CAAC;MAAC,IAAGY,CAAC,CAACV,CAAC,CAAC,EAAC,QAAOA,CAAC,CAAC2lB,iBAAiB,CAAC9lB,CAAC,EAACE,CAAC,CAAC;QAAE,KAAKsH,EAAE,CAACue,eAAe;UAAC,IAAI,CAACjG,eAAe,CAAC7f,CAAC,CAAC;UAAC;QAAM,KAAKuH,EAAE,CAACwe,iBAAiB;UAAC,IAAI,CAACtF,0BAA0B,CAACzgB,CAAC,CAAC;QAAC,KAAKuH,EAAE,CAACye,WAAW;MAAC;IAAC;IAAC,OAAM,CAAC,CAAC;EAAA;EAACC,aAAaA,CAAA,EAAE;IAAC,IAAI,CAACzG,uBAAuB,CAAE,CAACzf,CAAC,EAACC,CAAC,KAAGD,CAAC,CAAC0f,qBAAqB,CAAC,SAAS,EAACzf,CAAC,CAAC,CAAE,EAAC,IAAI,CAAC6Z,2BAA2B,EAAE;EAAA;EAAC/C,wBAAwBA,CAAC/W,CAAC,EAAC;IAACA,CAAC,KAAG,IAAI,CAACwT,qBAAqB,CAACyC,iBAAiB,KAAG,IAAI,CAACzC,qBAAqB,CAACyC,iBAAiB,GAACjW,CAAC,EAAC,IAAI,CAACqR,UAAU,CAAC8U,SAAS,GAACnmB,CAAC,EAAC,IAAI,CAACyf,uBAAuB,CAAE,CAACzf,CAAC,EAACC,CAAC,KAAGD,CAAC,CAAC0f,qBAAqB,CAAC,mBAAmB,EAACzf,CAAC,CAAC,CAAE,EAAC,IAAI,CAACgS,aAAa,IAAE,IAAI,CAACA,aAAa,CAACmU,uBAAuB,EAAE,EAAC,IAAI,CAAClU,QAAQ,IAAE,IAAI,CAACA,QAAQ,CAACkU,uBAAuB,EAAE,CAAC;EAAA;EAACjP,6BAA6BA,CAACnX,CAAC,EAAC;IAAC,IAAI,CAACwT,qBAAqB,CAAC0C,6BAA6B,GAAClW,CAAC,EAAC,IAAI,CAACyf,uBAAuB,CAAE,CAACzf,CAAC,EAACC,CAAC,EAACC,CAAC,KAAG;MAACF,CAAC,CAAC0f,qBAAqB,CAAC,+BAA+B,EAACzf,CAAC,CAAC,IAAE,IAAI,CAAC6f,eAAe,CAAC5f,CAAC,CAAC;IAAA,CAAC,CAAE;EAAA;EAACkX,yBAAyBA,CAACpX,CAAC,EAAC;IAAC,IAAI,CAACwT,qBAAqB,CAAC4C,kBAAkB,GAACpW,CAAC,EAAC,IAAI,CAACyf,uBAAuB,CAAE,CAACzf,CAAC,EAACC,CAAC,EAACC,CAAC,KAAG;MAACF,CAAC,CAAC0f,qBAAqB,CAAC,oBAAoB,EAACzf,CAAC,CAAC,IAAE,IAAI,CAAC6f,eAAe,CAAC5f,CAAC,CAAC;IAAA,CAAC,CAAE;EAAA;EAACgX,iBAAiBA,CAAA,EAAE;IAAC,IAAI,CAACuI,uBAAuB,CAAE,CAACzf,CAAC,EAACC,CAAC,EAACC,CAAC,KAAG;MAACF,CAAC,CAAC0f,qBAAqB,CAAC,YAAY,EAACzf,CAAC,CAAC,IAAE,IAAI,CAAC6f,eAAe,CAAC5f,CAAC,CAAC;IAAA,CAAC,CAAE;EAAA;EAACyX,8CAA8CA,CAAA,EAAE;IAAC,IAAI,CAAChL,oCAAoC,IAAE,IAAI,CAACA,oCAAoC,CAACkM,MAAM,EAAE,EAAC,IAAI,CAAClM,oCAAoC,GAAC5J,CAAC,CAAE,MAAI;MAAC,IAAI,CAAC4J,oCAAoC,GAAC,IAAI;IAAA,CAAC,CAAE;EAAA;EAAC0Z,iBAAiBA,CAACrmB,CAAC,EAACC,CAAC,EAAC;IAAC,MAAMC,CAAC,GAAC,IAAI,CAACsT,qBAAqB,CAAC8S,cAAc;MAACnmB,CAAC,GAACyE,CAAC,EAAE;IAAC,OAAOwD,EAAE,CAACpI,CAAC,EAACG,CAAC,EAACF,CAAC,CAAC,GAAC,IAAI,CAACuT,qBAAqB,CAAC8S,cAAc,GAAC7hB,CAAC,CAACJ,CAAC,EAAE,EAAClE,CAAC,CAAC,GAAC,IAAI,CAACqT,qBAAqB,CAAC8S,cAAc,GAAC,IAAI,EAAC,CAAC3hB,CAAC,CAAC,IAAI,CAAC6O,qBAAqB,CAAC8S,cAAc,EAACpmB,CAAC,CAAC;EAAA;EAACiU,mCAAmCA,CAACnU,CAAC,EAAC;IAAC,IAAIC,CAAC,GAAC,CAAC,CAAC;IAAC,IAAI,CAAC6K,kBAAkB,CAAC+F,OAAO,CAAE3Q,CAAC,IAAE;MAACF,CAAC,CAACE,CAAC,CAAC,KAAGD,CAAC,GAAC,CAAC,CAAC,CAAC;IAAA,CAAC,CAAE,EAACA,CAAC,KAAG,IAAI,CAACiK,KAAK,CAACC,IAAI,CAACyK,OAAO,EAAE+J,QAAQ,EAAE,EAAC,IAAI,CAACzU,KAAK,CAACC,IAAI,CAACwK,YAAY,CAACgK,QAAQ,EAAE,CAAC;EAAA;EAACc,uBAAuBA,CAACzf,CAAC,EAAC;IAAC,KAAI,MAAK,CAACC,CAAC,EAACC,CAAC,CAAC,IAAG,IAAI,CAACyQ,QAAQ,EAAC;MAAC,IAAG1P,CAAC,CAACf,CAAC,CAAC,EAAC;MAAOF,CAAC,CAACE,CAAC,EAAC,IAAI,CAACuR,iBAAiB,CAACnQ,GAAG,CAACrB,CAAC,CAAC,IAAEsmB,EAAE,EAACtmB,CAAC,CAAC;IAAA;EAAC;EAAC2Z,2BAA2BA,CAAA,EAAE;IAAC/Y,CAAC,CAAC,IAAI,CAACuL,iBAAiB,CAAC,IAAE,IAAI,CAACA,iBAAiB,CAAC2X,OAAO,EAAE,EAAC,IAAI,CAAC5P,mCAAmC,CAAEnU,CAAC,IAAE;MAAC,MAAMC,CAAC,GAAC,IAAI,CAACsb,qBAAqB,CAACvb,CAAC,CAAC;QAACE,CAAC,GAACW,CAAC,CAAC,IAAI,CAACiL,gBAAgB,CAAC,IAAE,IAAI,CAACA,gBAAgB,CAAC+X,gBAAgB,CAAC7jB,CAAC,CAAC;MAAC,OAAOC,CAAC,IAAEC,CAAC;IAAA,CAAC,CAAE;EAAA;EAAC2Z,gBAAgBA,CAAA,EAAE;IAAC,IAAI,CAAC1F,mCAAmC,CAAEnU,CAAC,IAAEA,CAAC,CAACoU,iBAAiB,CAAChO,EAAE,CAACoV,YAAY,EAAC,CAAC,CAAC,EAAClV,EAAE,CAACiO,OAAO,CAAC,CAAE;EAAA;EAAC2P,iBAAiBA,CAAClkB,CAAC,EAAC;IAAC,MAAMC,CAAC,GAACyF,CAAC,CAAC1F,CAAC,EAAC;MAAC8P,YAAY,EAAC,IAAI,CAACtF,KAAK,EAAEsF;IAAY,CAAC,CAAC;IAAC,IAAG7P,CAAC,EAAC;MAAC,MAAMD,CAAC,GAAE,uBAAsB,IAAI,CAACwK,KAAK,CAACgc,KAAK,GAAE,GAAE,IAAI,CAAChc,KAAK,CAACgc,KAAM,IAAG,GAAC,EAAG,QAAO,IAAI,CAAChc,KAAK,CAACqF,EAAG,mCAAkC;MAAC/F,EAAE,CAAC2X,IAAI,CAACzhB,CAAC,EAACC,CAAC,CAACmQ,OAAO,CAAC;IAAA;EAAC;EAACwU,wBAAwBA,CAAA,EAAE;IAAC,IAAI,CAAC1S,QAAQ,EAAE2E,KAAK,EAAE,EAAC,IAAI,CAACxF,UAAU,CAACoV,2BAA2B,EAAE,EAAC,IAAI,CAACpO,YAAY,CAAC,UAAU,CAAC;EAAA;EAACwG,eAAeA,CAAA,EAAE;IAAC,IAAG,IAAI,CAACvS,yBAAyB,CAACC,IAAI,GAAC,CAAC,IAAE,IAAI,CAACsF,qBAAqB,EAAC;IAAO,IAAI7R,CAAC,GAAC,CAAC,CAAC;IAAC,IAAI,CAAC2Q,QAAQ,CAACE,OAAO,CAAE,CAAC5Q,CAAC,EAACC,CAAC,KAAG;MAAC,IAAGe,CAAC,CAAChB,CAAC,CAAC,IAAEA,CAAC,CAAC4iB,UAAU,GAAC,CAAC,EAAC;MAAO,MAAM1iB,CAAC,GAAC,IAAI,CAACsR,iBAAiB,CAACnQ,GAAG,CAACpB,CAAC,CAAC;MAACC,CAAC,IAAE,CAAC,KAAGA,CAAC,CAACoM,IAAI,KAAG,IAAI,CAACkF,iBAAiB,CAAC6J,MAAM,CAACpb,CAAC,CAAC,EAAC,IAAI,CAACyQ,QAAQ,CAAC2K,MAAM,CAACpb,CAAC,CAAC,EAACiB,CAAC,CAAClB,CAAC,CAAC,EAACD,CAAC,GAAC,CAAC,CAAC,CAAC;IAAA,CAAC,CAAE,EAACA,CAAC,KAAG,IAAI,CAAC0e,uBAAuB,EAAE,EAAC,IAAI,CAACrG,YAAY,CAAC,yBAAyB,CAAC,CAAC;EAAA;EAAC,IAAIqO,IAAIA,CAAA,EAAE;IAAC,OAAM;MAACC,iBAAiB,EAACA,CAAA,MAAK;QAACC,QAAQ,EAAC,CAAC,GAAG,IAAI,CAAC9b,kBAAkB,CAAC+a,IAAI,EAAE,CAAC,CAACgB,IAAI,EAAE;QAACC,OAAO,EAAC,CAAC,GAAG,IAAI,CAACnW,QAAQ,CAACkV,IAAI,EAAE,CAAC,CAACgB,IAAI,EAAE;QAACE,gBAAgB,EAAC,CAAC,GAAG,IAAI,CAACtV,iBAAiB,CAACoU,IAAI,EAAE,CAAC,CAACgB,IAAI,EAAE,CAACzB,GAAG,CAAEplB,CAAC,KAAG;UAACgnB,QAAQ,EAAChnB,CAAC;UAAC4mB,QAAQ,EAAC,CAAC,GAAG,IAAI,CAACnV,iBAAiB,CAACnQ,GAAG,CAACtB,CAAC,CAAC,CAAC6lB,IAAI,EAAE,CAAC,CAACgB,IAAI;QAAE,CAAC,CAAC,CAAE;QAACI,qBAAqB,EAAC,CAAC,GAAG,IAAI,CAACvV,sBAAsB,CAACmU,IAAI,EAAE,CAAC,CAACgB,IAAI,EAAE;QAACK,kBAAkB,EAAC,CAAC,GAAG,IAAI,CAAC3V,mBAAmB,CAAC,CAACsV,IAAI,EAAE;QAACM,cAAc,EAAC,IAAI,CAACra;MAAe,CAAC,CAAC;MAACga,OAAO,EAAC,IAAI,CAACnW,QAAQ;MAACxE,gBAAgB,EAAC,IAAI,CAACC,iBAAiB;MAACgb,UAAU,EAAC,IAAI,CAACta,eAAe,CAACP,IAAI;MAAC8a,iBAAiB,EAACrnB,CAAC,IAAE;QAAC,IAAI,CAACuL,mBAAmB,GAACvL,CAAC;MAAA;IAAC,CAAC;EAAA;EAAC,IAAIsnB,eAAeA,CAAA,EAAE;IAAC,OAAM;MAAC9X,OAAO,EAAC,IAAI,CAAC1E,kBAAkB,CAACyB,IAAI;MAACgb,OAAO,EAAC,IAAI,CAAC7V,sBAAsB,CAACnF,IAAI;MAACib,OAAO,EAAC,IAAI,CAAC1a,eAAe,CAACP;IAAI,CAAC;EAAA;AAAC,CAAC;AAAC,IAAI0U,EAAE;AAACjX,EAAE,CAACgV,MAAM,GAACrb,CAAC,EAAE,EAAC3D,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACzd,EAAE,CAAC0d,SAAS,EAAC,gBAAgB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,iBAAiB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,+BAA+B,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,YAAY,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACzd,EAAE,CAAC0d,SAAS,EAAC,uBAAuB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,gCAAgC,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,qCAAqC,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,4BAA4B,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,qBAAqB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,kBAAkB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,mBAAmB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,oBAAoB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,eAAe,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACzd,EAAE,CAAC0d,SAAS,EAAC,eAAe,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,sCAAsC,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,eAAe,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,eAAe,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,UAAU,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,eAAe,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,iBAAiB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,uBAAuB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,qBAAqB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACzd,EAAE,CAAC0d,SAAS,EAAC,uBAAuB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,mCAAmC,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,wBAAwB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,iCAAiC,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,oBAAoB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,iBAAiB,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,cAAc,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,mBAAmB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,iBAAiB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,oBAAoB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,cAAc,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,kBAAkB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACzd,EAAE,CAAC0d,SAAS,EAAC,UAAU,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACzd,EAAE,CAAC0d,SAAS,EAAC,SAAS,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAACzd,EAAE,CAAC0d,SAAS,EAAC,0BAA0B,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC,CAAC;EAACG,SAAS,EAAC;AAAE,CAAC,CAAC,CAAC,EAAC5d,EAAE,CAAC0d,SAAS,EAAC,mBAAmB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC,CAAC;EAACG,SAAS,EAAC,CAAC,kEAAkE,EAAC,gEAAgE,EAAC,yBAAyB;AAAC,CAAC,CAAC,CAAC,EAAC5d,EAAE,CAAC0d,SAAS,EAAC,qBAAqB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAACwkB,QAAQ,EAAC,CAAC,CAAC;EAACG,SAAS,EAAC;AAAE,CAAC,CAAC,CAAC,EAAC5d,EAAE,CAAC0d,SAAS,EAAC,yBAAyB,EAAC,IAAI,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,MAAM,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,CAAC;EAAC0kB,aAAa,EAAC,CAAC;AAAC,CAAC,CAAC,CAAC,EAAC3d,EAAE,CAAC0d,SAAS,EAAC,MAAM,EAAC,KAAK,CAAC,CAAC,EAAC1nB,CAAC,CAAC,CAACiD,CAAC,EAAE,CAAC,EAAC+G,EAAE,CAAC0d,SAAS,EAAC,gBAAgB,EAAC,IAAI,CAAC,EAAC1d,EAAE,GAACN,EAAE,GAAC1J,CAAC,CAAC,CAACmD,CAAC,CAAC0G,EAAE,CAAC,CAAC,EAACG,EAAE,CAAC,EAAC,UAAShK,CAAC,EAAC;EAACA,CAAC,CAACA,CAAC,CAACkhB,GAAG,GAAC,CAAC,CAAC,GAAC,KAAK,EAAClhB,CAAC,CAACA,CAAC,CAAC+d,OAAO,GAAC,CAAC,CAAC,GAAC,SAAS,EAAC/d,CAAC,CAACA,CAAC,CAAC6hB,KAAK,GAAC,CAAC,CAAC,GAAC,OAAO,EAAC7hB,CAAC,CAACA,CAAC,CAAC+hB,QAAQ,GAAC,CAAC,CAAC,GAAC,UAAU;AAAA,CAAC,CAACd,EAAE,KAAGA,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC;AAAC,MAAMtO,EAAE;EAAC5B,WAAWA,CAAA,EAAE;IAAC,IAAI,CAAC0F,GAAG,GAAC,IAAI,EAAC,IAAI,CAACqL,aAAa,GAAC,IAAI,EAAC,IAAI,CAAC9K,KAAK,GAACiK,EAAE,CAACC,GAAG,EAAC,IAAI,CAACC,eAAe,GAAC,IAAI,EAAC,IAAI,CAACtI,MAAM,GAAC,IAAI;EAAA;EAAChG,KAAKA,CAAA,EAAE;IAAC,IAAI,CAAC4D,GAAG,GAAC,IAAI,EAAC,IAAI,CAACqL,aAAa,GAAC,IAAI,EAAC,IAAI,CAAC9K,KAAK,GAACiK,EAAE,CAACC,GAAG,EAAC,IAAI,CAACC,eAAe,GAAC,IAAI,EAAC,IAAI,CAACtI,MAAM,GAAC,IAAI;EAAA;AAAC;AAAC,MAAMc,EAAE,GAAC,EAAE;EAACoD,EAAE,GAACpZ,CAAC,EAAE;EAACsZ,EAAE,GAACtZ,CAAC,EAAE;EAAC4iB,EAAE,GAAC,IAAInV,GAAG;AAAC,SAAOpH,EAAE,IAAI6d,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}