{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport { IdentifiableMixin as s } from \"../../../../core/Identifiable.js\";\nimport { isSome as t, toNullable as o, isNone as i } from \"../../../../core/maybe.js\";\nimport { property as c } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as u } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { DrapeSourceType as a, DrapedRenderGroup as d } from \"../../layers/interfaces.js\";\nimport { DirtyOperation as n } from \"../../webgl-engine/lib/ModelDirtyTypes.js\";\nimport { UpdatePolicy as h } from \"../../webgl-engine/lib/UpdatePolicy.js\";\nclass _ {\n  constructor(e) {\n    this._resourceFactory = e, this._resources = null, this._visible = !0, this._attached = !1, this._renderGroup = d.Outline;\n  }\n  destroy() {\n    this._destroyResources();\n  }\n  get resources() {\n    return t(this._resources) ? this._resources.external : null;\n  }\n  get visible() {\n    return this._visible;\n  }\n  set visible(e) {\n    e !== this._visible && (this._visible = e, this._syncGeometriesToRenderer());\n  }\n  get attached() {\n    return this._attached;\n  }\n  set attached(e) {\n    e !== this._attached && (this._attached = e, this._createOrDestroyResources());\n  }\n  get renderGroup() {\n    return this._renderGroup;\n  }\n  set renderGroup(e) {\n    this._renderGroup = e;\n    const r = o(this._resources)?.layerView;\n    r && (r.renderGroup = e);\n  }\n  recreate() {\n    this.attached && this._createResources();\n  }\n  recreateGeometry() {\n    this._resourceFactory.recreateGeometry ? i(this._resources) || (this._ensureRenderGeometriesRemoved(), this._resourceFactory.recreateGeometry(this._resources.external), this._syncGeometriesToRenderer()) : this.recreate();\n  }\n  _createOrDestroyResources() {\n    this._attached ? i(this._resources) && this._createResources() : this._destroyResources();\n  }\n  _createResources() {\n    this._destroyResources();\n    const e = this._resourceFactory.createResources(),\n      r = new p({\n        view: this._resourceFactory.view,\n        renderGroup: this._renderGroup\n      }),\n      s = this._resourceFactory.view.basemapTerrain?.overlayManager;\n    this._resources = {\n      layerView: new p({\n        view: this._resourceFactory.view,\n        renderGroup: this._renderGroup\n      }),\n      external: e,\n      geometriesAdded: !1\n    }, s && (this._resources.drapeSourceRenderer = s.registerGeometryDrapeSource(r)), this._syncGeometriesToRenderer();\n  }\n  _destroyResources() {\n    if (i(this._resources)) return;\n    this._ensureRenderGeometriesRemoved();\n    const e = this._resourceFactory.view.basemapTerrain?.overlayManager;\n    e && e.unregisterDrapeSource(this._resources.layerView), this._resourceFactory.destroyResources(this._resources.external), this._resources = null;\n  }\n  _syncGeometriesToRenderer() {\n    this._visible ? this._ensureRenderGeometriesAdded() : this._ensureRenderGeometriesRemoved();\n  }\n  _ensureRenderGeometriesRemoved() {\n    if (i(this._resources) || i(this._resources.drapeSourceRenderer)) return;\n    if (!this._resources.geometriesAdded) return;\n    this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries, n.UPDATE), this._resources.geometriesAdded = !1;\n  }\n  _ensureRenderGeometriesAdded() {\n    if (i(this._resources) || i(this._resources.drapeSourceRenderer)) return;\n    if (this._resources.geometriesAdded) return;\n    this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries, n.UPDATE), this._resources.geometriesAdded = !0;\n  }\n}\nlet p = class extends s(r) {\n  constructor(e) {\n    super(e), this.drapeSourceType = a.Features, this.updatePolicy = h.SYNC, this.renderGroup = d.Outline;\n  }\n};\ne([c({\n  constructOnly: !0\n})], p.prototype, \"view\", void 0), e([c({\n  readOnly: !0\n})], p.prototype, \"drapeSourceType\", void 0), e([c()], p.prototype, \"renderGroup\", void 0), p = e([u(\"DrapedVisualElementLayerView\")], p);\nexport { _ as DrapedVisualElementResources };","map":{"version":3,"names":["_","e","r","IdentifiableMixin","s","isSome","t","toNullable","o","isNone","i","property","c","subclass","u","DrapeSourceType","a","DrapedRenderGroup","d","DirtyOperation","n","UpdatePolicy","h","constructor","_resourceFactory","_resources","_visible","_attached","_renderGroup","Outline","destroy","_destroyResources","resources","external","visible","_syncGeometriesToRenderer","attached","_createOrDestroyResources","renderGroup","layerView","recreate","_createResources","recreateGeometry","_ensureRenderGeometriesRemoved","createResources","p","view","basemapTerrain","overlayManager","geometriesAdded","drapeSourceRenderer","registerGeometryDrapeSource","unregisterDrapeSource","destroyResources","_ensureRenderGeometriesAdded","removeGeometries","geometries","UPDATE","addGeometries","drapeSourceType","Features","updatePolicy","SYNC","constructOnly","prototype","readOnly","DrapedVisualElementResources"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/interactive/visualElements/DrapedVisualElementResources.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{IdentifiableMixin as s}from\"../../../../core/Identifiable.js\";import{isSome as t,toNullable as o,isNone as i}from\"../../../../core/maybe.js\";import{property as c}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{DrapeSourceType as a,DrapedRenderGroup as d}from\"../../layers/interfaces.js\";import{DirtyOperation as n}from\"../../webgl-engine/lib/ModelDirtyTypes.js\";import{UpdatePolicy as h}from\"../../webgl-engine/lib/UpdatePolicy.js\";class _{constructor(e){this._resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1,this._renderGroup=d.Outline}destroy(){this._destroyResources()}get resources(){return t(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncGeometriesToRenderer())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}get renderGroup(){return this._renderGroup}set renderGroup(e){this._renderGroup=e;const r=o(this._resources)?.layerView;r&&(r.renderGroup=e)}recreate(){this.attached&&this._createResources()}recreateGeometry(){this._resourceFactory.recreateGeometry?i(this._resources)||(this._ensureRenderGeometriesRemoved(),this._resourceFactory.recreateGeometry(this._resources.external),this._syncGeometriesToRenderer()):this.recreate()}_createOrDestroyResources(){this._attached?i(this._resources)&&this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const e=this._resourceFactory.createResources(),r=new p({view:this._resourceFactory.view,renderGroup:this._renderGroup}),s=this._resourceFactory.view.basemapTerrain?.overlayManager;this._resources={layerView:new p({view:this._resourceFactory.view,renderGroup:this._renderGroup}),external:e,geometriesAdded:!1},s&&(this._resources.drapeSourceRenderer=s.registerGeometryDrapeSource(r)),this._syncGeometriesToRenderer()}_destroyResources(){if(i(this._resources))return;this._ensureRenderGeometriesRemoved();const e=this._resourceFactory.view.basemapTerrain?.overlayManager;e&&e.unregisterDrapeSource(this._resources.layerView),this._resourceFactory.destroyResources(this._resources.external),this._resources=null}_syncGeometriesToRenderer(){this._visible?this._ensureRenderGeometriesAdded():this._ensureRenderGeometriesRemoved()}_ensureRenderGeometriesRemoved(){if(i(this._resources)||i(this._resources.drapeSourceRenderer))return;if(!this._resources.geometriesAdded)return;this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries,n.UPDATE),this._resources.geometriesAdded=!1}_ensureRenderGeometriesAdded(){if(i(this._resources)||i(this._resources.drapeSourceRenderer))return;if(this._resources.geometriesAdded)return;this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries,n.UPDATE),this._resources.geometriesAdded=!0}}let p=class extends(s(r)){constructor(e){super(e),this.drapeSourceType=a.Features,this.updatePolicy=h.SYNC,this.renderGroup=d.Outline}};e([c({constructOnly:!0})],p.prototype,\"view\",void 0),e([c({readOnly:!0})],p.prototype,\"drapeSourceType\",void 0),e([c()],p.prototype,\"renderGroup\",void 0),p=e([u(\"DrapedVisualElementLayerView\")],p);export{_ as DrapedVisualElementResources};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}