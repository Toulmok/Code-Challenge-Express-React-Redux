{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as o } from \"../../../../../../core/maybe.js\";\nimport { I as r } from \"../../../../../../chunks/mat4f64.js\";\nimport { addNearFar as e } from \"../ForwardLinearDepth.glsl.js\";\nimport { ShaderOutput as t } from \"../ShaderOutput.js\";\nimport { SliceDraw as i } from \"../Slice.glsl.js\";\nimport { Transform as a } from \"../Transform.glsl.js\";\nimport { NormalAttribute as s, NormalAttributeType as l } from \"../attributes/NormalAttribute.glsl.js\";\nimport { ObjectAndLayerIdColor as d } from \"../attributes/ObjectAndLayerIdColor.glsl.js\";\nimport { TextureCoordinateAttribute as n } from \"../attributes/TextureCoordinateAttribute.glsl.js\";\nimport { VertexNormal as c } from \"../attributes/VertexNormal.glsl.js\";\nimport { OutputDepth as u } from \"../output/OutputDepth.glsl.js\";\nimport { OutputHighlight as m } from \"../output/OutputHighlight.glsl.js\";\nimport { VisualVariables as p } from \"../shading/VisualVariables.glsl.js\";\nimport { DiscardOrAdjustAlphaPass as v } from \"../util/AlphaDiscard.glsl.js\";\nimport { addProjViewLocalOrigin as f } from \"../util/View.glsl.js\";\nimport { glsl as g } from \"../../shaderModules/interfaces.js\";\nimport { Matrix4PassUniform as h } from \"../../shaderModules/Matrix4PassUniform.js\";\nimport { Texture2DPassUniform as x } from \"../../shaderModules/Texture2DPassUniform.js\";\nimport { AlphaDiscardMode as j } from \"../../../lib/basicInterfaces.js\";\nfunction b(b, O) {\n  const {\n      vertex: w,\n      fragment: C\n    } = b,\n    T = O.hasModelTransformation;\n  T && w.uniforms.add(new h(\"model\", e => o(e.modelTransformation) ? e.modelTransformation : r));\n  const V = O.hasColorTexture && O.alphaDiscardMode !== j.Opaque;\n  switch (O.output) {\n    case t.Depth:\n    case t.Shadow:\n    case t.ShadowHighlight:\n    case t.ShadowExcludeHighlight:\n    case t.ObjectAndLayerIdColor:\n      f(w, O), b.include(a, O), b.include(n, O), b.include(p, O), b.include(u, O), b.include(i, O), b.include(d, O), e(b), b.varyings.add(\"depth\", \"float\"), V && C.uniforms.add(new x(\"tex\", o => o.texture)), w.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            vpos = subtractOrigin(vpos);\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPositionWithDepth(proj, view, ${T ? \"model,\" : \"\"} vpos, nearFar, depth);\n            forwardTextureCoordinates();\n            forwardObjectAndLayerIdColor();\n          }\n        `), b.include(v, O), C.code.add(g`\n          void main(void) {\n            discardBySlice(vpos);\n            ${V ? g`\n                    vec4 texColor = texture2D(tex, ${O.hasColorTextureTransform ? g`colorUV` : g`vuv0`});\n                    discardOrAdjustAlpha(texColor);` : \"\"}\n            ${O.output === t.ObjectAndLayerIdColor ? g`outputObjectAndLayerIdColor();` : g`outputDepth(depth);`}\n          }\n        `);\n      break;\n    case t.Normal:\n      f(w, O), b.include(a, O), b.include(s, O), b.include(c, O), b.include(n, O), b.include(p, O), V && C.uniforms.add(new x(\"tex\", o => o.texture)), b.varyings.add(\"vPositionView\", \"vec3\"), w.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            vpos = subtractOrigin(vpos);\n            ${O.normalType === l.Attribute ? g`\n            vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));` : \"\"}\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, ${T ? \"model,\" : \"\"} vpos);\n            forwardTextureCoordinates();\n          }\n        `), b.include(i, O), b.include(v, O), C.code.add(g`\n          void main() {\n            discardBySlice(vpos);\n            ${V ? g`\n                    vec4 texColor = texture2D(tex, ${O.hasColorTextureTransform ? g`colorUV` : g`vuv0`});\n                    discardOrAdjustAlpha(texColor);` : \"\"}\n\n            ${O.normalType === l.ScreenDerivative ? g`\n                vec3 normal = screenDerivativeNormal(vPositionView);` : g`\n                vec3 normal = normalize(vNormalWorld);\n                if (gl_FrontFacing == false) normal = -normal;`}\n            gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);\n          }\n        `);\n      break;\n    case t.Highlight:\n      f(w, O), b.include(a, O), b.include(n, O), b.include(p, O), V && C.uniforms.add(new x(\"tex\", o => o.texture)), w.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            vpos = subtractOrigin(vpos);\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, ${T ? \"model,\" : \"\"} vpos);\n            forwardTextureCoordinates();\n          }\n        `), b.include(i, O), b.include(v, O), b.include(m, O), C.code.add(g`\n          void main() {\n            discardBySlice(vpos);\n            ${V ? g`\n                    vec4 texColor = texture2D(tex, ${O.hasColorTextureTransform ? g`colorUV` : g`vuv0`});\n                    discardOrAdjustAlpha(texColor);` : \"\"}\n            outputHighlight();\n          }\n        `);\n  }\n}\nexport { b as DefaultMaterialAuxiliaryPasses };","map":{"version":3,"names":["isSome","o","I","r","addNearFar","e","ShaderOutput","t","SliceDraw","i","Transform","a","NormalAttribute","s","NormalAttributeType","l","ObjectAndLayerIdColor","d","TextureCoordinateAttribute","n","VertexNormal","c","OutputDepth","u","OutputHighlight","m","VisualVariables","p","DiscardOrAdjustAlphaPass","v","addProjViewLocalOrigin","f","glsl","g","Matrix4PassUniform","h","Texture2DPassUniform","x","AlphaDiscardMode","j","b","O","vertex","w","fragment","C","T","hasModelTransformation","uniforms","add","modelTransformation","V","hasColorTexture","alphaDiscardMode","Opaque","output","Depth","Shadow","ShadowHighlight","ShadowExcludeHighlight","include","varyings","texture","code","hasColorTextureTransform","Normal","normalType","Attribute","ScreenDerivative","Highlight","DefaultMaterialAuxiliaryPasses"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as o}from\"../../../../../../core/maybe.js\";import{I as r}from\"../../../../../../chunks/mat4f64.js\";import{addNearFar as e}from\"../ForwardLinearDepth.glsl.js\";import{ShaderOutput as t}from\"../ShaderOutput.js\";import{SliceDraw as i}from\"../Slice.glsl.js\";import{Transform as a}from\"../Transform.glsl.js\";import{NormalAttribute as s,NormalAttributeType as l}from\"../attributes/NormalAttribute.glsl.js\";import{ObjectAndLayerIdColor as d}from\"../attributes/ObjectAndLayerIdColor.glsl.js\";import{TextureCoordinateAttribute as n}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as c}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as u}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as m}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as p}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlphaPass as v}from\"../util/AlphaDiscard.glsl.js\";import{addProjViewLocalOrigin as f}from\"../util/View.glsl.js\";import{glsl as g}from\"../../shaderModules/interfaces.js\";import{Matrix4PassUniform as h}from\"../../shaderModules/Matrix4PassUniform.js\";import{Texture2DPassUniform as x}from\"../../shaderModules/Texture2DPassUniform.js\";import{AlphaDiscardMode as j}from\"../../../lib/basicInterfaces.js\";function b(b,O){const{vertex:w,fragment:C}=b,T=O.hasModelTransformation;T&&w.uniforms.add(new h(\"model\",(e=>o(e.modelTransformation)?e.modelTransformation:r)));const V=O.hasColorTexture&&O.alphaDiscardMode!==j.Opaque;switch(O.output){case t.Depth:case t.Shadow:case t.ShadowHighlight:case t.ShadowExcludeHighlight:case t.ObjectAndLayerIdColor:f(w,O),b.include(a,O),b.include(n,O),b.include(p,O),b.include(u,O),b.include(i,O),b.include(d,O),e(b),b.varyings.add(\"depth\",\"float\"),V&&C.uniforms.add(new x(\"tex\",(o=>o.texture))),w.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            vpos = subtractOrigin(vpos);\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPositionWithDepth(proj, view, ${T?\"model,\":\"\"} vpos, nearFar, depth);\n            forwardTextureCoordinates();\n            forwardObjectAndLayerIdColor();\n          }\n        `),b.include(v,O),C.code.add(g`\n          void main(void) {\n            discardBySlice(vpos);\n            ${V?g`\n                    vec4 texColor = texture2D(tex, ${O.hasColorTextureTransform?g`colorUV`:g`vuv0`});\n                    discardOrAdjustAlpha(texColor);`:\"\"}\n            ${O.output===t.ObjectAndLayerIdColor?g`outputObjectAndLayerIdColor();`:g`outputDepth(depth);`}\n          }\n        `);break;case t.Normal:f(w,O),b.include(a,O),b.include(s,O),b.include(c,O),b.include(n,O),b.include(p,O),V&&C.uniforms.add(new x(\"tex\",(o=>o.texture))),b.varyings.add(\"vPositionView\",\"vec3\"),w.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            vpos = subtractOrigin(vpos);\n            ${O.normalType===l.Attribute?g`\n            vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:\"\"}\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, ${T?\"model,\":\"\"} vpos);\n            forwardTextureCoordinates();\n          }\n        `),b.include(i,O),b.include(v,O),C.code.add(g`\n          void main() {\n            discardBySlice(vpos);\n            ${V?g`\n                    vec4 texColor = texture2D(tex, ${O.hasColorTextureTransform?g`colorUV`:g`vuv0`});\n                    discardOrAdjustAlpha(texColor);`:\"\"}\n\n            ${O.normalType===l.ScreenDerivative?g`\n                vec3 normal = screenDerivativeNormal(vPositionView);`:g`\n                vec3 normal = normalize(vNormalWorld);\n                if (gl_FrontFacing == false) normal = -normal;`}\n            gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);\n          }\n        `);break;case t.Highlight:f(w,O),b.include(a,O),b.include(n,O),b.include(p,O),V&&C.uniforms.add(new x(\"tex\",(o=>o.texture))),w.code.add(g`\n          void main(void) {\n            vpos = calculateVPos();\n            vpos = subtractOrigin(vpos);\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, ${T?\"model,\":\"\"} vpos);\n            forwardTextureCoordinates();\n          }\n        `),b.include(i,O),b.include(v,O),b.include(m,O),C.code.add(g`\n          void main() {\n            discardBySlice(vpos);\n            ${V?g`\n                    vec4 texColor = texture2D(tex, ${O.hasColorTextureTransform?g`colorUV`:g`vuv0`});\n                    discardOrAdjustAlpha(texColor);`:\"\"}\n            outputHighlight();\n          }\n        `)}}export{b as DefaultMaterialAuxiliaryPasses};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}