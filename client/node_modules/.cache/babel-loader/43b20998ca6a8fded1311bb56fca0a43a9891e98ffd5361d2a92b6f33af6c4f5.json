{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { result as r } from \"../../core/asyncUtils.js\";\nimport e from \"../../core/Error.js\";\nimport { isSome as o } from \"../../core/maybe.js\";\nimport { eachAlways as t, throwIfAborted as s } from \"../../core/promiseUtils.js\";\nimport { generateUUID as c } from \"../../core/uuid.js\";\nimport { getSiblingOfSameTypeI as p } from \"../../portal/support/resourceUtils.js\";\nasync function a(r, o, a) {\n  if (!o || !o.resources) return;\n  const h = o.portalItem === r.portalItem ? new Set(r.paths) : new Set();\n  r.paths.length = 0, r.portalItem = o.portalItem;\n  const i = new Set(o.resources.toKeep.map(r => r.resource.path)),\n    m = new Set(),\n    f = [];\n  i.forEach(e => {\n    h.delete(e), r.paths.push(e);\n  });\n  for (const e of o.resources.toUpdate) if (h.delete(e.resource.path), i.has(e.resource.path) || m.has(e.resource.path)) {\n    const {\n        resource: o,\n        content: t,\n        finish: s,\n        error: u\n      } = e,\n      h = p(o, c());\n    r.paths.push(h.path), f.push(n({\n      resource: h,\n      content: t,\n      compress: e.compress,\n      finish: s,\n      error: u\n    }, a));\n  } else r.paths.push(e.resource.path), f.push(u(e, a)), m.add(e.resource.path);\n  for (const e of o.resources.toAdd) f.push(n(e, a)), r.paths.push(e.resource.path);\n  if (h.forEach(r => {\n    if (o.portalItem) {\n      const e = o.portalItem.resourceFromPath(r);\n      f.push(e.portalItem.removeResource(e).catch(() => {}));\n    }\n  }), 0 === f.length) return;\n  const l = await t(f);\n  s(a);\n  const d = l.filter(r => \"error\" in r).map(r => r.error);\n  if (d.length > 0) throw new e(\"save:resources\", \"Failed to save one or more resources\", {\n    errors: d\n  });\n}\nasync function n(e, t) {\n  const s = {\n      ...(o(t) ? t : {}),\n      compress: e.compress\n    },\n    c = await r(e.resource.portalItem.addResource(e.resource, e.content, s));\n  if (!0 !== c.ok) throw e.error?.(c.error), c.error;\n  e.finish?.(e.resource);\n}\nasync function u(e, o) {\n  const t = await r(e.resource.update(e.content, o));\n  if (!0 !== t.ok) throw e.error?.(t.error), t.error;\n  e.finish?.(e.resource);\n}\nexport { a as saveResources };","map":{"version":3,"names":["result","r","e","isSome","o","eachAlways","t","throwIfAborted","s","generateUUID","c","getSiblingOfSameTypeI","p","a","resources","h","portalItem","Set","paths","length","i","toKeep","map","resource","path","m","f","forEach","delete","push","toUpdate","has","content","finish","error","u","n","compress","add","toAdd","resourceFromPath","removeResource","catch","l","d","filter","errors","addResource","ok","update","saveResources"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/webdoc/support/saveUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{result as r}from\"../../core/asyncUtils.js\";import e from\"../../core/Error.js\";import{isSome as o}from\"../../core/maybe.js\";import{eachAlways as t,throwIfAborted as s}from\"../../core/promiseUtils.js\";import{generateUUID as c}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as p}from\"../../portal/support/resourceUtils.js\";async function a(r,o,a){if(!o||!o.resources)return;const h=o.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=o.portalItem;const i=new Set(o.resources.toKeep.map((r=>r.resource.path))),m=new Set,f=[];i.forEach((e=>{h.delete(e),r.paths.push(e)}));for(const e of o.resources.toUpdate)if(h.delete(e.resource.path),i.has(e.resource.path)||m.has(e.resource.path)){const{resource:o,content:t,finish:s,error:u}=e,h=p(o,c());r.paths.push(h.path),f.push(n({resource:h,content:t,compress:e.compress,finish:s,error:u},a))}else r.paths.push(e.resource.path),f.push(u(e,a)),m.add(e.resource.path);for(const e of o.resources.toAdd)f.push(n(e,a)),r.paths.push(e.resource.path);if(h.forEach((r=>{if(o.portalItem){const e=o.portalItem.resourceFromPath(r);f.push(e.portalItem.removeResource(e).catch((()=>{})))}})),0===f.length)return;const l=await t(f);s(a);const d=l.filter((r=>\"error\"in r)).map((r=>r.error));if(d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d})}async function n(e,t){const s={...o(t)?t:{},compress:e.compress},c=await r(e.resource.portalItem.addResource(e.resource,e.content,s));if(!0!==c.ok)throw e.error?.(c.error),c.error;e.finish?.(e.resource)}async function u(e,o){const t=await r(e.resource.update(e.content,o));if(!0!==t.ok)throw e.error?.(t.error),t.error;e.finish?.(e.resource)}export{a as saveResources};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAC,QAAK,0BAA0B;AAAC,OAAOC,CAAC,MAAK,qBAAqB;AAAC,SAAOC,MAAM,IAAIC,CAAC,QAAK,qBAAqB;AAAC,SAAOC,UAAU,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,QAAK,4BAA4B;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,oBAAoB;AAAC,SAAOC,qBAAqB,IAAIC,CAAC,QAAK,uCAAuC;AAAC,eAAeC,CAACA,CAACZ,CAAC,EAACG,CAAC,EAACS,CAAC,EAAC;EAAC,IAAG,CAACT,CAAC,IAAE,CAACA,CAAC,CAACU,SAAS,EAAC;EAAO,MAAMC,CAAC,GAACX,CAAC,CAACY,UAAU,KAAGf,CAAC,CAACe,UAAU,GAAC,IAAIC,GAAG,CAAChB,CAAC,CAACiB,KAAK,CAAC,GAAC,IAAID,GAAG;EAAChB,CAAC,CAACiB,KAAK,CAACC,MAAM,GAAC,CAAC,EAAClB,CAAC,CAACe,UAAU,GAACZ,CAAC,CAACY,UAAU;EAAC,MAAMI,CAAC,GAAC,IAAIH,GAAG,CAACb,CAAC,CAACU,SAAS,CAACO,MAAM,CAACC,GAAG,CAAErB,CAAC,IAAEA,CAAC,CAACsB,QAAQ,CAACC,IAAI,CAAE,CAAC;IAACC,CAAC,GAAC,IAAIR,GAAG;IAACS,CAAC,GAAC,EAAE;EAACN,CAAC,CAACO,OAAO,CAAEzB,CAAC,IAAE;IAACa,CAAC,CAACa,MAAM,CAAC1B,CAAC,CAAC,EAACD,CAAC,CAACiB,KAAK,CAACW,IAAI,CAAC3B,CAAC,CAAC;EAAA,CAAC,CAAE;EAAC,KAAI,MAAMA,CAAC,IAAIE,CAAC,CAACU,SAAS,CAACgB,QAAQ,EAAC,IAAGf,CAAC,CAACa,MAAM,CAAC1B,CAAC,CAACqB,QAAQ,CAACC,IAAI,CAAC,EAACJ,CAAC,CAACW,GAAG,CAAC7B,CAAC,CAACqB,QAAQ,CAACC,IAAI,CAAC,IAAEC,CAAC,CAACM,GAAG,CAAC7B,CAAC,CAACqB,QAAQ,CAACC,IAAI,CAAC,EAAC;IAAC,MAAK;QAACD,QAAQ,EAACnB,CAAC;QAAC4B,OAAO,EAAC1B,CAAC;QAAC2B,MAAM,EAACzB,CAAC;QAAC0B,KAAK,EAACC;MAAC,CAAC,GAACjC,CAAC;MAACa,CAAC,GAACH,CAAC,CAACR,CAAC,EAACM,CAAC,EAAE,CAAC;IAACT,CAAC,CAACiB,KAAK,CAACW,IAAI,CAACd,CAAC,CAACS,IAAI,CAAC,EAACE,CAAC,CAACG,IAAI,CAACO,CAAC,CAAC;MAACb,QAAQ,EAACR,CAAC;MAACiB,OAAO,EAAC1B,CAAC;MAAC+B,QAAQ,EAACnC,CAAC,CAACmC,QAAQ;MAACJ,MAAM,EAACzB,CAAC;MAAC0B,KAAK,EAACC;IAAC,CAAC,EAACtB,CAAC,CAAC,CAAC;EAAA,CAAC,MAAKZ,CAAC,CAACiB,KAAK,CAACW,IAAI,CAAC3B,CAAC,CAACqB,QAAQ,CAACC,IAAI,CAAC,EAACE,CAAC,CAACG,IAAI,CAACM,CAAC,CAACjC,CAAC,EAACW,CAAC,CAAC,CAAC,EAACY,CAAC,CAACa,GAAG,CAACpC,CAAC,CAACqB,QAAQ,CAACC,IAAI,CAAC;EAAC,KAAI,MAAMtB,CAAC,IAAIE,CAAC,CAACU,SAAS,CAACyB,KAAK,EAACb,CAAC,CAACG,IAAI,CAACO,CAAC,CAAClC,CAAC,EAACW,CAAC,CAAC,CAAC,EAACZ,CAAC,CAACiB,KAAK,CAACW,IAAI,CAAC3B,CAAC,CAACqB,QAAQ,CAACC,IAAI,CAAC;EAAC,IAAGT,CAAC,CAACY,OAAO,CAAE1B,CAAC,IAAE;IAAC,IAAGG,CAAC,CAACY,UAAU,EAAC;MAAC,MAAMd,CAAC,GAACE,CAAC,CAACY,UAAU,CAACwB,gBAAgB,CAACvC,CAAC,CAAC;MAACyB,CAAC,CAACG,IAAI,CAAC3B,CAAC,CAACc,UAAU,CAACyB,cAAc,CAACvC,CAAC,CAAC,CAACwC,KAAK,CAAE,MAAI,CAAC,CAAC,CAAE,CAAC;IAAA;EAAC,CAAC,CAAE,EAAC,CAAC,KAAGhB,CAAC,CAACP,MAAM,EAAC;EAAO,MAAMwB,CAAC,GAAC,MAAMrC,CAAC,CAACoB,CAAC,CAAC;EAAClB,CAAC,CAACK,CAAC,CAAC;EAAC,MAAM+B,CAAC,GAACD,CAAC,CAACE,MAAM,CAAE5C,CAAC,IAAE,OAAO,IAAGA,CAAC,CAAE,CAACqB,GAAG,CAAErB,CAAC,IAAEA,CAAC,CAACiC,KAAK,CAAE;EAAC,IAAGU,CAAC,CAACzB,MAAM,GAAC,CAAC,EAAC,MAAM,IAAIjB,CAAC,CAAC,gBAAgB,EAAC,sCAAsC,EAAC;IAAC4C,MAAM,EAACF;EAAC,CAAC,CAAC;AAAA;AAAC,eAAeR,CAACA,CAAClC,CAAC,EAACI,CAAC,EAAC;EAAC,MAAME,CAAC,GAAC;MAAC,IAAGJ,CAAC,CAACE,CAAC,CAAC,GAACA,CAAC,GAAC,CAAC,CAAC;MAAC+B,QAAQ,EAACnC,CAAC,CAACmC;IAAQ,CAAC;IAAC3B,CAAC,GAAC,MAAMT,CAAC,CAACC,CAAC,CAACqB,QAAQ,CAACP,UAAU,CAAC+B,WAAW,CAAC7C,CAAC,CAACqB,QAAQ,EAACrB,CAAC,CAAC8B,OAAO,EAACxB,CAAC,CAAC,CAAC;EAAC,IAAG,CAAC,CAAC,KAAGE,CAAC,CAACsC,EAAE,EAAC,MAAM9C,CAAC,CAACgC,KAAK,GAAGxB,CAAC,CAACwB,KAAK,CAAC,EAACxB,CAAC,CAACwB,KAAK;EAAChC,CAAC,CAAC+B,MAAM,GAAG/B,CAAC,CAACqB,QAAQ,CAAC;AAAA;AAAC,eAAeY,CAACA,CAACjC,CAAC,EAACE,CAAC,EAAC;EAAC,MAAME,CAAC,GAAC,MAAML,CAAC,CAACC,CAAC,CAACqB,QAAQ,CAAC0B,MAAM,CAAC/C,CAAC,CAAC8B,OAAO,EAAC5B,CAAC,CAAC,CAAC;EAAC,IAAG,CAAC,CAAC,KAAGE,CAAC,CAAC0C,EAAE,EAAC,MAAM9C,CAAC,CAACgC,KAAK,GAAG5B,CAAC,CAAC4B,KAAK,CAAC,EAAC5B,CAAC,CAAC4B,KAAK;EAAChC,CAAC,CAAC+B,MAAM,GAAG/B,CAAC,CAACqB,QAAQ,CAAC;AAAA;AAAC,SAAOV,CAAC,IAAIqC,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}