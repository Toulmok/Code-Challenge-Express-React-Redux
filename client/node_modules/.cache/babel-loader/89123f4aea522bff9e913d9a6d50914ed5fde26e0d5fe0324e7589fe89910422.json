{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t } from \"../../../../../core/maybe.js\";\nimport { TranslateAnchor as r } from \"../../vectorTiles/style/StyleDefinition.js\";\nimport { WGLDrawPhase as i } from \"../enums.js\";\nimport { u32to4Xu8 as a } from \"../number.js\";\nimport n from \"./WGLBrush.js\";\nimport { CompareFunction as s, PrimitiveType as o, DataType as l } from \"../../../../webgl/enums.js\";\nclass c extends n {\n  constructor() {\n    super(...arguments), this._programOptions = {\n      id: !1\n    };\n  }\n  dispose() {}\n  drawMany(n, c) {\n    const {\n      context: m,\n      displayLevel: d,\n      requiredLevel: f,\n      state: u,\n      drawPhase: p,\n      painter: y,\n      spriteMosaic: g,\n      styleLayerUID: v,\n      requestRender: E,\n      allowDelayedRender: M\n    } = n;\n    if (!c.some(e => e.layerData.get(v)?.circleIndexCount ?? !1)) return;\n    const T = n.styleLayer,\n      x = T.circleMaterial,\n      I = y.vectorTilesMaterialManager,\n      U = 1.2,\n      _ = T.getPaintValue(\"circle-translate\", d),\n      R = T.getPaintValue(\"circle-translate-anchor\", d),\n      h = p === i.HITTEST,\n      D = this._programOptions;\n    D.id = h;\n    const L = I.getMaterialProgram(m, x, D);\n    if (M && e(E) && !L.compiled) return void E();\n    m.useProgram(L), L.setUniformMatrix3fv(\"u_displayMat3\", R === r.VIEWPORT ? u.displayMat3 : u.displayViewMat3), L.setUniform2fv(\"u_circleTranslation\", _), L.setUniform1f(\"u_depth\", T.z), L.setUniform1f(\"u_antialiasingWidth\", U);\n    let S = -1;\n    if (h) {\n      const e = a(v + 1);\n      L.setUniform4fv(\"u_id\", e);\n    }\n    for (const e of c) {\n      if (!e.layerData.has(v)) continue;\n      e.key.level !== S && (S = e.key.level, x.setDataUniforms(L, d, T, S, g));\n      const r = e.layerData.get(v);\n      if (!r.circleIndexCount) continue;\n      r.prepareForRendering(m);\n      const i = r.circleVertexArrayObject;\n      t(i) || (m.bindVAO(i), L.setUniformMatrix3fv(\"u_dvsMat3\", e.transforms.dvs), f !== e.key.level ? m.setStencilFunction(s.EQUAL, e.stencilRef, 255) : m.setStencilFunction(s.GREATER, 255, 255), m.drawElements(o.TRIANGLES, r.circleIndexCount, l.UNSIGNED_INT, Uint32Array.BYTES_PER_ELEMENT * r.circleIndexStart), e.triangleCount += r.circleIndexCount / 3);\n    }\n  }\n}\nexport { c as WGLBrushVTLCircle };","map":{"version":3,"names":["isSome","e","isNone","t","TranslateAnchor","r","WGLDrawPhase","i","u32to4Xu8","a","n","CompareFunction","s","PrimitiveType","o","DataType","l","c","constructor","arguments","_programOptions","id","dispose","drawMany","context","m","displayLevel","d","requiredLevel","f","state","u","drawPhase","p","painter","y","spriteMosaic","g","styleLayerUID","v","requestRender","E","allowDelayedRender","M","some","layerData","get","circleIndexCount","T","styleLayer","x","circleMaterial","I","vectorTilesMaterialManager","U","_","getPaintValue","R","h","HITTEST","D","L","getMaterialProgram","compiled","useProgram","setUniformMatrix3fv","VIEWPORT","displayMat3","displayViewMat3","setUniform2fv","setUniform1f","z","S","setUniform4fv","has","key","level","setDataUniforms","prepareForRendering","circleVertexArrayObject","bindVAO","transforms","dvs","setStencilFunction","EQUAL","stencilRef","GREATER","drawElements","TRIANGLES","UNSIGNED_INT","Uint32Array","BYTES_PER_ELEMENT","circleIndexStart","triangleCount","WGLBrushVTLCircle"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLCircle.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../../core/maybe.js\";import{TranslateAnchor as r}from\"../../vectorTiles/style/StyleDefinition.js\";import{WGLDrawPhase as i}from\"../enums.js\";import{u32to4Xu8 as a}from\"../number.js\";import n from\"./WGLBrush.js\";import{CompareFunction as s,PrimitiveType as o,DataType as l}from\"../../../../webgl/enums.js\";class c extends n{constructor(){super(...arguments),this._programOptions={id:!1}}dispose(){}drawMany(n,c){const{context:m,displayLevel:d,requiredLevel:f,state:u,drawPhase:p,painter:y,spriteMosaic:g,styleLayerUID:v,requestRender:E,allowDelayedRender:M}=n;if(!c.some((e=>e.layerData.get(v)?.circleIndexCount??!1)))return;const T=n.styleLayer,x=T.circleMaterial,I=y.vectorTilesMaterialManager,U=1.2,_=T.getPaintValue(\"circle-translate\",d),R=T.getPaintValue(\"circle-translate-anchor\",d),h=p===i.HITTEST,D=this._programOptions;D.id=h;const L=I.getMaterialProgram(m,x,D);if(M&&e(E)&&!L.compiled)return void E();m.useProgram(L),L.setUniformMatrix3fv(\"u_displayMat3\",R===r.VIEWPORT?u.displayMat3:u.displayViewMat3),L.setUniform2fv(\"u_circleTranslation\",_),L.setUniform1f(\"u_depth\",T.z),L.setUniform1f(\"u_antialiasingWidth\",U);let S=-1;if(h){const e=a(v+1);L.setUniform4fv(\"u_id\",e)}for(const e of c){if(!e.layerData.has(v))continue;e.key.level!==S&&(S=e.key.level,x.setDataUniforms(L,d,T,S,g));const r=e.layerData.get(v);if(!r.circleIndexCount)continue;r.prepareForRendering(m);const i=r.circleVertexArrayObject;t(i)||(m.bindVAO(i),L.setUniformMatrix3fv(\"u_dvsMat3\",e.transforms.dvs),f!==e.key.level?m.setStencilFunction(s.EQUAL,e.stencilRef,255):m.setStencilFunction(s.GREATER,255,255),m.drawElements(o.TRIANGLES,r.circleIndexCount,l.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*r.circleIndexStart),e.triangleCount+=r.circleIndexCount/3)}}}export{c as WGLBrushVTLCircle};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAC,EAACC,MAAM,IAAIC,CAAC,QAAK,8BAA8B;AAAC,SAAOC,eAAe,IAAIC,CAAC,QAAK,4CAA4C;AAAC,SAAOC,YAAY,IAAIC,CAAC,QAAK,aAAa;AAAC,SAAOC,SAAS,IAAIC,CAAC,QAAK,cAAc;AAAC,OAAOC,CAAC,MAAK,eAAe;AAAC,SAAOC,eAAe,IAAIC,CAAC,EAACC,aAAa,IAAIC,CAAC,EAACC,QAAQ,IAAIC,CAAC,QAAK,4BAA4B;AAAC,MAAMC,CAAC,SAASP,CAAC;EAACQ,WAAWA,CAAA,EAAE;IAAC,KAAK,CAAC,GAAGC,SAAS,CAAC,EAAC,IAAI,CAACC,eAAe,GAAC;MAACC,EAAE,EAAC,CAAC;IAAC,CAAC;EAAA;EAACC,OAAOA,CAAA,EAAE,CAAC;EAACC,QAAQA,CAACb,CAAC,EAACO,CAAC,EAAC;IAAC,MAAK;MAACO,OAAO,EAACC,CAAC;MAACC,YAAY,EAACC,CAAC;MAACC,aAAa,EAACC,CAAC;MAACC,KAAK,EAACC,CAAC;MAACC,SAAS,EAACC,CAAC;MAACC,OAAO,EAACC,CAAC;MAACC,YAAY,EAACC,CAAC;MAACC,aAAa,EAACC,CAAC;MAACC,aAAa,EAACC,CAAC;MAACC,kBAAkB,EAACC;IAAC,CAAC,GAACjC,CAAC;IAAC,IAAG,CAACO,CAAC,CAAC2B,IAAI,CAAE3C,CAAC,IAAEA,CAAC,CAAC4C,SAAS,CAACC,GAAG,CAACP,CAAC,CAAC,EAAEQ,gBAAgB,IAAE,CAAC,CAAC,CAAE,EAAC;IAAO,MAAMC,CAAC,GAACtC,CAAC,CAACuC,UAAU;MAACC,CAAC,GAACF,CAAC,CAACG,cAAc;MAACC,CAAC,GAACjB,CAAC,CAACkB,0BAA0B;MAACC,CAAC,GAAC,GAAG;MAACC,CAAC,GAACP,CAAC,CAACQ,aAAa,CAAC,kBAAkB,EAAC7B,CAAC,CAAC;MAAC8B,CAAC,GAACT,CAAC,CAACQ,aAAa,CAAC,yBAAyB,EAAC7B,CAAC,CAAC;MAAC+B,CAAC,GAACzB,CAAC,KAAG1B,CAAC,CAACoD,OAAO;MAACC,CAAC,GAAC,IAAI,CAACxC,eAAe;IAACwC,CAAC,CAACvC,EAAE,GAACqC,CAAC;IAAC,MAAMG,CAAC,GAACT,CAAC,CAACU,kBAAkB,CAACrC,CAAC,EAACyB,CAAC,EAACU,CAAC,CAAC;IAAC,IAAGjB,CAAC,IAAE1C,CAAC,CAACwC,CAAC,CAAC,IAAE,CAACoB,CAAC,CAACE,QAAQ,EAAC,OAAO,KAAKtB,CAAC,EAAE;IAAChB,CAAC,CAACuC,UAAU,CAACH,CAAC,CAAC,EAACA,CAAC,CAACI,mBAAmB,CAAC,eAAe,EAACR,CAAC,KAAGpD,CAAC,CAAC6D,QAAQ,GAACnC,CAAC,CAACoC,WAAW,GAACpC,CAAC,CAACqC,eAAe,CAAC,EAACP,CAAC,CAACQ,aAAa,CAAC,qBAAqB,EAACd,CAAC,CAAC,EAACM,CAAC,CAACS,YAAY,CAAC,SAAS,EAACtB,CAAC,CAACuB,CAAC,CAAC,EAACV,CAAC,CAACS,YAAY,CAAC,qBAAqB,EAAChB,CAAC,CAAC;IAAC,IAAIkB,CAAC,GAAC,CAAC,CAAC;IAAC,IAAGd,CAAC,EAAC;MAAC,MAAMzD,CAAC,GAACQ,CAAC,CAAC8B,CAAC,GAAC,CAAC,CAAC;MAACsB,CAAC,CAACY,aAAa,CAAC,MAAM,EAACxE,CAAC,CAAC;IAAA;IAAC,KAAI,MAAMA,CAAC,IAAIgB,CAAC,EAAC;MAAC,IAAG,CAAChB,CAAC,CAAC4C,SAAS,CAAC6B,GAAG,CAACnC,CAAC,CAAC,EAAC;MAAStC,CAAC,CAAC0E,GAAG,CAACC,KAAK,KAAGJ,CAAC,KAAGA,CAAC,GAACvE,CAAC,CAAC0E,GAAG,CAACC,KAAK,EAAC1B,CAAC,CAAC2B,eAAe,CAAChB,CAAC,EAAClC,CAAC,EAACqB,CAAC,EAACwB,CAAC,EAACnC,CAAC,CAAC,CAAC;MAAC,MAAMhC,CAAC,GAACJ,CAAC,CAAC4C,SAAS,CAACC,GAAG,CAACP,CAAC,CAAC;MAAC,IAAG,CAAClC,CAAC,CAAC0C,gBAAgB,EAAC;MAAS1C,CAAC,CAACyE,mBAAmB,CAACrD,CAAC,CAAC;MAAC,MAAMlB,CAAC,GAACF,CAAC,CAAC0E,uBAAuB;MAAC5E,CAAC,CAACI,CAAC,CAAC,KAAGkB,CAAC,CAACuD,OAAO,CAACzE,CAAC,CAAC,EAACsD,CAAC,CAACI,mBAAmB,CAAC,WAAW,EAAChE,CAAC,CAACgF,UAAU,CAACC,GAAG,CAAC,EAACrD,CAAC,KAAG5B,CAAC,CAAC0E,GAAG,CAACC,KAAK,GAACnD,CAAC,CAAC0D,kBAAkB,CAACvE,CAAC,CAACwE,KAAK,EAACnF,CAAC,CAACoF,UAAU,EAAC,GAAG,CAAC,GAAC5D,CAAC,CAAC0D,kBAAkB,CAACvE,CAAC,CAAC0E,OAAO,EAAC,GAAG,EAAC,GAAG,CAAC,EAAC7D,CAAC,CAAC8D,YAAY,CAACzE,CAAC,CAAC0E,SAAS,EAACnF,CAAC,CAAC0C,gBAAgB,EAAC/B,CAAC,CAACyE,YAAY,EAACC,WAAW,CAACC,iBAAiB,GAACtF,CAAC,CAACuF,gBAAgB,CAAC,EAAC3F,CAAC,CAAC4F,aAAa,IAAExF,CAAC,CAAC0C,gBAAgB,GAAC,CAAC,CAAC;IAAA;EAAC;AAAC;AAAC,SAAO9B,CAAC,IAAI6E,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}