{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../Graphic.js\";\nimport { isSome as r } from \"../../../core/maybe.js\";\nimport { NATIVE_ARRAY_MAX_SIZE as s } from \"../../../core/typedArrayUtil.js\";\nimport { WorkerHandle as t } from \"../../../core/workers/WorkerHandle.js\";\nimport o from \"../../../geometry/SpatialReference.js\";\nimport a from \"../../../layers/support/Field.js\";\nclass n {\n  constructor(e) {\n    this._controller = e, this._handle = new l(r => e.schedule(r));\n  }\n  destroy() {\n    this._handle.destroy();\n  }\n  invoke(s, t) {\n    return s.buffer && 0 !== s.buffer.byteLength ? (s.options.sourceSpatialReference && s.options.sourceSpatialReference instanceof o && (s.options = {\n      ...s.options,\n      sourceSpatialReference: s.options.sourceSpatialReference.toJSON()\n    }), this._handle.invoke(s, t).then(s => {\n      let t = 0,\n        n = 0;\n      const l = async c => {\n        if (s.spatialReference = o.fromJSON(s.spatialReference), s.fields) for (; t < s.fields.length;) if (s.fields[t] = a.fromJSON(s.fields[t]), t++, c.madeProgress()) return this._controller.reschedule(e => l(e));\n        const p = s.spatialReference;\n        for (; n < s.features.length;) {\n          const t = s.features[n];\n          if (++n, t.uid = e.generateUID(), r(t.geometry) && (t.geometry.spatialReference = p, i(t.geometry), c.madeProgress())) return this._controller.reschedule(e => l(e));\n        }\n        return s;\n      };\n      return this._controller.schedule(e => l(e));\n    })) : Promise.resolve(null);\n  }\n}\nfunction i(e) {\n  switch (e.type) {\n    case \"polyline\":\n      e.paths.reduce((e, r) => e + r.length, 0) < s && (e.paths = e.hasZ || e.hasM ? e.paths.map(e => e.map(e => [e[0], e[1], e[2]])) : e.paths.map(e => e.map(e => [e[0], e[1]])));\n      break;\n    case \"polygon\":\n      e.rings.reduce((e, r) => e + r.length, 0) < s && (e.rings = e.hasZ || e.hasM ? e.rings.map(e => e.map(e => [e[0], e[1], e[2]])) : e.rings.map(e => e.map(e => [e[0], e[1]])));\n  }\n}\nclass l extends t {\n  constructor(e) {\n    super(\"PBFDecoderWorker\", \"_parseFeatureQuery\", {\n      _parseFeatureQuery: e => [e.buffer]\n    }, e);\n  }\n}\nexport { n as PBFDecoder };","map":{"version":3,"names":["e","isSome","r","NATIVE_ARRAY_MAX_SIZE","s","WorkerHandle","t","o","a","n","constructor","_controller","_handle","l","schedule","destroy","invoke","buffer","byteLength","options","sourceSpatialReference","toJSON","then","c","spatialReference","fromJSON","fields","length","madeProgress","reschedule","p","features","uid","generateUID","geometry","i","Promise","resolve","type","paths","reduce","hasZ","hasM","map","rings","_parseFeatureQuery","PBFDecoder"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/PBFDecoder.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import{isSome as r}from\"../../../core/maybe.js\";import{NATIVE_ARRAY_MAX_SIZE as s}from\"../../../core/typedArrayUtil.js\";import{WorkerHandle as t}from\"../../../core/workers/WorkerHandle.js\";import o from\"../../../geometry/SpatialReference.js\";import a from\"../../../layers/support/Field.js\";class n{constructor(e){this._controller=e,this._handle=new l((r=>e.schedule(r)))}destroy(){this._handle.destroy()}invoke(s,t){return s.buffer&&0!==s.buffer.byteLength?(s.options.sourceSpatialReference&&s.options.sourceSpatialReference instanceof o&&(s.options={...s.options,sourceSpatialReference:s.options.sourceSpatialReference.toJSON()}),this._handle.invoke(s,t).then((s=>{let t=0,n=0;const l=async c=>{if(s.spatialReference=o.fromJSON(s.spatialReference),s.fields)for(;t<s.fields.length;)if(s.fields[t]=a.fromJSON(s.fields[t]),t++,c.madeProgress())return this._controller.reschedule((e=>l(e)));const p=s.spatialReference;for(;n<s.features.length;){const t=s.features[n];if(++n,t.uid=e.generateUID(),r(t.geometry)&&(t.geometry.spatialReference=p,i(t.geometry),c.madeProgress()))return this._controller.reschedule((e=>l(e)))}return s};return this._controller.schedule((e=>l(e)))}))):Promise.resolve(null)}}function i(e){switch(e.type){case\"polyline\":e.paths.reduce(((e,r)=>e+r.length),0)<s&&(e.paths=e.hasZ||e.hasM?e.paths.map((e=>e.map((e=>[e[0],e[1],e[2]])))):e.paths.map((e=>e.map((e=>[e[0],e[1]])))));break;case\"polygon\":e.rings.reduce(((e,r)=>e+r.length),0)<s&&(e.rings=e.hasZ||e.hasM?e.rings.map((e=>e.map((e=>[e[0],e[1],e[2]])))):e.rings.map((e=>e.map((e=>[e[0],e[1]])))))}}class l extends t{constructor(e){super(\"PBFDecoderWorker\",\"_parseFeatureQuery\",{_parseFeatureQuery:e=>[e.buffer]},e)}}export{n as PBFDecoder};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}