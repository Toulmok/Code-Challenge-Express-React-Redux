{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport has from \"../../../../../core/has.js\";\nimport e from \"../../../../../core/Logger.js\";\nimport { isNone as t, isSome as o, unwrap as r, applySome as n } from \"../../../../../core/maybe.js\";\nimport i from \"../../../../../core/PooledArray.js\";\nimport { e as s, t as a } from \"../../../../../chunks/mat3.js\";\nimport { c } from \"../../../../../chunks/mat3f32.js\";\nimport { d as m, w as l, t as f } from \"../../../../../chunks/vec3.js\";\nimport { a as p, c as h } from \"../../../../../chunks/vec3f64.js\";\nimport { a as b } from \"../../../../../chunks/vec32.js\";\nimport { c as u } from \"../../../../../chunks/vec33.js\";\nimport { ViewingMode as g } from \"../../../../ViewingMode.js\";\nimport { ColorMixModeEnum as d, encodeSymbolColor as y } from \"../../../layers/support/symbolColorUtils.js\";\nimport { clone as j, computeOffsetObb as C, radius as v } from \"../../../support/orientedBoundingBox.js\";\nimport { glLayout as _ } from \"../../../support/buffer/glUtil.js\";\nimport { newLayout as w } from \"../../../support/buffer/InterleavedLayout.js\";\nimport O from \"./ComponentData.js\";\nimport { State as M, ComponentObject as x } from \"./ComponentObject.js\";\nimport A from \"./IntersectionGeometry.js\";\nimport { Renderable as D } from \"./Renderable.js\";\nimport { RenderGeometry as S } from \"./RenderGeometry.js\";\nimport { RenderSubmitSystem as I } from \"./RenderSubmitSystem.js\";\nimport { createVertexBufferLayout as P } from \"./SourceGeometry.js\";\nimport { UniformComponentParameters as E } from \"./UniformComponentParameters.js\";\nimport { ComponentParametersVarying as R, ComponentParametersUniform as U, ComponentParameterSummary as T, ComponentMaterial as B } from \"./Material/ComponentMaterial.js\";\nimport { attributeLocations as L } from \"./Material/ComponentTechnique.js\";\nimport { encodeElevationOffset as V } from \"./Material/shader/ComponentData.glsl.js\";\nimport { getVisibility as k, updateVisibilityWithCount as G } from \"../../lib/ComponentUtils.js\";\nimport { assert as N } from \"../../lib/Util.js\";\nimport { VertexAttribute as q } from \"../../lib/VertexAttribute.js\";\nimport { getVerticalOffsetI3S as H } from \"../../lib/verticalOffsetUtils.js\";\nimport { EdgeInputBufferLayout as z } from \"../../lib/edgeRendering/bufferLayouts.js\";\nimport { extractComponentsEdgeLocationsLayout as W } from \"../../lib/edgeRendering/edgeProcessing.js\";\nimport { BufferManager as X } from \"../../lib/TextureBackedBuffer/BufferManager.js\";\nimport { BufferObject as Y } from \"../../../../webgl/BufferObject.js\";\nimport { Usage as F, PrimitiveType as J } from \"../../../../webgl/enums.js\";\nimport { VertexArrayObject as K } from \"../../../../webgl/VertexArrayObject.js\";\nconst Q = e.getLogger(\"esri.views.3d.webgl-engine.collections.Component.ComponentObjectCollection\");\nclass Z {\n  constructor(e, t) {\n    this._renderManager = e, this._viewingMode = t, this._objects = [new i(), new i()], this._renderSubmit = new I(this), this._renderManager.register(this._renderSubmit), this._hasObjectAndLayerId = has(\"enable-feature:objectAndLayerId-rendering\"), this._componentBufferManager = new X(e.rctx, 2 + (this._hasObjectAndLayerId ? 1 : 0));\n  }\n  destroy() {\n    N(0 === this._objects[M.Hidden].length && 0 === this._objects[M.Visible].length, \"ObjectCollection should be empty upon disposal\"), this._componentBufferManager.destroy();\n  }\n  createObject(e) {\n    const t = new x();\n    return t.toMapSpace = e.toMapSpace, t.transform = e.transform, t.obb = j(e.obb), t.components = new O(this._componentBufferManager, e.geometry.componentOffsets), t.renderable = this._createRenderable(e, t.components), t.intersectionGeometry = new A(e.geometry.positionData, t.components), this._objects[t.visible].push(t), t;\n  }\n  destroyObject(e) {\n    const t = e;\n    this._objects[t.visible].removeUnordered(t), t.destroy(), this._notifyDirty();\n  }\n  setObjectVisibility(e, t) {\n    const o = e;\n    t !== o.visible && (this._objects[o.visible].removeUnordered(o), this._objects[t].push(o), o.visible = t, this._notifyDirty());\n  }\n  preSubmit(e) {\n    const t = e.camera.eye;\n    this.visibleObjects.forAll(e => e.renderable.meta.cameraDepthSquared = m(t, e.obb.center));\n  }\n  getMaterial(e) {\n    return e.renderable.material;\n  }\n  updateMaterial(e, t) {\n    const o = e.renderable.material;\n    t(o), o.dirty && this._notifyDirty();\n  }\n  setAllComponentVisibilities(e, t) {\n    const o = e;\n    o.components.visibility.reset(t), o.components.visibilityDirty(), this._notifyDirty();\n  }\n  forEachVisibleComponent(e, t) {\n    return e.components.visibility.forEachComponent(t);\n  }\n  getComponentCount(e) {\n    const t = e,\n      o = t.components.visibility.componentCount();\n    return {\n      visible: o,\n      invisible: t.components.count - o\n    };\n  }\n  setComponentData(e, r) {\n    const n = e,\n      i = n.renderable.material,\n      s = n.components,\n      a = s.materialDataBuffer,\n      c = s.materialDataIndices,\n      m = new E(),\n      l = a.textureBuffer,\n      f = new Uint8Array(4),\n      p = new Uint32Array(f.buffer);\n    let h = 0,\n      b = 0,\n      u = 0,\n      g = s.verticalOffsets,\n      v = 1 / 0,\n      _ = -1 / 0,\n      w = !1,\n      O = !1,\n      M = 0;\n    for (let j = 0; j < s.count; j++) {\n      r(j, m), h += +(m.externalColor[3] < 1), b += +(m.externalColorMixMode === d.Replace && 1 === m.externalColor[3]), u += +m.castShadows, y(m.externalColor, m.externalColorMixMode, f), f[2] = 254 & f[2] | +m.castShadows, l.setData(c[j], 0, f[0], f[1], f[2], f[3]), w || (w = j > 0 && M !== p[0]), M = p[0], O || (O = 0 !== m.elevationOffset), O && t(g) && (g = new Array(j).fill(0)), o(g) && (g[j] = m.elevationOffset), v = Math.min(v, m.elevationOffset), _ = Math.max(_, m.elevationOffset), V(m.elevationOffset, f), l.setData(c[j], 1, f[0], f[1], f[2], f[3]);\n      const e = m.objectAndLayerIdColor;\n      o(e) && l.setData(c[j], 2, e[0], e[1], e[2], e[3]), m.pickable !== k(s.pickability, j) && (s.pickability = G(s.pickability, s.count, j, m.pickable));\n    }\n    s.verticalOffsets = O ? g : null, n.offsetObb = O ? C(n.obb, v, _, this._viewingMode, o(n.offsetObb) ? n.offsetObb : j(n.obb)) : null, w || O || this._hasObjectAndLayerId ? (i.componentParameters = new R(), i.componentParameters.castShadows = ee(u, s.count), i.componentParameters.transparent = ee(h, s.count), i.componentParameters.opaqueOverride = ee(b, s.count), i.componentParameters.texture = l, l.updateTexture()) : (i.componentParameters = new U(), i.componentParameters.castShadows = m.castShadows ? T.All : T.None, i.componentParameters.externalColor = m.externalColor, i.componentParameters.externalColorMixMode = m.externalColorMixMode), this._notifyDirty();\n  }\n  getComponentAabb(e, o, n) {\n    let i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n    e.intersectionGeometry.getComponentAabb(o, n);\n    const s = e,\n      a = s.components.verticalOffsets;\n    if (i || t(a)) return n;\n    const c = a[o];\n    if (this._viewingMode === g.Local || 0 === c) return n[2] += c, n[5] += c, n;\n    const m = r(H(c));\n    return m.localOrigin = s.transform.position, m.applyToAabb(n);\n  }\n  getComponentObb(e) {\n    return e.obb;\n  }\n  getObjectTransform(e) {\n    return e.transform;\n  }\n  getComponentPositions(e, t, o) {\n    return e.intersectionGeometry.getComponentPositions(t, o);\n  }\n  intersect(e, t, r, n, i, c) {\n    const m = e;\n    o(i) && (i.localOrigin = m.transform.position);\n    const p = s(te, m.transform.rotationScale);\n    l(oe, t, m.transform.position), l(re, r, m.transform.position), f(oe, oe, p), f(re, re, p);\n    const h = a(te, p);\n    return m.intersectionGeometry.intersect(oe, re, n, h, i, m.components.verticalOffsets, c);\n  }\n  addEdges(e, t, o, r) {\n    const n = e,\n      {\n        indices: i,\n        positions: s\n      } = n.intersectionGeometry,\n      a = n.components.offsets;\n    return t.addComponentObject(e, n.transform, {\n      center: n.obb.center,\n      radius: v(n.obb)\n    }, s, i, a, o, r);\n  }\n  async extractEdgeInformation(e, t, o) {\n    const r = e,\n      n = r.components.visibility;\n    if (n.allInvisible()) return {\n      buffer: W.createBuffer(0),\n      origin: [0, 0, 0]\n    };\n    const {\n        indices: i,\n        positions: s\n      } = r.intersectionGeometry,\n      a = r.components.offsets,\n      c = z.createBuffer(s.count);\n    u(c.position, s), b(c.position, c.position, r.transform.rotationScale), this._setComponentIndices(c.componentIndex, i, a);\n    const m = c.count,\n      l = this._computeVisibilityIndices(i, n, a, m);\n    return {\n      origin: p(r.transform.position),\n      buffer: await t.extractComponentsEdgeLocations({\n        indices: l,\n        indicesLength: l.length,\n        skipDeduplicate: !0,\n        data: c,\n        writerSettings: {\n          reducedPrecision: !1,\n          variants: 0\n        }\n      }, o)\n    };\n  }\n  _setComponentIndices(e, t, o) {\n    let r = 0;\n    for (let n = 0; n < o.length - 1; n++) {\n      const i = o[n],\n        s = o[n + 1];\n      for (let o = i; o < s; o++) {\n        const n = t ? t[o] : o;\n        e.set(n, r);\n      }\n      r++;\n    }\n  }\n  _computeVisibilityIndices(e, t, o, r) {\n    if (e && t.allVisible()) return e;\n    let n = 0;\n    t.forEachComponentRange((e, t) => (n += o[t] - o[e], !0));\n    const i = Array.isArray(e) ? new Array(n) : 2 === e?.BYTES_PER_ELEMENT || r <= 65536 ? new Uint16Array(n) : new Uint32Array(n);\n    let s = 0;\n    return t.forEachComponentRange((t, r) => {\n      const n = o[t],\n        a = o[r];\n      for (let o = n; o < a; o++) i[s++] = e ? e[o] : o;\n      return !0;\n    }), i;\n  }\n  addComponentHighlight(e, o) {\n    const r = e.components;\n    t(r.highlightCounts) && (r.highlightCounts = new Uint32Array(r.count + 1));\n    0 === r.highlightCounts[o]++ && (r.highlightsDirty(), this._notifyDirty()), r.highlightCounts[r.count]++;\n  }\n  removeComponentHighlight(e, o) {\n    const r = e.components;\n    if (t(r.highlightCounts)) return void Q.warn(\"Removing non-existing highlight.\");\n    const n = r.highlightCounts[o],\n      i = r.highlightCounts[r.count];\n    if (0 !== n) {\n      if (n > 1) return r.highlightCounts[o] = n - 1, void (r.highlightCounts[r.count] = i - 1);\n      r.highlightCounts[o] = 0, r.highlightsDirty(), this._notifyDirty(), 1 === i ? r.highlightCounts = null : r.highlightCounts[r.count] = i - 1;\n    } else Q.warn(\"Removing non-existing highlight.\");\n  }\n  clearHighlights(e) {\n    const t = e.components;\n    o(t.highlightCounts) && (t.highlightCounts = null, t.highlightsDirty(), this._notifyDirty());\n  }\n  getObjectGPUMemoryUsage(e) {\n    return e.renderable.meta.gpuMemoryEstimate;\n  }\n  get visibleObjects() {\n    return this._objects[M.Visible];\n  }\n  _createRenderable(e, t) {\n    const i = this._renderManager.rctx,\n      s = e.geometry,\n      a = s.vertices.layoutParameters,\n      c = Y.createVertex(i, F.STATIC_DRAW, s.vertices.data),\n      m = n(s.indices, e => Y.createIndex(i, F.STATIC_DRAW, e)),\n      l = _(P(a)),\n      f = new Uint16Array(s.vertices.count);\n    for (let r = 0; r < t.count; r++) {\n      const e = t.offsets[r],\n        n = t.offsets[r + 1],\n        i = t.materialDataIndices[r];\n      if (o(s.indices)) for (let t = e; t < n; t++) {\n        f[s.indices[t]] = i;\n      } else for (let t = e; t < n; t++) f[t] = i;\n    }\n    const p = Y.createVertex(i, F.STATIC_DRAW, f.buffer),\n      h = new B(e.transform, e.toMapSpace),\n      b = new K(i, L, {\n        data: l,\n        componentIndices: $\n      }, {\n        data: c,\n        componentIndices: p\n      }, r(m)),\n      u = new S(b, J.TRIANGLES, a, o(m)),\n      g = {\n        cameraDepthSquared: .5,\n        gpuMemoryEstimate: c.byteSize + p.byteSize + (o(m) ? m.byteSize : 0)\n      };\n    return new D(h, u, g);\n  }\n  _notifyDirty() {\n    this._renderManager.notifyDirty();\n  }\n}\nconst $ = _(w().u16(q.COMPONENTINDEX));\nfunction ee(e, t) {\n  return e === t ? T.All : 0 === e ? T.None : T.Some;\n}\nconst te = c(),\n  oe = h(),\n  re = h();\nexport { Z as ComponentObjectCollection };","map":{"version":3,"names":["has","e","isNone","t","isSome","o","unwrap","r","applySome","n","i","s","a","c","d","m","w","l","f","p","h","b","u","ViewingMode","g","ColorMixModeEnum","encodeSymbolColor","y","clone","j","computeOffsetObb","C","radius","v","glLayout","_","newLayout","O","State","M","ComponentObject","x","A","Renderable","D","RenderGeometry","S","RenderSubmitSystem","I","createVertexBufferLayout","P","UniformComponentParameters","E","ComponentParametersVarying","R","ComponentParametersUniform","U","ComponentParameterSummary","T","ComponentMaterial","B","attributeLocations","L","encodeElevationOffset","V","getVisibility","k","updateVisibilityWithCount","G","assert","N","VertexAttribute","q","getVerticalOffsetI3S","H","EdgeInputBufferLayout","z","extractComponentsEdgeLocationsLayout","W","BufferManager","X","BufferObject","Y","Usage","F","PrimitiveType","J","VertexArrayObject","K","Q","getLogger","Z","constructor","_renderManager","_viewingMode","_objects","_renderSubmit","register","_hasObjectAndLayerId","_componentBufferManager","rctx","destroy","Hidden","length","Visible","createObject","toMapSpace","transform","obb","components","geometry","componentOffsets","renderable","_createRenderable","intersectionGeometry","positionData","visible","push","destroyObject","removeUnordered","_notifyDirty","setObjectVisibility","preSubmit","camera","eye","visibleObjects","forAll","meta","cameraDepthSquared","center","getMaterial","material","updateMaterial","dirty","setAllComponentVisibilities","visibility","reset","visibilityDirty","forEachVisibleComponent","forEachComponent","getComponentCount","componentCount","invisible","count","setComponentData","materialDataBuffer","materialDataIndices","textureBuffer","Uint8Array","Uint32Array","buffer","verticalOffsets","externalColor","externalColorMixMode","Replace","castShadows","setData","elevationOffset","Array","fill","Math","min","max","objectAndLayerIdColor","pickable","pickability","offsetObb","componentParameters","ee","transparent","opaqueOverride","texture","updateTexture","All","None","getComponentAabb","arguments","undefined","Local","localOrigin","position","applyToAabb","getComponentObb","getObjectTransform","getComponentPositions","intersect","te","rotationScale","oe","re","addEdges","indices","positions","offsets","addComponentObject","extractEdgeInformation","allInvisible","createBuffer","origin","_setComponentIndices","componentIndex","_computeVisibilityIndices","extractComponentsEdgeLocations","indicesLength","skipDeduplicate","data","writerSettings","reducedPrecision","variants","set","allVisible","forEachComponentRange","isArray","BYTES_PER_ELEMENT","Uint16Array","addComponentHighlight","highlightCounts","highlightsDirty","removeComponentHighlight","warn","clearHighlights","getObjectGPUMemoryUsage","gpuMemoryEstimate","vertices","layoutParameters","createVertex","STATIC_DRAW","createIndex","componentIndices","$","TRIANGLES","byteSize","notifyDirty","u16","COMPONENTINDEX","Some","ComponentObjectCollection"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/ComponentObjectCollection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport has from\"../../../../../core/has.js\";import e from\"../../../../../core/Logger.js\";import{isNone as t,isSome as o,unwrap as r,applySome as n}from\"../../../../../core/maybe.js\";import i from\"../../../../../core/PooledArray.js\";import{e as s,t as a}from\"../../../../../chunks/mat3.js\";import{c}from\"../../../../../chunks/mat3f32.js\";import{d as m,w as l,t as f}from\"../../../../../chunks/vec3.js\";import{a as p,c as h}from\"../../../../../chunks/vec3f64.js\";import{a as b}from\"../../../../../chunks/vec32.js\";import{c as u}from\"../../../../../chunks/vec33.js\";import{ViewingMode as g}from\"../../../../ViewingMode.js\";import{ColorMixModeEnum as d,encodeSymbolColor as y}from\"../../../layers/support/symbolColorUtils.js\";import{clone as j,computeOffsetObb as C,radius as v}from\"../../../support/orientedBoundingBox.js\";import{glLayout as _}from\"../../../support/buffer/glUtil.js\";import{newLayout as w}from\"../../../support/buffer/InterleavedLayout.js\";import O from\"./ComponentData.js\";import{State as M,ComponentObject as x}from\"./ComponentObject.js\";import A from\"./IntersectionGeometry.js\";import{Renderable as D}from\"./Renderable.js\";import{RenderGeometry as S}from\"./RenderGeometry.js\";import{RenderSubmitSystem as I}from\"./RenderSubmitSystem.js\";import{createVertexBufferLayout as P}from\"./SourceGeometry.js\";import{UniformComponentParameters as E}from\"./UniformComponentParameters.js\";import{ComponentParametersVarying as R,ComponentParametersUniform as U,ComponentParameterSummary as T,ComponentMaterial as B}from\"./Material/ComponentMaterial.js\";import{attributeLocations as L}from\"./Material/ComponentTechnique.js\";import{encodeElevationOffset as V}from\"./Material/shader/ComponentData.glsl.js\";import{getVisibility as k,updateVisibilityWithCount as G}from\"../../lib/ComponentUtils.js\";import{assert as N}from\"../../lib/Util.js\";import{VertexAttribute as q}from\"../../lib/VertexAttribute.js\";import{getVerticalOffsetI3S as H}from\"../../lib/verticalOffsetUtils.js\";import{EdgeInputBufferLayout as z}from\"../../lib/edgeRendering/bufferLayouts.js\";import{extractComponentsEdgeLocationsLayout as W}from\"../../lib/edgeRendering/edgeProcessing.js\";import{BufferManager as X}from\"../../lib/TextureBackedBuffer/BufferManager.js\";import{BufferObject as Y}from\"../../../../webgl/BufferObject.js\";import{Usage as F,PrimitiveType as J}from\"../../../../webgl/enums.js\";import{VertexArrayObject as K}from\"../../../../webgl/VertexArrayObject.js\";const Q=e.getLogger(\"esri.views.3d.webgl-engine.collections.Component.ComponentObjectCollection\");class Z{constructor(e,t){this._renderManager=e,this._viewingMode=t,this._objects=[new i,new i],this._renderSubmit=new I(this),this._renderManager.register(this._renderSubmit),this._hasObjectAndLayerId=has(\"enable-feature:objectAndLayerId-rendering\"),this._componentBufferManager=new X(e.rctx,2+(this._hasObjectAndLayerId?1:0))}destroy(){N(0===this._objects[M.Hidden].length&&0===this._objects[M.Visible].length,\"ObjectCollection should be empty upon disposal\"),this._componentBufferManager.destroy()}createObject(e){const t=new x;return t.toMapSpace=e.toMapSpace,t.transform=e.transform,t.obb=j(e.obb),t.components=new O(this._componentBufferManager,e.geometry.componentOffsets),t.renderable=this._createRenderable(e,t.components),t.intersectionGeometry=new A(e.geometry.positionData,t.components),this._objects[t.visible].push(t),t}destroyObject(e){const t=e;this._objects[t.visible].removeUnordered(t),t.destroy(),this._notifyDirty()}setObjectVisibility(e,t){const o=e;t!==o.visible&&(this._objects[o.visible].removeUnordered(o),this._objects[t].push(o),o.visible=t,this._notifyDirty())}preSubmit(e){const t=e.camera.eye;this.visibleObjects.forAll((e=>e.renderable.meta.cameraDepthSquared=m(t,e.obb.center)))}getMaterial(e){return e.renderable.material}updateMaterial(e,t){const o=e.renderable.material;t(o),o.dirty&&this._notifyDirty()}setAllComponentVisibilities(e,t){const o=e;o.components.visibility.reset(t),o.components.visibilityDirty(),this._notifyDirty()}forEachVisibleComponent(e,t){return e.components.visibility.forEachComponent(t)}getComponentCount(e){const t=e,o=t.components.visibility.componentCount();return{visible:o,invisible:t.components.count-o}}setComponentData(e,r){const n=e,i=n.renderable.material,s=n.components,a=s.materialDataBuffer,c=s.materialDataIndices,m=new E,l=a.textureBuffer,f=new Uint8Array(4),p=new Uint32Array(f.buffer);let h=0,b=0,u=0,g=s.verticalOffsets,v=1/0,_=-1/0,w=!1,O=!1,M=0;for(let j=0;j<s.count;j++){r(j,m),h+=+(m.externalColor[3]<1),b+=+(m.externalColorMixMode===d.Replace&&1===m.externalColor[3]),u+=+m.castShadows,y(m.externalColor,m.externalColorMixMode,f),f[2]=254&f[2]|+m.castShadows,l.setData(c[j],0,f[0],f[1],f[2],f[3]),w||(w=j>0&&M!==p[0]),M=p[0],O||(O=0!==m.elevationOffset),O&&t(g)&&(g=new Array(j).fill(0)),o(g)&&(g[j]=m.elevationOffset),v=Math.min(v,m.elevationOffset),_=Math.max(_,m.elevationOffset),V(m.elevationOffset,f),l.setData(c[j],1,f[0],f[1],f[2],f[3]);const e=m.objectAndLayerIdColor;o(e)&&l.setData(c[j],2,e[0],e[1],e[2],e[3]),m.pickable!==k(s.pickability,j)&&(s.pickability=G(s.pickability,s.count,j,m.pickable))}s.verticalOffsets=O?g:null,n.offsetObb=O?C(n.obb,v,_,this._viewingMode,o(n.offsetObb)?n.offsetObb:j(n.obb)):null,w||O||this._hasObjectAndLayerId?(i.componentParameters=new R,i.componentParameters.castShadows=ee(u,s.count),i.componentParameters.transparent=ee(h,s.count),i.componentParameters.opaqueOverride=ee(b,s.count),i.componentParameters.texture=l,l.updateTexture()):(i.componentParameters=new U,i.componentParameters.castShadows=m.castShadows?T.All:T.None,i.componentParameters.externalColor=m.externalColor,i.componentParameters.externalColorMixMode=m.externalColorMixMode),this._notifyDirty()}getComponentAabb(e,o,n,i=!1){e.intersectionGeometry.getComponentAabb(o,n);const s=e,a=s.components.verticalOffsets;if(i||t(a))return n;const c=a[o];if(this._viewingMode===g.Local||0===c)return n[2]+=c,n[5]+=c,n;const m=r(H(c));return m.localOrigin=s.transform.position,m.applyToAabb(n)}getComponentObb(e){return e.obb}getObjectTransform(e){return e.transform}getComponentPositions(e,t,o){return e.intersectionGeometry.getComponentPositions(t,o)}intersect(e,t,r,n,i,c){const m=e;o(i)&&(i.localOrigin=m.transform.position);const p=s(te,m.transform.rotationScale);l(oe,t,m.transform.position),l(re,r,m.transform.position),f(oe,oe,p),f(re,re,p);const h=a(te,p);return m.intersectionGeometry.intersect(oe,re,n,h,i,m.components.verticalOffsets,c)}addEdges(e,t,o,r){const n=e,{indices:i,positions:s}=n.intersectionGeometry,a=n.components.offsets;return t.addComponentObject(e,n.transform,{center:n.obb.center,radius:v(n.obb)},s,i,a,o,r)}async extractEdgeInformation(e,t,o){const r=e,n=r.components.visibility;if(n.allInvisible())return{buffer:W.createBuffer(0),origin:[0,0,0]};const{indices:i,positions:s}=r.intersectionGeometry,a=r.components.offsets,c=z.createBuffer(s.count);u(c.position,s),b(c.position,c.position,r.transform.rotationScale),this._setComponentIndices(c.componentIndex,i,a);const m=c.count,l=this._computeVisibilityIndices(i,n,a,m);return{origin:p(r.transform.position),buffer:await t.extractComponentsEdgeLocations({indices:l,indicesLength:l.length,skipDeduplicate:!0,data:c,writerSettings:{reducedPrecision:!1,variants:0}},o)}}_setComponentIndices(e,t,o){let r=0;for(let n=0;n<o.length-1;n++){const i=o[n],s=o[n+1];for(let o=i;o<s;o++){const n=t?t[o]:o;e.set(n,r)}r++}}_computeVisibilityIndices(e,t,o,r){if(e&&t.allVisible())return e;let n=0;t.forEachComponentRange(((e,t)=>(n+=o[t]-o[e],!0)));const i=Array.isArray(e)?new Array(n):2===e?.BYTES_PER_ELEMENT||r<=65536?new Uint16Array(n):new Uint32Array(n);let s=0;return t.forEachComponentRange(((t,r)=>{const n=o[t],a=o[r];for(let o=n;o<a;o++)i[s++]=e?e[o]:o;return!0})),i}addComponentHighlight(e,o){const r=e.components;t(r.highlightCounts)&&(r.highlightCounts=new Uint32Array(r.count+1));0===r.highlightCounts[o]++&&(r.highlightsDirty(),this._notifyDirty()),r.highlightCounts[r.count]++}removeComponentHighlight(e,o){const r=e.components;if(t(r.highlightCounts))return void Q.warn(\"Removing non-existing highlight.\");const n=r.highlightCounts[o],i=r.highlightCounts[r.count];if(0!==n){if(n>1)return r.highlightCounts[o]=n-1,void(r.highlightCounts[r.count]=i-1);r.highlightCounts[o]=0,r.highlightsDirty(),this._notifyDirty(),1===i?r.highlightCounts=null:r.highlightCounts[r.count]=i-1}else Q.warn(\"Removing non-existing highlight.\")}clearHighlights(e){const t=e.components;o(t.highlightCounts)&&(t.highlightCounts=null,t.highlightsDirty(),this._notifyDirty())}getObjectGPUMemoryUsage(e){return e.renderable.meta.gpuMemoryEstimate}get visibleObjects(){return this._objects[M.Visible]}_createRenderable(e,t){const i=this._renderManager.rctx,s=e.geometry,a=s.vertices.layoutParameters,c=Y.createVertex(i,F.STATIC_DRAW,s.vertices.data),m=n(s.indices,(e=>Y.createIndex(i,F.STATIC_DRAW,e))),l=_(P(a)),f=new Uint16Array(s.vertices.count);for(let r=0;r<t.count;r++){const e=t.offsets[r],n=t.offsets[r+1],i=t.materialDataIndices[r];if(o(s.indices))for(let t=e;t<n;t++){f[s.indices[t]]=i}else for(let t=e;t<n;t++)f[t]=i}const p=Y.createVertex(i,F.STATIC_DRAW,f.buffer),h=new B(e.transform,e.toMapSpace),b=new K(i,L,{data:l,componentIndices:$},{data:c,componentIndices:p},r(m)),u=new S(b,J.TRIANGLES,a,o(m)),g={cameraDepthSquared:.5,gpuMemoryEstimate:c.byteSize+p.byteSize+(o(m)?m.byteSize:0)};return new D(h,u,g)}_notifyDirty(){this._renderManager.notifyDirty()}}const $=_(w().u16(q.COMPONENTINDEX));function ee(e,t){return e===t?T.All:0===e?T.None:T.Some}const te=c(),oe=h(),re=h();export{Z as ComponentObjectCollection};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}