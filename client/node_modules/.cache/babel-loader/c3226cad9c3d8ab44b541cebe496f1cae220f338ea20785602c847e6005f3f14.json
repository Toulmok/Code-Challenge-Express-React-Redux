{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport s from \"../../../../core/Handles.js\";\nimport { destroyMaybe as i } from \"../../../../core/maybe.js\";\nimport { watch as r, sync as n, initial as o } from \"../../../../core/reactiveUtils.js\";\nimport { property as a } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as c } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { getReferenceEllipsoid as h } from \"../../../../geometry/ellipsoidUtils.js\";\nimport { FrustumExtentIntersection as l } from \"../../support/FrustumExtentIntersection.js\";\nimport { TaskPriority as p, Task as u } from \"../../../support/Scheduler.js\";\nconst d = 1.2;\nlet _ = class extends t {\n  constructor(e) {\n    super(e), this.suspended = !1, this._extent = null, this._extentIntersectionDirty = !0, this._isVisibleBelowSurfaceInternal = !1, this._handles = new s(), this.graphicsCoreOwner = null, this.updating = !0;\n  }\n  initialize() {\n    const {\n      graphicsCoreOwner: e\n    } = this;\n    this._extentIntersection = new l({\n      renderCoordsHelper: e.view.renderCoordsHelper\n    });\n    const t = e.view,\n      s = t.basemapTerrain,\n      i = t.resourceController.scheduler;\n    this._handles.add([t.on(\"resize\", () => this._viewChange()), r(() => t.state.camera, () => this._viewChange(), n), i.registerTask(p.FRUSTUM_VISIBILITY, this), r(() => s.visibleElevationBounds, () => this._elevationBoundsChange())]), \"local\" === t.viewingMode ? this._isVisibleBelowSurface = !0 : this._handles.add([r(() => [s.baseOpacity, s.wireframe, t.map?.ground?.navigationConstraint?.type], () => this._updateIsVisibleBelowSurface(), o)]);\n  }\n  destroy() {\n    this._set(\"graphicsCoreOwner\", null), this._extent = null, this._extentIntersection = null, this._handles = i(this._handles);\n  }\n  _setDirty() {\n    this.updating || this._set(\"updating\", !0);\n  }\n  setExtent(e) {\n    this._extent = e, this._extentIntersectionDirty = !0, this._setDirty();\n  }\n  _viewChange() {\n    this._setDirty();\n  }\n  _elevationBoundsChange() {\n    this._setDirty(), this._extentIntersectionDirty = !0;\n  }\n  set _isVisibleBelowSurface(e) {\n    this._isVisibleBelowSurfaceInternal = e, this._setDirty(), this._extentIntersectionDirty = !0;\n  }\n  _updateIsVisibleBelowSurface() {\n    const e = this.graphicsCoreOwner.view,\n      t = e.basemapTerrain,\n      s = \"local\" === e.viewingMode,\n      i = \"none\" === e.map.ground?.navigationConstraint?.type;\n    this._isVisibleBelowSurface = s || !t.opaque || i;\n  }\n  _updateExtentIntersection() {\n    if (!this._extentIntersectionDirty) return;\n    this._extentIntersectionDirty = !1;\n    const e = this.graphicsCoreOwner.view;\n    let t;\n    if (this._isVisibleBelowSurfaceInternal) t = -.3 * h(e.spatialReference).radius;else {\n      const {\n        min: s,\n        max: i\n      } = e.basemapTerrain.visibleElevationBounds;\n      t = s - Math.max(1, (i - s) * (d - 1));\n    }\n    this._extentIntersection.update(this._extent, e.spatialReference, t);\n  }\n  get running() {\n    return this.updating;\n  }\n  runTask(e) {\n    if (this._set(\"updating\", !1), !this._extent) return this._set(\"suspended\", !1), u.YIELD;\n    this._updateExtentIntersection();\n    const t = this.graphicsCoreOwner.view.frustum,\n      s = h(this.graphicsCoreOwner.view.spatialReference).radius;\n    this._set(\"suspended\", !this._extentIntersection.isVisibleInFrustum(t, s)), e.madeProgress();\n  }\n};\ne([a({\n  readOnly: !0\n})], _.prototype, \"suspended\", void 0), e([a({\n  constructOnly: !0\n})], _.prototype, \"graphicsCoreOwner\", void 0), e([a({\n  readOnly: !0\n})], _.prototype, \"updating\", void 0), _ = e([c(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")], _);\nconst m = _;\nexport { m as default };","map":{"version":3,"names":["_","e","t","s","destroyMaybe","i","watch","r","sync","n","initial","o","property","a","subclass","c","getReferenceEllipsoid","h","FrustumExtentIntersection","l","TaskPriority","p","Task","u","d","constructor","suspended","_extent","_extentIntersectionDirty","_isVisibleBelowSurfaceInternal","_handles","graphicsCoreOwner","updating","initialize","_extentIntersection","renderCoordsHelper","view","basemapTerrain","resourceController","scheduler","add","on","_viewChange","state","camera","registerTask","FRUSTUM_VISIBILITY","visibleElevationBounds","_elevationBoundsChange","viewingMode","_isVisibleBelowSurface","baseOpacity","wireframe","map","ground","navigationConstraint","type","_updateIsVisibleBelowSurface","destroy","_set","_setDirty","setExtent","opaque","_updateExtentIntersection","spatialReference","radius","min","max","Math","update","running","runTask","YIELD","frustum","isVisibleInFrustum","madeProgress","readOnly","prototype","constructOnly","m","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Handles.js\";import{destroyMaybe as i}from\"../../../../core/maybe.js\";import{watch as r,sync as n,initial as o}from\"../../../../core/reactiveUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getReferenceEllipsoid as h}from\"../../../../geometry/ellipsoidUtils.js\";import{FrustumExtentIntersection as l}from\"../../support/FrustumExtentIntersection.js\";import{TaskPriority as p,Task as u}from\"../../../support/Scheduler.js\";const d=1.2;let _=class extends t{constructor(e){super(e),this.suspended=!1,this._extent=null,this._extentIntersectionDirty=!0,this._isVisibleBelowSurfaceInternal=!1,this._handles=new s,this.graphicsCoreOwner=null,this.updating=!0}initialize(){const{graphicsCoreOwner:e}=this;this._extentIntersection=new l({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,s=t.basemapTerrain,i=t.resourceController.scheduler;this._handles.add([t.on(\"resize\",(()=>this._viewChange())),r((()=>t.state.camera),(()=>this._viewChange()),n),i.registerTask(p.FRUSTUM_VISIBILITY,this),r((()=>s.visibleElevationBounds),(()=>this._elevationBoundsChange()))]),\"local\"===t.viewingMode?this._isVisibleBelowSurface=!0:this._handles.add([r((()=>[s.baseOpacity,s.wireframe,t.map?.ground?.navigationConstraint?.type]),(()=>this._updateIsVisibleBelowSurface()),o)])}destroy(){this._set(\"graphicsCoreOwner\",null),this._extent=null,this._extentIntersection=null,this._handles=i(this._handles)}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this._extent=e,this._extentIntersectionDirty=!0,this._setDirty()}_viewChange(){this._setDirty()}_elevationBoundsChange(){this._setDirty(),this._extentIntersectionDirty=!0}set _isVisibleBelowSurface(e){this._isVisibleBelowSurfaceInternal=e,this._setDirty(),this._extentIntersectionDirty=!0}_updateIsVisibleBelowSurface(){const e=this.graphicsCoreOwner.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=\"none\"===e.map.ground?.navigationConstraint?.type;this._isVisibleBelowSurface=s||!t.opaque||i}_updateExtentIntersection(){if(!this._extentIntersectionDirty)return;this._extentIntersectionDirty=!1;const e=this.graphicsCoreOwner.view;let t;if(this._isVisibleBelowSurfaceInternal)t=-.3*h(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.visibleElevationBounds;t=s-Math.max(1,(i-s)*(d-1))}this._extentIntersection.update(this._extent,e.spatialReference,t)}get running(){return this.updating}runTask(e){if(this._set(\"updating\",!1),!this._extent)return this._set(\"suspended\",!1),u.YIELD;this._updateExtentIntersection();const t=this.graphicsCoreOwner.view.frustum,s=h(this.graphicsCoreOwner.view.spatialReference).radius;this._set(\"suspended\",!this._extentIntersection.isVisibleInFrustum(t,s)),e.madeProgress()}};e([a({readOnly:!0})],_.prototype,\"suspended\",void 0),e([a({constructOnly:!0})],_.prototype,\"graphicsCoreOwner\",void 0),e([a({readOnly:!0})],_.prototype,\"updating\",void 0),_=e([c(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],_);const m=_;export{m as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}