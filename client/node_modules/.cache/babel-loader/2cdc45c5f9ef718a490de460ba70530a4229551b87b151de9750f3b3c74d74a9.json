{"ast":null,"code":"import _objectSpread from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { result as r } from \"../../core/asyncUtils.js\";\nimport e from \"../../core/Error.js\";\nimport { isSome as o } from \"../../core/maybe.js\";\nimport { eachAlways as t, throwIfAborted as s } from \"../../core/promiseUtils.js\";\nimport { generateUUID as c } from \"../../core/uuid.js\";\nimport { getSiblingOfSameTypeI as p } from \"../../portal/support/resourceUtils.js\";\nfunction a(_x, _x2, _x3) {\n  return _a.apply(this, arguments);\n}\nfunction _a() {\n  _a = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(r, o, a) {\n    var h, i, m, f, _iterator, _step, _e2, _o, _t, _s, _u2, _h, _iterator2, _step2, _e3, l, d;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(!o || !o.resources)) {\n            _context.next = 2;\n            break;\n          }\n          return _context.abrupt(\"return\");\n        case 2:\n          h = o.portalItem === r.portalItem ? new Set(r.paths) : new Set();\n          r.paths.length = 0, r.portalItem = o.portalItem;\n          i = new Set(o.resources.toKeep.map(function (r) {\n            return r.resource.path;\n          })), m = new Set(), f = [];\n          i.forEach(function (e) {\n            h.delete(e), r.paths.push(e);\n          });\n          _iterator = _createForOfIteratorHelper(o.resources.toUpdate);\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              _e2 = _step.value;\n              if (h.delete(_e2.resource.path), i.has(_e2.resource.path) || m.has(_e2.resource.path)) {\n                _o = _e2.resource, _t = _e2.content, _s = _e2.finish, _u2 = _e2.error, _h = p(_o, c());\n                r.paths.push(_h.path), f.push(n({\n                  resource: _h,\n                  content: _t,\n                  compress: _e2.compress,\n                  finish: _s,\n                  error: _u2\n                }, a));\n              } else r.paths.push(_e2.resource.path), f.push(u(_e2, a)), m.add(_e2.resource.path);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          _iterator2 = _createForOfIteratorHelper(o.resources.toAdd);\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              _e3 = _step2.value;\n              f.push(n(_e3, a)), r.paths.push(_e3.resource.path);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n          if (!(h.forEach(function (r) {\n            if (o.portalItem) {\n              var _e = o.portalItem.resourceFromPath(r);\n              f.push(_e.portalItem.removeResource(_e).catch(function () {}));\n            }\n          }), 0 === f.length)) {\n            _context.next = 12;\n            break;\n          }\n          return _context.abrupt(\"return\");\n        case 12:\n          _context.next = 14;\n          return t(f);\n        case 14:\n          l = _context.sent;\n          s(a);\n          d = l.filter(function (r) {\n            return \"error\" in r;\n          }).map(function (r) {\n            return r.error;\n          });\n          if (!(d.length > 0)) {\n            _context.next = 19;\n            break;\n          }\n          throw new e(\"save:resources\", \"Failed to save one or more resources\", {\n            errors: d\n          });\n        case 19:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _a.apply(this, arguments);\n}\nfunction n(_x4, _x5) {\n  return _n.apply(this, arguments);\n}\nfunction _n() {\n  _n = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e, t) {\n    var _e$error, _e$finish;\n    var s, c;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          s = _objectSpread(_objectSpread({}, o(t) ? t : {}), {}, {\n            compress: e.compress\n          });\n          _context2.next = 3;\n          return r(e.resource.portalItem.addResource(e.resource, e.content, s));\n        case 3:\n          c = _context2.sent;\n          if (!(!0 !== c.ok)) {\n            _context2.next = 6;\n            break;\n          }\n          throw (_e$error = e.error) !== null && _e$error !== void 0 && _e$error.call(e, c.error), c.error;\n        case 6:\n          (_e$finish = e.finish) === null || _e$finish === void 0 ? void 0 : _e$finish.call(e, e.resource);\n        case 7:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _n.apply(this, arguments);\n}\nfunction u(_x6, _x7) {\n  return _u.apply(this, arguments);\n}\nfunction _u() {\n  _u = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e, o) {\n    var _e$error2, _e$finish2;\n    var t;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return r(e.resource.update(e.content, o));\n        case 2:\n          t = _context3.sent;\n          if (!(!0 !== t.ok)) {\n            _context3.next = 5;\n            break;\n          }\n          throw (_e$error2 = e.error) !== null && _e$error2 !== void 0 && _e$error2.call(e, t.error), t.error;\n        case 5:\n          (_e$finish2 = e.finish) === null || _e$finish2 === void 0 ? void 0 : _e$finish2.call(e, e.resource);\n        case 6:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _u.apply(this, arguments);\n}\nexport { a as saveResources };","map":{"version":3,"names":["result","r","e","isSome","o","eachAlways","t","throwIfAborted","s","generateUUID","c","getSiblingOfSameTypeI","p","a","_x","_x2","_x3","_a","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","h","i","m","f","_iterator","_step","_e2","_o","_t","_s","_u2","_h","_iterator2","_step2","_e3","l","d","wrap","_callee$","_context","prev","next","resources","abrupt","portalItem","Set","paths","length","toKeep","map","resource","path","forEach","delete","push","_createForOfIteratorHelper","toUpdate","n","done","value","has","content","finish","u","error","compress","add","err","toAdd","resourceFromPath","removeResource","catch","sent","filter","errors","stop","_x4","_x5","_n","_callee2","_e$error","_e$finish","_callee2$","_context2","_objectSpread","addResource","ok","call","_x6","_x7","_u","_callee3","_e$error2","_e$finish2","_callee3$","_context3","update","saveResources"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/webdoc/support/saveUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{result as r}from\"../../core/asyncUtils.js\";import e from\"../../core/Error.js\";import{isSome as o}from\"../../core/maybe.js\";import{eachAlways as t,throwIfAborted as s}from\"../../core/promiseUtils.js\";import{generateUUID as c}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as p}from\"../../portal/support/resourceUtils.js\";async function a(r,o,a){if(!o||!o.resources)return;const h=o.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=o.portalItem;const i=new Set(o.resources.toKeep.map((r=>r.resource.path))),m=new Set,f=[];i.forEach((e=>{h.delete(e),r.paths.push(e)}));for(const e of o.resources.toUpdate)if(h.delete(e.resource.path),i.has(e.resource.path)||m.has(e.resource.path)){const{resource:o,content:t,finish:s,error:u}=e,h=p(o,c());r.paths.push(h.path),f.push(n({resource:h,content:t,compress:e.compress,finish:s,error:u},a))}else r.paths.push(e.resource.path),f.push(u(e,a)),m.add(e.resource.path);for(const e of o.resources.toAdd)f.push(n(e,a)),r.paths.push(e.resource.path);if(h.forEach((r=>{if(o.portalItem){const e=o.portalItem.resourceFromPath(r);f.push(e.portalItem.removeResource(e).catch((()=>{})))}})),0===f.length)return;const l=await t(f);s(a);const d=l.filter((r=>\"error\"in r)).map((r=>r.error));if(d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d})}async function n(e,t){const s={...o(t)?t:{},compress:e.compress},c=await r(e.resource.portalItem.addResource(e.resource,e.content,s));if(!0!==c.ok)throw e.error?.(c.error),c.error;e.finish?.(e.resource)}async function u(e,o){const t=await r(e.resource.update(e.content,o));if(!0!==t.ok)throw e.error?.(t.error),t.error;e.finish?.(e.resource)}export{a as saveResources};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}