{"ast":null,"code":"import _regeneratorRuntime from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _objectSpread from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport has from \"../../../../../core/has.js\";\nimport { isNone as r, applySome as s, isSome as i, filterNones as a } from \"../../../../../core/maybe.js\";\nimport { ignoreAbortErrors as o, after as n, throwIfAborted as u, throwIfNotAbortError as g, isAbortError as h } from \"../../../../../core/promiseUtils.js\";\nimport { when as d, watch as c, whenOnce as l } from \"../../../../../core/reactiveUtils.js\";\nimport { property as p } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport { subclass as y } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { convertToGeometry as f } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { QueryEngine as m } from \"../../../../../layers/graphics/data/QueryEngine.js\";\nimport S from \"../../../../../layers/support/FieldsIndex.js\";\nimport { FeatureStore2D as _ } from \"../FeatureStore2D.js\";\nimport { createSource as v } from \"../sources/createSource.js\";\nimport b from \"../support/AttributeStore.js\";\nimport { BinStore as I } from \"../support/BinStore.js\";\nimport { ClusterStore as Q } from \"../support/ClusterStore.js\";\nimport { ComputedAttributeStorage as C } from \"../support/ComputedAttributeStorage.js\";\nimport { FeatureSetReaderJSON as E } from \"../support/FeatureSetReaderJSON.js\";\nimport { UpdateToken as w } from \"../support/UpdateToken.js\";\nimport { QueueProcessor as F } from \"../../../../support/QueueProcessor.js\";\nvar T = 5e3,\n  k = \"tileRenderer.featuresView.attributeView.initialize\",\n  j = \"tileRenderer.featuresView.attributeView.requestUpdate\",\n  x = \"tileRenderer.featuresView.requestRender\";\nfunction R(e) {\n  return \"worker:port-closed\" === e.name;\n}\nfunction A(e) {\n  if (!h(e) && !R(e)) throw e;\n}\nfunction U(e) {\n  return \"feature\" === e.type && \"snapshot\" === e.mode;\n}\nvar q = /*#__PURE__*/function (_t) {\n  _inherits(q, _t);\n  var _super = _createSuper(q);\n  function q() {\n    var _this;\n    _classCallCheck(this, q);\n    _this = _super.apply(this, arguments), _this._storage = new C(), _this._markedIdsBufId = _this._storage.createBitset(), _this._lastCleanup = performance.now(), _this._cleanupNeeded = !1, _this._invalidated = !1, _this._tileToResolver = new Map(), _this._didEdit = !1, _this._updateVersion = 1, _this.tileStore = null, _this.config = null, _this.processor = null, _this.remoteClient = null, _this.service = null;\n    return _this;\n  }\n  _createClass(q, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n      this._initStores(), this._initSource(), this._updateQueue = new F({\n        concurrency: \"stream\" === this._source.type ? 1 : 4,\n        process: function process(e, t) {\n          return _this2._onTileMessage(e, {\n            signal: t\n          });\n        }\n      }), this.addHandles([this.tileStore.on(\"update\", this.onTileUpdate.bind(this)), d(function () {\n        return !_this2.updating;\n      }, function () {\n        return _this2.onIdle();\n      })]), this._checkUpdating = setInterval(function () {\n        return _this2.notifyChange(\"updating\");\n      }, 300);\n    }\n  }, {\n    key: \"_initSource\",\n    value: function _initSource() {\n      var _this3 = this;\n      var e = this.tileStore.tileScheme,\n        t = function t() {\n          return _this3._updateQueue && _this3._updateQueue.length < 50;\n        },\n        r = function r(e, t) {\n          return _this3._invalidated = !0, _this3._patchTile(e, t);\n        };\n      this._source = v(this.service, this.spatialReference, e, r, t, this.featureStore), this._proxyEvents();\n    }\n  }, {\n    key: \"_proxyEvents\",\n    value: function _proxyEvents() {\n      var _this4 = this;\n      if (\"stream\" === this._source.type) {\n        var _e = this._source.events,\n          _t2 = this._source;\n        this.addHandles([c(function () {\n          return _t2.connectionStatus;\n        }, function (e) {\n          return _this4.remoteClient.invoke(\"setProperty\", {\n            propertyName: \"connectionStatus\",\n            value: e\n          }).catch(A);\n        }, {\n          initial: !0\n        }), c(function () {\n          return _t2.errorString;\n        }, function (e) {\n          return _this4.remoteClient.invoke(\"setProperty\", {\n            propertyName: \"errorString\",\n            value: e\n          }).catch(A);\n        }, {\n          initial: !0\n        }), _e.on(\"data-received\", function (e) {\n          return _this4.remoteClient.invoke(\"emitEvent\", {\n            name: \"data-received\",\n            event: {\n              attributes: e.attributes,\n              centroid: e.centroid,\n              geometry: e.geometry\n            }\n          }).catch(A);\n        }), _e.on(\"message-received\", function (e) {\n          return _this4.remoteClient.invoke(\"emitEvent\", {\n            name: \"message-received\",\n            event: e\n          }).catch(A);\n        }), _e.on(\"updateRate\", function (e) {\n          return _this4.remoteClient.invoke(\"emitEvent\", {\n            name: \"update-rate\",\n            event: _objectSpread({}, e)\n          }).catch(A);\n        })]);\n      }\n    }\n  }, {\n    key: \"_initAttributeStore\",\n    value: function _initAttributeStore(e) {\n      var _this5 = this;\n      this.attributeStore || (this.attributeStore = new b({\n        type: \"remote\",\n        initialize: function initialize(e, t) {\n          return o(_this5.remoteClient.invoke(k, e, {\n            signal: t\n          }).catch(A));\n        },\n        update: function update(e, t) {\n          return o(_this5.remoteClient.invoke(j, e, {\n            signal: t\n          }).catch(A));\n        },\n        render: function render(e) {\n          return o(_this5.remoteClient.invoke(x, void 0, {\n            signal: e\n          }).catch(A));\n        }\n      }, e, function () {\n        return _this5.notifyChange(\"updating\");\n      }));\n    }\n  }, {\n    key: \"_initStores\",\n    value: function _initStores() {\n      var e = \"snapshot\" === this.service.type ? \"snapshot\" : \"on-demand\",\n        t = {\n          geometryInfo: {\n            geometryType: this.service.geometryType,\n            hasM: !1,\n            hasZ: !1\n          },\n          spatialReference: this.spatialReference,\n          fieldsIndex: this.fieldsIndex,\n          fields: this.service.fields\n        };\n      this.featureStore = new _(t, this._storage, e);\n    }\n  }, {\n    key: \"_initQueryEngine\",\n    value: function _initQueryEngine(e) {\n      var _this$featureQueryEng, _e$schema$source$defi;\n      var t = this;\n      (_this$featureQueryEng = this.featureQueryEngine) !== null && _this$featureQueryEng !== void 0 && _this$featureQueryEng.destroy(), this.featureQueryEngine = new m({\n        definitionExpression: (_e$schema$source$defi = e.schema.source.definitionExpression) !== null && _e$schema$source$defi !== void 0 ? _e$schema$source$defi : void 0,\n        fields: this.service.fields,\n        geometryType: this.service.geometryType,\n        objectIdField: this.service.objectIdField,\n        hasM: !1,\n        hasZ: !1,\n        spatialReference: this.spatialReference.toJSON(),\n        cacheSpatialQueries: !0,\n        featureStore: this.featureStore,\n        aggregateAdapter: {\n          getFeatureObjectIds: function getFeatureObjectIds(e) {\n            if (r(t.aggregateStore)) return [];\n            return t.aggregateStore.getFeatureDisplayIdsForAggregate(e).map(function (e) {\n              return t.getObjectId(e);\n            });\n          }\n        },\n        timeInfo: this.service.timeInfo\n      });\n    }\n  }, {\n    key: \"_initAggregateQueryEngine\",\n    value: function _initAggregateQueryEngine(e, t) {\n      var _this$aggregateQueryE;\n      if ((_this$aggregateQueryE = this.aggregateQueryEngine) !== null && _this$aggregateQueryE !== void 0 && _this$aggregateQueryE.destroy(), r(e)) return;\n      var s = t.targets.aggregate.params.fields.slice();\n      this.aggregateQueryEngine = new m({\n        definitionExpression: void 0,\n        fields: s,\n        geometryType: e.geometryInfo.geometryType,\n        objectIdField: e.objectIdField,\n        hasM: e.geometryInfo.hasM,\n        hasZ: e.geometryInfo.hasZ,\n        spatialReference: this.spatialReference.toJSON(),\n        cacheSpatialQueries: !1,\n        featureStore: e,\n        aggregateAdapter: {\n          getFeatureObjectIds: function getFeatureObjectIds(e) {\n            return [];\n          }\n        }\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this$featureQueryEng2, _this$aggregateQueryE2, _this$attributeStore;\n      this._updateQueue.destroy(), this._source.destroy(), (_this$featureQueryEng2 = this.featureQueryEngine) !== null && _this$featureQueryEng2 !== void 0 && _this$featureQueryEng2.destroy(), (_this$aggregateQueryE2 = this.aggregateQueryEngine) !== null && _this$aggregateQueryE2 !== void 0 && _this$aggregateQueryE2.destroy(), (_this$attributeStore = this.attributeStore) === null || _this$attributeStore === void 0 ? void 0 : _this$attributeStore.destroy();\n      var _iterator = _createForOfIteratorHelper(this.tileStore.tiles),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _e2 = _step.value;\n          this._source.unsubscribe(_e2);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      clearInterval(this._checkUpdating);\n    }\n  }, {\n    key: \"fieldsIndex\",\n    get: function get() {\n      return new S(this.service.fields);\n    }\n  }, {\n    key: \"spatialReference\",\n    get: function get() {\n      return this.tileStore.tileScheme.spatialReference;\n    }\n  }, {\n    key: \"updating\",\n    get: function get() {\n      return this.isUpdating();\n    }\n  }, {\n    key: \"isUpdating\",\n    value: function isUpdating() {\n      var e = this._source.updating,\n        t = !!this._updateQueue.length,\n        r = !this.attributeStore || this.attributeStore.isUpdating(),\n        s = e || t || r;\n      return has(\"esri-2d-log-updating\") && console.log(\"Updating FeatureController2D: \".concat(s, \"\\n  -> updatingSource \").concat(e, \"\\n  -> updateQueue \").concat(t, \"\\n  -> updatingAttributeStore \").concat(r, \"\\n\")), s;\n    }\n  }, {\n    key: \"updateCustomParameters\",\n    value: function updateCustomParameters(e) {\n      \"stream\" === this._source.type && this._source.updateCustomParameters(e);\n    }\n  }, {\n    key: \"enableEvent\",\n    value: function enableEvent(e) {\n      this._source.enableEvent(e.name, e.value);\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this._updateQueue.pause(), this._updateQueue.clear();\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      this._updateQueue.resume();\n    }\n  }, {\n    key: \"pauseStream\",\n    value: function pauseStream() {\n      \"stream\" === this._source.type && this._source.pauseStream();\n    }\n  }, {\n    key: \"resumeStream\",\n    value: function resumeStream() {\n      \"stream\" === this._source.type && this._source.resumeStream();\n    }\n  }, {\n    key: \"sendMessageToSocket\",\n    value: function sendMessageToSocket(e) {\n      \"stream\" === this._source.type && this._source.sendMessageToSocket(e);\n    }\n  }, {\n    key: \"sendMessageToClient\",\n    value: function sendMessageToClient(e) {\n      \"stream\" === this._source.type && this._source.sendMessageToClient(e);\n    }\n  }, {\n    key: \"_initAggregateStore\",\n    value: function _initAggregateStore(e) {\n      var _e$schema$targets,\n        _e$schema$targets$agg,\n        _this6 = this;\n      var t = (_e$schema$targets = e.schema.targets) === null || _e$schema$targets === void 0 ? void 0 : (_e$schema$targets$agg = _e$schema$targets.aggregate) === null || _e$schema$targets$agg === void 0 ? void 0 : _e$schema$targets$agg.type,\n        r = s(this.config, function (e) {\n          var _e$schema$targets2, _e$schema$targets2$ag;\n          return (_e$schema$targets2 = e.schema.targets) === null || _e$schema$targets2 === void 0 ? void 0 : (_e$schema$targets2$ag = _e$schema$targets2.aggregate) === null || _e$schema$targets2$ag === void 0 ? void 0 : _e$schema$targets2$ag.type;\n        });\n      if (r !== t && (i(this.aggregateStore) && (this.removeHandles(\"valueRangesChanged\"), this.aggregateStore.destroy(), this.aggregateStore = null), t)) {\n        switch (t) {\n          case \"cluster\":\n            {\n              var _e3 = {\n                geometryInfo: {\n                  geometryType: \"esriGeometryPoint\",\n                  hasM: !1,\n                  hasZ: !1\n                },\n                spatialReference: this.spatialReference,\n                fieldsIndex: this.fieldsIndex,\n                fields: this.service.fields\n              };\n              this.aggregateStore = new Q(_e3, this.spatialReference, this._storage, this.service), this.addHandles(this.aggregateStore.events.on(\"valueRangesChanged\", function (e) {\n                _this6.remoteClient.invoke(\"emitEvent\", {\n                  name: \"valueRangesChanged\",\n                  event: {\n                    valueRanges: e.valueRanges\n                  }\n                }).catch(A);\n              }), \"valueRangesChanged\");\n              break;\n            }\n          case \"bin\":\n            {\n              var _e4 = {\n                geometryInfo: {\n                  geometryType: \"esriGeometryPolygon\",\n                  hasM: !1,\n                  hasZ: !1\n                },\n                spatialReference: this.spatialReference,\n                fieldsIndex: this.fieldsIndex,\n                fields: this.service.fields\n              };\n              this.aggregateStore = new I(_e4, this.spatialReference, this._storage, this.service);\n              break;\n            }\n        }\n        this.aggregateStore.onTileUpdate({\n          added: this.tileStore.tiles,\n          removed: []\n        });\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function () {\n      var _update = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e, t) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this._updateVersion++;\n              this._initQueryEngine(t);\n              this._initAttributeStore(t);\n              this.pause();\n              _context.next = 6;\n              return Promise.all([this._source.update(e, t.schema.source), this.featureStore.updateSchema(e, t.schema.targets.feature), this.attributeStore.update(e, t), this.attributeStore.updateFilters(e, t, this)]);\n            case 6:\n              this._initAggregateStore(t);\n              _context.t0 = i(this.aggregateStore);\n              if (!_context.t0) {\n                _context.next = 11;\n                break;\n              }\n              _context.next = 11;\n              return this.aggregateStore.updateSchema(e, t.schema.targets.aggregate);\n            case 11:\n              this._initAggregateQueryEngine(this.aggregateStore, t.schema);\n              has(\"esri-2d-update-debug\") && e.describe();\n              this._set(\"config\", t);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function update(_x, _x2) {\n        return _update.apply(this, arguments);\n      }\n      return update;\n    }()\n  }, {\n    key: \"applyUpdate\",\n    value: function () {\n      var _applyUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e) {\n        var _this7 = this;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              e.version = this._updateVersion;\n              has(\"esri-2d-update-debug\") && console.debug(\"Applying update \".concat(e.version));\n              e.mesh && this.clearTiles();\n              this._updateQueue.resume();\n              _context2.next = 6;\n              return this._source.applyUpdate(e);\n            case 6:\n              this.notifyChange(\"updating\");\n              _context2.next = 9;\n              return l(function () {\n                return !_this7.updating;\n              });\n            case 9:\n              _context2.t0 = i(this.aggregateStore);\n              if (!_context2.t0) {\n                _context2.next = 15;\n                break;\n              }\n              _context2.next = 13;\n              return n(10);\n            case 13:\n              _context2.next = 15;\n              return l(function () {\n                return !_this7.updating;\n              });\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function applyUpdate(_x3) {\n        return _applyUpdate.apply(this, arguments);\n      }\n      return applyUpdate;\n    }()\n  }, {\n    key: \"onEdits\",\n    value: function () {\n      var _onEdits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref) {\n        var _this8 = this;\n        var e, _t3, _r;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              e = _ref.edits;\n              has(\"esri-2d-update-debug\") && console.debug(\"Applying Edit:\", e), this._didEdit = !0;\n              _context3.prev = 2;\n              _t3 = e.removed.map(function (e) {\n                return e.objectId && -1 !== e.objectId ? e.objectId : _this8._lookupObjectIdByGlobalId(e.globalId);\n              }), _r = e.addOrModified.map(function (_ref2) {\n                var e = _ref2.objectId;\n                return e;\n              });\n              this.featureStore.invalidate();\n              _context3.next = 7;\n              return this._source.edit(_r, _t3);\n            case 7:\n              this.clearTiles();\n              this.notifyChange(\"updating\");\n              i(this.aggregateStore) && this.aggregateStore.clear();\n              _context3.next = 12;\n              return this._source.resend();\n            case 12:\n              _context3.next = 14;\n              return l(function () {\n                return !_this8.updating;\n              });\n            case 14:\n              _context3.next = 18;\n              break;\n            case 16:\n              _context3.prev = 16;\n              _context3.t0 = _context3[\"catch\"](2);\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this, [[2, 16]]);\n      }));\n      function onEdits(_x4) {\n        return _onEdits.apply(this, arguments);\n      }\n      return onEdits;\n    }()\n  }, {\n    key: \"refresh\",\n    value: function () {\n      var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e) {\n        var _this9 = this;\n        var _e5;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (e.dataChanged) {\n                _context4.next = 3;\n                break;\n              }\n              _e5 = w.empty();\n              return _context4.abrupt(\"return\", (_e5.storage.filters = !0, this.applyUpdate(_e5)));\n            case 3:\n              this.featureStore.invalidate();\n              this.clearTiles();\n              this._source.refresh(this._updateVersion, e);\n              this._cleanupNeeded = !0;\n              this.notifyChange(\"updating\");\n              _context4.next = 10;\n              return l(function () {\n                return !_this9.updating;\n              });\n            case 10:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function refresh(_x5) {\n        return _refresh.apply(this, arguments);\n      }\n      return refresh;\n    }()\n  }, {\n    key: \"clearTiles\",\n    value: function clearTiles() {\n      var _iterator2 = _createForOfIteratorHelper(this.tileStore.tiles),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _e6 = _step2.value;\n          this.processor.onTileClear(_e6);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"onTileUpdate\",\n    value: function onTileUpdate(e) {\n      i(this.aggregateStore) && this.aggregateStore.onTileUpdate(e);\n      var _iterator3 = _createForOfIteratorHelper(e.added),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _t4 = _step3.value;\n          this._source.subscribe(_t4, this._updateVersion), this._level = _t4.level;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      var _iterator4 = _createForOfIteratorHelper(e.removed),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _t5 = _step4.value;\n          this._source.unsubscribe(_t5), this._cleanupNeeded = !0, this._tileToResolver.has(_t5.id) && (this._tileToResolver.get(_t5.id).resolve(), this._tileToResolver.delete(_t5.id));\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      this.notifyChange(\"updating\");\n    }\n  }, {\n    key: \"onIdle\",\n    value: function () {\n      var _onIdle = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.t0 = this._invalidated;\n              if (!_context5.t0) {\n                _context5.next = 7;\n                break;\n              }\n              this._invalidated = !1;\n              _context5.t1 = i(this.aggregateStore) || \"heatmap\" === this.processor.type;\n              if (!_context5.t1) {\n                _context5.next = 7;\n                break;\n              }\n              _context5.next = 7;\n              return this._repushCurrentLevelTiles();\n            case 7:\n              this._markAndSweep();\n            case 8:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function onIdle() {\n        return _onIdle.apply(this, arguments);\n      }\n      return onIdle;\n    }()\n  }, {\n    key: \"querySummaryStatistics\",\n    value: function () {\n      var _querySummaryStatistics = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_ref3) {\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              e = _ref3.query, t = _ref3.params;\n              return _context6.abrupt(\"return\", this.featureQueryEngine.executeQueryForSummaryStatistics(e, t));\n            case 2:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function querySummaryStatistics(_x6) {\n        return _querySummaryStatistics.apply(this, arguments);\n      }\n      return querySummaryStatistics;\n    }()\n  }, {\n    key: \"queryAggregateSummaryStatistics\",\n    value: function () {\n      var _queryAggregateSummaryStatistics = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(_ref4) {\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              e = _ref4.query, t = _ref4.params;\n              return _context7.abrupt(\"return\", this.aggregateQueryEngine.executeQueryForSummaryStatistics(e, t));\n            case 2:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function queryAggregateSummaryStatistics(_x7) {\n        return _queryAggregateSummaryStatistics.apply(this, arguments);\n      }\n      return queryAggregateSummaryStatistics;\n    }()\n  }, {\n    key: \"queryUniqueValues\",\n    value: function () {\n      var _queryUniqueValues = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(_ref5) {\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              e = _ref5.query, t = _ref5.params;\n              return _context8.abrupt(\"return\", this.featureQueryEngine.executeQueryForUniqueValues(e, t));\n            case 2:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function queryUniqueValues(_x8) {\n        return _queryUniqueValues.apply(this, arguments);\n      }\n      return queryUniqueValues;\n    }()\n  }, {\n    key: \"queryAggregateUniqueValues\",\n    value: function () {\n      var _queryAggregateUniqueValues = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(_ref6) {\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              e = _ref6.query, t = _ref6.params;\n              return _context9.abrupt(\"return\", this.aggregateQueryEngine.executeQueryForUniqueValues(e, t));\n            case 2:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function queryAggregateUniqueValues(_x9) {\n        return _queryAggregateUniqueValues.apply(this, arguments);\n      }\n      return queryAggregateUniqueValues;\n    }()\n  }, {\n    key: \"queryClassBreaks\",\n    value: function () {\n      var _queryClassBreaks = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(_ref7) {\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              e = _ref7.query, t = _ref7.params;\n              return _context10.abrupt(\"return\", this.featureQueryEngine.executeQueryForClassBreaks(e, t));\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this);\n      }));\n      function queryClassBreaks(_x10) {\n        return _queryClassBreaks.apply(this, arguments);\n      }\n      return queryClassBreaks;\n    }()\n  }, {\n    key: \"queryAggregateClassBreaks\",\n    value: function () {\n      var _queryAggregateClassBreaks = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(_ref8) {\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              e = _ref8.query, t = _ref8.params;\n              return _context11.abrupt(\"return\", this.aggregateQueryEngine.executeQueryForClassBreaks(e, t));\n            case 2:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, this);\n      }));\n      function queryAggregateClassBreaks(_x11) {\n        return _queryAggregateClassBreaks.apply(this, arguments);\n      }\n      return queryAggregateClassBreaks;\n    }()\n  }, {\n    key: \"queryHistogram\",\n    value: function () {\n      var _queryHistogram = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(_ref9) {\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              e = _ref9.query, t = _ref9.params;\n              return _context12.abrupt(\"return\", this.featureQueryEngine.executeQueryForHistogram(e, t));\n            case 2:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12, this);\n      }));\n      function queryHistogram(_x12) {\n        return _queryHistogram.apply(this, arguments);\n      }\n      return queryHistogram;\n    }()\n  }, {\n    key: \"queryAggregateHistogram\",\n    value: function () {\n      var _queryAggregateHistogram = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(_ref10) {\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              e = _ref10.query, t = _ref10.params;\n              return _context13.abrupt(\"return\", this.aggregateQueryEngine.executeQueryForHistogram(e, t));\n            case 2:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13, this);\n      }));\n      function queryAggregateHistogram(_x13) {\n        return _queryAggregateHistogram.apply(this, arguments);\n      }\n      return queryAggregateHistogram;\n    }()\n  }, {\n    key: \"queryExtent\",\n    value: function queryExtent(e) {\n      return this.featureQueryEngine.executeQueryForExtent(e);\n    }\n  }, {\n    key: \"queryAggregates\",\n    value: function queryAggregates(e) {\n      return this.aggregateQueryEngine.executeQuery(e);\n    }\n  }, {\n    key: \"queryAggregateCount\",\n    value: function queryAggregateCount(e) {\n      return this.aggregateQueryEngine.executeQueryForCount(e);\n    }\n  }, {\n    key: \"queryAggregateIds\",\n    value: function queryAggregateIds(e) {\n      return this.aggregateQueryEngine.executeQueryForIds(e);\n    }\n  }, {\n    key: \"queryFeatures\",\n    value: function queryFeatures(e) {\n      return this.featureQueryEngine.executeQuery(e);\n    }\n  }, {\n    key: \"queryVisibleFeatures\",\n    value: function () {\n      var _queryVisibleFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(e) {\n        var _this10 = this;\n        var t, r;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.next = 2;\n              return this.featureQueryEngine.executeQuery(e);\n            case 2:\n              t = _context14.sent;\n              r = t.objectIdFieldName;\n              return _context14.abrupt(\"return\", (t.features = t.features.filter(function (e) {\n                var t = e.attributes[r],\n                  i = _this10.getDisplayId(t);\n                return s(i, function (e) {\n                  return _this10.attributeStore.isVisible(e);\n                });\n              }), t));\n            case 5:\n            case \"end\":\n              return _context14.stop();\n          }\n        }, _callee14, this);\n      }));\n      function queryVisibleFeatures(_x14) {\n        return _queryVisibleFeatures.apply(this, arguments);\n      }\n      return queryVisibleFeatures;\n    }()\n  }, {\n    key: \"queryFeatureCount\",\n    value: function queryFeatureCount(e) {\n      return this.featureQueryEngine.executeQueryForCount(e);\n    }\n  }, {\n    key: \"queryLatestObservations\",\n    value: function queryLatestObservations(e) {\n      return this.featureQueryEngine.executeQueryForLatestObservations(e);\n    }\n  }, {\n    key: \"queryObjectIds\",\n    value: function queryObjectIds(e) {\n      return this.featureQueryEngine.executeQueryForIds(e);\n    }\n  }, {\n    key: \"queryStatistics\",\n    value: function () {\n      var _queryStatistics = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {\n        return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n          while (1) switch (_context15.prev = _context15.next) {\n            case 0:\n              return _context15.abrupt(\"return\", this.featureStore.storeStatistics);\n            case 1:\n            case \"end\":\n              return _context15.stop();\n          }\n        }, _callee15, this);\n      }));\n      function queryStatistics() {\n        return _queryStatistics.apply(this, arguments);\n      }\n      return queryStatistics;\n    }()\n  }, {\n    key: \"getObjectId\",\n    value: function getObjectId(e) {\n      return this.featureStore.lookupObjectId(e, this._storage);\n    }\n  }, {\n    key: \"getDisplayId\",\n    value: function getDisplayId(e) {\n      if (i(this.aggregateStore)) {\n        var _t6 = this.aggregateStore.getDisplayId(e);\n        if (r(_t6)) {\n          var _t7 = this.featureStore.lookupDisplayId(e);\n          return this.aggregateStore.getDisplayIdForReferenceId(_t7);\n        }\n        return _t6;\n      }\n      return this.featureStore.lookupDisplayId(e);\n    }\n  }, {\n    key: \"getFeatures\",\n    value: function getFeatures(e) {\n      var t = [],\n        r = [];\n      var _iterator5 = _createForOfIteratorHelper(e),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _s = _step5.value;\n          var _e7 = i(this.aggregateStore) ? this.getAggregate(_s) : null;\n          if (i(_e7)) {\n            if (i(_e7.attributes.referenceId)) {\n              var _r2 = this.getFeature(_e7.attributes.referenceId);\n              i(_r2) && t.push(_r2);\n            } else r.push(_e7);\n          } else {\n            var _e8 = this.getFeature(_s);\n            i(_e8) && t.push(_e8);\n          }\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      return {\n        features: t,\n        aggregates: r\n      };\n    }\n  }, {\n    key: \"getFeature\",\n    value: function getFeature(e) {\n      var t = this.featureStore.lookupFeatureByDisplayId(e, this._storage);\n      if (r(t)) return null;\n      var s = t.readHydratedGeometry(),\n        i = f(s, t.geometryType, t.hasZ, t.hasM);\n      return {\n        attributes: t.readAttributes(),\n        geometry: i\n      };\n    }\n  }, {\n    key: \"getAggregate\",\n    value: function getAggregate(e) {\n      return r(this.aggregateStore) ? null : this.aggregateStore.getAggregate(e);\n    }\n  }, {\n    key: \"getAggregates\",\n    value: function getAggregates() {\n      return r(this.aggregateStore) ? [] : this.aggregateStore.getAggregates();\n    }\n  }, {\n    key: \"setHighlight\",\n    value: function () {\n      var _setHighlight = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(e) {\n        var _this11 = this;\n        var t;\n        return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n          while (1) switch (_context16.prev = _context16.next) {\n            case 0:\n              t = a(e.map(function (e) {\n                return _this11.getDisplayId(e);\n              }));\n              return _context16.abrupt(\"return\", this.attributeStore.setHighlight(e, t));\n            case 2:\n            case \"end\":\n              return _context16.stop();\n          }\n        }, _callee16, this);\n      }));\n      function setHighlight(_x15) {\n        return _setHighlight.apply(this, arguments);\n      }\n      return setHighlight;\n    }()\n  }, {\n    key: \"_lookupObjectIdByGlobalId\",\n    value: function _lookupObjectIdByGlobalId(e) {\n      var t = this.service.globalIdField;\n      if (r(t)) throw new Error(\"Expected globalIdField to be defined\");\n      var s = null;\n      if (this.featureStore.forEach(function (r) {\n        e === r.readAttribute(t) && (s = r.getObjectId());\n      }), r(s)) throw new Error(\"Expected to find a feature with globalId \".concat(e));\n      return s;\n    }\n  }, {\n    key: \"_repushCurrentLevelTiles\",\n    value: function () {\n      var _repushCurrentLevelTiles2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {\n        var _this12 = this;\n        var e, t;\n        return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n          while (1) switch (_context19.prev = _context19.next) {\n            case 0:\n              e = this.tileStore.tiles.filter(function (e) {\n                return e.level === _this12._level;\n              });\n              e.map( /*#__PURE__*/function () {\n                var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17(e) {\n                  return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n                    while (1) switch (_context17.prev = _context17.next) {\n                      case 0:\n                        return _context17.abrupt(\"return\", _this12._patchTile({\n                          type: \"append\",\n                          id: e.key.id,\n                          clear: !0,\n                          addOrUpdate: null,\n                          end: !1\n                        }));\n                      case 1:\n                      case \"end\":\n                        return _context17.stop();\n                    }\n                  }, _callee17);\n                }));\n                return function (_x16) {\n                  return _ref11.apply(this, arguments);\n                };\n              }());\n              t = e.map( /*#__PURE__*/function () {\n                var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18(e) {\n                  return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n                    while (1) switch (_context18.prev = _context18.next) {\n                      case 0:\n                        return _context18.abrupt(\"return\", _this12._patchTile({\n                          type: \"append\",\n                          id: e.key.id,\n                          addOrUpdate: E.fromOptimizedFeatures([], _this12.service),\n                          remove: [],\n                          end: !0,\n                          isRepush: !0,\n                          status: w.empty()\n                        }));\n                      case 1:\n                      case \"end\":\n                        return _context18.stop();\n                    }\n                  }, _callee18);\n                }));\n                return function (_x17) {\n                  return _ref12.apply(this, arguments);\n                };\n              }());\n              _context19.next = 5;\n              return Promise.all(t);\n            case 5:\n            case \"end\":\n              return _context19.stop();\n          }\n        }, _callee19, this);\n      }));\n      function _repushCurrentLevelTiles() {\n        return _repushCurrentLevelTiles2.apply(this, arguments);\n      }\n      return _repushCurrentLevelTiles;\n    }()\n  }, {\n    key: \"_maybeForceCleanup\",\n    value: function _maybeForceCleanup() {\n      performance.now() - this._lastCleanup > T && this._markAndSweep();\n    }\n  }, {\n    key: \"_patchTile\",\n    value: function _patchTile(e, t) {\n      var _this13 = this;\n      var r = this._updateQueue.push(e, t).then(function () {\n        _this13.notifyChange(\"updating\");\n      }).catch(function (e) {\n        _this13.notifyChange(\"updating\");\n      });\n      return this.notifyChange(\"updating\"), r;\n    }\n  }, {\n    key: \"_onTileMessage\",\n    value: function () {\n      var _onTileMessage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee20(e, t) {\n        var _e$remove;\n        var _t8, a, o, n, _iterator6, _step6, _r5, _e9, _t9, _r3, _r4;\n        return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n          while (1) switch (_context20.prev = _context20.next) {\n            case 0:\n              if (u(t), has(\"esri-2d-update-debug\")) {\n                _t8 = s(e.addOrUpdate, function (e) {\n                  return e.hasFeatures;\n                });\n                console.debug(e.id, \"FeatureController:onTileMessage: [clear:\".concat(e.clear, \", end:\").concat(e.end, \", features: \").concat(_t8, \"]\"));\n              }\n              a = this.tileStore.get(e.id);\n              if (a) {\n                _context20.next = 4;\n                break;\n              }\n              return _context20.abrupt(\"return\");\n            case 4:\n              if (!e.clear) {\n                _context20.next = 6;\n                break;\n              }\n              return _context20.abrupt(\"return\", this.processor.onTileClear(a));\n            case 6:\n              o = e.status;\n              this._cleanupNeeded = !0;\n              n = [];\n              _iterator6 = _createForOfIteratorHelper((_e$remove = e.remove) !== null && _e$remove !== void 0 ? _e$remove : []);\n              try {\n                for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                  _r5 = _step6.value;\n                  _e9 = this.featureStore.lookupDisplayId(_r5);\n                  _e9 && n.push(_e9);\n                }\n              } catch (err) {\n                _iterator6.e(err);\n              } finally {\n                _iterator6.f();\n              }\n              e.remove = n;\n              _context20.prev = 12;\n              if (!r(e.addOrUpdate)) {\n                _context20.next = 15;\n                break;\n              }\n              return _context20.abrupt(\"return\", void this.processor.onTileMessage(a, _objectSpread(_objectSpread({}, e), {}, {\n                addOrUpdate: null\n              }), i(this.aggregateStore), t).catch(g));\n            case 15:\n              if (!(e.addOrUpdate.setArcadeSpatialReference(this.spatialReference), this.featureStore.hasInstance(e.addOrUpdate.instance) && o.targets.feature || (o.targets.feature = !0, this.featureStore.onTileData(a, e)), !o.storage.data || !o.storage.filters)) {\n                _context20.next = 24;\n                break;\n              }\n              o.storage.data = !0, o.storage.filters = !0, this.attributeStore.onTileData(a, e);\n              if (!(\"stream\" === this._source.type || this._didEdit)) {\n                _context20.next = 23;\n                break;\n              }\n              _context20.next = 20;\n              return this.attributeStore.sendUpdates();\n            case 20:\n              u(t);\n              _context20.next = 24;\n              break;\n            case 23:\n              this.attributeStore.sendUpdates();\n            case 24:\n              if (!(i(this.aggregateStore) && !o.targets.aggregate)) {\n                _context20.next = 34;\n                break;\n              }\n              o.targets.aggregate = !0;\n              _t9 = U(this._source) && this._source.loading, _r3 = !U(this._source) || _t9 || e.end;\n              if (!(this.aggregateStore.onTileData(a, e, this._storage, this.attributeStore, _r3), !_r3)) {\n                _context20.next = 29;\n                break;\n              }\n              return _context20.abrupt(\"return\");\n            case 29:\n              _context20.t0 = o.mesh;\n              if (_context20.t0) {\n                _context20.next = 34;\n                break;\n              }\n              this.attributeStore.onTileData(a, e);\n              _context20.next = 34;\n              return this.attributeStore.sendUpdates();\n            case 34:\n              if (o.mesh) {\n                _context20.next = 40;\n                break;\n              }\n              o.mesh = !0;\n              _r4 = i(this.aggregateStore) && \"cluster\" === this.aggregateStore.type;\n              _context20.next = 39;\n              return this.processor.onTileMessage(a, e, _r4, t);\n            case 39:\n              u(t);\n            case 40:\n              this._maybeForceCleanup();\n              _context20.next = 46;\n              break;\n            case 43:\n              _context20.prev = 43;\n              _context20.t1 = _context20[\"catch\"](12);\n              g(_context20.t1);\n            case 46:\n            case \"end\":\n              return _context20.stop();\n          }\n        }, _callee20, this, [[12, 43]]);\n      }));\n      function _onTileMessage(_x18, _x19) {\n        return _onTileMessage2.apply(this, arguments);\n      }\n      return _onTileMessage;\n    }()\n  }, {\n    key: \"_mark\",\n    value: function _mark(e, t, r) {\n      var s = (4294901760 & this._storage.getInstanceId(e)) >>> 16;\n      e && (t.add(s), r.set(e));\n    }\n  }, {\n    key: \"_markAndSweep\",\n    value: function _markAndSweep() {\n      var _this14 = this;\n      this._lastCleanup = performance.now();\n      if (!(!(\"feature\" === this._source.type && \"snapshot\" === this._source.mode) && (\"stream\" === this._source.type || this._cleanupNeeded))) return;\n      this._cleanupNeeded = !1;\n      var e = this._storage.getBitset(this._markedIdsBufId),\n        t = new Set();\n      e.clear();\n      var _iterator7 = _createForOfIteratorHelper(this.tileStore.tiles),\n        _step7;\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var _r7 = _step7.value;\n          var _iterator9 = _createForOfIteratorHelper(this._source.readers(_r7.id)),\n            _step9;\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var _s3 = _step9.value;\n              var _r8 = _s3.getCursor();\n              for (; _r8.next();) {\n                var _s4 = _r8.getDisplayId();\n                if (!_s4) {\n                  var _e10 = _r8.getObjectId();\n                  _s4 = this.featureStore.lookupDisplayId(_e10);\n                }\n                this._mark(_s4, t, e);\n              }\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n      \"symbol\" === this.processor.type && this.processor.forEachBufferId(function (r) {\n        _this14._mark(r, t, e);\n      }), this._updateQueue.forEach(function (r) {\n        var _r$remove;\n        var _iterator8 = _createForOfIteratorHelper((_r$remove = r.remove) !== null && _r$remove !== void 0 ? _r$remove : []),\n          _step8;\n        try {\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var _s2 = _step8.value;\n            var _r6 = _this14.featureStore.lookupDisplayId(_s2);\n            _this14._mark(_r6, t, e);\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n      }), i(this.aggregateStore) && (this.aggregateStore.sweepFeatures(e, this.featureStore), \"sweepAggregates\" in this.aggregateStore && this.aggregateStore.sweepAggregates(this._storage, this.attributeStore, this._level)), this.featureStore.sweepFeatures(e, this._storage, this.attributeStore), this.featureStore.sweepFeatureSets(t);\n    }\n  }]);\n  return q;\n}(t);\ne([p({\n  constructOnly: !0\n})], q.prototype, \"tileStore\", void 0), e([p()], q.prototype, \"config\", void 0), e([p({\n  readOnly: !0\n})], q.prototype, \"fieldsIndex\", null), e([p()], q.prototype, \"processor\", void 0), e([p({\n  constructOnly: !0\n})], q.prototype, \"remoteClient\", void 0), e([p({\n  constructOnly: !0\n})], q.prototype, \"service\", void 0), e([p()], q.prototype, \"spatialReference\", null), e([p()], q.prototype, \"updating\", null), q = e([y(\"esri.views.2d.layers.features.controllers.FeatureController2D\")], q);\nvar O = q;\nexport { O as default };","map":{"version":3,"names":["_","e","t","has","isNone","r","applySome","s","isSome","i","filterNones","a","ignoreAbortErrors","o","after","n","throwIfAborted","u","throwIfNotAbortError","g","isAbortError","h","when","d","watch","c","whenOnce","l","property","p","subclass","y","convertToGeometry","f","QueryEngine","m","S","FeatureStore2D","createSource","v","b","BinStore","I","ClusterStore","Q","ComputedAttributeStorage","C","FeatureSetReaderJSON","E","UpdateToken","w","QueueProcessor","F","T","k","j","x","R","name","A","U","type","mode","q","_t","_inherits","_super","_createSuper","_this","_classCallCheck","apply","arguments","_storage","_markedIdsBufId","createBitset","_lastCleanup","performance","now","_cleanupNeeded","_invalidated","_tileToResolver","Map","_didEdit","_updateVersion","tileStore","config","processor","remoteClient","service","_createClass","key","value","initialize","_this2","_initStores","_initSource","_updateQueue","concurrency","_source","process","_onTileMessage","signal","addHandles","on","onTileUpdate","bind","updating","onIdle","_checkUpdating","setInterval","notifyChange","_this3","tileScheme","length","_patchTile","spatialReference","featureStore","_proxyEvents","_this4","events","connectionStatus","invoke","propertyName","catch","initial","errorString","event","attributes","centroid","geometry","_objectSpread","_initAttributeStore","_this5","attributeStore","update","render","geometryInfo","geometryType","hasM","hasZ","fieldsIndex","fields","_initQueryEngine","_this$featureQueryEng","_e$schema$source$defi","featureQueryEngine","destroy","definitionExpression","schema","source","objectIdField","toJSON","cacheSpatialQueries","aggregateAdapter","getFeatureObjectIds","aggregateStore","getFeatureDisplayIdsForAggregate","map","getObjectId","timeInfo","_initAggregateQueryEngine","_this$aggregateQueryE","aggregateQueryEngine","targets","aggregate","params","slice","_this$featureQueryEng2","_this$aggregateQueryE2","_this$attributeStore","_iterator","_createForOfIteratorHelper","tiles","_step","done","unsubscribe","err","clearInterval","get","isUpdating","console","log","concat","updateCustomParameters","enableEvent","pause","clear","resume","pauseStream","resumeStream","sendMessageToSocket","sendMessageToClient","_initAggregateStore","_e$schema$targets","_e$schema$targets$agg","_this6","_e$schema$targets2","_e$schema$targets2$ag","removeHandles","valueRanges","added","removed","_update","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","Promise","all","updateSchema","feature","updateFilters","t0","describe","_set","stop","_x","_x2","_applyUpdate","_callee2","_this7","_callee2$","_context2","version","debug","mesh","clearTiles","applyUpdate","_x3","_onEdits","_callee3","_ref","_this8","_t3","_r","_callee3$","_context3","edits","objectId","_lookupObjectIdByGlobalId","globalId","addOrModified","_ref2","invalidate","edit","resend","onEdits","_x4","_refresh","_callee4","_this9","_e5","_callee4$","_context4","dataChanged","empty","abrupt","storage","filters","refresh","_x5","_iterator2","_step2","onTileClear","_iterator3","_step3","subscribe","_level","level","_iterator4","_step4","id","resolve","delete","_onIdle","_callee5","_callee5$","_context5","t1","_repushCurrentLevelTiles","_markAndSweep","_querySummaryStatistics","_callee6","_ref3","_callee6$","_context6","query","executeQueryForSummaryStatistics","querySummaryStatistics","_x6","_queryAggregateSummaryStatistics","_callee7","_ref4","_callee7$","_context7","queryAggregateSummaryStatistics","_x7","_queryUniqueValues","_callee8","_ref5","_callee8$","_context8","executeQueryForUniqueValues","queryUniqueValues","_x8","_queryAggregateUniqueValues","_callee9","_ref6","_callee9$","_context9","queryAggregateUniqueValues","_x9","_queryClassBreaks","_callee10","_ref7","_callee10$","_context10","executeQueryForClassBreaks","queryClassBreaks","_x10","_queryAggregateClassBreaks","_callee11","_ref8","_callee11$","_context11","queryAggregateClassBreaks","_x11","_queryHistogram","_callee12","_ref9","_callee12$","_context12","executeQueryForHistogram","queryHistogram","_x12","_queryAggregateHistogram","_callee13","_ref10","_callee13$","_context13","queryAggregateHistogram","_x13","queryExtent","executeQueryForExtent","queryAggregates","executeQuery","queryAggregateCount","executeQueryForCount","queryAggregateIds","executeQueryForIds","queryFeatures","_queryVisibleFeatures","_callee14","_this10","_callee14$","_context14","sent","objectIdFieldName","features","filter","getDisplayId","isVisible","queryVisibleFeatures","_x14","queryFeatureCount","queryLatestObservations","executeQueryForLatestObservations","queryObjectIds","_queryStatistics","_callee15","_callee15$","_context15","storeStatistics","queryStatistics","lookupObjectId","lookupDisplayId","getDisplayIdForReferenceId","getFeatures","_iterator5","_step5","getAggregate","referenceId","getFeature","push","aggregates","lookupFeatureByDisplayId","readHydratedGeometry","readAttributes","getAggregates","_setHighlight","_callee16","_this11","_callee16$","_context16","setHighlight","_x15","globalIdField","Error","forEach","readAttribute","_repushCurrentLevelTiles2","_callee19","_this12","_callee19$","_context19","_ref11","_callee17","_callee17$","_context17","addOrUpdate","end","_x16","_ref12","_callee18","_callee18$","_context18","fromOptimizedFeatures","remove","isRepush","status","_x17","_maybeForceCleanup","_this13","then","_onTileMessage2","_callee20","_e$remove","_t8","_iterator6","_step6","_r5","_e9","_t9","_r3","_r4","_callee20$","_context20","hasFeatures","onTileMessage","setArcadeSpatialReference","hasInstance","instance","onTileData","data","sendUpdates","loading","_x18","_x19","_mark","getInstanceId","add","set","_this14","getBitset","Set","_iterator7","_step7","_iterator9","readers","_step9","getCursor","forEachBufferId","_r$remove","_iterator8","_step8","sweepFeatures","sweepAggregates","sweepFeatureSets","constructOnly","prototype","readOnly","O","default"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/views/2d/layers/features/controllers/FeatureController2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import has from\"../../../../../core/has.js\";import{isNone as r,applySome as s,isSome as i,filterNones as a}from\"../../../../../core/maybe.js\";import{ignoreAbortErrors as o,after as n,throwIfAborted as u,throwIfNotAbortError as g,isAbortError as h}from\"../../../../../core/promiseUtils.js\";import{when as d,watch as c,whenOnce as l}from\"../../../../../core/reactiveUtils.js\";import{property as p}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import{subclass as y}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{convertToGeometry as f}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{QueryEngine as m}from\"../../../../../layers/graphics/data/QueryEngine.js\";import S from\"../../../../../layers/support/FieldsIndex.js\";import{FeatureStore2D as _}from\"../FeatureStore2D.js\";import{createSource as v}from\"../sources/createSource.js\";import b from\"../support/AttributeStore.js\";import{BinStore as I}from\"../support/BinStore.js\";import{ClusterStore as Q}from\"../support/ClusterStore.js\";import{ComputedAttributeStorage as C}from\"../support/ComputedAttributeStorage.js\";import{FeatureSetReaderJSON as E}from\"../support/FeatureSetReaderJSON.js\";import{UpdateToken as w}from\"../support/UpdateToken.js\";import{QueueProcessor as F}from\"../../../../support/QueueProcessor.js\";const T=5e3,k=\"tileRenderer.featuresView.attributeView.initialize\",j=\"tileRenderer.featuresView.attributeView.requestUpdate\",x=\"tileRenderer.featuresView.requestRender\";function R(e){return\"worker:port-closed\"===e.name}function A(e){if(!h(e)&&!R(e))throw e}function U(e){return\"feature\"===e.type&&\"snapshot\"===e.mode}let q=class extends t{constructor(){super(...arguments),this._storage=new C,this._markedIdsBufId=this._storage.createBitset(),this._lastCleanup=performance.now(),this._cleanupNeeded=!1,this._invalidated=!1,this._tileToResolver=new Map,this._didEdit=!1,this._updateVersion=1,this.tileStore=null,this.config=null,this.processor=null,this.remoteClient=null,this.service=null}initialize(){this._initStores(),this._initSource(),this._updateQueue=new F({concurrency:\"stream\"===this._source.type?1:4,process:(e,t)=>this._onTileMessage(e,{signal:t})}),this.addHandles([this.tileStore.on(\"update\",this.onTileUpdate.bind(this)),d((()=>!this.updating),(()=>this.onIdle()))]),this._checkUpdating=setInterval((()=>this.notifyChange(\"updating\")),300)}_initSource(){const e=this.tileStore.tileScheme,t=()=>this._updateQueue&&this._updateQueue.length<50,r=(e,t)=>(this._invalidated=!0,this._patchTile(e,t));this._source=v(this.service,this.spatialReference,e,r,t,this.featureStore),this._proxyEvents()}_proxyEvents(){if(\"stream\"===this._source.type){const e=this._source.events,t=this._source;this.addHandles([c((()=>t.connectionStatus),(e=>this.remoteClient.invoke(\"setProperty\",{propertyName:\"connectionStatus\",value:e}).catch(A)),{initial:!0}),c((()=>t.errorString),(e=>this.remoteClient.invoke(\"setProperty\",{propertyName:\"errorString\",value:e}).catch(A)),{initial:!0}),e.on(\"data-received\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"data-received\",event:{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry}}).catch(A))),e.on(\"message-received\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"message-received\",event:e}).catch(A))),e.on(\"updateRate\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"update-rate\",event:{...e}}).catch(A)))])}}_initAttributeStore(e){this.attributeStore||(this.attributeStore=new b({type:\"remote\",initialize:(e,t)=>o(this.remoteClient.invoke(k,e,{signal:t}).catch(A)),update:(e,t)=>o(this.remoteClient.invoke(j,e,{signal:t}).catch(A)),render:e=>o(this.remoteClient.invoke(x,void 0,{signal:e}).catch(A))},e,(()=>this.notifyChange(\"updating\"))))}_initStores(){const e=\"snapshot\"===this.service.type?\"snapshot\":\"on-demand\",t={geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.featureStore=new _(t,this._storage,e)}_initQueryEngine(e){const t=this;this.featureQueryEngine?.destroy(),this.featureQueryEngine=new m({definitionExpression:e.schema.source.definitionExpression??void 0,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,aggregateAdapter:{getFeatureObjectIds(e){if(r(t.aggregateStore))return[];return t.aggregateStore.getFeatureDisplayIdsForAggregate(e).map((e=>t.getObjectId(e)))}},timeInfo:this.service.timeInfo})}_initAggregateQueryEngine(e,t){if(this.aggregateQueryEngine?.destroy(),r(e))return;const s=t.targets.aggregate.params.fields.slice();this.aggregateQueryEngine=new m({definitionExpression:void 0,fields:s,geometryType:e.geometryInfo.geometryType,objectIdField:e.objectIdField,hasM:e.geometryInfo.hasM,hasZ:e.geometryInfo.hasZ,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!1,featureStore:e,aggregateAdapter:{getFeatureObjectIds:e=>[]}})}destroy(){this._updateQueue.destroy(),this._source.destroy(),this.featureQueryEngine?.destroy(),this.aggregateQueryEngine?.destroy(),this.attributeStore?.destroy();for(const e of this.tileStore.tiles)this._source.unsubscribe(e);clearInterval(this._checkUpdating)}get fieldsIndex(){return new S(this.service.fields)}get spatialReference(){return this.tileStore.tileScheme.spatialReference}get updating(){return this.isUpdating()}isUpdating(){const e=this._source.updating,t=!!this._updateQueue.length,r=!this.attributeStore||this.attributeStore.isUpdating(),s=e||t||r;return has(\"esri-2d-log-updating\")&&console.log(`Updating FeatureController2D: ${s}\\n  -> updatingSource ${e}\\n  -> updateQueue ${t}\\n  -> updatingAttributeStore ${r}\\n`),s}updateCustomParameters(e){\"stream\"===this._source.type&&this._source.updateCustomParameters(e)}enableEvent(e){this._source.enableEvent(e.name,e.value)}pause(){this._updateQueue.pause(),this._updateQueue.clear()}resume(){this._updateQueue.resume()}pauseStream(){\"stream\"===this._source.type&&this._source.pauseStream()}resumeStream(){\"stream\"===this._source.type&&this._source.resumeStream()}sendMessageToSocket(e){\"stream\"===this._source.type&&this._source.sendMessageToSocket(e)}sendMessageToClient(e){\"stream\"===this._source.type&&this._source.sendMessageToClient(e)}_initAggregateStore(e){const t=e.schema.targets?.aggregate?.type,r=s(this.config,(e=>e.schema.targets?.aggregate?.type));if(r!==t&&(i(this.aggregateStore)&&(this.removeHandles(\"valueRangesChanged\"),this.aggregateStore.destroy(),this.aggregateStore=null),t)){switch(t){case\"cluster\":{const e={geometryInfo:{geometryType:\"esriGeometryPoint\",hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.aggregateStore=new Q(e,this.spatialReference,this._storage,this.service),this.addHandles(this.aggregateStore.events.on(\"valueRangesChanged\",(e=>{this.remoteClient.invoke(\"emitEvent\",{name:\"valueRangesChanged\",event:{valueRanges:e.valueRanges}}).catch(A)})),\"valueRangesChanged\");break}case\"bin\":{const e={geometryInfo:{geometryType:\"esriGeometryPolygon\",hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.aggregateStore=new I(e,this.spatialReference,this._storage,this.service);break}}this.aggregateStore.onTileUpdate({added:this.tileStore.tiles,removed:[]})}}async update(e,t){this._updateVersion++,this._initQueryEngine(t),this._initAttributeStore(t),this.pause(),await Promise.all([this._source.update(e,t.schema.source),this.featureStore.updateSchema(e,t.schema.targets.feature),this.attributeStore.update(e,t),this.attributeStore.updateFilters(e,t,this)]),this._initAggregateStore(t),i(this.aggregateStore)&&await this.aggregateStore.updateSchema(e,t.schema.targets.aggregate),this._initAggregateQueryEngine(this.aggregateStore,t.schema),has(\"esri-2d-update-debug\")&&e.describe(),this._set(\"config\",t)}async applyUpdate(e){e.version=this._updateVersion,has(\"esri-2d-update-debug\")&&console.debug(`Applying update ${e.version}`),e.mesh&&this.clearTiles(),this._updateQueue.resume(),await this._source.applyUpdate(e),this.notifyChange(\"updating\"),await l((()=>!this.updating)),i(this.aggregateStore)&&(await n(10),await l((()=>!this.updating)))}async onEdits({edits:e}){has(\"esri-2d-update-debug\")&&console.debug(\"Applying Edit:\",e),this._didEdit=!0;try{const t=e.removed.map((e=>e.objectId&&-1!==e.objectId?e.objectId:this._lookupObjectIdByGlobalId(e.globalId))),r=e.addOrModified.map((({objectId:e})=>e));this.featureStore.invalidate(),await this._source.edit(r,t),this.clearTiles(),this.notifyChange(\"updating\"),i(this.aggregateStore)&&this.aggregateStore.clear(),await this._source.resend(),await l((()=>!this.updating))}catch(t){}}async refresh(e){if(!e.dataChanged){const e=w.empty();return e.storage.filters=!0,this.applyUpdate(e)}this.featureStore.invalidate(),this.clearTiles(),this._source.refresh(this._updateVersion,e),this._cleanupNeeded=!0,this.notifyChange(\"updating\"),await l((()=>!this.updating))}clearTiles(){for(const e of this.tileStore.tiles)this.processor.onTileClear(e)}onTileUpdate(e){i(this.aggregateStore)&&this.aggregateStore.onTileUpdate(e);for(const t of e.added)this._source.subscribe(t,this._updateVersion),this._level=t.level;for(const t of e.removed)this._source.unsubscribe(t),this._cleanupNeeded=!0,this._tileToResolver.has(t.id)&&(this._tileToResolver.get(t.id).resolve(),this._tileToResolver.delete(t.id));this.notifyChange(\"updating\")}async onIdle(){this._invalidated&&(this._invalidated=!1,(i(this.aggregateStore)||\"heatmap\"===this.processor.type)&&await this._repushCurrentLevelTiles()),this._markAndSweep()}async querySummaryStatistics({query:e,params:t}){return this.featureQueryEngine.executeQueryForSummaryStatistics(e,t)}async queryAggregateSummaryStatistics({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForSummaryStatistics(e,t)}async queryUniqueValues({query:e,params:t}){return this.featureQueryEngine.executeQueryForUniqueValues(e,t)}async queryAggregateUniqueValues({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForUniqueValues(e,t)}async queryClassBreaks({query:e,params:t}){return this.featureQueryEngine.executeQueryForClassBreaks(e,t)}async queryAggregateClassBreaks({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForClassBreaks(e,t)}async queryHistogram({query:e,params:t}){return this.featureQueryEngine.executeQueryForHistogram(e,t)}async queryAggregateHistogram({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForHistogram(e,t)}queryExtent(e){return this.featureQueryEngine.executeQueryForExtent(e)}queryAggregates(e){return this.aggregateQueryEngine.executeQuery(e)}queryAggregateCount(e){return this.aggregateQueryEngine.executeQueryForCount(e)}queryAggregateIds(e){return this.aggregateQueryEngine.executeQueryForIds(e)}queryFeatures(e){return this.featureQueryEngine.executeQuery(e)}async queryVisibleFeatures(e){const t=await this.featureQueryEngine.executeQuery(e),r=t.objectIdFieldName;return t.features=t.features.filter((e=>{const t=e.attributes[r],i=this.getDisplayId(t);return s(i,(e=>this.attributeStore.isVisible(e)))})),t}queryFeatureCount(e){return this.featureQueryEngine.executeQueryForCount(e)}queryLatestObservations(e){return this.featureQueryEngine.executeQueryForLatestObservations(e)}queryObjectIds(e){return this.featureQueryEngine.executeQueryForIds(e)}async queryStatistics(){return this.featureStore.storeStatistics}getObjectId(e){return this.featureStore.lookupObjectId(e,this._storage)}getDisplayId(e){if(i(this.aggregateStore)){const t=this.aggregateStore.getDisplayId(e);if(r(t)){const t=this.featureStore.lookupDisplayId(e);return this.aggregateStore.getDisplayIdForReferenceId(t)}return t}return this.featureStore.lookupDisplayId(e)}getFeatures(e){const t=[],r=[];for(const s of e){const e=i(this.aggregateStore)?this.getAggregate(s):null;if(i(e))if(i(e.attributes.referenceId)){const r=this.getFeature(e.attributes.referenceId);i(r)&&t.push(r)}else r.push(e);else{const e=this.getFeature(s);i(e)&&t.push(e)}}return{features:t,aggregates:r}}getFeature(e){const t=this.featureStore.lookupFeatureByDisplayId(e,this._storage);if(r(t))return null;const s=t.readHydratedGeometry(),i=f(s,t.geometryType,t.hasZ,t.hasM);return{attributes:t.readAttributes(),geometry:i}}getAggregate(e){return r(this.aggregateStore)?null:this.aggregateStore.getAggregate(e)}getAggregates(){return r(this.aggregateStore)?[]:this.aggregateStore.getAggregates()}async setHighlight(e){const t=a(e.map((e=>this.getDisplayId(e))));return this.attributeStore.setHighlight(e,t)}_lookupObjectIdByGlobalId(e){const t=this.service.globalIdField;if(r(t))throw new Error(\"Expected globalIdField to be defined\");let s=null;if(this.featureStore.forEach((r=>{e===r.readAttribute(t)&&(s=r.getObjectId())})),r(s))throw new Error(`Expected to find a feature with globalId ${e}`);return s}async _repushCurrentLevelTiles(){const e=this.tileStore.tiles.filter((e=>e.level===this._level));e.map((async e=>this._patchTile({type:\"append\",id:e.key.id,clear:!0,addOrUpdate:null,end:!1})));const t=e.map((async e=>this._patchTile({type:\"append\",id:e.key.id,addOrUpdate:E.fromOptimizedFeatures([],this.service),remove:[],end:!0,isRepush:!0,status:w.empty()})));await Promise.all(t)}_maybeForceCleanup(){performance.now()-this._lastCleanup>T&&this._markAndSweep()}_patchTile(e,t){const r=this._updateQueue.push(e,t).then((()=>{this.notifyChange(\"updating\")})).catch((e=>{this.notifyChange(\"updating\")}));return this.notifyChange(\"updating\"),r}async _onTileMessage(e,t){if(u(t),has(\"esri-2d-update-debug\")){const t=s(e.addOrUpdate,(e=>e.hasFeatures));console.debug(e.id,`FeatureController:onTileMessage: [clear:${e.clear}, end:${e.end}, features: ${t}]`)}const a=this.tileStore.get(e.id);if(!a)return;if(e.clear)return this.processor.onTileClear(a);const o=e.status;this._cleanupNeeded=!0;const n=[];for(const r of e.remove??[]){const e=this.featureStore.lookupDisplayId(r);e&&n.push(e)}e.remove=n;try{if(r(e.addOrUpdate))return void this.processor.onTileMessage(a,{...e,addOrUpdate:null},i(this.aggregateStore),t).catch(g);if(e.addOrUpdate.setArcadeSpatialReference(this.spatialReference),this.featureStore.hasInstance(e.addOrUpdate.instance)&&o.targets.feature||(o.targets.feature=!0,this.featureStore.onTileData(a,e)),!o.storage.data||!o.storage.filters){o.storage.data=!0,o.storage.filters=!0,this.attributeStore.onTileData(a,e);\"stream\"===this._source.type||this._didEdit?(await this.attributeStore.sendUpdates(),u(t)):this.attributeStore.sendUpdates()}if(i(this.aggregateStore)&&!o.targets.aggregate){o.targets.aggregate=!0;const t=U(this._source)&&this._source.loading,r=!U(this._source)||t||e.end;if(this.aggregateStore.onTileData(a,e,this._storage,this.attributeStore,r),!r)return;o.mesh||(this.attributeStore.onTileData(a,e),await this.attributeStore.sendUpdates())}if(!o.mesh){o.mesh=!0;const r=i(this.aggregateStore)&&\"cluster\"===this.aggregateStore.type;await this.processor.onTileMessage(a,e,r,t),u(t)}this._maybeForceCleanup()}catch(h){g(h)}}_mark(e,t,r){const s=(4294901760&this._storage.getInstanceId(e))>>>16;e&&(t.add(s),r.set(e))}_markAndSweep(){this._lastCleanup=performance.now();if(!(!(\"feature\"===this._source.type&&\"snapshot\"===this._source.mode)&&(\"stream\"===this._source.type||this._cleanupNeeded)))return;this._cleanupNeeded=!1;const e=this._storage.getBitset(this._markedIdsBufId),t=new Set;e.clear();for(const r of this.tileStore.tiles)for(const s of this._source.readers(r.id)){const r=s.getCursor();for(;r.next();){let s=r.getDisplayId();if(!s){const e=r.getObjectId();s=this.featureStore.lookupDisplayId(e)}this._mark(s,t,e)}}\"symbol\"===this.processor.type&&this.processor.forEachBufferId((r=>{this._mark(r,t,e)})),this._updateQueue.forEach((r=>{for(const s of r.remove??[]){const r=this.featureStore.lookupDisplayId(s);this._mark(r,t,e)}})),i(this.aggregateStore)&&(this.aggregateStore.sweepFeatures(e,this.featureStore),\"sweepAggregates\"in this.aggregateStore&&this.aggregateStore.sweepAggregates(this._storage,this.attributeStore,this._level)),this.featureStore.sweepFeatures(e,this._storage,this.attributeStore),this.featureStore.sweepFeatureSets(t)}};e([p({constructOnly:!0})],q.prototype,\"tileStore\",void 0),e([p()],q.prototype,\"config\",void 0),e([p({readOnly:!0})],q.prototype,\"fieldsIndex\",null),e([p()],q.prototype,\"processor\",void 0),e([p({constructOnly:!0})],q.prototype,\"remoteClient\",void 0),e([p({constructOnly:!0})],q.prototype,\"service\",void 0),e([p()],q.prototype,\"spatialReference\",null),e([p()],q.prototype,\"updating\",null),q=e([y(\"esri.views.2d.layers.features.controllers.FeatureController2D\")],q);const O=q;export{O as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}