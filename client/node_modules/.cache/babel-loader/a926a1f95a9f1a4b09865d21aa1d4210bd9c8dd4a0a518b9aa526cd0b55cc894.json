{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { isAbortError as r } from \"../../core/promiseUtils.js\";\nimport { isAnimatedPNG as i, parseApng as s } from \"../../views/2d/engine/webgl/animatedFormats/apng.js\";\nimport { isAnimatedGIF as n, parseGif as a } from \"../../views/2d/engine/webgl/animatedFormats/gif.js\";\nclass o {\n  constructor() {\n    this._resourceMap = new Map(), this._inFlightResourceMap = new Map(), this.geometryEngine = null, this.geometryEnginePromise = null;\n  }\n  destroy() {\n    this._inFlightResourceMap.clear(), this._resourceMap.clear();\n  }\n  getResource(e) {\n    return this._resourceMap.get(e) ?? null;\n  }\n  async fetchResource(e, t) {\n    const r = this._resourceMap.get(e);\n    if (r) return {\n      width: r.width,\n      height: r.height\n    };\n    let i = this._inFlightResourceMap.get(e);\n    return i ? i.then(e => ({\n      width: e.width,\n      height: e.height\n    })) : (i = c(e, t), this._inFlightResourceMap.set(e, i), i.then(t => (this._inFlightResourceMap.delete(e), this._resourceMap.set(e, t), {\n      width: t.width,\n      height: t.height\n    }), () => ({\n      width: 0,\n      height: 0\n    })));\n  }\n  deleteResource(e) {\n    this._inFlightResourceMap.delete(e), this._resourceMap.delete(e);\n  }\n}\nasync function h(i, s) {\n  const n = window.URL.createObjectURL(i);\n  try {\n    const {\n      data: t\n    } = await e(n, {\n      ...s,\n      responseType: \"image\"\n    });\n    return t;\n  } catch (a) {\n    if (!r(a)) throw new t(\"mapview-invalid-resource\", `Could not fetch requested resource at ${n}`);\n    throw a;\n  } finally {\n    window.URL.revokeObjectURL(n);\n  }\n}\nasync function c(e, t) {\n  const {\n      arrayBuffer: r,\n      mediaType: o\n    } = await u(e, t),\n    c = \"image/png\" === o;\n  if (\"image/gif\" === o && n(r)) return a(r);\n  if (c && i(r)) return s(r, t);\n  return h(new Blob([r], {\n    type: o\n  }), t);\n}\nasync function u(i, s) {\n  let n;\n  const a = \";base64,\";\n  if (i.includes(a)) {\n    const e = i.indexOf(a),\n      t = i.indexOf(a) + a.length,\n      r = i.substring(t),\n      s = atob(r),\n      o = new Uint8Array(s.length);\n    for (let i = 0; i < s.length; i++) o[i] = s.charCodeAt(i);\n    n = {\n      arrayBuffer: o.buffer,\n      mediaType: i.substring(0, e).replace(\"data:\", \"\")\n    };\n  } else try {\n    const t = await e(i, {\n        responseType: \"array-buffer\",\n        ...s\n      }),\n      r = t.data;\n    n = {\n      arrayBuffer: r,\n      mediaType: t.getHeader(\"Content-Type\")\n    };\n  } catch (o) {\n    if (!r(o)) throw new t(\"mapview-invalid-resource\", `Could not fetch requested resource at ${i}`);\n  }\n  return n;\n}\nexport { o as default };","map":{"version":3,"names":["e","t","isAbortError","r","isAnimatedPNG","i","parseApng","s","isAnimatedGIF","n","parseGif","a","o","constructor","_resourceMap","Map","_inFlightResourceMap","geometryEngine","geometryEnginePromise","destroy","clear","getResource","get","fetchResource","width","height","then","c","set","delete","deleteResource","h","window","URL","createObjectURL","data","responseType","revokeObjectURL","arrayBuffer","mediaType","u","Blob","type","includes","indexOf","length","substring","atob","Uint8Array","charCodeAt","buffer","replace","getHeader","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/symbols/cim/CIMResourceManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{isAbortError as r}from\"../../core/promiseUtils.js\";import{isAnimatedPNG as i,parseApng as s}from\"../../views/2d/engine/webgl/animatedFormats/apng.js\";import{isAnimatedGIF as n,parseGif as a}from\"../../views/2d/engine/webgl/animatedFormats/gif.js\";class o{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,t){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let i=this._inFlightResourceMap.get(e);return i?i.then((e=>({width:e.width,height:e.height}))):(i=c(e,t),this._inFlightResourceMap.set(e,i),i.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}}async function h(i,s){const n=window.URL.createObjectURL(i);try{const{data:t}=await e(n,{...s,responseType:\"image\"});return t}catch(a){if(!r(a))throw new t(\"mapview-invalid-resource\",`Could not fetch requested resource at ${n}`);throw a}finally{window.URL.revokeObjectURL(n)}}async function c(e,t){const{arrayBuffer:r,mediaType:o}=await u(e,t),c=\"image/png\"===o;if(\"image/gif\"===o&&n(r))return a(r);if(c&&i(r))return s(r,t);return h(new Blob([r],{type:o}),t)}async function u(i,s){let n;const a=\";base64,\";if(i.includes(a)){const e=i.indexOf(a),t=i.indexOf(a)+a.length,r=i.substring(t),s=atob(r),o=new Uint8Array(s.length);for(let i=0;i<s.length;i++)o[i]=s.charCodeAt(i);n={arrayBuffer:o.buffer,mediaType:i.substring(0,e).replace(\"data:\",\"\")}}else try{const t=await e(i,{responseType:\"array-buffer\",...s}),r=t.data;n={arrayBuffer:r,mediaType:t.getHeader(\"Content-Type\")}}catch(o){if(!r(o))throw new t(\"mapview-invalid-resource\",`Could not fetch requested resource at ${i}`)}return n}export{o as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}