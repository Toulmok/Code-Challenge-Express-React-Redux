{"ast":null,"code":"/* Tabulator v5.4.4 (c) Oliver Folkerd 2023 */\nclass CoreFeature {\n  constructor(table) {\n    this.table = table;\n  }\n\n  //////////////////////////////////////////\n  /////////////// DataLoad /////////////////\n  //////////////////////////////////////////\n\n  reloadData(data, silent, columnsChanged) {\n    return this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n  }\n\n  //////////////////////////////////////////\n  ///////////// Localization ///////////////\n  //////////////////////////////////////////\n\n  langText() {\n    return this.table.modules.localize.getText(...arguments);\n  }\n  langBind() {\n    return this.table.modules.localize.bind(...arguments);\n  }\n  langLocale() {\n    return this.table.modules.localize.getLocale(...arguments);\n  }\n\n  //////////////////////////////////////////\n  ////////// Inter Table Comms /////////////\n  //////////////////////////////////////////\n\n  commsConnections() {\n    return this.table.modules.comms.getConnections(...arguments);\n  }\n  commsSend() {\n    return this.table.modules.comms.send(...arguments);\n  }\n\n  //////////////////////////////////////////\n  //////////////// Layout  /////////////////\n  //////////////////////////////////////////\n\n  layoutMode() {\n    return this.table.modules.layout.getMode();\n  }\n  layoutRefresh(force) {\n    return this.table.modules.layout.layout(force);\n  }\n\n  //////////////////////////////////////////\n  /////////////// Event Bus ////////////////\n  //////////////////////////////////////////\n\n  subscribe() {\n    return this.table.eventBus.subscribe(...arguments);\n  }\n  unsubscribe() {\n    return this.table.eventBus.unsubscribe(...arguments);\n  }\n  subscribed(key) {\n    return this.table.eventBus.subscribed(key);\n  }\n  subscriptionChange() {\n    return this.table.eventBus.subscriptionChange(...arguments);\n  }\n  dispatch() {\n    return this.table.eventBus.dispatch(...arguments);\n  }\n  chain() {\n    return this.table.eventBus.chain(...arguments);\n  }\n  confirm() {\n    return this.table.eventBus.confirm(...arguments);\n  }\n  dispatchExternal() {\n    return this.table.externalEvents.dispatch(...arguments);\n  }\n  subscribedExternal(key) {\n    return this.table.externalEvents.subscribed(key);\n  }\n  subscriptionChangeExternal() {\n    return this.table.externalEvents.subscriptionChange(...arguments);\n  }\n\n  //////////////////////////////////////////\n  //////////////// Options /////////////////\n  //////////////////////////////////////////\n\n  options(key) {\n    return this.table.options[key];\n  }\n  setOption(key, value) {\n    if (typeof value !== \"undefined\") {\n      this.table.options[key] = value;\n    }\n    return this.table.options[key];\n  }\n\n  //////////////////////////////////////////\n  /////////// Deprecation Checks ///////////\n  //////////////////////////////////////////\n\n  deprecationCheck(oldOption, newOption) {\n    return this.table.deprecationAdvisor.check(oldOption, newOption);\n  }\n  deprecationCheckMsg(oldOption, msg) {\n    return this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n  }\n  deprecationMsg(msg) {\n    return this.table.deprecationAdvisor.msg(msg);\n  }\n  //////////////////////////////////////////\n  //////////////// Modules /////////////////\n  //////////////////////////////////////////\n\n  module(key) {\n    return this.table.module(key);\n  }\n}\nclass Helpers {\n  static elVisible(el) {\n    return !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n  }\n  static elOffset(el) {\n    var box = el.getBoundingClientRect();\n    return {\n      top: box.top + window.pageYOffset - document.documentElement.clientTop,\n      left: box.left + window.pageXOffset - document.documentElement.clientLeft\n    };\n  }\n  static deepClone(obj, clone) {\n    let list = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var objectProto = {}.__proto__,\n      arrayProto = [].__proto__;\n    if (!clone) {\n      clone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n    }\n    for (var i in obj) {\n      let subject = obj[i],\n        match,\n        copy;\n      if (subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)) {\n        match = list.findIndex(item => {\n          return item.subject === subject;\n        });\n        if (match > -1) {\n          clone[i] = list[match].copy;\n        } else {\n          copy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n          list.unshift({\n            subject,\n            copy\n          });\n          clone[i] = this.deepClone(subject, copy, list);\n        }\n      }\n    }\n    return clone;\n  }\n}\nclass Popup extends CoreFeature {\n  constructor(table, element, parent) {\n    super(table);\n    this.element = element;\n    this.container = this._lookupContainer();\n    this.parent = parent;\n    this.reversedX = false;\n    this.childPopup = null;\n    this.blurable = false;\n    this.blurCallback = null;\n    this.blurEventsBound = false;\n    this.renderedCallback = null;\n    this.visible = false;\n    this.hideable = true;\n    this.element.classList.add(\"tabulator-popup-container\");\n    this.blurEvent = this.hide.bind(this, false);\n    this.escEvent = this._escapeCheck.bind(this);\n    this.destroyBinding = this.tableDestroyed.bind(this);\n    this.destroyed = false;\n  }\n  tableDestroyed() {\n    this.destroyed = true;\n    this.hide(true);\n  }\n  _lookupContainer() {\n    var container = this.table.options.popupContainer;\n    if (typeof container === \"string\") {\n      container = document.querySelector(container);\n      if (!container) {\n        console.warn(\"Menu Error - no container element found matching selector:\", this.table.options.popupContainer, \"(defaulting to document body)\");\n      }\n    } else if (container === true) {\n      container = this.table.element;\n    }\n    if (container && !this._checkContainerIsParent(container)) {\n      container = false;\n      console.warn(\"Menu Error - container element does not contain this table:\", this.table.options.popupContainer, \"(defaulting to document body)\");\n    }\n    if (!container) {\n      container = document.body;\n    }\n    return container;\n  }\n  _checkContainerIsParent(container) {\n    let element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.table.element;\n    if (container === element) {\n      return true;\n    } else {\n      return element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n    }\n  }\n  renderCallback(callback) {\n    this.renderedCallback = callback;\n  }\n  containerEventCoords(e) {\n    var touch = !(e instanceof MouseEvent);\n    var x = touch ? e.touches[0].pageX : e.pageX;\n    var y = touch ? e.touches[0].pageY : e.pageY;\n    if (this.container !== document.body) {\n      let parentOffset = Helpers.elOffset(this.container);\n      x -= parentOffset.left;\n      y -= parentOffset.top;\n    }\n    return {\n      x,\n      y\n    };\n  }\n  elementPositionCoords(element) {\n    let position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"right\";\n    var offset = Helpers.elOffset(element),\n      containerOffset,\n      x,\n      y;\n    if (this.container !== document.body) {\n      containerOffset = Helpers.elOffset(this.container);\n      offset.left -= containerOffset.left;\n      offset.top -= containerOffset.top;\n    }\n    switch (position) {\n      case \"right\":\n        x = offset.left + element.offsetWidth;\n        y = offset.top - 1;\n        break;\n      case \"bottom\":\n        x = offset.left;\n        y = offset.top + element.offsetHeight;\n        break;\n      case \"left\":\n        x = offset.left;\n        y = offset.top - 1;\n        break;\n      case \"top\":\n        x = offset.left;\n        y = offset.top;\n        break;\n      case \"center\":\n        x = offset.left + element.offsetWidth / 2;\n        y = offset.top + element.offsetHeight / 2;\n        break;\n    }\n    return {\n      x,\n      y,\n      offset\n    };\n  }\n  show(origin, position) {\n    var x, y, parentEl, parentOffset, coords;\n    if (this.destroyed || this.table.destroyed) {\n      return this;\n    }\n    if (origin instanceof HTMLElement) {\n      parentEl = origin;\n      coords = this.elementPositionCoords(origin, position);\n      parentOffset = coords.offset;\n      x = coords.x;\n      y = coords.y;\n    } else if (typeof origin === \"number\") {\n      parentOffset = {\n        top: 0,\n        left: 0\n      };\n      x = origin;\n      y = position;\n    } else {\n      coords = this.containerEventCoords(origin);\n      x = coords.x;\n      y = coords.y;\n      this.reversedX = false;\n    }\n    this.element.style.top = y + \"px\";\n    this.element.style.left = x + \"px\";\n    this.container.appendChild(this.element);\n    if (typeof this.renderedCallback === \"function\") {\n      this.renderedCallback();\n    }\n    this._fitToScreen(x, y, parentEl, parentOffset, position);\n    this.visible = true;\n    this.subscribe(\"table-destroy\", this.destroyBinding);\n    this.element.addEventListener(\"mousedown\", e => {\n      e.stopPropagation();\n    });\n    return this;\n  }\n  _fitToScreen(x, y, parentEl, parentOffset, position) {\n    var scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\n    //move menu to start on right edge if it is too close to the edge of the screen\n    if (x + this.element.offsetWidth >= this.container.offsetWidth || this.reversedX) {\n      this.element.style.left = \"\";\n      if (parentEl) {\n        this.element.style.right = this.container.offsetWidth - parentOffset.left + \"px\";\n      } else {\n        this.element.style.right = this.container.offsetWidth - x + \"px\";\n      }\n      this.reversedX = true;\n    }\n\n    //move menu to start on bottom edge if it is too close to the edge of the screen\n    if (y + this.element.offsetHeight > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\n      if (parentEl) {\n        switch (position) {\n          case \"bottom\":\n            this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1 + \"px\";\n            break;\n          default:\n            this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1 + \"px\";\n        }\n      } else {\n        this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight + \"px\";\n      }\n    }\n  }\n  isVisible() {\n    return this.visible;\n  }\n  hideOnBlur(callback) {\n    this.blurable = true;\n    if (this.visible) {\n      setTimeout(() => {\n        if (this.visible) {\n          this.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n          this.subscribe(\"cell-editing\", this.blurEvent);\n          document.body.addEventListener(\"click\", this.blurEvent);\n          document.body.addEventListener(\"contextmenu\", this.blurEvent);\n          document.body.addEventListener(\"mousedown\", this.blurEvent);\n          window.addEventListener(\"resize\", this.blurEvent);\n          document.body.addEventListener(\"keydown\", this.escEvent);\n          this.blurEventsBound = true;\n        }\n      }, 100);\n      this.blurCallback = callback;\n    }\n    return this;\n  }\n  _escapeCheck(e) {\n    if (e.keyCode == 27) {\n      this.hide();\n    }\n  }\n  blockHide() {\n    this.hideable = false;\n  }\n  restoreHide() {\n    this.hideable = true;\n  }\n  hide() {\n    let silent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (this.visible && this.hideable) {\n      if (this.blurable && this.blurEventsBound) {\n        document.body.removeEventListener(\"keydown\", this.escEvent);\n        document.body.removeEventListener(\"click\", this.blurEvent);\n        document.body.removeEventListener(\"contextmenu\", this.blurEvent);\n        document.body.removeEventListener(\"mousedown\", this.blurEvent);\n        window.removeEventListener(\"resize\", this.blurEvent);\n        this.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n        this.unsubscribe(\"cell-editing\", this.blurEvent);\n        this.blurEventsBound = false;\n      }\n      if (this.childPopup) {\n        this.childPopup.hide();\n      }\n      if (this.parent) {\n        this.parent.childPopup = null;\n      }\n      if (this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      this.visible = false;\n      if (this.blurCallback && !silent) {\n        this.blurCallback();\n      }\n      this.unsubscribe(\"table-destroy\", this.destroyBinding);\n    }\n    return this;\n  }\n  child(element) {\n    if (this.childPopup) {\n      this.childPopup.hide();\n    }\n    this.childPopup = new Popup(this.table, element, this);\n    return this.childPopup;\n  }\n}\nclass Module extends CoreFeature {\n  constructor(table, name) {\n    super(table);\n    this._handler = null;\n  }\n  initialize() {\n    // setup module when table is initialized, to be overridden in module\n  }\n\n  ///////////////////////////////////\n  ////// Options Registration ///////\n  ///////////////////////////////////\n\n  registerTableOption(key, value) {\n    this.table.optionsList.register(key, value);\n  }\n  registerColumnOption(key, value) {\n    this.table.columnManager.optionsList.register(key, value);\n  }\n\n  ///////////////////////////////////\n  /// Public Function Registration ///\n  ///////////////////////////////////\n\n  registerTableFunction(name, func) {\n    var _this = this;\n    if (typeof this.table[name] === \"undefined\") {\n      this.table[name] = function () {\n        _this.table.initGuard(name);\n        return func(...arguments);\n      };\n    } else {\n      console.warn(\"Unable to bind table function, name already in use\", name);\n    }\n  }\n  registerComponentFunction(component, func, handler) {\n    return this.table.componentFunctionBinder.bind(component, func, handler);\n  }\n\n  ///////////////////////////////////\n  ////////// Data Pipeline //////////\n  ///////////////////////////////////\n\n  registerDataHandler(handler, priority) {\n    this.table.rowManager.registerDataPipelineHandler(handler, priority);\n    this._handler = handler;\n  }\n  registerDisplayHandler(handler, priority) {\n    this.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n    this._handler = handler;\n  }\n  displayRows(adjust) {\n    var index = this.table.rowManager.displayRows.length - 1,\n      lookupIndex;\n    if (this._handler) {\n      lookupIndex = this.table.rowManager.displayPipeline.findIndex(item => {\n        return item.handler === this._handler;\n      });\n      if (lookupIndex > -1) {\n        index = lookupIndex;\n      }\n    }\n    if (adjust) {\n      index = index + adjust;\n    }\n    if (this._handler) {\n      if (index > -1) {\n        return this.table.rowManager.getDisplayRows(index);\n      } else {\n        return this.activeRows();\n      }\n    }\n  }\n  activeRows() {\n    return this.table.rowManager.activeRows;\n  }\n  refreshData(renderInPosition, handler) {\n    if (!handler) {\n      handler = this._handler;\n    }\n    if (handler) {\n      this.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n    }\n  }\n\n  ///////////////////////////////////\n  //////// Footer Management ////////\n  ///////////////////////////////////\n\n  footerAppend(element) {\n    return this.table.footerManager.append(element);\n  }\n  footerPrepend(element) {\n    return this.table.footerManager.prepend(element);\n  }\n  footerRemove(element) {\n    return this.table.footerManager.remove(element);\n  }\n\n  ///////////////////////////////////\n  //////// Popups Management ////////\n  ///////////////////////////////////\n\n  popup(menuEl, menuContainer) {\n    return new Popup(this.table, menuEl, menuContainer);\n  }\n\n  ///////////////////////////////////\n  //////// Alert Management ////////\n  ///////////////////////////////////\n\n  alert(content, type) {\n    return this.table.alertManager.alert(content, type);\n  }\n  clearAlert() {\n    return this.table.alertManager.clear();\n  }\n}\nvar defaultAccessors = {};\nclass Accessor extends Module {\n  constructor(table) {\n    super(table);\n    this.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n    this.registerColumnOption(\"accessor\");\n    this.registerColumnOption(\"accessorParams\");\n    this.registerColumnOption(\"accessorData\");\n    this.registerColumnOption(\"accessorDataParams\");\n    this.registerColumnOption(\"accessorDownload\");\n    this.registerColumnOption(\"accessorDownloadParams\");\n    this.registerColumnOption(\"accessorClipboard\");\n    this.registerColumnOption(\"accessorClipboardParams\");\n    this.registerColumnOption(\"accessorPrint\");\n    this.registerColumnOption(\"accessorPrintParams\");\n    this.registerColumnOption(\"accessorHtmlOutput\");\n    this.registerColumnOption(\"accessorHtmlOutputParams\");\n  }\n  initialize() {\n    this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n    this.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n  }\n\n  //initialize column accessor\n  initializeColumn(column) {\n    var match = false,\n      config = {};\n    this.allowedTypes.forEach(type => {\n      var key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n        accessor;\n      if (column.definition[key]) {\n        accessor = this.lookupAccessor(column.definition[key]);\n        if (accessor) {\n          match = true;\n          config[key] = {\n            accessor: accessor,\n            params: column.definition[key + \"Params\"] || {}\n          };\n        }\n      }\n    });\n    if (match) {\n      column.modules.accessor = config;\n    }\n  }\n  lookupAccessor(value) {\n    var accessor = false;\n\n    //set column accessor\n    switch (typeof value) {\n      case \"string\":\n        if (Accessor.accessors[value]) {\n          accessor = Accessor.accessors[value];\n        } else {\n          console.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n        }\n        break;\n      case \"function\":\n        accessor = value;\n        break;\n    }\n    return accessor;\n  }\n\n  //apply accessor to row\n  transformRow(row, type) {\n    var key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n      rowComponent = row.getComponent();\n\n    //clone data object with deep copy to isolate internal data from returned result\n    var data = Helpers.deepClone(row.data || {});\n    this.table.columnManager.traverse(function (column) {\n      var value, accessor, params, colComponent;\n      if (column.modules.accessor) {\n        accessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n        if (accessor) {\n          value = column.getFieldValue(data);\n          if (value != \"undefined\") {\n            colComponent = column.getComponent();\n            params = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n            column.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n          }\n        }\n      }\n    });\n    return data;\n  }\n}\n\n//load defaults\nAccessor.moduleName = \"accessor\";\nAccessor.accessors = defaultAccessors;\nvar defaultConfig = {\n  method: \"GET\"\n};\nfunction generateParamsList(data, prefix) {\n  var output = [];\n  prefix = prefix || \"\";\n  if (Array.isArray(data)) {\n    data.forEach((item, i) => {\n      output = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n    });\n  } else if (typeof data === \"object\") {\n    for (var key in data) {\n      output = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n    }\n  } else {\n    output.push({\n      key: prefix,\n      value: data\n    });\n  }\n  return output;\n}\nfunction serializeParams(params) {\n  var output = generateParamsList(params),\n    encoded = [];\n  output.forEach(function (item) {\n    encoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n  });\n  return encoded.join(\"&\");\n}\nfunction urlBuilder(url, config, params) {\n  if (url) {\n    if (params && Object.keys(params).length) {\n      if (!config.method || config.method.toLowerCase() == \"get\") {\n        config.method = \"get\";\n        url += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n      }\n    }\n  }\n  return url;\n}\nfunction defaultLoaderPromise(url, config, params) {\n  var contentType;\n  return new Promise((resolve, reject) => {\n    //set url\n    url = this.urlGenerator.call(this.table, url, config, params);\n\n    //set body content if not GET request\n    if (config.method.toUpperCase() != \"GET\") {\n      contentType = typeof this.table.options.ajaxContentType === \"object\" ? this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n      if (contentType) {\n        for (var key in contentType.headers) {\n          if (!config.headers) {\n            config.headers = {};\n          }\n          if (typeof config.headers[key] === \"undefined\") {\n            config.headers[key] = contentType.headers[key];\n          }\n        }\n        config.body = contentType.body.call(this, url, config, params);\n      } else {\n        console.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n      }\n    }\n    if (url) {\n      //configure headers\n      if (typeof config.headers === \"undefined\") {\n        config.headers = {};\n      }\n      if (typeof config.headers.Accept === \"undefined\") {\n        config.headers.Accept = \"application/json\";\n      }\n      if (typeof config.headers[\"X-Requested-With\"] === \"undefined\") {\n        config.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n      }\n      if (typeof config.mode === \"undefined\") {\n        config.mode = \"cors\";\n      }\n      if (config.mode == \"cors\") {\n        if (typeof config.headers[\"Origin\"] === \"undefined\") {\n          config.headers[\"Origin\"] = window.location.origin;\n        }\n        if (typeof config.credentials === \"undefined\") {\n          config.credentials = 'same-origin';\n        }\n      } else {\n        if (typeof config.credentials === \"undefined\") {\n          config.credentials = 'include';\n        }\n      }\n\n      //send request\n      fetch(url, config).then(response => {\n        if (response.ok) {\n          response.json().then(data => {\n            resolve(data);\n          }).catch(error => {\n            reject(error);\n            console.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n          });\n        } else {\n          console.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n          reject(response);\n        }\n      }).catch(error => {\n        console.error(\"Ajax Load Error - Connection Error: \", error);\n        reject(error);\n      });\n    } else {\n      console.warn(\"Ajax Load Error - No URL Set\");\n      resolve([]);\n    }\n  });\n}\nfunction generateParamsList$1(data, prefix) {\n  var output = [];\n  prefix = prefix || \"\";\n  if (Array.isArray(data)) {\n    data.forEach((item, i) => {\n      output = output.concat(generateParamsList$1(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n    });\n  } else if (typeof data === \"object\") {\n    for (var key in data) {\n      output = output.concat(generateParamsList$1(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n    }\n  } else {\n    output.push({\n      key: prefix,\n      value: data\n    });\n  }\n  return output;\n}\nvar defaultContentTypeFormatters = {\n  \"json\": {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: function (url, config, params) {\n      return JSON.stringify(params);\n    }\n  },\n  \"form\": {\n    headers: {},\n    body: function (url, config, params) {\n      var output = generateParamsList$1(params),\n        form = new FormData();\n      output.forEach(function (item) {\n        form.append(item.key, item.value);\n      });\n      return form;\n    }\n  }\n};\nclass Ajax extends Module {\n  constructor(table) {\n    super(table);\n    this.config = {}; //hold config object for ajax request\n    this.url = \"\"; //request URL\n    this.urlGenerator = false;\n    this.params = false; //request parameters\n\n    this.loaderPromise = false;\n    this.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n    this.registerTableOption(\"ajaxURLGenerator\", false);\n    this.registerTableOption(\"ajaxParams\", {}); //params for ajax loading\n    this.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n    this.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n    this.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\n    this.registerTableOption(\"ajaxRequesting\", function () {});\n    this.registerTableOption(\"ajaxResponse\", false);\n    this.contentTypeFormatters = Ajax.contentTypeFormatters;\n  }\n\n  //initialize setup options\n  initialize() {\n    this.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n    this.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n    if (this.table.options.ajaxURL) {\n      this.setUrl(this.table.options.ajaxURL);\n    }\n    this.setDefaultConfig(this.table.options.ajaxConfig);\n    this.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n    this.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n    this.subscribe(\"data-params\", this.requestParams.bind(this));\n    this.subscribe(\"data-load\", this.requestData.bind(this));\n  }\n  requestParams(data, config, silent, params) {\n    var ajaxParams = this.table.options.ajaxParams;\n    if (ajaxParams) {\n      if (typeof ajaxParams === \"function\") {\n        ajaxParams = ajaxParams.call(this.table);\n      }\n      params = Object.assign(params, ajaxParams);\n    }\n    return params;\n  }\n  requestDataCheck(data, params, config, silent) {\n    return !!(!data && this.url || typeof data === \"string\");\n  }\n  requestData(url, params, config, silent, previousData) {\n    var ajaxConfig;\n    if (!previousData && this.requestDataCheck(url)) {\n      if (url) {\n        this.setUrl(url);\n      }\n      ajaxConfig = this.generateConfig(config);\n      return this.sendRequest(this.url, params, ajaxConfig);\n    } else {\n      return previousData;\n    }\n  }\n  setDefaultConfig() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.config = Object.assign({}, Ajax.defaultConfig);\n    if (typeof config == \"string\") {\n      this.config.method = config;\n    } else {\n      Object.assign(this.config, config);\n    }\n  }\n\n  //load config object\n  generateConfig() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var ajaxConfig = Object.assign({}, this.config);\n    if (typeof config == \"string\") {\n      ajaxConfig.method = config;\n    } else {\n      Object.assign(ajaxConfig, config);\n    }\n    return ajaxConfig;\n  }\n\n  //set request url\n  setUrl(url) {\n    this.url = url;\n  }\n\n  //get request url\n  getUrl() {\n    return this.url;\n  }\n\n  //send ajax request\n  sendRequest(url, params, config) {\n    if (this.table.options.ajaxRequesting.call(this.table, url, params) !== false) {\n      return this.loaderPromise(url, config, params).then(data => {\n        if (this.table.options.ajaxResponse) {\n          data = this.table.options.ajaxResponse.call(this.table, url, params, data);\n        }\n        return data;\n      });\n    } else {\n      return Promise.reject();\n    }\n  }\n}\nAjax.moduleName = \"ajax\";\n\n//load defaults\nAjax.defaultConfig = defaultConfig;\nAjax.defaultURLGenerator = urlBuilder;\nAjax.defaultLoaderPromise = defaultLoaderPromise;\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\nvar defaultPasteActions = {\n  replace: function (rows) {\n    return this.table.setData(rows);\n  },\n  update: function (rows) {\n    return this.table.updateOrAddData(rows);\n  },\n  insert: function (rows) {\n    return this.table.addData(rows);\n  }\n};\nvar defaultPasteParsers = {\n  table: function (clipboard) {\n    var data = [],\n      headerFindSuccess = true,\n      columns = this.table.columnManager.columns,\n      columnMap = [],\n      rows = [];\n\n    //get data from clipboard into array of columns and rows.\n    clipboard = clipboard.split(\"\\n\");\n    clipboard.forEach(function (row) {\n      data.push(row.split(\"\\t\"));\n    });\n    if (data.length && !(data.length === 1 && data[0].length < 2)) {\n      //check if headers are present by title\n      data[0].forEach(function (value) {\n        var column = columns.find(function (column) {\n          return value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n        });\n        if (column) {\n          columnMap.push(column);\n        } else {\n          headerFindSuccess = false;\n        }\n      });\n\n      //check if column headers are present by field\n      if (!headerFindSuccess) {\n        headerFindSuccess = true;\n        columnMap = [];\n        data[0].forEach(function (value) {\n          var column = columns.find(function (column) {\n            return value && column.field && value.trim() && column.field.trim() === value.trim();\n          });\n          if (column) {\n            columnMap.push(column);\n          } else {\n            headerFindSuccess = false;\n          }\n        });\n        if (!headerFindSuccess) {\n          columnMap = this.table.columnManager.columnsByIndex;\n        }\n      }\n\n      //remove header row if found\n      if (headerFindSuccess) {\n        data.shift();\n      }\n      data.forEach(function (item) {\n        var row = {};\n        item.forEach(function (value, i) {\n          if (columnMap[i]) {\n            row[columnMap[i].field] = value;\n          }\n        });\n        rows.push(row);\n      });\n      return rows;\n    } else {\n      return false;\n    }\n  }\n};\nclass Clipboard extends Module {\n  constructor(table) {\n    super(table);\n    this.mode = true;\n    this.pasteParser = function () {};\n    this.pasteAction = function () {};\n    this.customSelection = false;\n    this.rowRange = false;\n    this.blocked = true; //block copy actions not originating from this command\n\n    this.registerTableOption(\"clipboard\", false); //enable clipboard\n    this.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n    this.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n    this.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n    this.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n    this.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n    this.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n    this.registerColumnOption(\"clipboard\");\n    this.registerColumnOption(\"titleClipboard\");\n  }\n  initialize() {\n    this.mode = this.table.options.clipboard;\n    this.rowRange = this.table.options.clipboardCopyRowRange;\n    if (this.mode === true || this.mode === \"copy\") {\n      this.table.element.addEventListener(\"copy\", e => {\n        var plain, html, list;\n        if (!this.blocked) {\n          e.preventDefault();\n          if (this.customSelection) {\n            plain = this.customSelection;\n            if (this.table.options.clipboardCopyFormatter) {\n              plain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n            }\n          } else {\n            list = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n            html = this.table.modules.export.generateHTMLTable(list);\n            plain = html ? this.generatePlainContent(list) : \"\";\n            if (this.table.options.clipboardCopyFormatter) {\n              plain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n              html = this.table.options.clipboardCopyFormatter(\"html\", html);\n            }\n          }\n          if (window.clipboardData && window.clipboardData.setData) {\n            window.clipboardData.setData('Text', plain);\n          } else if (e.clipboardData && e.clipboardData.setData) {\n            e.clipboardData.setData('text/plain', plain);\n            if (html) {\n              e.clipboardData.setData('text/html', html);\n            }\n          } else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n            e.originalEvent.clipboardData.setData('text/plain', plain);\n            if (html) {\n              e.originalEvent.clipboardData.setData('text/html', html);\n            }\n          }\n          this.dispatchExternal(\"clipboardCopied\", plain, html);\n          this.reset();\n        }\n      });\n    }\n    if (this.mode === true || this.mode === \"paste\") {\n      this.table.element.addEventListener(\"paste\", e => {\n        this.paste(e);\n      });\n    }\n    this.setPasteParser(this.table.options.clipboardPasteParser);\n    this.setPasteAction(this.table.options.clipboardPasteAction);\n    this.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n  }\n  reset() {\n    this.blocked = true;\n    this.customSelection = false;\n  }\n  generatePlainContent(list) {\n    var output = [];\n    list.forEach(row => {\n      var rowData = [];\n      row.columns.forEach(col => {\n        var value = \"\";\n        if (col) {\n          if (row.type === \"group\") {\n            col.value = col.component.getKey();\n          }\n          if (col.value === null) {\n            value = \"\";\n          } else {\n            switch (typeof col.value) {\n              case \"object\":\n                value = JSON.stringify(col.value);\n                break;\n              case \"undefined\":\n                value = \"\";\n                break;\n              default:\n                value = col.value;\n            }\n          }\n        }\n        rowData.push(value);\n      });\n      output.push(rowData.join(\"\\t\"));\n    });\n    return output.join(\"\\n\");\n  }\n  copy(range, internal) {\n    var sel, textRange;\n    this.blocked = false;\n    this.customSelection = false;\n    if (this.mode === true || this.mode === \"copy\") {\n      this.rowRange = range || this.table.options.clipboardCopyRowRange;\n      if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n        range = document.createRange();\n        range.selectNodeContents(this.table.element);\n        sel = window.getSelection();\n        if (sel.toString() && internal) {\n          this.customSelection = sel.toString();\n        }\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n        textRange = document.body.createTextRange();\n        textRange.moveToElementText(this.table.element);\n        textRange.select();\n      }\n      document.execCommand('copy');\n      if (sel) {\n        sel.removeAllRanges();\n      }\n    }\n  }\n\n  //PASTE EVENT HANDLING\n  setPasteAction(action) {\n    switch (typeof action) {\n      case \"string\":\n        this.pasteAction = Clipboard.pasteActions[action];\n        if (!this.pasteAction) {\n          console.warn(\"Clipboard Error - No such paste action found:\", action);\n        }\n        break;\n      case \"function\":\n        this.pasteAction = action;\n        break;\n    }\n  }\n  setPasteParser(parser) {\n    switch (typeof parser) {\n      case \"string\":\n        this.pasteParser = Clipboard.pasteParsers[parser];\n        if (!this.pasteParser) {\n          console.warn(\"Clipboard Error - No such paste parser found:\", parser);\n        }\n        break;\n      case \"function\":\n        this.pasteParser = parser;\n        break;\n    }\n  }\n  paste(e) {\n    var data, rowData, rows;\n    if (this.checkPaseOrigin(e)) {\n      data = this.getPasteData(e);\n      rowData = this.pasteParser.call(this, data);\n      if (rowData) {\n        e.preventDefault();\n        if (this.table.modExists(\"mutator\")) {\n          rowData = this.mutateData(rowData);\n        }\n        rows = this.pasteAction.call(this, rowData);\n        this.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n      } else {\n        this.dispatchExternal(\"clipboardPasteError\", data);\n      }\n    }\n  }\n  mutateData(data) {\n    var output = [];\n    if (Array.isArray(data)) {\n      data.forEach(row => {\n        output.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n      });\n    } else {\n      output = data;\n    }\n    return output;\n  }\n  checkPaseOrigin(e) {\n    var valid = true;\n    if (e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell) {\n      valid = false;\n    }\n    return valid;\n  }\n  getPasteData(e) {\n    var data;\n    if (window.clipboardData && window.clipboardData.getData) {\n      data = window.clipboardData.getData('Text');\n    } else if (e.clipboardData && e.clipboardData.getData) {\n      data = e.clipboardData.getData('text/plain');\n    } else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n      data = e.originalEvent.clipboardData.getData('text/plain');\n    }\n    return data;\n  }\n}\nClipboard.moduleName = \"clipboard\";\n\n//load defaults\nClipboard.pasteActions = defaultPasteActions;\nClipboard.pasteParsers = defaultPasteParsers;\nclass CalcComponent {\n  constructor(row) {\n    this._row = row;\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n        }\n      }\n    });\n  }\n  getData(transform) {\n    return this._row.getData(transform);\n  }\n  getElement() {\n    return this._row.getElement();\n  }\n  getTable() {\n    return this._row.table;\n  }\n  getCells() {\n    var cells = [];\n    this._row.getCells().forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n    return cells;\n  }\n  getCell(column) {\n    var cell = this._row.getCell(column);\n    return cell ? cell.getComponent() : false;\n  }\n  _getSelf() {\n    return this._row;\n  }\n}\n\n//public cell object\nclass CellComponent {\n  constructor(cell) {\n    this._cell = cell;\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n        }\n      }\n    });\n  }\n  getValue() {\n    return this._cell.getValue();\n  }\n  getOldValue() {\n    return this._cell.getOldValue();\n  }\n  getInitialValue() {\n    return this._cell.initialValue;\n  }\n  getElement() {\n    return this._cell.getElement();\n  }\n  getRow() {\n    return this._cell.row.getComponent();\n  }\n  getData() {\n    return this._cell.row.getData();\n  }\n  getField() {\n    return this._cell.column.getField();\n  }\n  getColumn() {\n    return this._cell.column.getComponent();\n  }\n  setValue(value, mutate) {\n    if (typeof mutate == \"undefined\") {\n      mutate = true;\n    }\n    this._cell.setValue(value, mutate);\n  }\n  restoreOldValue() {\n    this._cell.setValueActual(this._cell.getOldValue());\n  }\n  restoreInitialValue() {\n    this._cell.setValueActual(this._cell.initialValue);\n  }\n  checkHeight() {\n    this._cell.checkHeight();\n  }\n  getTable() {\n    return this._cell.table;\n  }\n  _getSelf() {\n    return this._cell;\n  }\n}\nclass Cell extends CoreFeature {\n  constructor(column, row) {\n    super(column.table);\n    this.table = column.table;\n    this.column = column;\n    this.row = row;\n    this.element = null;\n    this.value = null;\n    this.initialValue;\n    this.oldValue = null;\n    this.modules = {};\n    this.height = null;\n    this.width = null;\n    this.minWidth = null;\n    this.component = null;\n    this.loaded = false; //track if the cell has been added to the DOM yet\n\n    this.build();\n  }\n\n  //////////////// Setup Functions /////////////////\n  //generate element\n  build() {\n    this.generateElement();\n    this.setWidth();\n    this._configureCell();\n    this.setValueActual(this.column.getFieldValue(this.row.data));\n    this.initialValue = this.value;\n  }\n  generateElement() {\n    this.element = document.createElement('div');\n    this.element.className = \"tabulator-cell\";\n    this.element.setAttribute(\"role\", \"gridcell\");\n  }\n  _configureCell() {\n    var element = this.element,\n      field = this.column.getField(),\n      vertAligns = {\n        top: \"flex-start\",\n        bottom: \"flex-end\",\n        middle: \"center\"\n      },\n      hozAligns = {\n        left: \"flex-start\",\n        right: \"flex-end\",\n        center: \"center\"\n      };\n\n    //set text alignment\n    element.style.textAlign = this.column.hozAlign;\n    if (this.column.vertAlign) {\n      element.style.display = \"inline-flex\";\n      element.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n      if (this.column.hozAlign) {\n        element.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n      }\n    }\n    if (field) {\n      element.setAttribute(\"tabulator-field\", field);\n    }\n\n    //add class to cell if needed\n    if (this.column.definition.cssClass) {\n      var classNames = this.column.definition.cssClass.split(\" \");\n      classNames.forEach(className => {\n        element.classList.add(className);\n      });\n    }\n    this.dispatch(\"cell-init\", this);\n\n    //hide cell if not visible\n    if (!this.column.visible) {\n      this.hide();\n    }\n  }\n\n  //generate cell contents\n  _generateContents() {\n    var val;\n    val = this.chain(\"cell-format\", this, null, () => {\n      return this.element.innerHTML = this.value;\n    });\n    switch (typeof val) {\n      case \"object\":\n        if (val instanceof Node) {\n          //clear previous cell contents\n          while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n          this.element.appendChild(val);\n        } else {\n          this.element.innerHTML = \"\";\n          if (val != null) {\n            console.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n          }\n        }\n        break;\n      case \"undefined\":\n        this.element.innerHTML = \"\";\n        break;\n      default:\n        this.element.innerHTML = val;\n    }\n  }\n  cellRendered() {\n    this.dispatch(\"cell-rendered\", this);\n  }\n\n  //////////////////// Getters ////////////////////\n  getElement(containerOnly) {\n    if (!this.loaded) {\n      this.loaded = true;\n      if (!containerOnly) {\n        this.layoutElement();\n      }\n    }\n    return this.element;\n  }\n  getValue() {\n    return this.value;\n  }\n  getOldValue() {\n    return this.oldValue;\n  }\n\n  //////////////////// Actions ////////////////////\n  setValue(value, mutate, force) {\n    var changed = this.setValueProcessData(value, mutate, force);\n    if (changed) {\n      this.dispatch(\"cell-value-updated\", this);\n      this.cellRendered();\n      if (this.column.definition.cellEdited) {\n        this.column.definition.cellEdited.call(this.table, this.getComponent());\n      }\n      this.dispatchExternal(\"cellEdited\", this.getComponent());\n      if (this.subscribedExternal(\"dataChanged\")) {\n        this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n      }\n    }\n  }\n  setValueProcessData(value, mutate, force) {\n    var changed = false;\n    if (this.value !== value || force) {\n      changed = true;\n      if (mutate) {\n        value = this.chain(\"cell-value-changing\", [this, value], null, value);\n      }\n    }\n    this.setValueActual(value);\n    if (changed) {\n      this.dispatch(\"cell-value-changed\", this);\n    }\n    return changed;\n  }\n  setValueActual(value) {\n    this.oldValue = this.value;\n    this.value = value;\n    this.dispatch(\"cell-value-save-before\", this);\n    this.column.setFieldValue(this.row.data, value);\n    this.dispatch(\"cell-value-save-after\", this);\n    if (this.loaded) {\n      this.layoutElement();\n    }\n  }\n  layoutElement() {\n    this._generateContents();\n    this.dispatch(\"cell-layout\", this);\n  }\n  setWidth() {\n    this.width = this.column.width;\n    this.element.style.width = this.column.widthStyled;\n  }\n  clearWidth() {\n    this.width = \"\";\n    this.element.style.width = \"\";\n  }\n  getWidth() {\n    return this.width || this.element.offsetWidth;\n  }\n  setMinWidth() {\n    this.minWidth = this.column.minWidth;\n    this.element.style.minWidth = this.column.minWidthStyled;\n  }\n  setMaxWidth() {\n    this.maxWidth = this.column.maxWidth;\n    this.element.style.maxWidth = this.column.maxWidthStyled;\n  }\n  checkHeight() {\n    // var height = this.element.css(\"height\");\n    this.row.reinitializeHeight();\n  }\n  clearHeight() {\n    this.element.style.height = \"\";\n    this.height = null;\n    this.dispatch(\"cell-height\", this, \"\");\n  }\n  setHeight() {\n    this.height = this.row.height;\n    this.element.style.height = this.row.heightStyled;\n    this.dispatch(\"cell-height\", this, this.row.heightStyled);\n  }\n  getHeight() {\n    return this.height || this.element.offsetHeight;\n  }\n  show() {\n    this.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n  }\n  hide() {\n    this.element.style.display = \"none\";\n  }\n  delete() {\n    this.dispatch(\"cell-delete\", this);\n    if (!this.table.rowManager.redrawBlock && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n    this.element = false;\n    this.column.deleteCell(this);\n    this.row.deleteCell(this);\n    this.calcs = {};\n  }\n  getIndex() {\n    return this.row.getCellIndex(this);\n  }\n\n  //////////////// Object Generation /////////////////\n  getComponent() {\n    if (!this.component) {\n      this.component = new CellComponent(this);\n    }\n    return this.component;\n  }\n}\n\n//public column object\nclass ColumnComponent {\n  constructor(column) {\n    this._column = column;\n    this.type = \"ColumnComponent\";\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n        }\n      }\n    });\n  }\n  getElement() {\n    return this._column.getElement();\n  }\n  getDefinition() {\n    return this._column.getDefinition();\n  }\n  getField() {\n    return this._column.getField();\n  }\n  getTitleDownload() {\n    return this._column.getTitleDownload();\n  }\n  getCells() {\n    var cells = [];\n    this._column.cells.forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n    return cells;\n  }\n  isVisible() {\n    return this._column.visible;\n  }\n  show() {\n    if (this._column.isGroup) {\n      this._column.columns.forEach(function (column) {\n        column.show();\n      });\n    } else {\n      this._column.show();\n    }\n  }\n  hide() {\n    if (this._column.isGroup) {\n      this._column.columns.forEach(function (column) {\n        column.hide();\n      });\n    } else {\n      this._column.hide();\n    }\n  }\n  toggle() {\n    if (this._column.visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  delete() {\n    return this._column.delete();\n  }\n  getSubColumns() {\n    var output = [];\n    if (this._column.columns.length) {\n      this._column.columns.forEach(function (column) {\n        output.push(column.getComponent());\n      });\n    }\n    return output;\n  }\n  getParentColumn() {\n    return this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n  }\n  _getSelf() {\n    return this._column;\n  }\n  scrollTo() {\n    return this._column.table.columnManager.scrollToColumn(this._column);\n  }\n  getTable() {\n    return this._column.table;\n  }\n  move(to, after) {\n    var toColumn = this._column.table.columnManager.findColumn(to);\n    if (toColumn) {\n      this._column.table.columnManager.moveColumn(this._column, toColumn, after);\n    } else {\n      console.warn(\"Move Error - No matching column found:\", toColumn);\n    }\n  }\n  getNextColumn() {\n    var nextCol = this._column.nextColumn();\n    return nextCol ? nextCol.getComponent() : false;\n  }\n  getPrevColumn() {\n    var prevCol = this._column.prevColumn();\n    return prevCol ? prevCol.getComponent() : false;\n  }\n  updateDefinition(updates) {\n    return this._column.updateDefinition(updates);\n  }\n  getWidth() {\n    return this._column.getWidth();\n  }\n  setWidth(width) {\n    var result;\n    if (width === true) {\n      result = this._column.reinitializeWidth(true);\n    } else {\n      result = this._column.setWidth(width);\n    }\n    this._column.table.columnManager.rerenderColumns(true);\n    return result;\n  }\n}\nvar defaultColumnOptions = {\n  \"title\": undefined,\n  \"field\": undefined,\n  \"columns\": undefined,\n  \"visible\": undefined,\n  \"hozAlign\": undefined,\n  \"vertAlign\": undefined,\n  \"width\": undefined,\n  \"minWidth\": 40,\n  \"maxWidth\": undefined,\n  \"maxInitialWidth\": undefined,\n  \"cssClass\": undefined,\n  \"variableHeight\": undefined,\n  \"headerVertical\": undefined,\n  \"headerHozAlign\": undefined,\n  \"headerWordWrap\": false,\n  \"editableTitle\": undefined\n};\nclass Column extends CoreFeature {\n  constructor(def, parent) {\n    super(parent.table);\n    this.definition = def; //column definition\n    this.parent = parent; //hold parent object\n    this.type = \"column\"; //type of element\n    this.columns = []; //child columns\n    this.cells = []; //cells bound to this column\n    this.element = this.createElement(); //column header element\n    this.contentElement = false;\n    this.titleHolderElement = false;\n    this.titleElement = false;\n    this.groupElement = this.createGroupElement(); //column group holder element\n    this.isGroup = false;\n    this.hozAlign = \"\"; //horizontal text alignment\n    this.vertAlign = \"\"; //vert text alignment\n\n    //multi dimensional filed handling\n    this.field = \"\";\n    this.fieldStructure = \"\";\n    this.getFieldValue = \"\";\n    this.setFieldValue = \"\";\n    this.titleDownload = null;\n    this.titleFormatterRendered = false;\n    this.mapDefinitions();\n    this.setField(this.definition.field);\n    this.modules = {}; //hold module variables;\n\n    this.width = null; //column width\n    this.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n    this.maxWidth = null; //column maximum width\n    this.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n    this.maxInitialWidth = null;\n    this.minWidth = null; //column minimum width\n    this.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n    this.widthFixed = false; //user has specified a width for this column\n\n    this.visible = true; //default visible state\n\n    this.component = null;\n\n    //initialize column\n    if (this.definition.columns) {\n      this.isGroup = true;\n      this.definition.columns.forEach((def, i) => {\n        var newCol = new Column(def, this);\n        this.attachColumn(newCol);\n      });\n      this.checkColumnVisibility();\n    } else {\n      parent.registerColumnField(this);\n    }\n    this._initialize();\n  }\n  createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col\");\n    el.setAttribute(\"role\", \"columnheader\");\n    el.setAttribute(\"aria-sort\", \"none\");\n    switch (this.table.options.columnHeaderVertAlign) {\n      case \"middle\":\n        el.style.justifyContent = \"center\";\n        break;\n      case \"bottom\":\n        el.style.justifyContent = \"flex-end\";\n        break;\n    }\n    return el;\n  }\n  createGroupElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col-group-cols\");\n    return el;\n  }\n  mapDefinitions() {\n    var defaults = this.table.options.columnDefaults;\n\n    //map columnDefaults onto column definitions\n    if (defaults) {\n      for (let key in defaults) {\n        if (typeof this.definition[key] === \"undefined\") {\n          this.definition[key] = defaults[key];\n        }\n      }\n    }\n    this.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n  }\n  checkDefinition() {\n    Object.keys(this.definition).forEach(key => {\n      if (Column.defaultOptionList.indexOf(key) === -1) {\n        console.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n      }\n    });\n  }\n  setField(field) {\n    this.field = field;\n    this.fieldStructure = field ? this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field] : [];\n    this.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n    this.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n  }\n\n  //register column position with column manager\n  registerColumnPosition(column) {\n    this.parent.registerColumnPosition(column);\n  }\n\n  //register column position with column manager\n  registerColumnField(column) {\n    this.parent.registerColumnField(column);\n  }\n\n  //trigger position registration\n  reRegisterPosition() {\n    if (this.isGroup) {\n      this.columns.forEach(function (column) {\n        column.reRegisterPosition();\n      });\n    } else {\n      this.registerColumnPosition(this);\n    }\n  }\n\n  //build header element\n  _initialize() {\n    var def = this.definition;\n    while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n    if (def.headerVertical) {\n      this.element.classList.add(\"tabulator-col-vertical\");\n      if (def.headerVertical === \"flip\") {\n        this.element.classList.add(\"tabulator-col-vertical-flip\");\n      }\n    }\n    this.contentElement = this._buildColumnHeaderContent();\n    this.element.appendChild(this.contentElement);\n    if (this.isGroup) {\n      this._buildGroupHeader();\n    } else {\n      this._buildColumnHeader();\n    }\n    this.dispatch(\"column-init\", this);\n  }\n\n  //build header element for header\n  _buildColumnHeader() {\n    var def = this.definition;\n    this.dispatch(\"column-layout\", this);\n\n    //set column visibility\n    if (typeof def.visible != \"undefined\") {\n      if (def.visible) {\n        this.show(true);\n      } else {\n        this.hide(true);\n      }\n    }\n\n    //assign additional css classes to column header\n    if (def.cssClass) {\n      var classNames = def.cssClass.split(\" \");\n      classNames.forEach(className => {\n        this.element.classList.add(className);\n      });\n    }\n    if (def.field) {\n      this.element.setAttribute(\"tabulator-field\", def.field);\n    }\n\n    //set min width if present\n    this.setMinWidth(parseInt(def.minWidth));\n    if (def.maxInitialWidth) {\n      this.maxInitialWidth = parseInt(def.maxInitialWidth);\n    }\n    if (def.maxWidth) {\n      this.setMaxWidth(parseInt(def.maxWidth));\n    }\n    this.reinitializeWidth();\n\n    //set horizontal text alignment\n    this.hozAlign = this.definition.hozAlign;\n    this.vertAlign = this.definition.vertAlign;\n    this.titleElement.style.textAlign = this.definition.headerHozAlign;\n  }\n  _buildColumnHeaderContent() {\n    var contentElement = document.createElement(\"div\");\n    contentElement.classList.add(\"tabulator-col-content\");\n    this.titleHolderElement = document.createElement(\"div\");\n    this.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n    contentElement.appendChild(this.titleHolderElement);\n    this.titleElement = this._buildColumnHeaderTitle();\n    this.titleHolderElement.appendChild(this.titleElement);\n    return contentElement;\n  }\n\n  //build title element of column\n  _buildColumnHeaderTitle() {\n    var def = this.definition;\n    var titleHolderElement = document.createElement(\"div\");\n    titleHolderElement.classList.add(\"tabulator-col-title\");\n    if (def.headerWordWrap) {\n      titleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n    }\n    if (def.editableTitle) {\n      var titleElement = document.createElement(\"input\");\n      titleElement.classList.add(\"tabulator-title-editor\");\n      titleElement.addEventListener(\"click\", e => {\n        e.stopPropagation();\n        titleElement.focus();\n      });\n      titleElement.addEventListener(\"change\", () => {\n        def.title = titleElement.value;\n        this.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n      });\n      titleHolderElement.appendChild(titleElement);\n      if (def.field) {\n        this.langBind(\"columns|\" + def.field, text => {\n          titleElement.value = text || def.title || \"&nbsp;\";\n        });\n      } else {\n        titleElement.value = def.title || \"&nbsp;\";\n      }\n    } else {\n      if (def.field) {\n        this.langBind(\"columns|\" + def.field, text => {\n          this._formatColumnHeaderTitle(titleHolderElement, text || def.title || \"&nbsp;\");\n        });\n      } else {\n        this._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n      }\n    }\n    return titleHolderElement;\n  }\n  _formatColumnHeaderTitle(el, title) {\n    var contents = this.chain(\"column-format\", [this, title, el], null, () => {\n      return title;\n    });\n    switch (typeof contents) {\n      case \"object\":\n        if (contents instanceof Node) {\n          el.appendChild(contents);\n        } else {\n          el.innerHTML = \"\";\n          console.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n        }\n        break;\n      case \"undefined\":\n        el.innerHTML = \"\";\n        break;\n      default:\n        el.innerHTML = contents;\n    }\n  }\n\n  //build header element for column group\n  _buildGroupHeader() {\n    this.element.classList.add(\"tabulator-col-group\");\n    this.element.setAttribute(\"role\", \"columngroup\");\n    this.element.setAttribute(\"aria-title\", this.definition.title);\n\n    //asign additional css classes to column header\n    if (this.definition.cssClass) {\n      var classNames = this.definition.cssClass.split(\" \");\n      classNames.forEach(className => {\n        this.element.classList.add(className);\n      });\n    }\n    this.titleElement.style.textAlign = this.definition.headerHozAlign;\n    this.element.appendChild(this.groupElement);\n  }\n\n  //flat field lookup\n  _getFlatData(data) {\n    return data[this.field];\n  }\n\n  //nested field lookup\n  _getNestedData(data) {\n    var dataObj = data,\n      structure = this.fieldStructure,\n      length = structure.length,\n      output;\n    for (let i = 0; i < length; i++) {\n      dataObj = dataObj[structure[i]];\n      output = dataObj;\n      if (!dataObj) {\n        break;\n      }\n    }\n    return output;\n  }\n\n  //flat field set\n  _setFlatData(data, value) {\n    if (this.field) {\n      data[this.field] = value;\n    }\n  }\n\n  //nested field set\n  _setNestedData(data, value) {\n    var dataObj = data,\n      structure = this.fieldStructure,\n      length = structure.length;\n    for (let i = 0; i < length; i++) {\n      if (i == length - 1) {\n        dataObj[structure[i]] = value;\n      } else {\n        if (!dataObj[structure[i]]) {\n          if (typeof value !== \"undefined\") {\n            dataObj[structure[i]] = {};\n          } else {\n            break;\n          }\n        }\n        dataObj = dataObj[structure[i]];\n      }\n    }\n  }\n\n  //attach column to this group\n  attachColumn(column) {\n    if (this.groupElement) {\n      this.columns.push(column);\n      this.groupElement.appendChild(column.getElement());\n      column.columnRendered();\n    } else {\n      console.warn(\"Column Warning - Column being attached to another column instead of column group\");\n    }\n  }\n\n  //vertically align header in column\n  verticalAlign(alignment, height) {\n    //calculate height of column header and group holder element\n    var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : height || this.parent.getHeadersElement().clientHeight;\n    // var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n    this.element.style.height = parentHeight + \"px\";\n    this.dispatch(\"column-height\", this, this.element.style.height);\n    if (this.isGroup) {\n      this.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + \"px\";\n    }\n\n    //vertically align cell contents\n    // if(!this.isGroup && alignment !== \"top\"){\n    // \tif(alignment === \"bottom\"){\n    // \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n    // \t}else{\n    // \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n    // \t}\n    // }\n\n    this.columns.forEach(function (column) {\n      column.verticalAlign(alignment);\n    });\n  }\n\n  //clear vertical alignment\n  clearVerticalAlign() {\n    this.element.style.paddingTop = \"\";\n    this.element.style.height = \"\";\n    this.element.style.minHeight = \"\";\n    this.groupElement.style.minHeight = \"\";\n    this.columns.forEach(function (column) {\n      column.clearVerticalAlign();\n    });\n    this.dispatch(\"column-height\", this, \"\");\n  }\n\n  //// Retrieve Column Information ////\n  //return column header element\n  getElement() {\n    return this.element;\n  }\n\n  //return column group element\n  getGroupElement() {\n    return this.groupElement;\n  }\n\n  //return field name\n  getField() {\n    return this.field;\n  }\n  getTitleDownload() {\n    return this.titleDownload;\n  }\n\n  //return the first column in a group\n  getFirstColumn() {\n    if (!this.isGroup) {\n      return this;\n    } else {\n      if (this.columns.length) {\n        return this.columns[0].getFirstColumn();\n      } else {\n        return false;\n      }\n    }\n  }\n\n  //return the last column in a group\n  getLastColumn() {\n    if (!this.isGroup) {\n      return this;\n    } else {\n      if (this.columns.length) {\n        return this.columns[this.columns.length - 1].getLastColumn();\n      } else {\n        return false;\n      }\n    }\n  }\n\n  //return all columns in a group\n  getColumns(traverse) {\n    var columns = [];\n    if (traverse) {\n      this.columns.forEach(column => {\n        columns.push(column);\n        columns = columns.concat(column.getColumns(true));\n      });\n    } else {\n      columns = this.columns;\n    }\n    return columns;\n  }\n\n  //return all columns in a group\n  getCells() {\n    return this.cells;\n  }\n\n  //retrieve the top column in a group of columns\n  getTopColumn() {\n    if (this.parent.isGroup) {\n      return this.parent.getTopColumn();\n    } else {\n      return this;\n    }\n  }\n\n  //return column definition object\n  getDefinition(updateBranches) {\n    var colDefs = [];\n    if (this.isGroup && updateBranches) {\n      this.columns.forEach(function (column) {\n        colDefs.push(column.getDefinition(true));\n      });\n      this.definition.columns = colDefs;\n    }\n    return this.definition;\n  }\n\n  //////////////////// Actions ////////////////////\n  checkColumnVisibility() {\n    var visible = false;\n    this.columns.forEach(function (column) {\n      if (column.visible) {\n        visible = true;\n      }\n    });\n    if (visible) {\n      this.show();\n      this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n    } else {\n      this.hide();\n    }\n  }\n\n  //show column\n  show(silent, responsiveToggle) {\n    if (!this.visible) {\n      this.visible = true;\n      this.element.style.display = \"\";\n      if (this.parent.isGroup) {\n        this.parent.checkColumnVisibility();\n      }\n      this.cells.forEach(function (cell) {\n        cell.show();\n      });\n      if (!this.isGroup && this.width === null) {\n        this.reinitializeWidth();\n      }\n      this.table.columnManager.verticalAlignHeaders();\n      this.dispatch(\"column-show\", this, responsiveToggle);\n      if (!silent) {\n        this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n      }\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n      if (!this.silent) {\n        this.table.columnManager.rerenderColumns();\n      }\n    }\n  }\n\n  //hide column\n  hide(silent, responsiveToggle) {\n    if (this.visible) {\n      this.visible = false;\n      this.element.style.display = \"none\";\n      this.table.columnManager.verticalAlignHeaders();\n      if (this.parent.isGroup) {\n        this.parent.checkColumnVisibility();\n      }\n      this.cells.forEach(function (cell) {\n        cell.hide();\n      });\n      this.dispatch(\"column-hide\", this, responsiveToggle);\n      if (!silent) {\n        this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n      }\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n      if (!this.silent) {\n        this.table.columnManager.rerenderColumns();\n      }\n    }\n  }\n  matchChildWidths() {\n    var childWidth = 0;\n    if (this.contentElement && this.columns.length) {\n      this.columns.forEach(function (column) {\n        if (column.visible) {\n          childWidth += column.getWidth();\n        }\n      });\n      this.contentElement.style.maxWidth = childWidth - 1 + \"px\";\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n    }\n  }\n  removeChild(child) {\n    var index = this.columns.indexOf(child);\n    if (index > -1) {\n      this.columns.splice(index, 1);\n    }\n    if (!this.columns.length) {\n      this.delete();\n    }\n  }\n  setWidth(width) {\n    this.widthFixed = true;\n    this.setWidthActual(width);\n  }\n  setWidthActual(width) {\n    if (isNaN(width)) {\n      width = Math.floor(this.table.element.clientWidth / 100 * parseInt(width));\n    }\n    width = Math.max(this.minWidth, width);\n    if (this.maxWidth) {\n      width = Math.min(this.maxWidth, width);\n    }\n    this.width = width;\n    this.widthStyled = width ? width + \"px\" : \"\";\n    this.element.style.width = this.widthStyled;\n    if (!this.isGroup) {\n      this.cells.forEach(function (cell) {\n        cell.setWidth();\n      });\n    }\n    if (this.parent.isGroup) {\n      this.parent.matchChildWidths();\n    }\n    this.dispatch(\"column-width\", this);\n  }\n  checkCellHeights() {\n    var rows = [];\n    this.cells.forEach(function (cell) {\n      if (cell.row.heightInitialized) {\n        if (cell.row.getElement().offsetParent !== null) {\n          rows.push(cell.row);\n          cell.row.clearCellHeight();\n        } else {\n          cell.row.heightInitialized = false;\n        }\n      }\n    });\n    rows.forEach(function (row) {\n      row.calcHeight();\n    });\n    rows.forEach(function (row) {\n      row.setCellHeight();\n    });\n  }\n  getWidth() {\n    var width = 0;\n    if (this.isGroup) {\n      this.columns.forEach(function (column) {\n        if (column.visible) {\n          width += column.getWidth();\n        }\n      });\n    } else {\n      width = this.width;\n    }\n    return width;\n  }\n  getLeftOffset() {\n    var offset = this.element.offsetLeft;\n    if (this.parent.isGroup) {\n      offset += this.parent.getLeftOffset();\n    }\n    return offset;\n  }\n  getHeight() {\n    return Math.ceil(this.element.getBoundingClientRect().height);\n  }\n  setMinWidth(minWidth) {\n    if (this.maxWidth && minWidth > this.maxWidth) {\n      minWidth = this.maxWidth;\n      console.warn(\"the minWidth (\" + minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\" + this.maxWidthStyled + \")\");\n    }\n    this.minWidth = minWidth;\n    this.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n    this.element.style.minWidth = this.minWidthStyled;\n    this.cells.forEach(function (cell) {\n      cell.setMinWidth();\n    });\n  }\n  setMaxWidth(maxWidth) {\n    if (this.minWidth && maxWidth < this.minWidth) {\n      maxWidth = this.minWidth;\n      console.warn(\"the maxWidth (\" + maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\" + this.minWidthStyled + \")\");\n    }\n    this.maxWidth = maxWidth;\n    this.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n    this.element.style.maxWidth = this.maxWidthStyled;\n    this.cells.forEach(function (cell) {\n      cell.setMaxWidth();\n    });\n  }\n  delete() {\n    return new Promise((resolve, reject) => {\n      if (this.isGroup) {\n        this.columns.forEach(function (column) {\n          column.delete();\n        });\n      }\n      this.dispatch(\"column-delete\", this);\n      var cellCount = this.cells.length;\n      for (let i = 0; i < cellCount; i++) {\n        this.cells[0].delete();\n      }\n      if (this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      this.element = false;\n      this.contentElement = false;\n      this.titleElement = false;\n      this.groupElement = false;\n      if (this.parent.isGroup) {\n        this.parent.removeChild(this);\n      }\n      this.table.columnManager.deregisterColumn(this);\n      this.table.columnManager.rerenderColumns(true);\n      resolve();\n    });\n  }\n  columnRendered() {\n    if (this.titleFormatterRendered) {\n      this.titleFormatterRendered();\n    }\n    this.dispatch(\"column-rendered\", this);\n  }\n\n  //////////////// Cell Management /////////////////\n  //generate cell for this column\n  generateCell(row) {\n    var cell = new Cell(this, row);\n    this.cells.push(cell);\n    return cell;\n  }\n  nextColumn() {\n    var index = this.table.columnManager.findColumnIndex(this);\n    return index > -1 ? this._nextVisibleColumn(index + 1) : false;\n  }\n  _nextVisibleColumn(index) {\n    var column = this.table.columnManager.getColumnByIndex(index);\n    return !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n  }\n  prevColumn() {\n    var index = this.table.columnManager.findColumnIndex(this);\n    return index > -1 ? this._prevVisibleColumn(index - 1) : false;\n  }\n  _prevVisibleColumn(index) {\n    var column = this.table.columnManager.getColumnByIndex(index);\n    return !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n  }\n  reinitializeWidth(force) {\n    this.widthFixed = false;\n\n    //set width if present\n    if (typeof this.definition.width !== \"undefined\" && !force) {\n      // maxInitialWidth ignored here as width specified\n      this.setWidth(this.definition.width);\n    }\n    this.dispatch(\"column-width-fit-before\", this);\n    this.fitToData(force);\n    this.dispatch(\"column-width-fit-after\", this);\n  }\n\n  //set column width to maximum cell width for non group columns\n  fitToData(force) {\n    if (this.isGroup) {\n      return;\n    }\n    if (!this.widthFixed) {\n      this.element.style.width = \"\";\n      this.cells.forEach(cell => {\n        cell.clearWidth();\n      });\n    }\n    var maxWidth = this.element.offsetWidth;\n    if (!this.width || !this.widthFixed) {\n      this.cells.forEach(cell => {\n        var width = cell.getWidth();\n        if (width > maxWidth) {\n          maxWidth = width;\n        }\n      });\n      if (maxWidth) {\n        var setTo = maxWidth + 1;\n        if (this.maxInitialWidth && !force) {\n          setTo = Math.min(setTo, this.maxInitialWidth);\n        }\n        this.setWidthActual(setTo);\n      }\n    }\n  }\n  updateDefinition(updates) {\n    var definition;\n    if (!this.isGroup) {\n      if (!this.parent.isGroup) {\n        definition = Object.assign({}, this.getDefinition());\n        definition = Object.assign(definition, updates);\n        return this.table.columnManager.addColumn(definition, false, this).then(column => {\n          if (definition.field == this.field) {\n            this.field = false; //clear field name to prevent deletion of duplicate column from arrays\n          }\n\n          return this.delete().then(() => {\n            return column.getComponent();\n          });\n        });\n      } else {\n        console.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n        return Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n      }\n    } else {\n      console.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n      return Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n    }\n  }\n  deleteCell(cell) {\n    var index = this.cells.indexOf(cell);\n    if (index > -1) {\n      this.cells.splice(index, 1);\n    }\n  }\n\n  //////////////// Object Generation /////////////////\n  getComponent() {\n    if (!this.component) {\n      this.component = new ColumnComponent(this);\n    }\n    return this.component;\n  }\n}\nColumn.defaultOptionList = defaultColumnOptions;\n\n//public row object\nclass RowComponent {\n  constructor(row) {\n    this._row = row;\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n        }\n      }\n    });\n  }\n  getData(transform) {\n    return this._row.getData(transform);\n  }\n  getElement() {\n    return this._row.getElement();\n  }\n  getCells() {\n    var cells = [];\n    this._row.getCells().forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n    return cells;\n  }\n  getCell(column) {\n    var cell = this._row.getCell(column);\n    return cell ? cell.getComponent() : false;\n  }\n  getIndex() {\n    return this._row.getData(\"data\")[this._row.table.options.index];\n  }\n  getPosition() {\n    return this._row.getPosition();\n  }\n  watchPosition(callback) {\n    return this._row.watchPosition(callback);\n  }\n  delete() {\n    return this._row.delete();\n  }\n  scrollTo() {\n    return this._row.table.rowManager.scrollToRow(this._row);\n  }\n  move(to, after) {\n    this._row.moveToRow(to, after);\n  }\n  update(data) {\n    return this._row.updateData(data);\n  }\n  normalizeHeight() {\n    this._row.normalizeHeight(true);\n  }\n  _getSelf() {\n    return this._row;\n  }\n  reformat() {\n    return this._row.reinitialize();\n  }\n  getTable() {\n    return this._row.table;\n  }\n  getNextRow() {\n    var row = this._row.nextRow();\n    return row ? row.getComponent() : row;\n  }\n  getPrevRow() {\n    var row = this._row.prevRow();\n    return row ? row.getComponent() : row;\n  }\n}\nclass Row extends CoreFeature {\n  constructor(data, parent) {\n    let type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"row\";\n    super(parent.table);\n    this.parent = parent;\n    this.data = {};\n    this.type = type; //type of element\n    this.element = false;\n    this.modules = {}; //hold module variables;\n    this.cells = [];\n    this.height = 0; //hold element height\n    this.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n    this.manualHeight = false; //user has manually set row height\n    this.outerHeight = 0; //hold elements outer height\n    this.initialized = false; //element has been rendered\n    this.heightInitialized = false; //element has resized cells to fit\n    this.position = 0; //store position of element in row list\n    this.positionWatchers = [];\n    this.component = null;\n    this.created = false;\n    this.setData(data);\n  }\n  create() {\n    if (!this.created) {\n      this.created = true;\n      this.generateElement();\n    }\n  }\n  createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    el.setAttribute(\"role\", \"row\");\n    this.element = el;\n  }\n  getElement() {\n    this.create();\n    return this.element;\n  }\n  detachElement() {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n  generateElement() {\n    this.createElement();\n    this.dispatch(\"row-init\", this);\n  }\n  generateCells() {\n    this.cells = this.table.columnManager.generateCells(this);\n  }\n\n  //functions to setup on first render\n  initialize(force) {\n    this.create();\n    if (!this.initialized || force) {\n      this.deleteCells();\n      while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n      this.dispatch(\"row-layout-before\", this);\n      this.generateCells();\n      this.initialized = true;\n      this.table.columnManager.renderer.renderRowCells(this);\n      if (force) {\n        this.normalizeHeight();\n      }\n      this.dispatch(\"row-layout\", this);\n      if (this.table.options.rowFormatter) {\n        this.table.options.rowFormatter(this.getComponent());\n      }\n      this.dispatch(\"row-layout-after\", this);\n    } else {\n      this.table.columnManager.renderer.rerenderRowCells(this);\n    }\n  }\n  reinitializeHeight() {\n    this.heightInitialized = false;\n    if (this.element && this.element.offsetParent !== null) {\n      this.normalizeHeight(true);\n    }\n  }\n  deinitialize() {\n    this.initialized = false;\n  }\n  deinitializeHeight() {\n    this.heightInitialized = false;\n  }\n  reinitialize(children) {\n    this.initialized = false;\n    this.heightInitialized = false;\n    if (!this.manualHeight) {\n      this.height = 0;\n      this.heightStyled = \"\";\n    }\n    if (this.element && this.element.offsetParent !== null) {\n      this.initialize(true);\n    }\n    this.dispatch(\"row-relayout\", this);\n  }\n\n  //get heights when doing bulk row style calcs in virtual DOM\n  calcHeight(force) {\n    var maxHeight = 0,\n      minHeight;\n    if (this.table.options.rowHeight) {\n      this.height = this.table.options.rowHeight;\n    } else {\n      minHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n      this.cells.forEach(function (cell) {\n        var height = cell.getHeight();\n        if (height > maxHeight) {\n          maxHeight = height;\n        }\n      });\n      if (force) {\n        this.height = Math.max(maxHeight, minHeight);\n      } else {\n        this.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n      }\n    }\n    this.heightStyled = this.height ? this.height + \"px\" : \"\";\n    this.outerHeight = this.element.offsetHeight;\n  }\n\n  //set of cells\n  setCellHeight() {\n    this.cells.forEach(function (cell) {\n      cell.setHeight();\n    });\n    this.heightInitialized = true;\n  }\n  clearCellHeight() {\n    this.cells.forEach(function (cell) {\n      cell.clearHeight();\n    });\n  }\n\n  //normalize the height of elements in the row\n  normalizeHeight(force) {\n    if (force && !this.table.options.rowHeight) {\n      this.clearCellHeight();\n    }\n    this.calcHeight(force);\n    this.setCellHeight();\n  }\n\n  //set height of rows\n  setHeight(height, force) {\n    if (this.height != height || force) {\n      this.manualHeight = true;\n      this.height = height;\n      this.heightStyled = height ? height + \"px\" : \"\";\n      this.setCellHeight();\n\n      // this.outerHeight = this.element.outerHeight();\n      this.outerHeight = this.element.offsetHeight;\n    }\n  }\n\n  //return rows outer height\n  getHeight() {\n    return this.outerHeight;\n  }\n\n  //return rows outer Width\n  getWidth() {\n    return this.element.offsetWidth;\n  }\n\n  //////////////// Cell Management /////////////////\n  deleteCell(cell) {\n    var index = this.cells.indexOf(cell);\n    if (index > -1) {\n      this.cells.splice(index, 1);\n    }\n  }\n\n  //////////////// Data Management /////////////////\n  setData(data) {\n    this.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n    this.dispatch(\"row-data-init-after\", this);\n  }\n\n  //update the rows data\n  updateData(updatedData) {\n    var visible = this.element && Helpers.elVisible(this.element),\n      tempData = {},\n      newRowData;\n    return new Promise((resolve, reject) => {\n      if (typeof updatedData === \"string\") {\n        updatedData = JSON.parse(updatedData);\n      }\n      this.dispatch(\"row-data-save-before\", this);\n      if (this.subscribed(\"row-data-changing\")) {\n        tempData = Object.assign(tempData, this.data);\n        tempData = Object.assign(tempData, updatedData);\n      }\n      newRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\n      //set data\n      for (let attrname in newRowData) {\n        this.data[attrname] = newRowData[attrname];\n      }\n      this.dispatch(\"row-data-save-after\", this);\n\n      //update affected cells only\n      for (let attrname in updatedData) {\n        let columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n        columns.forEach(column => {\n          let cell = this.getCell(column.getField());\n          if (cell) {\n            let value = column.getFieldValue(newRowData);\n            if (cell.getValue() !== value) {\n              cell.setValueProcessData(value);\n              if (visible) {\n                cell.cellRendered();\n              }\n            }\n          }\n        });\n      }\n\n      //Partial reinitialization if visible\n      if (visible) {\n        this.normalizeHeight(true);\n        if (this.table.options.rowFormatter) {\n          this.table.options.rowFormatter(this.getComponent());\n        }\n      } else {\n        this.initialized = false;\n        this.height = 0;\n        this.heightStyled = \"\";\n      }\n      this.dispatch(\"row-data-changed\", this, visible, updatedData);\n\n      //this.reinitialize();\n\n      this.dispatchExternal(\"rowUpdated\", this.getComponent());\n      if (this.subscribedExternal(\"dataChanged\")) {\n        this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n      }\n      resolve();\n    });\n  }\n  getData(transform) {\n    if (transform) {\n      return this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n    }\n    return this.data;\n  }\n  getCell(column) {\n    var match = false;\n    column = this.table.columnManager.findColumn(column);\n    if (!this.initialized && this.cells.length === 0) {\n      this.generateCells();\n    }\n    match = this.cells.find(function (cell) {\n      return cell.column === column;\n    });\n    return match;\n  }\n  getCellIndex(findCell) {\n    return this.cells.findIndex(function (cell) {\n      return cell === findCell;\n    });\n  }\n  findCell(subject) {\n    return this.cells.find(cell => {\n      return cell.element === subject;\n    });\n  }\n  getCells() {\n    if (!this.initialized && this.cells.length === 0) {\n      this.generateCells();\n    }\n    return this.cells;\n  }\n  nextRow() {\n    var row = this.table.rowManager.nextDisplayRow(this, true);\n    return row || false;\n  }\n  prevRow() {\n    var row = this.table.rowManager.prevDisplayRow(this, true);\n    return row || false;\n  }\n  moveToRow(to, before) {\n    var toRow = this.table.rowManager.findRow(to);\n    if (toRow) {\n      this.table.rowManager.moveRowActual(this, toRow, !before);\n      this.table.rowManager.refreshActiveData(\"display\", false, true);\n    } else {\n      console.warn(\"Move Error - No matching row found:\", to);\n    }\n  }\n\n  ///////////////////// Actions  /////////////////////\n  delete() {\n    this.dispatch(\"row-delete\", this);\n    this.deleteActual();\n    return Promise.resolve();\n  }\n  deleteActual(blockRedraw) {\n    this.detachModules();\n    this.table.rowManager.deleteRow(this, blockRedraw);\n    this.deleteCells();\n    this.initialized = false;\n    this.heightInitialized = false;\n    this.element = false;\n    this.dispatch(\"row-deleted\", this);\n  }\n  detachModules() {\n    this.dispatch(\"row-deleting\", this);\n  }\n  deleteCells() {\n    var cellCount = this.cells.length;\n    for (let i = 0; i < cellCount; i++) {\n      this.cells[0].delete();\n    }\n  }\n  wipe() {\n    this.detachModules();\n    this.deleteCells();\n    if (this.element) {\n      while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n      if (this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n      }\n    }\n    this.element = false;\n    this.modules = {};\n  }\n  isDisplayed() {\n    return this.table.rowManager.getDisplayRows().includes(this);\n  }\n  getPosition() {\n    return this.isDisplayed() ? this.position : false;\n  }\n  setPosition(position) {\n    if (position != this.position) {\n      this.position = position;\n      this.positionWatchers.forEach(callback => {\n        callback(this.position);\n      });\n    }\n  }\n  watchPosition(callback) {\n    this.positionWatchers.push(callback);\n    callback(this.position);\n  }\n  getGroup() {\n    return this.modules.group || false;\n  }\n\n  //////////////// Object Generation /////////////////\n  getComponent() {\n    if (!this.component) {\n      this.component = new RowComponent(this);\n    }\n    return this.component;\n  }\n}\nvar defaultCalculations = {\n  \"avg\": function (values, data, calcParams) {\n    var output = 0,\n      precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n    if (values.length) {\n      output = values.reduce(function (sum, value) {\n        return Number(sum) + Number(value);\n      });\n      output = output / values.length;\n      output = precision !== false ? output.toFixed(precision) : output;\n    }\n    return parseFloat(output).toString();\n  },\n  \"max\": function (values, data, calcParams) {\n    var output = null,\n      precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n    values.forEach(function (value) {\n      value = Number(value);\n      if (value > output || output === null) {\n        output = value;\n      }\n    });\n    return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n  },\n  \"min\": function (values, data, calcParams) {\n    var output = null,\n      precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n    values.forEach(function (value) {\n      value = Number(value);\n      if (value < output || output === null) {\n        output = value;\n      }\n    });\n    return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n  },\n  \"sum\": function (values, data, calcParams) {\n    var output = 0,\n      precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n    if (values.length) {\n      values.forEach(function (value) {\n        value = Number(value);\n        output += !isNaN(value) ? Number(value) : 0;\n      });\n    }\n    return precision !== false ? output.toFixed(precision) : output;\n  },\n  \"concat\": function (values, data, calcParams) {\n    var output = 0;\n    if (values.length) {\n      output = values.reduce(function (sum, value) {\n        return String(sum) + String(value);\n      });\n    }\n    return output;\n  },\n  \"count\": function (values, data, calcParams) {\n    var output = 0;\n    if (values.length) {\n      values.forEach(function (value) {\n        if (value) {\n          output++;\n        }\n      });\n    }\n    return output;\n  }\n};\nclass ColumnCalcs extends Module {\n  constructor(table) {\n    super(table);\n    this.topCalcs = [];\n    this.botCalcs = [];\n    this.genColumn = false;\n    this.topElement = this.createElement();\n    this.botElement = this.createElement();\n    this.topRow = false;\n    this.botRow = false;\n    this.topInitialized = false;\n    this.botInitialized = false;\n    this.blocked = false;\n    this.recalcAfterBlock = false;\n    this.registerTableOption(\"columnCalcs\", true);\n    this.registerColumnOption(\"topCalc\");\n    this.registerColumnOption(\"topCalcParams\");\n    this.registerColumnOption(\"topCalcFormatter\");\n    this.registerColumnOption(\"topCalcFormatterParams\");\n    this.registerColumnOption(\"bottomCalc\");\n    this.registerColumnOption(\"bottomCalcParams\");\n    this.registerColumnOption(\"bottomCalcFormatter\");\n    this.registerColumnOption(\"bottomCalcFormatterParams\");\n  }\n  createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-calcs-holder\");\n    return el;\n  }\n  initialize() {\n    this.genColumn = new Column({\n      field: \"value\"\n    }, this);\n    this.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n    this.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n    this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n    this.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n    this.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n    this.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n    this.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n    this.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n    this.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n    this.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n    this.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n    this.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n    this.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n    this.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n    this.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n    this.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n    this.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n    this.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n    this.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n    this.resizeHolderWidth();\n  }\n  resizeHolderWidth() {\n    this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n  }\n  tableRedraw(force) {\n    this.recalc(this.table.rowManager.activeRows);\n    if (force) {\n      this.redraw();\n    }\n  }\n  blockRedraw() {\n    this.blocked = true;\n    this.recalcAfterBlock = false;\n  }\n  restoreRedraw() {\n    this.blocked = false;\n    if (this.recalcAfterBlock) {\n      this.recalcAfterBlock = false;\n      this.recalcActiveRowsRefresh();\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n  userRecalc() {\n    this.recalc(this.table.rowManager.activeRows);\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  blockCheck() {\n    if (this.blocked) {\n      this.recalcAfterBlock = true;\n    }\n    return this.blocked;\n  }\n  visibleRows(viewable, rows) {\n    if (this.topRow) {\n      rows.unshift(this.topRow);\n    }\n    if (this.botRow) {\n      rows.push(this.botRow);\n    }\n    return rows;\n  }\n  rowsUpdated(row) {\n    if (this.table.options.groupBy) {\n      this.recalcRowGroup(row);\n    } else {\n      this.recalcActiveRows();\n    }\n  }\n  recalcActiveRowsRefresh() {\n    if (this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree) {\n      this.recalcAll();\n    } else {\n      this.recalcActiveRows();\n    }\n  }\n  recalcActiveRows() {\n    this.recalc(this.table.rowManager.activeRows);\n  }\n  cellValueChanged(cell) {\n    if (cell.column.definition.topCalc || cell.column.definition.bottomCalc) {\n      if (this.table.options.groupBy) {\n        if (this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\") {\n          this.recalcActiveRows();\n        }\n        if (this.table.options.columnCalcs != \"table\") {\n          this.recalcRowGroup(cell.row);\n        }\n      } else {\n        this.recalcActiveRows();\n      }\n    }\n  }\n  initializeColumnCheck(column) {\n    if (column.definition.topCalc || column.definition.bottomCalc) {\n      this.initializeColumn(column);\n    }\n  }\n\n  //initialize column calcs\n  initializeColumn(column) {\n    var def = column.definition;\n    var config = {\n      topCalcParams: def.topCalcParams || {},\n      botCalcParams: def.bottomCalcParams || {}\n    };\n    if (def.topCalc) {\n      switch (typeof def.topCalc) {\n        case \"string\":\n          if (ColumnCalcs.calculations[def.topCalc]) {\n            config.topCalc = ColumnCalcs.calculations[def.topCalc];\n          } else {\n            console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n          }\n          break;\n        case \"function\":\n          config.topCalc = def.topCalc;\n          break;\n      }\n      if (config.topCalc) {\n        column.modules.columnCalcs = config;\n        this.topCalcs.push(column);\n        if (this.table.options.columnCalcs != \"group\") {\n          this.initializeTopRow();\n        }\n      }\n    }\n    if (def.bottomCalc) {\n      switch (typeof def.bottomCalc) {\n        case \"string\":\n          if (ColumnCalcs.calculations[def.bottomCalc]) {\n            config.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n          } else {\n            console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n          }\n          break;\n        case \"function\":\n          config.botCalc = def.bottomCalc;\n          break;\n      }\n      if (config.botCalc) {\n        column.modules.columnCalcs = config;\n        this.botCalcs.push(column);\n        if (this.table.options.columnCalcs != \"group\") {\n          this.initializeBottomRow();\n        }\n      }\n    }\n  }\n\n  //dummy functions to handle being mock column manager\n  registerColumnField() {}\n  removeCalcs() {\n    var changed = false;\n    if (this.topInitialized) {\n      this.topInitialized = false;\n      this.topElement.parentNode.removeChild(this.topElement);\n      changed = true;\n    }\n    if (this.botInitialized) {\n      this.botInitialized = false;\n      this.footerRemove(this.botElement);\n      changed = true;\n    }\n    if (changed) {\n      this.table.rowManager.adjustTableSize();\n    }\n  }\n  reinitializeCalcs() {\n    if (this.topCalcs.length) {\n      this.initializeTopRow();\n    }\n    if (this.botCalcs.length) {\n      this.initializeBottomRow();\n    }\n  }\n  initializeTopRow() {\n    if (!this.topInitialized) {\n      this.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n      this.topInitialized = true;\n    }\n  }\n  initializeBottomRow() {\n    if (!this.botInitialized) {\n      this.footerPrepend(this.botElement);\n      this.botInitialized = true;\n    }\n  }\n  scrollHorizontal(left) {\n    if (this.botInitialized && this.botRow) {\n      this.botElement.scrollLeft = left;\n    }\n  }\n  recalc(rows) {\n    var data, row;\n    if (!this.blockCheck()) {\n      if (this.topInitialized || this.botInitialized) {\n        data = this.rowsToData(rows);\n        if (this.topInitialized) {\n          if (this.topRow) {\n            this.topRow.deleteCells();\n          }\n          row = this.generateRow(\"top\", data);\n          this.topRow = row;\n          while (this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n          this.topElement.appendChild(row.getElement());\n          row.initialize(true);\n        }\n        if (this.botInitialized) {\n          if (this.botRow) {\n            this.botRow.deleteCells();\n          }\n          row = this.generateRow(\"bottom\", data);\n          this.botRow = row;\n          while (this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n          this.botElement.appendChild(row.getElement());\n          row.initialize(true);\n        }\n        this.table.rowManager.adjustTableSize();\n\n        //set resizable handles\n        if (this.table.modExists(\"frozenColumns\")) {\n          this.table.modules.frozenColumns.layout();\n        }\n      }\n    }\n  }\n  recalcRowGroup(row) {\n    this.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n  }\n  recalcAll() {\n    if (this.topCalcs.length || this.botCalcs.length) {\n      if (this.table.options.columnCalcs !== \"group\") {\n        this.recalcActiveRows();\n      }\n      if (this.table.options.groupBy && this.table.options.columnCalcs !== \"table\") {\n        var groups = this.table.modules.groupRows.getChildGroups();\n        groups.forEach(group => {\n          this.recalcGroup(group);\n        });\n      }\n    }\n  }\n  recalcGroup(group) {\n    var data, rowData;\n    if (!this.blockCheck()) {\n      if (group) {\n        if (group.calcs) {\n          if (group.calcs.bottom) {\n            data = this.rowsToData(group.rows);\n            rowData = this.generateRowData(\"bottom\", data);\n            group.calcs.bottom.updateData(rowData);\n            group.calcs.bottom.reinitialize();\n          }\n          if (group.calcs.top) {\n            data = this.rowsToData(group.rows);\n            rowData = this.generateRowData(\"top\", data);\n            group.calcs.top.updateData(rowData);\n            group.calcs.top.reinitialize();\n          }\n        }\n      }\n    }\n  }\n\n  //generate top stats row\n  generateTopRow(rows) {\n    return this.generateRow(\"top\", this.rowsToData(rows));\n  }\n  //generate bottom stats row\n  generateBottomRow(rows) {\n    return this.generateRow(\"bottom\", this.rowsToData(rows));\n  }\n  rowsToData(rows) {\n    var data = [];\n    rows.forEach(row => {\n      data.push(row.getData());\n      if (this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs) {\n        if (row.modules.dataTree && row.modules.dataTree.open) {\n          var children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\n          data = data.concat(children);\n        }\n      }\n    });\n    return data;\n  }\n\n  //generate stats row\n  generateRow(pos, data) {\n    var rowData = this.generateRowData(pos, data),\n      row;\n    if (this.table.modExists(\"mutator\")) {\n      this.table.modules.mutator.disable();\n    }\n    row = new Row(rowData, this, \"calc\");\n    if (this.table.modExists(\"mutator\")) {\n      this.table.modules.mutator.enable();\n    }\n    row.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n    row.component = false;\n    row.getComponent = () => {\n      if (!row.component) {\n        row.component = new CalcComponent(row);\n      }\n      return row.component;\n    };\n    row.generateCells = () => {\n      var cells = [];\n      this.table.columnManager.columnsByIndex.forEach(column => {\n        //set field name of mock column\n        this.genColumn.setField(column.getField());\n        this.genColumn.hozAlign = column.hozAlign;\n        if (column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")) {\n          this.genColumn.modules.format = {\n            formatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n            params: column.definition[pos + \"CalcFormatterParams\"] || {}\n          };\n        } else {\n          this.genColumn.modules.format = {\n            formatter: this.table.modules.format.getFormatter(\"plaintext\"),\n            params: {}\n          };\n        }\n\n        //ensure css class definition is replicated to calculation cell\n        this.genColumn.definition.cssClass = column.definition.cssClass;\n\n        //generate cell and assign to correct column\n        var cell = new Cell(this.genColumn, row);\n        cell.getElement();\n        cell.column = column;\n        cell.setWidth();\n        column.cells.push(cell);\n        cells.push(cell);\n        if (!column.visible) {\n          cell.hide();\n        }\n      });\n      row.cells = cells;\n    };\n    return row;\n  }\n\n  //generate stats row\n  generateRowData(pos, data) {\n    var rowData = {},\n      calcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n      type = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n      params,\n      paramKey;\n    calcs.forEach(function (column) {\n      var values = [];\n      if (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\n        data.forEach(function (item) {\n          values.push(column.getFieldValue(item));\n        });\n        paramKey = type + \"Params\";\n        params = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n        column.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n      }\n    });\n    return rowData;\n  }\n  hasTopCalcs() {\n    return !!this.topCalcs.length;\n  }\n  hasBottomCalcs() {\n    return !!this.botCalcs.length;\n  }\n\n  //handle table redraw\n  redraw() {\n    if (this.topRow) {\n      this.topRow.normalizeHeight(true);\n    }\n    if (this.botRow) {\n      this.botRow.normalizeHeight(true);\n    }\n  }\n\n  //return the calculated\n  getResults() {\n    var results = {},\n      groups;\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      groups = this.table.modules.groupRows.getGroups(true);\n      groups.forEach(group => {\n        results[group.getKey()] = this.getGroupResults(group);\n      });\n    } else {\n      results = {\n        top: this.topRow ? this.topRow.getData() : {},\n        bottom: this.botRow ? this.botRow.getData() : {}\n      };\n    }\n    return results;\n  }\n\n  //get results from a group\n  getGroupResults(group) {\n    var groupObj = group._getSelf(),\n      subGroups = group.getSubGroups(),\n      subGroupResults = {},\n      results = {};\n    subGroups.forEach(subgroup => {\n      subGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n    });\n    results = {\n      top: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n      bottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n      groups: subGroupResults\n    };\n    return results;\n  }\n  adjustForScrollbar(width) {\n    if (this.botRow) {\n      if (this.table.rtl) {\n        this.botElement.style.paddingLeft = width + \"px\";\n      } else {\n        this.botElement.style.paddingRight = width + \"px\";\n      }\n    }\n  }\n}\nColumnCalcs.moduleName = \"columnCalcs\";\n\n//load defaults\nColumnCalcs.calculations = defaultCalculations;\nclass DataTree extends Module {\n  constructor(table) {\n    super(table);\n    this.indent = 10;\n    this.field = \"\";\n    this.collapseEl = null;\n    this.expandEl = null;\n    this.branchEl = null;\n    this.elementField = false;\n    this.startOpen = function () {};\n    this.registerTableOption(\"dataTree\", false); //enable data tree\n    this.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n    this.registerTableOption(\"dataTreeSort\", true); //sort child rows\n    this.registerTableOption(\"dataTreeElementColumn\", false);\n    this.registerTableOption(\"dataTreeBranchElement\", true); //show data tree branch element\n    this.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n    this.registerTableOption(\"dataTreeChildField\", \"_children\"); //data tre column field to look for child rows\n    this.registerTableOption(\"dataTreeCollapseElement\", false); //data tree row collapse element\n    this.registerTableOption(\"dataTreeExpandElement\", false); //data tree row expand element\n    this.registerTableOption(\"dataTreeStartExpanded\", false);\n    this.registerTableOption(\"dataTreeChildColumnCalcs\", false); //include visible data tree rows in column calculations\n    this.registerTableOption(\"dataTreeSelectPropagate\", false); //selecting a parent row selects its children\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n    this.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n    this.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n    this.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n    this.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n    this.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n    this.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n  }\n  initialize() {\n    if (this.table.options.dataTree) {\n      var dummyEl = null,\n        options = this.table.options;\n      this.field = options.dataTreeChildField;\n      this.indent = options.dataTreeChildIndent;\n      if (this.options(\"movableRows\")) {\n        console.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n      }\n      if (options.dataTreeBranchElement) {\n        if (options.dataTreeBranchElement === true) {\n          this.branchEl = document.createElement(\"div\");\n          this.branchEl.classList.add(\"tabulator-data-tree-branch\");\n        } else {\n          if (typeof options.dataTreeBranchElement === \"string\") {\n            dummyEl = document.createElement(\"div\");\n            dummyEl.innerHTML = options.dataTreeBranchElement;\n            this.branchEl = dummyEl.firstChild;\n          } else {\n            this.branchEl = options.dataTreeBranchElement;\n          }\n        }\n      }\n      if (options.dataTreeCollapseElement) {\n        if (typeof options.dataTreeCollapseElement === \"string\") {\n          dummyEl = document.createElement(\"div\");\n          dummyEl.innerHTML = options.dataTreeCollapseElement;\n          this.collapseEl = dummyEl.firstChild;\n        } else {\n          this.collapseEl = options.dataTreeCollapseElement;\n        }\n      } else {\n        this.collapseEl = document.createElement(\"div\");\n        this.collapseEl.classList.add(\"tabulator-data-tree-control\");\n        this.collapseEl.tabIndex = 0;\n        this.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n      }\n      if (options.dataTreeExpandElement) {\n        if (typeof options.dataTreeExpandElement === \"string\") {\n          dummyEl = document.createElement(\"div\");\n          dummyEl.innerHTML = options.dataTreeExpandElement;\n          this.expandEl = dummyEl.firstChild;\n        } else {\n          this.expandEl = options.dataTreeExpandElement;\n        }\n      } else {\n        this.expandEl = document.createElement(\"div\");\n        this.expandEl.classList.add(\"tabulator-data-tree-control\");\n        this.expandEl.tabIndex = 0;\n        this.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n      }\n      switch (typeof options.dataTreeStartExpanded) {\n        case \"boolean\":\n          this.startOpen = function (row, index) {\n            return options.dataTreeStartExpanded;\n          };\n          break;\n        case \"function\":\n          this.startOpen = options.dataTreeStartExpanded;\n          break;\n        default:\n          this.startOpen = function (row, index) {\n            return options.dataTreeStartExpanded[index];\n          };\n          break;\n      }\n      this.subscribe(\"row-init\", this.initializeRow.bind(this));\n      this.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n      this.subscribe(\"row-deleted\", this.rowDelete.bind(this), 0);\n      this.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n      this.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n      this.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n      this.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n      this.subscribe(\"table-built\", this.initializeElementField.bind(this));\n      this.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n      this.registerDisplayHandler(this.getRows.bind(this), 30);\n    }\n  }\n  tableRedrawing(force) {\n    var rows;\n    if (force) {\n      rows = this.table.rowManager.getRows();\n      rows.forEach(row => {\n        this.reinitializeRowChildren(row);\n      });\n    }\n  }\n  initializeElementField() {\n    var firstCol = this.table.columnManager.getFirstVisibleColumn();\n    this.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n  }\n  getRowChildren(row) {\n    return this.getTreeChildren(row, true);\n  }\n  columnMoving() {\n    var rows = [];\n    this.table.rowManager.rows.forEach(row => {\n      rows = rows.concat(this.getTreeChildren(row, false, true));\n    });\n    return rows;\n  }\n  rowDataChanged(row, visible, updatedData) {\n    if (this.redrawNeeded(updatedData)) {\n      this.initializeRow(row);\n      if (visible) {\n        this.layoutRow(row);\n        this.refreshData(true);\n      }\n    }\n  }\n  cellValueChanged(cell) {\n    var field = cell.column.getField();\n    if (field === this.elementField) {\n      this.layoutRow(cell.row);\n    }\n  }\n  initializeRow(row) {\n    var childArray = row.getData()[this.field];\n    var isArray = Array.isArray(childArray);\n    var children = isArray || !isArray && typeof childArray === \"object\" && childArray !== null;\n    if (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\n      row.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n    }\n    if (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\n      row.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n    }\n    row.modules.dataTree = {\n      index: row.modules.dataTree ? row.modules.dataTree.index : 0,\n      open: children ? row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0) : false,\n      controlEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n      branchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n      parent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n      children: children\n    };\n  }\n  reinitializeRowChildren(row) {\n    var children = this.getTreeChildren(row, false, true);\n    children.forEach(function (child) {\n      child.reinitialize(true);\n    });\n  }\n  layoutRow(row) {\n    var cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n      el = cell.getElement(),\n      config = row.modules.dataTree;\n    if (config.branchEl) {\n      if (config.branchEl.parentNode) {\n        config.branchEl.parentNode.removeChild(config.branchEl);\n      }\n      config.branchEl = false;\n    }\n    if (config.controlEl) {\n      if (config.controlEl.parentNode) {\n        config.controlEl.parentNode.removeChild(config.controlEl);\n      }\n      config.controlEl = false;\n    }\n    this.generateControlElement(row, el);\n    row.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n    if (config.index) {\n      if (this.branchEl) {\n        config.branchEl = this.branchEl.cloneNode(true);\n        el.insertBefore(config.branchEl, el.firstChild);\n        if (this.table.rtl) {\n          config.branchEl.style.marginRight = (config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1) + config.index * this.indent + \"px\";\n        } else {\n          config.branchEl.style.marginLeft = (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) + config.index * this.indent + \"px\";\n        }\n      } else {\n        if (this.table.rtl) {\n          el.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + config.index * this.indent + \"px\";\n        } else {\n          el.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + config.index * this.indent + \"px\";\n        }\n      }\n    }\n  }\n  generateControlElement(row, el) {\n    var config = row.modules.dataTree,\n      oldControl = config.controlEl;\n    el = el || row.getCells()[0].getElement();\n    if (config.children !== false) {\n      if (config.open) {\n        config.controlEl = this.collapseEl.cloneNode(true);\n        config.controlEl.addEventListener(\"click\", e => {\n          e.stopPropagation();\n          this.collapseRow(row);\n        });\n      } else {\n        config.controlEl = this.expandEl.cloneNode(true);\n        config.controlEl.addEventListener(\"click\", e => {\n          e.stopPropagation();\n          this.expandRow(row);\n        });\n      }\n      config.controlEl.addEventListener(\"mousedown\", e => {\n        e.stopPropagation();\n      });\n      if (oldControl && oldControl.parentNode === el) {\n        oldControl.parentNode.replaceChild(config.controlEl, oldControl);\n      } else {\n        el.insertBefore(config.controlEl, el.firstChild);\n      }\n    }\n  }\n  getRows(rows) {\n    var output = [];\n    rows.forEach((row, i) => {\n      var config, children;\n      output.push(row);\n      if (row instanceof Row) {\n        row.create();\n        config = row.modules.dataTree.children;\n        if (!config.index && config.children !== false) {\n          children = this.getChildren(row);\n          children.forEach(child => {\n            child.create();\n            output.push(child);\n          });\n        }\n      }\n    });\n    return output;\n  }\n  getChildren(row, allChildren) {\n    var config = row.modules.dataTree,\n      children = [],\n      output = [];\n    if (config.children !== false && (config.open || allChildren)) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n      if (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter) {\n        children = this.table.modules.filter.filter(config.children);\n      } else {\n        children = config.children;\n      }\n      if (this.table.modExists(\"sort\") && this.table.options.dataTreeSort) {\n        this.table.modules.sort.sort(children);\n      }\n      children.forEach(child => {\n        output.push(child);\n        var subChildren = this.getChildren(child);\n        subChildren.forEach(sub => {\n          output.push(sub);\n        });\n      });\n    }\n    return output;\n  }\n  generateChildren(row) {\n    var children = [];\n    var childArray = row.getData()[this.field];\n    if (!Array.isArray(childArray)) {\n      childArray = [childArray];\n    }\n    childArray.forEach(childData => {\n      var childRow = new Row(childData || {}, this.table.rowManager);\n      childRow.create();\n      childRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n      childRow.modules.dataTree.parent = row;\n      if (childRow.modules.dataTree.children) {\n        childRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n      }\n      children.push(childRow);\n    });\n    return children;\n  }\n  expandRow(row, silent) {\n    var config = row.modules.dataTree;\n    if (config.children !== false) {\n      config.open = true;\n      row.reinitialize();\n      this.refreshData(true);\n      this.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n    }\n  }\n  collapseRow(row) {\n    var config = row.modules.dataTree;\n    if (config.children !== false) {\n      config.open = false;\n      row.reinitialize();\n      this.refreshData(true);\n      this.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n    }\n  }\n  toggleRow(row) {\n    var config = row.modules.dataTree;\n    if (config.children !== false) {\n      if (config.open) {\n        this.collapseRow(row);\n      } else {\n        this.expandRow(row);\n      }\n    }\n  }\n  isRowExpanded(row) {\n    return row.modules.dataTree.open;\n  }\n  getTreeParent(row) {\n    return row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n  }\n  getTreeParentRoot(row) {\n    return row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n  }\n  getFilteredTreeChildren(row) {\n    var config = row.modules.dataTree,\n      output = [],\n      children;\n    if (config.children) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n      if (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter) {\n        children = this.table.modules.filter.filter(config.children);\n      } else {\n        children = config.children;\n      }\n      children.forEach(childRow => {\n        if (childRow instanceof Row) {\n          output.push(childRow);\n        }\n      });\n    }\n    return output;\n  }\n  rowDelete(row) {\n    var parent = row.modules.dataTree.parent,\n      childIndex;\n    if (parent) {\n      childIndex = this.findChildIndex(row, parent);\n      if (childIndex !== false) {\n        parent.data[this.field].splice(childIndex, 1);\n      }\n      if (!parent.data[this.field].length) {\n        delete parent.data[this.field];\n      }\n      this.initializeRow(parent);\n      this.layoutRow(parent);\n    }\n    this.refreshData(true);\n  }\n  addTreeChildRow(row, data, top, index) {\n    var childIndex = false;\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    if (!Array.isArray(row.data[this.field])) {\n      row.data[this.field] = [];\n      row.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n    }\n    if (typeof index !== \"undefined\") {\n      childIndex = this.findChildIndex(index, row);\n      if (childIndex !== false) {\n        row.data[this.field].splice(top ? childIndex : childIndex + 1, 0, data);\n      }\n    }\n    if (childIndex === false) {\n      if (top) {\n        row.data[this.field].unshift(data);\n      } else {\n        row.data[this.field].push(data);\n      }\n    }\n    this.initializeRow(row);\n    this.layoutRow(row);\n    this.refreshData(true);\n  }\n  findChildIndex(subject, parent) {\n    var match = false;\n    if (typeof subject == \"object\") {\n      if (subject instanceof Row) {\n        //subject is row element\n        match = subject.data;\n      } else if (subject instanceof RowComponent) {\n        //subject is public row component\n        match = subject._getSelf().data;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        if (parent.modules.dataTree) {\n          match = parent.modules.dataTree.children.find(childRow => {\n            return childRow instanceof Row ? childRow.element === subject : false;\n          });\n          if (match) {\n            match = match.data;\n          }\n        }\n      } else if (subject === null) {\n        match = false;\n      }\n    } else if (typeof subject == \"undefined\") {\n      match = false;\n    } else {\n      //subject should be treated as the index of the row\n      match = parent.data[this.field].find(row => {\n        return row.data[this.table.options.index] == subject;\n      });\n    }\n    if (match) {\n      if (Array.isArray(parent.data[this.field])) {\n        match = parent.data[this.field].indexOf(match);\n      }\n      if (match == -1) {\n        match = false;\n      }\n    }\n\n    //catch all for any other type of input\n\n    return match;\n  }\n  getTreeChildren(row, component, recurse) {\n    var config = row.modules.dataTree,\n      output = [];\n    if (config.children) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n      config.children.forEach(childRow => {\n        if (childRow instanceof Row) {\n          output.push(component ? childRow.getComponent() : childRow);\n          if (recurse) {\n            output = output.concat(this.getTreeChildren(childRow, component, recurse));\n          }\n        }\n      });\n    }\n    return output;\n  }\n  getChildField() {\n    return this.field;\n  }\n  redrawNeeded(data) {\n    return (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n  }\n}\nDataTree.moduleName = \"dataTree\";\nfunction csv(list) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let setFileContents = arguments.length > 2 ? arguments[2] : undefined;\n  var delimiter = options.delimiter ? options.delimiter : \",\",\n    fileContents = [],\n    headers = [];\n  list.forEach(row => {\n    var item = [];\n    switch (row.type) {\n      case \"group\":\n        console.warn(\"Download Warning - CSV downloader cannot process row groups\");\n        break;\n      case \"calc\":\n        console.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n        break;\n      case \"header\":\n        row.columns.forEach((col, i) => {\n          if (col && col.depth === 1) {\n            headers[i] = typeof col.value == \"undefined\" || col.value === null ? \"\" : '\"' + String(col.value).split('\"').join('\"\"') + '\"';\n          }\n        });\n        break;\n      case \"row\":\n        row.columns.forEach(col => {\n          if (col) {\n            switch (typeof col.value) {\n              case \"object\":\n                col.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n                break;\n              case \"undefined\":\n                col.value = \"\";\n                break;\n            }\n            item.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n          }\n        });\n        fileContents.push(item.join(delimiter));\n        break;\n    }\n  });\n  if (headers.length) {\n    fileContents.unshift(headers.join(delimiter));\n  }\n  fileContents = fileContents.join(\"\\n\");\n  if (options.bom) {\n    fileContents = \"\\ufeff\" + fileContents;\n  }\n  setFileContents(fileContents, \"text/csv\");\n}\nfunction json(list, options, setFileContents) {\n  var fileContents = [];\n  list.forEach(row => {\n    var item = {};\n    switch (row.type) {\n      case \"header\":\n        break;\n      case \"group\":\n        console.warn(\"Download Warning - JSON downloader cannot process row groups\");\n        break;\n      case \"calc\":\n        console.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n        break;\n      case \"row\":\n        row.columns.forEach(col => {\n          if (col) {\n            item[col.component.getTitleDownload() || col.component.getField()] = col.value;\n          }\n        });\n        fileContents.push(item);\n        break;\n    }\n  });\n  fileContents = JSON.stringify(fileContents, null, '\\t');\n  setFileContents(fileContents, \"application/json\");\n}\nfunction pdf(list) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let setFileContents = arguments.length > 2 ? arguments[2] : undefined;\n  var header = [],\n    body = [],\n    autoTableParams = {},\n    rowGroupStyles = options.rowGroupStyles || {\n      fontStyle: \"bold\",\n      fontSize: 12,\n      cellPadding: 6,\n      fillColor: 220\n    },\n    rowCalcStyles = options.rowCalcStyles || {\n      fontStyle: \"bold\",\n      fontSize: 10,\n      cellPadding: 4,\n      fillColor: 232\n    },\n    jsPDFParams = options.jsPDF || {},\n    title = options.title ? options.title : \"\";\n  if (!jsPDFParams.orientation) {\n    jsPDFParams.orientation = options.orientation || \"landscape\";\n  }\n  if (!jsPDFParams.unit) {\n    jsPDFParams.unit = \"pt\";\n  }\n\n  //parse row list\n  list.forEach(row => {\n    switch (row.type) {\n      case \"header\":\n        header.push(parseRow(row));\n        break;\n      case \"group\":\n        body.push(parseRow(row, rowGroupStyles));\n        break;\n      case \"calc\":\n        body.push(parseRow(row, rowCalcStyles));\n        break;\n      case \"row\":\n        body.push(parseRow(row));\n        break;\n    }\n  });\n  function parseRow(row, styles) {\n    var rowData = [];\n    row.columns.forEach(col => {\n      var cell;\n      if (col) {\n        switch (typeof col.value) {\n          case \"object\":\n            col.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n            break;\n          case \"undefined\":\n            col.value = \"\";\n            break;\n        }\n        cell = {\n          content: col.value,\n          colSpan: col.width,\n          rowSpan: col.height\n        };\n        if (styles) {\n          cell.styles = styles;\n        }\n        rowData.push(cell);\n      }\n    });\n    return rowData;\n  }\n\n  //configure PDF\n  var doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n  if (options.autoTable) {\n    if (typeof options.autoTable === \"function\") {\n      autoTableParams = options.autoTable(doc) || {};\n    } else {\n      autoTableParams = options.autoTable;\n    }\n  }\n  if (title) {\n    autoTableParams.didDrawPage = function (data) {\n      doc.text(title, 40, 30);\n    };\n  }\n  autoTableParams.head = header;\n  autoTableParams.body = body;\n  doc.autoTable(autoTableParams);\n  if (options.documentProcessing) {\n    options.documentProcessing(doc);\n  }\n  setFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\nfunction xlsx(list, options, setFileContents) {\n  var self = this,\n    sheetName = options.sheetName || \"Sheet1\",\n    workbook = XLSX.utils.book_new(),\n    tableFeatures = new CoreFeature(this),\n    compression = 'compress' in options ? options.compress : true,\n    output;\n  workbook.SheetNames = [];\n  workbook.Sheets = {};\n  function generateSheet() {\n    var rows = [],\n      merges = [],\n      worksheet = {},\n      range = {\n        s: {\n          c: 0,\n          r: 0\n        },\n        e: {\n          c: list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0,\n          r: list.length\n        }\n      };\n\n    //parse row list\n    list.forEach((row, i) => {\n      var rowData = [];\n      row.columns.forEach(function (col, j) {\n        if (col) {\n          rowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n          if (col.width > 1 || col.height > -1) {\n            if (col.height > 1 || col.width > 1) {\n              merges.push({\n                s: {\n                  r: i,\n                  c: j\n                },\n                e: {\n                  r: i + col.height - 1,\n                  c: j + col.width - 1\n                }\n              });\n            }\n          }\n        } else {\n          rowData.push(\"\");\n        }\n      });\n      rows.push(rowData);\n    });\n\n    //convert rows to worksheet\n    XLSX.utils.sheet_add_aoa(worksheet, rows);\n    worksheet['!ref'] = XLSX.utils.encode_range(range);\n    if (merges.length) {\n      worksheet[\"!merges\"] = merges;\n    }\n    return worksheet;\n  }\n  if (options.sheetOnly) {\n    setFileContents(generateSheet());\n    return;\n  }\n  if (options.sheets) {\n    for (var sheet in options.sheets) {\n      if (options.sheets[sheet] === true) {\n        workbook.SheetNames.push(sheet);\n        workbook.Sheets[sheet] = generateSheet();\n      } else {\n        workbook.SheetNames.push(sheet);\n        tableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\", {\n          type: \"xlsx\",\n          options: {\n            sheetOnly: true\n          },\n          active: self.active,\n          intercept: function (data) {\n            workbook.Sheets[sheet] = data;\n          }\n        });\n      }\n    }\n  } else {\n    workbook.SheetNames.push(sheetName);\n    workbook.Sheets[sheetName] = generateSheet();\n  }\n  if (options.documentProcessing) {\n    workbook = options.documentProcessing(workbook);\n  }\n\n  //convert workbook to binary array\n  function s2ab(s) {\n    var buf = new ArrayBuffer(s.length);\n    var view = new Uint8Array(buf);\n    for (var i = 0; i != s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n    return buf;\n  }\n  output = XLSX.write(workbook, {\n    bookType: 'xlsx',\n    bookSST: true,\n    type: 'binary',\n    compression\n  });\n  setFileContents(s2ab(output), \"application/octet-stream\");\n}\nfunction html(list, options, setFileContents) {\n  if (this.modExists(\"export\", true)) {\n    setFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n  }\n}\nfunction jsonLines(list, options, setFileContents) {\n  const fileContents = [];\n  list.forEach(row => {\n    const item = {};\n    switch (row.type) {\n      case \"header\":\n        break;\n      case \"group\":\n        console.warn(\"Download Warning - JSON downloader cannot process row groups\");\n        break;\n      case \"calc\":\n        console.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n        break;\n      case \"row\":\n        row.columns.forEach(col => {\n          if (col) {\n            item[col.component.getTitleDownload() || col.component.getField()] = col.value;\n          }\n        });\n        fileContents.push(JSON.stringify(item));\n        break;\n    }\n  });\n  setFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}\nvar defaultDownloaders = {\n  csv: csv,\n  json: json,\n  jsonLines: jsonLines,\n  pdf: pdf,\n  xlsx: xlsx,\n  html: html\n};\nclass Download extends Module {\n  constructor(table) {\n    super(table);\n    this.registerTableOption(\"downloadEncoder\", function (data, mimeType) {\n      return new Blob([data], {\n        type: mimeType\n      });\n    }); //function to manipulate download data\n    this.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\n    this.registerTableOption(\"downloadConfig\", {}); //download config\n    this.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n    this.registerColumnOption(\"download\");\n    this.registerColumnOption(\"titleDownload\");\n  }\n  initialize() {\n    this.deprecatedOptionsCheck();\n    this.registerTableFunction(\"download\", this.download.bind(this));\n    this.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n  }\n  deprecatedOptionsCheck() {\n    this.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  downloadToTab(type, filename, options, active) {\n    this.download(type, filename, options, active, true);\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  //trigger file download\n  download(type, filename, options, range, interceptCallback) {\n    var downloadFunc = false;\n    function buildLink(data, mime) {\n      if (interceptCallback) {\n        if (interceptCallback === true) {\n          this.triggerDownload(data, mime, type, filename, true);\n        } else {\n          interceptCallback(data);\n        }\n      } else {\n        this.triggerDownload(data, mime, type, filename);\n      }\n    }\n    if (typeof type == \"function\") {\n      downloadFunc = type;\n    } else {\n      if (Download.downloaders[type]) {\n        downloadFunc = Download.downloaders[type];\n      } else {\n        console.warn(\"Download Error - No such download type found: \", type);\n      }\n    }\n    if (downloadFunc) {\n      var list = this.generateExportList(range);\n      downloadFunc.call(this.table, list, options || {}, buildLink.bind(this));\n    }\n  }\n  generateExportList(range) {\n    var list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n    //assign group header formatter\n    var groupHeader = this.table.options.groupHeaderDownload;\n    if (groupHeader && !Array.isArray(groupHeader)) {\n      groupHeader = [groupHeader];\n    }\n    list.forEach(row => {\n      var group;\n      if (row.type === \"group\") {\n        group = row.columns[0];\n        if (groupHeader && groupHeader[row.indent]) {\n          group.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n        }\n      }\n    });\n    return list;\n  }\n  triggerDownload(data, mime, type, filename, newTab) {\n    var element = document.createElement('a'),\n      blob = this.table.options.downloadEncoder(data, mime);\n    if (blob) {\n      if (newTab) {\n        window.open(window.URL.createObjectURL(blob));\n      } else {\n        filename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n        if (navigator.msSaveOrOpenBlob) {\n          navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          element.setAttribute('href', window.URL.createObjectURL(blob));\n\n          //set file title\n          element.setAttribute('download', filename);\n\n          //trigger download\n          element.style.display = 'none';\n          document.body.appendChild(element);\n          element.click();\n\n          //remove temporary link element\n          document.body.removeChild(element);\n        }\n      }\n      this.dispatchExternal(\"downloadComplete\");\n    }\n  }\n  commsReceived(table, action, data) {\n    switch (action) {\n      case \"intercept\":\n        this.download(data.type, \"\", data.options, data.active, data.intercept);\n        break;\n    }\n  }\n}\nDownload.moduleName = \"download\";\n\n//load defaults\nDownload.downloaders = defaultDownloaders;\nfunction maskInput(el, options) {\n  var mask = options.mask,\n    maskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n    maskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n    maskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n  function fillSymbols(index) {\n    var symbol = mask[index];\n    if (typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\n      el.value = el.value + \"\" + symbol;\n      fillSymbols(index + 1);\n    }\n  }\n  el.addEventListener(\"keydown\", e => {\n    var index = el.value.length,\n      char = e.key;\n    if (e.keyCode > 46 && !e.ctrlKey && !e.metaKey) {\n      if (index >= mask.length) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      } else {\n        switch (mask[index]) {\n          case maskLetter:\n            if (char.toUpperCase() == char.toLowerCase()) {\n              e.preventDefault();\n              e.stopPropagation();\n              return false;\n            }\n            break;\n          case maskNumber:\n            if (isNaN(char)) {\n              e.preventDefault();\n              e.stopPropagation();\n              return false;\n            }\n            break;\n          case maskWildcard:\n            break;\n          default:\n            if (char !== mask[index]) {\n              e.preventDefault();\n              e.stopPropagation();\n              return false;\n            }\n        }\n      }\n    }\n    return;\n  });\n  el.addEventListener(\"keyup\", e => {\n    if (e.keyCode > 46) {\n      if (options.maskAutoFill) {\n        fillSymbols(el.value.length);\n      }\n    }\n  });\n  if (!el.placeholder) {\n    el.placeholder = mask;\n  }\n  if (options.maskAutoFill) {\n    fillSymbols(el.value.length);\n  }\n}\n\n//input element\nfunction input(cell, onRendered, success, cancel, editorParams) {\n  //create and style input\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  input.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n  onRendered(function () {\n    if (cell._getSelf) {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange(e) {\n    if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n      if (success(input.value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur or change\n  input.addEventListener(\"change\", onChange);\n  input.addEventListener(\"blur\", onChange);\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      // case 9:\n      case 13:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n    }\n  });\n  if (editorParams.mask) {\n    maskInput(input, editorParams);\n  }\n  return input;\n}\n\n//resizable text area element\nfunction textarea(cell, onRendered, success, cancel, editorParams) {\n  var cellValue = cell.getValue(),\n    vertNav = editorParams.verticalNavigation || \"hybrid\",\n    value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\n    input = document.createElement(\"textarea\"),\n    scrollHeight = 0;\n\n  //create and style input\n  input.style.display = \"block\";\n  input.style.padding = \"2px\";\n  input.style.height = \"100%\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  input.style.whiteSpace = \"pre-wrap\";\n  input.style.resize = \"none\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = value;\n  onRendered(function () {\n    if (cell._getSelf) {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      input.scrollHeight;\n      input.style.height = input.scrollHeight + \"px\";\n      cell.getRow().normalizeHeight();\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange(e) {\n    if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n      if (success(input.value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n\n      setTimeout(function () {\n        cell.getRow().normalizeHeight();\n      }, 300);\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur or change\n  input.addEventListener(\"change\", onChange);\n  input.addEventListener(\"blur\", onChange);\n  input.addEventListener(\"keyup\", function () {\n    input.style.height = \"\";\n    var heightNow = input.scrollHeight;\n    input.style.height = heightNow + \"px\";\n    if (heightNow != scrollHeight) {\n      scrollHeight = heightNow;\n      cell.getRow().normalizeHeight();\n    }\n  });\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 13:\n        if (e.shiftKey && editorParams.shiftEnterSubmit) {\n          onChange();\n        }\n        break;\n      case 27:\n        cancel();\n        break;\n      case 38:\n        //up arrow\n        if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart) {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart !== input.value.length) {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n    }\n  });\n  if (editorParams.mask) {\n    maskInput(input, editorParams);\n  }\n  return input;\n}\n\n//input element with type of number\nfunction number(cell, onRendered, success, cancel, editorParams) {\n  var cellValue = cell.getValue(),\n    vertNav = editorParams.verticalNavigation || \"editor\",\n    input = document.createElement(\"input\");\n  input.setAttribute(\"type\", \"number\");\n  if (typeof editorParams.max != \"undefined\") {\n    input.setAttribute(\"max\", editorParams.max);\n  }\n  if (typeof editorParams.min != \"undefined\") {\n    input.setAttribute(\"min\", editorParams.min);\n  }\n  if (typeof editorParams.step != \"undefined\") {\n    input.setAttribute(\"step\", editorParams.step);\n  }\n\n  //create and style input\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = cellValue;\n  var blurFunc = function (e) {\n    onChange();\n  };\n  onRendered(function () {\n    if (cell._getSelf) {\n      //submit new value on blur\n      input.removeEventListener(\"blur\", blurFunc);\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n\n      //submit new value on blur\n      input.addEventListener(\"blur\", blurFunc);\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange() {\n    var value = input.value;\n    if (!isNaN(value) && value !== \"\") {\n      value = Number(value);\n    }\n    if (value !== cellValue) {\n      if (success(value)) {\n        cellValue = value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 13:\n        // case 9:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 38: //up arrow\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\") {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n    }\n  });\n  if (editorParams.mask) {\n    maskInput(input, editorParams);\n  }\n  return input;\n}\n\n//input element with type of number\nfunction range(cell, onRendered, success, cancel, editorParams) {\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  input.setAttribute(\"type\", \"range\");\n  if (typeof editorParams.max != \"undefined\") {\n    input.setAttribute(\"max\", editorParams.max);\n  }\n  if (typeof editorParams.min != \"undefined\") {\n    input.setAttribute(\"min\", editorParams.min);\n  }\n  if (typeof editorParams.step != \"undefined\") {\n    input.setAttribute(\"step\", editorParams.step);\n  }\n\n  //create and style input\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = cellValue;\n  onRendered(function () {\n    if (cell._getSelf) {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n    }\n  });\n  function onChange() {\n    var value = input.value;\n    if (!isNaN(value) && value !== \"\") {\n      value = Number(value);\n    }\n    if (value != cellValue) {\n      if (success(value)) {\n        cellValue = value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"blur\", function (e) {\n    onChange();\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 13:\n        // case 9:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n    }\n  });\n  return input;\n}\n\n//input element\nfunction date(cell, onRendered, success, cancel, editorParams) {\n  var inputFormat = editorParams.format,\n    vertNav = editorParams.verticalNavigation || \"editor\",\n    DT = inputFormat ? window.DateTime || luxon.DateTime : null;\n\n  //create and style input\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  function convertDate(value) {\n    var newDatetime;\n    if (DT.isDateTime(value)) {\n      newDatetime = value;\n    } else if (inputFormat === \"iso\") {\n      newDatetime = DT.fromISO(String(value));\n    } else {\n      newDatetime = DT.fromFormat(String(value), inputFormat);\n    }\n    return newDatetime.toFormat(\"yyyy-MM-dd\");\n  }\n  input.type = \"date\";\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.max) {\n    input.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n  }\n  if (editorParams.min) {\n    input.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n  }\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  cellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n  if (inputFormat) {\n    if (DT) {\n      cellValue = convertDate(cellValue);\n    } else {\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n    }\n  }\n  input.value = cellValue;\n  onRendered(function () {\n    if (cell._getSelf) {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange() {\n    var value = input.value,\n      luxDate;\n    if ((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\" || value !== cellValue) {\n      if (value && inputFormat) {\n        luxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n        switch (inputFormat) {\n          case true:\n            value = luxDate;\n            break;\n          case \"iso\":\n            value = luxDate.toISO();\n            break;\n          default:\n            value = luxDate.toFormat(inputFormat);\n        }\n      }\n      if (success(value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"blur\", function (e) {\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n      onChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n    }\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      // case 9:\n      case 13:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n      case 38: //up arrow\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\") {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n    }\n  });\n  return input;\n}\n\n//input element\nfunction time(cell, onRendered, success, cancel, editorParams) {\n  var inputFormat = editorParams.format,\n    vertNav = editorParams.verticalNavigation || \"editor\",\n    DT = inputFormat ? window.DateTime || luxon.DateTime : null,\n    newDatetime;\n\n  //create and style input\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  input.type = \"time\";\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  cellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n  if (inputFormat) {\n    if (DT) {\n      if (DT.isDateTime(cellValue)) {\n        newDatetime = cellValue;\n      } else if (inputFormat === \"iso\") {\n        newDatetime = DT.fromISO(String(cellValue));\n      } else {\n        newDatetime = DT.fromFormat(String(cellValue), inputFormat);\n      }\n      cellValue = newDatetime.toFormat(\"hh:mm\");\n    } else {\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n    }\n  }\n  input.value = cellValue;\n  onRendered(function () {\n    if (cell._getSelf) {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange() {\n    var value = input.value,\n      luxTime;\n    if ((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\" || value !== cellValue) {\n      if (value && inputFormat) {\n        luxTime = DT.fromFormat(String(value), \"hh:mm\");\n        switch (inputFormat) {\n          case true:\n            value = luxTime;\n            break;\n          case \"iso\":\n            value = luxTime.toISO();\n            break;\n          default:\n            value = luxTime.toFormat(inputFormat);\n        }\n      }\n      if (success(value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"blur\", function (e) {\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n      onChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n    }\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      // case 9:\n      case 13:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n      case 38: //up arrow\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\") {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n    }\n  });\n  return input;\n}\n\n//input element\nfunction datetime(cell, onRendered, success, cancel, editorParams) {\n  var inputFormat = editorParams.format,\n    vertNav = editorParams.verticalNavigation || \"editor\",\n    DT = inputFormat ? window.DateTime || luxon.DateTime : null,\n    newDatetime;\n\n  //create and style input\n  var cellValue = cell.getValue(),\n    input = document.createElement(\"input\");\n  input.type = \"datetime-local\";\n  input.style.padding = \"4px\";\n  input.style.width = \"100%\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  cellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n  if (inputFormat) {\n    if (DT) {\n      if (DT.isDateTime(cellValue)) {\n        newDatetime = cellValue;\n      } else if (inputFormat === \"iso\") {\n        newDatetime = DT.fromISO(String(cellValue));\n      } else {\n        newDatetime = DT.fromFormat(String(cellValue), inputFormat);\n      }\n      cellValue = newDatetime.toFormat(\"yyyy-MM-dd\") + \"T\" + newDatetime.toFormat(\"hh:mm\");\n    } else {\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n    }\n  }\n  input.value = cellValue;\n  onRendered(function () {\n    if (cell._getSelf) {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      if (editorParams.selectContents) {\n        input.select();\n      }\n    }\n  });\n  function onChange() {\n    var value = input.value,\n      luxDateTime;\n    if ((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\" || value !== cellValue) {\n      if (value && inputFormat) {\n        luxDateTime = DT.fromISO(String(value));\n        switch (inputFormat) {\n          case true:\n            value = luxDateTime;\n            break;\n          case \"iso\":\n            value = luxDateTime.toISO();\n            break;\n          default:\n            value = luxDateTime.toFormat(inputFormat);\n        }\n      }\n      if (success(value)) {\n        cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n      }\n    } else {\n      cancel();\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"blur\", function (e) {\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n      onChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n    }\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      // case 9:\n      case 13:\n        onChange();\n        break;\n      case 27:\n        cancel();\n        break;\n      case 35:\n      case 36:\n        e.stopPropagation();\n        break;\n      case 38: //up arrow\n      case 40:\n        //down arrow\n        if (vertNav == \"editor\") {\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n        }\n        break;\n    }\n  });\n  return input;\n}\nclass Edit {\n  constructor(editor, cell, onRendered, success, cancel, editorParams) {\n    this.edit = editor;\n    this.table = editor.table;\n    this.cell = cell;\n    this.params = this._initializeParams(editorParams);\n    this.data = [];\n    this.displayItems = [];\n    this.currentItems = [];\n    this.focusedItem = null;\n    this.input = this._createInputElement();\n    this.listEl = this._createListElement();\n    this.initialValues = null;\n    this.isFilter = !cell._getSelf;\n    this.filterTimeout = null;\n    this.filtered = false;\n    this.typing = false;\n    this.values = [];\n    this.popup = null;\n    this.listIteration = 0;\n    this.lastAction = \"\";\n    this.filterTerm = \"\";\n    this.blurable = true;\n    this.actions = {\n      success: success,\n      cancel: cancel\n    };\n    this._deprecatedOptionsCheck();\n    this._initializeValue();\n    onRendered(this._onRendered.bind(this));\n  }\n  _deprecatedOptionsCheck() {\n    if (this.params.listItemFormatter) {\n      this.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n    }\n    if (this.params.sortValuesList) {\n      this.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n    }\n    if (this.params.searchFunc) {\n      this.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n    }\n    if (this.params.searchingPlaceholder) {\n      this.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n    }\n  }\n  _initializeValue() {\n    var initialValue = this.cell.getValue();\n    if (typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\") {\n      initialValue = this.params.defaultValue;\n    }\n    this.initialValues = this.params.multiselect ? initialValue : [initialValue];\n    if (this.isFilter) {\n      this.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n      this.headerFilterInitialListGen();\n    }\n  }\n  _onRendered() {\n    var cellEl = this.cell.getElement();\n    function clickStop(e) {\n      e.stopPropagation();\n    }\n    if (!this.isFilter) {\n      this.input.style.height = \"100%\";\n      this.input.focus({\n        preventScroll: true\n      });\n    }\n    cellEl.addEventListener(\"click\", clickStop);\n    setTimeout(() => {\n      cellEl.removeEventListener(\"click\", clickStop);\n    }, 1000);\n    this.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n  }\n  _createListElement() {\n    var listEl = document.createElement(\"div\");\n    listEl.classList.add(\"tabulator-edit-list\");\n    listEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n    listEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n    return listEl;\n  }\n  _setListWidth() {\n    var element = this.isFilter ? this.input : this.cell.getElement();\n    this.listEl.style.minWidth = element.offsetWidth + \"px\";\n    if (this.params.maxWidth) {\n      if (this.params.maxWidth === true) {\n        this.listEl.style.maxWidth = element.offsetWidth + \"px\";\n      } else if (typeof this.params.maxWidth === \"number\") {\n        this.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n      } else {\n        this.listEl.style.maxWidth = this.params.maxWidth;\n      }\n    }\n  }\n  _createInputElement() {\n    var attribs = this.params.elementAttributes;\n    var input = document.createElement(\"input\");\n    input.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n    input.style.padding = \"4px\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n    if (!this.params.autocomplete) {\n      input.style.cursor = \"default\";\n      input.style.caretColor = \"transparent\";\n      // input.readOnly = (this.edit.currentCell != false);\n    }\n\n    if (attribs && typeof attribs == \"object\") {\n      for (let key in attribs) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n        } else {\n          input.setAttribute(key, attribs[key]);\n        }\n      }\n    }\n    if (this.params.mask) {\n      maskInput(input, this.params);\n    }\n    this._bindInputEvents(input);\n    return input;\n  }\n  _initializeParams(params) {\n    var valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n      valueCheck;\n    params = Object.assign({}, params);\n    params.verticalNavigation = params.verticalNavigation || \"editor\";\n    params.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n    params.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n    params.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n    params.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n    valueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n    if (!valueCheck) {\n      console.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n    } else if (valueCheck > 1) {\n      console.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n    }\n    if (params.autocomplete) {\n      if (params.multiselect) {\n        params.multiselect = false;\n        console.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n      }\n    } else {\n      if (params.freetext) {\n        params.freetext = false;\n        console.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n      }\n      if (params.filterFunc) {\n        params.filterFunc = false;\n        console.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n      }\n      if (params.filterRemote) {\n        params.filterRemote = false;\n        console.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n      }\n      if (params.mask) {\n        params.mask = false;\n        console.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n      }\n      if (params.allowEmpty) {\n        params.allowEmpty = false;\n        console.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n      }\n      if (params.listOnEmpty) {\n        params.listOnEmpty = false;\n        console.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n      }\n    }\n    if (params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)) {\n      params.filterRemote = false;\n      console.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n    }\n    return params;\n  }\n  //////////////////////////////////////\n  ////////// Event Handling ////////////\n  //////////////////////////////////////\n\n  _bindInputEvents(input) {\n    input.addEventListener(\"focus\", this._inputFocus.bind(this));\n    input.addEventListener(\"click\", this._inputClick.bind(this));\n    input.addEventListener(\"blur\", this._inputBlur.bind(this));\n    input.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n    input.addEventListener(\"search\", this._inputSearch.bind(this));\n    if (this.params.autocomplete) {\n      input.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n    }\n  }\n  _inputFocus(e) {\n    this.rebuildOptionsList();\n  }\n  _filter() {\n    if (this.params.filterRemote) {\n      clearTimeout(this.filterTimeout);\n      this.filterTimeout = setTimeout(() => {\n        this.rebuildOptionsList();\n      }, this.params.filterDelay);\n    } else {\n      this._filterList();\n    }\n  }\n  _inputClick(e) {\n    e.stopPropagation();\n  }\n  _inputBlur(e) {\n    if (this.blurable) {\n      if (this.popup) {\n        this.popup.hide();\n      } else {\n        this._resolveValue(true);\n      }\n    }\n  }\n  _inputSearch() {\n    this._clearChoices();\n  }\n  _inputKeyDown(e) {\n    switch (e.keyCode) {\n      case 38:\n        //up arrow\n        this._keyUp(e);\n        break;\n      case 40:\n        //down arrow\n        this._keyDown(e);\n        break;\n      case 37: //left arrow\n      case 39:\n        //right arrow\n        this._keySide(e);\n        break;\n      case 13:\n        //enter\n        this._keyEnter();\n        break;\n      case 27:\n        //escape\n        this._keyEsc();\n        break;\n      case 36: //home\n      case 35:\n        //end\n        this._keyHomeEnd(e);\n        break;\n      case 9:\n        //tab\n        break;\n      default:\n        this._keySelectLetter(e);\n    }\n  }\n  _inputKeyUp(e) {\n    switch (e.keyCode) {\n      case 38: //up arrow\n      case 37: //left arrow\n      case 39: //up arrow\n      case 40: //right arrow\n      case 13: //enter\n      case 27:\n        //escape\n        break;\n      default:\n        this._keyAutoCompLetter(e);\n    }\n  }\n  _preventPopupBlur() {\n    if (this.popup) {\n      this.popup.blockHide();\n    }\n    setTimeout(() => {\n      if (this.popup) {\n        this.popup.restoreHide();\n      }\n    }, 10);\n  }\n  _preventBlur() {\n    this.blurable = false;\n    setTimeout(() => {\n      this.blurable = true;\n    }, 10);\n  }\n\n  //////////////////////////////////////\n  //////// Keyboard Navigation /////////\n  //////////////////////////////////////\n\n  _keyUp(e) {\n    var index = this.displayItems.indexOf(this.focusedItem);\n    if (this.params.verticalNavigation == \"editor\" || this.params.verticalNavigation == \"hybrid\" && index) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n      if (index > 0) {\n        this._focusItem(this.displayItems[index - 1]);\n      }\n    }\n  }\n  _keyDown(e) {\n    var index = this.displayItems.indexOf(this.focusedItem);\n    if (this.params.verticalNavigation == \"editor\" || this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n      if (index < this.displayItems.length - 1) {\n        if (index == -1) {\n          this._focusItem(this.displayItems[0]);\n        } else {\n          this._focusItem(this.displayItems[index + 1]);\n        }\n      }\n    }\n  }\n  _keySide(e) {\n    if (!this.params.autocomplete) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n  _keyEnter(e) {\n    if (this.params.autocomplete && this.lastAction === \"typing\") {\n      this._resolveValue(true);\n    } else {\n      if (this.focusedItem) {\n        this._chooseItem(this.focusedItem);\n      }\n    }\n  }\n  _keyEsc(e) {\n    this._cancel();\n  }\n  _keyHomeEnd(e) {\n    if (this.params.autocomplete) {\n      //prevent table navigation while using input element\n      e.stopImmediatePropagation();\n    }\n  }\n  _keySelectLetter(e) {\n    if (!this.params.autocomplete) {\n      // if(this.edit.currentCell === false){\n      e.preventDefault();\n      // }\n\n      if (e.keyCode >= 38 && e.keyCode <= 90) {\n        this._scrollToValue(e.keyCode);\n      }\n    }\n  }\n  _keyAutoCompLetter(e) {\n    this._filter();\n    this.lastAction = \"typing\";\n    this.typing = true;\n  }\n  _scrollToValue(char) {\n    clearTimeout(this.filterTimeout);\n    var character = String.fromCharCode(char).toLowerCase();\n    this.filterTerm += character.toLowerCase();\n    var match = this.displayItems.find(item => {\n      return typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n    });\n    if (match) {\n      this._focusItem(match);\n    }\n    this.filterTimeout = setTimeout(() => {\n      this.filterTerm = \"\";\n    }, 800);\n  }\n  _focusItem(item) {\n    this.lastAction = \"focus\";\n    if (this.focusedItem && this.focusedItem.element) {\n      this.focusedItem.element.classList.remove(\"focused\");\n    }\n    this.focusedItem = item;\n    if (item && item.element) {\n      item.element.classList.add(\"focused\");\n      item.element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'nearest',\n        inline: 'start'\n      });\n    }\n  }\n\n  //////////////////////////////////////\n  /////// Data List Generation /////////\n  //////////////////////////////////////\n  headerFilterInitialListGen() {\n    this._generateOptions(true);\n  }\n  rebuildOptionsList() {\n    this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(e => {\n      if (!Number.isInteger(e)) {\n        console.error(\"List generation error\", e);\n      }\n    });\n  }\n  _filterList() {\n    this._buildList(this._filterOptions());\n    this._showList();\n  }\n  _generateOptions(silent) {\n    var values = [];\n    var iteration = ++this.listIteration;\n    this.filtered = false;\n    if (this.params.values) {\n      values = this.params.values;\n    } else if (this.params.valuesURL) {\n      values = this._ajaxRequest(this.params.valuesURL, this.input.value);\n    } else {\n      if (typeof this.params.valuesLookup === \"function\") {\n        values = this.params.valuesLookup(this.cell, this.input.value);\n      } else if (this.params.valuesLookup) {\n        values = this._uniqueColumnValues(this.params.valuesLookupField);\n      }\n    }\n    if (values instanceof Promise) {\n      if (!silent) {\n        this._addPlaceholder(this.params.placeholderLoading);\n      }\n      return values.then().then(responseValues => {\n        if (this.listIteration === iteration) {\n          return this._parseList(responseValues);\n        } else {\n          return Promise.reject(iteration);\n        }\n      });\n    } else {\n      return Promise.resolve(this._parseList(values));\n    }\n  }\n  _addPlaceholder(contents) {\n    var placeholder = document.createElement(\"div\");\n    if (typeof contents === \"function\") {\n      contents = contents(this.cell.getComponent(), this.listEl);\n    }\n    if (contents) {\n      this._clearList();\n      if (contents instanceof HTMLElement) {\n        placeholder = contents;\n      } else {\n        placeholder.classList.add(\"tabulator-edit-list-placeholder\");\n        placeholder.innerHTML = contents;\n      }\n      this.listEl.appendChild(placeholder);\n      this._showList();\n    }\n  }\n  _ajaxRequest(url, term) {\n    var params = this.params.filterRemote ? {\n      term: term\n    } : {};\n    url = urlBuilder(url, {}, params);\n    return fetch(url).then(response => {\n      if (response.ok) {\n        return response.json().catch(error => {\n          console.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n          return Promise.reject(error);\n        });\n      } else {\n        console.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n        return Promise.reject(response);\n      }\n    }).catch(error => {\n      console.error(\"List Ajax Load Error - Connection Error: \", error);\n      return Promise.reject(error);\n    });\n  }\n  _uniqueColumnValues(field) {\n    var output = {},\n      data = this.table.getData(this.params.valuesLookup),\n      column;\n    if (field) {\n      column = this.table.columnManager.getColumnByField(field);\n    } else {\n      column = this.cell.getColumn()._getSelf();\n    }\n    if (column) {\n      data.forEach(row => {\n        var val = column.getFieldValue(row);\n        if (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n          output[val] = true;\n        }\n      });\n    } else {\n      console.warn(\"unable to find matching column to create select lookup list:\", field);\n      output = [];\n    }\n    return Object.keys(output);\n  }\n  _parseList(inputValues) {\n    var data = [];\n    if (!Array.isArray(inputValues)) {\n      inputValues = Object.entries(inputValues).map(_ref => {\n        let [key, value] = _ref;\n        return {\n          label: value,\n          value: key\n        };\n      });\n    }\n    inputValues.forEach(value => {\n      if (typeof value !== \"object\") {\n        value = {\n          label: value,\n          value: value\n        };\n      }\n      this._parseListItem(value, data, 0);\n    });\n    if (!this.currentItems.length && this.params.freetext) {\n      this.input.value = this.initialValues;\n      this.typing = true;\n      this.lastAction = \"typing\";\n    }\n    this.data = data;\n    return data;\n  }\n  _parseListItem(option, data, level) {\n    var item = {};\n    if (option.options) {\n      item = this._parseListGroup(option, level + 1);\n    } else {\n      item = {\n        label: option.label,\n        value: option.value,\n        itemParams: option.itemParams,\n        elementAttributes: option.elementAttributes,\n        element: false,\n        selected: false,\n        visible: true,\n        level: level,\n        original: option\n      };\n      if (this.initialValues && this.initialValues.indexOf(option.value) > -1) {\n        this._chooseItem(item, true);\n      }\n    }\n    data.push(item);\n  }\n  _parseListGroup(option, level) {\n    var item = {\n      label: option.label,\n      group: true,\n      itemParams: option.itemParams,\n      elementAttributes: option.elementAttributes,\n      element: false,\n      visible: true,\n      level: level,\n      options: [],\n      original: option\n    };\n    option.options.forEach(child => {\n      this._parseListItem(child, item.options, level);\n    });\n    return item;\n  }\n  _sortOptions(options) {\n    var sorter;\n    if (this.params.sort) {\n      sorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n      this._sortGroup(sorter, options);\n    }\n    return options;\n  }\n  _sortGroup(sorter, options) {\n    options.sort((a, b) => {\n      return sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n    });\n    options.forEach(option => {\n      if (option.group) {\n        this._sortGroup(sorter, option.options);\n      }\n    });\n  }\n  _defaultSortFunction(as, bs) {\n    var a,\n      b,\n      a1,\n      b1,\n      i = 0,\n      L,\n      rx = /(\\d+)|(\\D+)/g,\n      rd = /\\d/;\n    var emptyAlign = 0;\n    if (this.params.sort === \"desc\") {\n      [as, bs] = [bs, as];\n    }\n\n    //handle empty values\n    if (!as && as !== 0) {\n      emptyAlign = !bs && bs !== 0 ? 0 : -1;\n    } else if (!bs && bs !== 0) {\n      emptyAlign = 1;\n    } else {\n      if (isFinite(as) && isFinite(bs)) return as - bs;\n      a = String(as).toLowerCase();\n      b = String(bs).toLowerCase();\n      if (a === b) return 0;\n      if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n      a = a.match(rx);\n      b = b.match(rx);\n      L = a.length > b.length ? b.length : a.length;\n      while (i < L) {\n        a1 = a[i];\n        b1 = b[i++];\n        if (a1 !== b1) {\n          if (isFinite(a1) && isFinite(b1)) {\n            if (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n            if (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n            return a1 - b1;\n          } else return a1 > b1 ? 1 : -1;\n        }\n      }\n      return a.length > b.length;\n    }\n    return emptyAlign;\n  }\n  _filterOptions() {\n    var filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n      term = this.input.value;\n    if (term) {\n      this.filtered = true;\n      this.data.forEach(item => {\n        this._filterItem(filterFunc, term, item);\n      });\n    } else {\n      this.filtered = false;\n    }\n    return this.data;\n  }\n  _filterItem(func, term, item) {\n    var matches = false;\n    if (!item.group) {\n      item.visible = func(term, item.label, item.value, item.original);\n    } else {\n      item.options.forEach(option => {\n        if (this._filterItem(func, term, option)) {\n          matches = true;\n        }\n      });\n      item.visible = matches;\n    }\n    return item.visible;\n  }\n  _defaultFilterFunc(term, label, value, item) {\n    term = String(term).toLowerCase();\n    if (label !== null && typeof label !== \"undefined\") {\n      if (String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  //////////////////////////////////////\n  /////////// Display List /////////////\n  //////////////////////////////////////\n\n  _clearList() {\n    while (this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n    this.displayItems = [];\n  }\n  _buildList(data) {\n    this._clearList();\n    data.forEach(option => {\n      this._buildItem(option);\n    });\n    if (!this.displayItems.length) {\n      this._addPlaceholder(this.params.placeholderEmpty);\n    }\n  }\n  _buildItem(item) {\n    var el = item.element,\n      contents;\n    if (!this.filtered || item.visible) {\n      if (!el) {\n        el = document.createElement(\"div\");\n        el.tabIndex = 0;\n        contents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n        if (contents instanceof HTMLElement) {\n          el.appendChild(contents);\n        } else {\n          el.innerHTML = contents;\n        }\n        if (item.group) {\n          el.classList.add(\"tabulator-edit-list-group\");\n        } else {\n          el.classList.add(\"tabulator-edit-list-item\");\n        }\n        el.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n        if (item.elementAttributes && typeof item.elementAttributes == \"object\") {\n          for (let key in item.elementAttributes) {\n            if (key.charAt(0) == \"+\") {\n              key = key.slice(1);\n              el.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n            } else {\n              el.setAttribute(key, item.elementAttributes[key]);\n            }\n          }\n        }\n        if (item.group) {\n          el.addEventListener(\"click\", this._groupClick.bind(this, item));\n        } else {\n          el.addEventListener(\"click\", this._itemClick.bind(this, item));\n        }\n        el.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n        item.element = el;\n      }\n      this._styleItem(item);\n      this.listEl.appendChild(el);\n      if (item.group) {\n        item.options.forEach(option => {\n          this._buildItem(option);\n        });\n      } else {\n        this.displayItems.push(item);\n      }\n    }\n  }\n  _showList() {\n    var startVis = this.popup && this.popup.isVisible();\n    if (this.input.parentNode) {\n      if (this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty) {\n        if (this.popup) {\n          this.popup.hide(true);\n        }\n        return;\n      }\n      this._setListWidth();\n      if (!this.popup) {\n        this.popup = this.edit.popup(this.listEl);\n      }\n      this.popup.show(this.cell.getElement(), \"bottom\");\n      if (!startVis) {\n        setTimeout(() => {\n          this.popup.hideOnBlur(this._resolveValue.bind(this, true));\n        }, 10);\n      }\n    }\n  }\n  _styleItem(item) {\n    if (item && item.element) {\n      if (item.selected) {\n        item.element.classList.add(\"active\");\n      } else {\n        item.element.classList.remove(\"active\");\n      }\n    }\n  }\n\n  //////////////////////////////////////\n  ///////// User Interaction ///////////\n  //////////////////////////////////////\n\n  _itemClick(item, e) {\n    e.stopPropagation();\n    this._chooseItem(item);\n  }\n  _groupClick(item, e) {\n    e.stopPropagation();\n  }\n\n  //////////////////////////////////////\n  ////// Current Item Management ///////\n  //////////////////////////////////////\n\n  _cancel() {\n    this.popup.hide(true);\n    this.actions.cancel();\n  }\n  _clearChoices() {\n    this.typing = true;\n    this.currentItems.forEach(item => {\n      item.selected = false;\n      this._styleItem(item);\n    });\n    this.currentItems = [];\n    this.focusedItem = null;\n  }\n  _chooseItem(item, silent) {\n    var index;\n    this.typing = false;\n    if (this.params.multiselect) {\n      index = this.currentItems.indexOf(item);\n      if (index > -1) {\n        this.currentItems.splice(index, 1);\n        item.selected = false;\n      } else {\n        this.currentItems.push(item);\n        item.selected = true;\n      }\n      this.input.value = this.currentItems.map(item => item.label).join(\",\");\n      this._styleItem(item);\n    } else {\n      this.currentItems = [item];\n      item.selected = true;\n      this.input.value = item.label;\n      this._styleItem(item);\n      if (!silent) {\n        this._resolveValue();\n      }\n    }\n    this._focusItem(item);\n  }\n  _resolveValue(blur) {\n    var output, initialValue;\n    if (this.popup) {\n      this.popup.hide(true);\n    }\n    if (this.params.multiselect) {\n      output = this.currentItems.map(item => item.value);\n    } else {\n      if (blur && this.params.autocomplete && this.typing) {\n        if (this.params.freetext || this.params.allowEmpty && this.input.value === \"\") {\n          output = this.input.value;\n        } else {\n          this.actions.cancel();\n          return;\n        }\n      } else {\n        if (this.currentItems[0]) {\n          output = this.currentItems[0].value;\n        } else {\n          initialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n          if (initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\") {\n            output = initialValue;\n          } else {\n            output = this.params.emptyValue;\n          }\n        }\n      }\n    }\n    if (output === \"\") {\n      output = this.params.emptyValue;\n    }\n    this.actions.success(output);\n    if (this.isFilter) {\n      this.initialValues = output && !Array.isArray(output) ? [output] : output;\n      this.currentItems = [];\n    }\n  }\n}\nfunction select(cell, onRendered, success, cancel, editorParams) {\n  this.deprecationMsg(\"The select editor has been deprecated, please use the new list editor\");\n  var list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n  return list.input;\n}\nfunction list(cell, onRendered, success, cancel, editorParams) {\n  var list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n  return list.input;\n}\nfunction autocomplete(cell, onRendered, success, cancel, editorParams) {\n  this.deprecationMsg(\"The autocomplete editor has been deprecated, please use the new list editor with the 'autocomplete' editorParam\");\n  editorParams.autocomplete = true;\n  var list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n  return list.input;\n}\n\n//star rating\nfunction star(cell, onRendered, success, cancel, editorParams) {\n  var self = this,\n    element = cell.getElement(),\n    value = cell.getValue(),\n    maxStars = element.getElementsByTagName(\"svg\").length || 5,\n    size = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n    stars = [],\n    starsHolder = document.createElement(\"div\"),\n    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n  //change star type\n  function starChange(val) {\n    stars.forEach(function (star, i) {\n      if (i < val) {\n        if (self.table.browser == \"ie\") {\n          star.setAttribute(\"class\", \"tabulator-star-active\");\n        } else {\n          star.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n        }\n        star.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n      } else {\n        if (self.table.browser == \"ie\") {\n          star.setAttribute(\"class\", \"tabulator-star-inactive\");\n        } else {\n          star.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n        }\n        star.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n      }\n    });\n  }\n\n  //build stars\n  function buildStar(i) {\n    var starHolder = document.createElement(\"span\");\n    var nextStar = star.cloneNode(true);\n    stars.push(nextStar);\n    starHolder.addEventListener(\"mouseenter\", function (e) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      starChange(i);\n    });\n    starHolder.addEventListener(\"mousemove\", function (e) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    });\n    starHolder.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      success(i);\n      element.blur();\n    });\n    starHolder.appendChild(nextStar);\n    starsHolder.appendChild(starHolder);\n  }\n\n  //handle keyboard navigation value change\n  function changeValue(val) {\n    value = val;\n    starChange(val);\n  }\n\n  //style cell\n  element.style.whiteSpace = \"nowrap\";\n  element.style.overflow = \"hidden\";\n  element.style.textOverflow = \"ellipsis\";\n\n  //style holding element\n  starsHolder.style.verticalAlign = \"middle\";\n  starsHolder.style.display = \"inline-block\";\n  starsHolder.style.padding = \"4px\";\n\n  //style star\n  star.setAttribute(\"width\", size);\n  star.setAttribute(\"height\", size);\n  star.setAttribute(\"viewBox\", \"0 0 512 512\");\n  star.setAttribute(\"xml:space\", \"preserve\");\n  star.style.padding = \"0 1px\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        starsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        starsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n\n  //create correct number of stars\n  for (var i = 1; i <= maxStars; i++) {\n    buildStar(i);\n  }\n\n  //ensure value does not exceed number of stars\n  value = Math.min(parseInt(value), maxStars);\n\n  // set initial styling of stars\n  starChange(value);\n  starsHolder.addEventListener(\"mousemove\", function (e) {\n    starChange(0);\n  });\n  starsHolder.addEventListener(\"click\", function (e) {\n    success(0);\n  });\n  element.addEventListener(\"blur\", function (e) {\n    cancel();\n  });\n\n  //allow key based navigation\n  element.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 39:\n        //right arrow\n        changeValue(value + 1);\n        break;\n      case 37:\n        //left arrow\n        changeValue(value - 1);\n        break;\n      case 13:\n        //enter\n        success(value);\n        break;\n      case 27:\n        //escape\n        cancel();\n        break;\n    }\n  });\n  return starsHolder;\n}\n\n//draggable progress bar\nfunction progress(cell, onRendered, success, cancel, editorParams) {\n  var element = cell.getElement(),\n    max = typeof editorParams.max === \"undefined\" ? element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : editorParams.max,\n    min = typeof editorParams.min === \"undefined\" ? element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : editorParams.min,\n    percent = (max - min) / 100,\n    value = cell.getValue() || 0,\n    handle = document.createElement(\"div\"),\n    bar = document.createElement(\"div\"),\n    mouseDrag,\n    mouseDragWidth;\n\n  //set new value\n  function updateValue() {\n    var style = window.getComputedStyle(element, null);\n    var calcVal = percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\"))) / 100)) + min;\n    success(calcVal);\n    element.setAttribute(\"aria-valuenow\", calcVal);\n    element.setAttribute(\"aria-label\", value);\n  }\n\n  //style handle\n  handle.style.position = \"absolute\";\n  handle.style.right = \"0\";\n  handle.style.top = \"0\";\n  handle.style.bottom = \"0\";\n  handle.style.width = \"5px\";\n  handle.classList.add(\"tabulator-progress-handle\");\n\n  //style bar\n  bar.style.display = \"inline-block\";\n  bar.style.position = \"relative\";\n  // bar.style.top = \"8px\";\n  // bar.style.bottom = \"8px\";\n  // bar.style.left = \"4px\";\n  // bar.style.marginRight = \"4px\";\n  bar.style.height = \"100%\";\n  bar.style.backgroundColor = \"#488CE9\";\n  bar.style.maxWidth = \"100%\";\n  bar.style.minWidth = \"0%\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        bar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        bar.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n\n  //style cell\n  element.style.padding = \"4px 4px\";\n\n  //make sure value is in range\n  value = Math.min(parseFloat(value), max);\n  value = Math.max(parseFloat(value), min);\n\n  //workout percentage\n  value = Math.round((value - min) / percent);\n  // bar.style.right = value + \"%\";\n  bar.style.width = value + \"%\";\n  element.setAttribute(\"aria-valuemin\", min);\n  element.setAttribute(\"aria-valuemax\", max);\n  bar.appendChild(handle);\n  handle.addEventListener(\"mousedown\", function (e) {\n    mouseDrag = e.screenX;\n    mouseDragWidth = bar.offsetWidth;\n  });\n  handle.addEventListener(\"mouseover\", function () {\n    handle.style.cursor = \"ew-resize\";\n  });\n  element.addEventListener(\"mousemove\", function (e) {\n    if (mouseDrag) {\n      bar.style.width = mouseDragWidth + e.screenX - mouseDrag + \"px\";\n    }\n  });\n  element.addEventListener(\"mouseup\", function (e) {\n    if (mouseDrag) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      mouseDrag = false;\n      mouseDragWidth = false;\n      updateValue();\n    }\n  });\n\n  //allow key based navigation\n  element.addEventListener(\"keydown\", function (e) {\n    switch (e.keyCode) {\n      case 39:\n        //right arrow\n        e.preventDefault();\n        bar.style.width = bar.clientWidth + element.clientWidth / 100 + \"px\";\n        break;\n      case 37:\n        //left arrow\n        e.preventDefault();\n        bar.style.width = bar.clientWidth - element.clientWidth / 100 + \"px\";\n        break;\n      case 9: //tab\n      case 13:\n        //enter\n        updateValue();\n        break;\n      case 27:\n        //escape\n        cancel();\n        break;\n    }\n  });\n  element.addEventListener(\"blur\", function () {\n    cancel();\n  });\n  return bar;\n}\n\n//checkbox\nfunction tickCross(cell, onRendered, success, cancel, editorParams) {\n  var value = cell.getValue(),\n    input = document.createElement(\"input\"),\n    tristate = editorParams.tristate,\n    indetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n    indetermState = false,\n    trueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n    falseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n  input.setAttribute(\"type\", \"checkbox\");\n  input.style.marginTop = \"5px\";\n  input.style.boxSizing = \"border-box\";\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\n    for (let key in editorParams.elementAttributes) {\n      if (key.charAt(0) == \"+\") {\n        key = key.slice(1);\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n      } else {\n        input.setAttribute(key, editorParams.elementAttributes[key]);\n      }\n    }\n  }\n  input.value = value;\n  if (tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")) {\n    indetermState = true;\n    input.indeterminate = true;\n  }\n  if (this.table.browser != \"firefox\" && this.table.browser != \"safari\") {\n    //prevent blur issue on mac firefox\n    onRendered(function () {\n      if (cell._getSelf) {\n        input.focus({\n          preventScroll: true\n        });\n      }\n    });\n  }\n  input.checked = trueValueSet ? value === editorParams.trueValue : value === true || value === \"true\" || value === \"True\" || value === 1;\n  function setValue(blur) {\n    var checkedValue = input.checked;\n    if (trueValueSet && checkedValue) {\n      checkedValue = editorParams.trueValue;\n    } else if (falseValueSet && !checkedValue) {\n      checkedValue = editorParams.falseValue;\n    }\n    if (tristate) {\n      if (!blur) {\n        if (input.checked && !indetermState) {\n          input.checked = false;\n          input.indeterminate = true;\n          indetermState = true;\n          return indetermValue;\n        } else {\n          indetermState = false;\n          return checkedValue;\n        }\n      } else {\n        if (indetermState) {\n          return indetermValue;\n        } else {\n          return checkedValue;\n        }\n      }\n    } else {\n      return checkedValue;\n    }\n  }\n\n  //submit new value on blur\n  input.addEventListener(\"change\", function (e) {\n    success(setValue());\n  });\n  input.addEventListener(\"blur\", function (e) {\n    success(setValue(true));\n  });\n\n  //submit new value on enter\n  input.addEventListener(\"keydown\", function (e) {\n    if (e.keyCode == 13) {\n      success(setValue());\n    }\n    if (e.keyCode == 27) {\n      cancel();\n    }\n  });\n  return input;\n}\nvar defaultEditors = {\n  input: input,\n  textarea: textarea,\n  number: number,\n  range: range,\n  date: date,\n  time: time,\n  datetime: datetime,\n  select: select,\n  list: list,\n  autocomplete: autocomplete,\n  star: star,\n  progress: progress,\n  tickCross: tickCross\n};\nclass Edit$1 extends Module {\n  constructor(table) {\n    super(table);\n    this.currentCell = false; //hold currently editing cell\n    this.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n    this.recursionBlock = false; //prevent focus recursion\n    this.invalidEdit = false;\n    this.editedCells = [];\n    this.editors = Edit$1.editors;\n    this.registerColumnOption(\"editable\");\n    this.registerColumnOption(\"editor\");\n    this.registerColumnOption(\"editorParams\");\n    this.registerColumnOption(\"cellEditing\");\n    this.registerColumnOption(\"cellEdited\");\n    this.registerColumnOption(\"cellEditCancelled\");\n    this.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n    this.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n    this.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n    this.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n    this.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n    this.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n    this.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n    this.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n    this.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n    this.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n    this.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n    this.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n    this.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n  }\n  initialize() {\n    this.subscribe(\"cell-init\", this.bindEditor.bind(this));\n    this.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n    this.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n    this.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n    this.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n    this.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n    this.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n    this.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n    this.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n    this.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n    this.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n    this.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n    this.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n    this.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n  }\n\n  ///////////////////////////////////\n  ////// Keybinding Functions ///////\n  ///////////////////////////////////\n\n  keybindingNavigateNext(e) {\n    var cell = this.currentCell,\n      newRow = this.options(\"tabEndNewRow\");\n    if (cell) {\n      if (!this.navigateNext(cell, e)) {\n        if (newRow) {\n          cell.getElement().firstChild.blur();\n          if (newRow === true) {\n            newRow = this.table.addRow({});\n          } else {\n            if (typeof newRow == \"function\") {\n              newRow = this.table.addRow(newRow(cell.row.getComponent()));\n            } else {\n              newRow = this.table.addRow(Object.assign({}, newRow));\n            }\n          }\n          newRow.then(() => {\n            setTimeout(() => {\n              cell.getComponent().navigateNext();\n            });\n          });\n        }\n      }\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Cell Functions //////////\n  ///////////////////////////////////\n\n  cellIsEdited(cell) {\n    return !!cell.modules.edit && cell.modules.edit.edited;\n  }\n  cellCancelEdit(cell) {\n    if (cell === this.currentCell) {\n      this.table.modules.edit.cancelEdit();\n    } else {\n      console.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n  updateCellClass(cell) {\n    if (this.allowEdit(cell)) {\n      cell.getElement().classList.add(\"tabulator-editable\");\n    } else {\n      cell.getElement().classList.remove(\"tabulator-editable\");\n    }\n  }\n  clearCellEdited(cells) {\n    if (!cells) {\n      cells = this.table.modules.edit.getEditedCells();\n    }\n    if (!Array.isArray(cells)) {\n      cells = [cells];\n    }\n    cells.forEach(cell => {\n      this.table.modules.edit.clearEdited(cell._getSelf());\n    });\n  }\n  navigatePrev() {\n    let cell = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentCell;\n    let e = arguments.length > 1 ? arguments[1] : undefined;\n    var nextCell, prevRow;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      nextCell = this.navigateLeft();\n      if (nextCell) {\n        return true;\n      } else {\n        prevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n        if (prevRow) {\n          nextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n          if (nextCell) {\n            nextCell.getComponent().edit();\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  navigateNext() {\n    let cell = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentCell;\n    let e = arguments.length > 1 ? arguments[1] : undefined;\n    var nextCell, nextRow;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      nextCell = this.navigateRight();\n      if (nextCell) {\n        return true;\n      } else {\n        nextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n        if (nextRow) {\n          nextCell = this.findNextEditableCell(nextRow, -1);\n          if (nextCell) {\n            nextCell.getComponent().edit();\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  navigateLeft() {\n    let cell = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentCell;\n    let e = arguments.length > 1 ? arguments[1] : undefined;\n    var index, nextCell;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      index = cell.getIndex();\n      nextCell = this.findPrevEditableCell(cell.row, index);\n      if (nextCell) {\n        nextCell.getComponent().edit();\n        return true;\n      }\n    }\n    return false;\n  }\n  navigateRight() {\n    let cell = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentCell;\n    let e = arguments.length > 1 ? arguments[1] : undefined;\n    var index, nextCell;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      index = cell.getIndex();\n      nextCell = this.findNextEditableCell(cell.row, index);\n      if (nextCell) {\n        nextCell.getComponent().edit();\n        return true;\n      }\n    }\n    return false;\n  }\n  navigateUp() {\n    let cell = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentCell;\n    let e = arguments.length > 1 ? arguments[1] : undefined;\n    var index, nextRow;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      index = cell.getIndex();\n      nextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n      if (nextRow) {\n        nextRow.cells[index].getComponent().edit();\n        return true;\n      }\n    }\n    return false;\n  }\n  navigateDown() {\n    let cell = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.currentCell;\n    let e = arguments.length > 1 ? arguments[1] : undefined;\n    var index, nextRow;\n    if (cell) {\n      if (e) {\n        e.preventDefault();\n      }\n      index = cell.getIndex();\n      nextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n      if (nextRow) {\n        nextRow.cells[index].getComponent().edit();\n        return true;\n      }\n    }\n    return false;\n  }\n  findNextEditableCell(row, index) {\n    var nextCell = false;\n    if (index < row.cells.length - 1) {\n      for (var i = index + 1; i < row.cells.length; i++) {\n        let cell = row.cells[i];\n        if (cell.column.modules.edit && Helpers.elVisible(cell.getElement())) {\n          let allowEdit = this.allowEdit(cell);\n          if (allowEdit) {\n            nextCell = cell;\n            break;\n          }\n        }\n      }\n    }\n    return nextCell;\n  }\n  findPrevEditableCell(row, index) {\n    var prevCell = false;\n    if (index > 0) {\n      for (var i = index - 1; i >= 0; i--) {\n        let cell = row.cells[i];\n        if (cell.column.modules.edit && Helpers.elVisible(cell.getElement())) {\n          let allowEdit = this.allowEdit(cell);\n          if (allowEdit) {\n            prevCell = cell;\n            break;\n          }\n        }\n      }\n    }\n    return prevCell;\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  initializeColumnCheck(column) {\n    if (typeof column.definition.editor !== \"undefined\") {\n      this.initializeColumn(column);\n    }\n  }\n  columnDeleteCheck(column) {\n    if (this.currentCell && this.currentCell.column === column) {\n      this.cancelEdit();\n    }\n  }\n  rowDeleteCheck(row) {\n    if (this.currentCell && this.currentCell.row === row) {\n      this.cancelEdit();\n    }\n  }\n  rowEditableCheck(row) {\n    row.getCells().forEach(cell => {\n      if (cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\") {\n        this.updateCellClass(cell);\n      }\n    });\n  }\n\n  //initialize column editor\n  initializeColumn(column) {\n    var config = {\n      editor: false,\n      blocked: false,\n      check: column.definition.editable,\n      params: column.definition.editorParams || {}\n    };\n\n    //set column editor\n    switch (typeof column.definition.editor) {\n      case \"string\":\n        if (this.editors[column.definition.editor]) {\n          config.editor = this.editors[column.definition.editor];\n        } else {\n          console.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n        }\n        break;\n      case \"function\":\n        config.editor = column.definition.editor;\n        break;\n      case \"boolean\":\n        if (column.definition.editor === true) {\n          if (typeof column.definition.formatter !== \"function\") {\n            if (this.editors[column.definition.formatter]) {\n              config.editor = this.editors[column.definition.formatter];\n            } else {\n              config.editor = this.editors[\"input\"];\n            }\n          } else {\n            console.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n          }\n        }\n        break;\n    }\n    if (config.editor) {\n      column.modules.edit = config;\n    }\n  }\n  getCurrentCell() {\n    return this.currentCell ? this.currentCell.getComponent() : false;\n  }\n  clearEditor(cancel) {\n    var cell = this.currentCell,\n      cellEl;\n    this.invalidEdit = false;\n    if (cell) {\n      this.currentCell = false;\n      cellEl = cell.getElement();\n      this.dispatch(\"edit-editor-clear\", cell, cancel);\n      cellEl.classList.remove(\"tabulator-editing\");\n      while (cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n      cell.row.getElement().classList.remove(\"tabulator-editing\");\n      cell.table.element.classList.remove(\"tabulator-editing\");\n    }\n  }\n  cancelEdit() {\n    if (this.currentCell) {\n      var cell = this.currentCell;\n      var component = this.currentCell.getComponent();\n      this.clearEditor(true);\n      cell.setValueActual(cell.getValue());\n      cell.cellRendered();\n      if (cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight) {\n        cell.row.normalizeHeight(true);\n      }\n      if (cell.column.definition.cellEditCancelled) {\n        cell.column.definition.cellEditCancelled.call(this.table, component);\n      }\n      this.dispatch(\"edit-cancelled\", cell);\n      this.dispatchExternal(\"cellEditCancelled\", component);\n    }\n  }\n\n  //return a formatted value for a cell\n  bindEditor(cell) {\n    if (cell.column.modules.edit) {\n      var self = this,\n        element = cell.getElement(true);\n      this.updateCellClass(cell);\n      element.setAttribute(\"tabindex\", 0);\n      element.addEventListener(\"click\", function (e) {\n        if (!element.classList.contains(\"tabulator-editing\")) {\n          element.focus({\n            preventScroll: true\n          });\n        }\n      });\n      element.addEventListener(\"mousedown\", function (e) {\n        if (e.button === 2) {\n          e.preventDefault();\n        } else {\n          self.mouseClick = true;\n        }\n      });\n      element.addEventListener(\"focus\", function (e) {\n        if (!self.recursionBlock) {\n          self.edit(cell, e, false);\n        }\n      });\n    }\n  }\n  focusCellNoEvent(cell, block) {\n    this.recursionBlock = true;\n    if (!(block && this.table.browser === \"ie\")) {\n      cell.getElement().focus({\n        preventScroll: true\n      });\n    }\n    this.recursionBlock = false;\n  }\n  editCell(cell, forceEdit) {\n    this.focusCellNoEvent(cell);\n    this.edit(cell, false, forceEdit);\n  }\n  focusScrollAdjust(cell) {\n    if (this.table.rowManager.getRenderMode() == \"virtual\") {\n      var topEdge = this.table.rowManager.element.scrollTop,\n        bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n        rowEl = cell.row.getElement();\n      if (rowEl.offsetTop < topEdge) {\n        this.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop;\n      } else {\n        if (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\n          this.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge;\n        }\n      }\n      var leftEdge = this.table.rowManager.element.scrollLeft,\n        rightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n        cellEl = cell.getElement();\n      if (this.table.modExists(\"frozenColumns\")) {\n        leftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\n        rightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\n      }\n      if (this.table.options.renderHorizontal === \"virtual\") {\n        leftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n        rightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n      }\n      if (cellEl.offsetLeft < leftEdge) {\n        this.table.rowManager.element.scrollLeft -= leftEdge - cellEl.offsetLeft;\n      } else {\n        if (cellEl.offsetLeft + cellEl.offsetWidth > rightEdge) {\n          this.table.rowManager.element.scrollLeft += cellEl.offsetLeft + cellEl.offsetWidth - rightEdge;\n        }\n      }\n    }\n  }\n  allowEdit(cell) {\n    var check = cell.column.modules.edit ? true : false;\n    if (cell.column.modules.edit) {\n      switch (typeof cell.column.modules.edit.check) {\n        case \"function\":\n          if (cell.row.initialized) {\n            check = cell.column.modules.edit.check(cell.getComponent());\n          }\n          break;\n        case \"string\":\n          check = !!cell.row.data[cell.column.modules.edit.check];\n          break;\n        case \"boolean\":\n          check = cell.column.modules.edit.check;\n          break;\n      }\n    }\n    return check;\n  }\n  edit(cell, e, forceEdit) {\n    var self = this,\n      allowEdit = true,\n      rendered = function () {},\n      element = cell.getElement(),\n      cellEditor,\n      component,\n      params;\n\n    //prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n    if (this.currentCell) {\n      if (!this.invalidEdit && this.currentCell !== cell) {\n        this.cancelEdit();\n      }\n      return;\n    }\n\n    //handle successful value change\n    function success(value) {\n      if (self.currentCell === cell) {\n        var valid = self.chain(\"edit-success\", [cell, value], true, true);\n        if (valid === true || self.table.options.validationMode === \"highlight\") {\n          self.clearEditor();\n          if (!cell.modules.edit) {\n            cell.modules.edit = {};\n          }\n          cell.modules.edit.edited = true;\n          if (self.editedCells.indexOf(cell) == -1) {\n            self.editedCells.push(cell);\n          }\n          cell.setValue(value, true);\n          return valid === true;\n        } else {\n          self.invalidEdit = true;\n          self.focusCellNoEvent(cell, true);\n          rendered();\n          return false;\n        }\n      }\n    }\n\n    //handle aborted edit\n    function cancel() {\n      if (self.currentCell === cell) {\n        self.cancelEdit();\n      }\n    }\n    function onRendered(callback) {\n      rendered = callback;\n    }\n    if (!cell.column.modules.edit.blocked) {\n      if (e) {\n        e.stopPropagation();\n      }\n      allowEdit = this.allowEdit(cell);\n      if (allowEdit || forceEdit) {\n        self.cancelEdit();\n        self.currentCell = cell;\n        this.focusScrollAdjust(cell);\n        component = cell.getComponent();\n        if (this.mouseClick) {\n          this.mouseClick = false;\n          if (cell.column.definition.cellClick) {\n            cell.column.definition.cellClick.call(this.table, e, component);\n          }\n        }\n        if (cell.column.definition.cellEditing) {\n          cell.column.definition.cellEditing.call(this.table, component);\n        }\n        this.dispatch(\"cell-editing\", cell);\n        this.dispatchExternal(\"cellEditing\", component);\n        params = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n        cellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\n        //if editor returned, add to DOM, if false, abort edit\n        if (this.currentCell && cellEditor !== false) {\n          if (cellEditor instanceof Node) {\n            element.classList.add(\"tabulator-editing\");\n            cell.row.getElement().classList.add(\"tabulator-editing\");\n            cell.table.element.classList.add(\"tabulator-editing\");\n            while (element.firstChild) element.removeChild(element.firstChild);\n            element.appendChild(cellEditor);\n\n            //trigger onRendered Callback\n            rendered();\n\n            //prevent editing from triggering rowClick event\n            var children = element.children;\n            for (var i = 0; i < children.length; i++) {\n              children[i].addEventListener(\"click\", function (e) {\n                e.stopPropagation();\n              });\n            }\n          } else {\n            console.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n            element.blur();\n            return false;\n          }\n        } else {\n          element.blur();\n          return false;\n        }\n        return true;\n      } else {\n        this.mouseClick = false;\n        element.blur();\n        return false;\n      }\n    } else {\n      this.mouseClick = false;\n      element.blur();\n      return false;\n    }\n  }\n  getEditedCells() {\n    var output = [];\n    this.editedCells.forEach(cell => {\n      output.push(cell.getComponent());\n    });\n    return output;\n  }\n  clearEdited(cell) {\n    var editIndex;\n    if (cell.modules.edit && cell.modules.edit.edited) {\n      cell.modules.edit.edited = false;\n      this.dispatch(\"edit-edited-clear\", cell);\n    }\n    editIndex = this.editedCells.indexOf(cell);\n    if (editIndex > -1) {\n      this.editedCells.splice(editIndex, 1);\n    }\n  }\n}\nEdit$1.moduleName = \"edit\";\n\n//load defaults\nEdit$1.editors = defaultEditors;\nclass ExportRow {\n  constructor(type, columns, component, indent) {\n    this.type = type;\n    this.columns = columns;\n    this.component = component || false;\n    this.indent = indent || 0;\n  }\n}\nclass ExportColumn {\n  constructor(value, component, width, height, depth) {\n    this.value = value;\n    this.component = component || false;\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n  }\n}\nclass Export extends Module {\n  constructor(table) {\n    super(table);\n    this.config = {};\n    this.cloneTableStyle = true;\n    this.colVisProp = \"\";\n    this.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\n    this.registerColumnOption(\"htmlOutput\");\n    this.registerColumnOption(\"titleHtmlOutput\");\n  }\n  initialize() {\n    this.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  generateExportList(config, style, range, colVisProp) {\n    this.cloneTableStyle = style;\n    this.config = config || {};\n    this.colVisProp = colVisProp;\n    var headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n    var body = this.bodyToExportRows(this.rowLookup(range));\n    return headers.concat(body);\n  }\n  generateTable(config, style, range, colVisProp) {\n    var list = this.generateExportList(config, style, range, colVisProp);\n    return this.generateTableElement(list);\n  }\n  rowLookup(range) {\n    var rows = [];\n    if (typeof range == \"function\") {\n      range.call(this.table).forEach(row => {\n        row = this.table.rowManager.findRow(row);\n        if (row) {\n          rows.push(row);\n        }\n      });\n    } else {\n      switch (range) {\n        case true:\n        case \"visible\":\n          rows = this.table.rowManager.getVisibleRows(false, true);\n          break;\n        case \"all\":\n          rows = this.table.rowManager.rows;\n          break;\n        case \"selected\":\n          rows = this.table.modules.selectRow.selectedRows;\n          break;\n        case \"active\":\n        default:\n          if (this.table.options.pagination) {\n            rows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\n          } else {\n            rows = this.table.rowManager.getDisplayRows();\n          }\n      }\n    }\n    return Object.assign([], rows);\n  }\n  generateColumnGroupHeaders() {\n    var output = [];\n    var columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n    columns.forEach(column => {\n      var colData = this.processColumnGroup(column);\n      if (colData) {\n        output.push(colData);\n      }\n    });\n    return output;\n  }\n  processColumnGroup(column) {\n    var subGroups = column.columns,\n      maxDepth = 0,\n      title = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n    var groupData = {\n      title: title,\n      column: column,\n      depth: 1\n    };\n    if (subGroups.length) {\n      groupData.subGroups = [];\n      groupData.width = 0;\n      subGroups.forEach(subGroup => {\n        var subGroupData = this.processColumnGroup(subGroup);\n        if (subGroupData) {\n          groupData.width += subGroupData.width;\n          groupData.subGroups.push(subGroupData);\n          if (subGroupData.depth > maxDepth) {\n            maxDepth = subGroupData.depth;\n          }\n        }\n      });\n      groupData.depth += maxDepth;\n      if (!groupData.width) {\n        return false;\n      }\n    } else {\n      if (this.columnVisCheck(column)) {\n        groupData.width = 1;\n      } else {\n        return false;\n      }\n    }\n    return groupData;\n  }\n  columnVisCheck(column) {\n    var visProp = column.definition[this.colVisProp];\n    if (typeof visProp === \"function\") {\n      visProp = visProp.call(this.table, column.getComponent());\n    }\n    return visProp !== false && (column.visible || !column.visible && visProp);\n  }\n  headersToExportRows(columns) {\n    var headers = [],\n      headerDepth = 0,\n      exportRows = [];\n    function parseColumnGroup(column, level) {\n      var depth = headerDepth - level;\n      if (typeof headers[level] === \"undefined\") {\n        headers[level] = [];\n      }\n      column.height = column.subGroups ? 1 : depth - column.depth + 1;\n      headers[level].push(column);\n      if (column.height > 1) {\n        for (let i = 1; i < column.height; i++) {\n          if (typeof headers[level + i] === \"undefined\") {\n            headers[level + i] = [];\n          }\n          headers[level + i].push(false);\n        }\n      }\n      if (column.width > 1) {\n        for (let i = 1; i < column.width; i++) {\n          headers[level].push(false);\n        }\n      }\n      if (column.subGroups) {\n        column.subGroups.forEach(function (subGroup) {\n          parseColumnGroup(subGroup, level + 1);\n        });\n      }\n    }\n\n    //calculate maximum header depth\n    columns.forEach(function (column) {\n      if (column.depth > headerDepth) {\n        headerDepth = column.depth;\n      }\n    });\n    columns.forEach(function (column) {\n      parseColumnGroup(column, 0);\n    });\n    headers.forEach(header => {\n      var columns = [];\n      header.forEach(col => {\n        if (col) {\n          let title = typeof col.title === \"undefined\" ? \"\" : col.title;\n          columns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n        } else {\n          columns.push(null);\n        }\n      });\n      exportRows.push(new ExportRow(\"header\", columns));\n    });\n    return exportRows;\n  }\n  bodyToExportRows(rows) {\n    var columns = [];\n    var exportRows = [];\n    this.table.columnManager.columnsByIndex.forEach(column => {\n      if (this.columnVisCheck(column)) {\n        columns.push(column.getComponent());\n      }\n    });\n    if (this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")) {\n      if (this.table.modules.columnCalcs.topInitialized) {\n        rows.unshift(this.table.modules.columnCalcs.topRow);\n      }\n      if (this.table.modules.columnCalcs.botInitialized) {\n        rows.push(this.table.modules.columnCalcs.botRow);\n      }\n    }\n    rows = rows.filter(row => {\n      switch (row.type) {\n        case \"group\":\n          return this.config.rowGroups !== false;\n        case \"calc\":\n          return this.config.columnCalcs !== false;\n        case \"row\":\n          return !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n      }\n      return true;\n    });\n    rows.forEach((row, i) => {\n      var rowData = row.getData(this.colVisProp);\n      var exportCols = [];\n      var indent = 0;\n      switch (row.type) {\n        case \"group\":\n          indent = row.level;\n          exportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n          break;\n        case \"calc\":\n        case \"row\":\n          columns.forEach(col => {\n            exportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n          });\n          if (this.table.options.dataTree && this.config.dataTree !== false) {\n            indent = row.modules.dataTree.index;\n          }\n          break;\n      }\n      exportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n    });\n    return exportRows;\n  }\n  generateTableElement(list) {\n    var table = document.createElement(\"table\"),\n      headerEl = document.createElement(\"thead\"),\n      bodyEl = document.createElement(\"tbody\"),\n      styles = this.lookupTableStyles(),\n      rowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n      setup = {};\n    setup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n    if (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")) {\n      setup.treeElementField = this.table.modules.dataTree.elementField;\n    }\n\n    //assign group header formatter\n    setup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n    if (setup.groupHeader && !Array.isArray(setup.groupHeader)) {\n      setup.groupHeader = [setup.groupHeader];\n    }\n    table.classList.add(\"tabulator-print-table\");\n    this.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n    if (list.length > 1000) {\n      console.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n    }\n    list.forEach((row, i) => {\n      let rowEl;\n      switch (row.type) {\n        case \"header\":\n          headerEl.appendChild(this.generateHeaderElement(row, setup, styles));\n          break;\n        case \"group\":\n          bodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n          break;\n        case \"calc\":\n          bodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n          break;\n        case \"row\":\n          rowEl = this.generateRowElement(row, setup, styles);\n          this.mapElementStyles(i % 2 && styles.evenRow ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n          bodyEl.appendChild(rowEl);\n          break;\n      }\n    });\n    if (headerEl.innerHTML) {\n      table.appendChild(headerEl);\n    }\n    table.appendChild(bodyEl);\n    this.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n    return table;\n  }\n  lookupTableStyles() {\n    var styles = {};\n\n    //lookup row styles\n    if (this.cloneTableStyle && window.getComputedStyle) {\n      styles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n      styles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n      if (styles.firstRow) {\n        styles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n        styles.firstCell = styles.styleCells[0];\n        styles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n      }\n    }\n    return styles;\n  }\n  generateHeaderElement(row, setup, styles) {\n    var rowEl = document.createElement(\"tr\");\n    row.columns.forEach(column => {\n      if (column) {\n        var cellEl = document.createElement(\"th\");\n        var classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n        cellEl.colSpan = column.width;\n        cellEl.rowSpan = column.height;\n        cellEl.innerHTML = column.value;\n        if (this.cloneTableStyle) {\n          cellEl.style.boxSizing = \"border-box\";\n        }\n        classNames.forEach(function (className) {\n          cellEl.classList.add(className);\n        });\n        this.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n        this.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n        if (column.component._column.visible) {\n          this.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n        } else {\n          if (column.component._column.definition.width) {\n            cellEl.style.width = column.component._column.definition.width + \"px\";\n          }\n        }\n        if (column.component._column.parent) {\n          this.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n        }\n        rowEl.appendChild(cellEl);\n      }\n    });\n    return rowEl;\n  }\n  generateGroupElement(row, setup, styles) {\n    var rowEl = document.createElement(\"tr\"),\n      cellEl = document.createElement(\"td\"),\n      group = row.columns[0];\n    rowEl.classList.add(\"tabulator-print-table-row\");\n    if (setup.groupHeader && setup.groupHeader[row.indent]) {\n      group.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n    } else {\n      if (setup.groupHeader !== false) {\n        group.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n      }\n    }\n    cellEl.colSpan = group.width;\n    cellEl.innerHTML = group.value;\n    rowEl.classList.add(\"tabulator-print-table-group\");\n    rowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n    if (group.component.isVisible()) {\n      rowEl.classList.add(\"tabulator-group-visible\");\n    }\n    this.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n    this.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n    rowEl.appendChild(cellEl);\n    return rowEl;\n  }\n  generateCalcElement(row, setup, styles) {\n    var rowEl = this.generateRowElement(row, setup, styles);\n    rowEl.classList.add(\"tabulator-print-table-calcs\");\n    this.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n    return rowEl;\n  }\n  generateRowElement(row, setup, styles) {\n    var rowEl = document.createElement(\"tr\");\n    rowEl.classList.add(\"tabulator-print-table-row\");\n    row.columns.forEach((col, i) => {\n      if (col) {\n        var cellEl = document.createElement(\"td\"),\n          column = col.component._column,\n          index = this.table.columnManager.findColumnIndex(column),\n          value = col.value,\n          cellStyle;\n        var cellWrapper = {\n          modules: {},\n          getValue: function () {\n            return value;\n          },\n          getField: function () {\n            return column.definition.field;\n          },\n          getElement: function () {\n            return cellEl;\n          },\n          getColumn: function () {\n            return column.getComponent();\n          },\n          getData: function () {\n            return row.component.getData();\n          },\n          getRow: function () {\n            return row.component;\n          },\n          getComponent: function () {\n            return cellWrapper;\n          },\n          column: column\n        };\n        var classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n        classNames.forEach(function (className) {\n          cellEl.classList.add(className);\n        });\n        if (this.table.modExists(\"format\") && this.config.formatCells !== false) {\n          value = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n        } else {\n          switch (typeof value) {\n            case \"object\":\n              value = value !== null ? JSON.stringify(value) : \"\";\n              break;\n            case \"undefined\":\n              value = \"\";\n              break;\n          }\n        }\n        if (value instanceof Node) {\n          cellEl.appendChild(value);\n        } else {\n          cellEl.innerHTML = value;\n        }\n        cellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n        if (cellStyle) {\n          this.mapElementStyles(cellStyle, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"]);\n          if (column.definition.align) {\n            cellEl.style.textAlign = column.definition.align;\n          }\n        }\n        if (this.table.options.dataTree && this.config.dataTree !== false) {\n          if (setup.treeElementField && setup.treeElementField == column.field || !setup.treeElementField && i == 0) {\n            if (row.component._row.modules.dataTree.controlEl) {\n              cellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n            }\n            if (row.component._row.modules.dataTree.branchEl) {\n              cellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n            }\n          }\n        }\n        rowEl.appendChild(cellEl);\n        if (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\n          cellWrapper.modules.format.renderedCallback();\n        }\n      }\n    });\n    if (setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false) {\n      let formatComponent = Object.assign(row.component);\n      formatComponent.getElement = function () {\n        return rowEl;\n      };\n      setup.rowFormatter(row.component);\n    }\n    return rowEl;\n  }\n  generateHTMLTable(list) {\n    var holder = document.createElement(\"div\");\n    holder.appendChild(this.generateTableElement(list));\n    return holder.innerHTML;\n  }\n  getHtml(visible, style, config, colVisProp) {\n    var list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n    return this.generateHTMLTable(list);\n  }\n  mapElementStyles(from, to, props) {\n    if (this.cloneTableStyle && from && to) {\n      var lookup = {\n        \"background-color\": \"backgroundColor\",\n        \"color\": \"fontColor\",\n        \"width\": \"width\",\n        \"font-weight\": \"fontWeight\",\n        \"font-family\": \"fontFamily\",\n        \"font-size\": \"fontSize\",\n        \"text-align\": \"textAlign\",\n        \"border-top\": \"borderTop\",\n        \"border-left\": \"borderLeft\",\n        \"border-right\": \"borderRight\",\n        \"border-bottom\": \"borderBottom\",\n        \"padding-top\": \"paddingTop\",\n        \"padding-left\": \"paddingLeft\",\n        \"padding-right\": \"paddingRight\",\n        \"padding-bottom\": \"paddingBottom\"\n      };\n      if (window.getComputedStyle) {\n        var fromStyle = window.getComputedStyle(from);\n        props.forEach(function (prop) {\n          if (!to.style[lookup[prop]]) {\n            to.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n          }\n        });\n      }\n    }\n  }\n}\nExport.moduleName = \"export\";\nvar defaultFilters = {\n  //equal to\n  \"=\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal == filterVal ? true : false;\n  },\n  //less than\n  \"<\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal < filterVal ? true : false;\n  },\n  //less than or equal to\n  \"<=\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal <= filterVal ? true : false;\n  },\n  //greater than\n  \">\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal > filterVal ? true : false;\n  },\n  //greater than or equal to\n  \">=\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal >= filterVal ? true : false;\n  },\n  //not equal to\n  \"!=\": function (filterVal, rowVal, rowData, filterParams) {\n    return rowVal != filterVal ? true : false;\n  },\n  \"regex\": function (filterVal, rowVal, rowData, filterParams) {\n    if (typeof filterVal == \"string\") {\n      filterVal = new RegExp(filterVal);\n    }\n    return filterVal.test(rowVal);\n  },\n  //contains the string\n  \"like\": function (filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n      } else {\n        return false;\n      }\n    }\n  },\n  //contains the keywords\n  \"keywords\": function (filterVal, rowVal, rowData, filterParams) {\n    var keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n      value = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n      matches = [];\n    keywords.forEach(keyword => {\n      if (value.includes(keyword)) {\n        matches.push(true);\n      }\n    });\n    return filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n  },\n  //starts with the string\n  \"starts\": function (filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n      } else {\n        return false;\n      }\n    }\n  },\n  //ends with the string\n  \"ends\": function (filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n      } else {\n        return false;\n      }\n    }\n  },\n  //in array\n  \"in\": function (filterVal, rowVal, rowData, filterParams) {\n    if (Array.isArray(filterVal)) {\n      return filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n    } else {\n      console.warn(\"Filter Error - filter value is not an array:\", filterVal);\n      return false;\n    }\n  }\n};\nclass Filter extends Module {\n  constructor(table) {\n    super(table);\n    this.filterList = []; //hold filter list\n    this.headerFilters = {}; //hold column filters\n    this.headerFilterColumns = []; //hold columns that use header filters\n\n    this.prevHeaderFilterChangeCheck = \"\";\n    this.prevHeaderFilterChangeCheck = \"{}\";\n    this.changed = false; //has filtering changed since last render\n    this.tableInitialized = false;\n    this.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n    this.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n    this.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n    this.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\n    this.registerColumnOption(\"headerFilter\");\n    this.registerColumnOption(\"headerFilterPlaceholder\");\n    this.registerColumnOption(\"headerFilterParams\");\n    this.registerColumnOption(\"headerFilterEmptyCheck\");\n    this.registerColumnOption(\"headerFilterFunc\");\n    this.registerColumnOption(\"headerFilterFuncParams\");\n    this.registerColumnOption(\"headerFilterLiveFilter\");\n    this.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n    this.registerTableFunction(\"searchData\", this.searchData.bind(this));\n    this.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n    this.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n    this.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n    this.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n    this.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n    this.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n    this.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n    this.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n    this.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n    this.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n    this.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n    this.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n    this.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n    this.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n    this.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n  }\n  initialize() {\n    this.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n    this.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n    this.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n    this.subscribe(\"table-built\", this.tableBuilt.bind(this));\n    if (this.table.options.filterMode === \"remote\") {\n      this.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n    }\n    this.registerDataHandler(this.filter.bind(this), 10);\n  }\n  tableBuilt() {\n    if (this.table.options.initialFilter) {\n      this.setFilter(this.table.options.initialFilter);\n    }\n    if (this.table.options.initialHeaderFilter) {\n      this.table.options.initialHeaderFilter.forEach(item => {\n        var column = this.table.columnManager.findColumn(item.field);\n        if (column) {\n          this.setHeaderFilterValue(column, item.value);\n        } else {\n          console.warn(\"Column Filter Error - No matching column found:\", item.field);\n          return false;\n        }\n      });\n    }\n    this.tableInitialized = true;\n  }\n  remoteFilterParams(data, config, silent, params) {\n    params.filter = this.getFilters(true, true);\n    return params;\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  //set standard filters\n  userSetFilter(field, type, value, params) {\n    this.setFilter(field, type, value, params);\n    this.refreshFilter();\n  }\n\n  //set standard filters\n  userRefreshFilter() {\n    this.refreshFilter();\n  }\n\n  //add filter to array\n  userAddFilter(field, type, value, params) {\n    this.addFilter(field, type, value, params);\n    this.refreshFilter();\n  }\n  userSetHeaderFilterFocus(field) {\n    var column = this.table.columnManager.findColumn(field);\n    if (column) {\n      this.setHeaderFilterFocus(column);\n    } else {\n      console.warn(\"Column Filter Focus Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  userGetHeaderFilterValue(field) {\n    var column = this.table.columnManager.findColumn(field);\n    if (column) {\n      return this.getHeaderFilterValue(column);\n    } else {\n      console.warn(\"Column Filter Error - No matching column found:\", field);\n    }\n  }\n  userSetHeaderFilterValue(field, value) {\n    var column = this.table.columnManager.findColumn(field);\n    if (column) {\n      this.setHeaderFilterValue(column, value);\n    } else {\n      console.warn(\"Column Filter Error - No matching column found:\", field);\n      return false;\n    }\n  }\n\n  //remove filter from array\n  userRemoveFilter(field, type, value) {\n    this.removeFilter(field, type, value);\n    this.refreshFilter();\n  }\n\n  //clear filters\n  userClearFilter(all) {\n    this.clearFilter(all);\n    this.refreshFilter();\n  }\n\n  //clear header filters\n  userClearHeaderFilter() {\n    this.clearHeaderFilter();\n    this.refreshFilter();\n  }\n\n  //search for specific row components\n  searchRows(field, type, value) {\n    return this.search(\"rows\", field, type, value);\n  }\n\n  //search for specific data\n  searchData(field, type, value) {\n    return this.search(\"data\", field, type, value);\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  initializeColumnHeaderFilter(column) {\n    var def = column.definition;\n    if (def.headerFilter) {\n      this.initializeColumn(column);\n    }\n  }\n\n  //initialize column header filter\n  initializeColumn(column, value) {\n    var self = this,\n      field = column.getField();\n\n    //handle successfully value change\n    function success(value) {\n      var filterType = column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\" || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n        type = \"\",\n        filterChangeCheck = \"\",\n        filterFunc;\n      if (typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value) {\n        column.modules.filter.prevSuccess = value;\n        if (!column.modules.filter.emptyFunc(value)) {\n          column.modules.filter.value = value;\n          switch (typeof column.definition.headerFilterFunc) {\n            case \"string\":\n              if (Filter.filters[column.definition.headerFilterFunc]) {\n                type = column.definition.headerFilterFunc;\n                filterFunc = function (data) {\n                  var params = column.definition.headerFilterFuncParams || {};\n                  var fieldVal = column.getFieldValue(data);\n                  params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                  return Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n                };\n              } else {\n                console.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n              }\n              break;\n            case \"function\":\n              filterFunc = function (data) {\n                var params = column.definition.headerFilterFuncParams || {};\n                var fieldVal = column.getFieldValue(data);\n                params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                return column.definition.headerFilterFunc(value, fieldVal, data, params);\n              };\n              type = filterFunc;\n              break;\n          }\n          if (!filterFunc) {\n            switch (filterType) {\n              case \"partial\":\n                filterFunc = function (data) {\n                  var colVal = column.getFieldValue(data);\n                  if (typeof colVal !== 'undefined' && colVal !== null) {\n                    return String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n                  } else {\n                    return false;\n                  }\n                };\n                type = \"like\";\n                break;\n              default:\n                filterFunc = function (data) {\n                  return column.getFieldValue(data) == value;\n                };\n                type = \"=\";\n            }\n          }\n          self.headerFilters[field] = {\n            value: value,\n            func: filterFunc,\n            type: type\n          };\n        } else {\n          delete self.headerFilters[field];\n        }\n        column.modules.filter.value = value;\n        filterChangeCheck = JSON.stringify(self.headerFilters);\n        if (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\n          self.prevHeaderFilterChangeCheck = filterChangeCheck;\n          self.trackChanges();\n          self.refreshFilter();\n        }\n      }\n      return true;\n    }\n    column.modules.filter = {\n      success: success,\n      attrType: false,\n      tagType: false,\n      emptyFunc: false\n    };\n    this.generateHeaderFilterElement(column);\n  }\n  generateHeaderFilterElement(column, initialValue, reinitialize) {\n    var self = this,\n      success = column.modules.filter.success,\n      field = column.getField(),\n      filterElement,\n      editor,\n      editorElement,\n      cellWrapper,\n      typingTimer,\n      searchTrigger,\n      params,\n      onRenderedCallback;\n    column.modules.filter.value = initialValue;\n\n    //handle aborted edit\n    function cancel() {}\n    function onRendered(callback) {\n      onRenderedCallback = callback;\n    }\n    if (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\n      column.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n    }\n    if (field) {\n      //set empty value function\n      column.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function (value) {\n        return !value && value !== 0;\n      };\n      filterElement = document.createElement(\"div\");\n      filterElement.classList.add(\"tabulator-header-filter\");\n\n      //set column editor\n      switch (typeof column.definition.headerFilter) {\n        case \"string\":\n          if (self.table.modules.edit.editors[column.definition.headerFilter]) {\n            editor = self.table.modules.edit.editors[column.definition.headerFilter];\n            if ((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n              column.modules.filter.emptyFunc = function (value) {\n                return value !== true && value !== false;\n              };\n            }\n          } else {\n            console.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n          }\n          break;\n        case \"function\":\n          editor = column.definition.headerFilter;\n          break;\n        case \"boolean\":\n          if (column.modules.edit && column.modules.edit.editor) {\n            editor = column.modules.edit.editor;\n          } else {\n            if (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\n              editor = self.table.modules.edit.editors[column.definition.formatter];\n              if ((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n                column.modules.filter.emptyFunc = function (value) {\n                  return value !== true && value !== false;\n                };\n              }\n            } else {\n              editor = self.table.modules.edit.editors[\"input\"];\n            }\n          }\n          break;\n      }\n      if (editor) {\n        cellWrapper = {\n          getValue: function () {\n            return typeof initialValue !== \"undefined\" ? initialValue : \"\";\n          },\n          getField: function () {\n            return column.definition.field;\n          },\n          getElement: function () {\n            return filterElement;\n          },\n          getColumn: function () {\n            return column.getComponent();\n          },\n          getTable: () => {\n            return this.table;\n          },\n          getRow: function () {\n            return {\n              normalizeHeight: function () {}\n            };\n          }\n        };\n        params = column.definition.headerFilterParams || {};\n        params = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n        editorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n        if (!editorElement) {\n          console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n          return;\n        }\n        if (!(editorElement instanceof Node)) {\n          console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n          return;\n        }\n\n        //set Placeholder Text\n        self.langBind(\"headerFilters|columns|\" + column.definition.field, function (value) {\n          editorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\"));\n        });\n\n        //focus on element on click\n        editorElement.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n          editorElement.focus();\n        });\n        editorElement.addEventListener(\"focus\", e => {\n          var left = this.table.columnManager.contentsElement.scrollLeft;\n          var headerPos = this.table.rowManager.element.scrollLeft;\n          if (left !== headerPos) {\n            this.table.rowManager.scrollHorizontal(left);\n            this.table.columnManager.scrollHorizontal(left);\n          }\n        });\n\n        //live update filters as user types\n        typingTimer = false;\n        searchTrigger = function (e) {\n          if (typingTimer) {\n            clearTimeout(typingTimer);\n          }\n          typingTimer = setTimeout(function () {\n            success(editorElement.value);\n          }, self.table.options.headerFilterLiveFilterDelay);\n        };\n        column.modules.filter.headerElement = editorElement;\n        column.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\";\n        column.modules.filter.tagType = editorElement.tagName.toLowerCase();\n        if (column.definition.headerFilterLiveFilter !== false) {\n          if (!(column.definition.headerFilter === 'autocomplete' || column.definition.headerFilter === 'tickCross' || (column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') && column.definition.headerFilter === true)) {\n            editorElement.addEventListener(\"keyup\", searchTrigger);\n            editorElement.addEventListener(\"search\", searchTrigger);\n\n            //update number filtered columns on change\n            if (column.modules.filter.attrType == \"number\") {\n              editorElement.addEventListener(\"change\", function (e) {\n                success(editorElement.value);\n              });\n            }\n\n            //change text inputs to search inputs to allow for clearing of field\n            if (column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\") {\n              editorElement.setAttribute(\"type\", \"search\");\n              // editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n            }\n          }\n\n          //prevent input and select elements from propagating click to column sorters etc\n          if (column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\") {\n            editorElement.addEventListener(\"mousedown\", function (e) {\n              e.stopPropagation();\n            });\n          }\n        }\n        filterElement.appendChild(editorElement);\n        column.contentElement.appendChild(filterElement);\n        if (!reinitialize) {\n          self.headerFilterColumns.push(column);\n        }\n        if (onRenderedCallback) {\n          onRenderedCallback();\n        }\n      }\n    } else {\n      console.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n    }\n  }\n\n  //hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n  hideHeaderFilterElements() {\n    this.headerFilterColumns.forEach(function (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        column.modules.filter.headerElement.style.display = 'none';\n      }\n    });\n  }\n\n  //show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n  showHeaderFilterElements() {\n    this.headerFilterColumns.forEach(function (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        column.modules.filter.headerElement.style.display = '';\n      }\n    });\n  }\n\n  //programmatically set focus of header filter\n  setHeaderFilterFocus(column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      column.modules.filter.headerElement.focus();\n    } else {\n      console.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n    }\n  }\n\n  //programmatically get value of header filter\n  getHeaderFilterValue(column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      return column.modules.filter.value;\n    } else {\n      console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n    }\n  }\n\n  //programmatically set value of header filter\n  setHeaderFilterValue(column, value) {\n    if (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        this.generateHeaderFilterElement(column, value, true);\n        column.modules.filter.success(value);\n      } else {\n        console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n      }\n    }\n  }\n  reloadHeaderFilter(column) {\n    if (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        this.generateHeaderFilterElement(column, column.modules.filter.value, true);\n      } else {\n        console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n      }\n    }\n  }\n  refreshFilter() {\n    if (this.tableInitialized) {\n      if (this.table.options.filterMode === \"remote\") {\n        this.reloadData(null, false, false);\n      } else {\n        this.refreshData(true);\n      }\n    }\n\n    //TODO - Persist left position of row manager\n    // left = this.scrollLeft;\n    // this.scrollHorizontal(left);\n  }\n\n  //check if the filters has changed since last use\n  trackChanges() {\n    this.changed = true;\n    this.dispatch(\"filter-changed\");\n  }\n\n  //check if the filters has changed since last use\n  hasChanged() {\n    var changed = this.changed;\n    this.changed = false;\n    return changed;\n  }\n\n  //set standard filters\n  setFilter(field, type, value, params) {\n    this.filterList = [];\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value,\n        params: params\n      }];\n    }\n    this.addFilter(field);\n  }\n\n  //add filter to array\n  addFilter(field, type, value, params) {\n    var changed = false;\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value,\n        params: params\n      }];\n    }\n    field.forEach(filter => {\n      filter = this.findFilter(filter);\n      if (filter) {\n        this.filterList.push(filter);\n        changed = true;\n      }\n    });\n    if (changed) {\n      this.trackChanges();\n    }\n  }\n  findFilter(filter) {\n    var column;\n    if (Array.isArray(filter)) {\n      return this.findSubFilters(filter);\n    }\n    var filterFunc = false;\n    if (typeof filter.field == \"function\") {\n      filterFunc = function (data) {\n        return filter.field(data, filter.type || {}); // pass params to custom filter function\n      };\n    } else {\n      if (Filter.filters[filter.type]) {\n        column = this.table.columnManager.getColumnByField(filter.field);\n        if (column) {\n          filterFunc = function (data) {\n            return Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n          };\n        } else {\n          filterFunc = function (data) {\n            return Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n          };\n        }\n      } else {\n        console.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n      }\n    }\n    filter.func = filterFunc;\n    return filter.func ? filter : false;\n  }\n  findSubFilters(filters) {\n    var output = [];\n    filters.forEach(filter => {\n      filter = this.findFilter(filter);\n      if (filter) {\n        output.push(filter);\n      }\n    });\n    return output.length ? output : false;\n  }\n\n  //get all filters\n  getFilters(all, ajax) {\n    var output = [];\n    if (all) {\n      output = this.getHeaderFilters();\n    }\n    if (ajax) {\n      output.forEach(function (item) {\n        if (typeof item.type == \"function\") {\n          item.type = \"function\";\n        }\n      });\n    }\n    output = output.concat(this.filtersToArray(this.filterList, ajax));\n    return output;\n  }\n\n  //filter to Object\n  filtersToArray(filterList, ajax) {\n    var output = [];\n    filterList.forEach(filter => {\n      var item;\n      if (Array.isArray(filter)) {\n        output.push(this.filtersToArray(filter, ajax));\n      } else {\n        item = {\n          field: filter.field,\n          type: filter.type,\n          value: filter.value\n        };\n        if (ajax) {\n          if (typeof item.type == \"function\") {\n            item.type = \"function\";\n          }\n        }\n        output.push(item);\n      }\n    });\n    return output;\n  }\n\n  //get all filters\n  getHeaderFilters() {\n    var output = [];\n    for (var key in this.headerFilters) {\n      output.push({\n        field: key,\n        type: this.headerFilters[key].type,\n        value: this.headerFilters[key].value\n      });\n    }\n    return output;\n  }\n\n  //remove filter from array\n  removeFilter(field, type, value) {\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n    field.forEach(filter => {\n      var index = -1;\n      if (typeof filter.field == \"object\") {\n        index = this.filterList.findIndex(element => {\n          return filter === element;\n        });\n      } else {\n        index = this.filterList.findIndex(element => {\n          return filter.field === element.field && filter.type === element.type && filter.value === element.value;\n        });\n      }\n      if (index > -1) {\n        this.filterList.splice(index, 1);\n      } else {\n        console.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n      }\n    });\n    this.trackChanges();\n  }\n\n  //clear filters\n  clearFilter(all) {\n    this.filterList = [];\n    if (all) {\n      this.clearHeaderFilter();\n    }\n    this.trackChanges();\n  }\n\n  //clear header filters\n  clearHeaderFilter() {\n    this.headerFilters = {};\n    this.prevHeaderFilterChangeCheck = \"{}\";\n    this.headerFilterColumns.forEach(column => {\n      if (typeof column.modules.filter.value !== \"undefined\") {\n        delete column.modules.filter.value;\n      }\n      column.modules.filter.prevSuccess = undefined;\n      this.reloadHeaderFilter(column);\n    });\n    this.trackChanges();\n  }\n\n  //search data and return matching rows\n  search(searchType, field, type, value) {\n    var activeRows = [],\n      filterList = [];\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n    field.forEach(filter => {\n      filter = this.findFilter(filter);\n      if (filter) {\n        filterList.push(filter);\n      }\n    });\n    this.table.rowManager.rows.forEach(row => {\n      var match = true;\n      filterList.forEach(filter => {\n        if (!this.filterRecurse(filter, row.getData())) {\n          match = false;\n        }\n      });\n      if (match) {\n        activeRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n      }\n    });\n    return activeRows;\n  }\n\n  //filter row array\n  filter(rowList, filters) {\n    var activeRows = [],\n      activeRowComponents = [];\n    if (this.subscribedExternal(\"dataFiltering\")) {\n      this.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n    }\n    if (this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)) {\n      rowList.forEach(row => {\n        if (this.filterRow(row)) {\n          activeRows.push(row);\n        }\n      });\n    } else {\n      activeRows = rowList.slice(0);\n    }\n    if (this.subscribedExternal(\"dataFiltered\")) {\n      activeRows.forEach(row => {\n        activeRowComponents.push(row.getComponent());\n      });\n      this.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n    }\n    return activeRows;\n  }\n\n  //filter individual row\n  filterRow(row, filters) {\n    var match = true,\n      data = row.getData();\n    this.filterList.forEach(filter => {\n      if (!this.filterRecurse(filter, data)) {\n        match = false;\n      }\n    });\n    for (var field in this.headerFilters) {\n      if (!this.headerFilters[field].func(data)) {\n        match = false;\n      }\n    }\n    return match;\n  }\n  filterRecurse(filter, data) {\n    var match = false;\n    if (Array.isArray(filter)) {\n      filter.forEach(subFilter => {\n        if (this.filterRecurse(subFilter, data)) {\n          match = true;\n        }\n      });\n    } else {\n      match = filter.func(data);\n    }\n    return match;\n  }\n}\nFilter.moduleName = \"filter\";\n\n//load defaults\nFilter.filters = defaultFilters;\nfunction plaintext(cell, formatterParams, onRendered) {\n  return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}\nfunction html$1(cell, formatterParams, onRendered) {\n  return cell.getValue();\n}\nfunction textarea$1(cell, formatterParams, onRendered) {\n  cell.getElement().style.whiteSpace = \"pre-wrap\";\n  return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}\nfunction money(cell, formatterParams, onRendered) {\n  var floatVal = parseFloat(cell.getValue()),\n    sign = \"\",\n    number,\n    integer,\n    decimal,\n    rgx;\n  var decimalSym = formatterParams.decimal || \".\";\n  var thousandSym = formatterParams.thousand || \",\";\n  var negativeSign = formatterParams.negativeSign || \"-\";\n  var symbol = formatterParams.symbol || \"\";\n  var after = !!formatterParams.symbolAfter;\n  var precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n  if (isNaN(floatVal)) {\n    return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n  }\n  if (floatVal < 0) {\n    floatVal = Math.abs(floatVal);\n    sign = negativeSign;\n  }\n  number = precision !== false ? floatVal.toFixed(precision) : floatVal;\n  number = String(number).split(\".\");\n  integer = number[0];\n  decimal = number.length > 1 ? decimalSym + number[1] : \"\";\n  if (formatterParams.thousand !== false) {\n    rgx = /(\\d+)(\\d{3})/;\n    while (rgx.test(integer)) {\n      integer = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n    }\n  }\n  return after ? sign + integer + decimal + symbol : sign + symbol + integer + decimal;\n}\nfunction link(cell, formatterParams, onRendered) {\n  var value = cell.getValue(),\n    urlPrefix = formatterParams.urlPrefix || \"\",\n    download = formatterParams.download,\n    label = value,\n    el = document.createElement(\"a\"),\n    data;\n  function labelTraverse(path, data) {\n    var item = path.shift(),\n      value = data[item];\n    if (path.length && typeof value === \"object\") {\n      return labelTraverse(path, value);\n    }\n    return value;\n  }\n  if (formatterParams.labelField) {\n    data = cell.getData();\n    label = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n  }\n  if (formatterParams.label) {\n    switch (typeof formatterParams.label) {\n      case \"string\":\n        label = formatterParams.label;\n        break;\n      case \"function\":\n        label = formatterParams.label(cell);\n        break;\n    }\n  }\n  if (label) {\n    if (formatterParams.urlField) {\n      data = cell.getData();\n      value = data[formatterParams.urlField];\n    }\n    if (formatterParams.url) {\n      switch (typeof formatterParams.url) {\n        case \"string\":\n          value = formatterParams.url;\n          break;\n        case \"function\":\n          value = formatterParams.url(cell);\n          break;\n      }\n    }\n    el.setAttribute(\"href\", urlPrefix + value);\n    if (formatterParams.target) {\n      el.setAttribute(\"target\", formatterParams.target);\n    }\n    if (formatterParams.download) {\n      if (typeof download == \"function\") {\n        download = download(cell);\n      } else {\n        download = download === true ? \"\" : download;\n      }\n      el.setAttribute(\"download\", download);\n    }\n    el.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n    return el;\n  } else {\n    return \"&nbsp;\";\n  }\n}\nfunction image(cell, formatterParams, onRendered) {\n  var el = document.createElement(\"img\"),\n    src = cell.getValue();\n  if (formatterParams.urlPrefix) {\n    src = formatterParams.urlPrefix + cell.getValue();\n  }\n  if (formatterParams.urlSuffix) {\n    src = src + formatterParams.urlSuffix;\n  }\n  el.setAttribute(\"src\", src);\n  switch (typeof formatterParams.height) {\n    case \"number\":\n      el.style.height = formatterParams.height + \"px\";\n      break;\n    case \"string\":\n      el.style.height = formatterParams.height;\n      break;\n  }\n  switch (typeof formatterParams.width) {\n    case \"number\":\n      el.style.width = formatterParams.width + \"px\";\n      break;\n    case \"string\":\n      el.style.width = formatterParams.width;\n      break;\n  }\n  el.addEventListener(\"load\", function () {\n    cell.getRow().normalizeHeight();\n  });\n  return el;\n}\nfunction tickCross$1(cell, formatterParams, onRendered) {\n  var value = cell.getValue(),\n    element = cell.getElement(),\n    empty = formatterParams.allowEmpty,\n    truthy = formatterParams.allowTruthy,\n    trueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n    tick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n    cross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n  if (trueValueSet && value === formatterParams.trueValue || !trueValueSet && (truthy && value || value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")) {\n    element.setAttribute(\"aria-checked\", true);\n    return tick || \"\";\n  } else {\n    if (empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")) {\n      element.setAttribute(\"aria-checked\", \"mixed\");\n      return \"\";\n    } else {\n      element.setAttribute(\"aria-checked\", false);\n      return cross || \"\";\n    }\n  }\n}\nfunction datetime$1(cell, formatterParams, onRendered) {\n  var DT = window.DateTime || luxon.DateTime;\n  var inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n  var outputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n  var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n  var value = cell.getValue();\n  if (typeof DT != \"undefined\") {\n    var newDatetime;\n    if (DT.isDateTime(value)) {\n      newDatetime = value;\n    } else if (inputFormat === \"iso\") {\n      newDatetime = DT.fromISO(String(value));\n    } else {\n      newDatetime = DT.fromFormat(String(value), inputFormat);\n    }\n    if (newDatetime.isValid) {\n      if (formatterParams.timezone) {\n        newDatetime = newDatetime.setZone(formatterParams.timezone);\n      }\n      return newDatetime.toFormat(outputFormat);\n    } else {\n      if (invalid === true || !value) {\n        return value;\n      } else if (typeof invalid === \"function\") {\n        return invalid(value);\n      } else {\n        return invalid;\n      }\n    }\n  } else {\n    console.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n  }\n}\nfunction datetimediff(cell, formatterParams, onRendered) {\n  var DT = window.DateTime || luxon.DateTime;\n  var inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n  var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n  var suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n  var unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n  var humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n  var date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n  var value = cell.getValue();\n  if (typeof DT != \"undefined\") {\n    var newDatetime;\n    if (DT.isDateTime(value)) {\n      newDatetime = value;\n    } else if (inputFormat === \"iso\") {\n      newDatetime = DT.fromISO(String(value));\n    } else {\n      newDatetime = DT.fromFormat(String(value), inputFormat);\n    }\n    if (newDatetime.isValid) {\n      if (humanize) {\n        return newDatetime.diff(date, unit).toHuman() + (suffix ? \" \" + suffix : \"\");\n      } else {\n        return parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n      }\n    } else {\n      if (invalid === true) {\n        return value;\n      } else if (typeof invalid === \"function\") {\n        return invalid(value);\n      } else {\n        return invalid;\n      }\n    }\n  } else {\n    console.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n  }\n}\nfunction lookup(cell, formatterParams, onRendered) {\n  var value = cell.getValue();\n  if (typeof formatterParams[value] === \"undefined\") {\n    console.warn('Missing display value for ' + value);\n    return value;\n  }\n  return formatterParams[value];\n}\nfunction star$1(cell, formatterParams, onRendered) {\n  var value = cell.getValue(),\n    element = cell.getElement(),\n    maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n    stars = document.createElement(\"span\"),\n    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n    starActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n    starInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n  //style stars holder\n  stars.style.verticalAlign = \"middle\";\n\n  //style star\n  star.setAttribute(\"width\", \"14\");\n  star.setAttribute(\"height\", \"14\");\n  star.setAttribute(\"viewBox\", \"0 0 512 512\");\n  star.setAttribute(\"xml:space\", \"preserve\");\n  star.style.padding = \"0 1px\";\n  value = value && !isNaN(value) ? parseInt(value) : 0;\n  value = Math.max(0, Math.min(value, maxStars));\n  for (var i = 1; i <= maxStars; i++) {\n    var nextStar = star.cloneNode(true);\n    nextStar.innerHTML = i <= value ? starActive : starInactive;\n    stars.appendChild(nextStar);\n  }\n  element.style.whiteSpace = \"nowrap\";\n  element.style.overflow = \"hidden\";\n  element.style.textOverflow = \"ellipsis\";\n  element.setAttribute(\"aria-label\", value);\n  return stars;\n}\nfunction traffic(cell, formatterParams, onRendered) {\n  var value = this.sanitizeHTML(cell.getValue()) || 0,\n    el = document.createElement(\"span\"),\n    max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n    min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n    colors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n    color = \"#666666\",\n    percent,\n    percentValue;\n  if (isNaN(value) || typeof cell.getValue() === \"undefined\") {\n    return;\n  }\n  el.classList.add(\"tabulator-traffic-light\");\n\n  //make sure value is in range\n  percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n  percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n  //workout percentage\n  percent = (max - min) / 100;\n  percentValue = Math.round((percentValue - min) / percent);\n\n  //set color\n  switch (typeof colors) {\n    case \"string\":\n      color = colors;\n      break;\n    case \"function\":\n      color = colors(value);\n      break;\n    case \"object\":\n      if (Array.isArray(colors)) {\n        var unit = 100 / colors.length;\n        var index = Math.floor(percentValue / unit);\n        index = Math.min(index, colors.length - 1);\n        index = Math.max(index, 0);\n        color = colors[index];\n        break;\n      }\n  }\n  el.style.backgroundColor = color;\n  return el;\n}\nfunction progress$1(cell) {\n  let formatterParams = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let onRendered = arguments.length > 2 ? arguments[2] : undefined;\n  //progress bar\n  var value = this.sanitizeHTML(cell.getValue()) || 0,\n    element = cell.getElement(),\n    max = formatterParams.max ? formatterParams.max : 100,\n    min = formatterParams.min ? formatterParams.min : 0,\n    legendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n    percent,\n    percentValue,\n    color,\n    legend,\n    legendColor;\n\n  //make sure value is in range\n  percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n  percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n  //workout percentage\n  percent = (max - min) / 100;\n  percentValue = Math.round((percentValue - min) / percent);\n\n  //set bar color\n  switch (typeof formatterParams.color) {\n    case \"string\":\n      color = formatterParams.color;\n      break;\n    case \"function\":\n      color = formatterParams.color(value);\n      break;\n    case \"object\":\n      if (Array.isArray(formatterParams.color)) {\n        let unit = 100 / formatterParams.color.length;\n        let index = Math.floor(percentValue / unit);\n        index = Math.min(index, formatterParams.color.length - 1);\n        index = Math.max(index, 0);\n        color = formatterParams.color[index];\n        break;\n      }\n    default:\n      color = \"#2DC214\";\n  }\n\n  //generate legend\n  switch (typeof formatterParams.legend) {\n    case \"string\":\n      legend = formatterParams.legend;\n      break;\n    case \"function\":\n      legend = formatterParams.legend(value);\n      break;\n    case \"boolean\":\n      legend = value;\n      break;\n    default:\n      legend = false;\n  }\n\n  //set legend color\n  switch (typeof formatterParams.legendColor) {\n    case \"string\":\n      legendColor = formatterParams.legendColor;\n      break;\n    case \"function\":\n      legendColor = formatterParams.legendColor(value);\n      break;\n    case \"object\":\n      if (Array.isArray(formatterParams.legendColor)) {\n        let unit = 100 / formatterParams.legendColor.length;\n        let index = Math.floor(percentValue / unit);\n        index = Math.min(index, formatterParams.legendColor.length - 1);\n        index = Math.max(index, 0);\n        legendColor = formatterParams.legendColor[index];\n      }\n      break;\n    default:\n      legendColor = \"#000\";\n  }\n  element.style.minWidth = \"30px\";\n  element.style.position = \"relative\";\n  element.setAttribute(\"aria-label\", percentValue);\n  var barEl = document.createElement(\"div\");\n  barEl.style.display = \"inline-block\";\n  barEl.style.width = percentValue + \"%\";\n  barEl.style.backgroundColor = color;\n  barEl.style.height = \"100%\";\n  barEl.setAttribute('data-max', max);\n  barEl.setAttribute('data-min', min);\n  var barContainer = document.createElement(\"div\");\n  barContainer.style.position = \"relative\";\n  barContainer.style.width = \"100%\";\n  barContainer.style.height = \"100%\";\n  if (legend) {\n    var legendEl = document.createElement(\"div\");\n    legendEl.style.position = \"absolute\";\n    legendEl.style.top = 0;\n    legendEl.style.left = 0;\n    legendEl.style.textAlign = legendAlign;\n    legendEl.style.width = \"100%\";\n    legendEl.style.color = legendColor;\n    legendEl.innerHTML = legend;\n  }\n  onRendered(function () {\n    //handle custom element needed if formatter is to be included in printed/downloaded output\n    if (!(cell instanceof CellComponent)) {\n      var holderEl = document.createElement(\"div\");\n      holderEl.style.position = \"absolute\";\n      holderEl.style.top = \"4px\";\n      holderEl.style.bottom = \"4px\";\n      holderEl.style.left = \"4px\";\n      holderEl.style.right = \"4px\";\n      element.appendChild(holderEl);\n      element = holderEl;\n    }\n    element.appendChild(barContainer);\n    barContainer.appendChild(barEl);\n    if (legend) {\n      barContainer.appendChild(legendEl);\n    }\n  });\n  return \"\";\n}\nfunction color(cell, formatterParams, onRendered) {\n  cell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n  return \"\";\n}\nfunction buttonTick(cell, formatterParams, onRendered) {\n  return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}\nfunction buttonCross(cell, formatterParams, onRendered) {\n  return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}\nfunction rownum(cell, formatterParams, onRendered) {\n  var content = document.createElement(\"span\");\n  var row = cell.getRow();\n  row.watchPosition(position => {\n    content.innerText = position;\n  });\n  return content;\n}\nfunction handle(cell, formatterParams, onRendered) {\n  cell.getElement().classList.add(\"tabulator-row-handle\");\n  return \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}\nfunction responsiveCollapse(cell, formatterParams, onRendered) {\n  var el = document.createElement(\"div\"),\n    config = cell.getRow()._row.modules.responsiveLayout;\n  el.classList.add(\"tabulator-responsive-collapse-toggle\");\n  el.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n  cell.getElement().classList.add(\"tabulator-row-handle\");\n  function toggleList(isOpen) {\n    var collapseEl = config.element;\n    config.open = isOpen;\n    if (collapseEl) {\n      if (config.open) {\n        el.classList.add(\"open\");\n        collapseEl.style.display = '';\n      } else {\n        el.classList.remove(\"open\");\n        collapseEl.style.display = 'none';\n      }\n    }\n  }\n  el.addEventListener(\"click\", function (e) {\n    e.stopImmediatePropagation();\n    toggleList(!config.open);\n    cell.getTable().rowManager.adjustTableSize();\n  });\n  toggleList(config.open);\n  return el;\n}\nfunction rowSelection(cell, formatterParams, onRendered) {\n  var checkbox = document.createElement(\"input\");\n  var blocked = false;\n  checkbox.type = 'checkbox';\n  checkbox.setAttribute(\"aria-label\", \"Select Row\");\n  if (this.table.modExists(\"selectRow\", true)) {\n    checkbox.addEventListener(\"click\", e => {\n      e.stopPropagation();\n    });\n    if (typeof cell.getRow == 'function') {\n      var row = cell.getRow();\n      if (row instanceof RowComponent) {\n        checkbox.addEventListener(\"change\", e => {\n          if (this.table.options.selectableRangeMode === \"click\") {\n            if (!blocked) {\n              row.toggleSelect();\n            } else {\n              blocked = false;\n            }\n          } else {\n            row.toggleSelect();\n          }\n        });\n        if (this.table.options.selectableRangeMode === \"click\") {\n          checkbox.addEventListener(\"click\", e => {\n            blocked = true;\n            this.table.modules.selectRow.handleComplexRowClick(row._row, e);\n          });\n        }\n        checkbox.checked = row.isSelected && row.isSelected();\n        this.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n      } else {\n        checkbox = \"\";\n      }\n    } else {\n      checkbox.addEventListener(\"change\", e => {\n        if (this.table.modules.selectRow.selectedRows.length) {\n          this.table.deselectRow();\n        } else {\n          this.table.selectRow(formatterParams.rowRange);\n        }\n      });\n      this.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n    }\n  }\n  return checkbox;\n}\nvar defaultFormatters = {\n  plaintext: plaintext,\n  html: html$1,\n  textarea: textarea$1,\n  money: money,\n  link: link,\n  image: image,\n  tickCross: tickCross$1,\n  datetime: datetime$1,\n  datetimediff: datetimediff,\n  lookup: lookup,\n  star: star$1,\n  traffic: traffic,\n  progress: progress$1,\n  color: color,\n  buttonTick: buttonTick,\n  buttonCross: buttonCross,\n  rownum: rownum,\n  handle: handle,\n  responsiveCollapse: responsiveCollapse,\n  rowSelection: rowSelection\n};\nclass Format extends Module {\n  constructor(table) {\n    super(table);\n    this.registerColumnOption(\"formatter\");\n    this.registerColumnOption(\"formatterParams\");\n    this.registerColumnOption(\"formatterPrint\");\n    this.registerColumnOption(\"formatterPrintParams\");\n    this.registerColumnOption(\"formatterClipboard\");\n    this.registerColumnOption(\"formatterClipboardParams\");\n    this.registerColumnOption(\"formatterHtmlOutput\");\n    this.registerColumnOption(\"formatterHtmlOutputParams\");\n    this.registerColumnOption(\"titleFormatter\");\n    this.registerColumnOption(\"titleFormatterParams\");\n  }\n  initialize() {\n    this.subscribe(\"cell-format\", this.formatValue.bind(this));\n    this.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n    this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n    this.subscribe(\"column-format\", this.formatHeader.bind(this));\n  }\n\n  //initialize column formatter\n  initializeColumn(column) {\n    column.modules.format = this.lookupFormatter(column, \"\");\n    if (typeof column.definition.formatterPrint !== \"undefined\") {\n      column.modules.format.print = this.lookupFormatter(column, \"Print\");\n    }\n    if (typeof column.definition.formatterClipboard !== \"undefined\") {\n      column.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n    }\n    if (typeof column.definition.formatterHtmlOutput !== \"undefined\") {\n      column.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n    }\n  }\n  lookupFormatter(column, type) {\n    var config = {\n        params: column.definition[\"formatter\" + type + \"Params\"] || {}\n      },\n      formatter = column.definition[\"formatter\" + type];\n\n    //set column formatter\n    switch (typeof formatter) {\n      case \"string\":\n        if (Format.formatters[formatter]) {\n          config.formatter = Format.formatters[formatter];\n        } else {\n          console.warn(\"Formatter Error - No such formatter found: \", formatter);\n          config.formatter = Format.formatters.plaintext;\n        }\n        break;\n      case \"function\":\n        config.formatter = formatter;\n        break;\n      default:\n        config.formatter = Format.formatters.plaintext;\n        break;\n    }\n    return config;\n  }\n  cellRendered(cell) {\n    if (cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered) {\n      cell.modules.format.renderedCallback();\n      cell.modules.format.rendered = true;\n    }\n  }\n\n  //return a formatted value for a column header\n  formatHeader(column, title, el) {\n    var formatter, params, onRendered, mockCell;\n    if (column.definition.titleFormatter) {\n      formatter = this.getFormatter(column.definition.titleFormatter);\n      onRendered = callback => {\n        column.titleFormatterRendered = callback;\n      };\n      mockCell = {\n        getValue: function () {\n          return title;\n        },\n        getElement: function () {\n          return el;\n        },\n        getColumn: function () {\n          return column.getComponent();\n        },\n        getTable: () => {\n          return this.table;\n        }\n      };\n      params = column.definition.titleFormatterParams || {};\n      params = typeof params === \"function\" ? params() : params;\n      return formatter.call(this, mockCell, params, onRendered);\n    } else {\n      return title;\n    }\n  }\n\n  //return a formatted value for a cell\n  formatValue(cell) {\n    var component = cell.getComponent(),\n      params = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n    function onRendered(callback) {\n      if (!cell.modules.format) {\n        cell.modules.format = {};\n      }\n      cell.modules.format.renderedCallback = callback;\n      cell.modules.format.rendered = false;\n    }\n    return cell.column.modules.format.formatter.call(this, component, params, onRendered);\n  }\n  formatExportValue(cell, type) {\n    var formatter = cell.column.modules.format[type],\n      params;\n    if (formatter) {\n      params = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n      function onRendered(callback) {\n        if (!cell.modules.format) {\n          cell.modules.format = {};\n        }\n        cell.modules.format.renderedCallback = callback;\n        cell.modules.format.rendered = false;\n      }\n      return formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n    } else {\n      return this.formatValue(cell);\n    }\n  }\n  sanitizeHTML(value) {\n    if (value) {\n      var entityMap = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;',\n        '`': '&#x60;',\n        '=': '&#x3D;'\n      };\n      return String(value).replace(/[&<>\"'`=/]/g, function (s) {\n        return entityMap[s];\n      });\n    } else {\n      return value;\n    }\n  }\n  emptyToSpace(value) {\n    return value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n  }\n\n  //get formatter for cell\n  getFormatter(formatter) {\n    switch (typeof formatter) {\n      case \"string\":\n        if (Format.formatters[formatter]) {\n          formatter = Format.formatters[formatter];\n        } else {\n          console.warn(\"Formatter Error - No such formatter found: \", formatter);\n          formatter = Format.formatters.plaintext;\n        }\n        break;\n      case \"function\":\n        //Custom formatter Function, do nothing\n        break;\n      default:\n        formatter = Format.formatters.plaintext;\n        break;\n    }\n    return formatter;\n  }\n}\nFormat.moduleName = \"format\";\n\n//load defaults\nFormat.formatters = defaultFormatters;\nclass FrozenColumns extends Module {\n  constructor(table) {\n    super(table);\n    this.leftColumns = [];\n    this.rightColumns = [];\n    this.initializationMode = \"left\";\n    this.active = false;\n    this.blocked = true;\n    this.registerColumnOption(\"frozen\");\n  }\n\n  //reset initial state\n  reset() {\n    this.initializationMode = \"left\";\n    this.leftColumns = [];\n    this.rightColumns = [];\n    this.active = false;\n  }\n  initialize() {\n    this.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n    this.subscribe(\"column-width\", this.layout.bind(this));\n    this.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n    this.subscribe(\"table-layout\", this.layout.bind(this));\n    this.subscribe(\"columns-loading\", this.reset.bind(this));\n    this.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n    this.subscribe(\"column-delete\", this.reinitializeColumns.bind(this));\n    this.subscribe(\"table-redraw\", this.layout.bind(this));\n    this.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n    this.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n    this.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n  }\n  blockLayout() {\n    this.blocked = true;\n  }\n  unblockLayout() {\n    this.blocked = false;\n  }\n  layoutCell(cell) {\n    this.layoutElement(cell.element, cell.column);\n  }\n  reinitializeColumns() {\n    this.reset();\n    this.table.columnManager.columnsByIndex.forEach(column => {\n      this.initializeColumn(column);\n    });\n  }\n\n  //initialize specific column\n  initializeColumn(column) {\n    var config = {\n      margin: 0,\n      edge: false\n    };\n    if (!column.isGroup) {\n      if (this.frozenCheck(column)) {\n        config.position = this.initializationMode;\n        if (this.initializationMode == \"left\") {\n          this.leftColumns.push(column);\n        } else {\n          this.rightColumns.unshift(column);\n        }\n        this.active = true;\n        column.modules.frozen = config;\n      } else {\n        this.initializationMode = \"right\";\n      }\n    }\n  }\n  frozenCheck(column) {\n    if (column.parent.isGroup && column.definition.frozen) {\n      console.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n    }\n    if (column.parent.isGroup) {\n      return this.frozenCheck(column.parent);\n    } else {\n      return column.definition.frozen;\n    }\n  }\n\n  //layout calculation rows\n  layoutCalcRows() {\n    if (this.table.modExists(\"columnCalcs\")) {\n      if (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\n        this.layoutRow(this.table.modules.columnCalcs.topRow);\n      }\n      if (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\n        this.layoutRow(this.table.modules.columnCalcs.botRow);\n      }\n      if (this.table.modExists(\"groupRows\")) {\n        this.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n      }\n    }\n  }\n  layoutGroupCalcs(groups) {\n    groups.forEach(group => {\n      if (group.calcs.top) {\n        this.layoutRow(group.calcs.top);\n      }\n      if (group.calcs.bottom) {\n        this.layoutRow(group.calcs.bottom);\n      }\n      if (group.groupList && group.groupList.length) {\n        this.layoutGroupCalcs(group.groupList);\n      }\n    });\n  }\n\n  //calculate column positions and layout headers\n  layoutColumnPosition(allCells) {\n    var leftParents = [];\n    var leftMargin = 0;\n    var rightMargin = 0;\n    this.leftColumns.forEach((column, i) => {\n      column.modules.frozen.marginValue = leftMargin;\n      column.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n      if (column.visible) {\n        leftMargin += column.getWidth();\n      }\n      if (i == this.leftColumns.length - 1) {\n        column.modules.frozen.edge = true;\n      } else {\n        column.modules.frozen.edge = false;\n      }\n      if (column.parent.isGroup) {\n        var parentEl = this.getColGroupParentElement(column);\n        if (!leftParents.includes(parentEl)) {\n          this.layoutElement(parentEl, column);\n          leftParents.push(parentEl);\n        }\n        if (column.modules.frozen.edge) {\n          parentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n        }\n      } else {\n        this.layoutElement(column.getElement(), column);\n      }\n      if (allCells) {\n        column.cells.forEach(cell => {\n          this.layoutElement(cell.getElement(true), column);\n        });\n      }\n    });\n    this.rightColumns.forEach((column, i) => {\n      column.modules.frozen.marginValue = rightMargin;\n      column.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n      if (column.visible) {\n        rightMargin += column.getWidth();\n      }\n      if (i == this.rightColumns.length - 1) {\n        column.modules.frozen.edge = true;\n      } else {\n        column.modules.frozen.edge = false;\n      }\n      if (column.parent.isGroup) {\n        this.layoutElement(this.getColGroupParentElement(column), column);\n      } else {\n        this.layoutElement(column.getElement(), column);\n      }\n      if (allCells) {\n        column.cells.forEach(cell => {\n          this.layoutElement(cell.getElement(true), column);\n        });\n      }\n    });\n  }\n  getColGroupParentElement(column) {\n    return column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n  }\n\n  //layout columns appropriately\n  layout() {\n    if (this.active && !this.blocked) {\n      //calculate left columns\n      this.layoutColumnPosition();\n      this.reinitializeRows();\n      this.layoutCalcRows();\n    }\n  }\n  reinitializeRows() {\n    var visibleRows = this.table.rowManager.getVisibleRows(true);\n    var otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n    otherRows.forEach(row => {\n      row.deinitialize();\n    });\n    visibleRows.forEach(row => {\n      if (row.type === \"row\") {\n        this.layoutRow(row);\n      }\n    });\n  }\n  layoutRow(row) {\n    if (this.table.options.layout === \"fitDataFill\" && this.rightColumns.length) {\n      this.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n    }\n    this.leftColumns.forEach(column => {\n      var cell = row.getCell(column);\n      if (cell) {\n        this.layoutElement(cell.getElement(true), column);\n      }\n    });\n    this.rightColumns.forEach(column => {\n      var cell = row.getCell(column);\n      if (cell) {\n        this.layoutElement(cell.getElement(true), column);\n      }\n    });\n  }\n  layoutElement(element, column) {\n    var position;\n    if (column.modules.frozen) {\n      element.style.position = \"sticky\";\n      if (this.table.rtl) {\n        position = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n      } else {\n        position = column.modules.frozen.position;\n      }\n      element.style[position] = column.modules.frozen.margin;\n      element.classList.add(\"tabulator-frozen\");\n      if (column.modules.frozen.edge) {\n        element.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n      }\n    }\n  }\n  adjustForScrollbar(width) {\n    if (this.rightColumns.length) {\n      this.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n    }\n  }\n  _calcSpace(columns, index) {\n    var width = 0;\n    for (let i = 0; i < index; i++) {\n      if (columns[i].visible) {\n        width += columns[i].getWidth();\n      }\n    }\n    return width;\n  }\n}\nFrozenColumns.moduleName = \"frozenColumns\";\nclass FrozenRows extends Module {\n  constructor(table) {\n    super(table);\n    this.topElement = document.createElement(\"div\");\n    this.rows = [];\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n    this.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n    this.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n    //register table options\n    this.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n    this.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n  }\n\n  initialize() {\n    this.rows = [];\n    this.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n    // this.table.columnManager.element.append(this.topElement);\n    this.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n    this.subscribe(\"row-deleting\", this.detachRow.bind(this));\n    this.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n    this.registerDisplayHandler(this.getRows.bind(this), 10);\n    if (this.table.options.frozenRows) {\n      this.subscribe(\"data-processed\", this.initializeRows.bind(this));\n      this.subscribe(\"row-added\", this.initializeRow.bind(this));\n      this.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n      this.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n      this.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n      this.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n    }\n    this.resizeHolderWidth();\n  }\n  resizeHolderWidth() {\n    this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n  }\n  initializeRows() {\n    this.table.rowManager.getRows().forEach(row => {\n      this.initializeRow(row);\n    });\n  }\n  initializeRow(row) {\n    var frozenRows = this.table.options.frozenRows,\n      rowType = typeof frozenRows;\n    if (rowType === \"number\") {\n      if (row.getPosition() && row.getPosition() + this.rows.length <= frozenRows) {\n        this.freezeRow(row);\n      }\n    } else if (rowType === \"function\") {\n      if (frozenRows.call(this.table, row.getComponent())) {\n        this.freezeRow(row);\n      }\n    } else if (Array.isArray(frozenRows)) {\n      if (frozenRows.includes(row.data[this.options(\"frozenRowsField\")])) {\n        this.freezeRow(row);\n      }\n    }\n  }\n  isRowFrozen(row) {\n    var index = this.rows.indexOf(row);\n    return index > -1;\n  }\n  isFrozen() {\n    return !!this.rows.length;\n  }\n  visibleRows(viewable, rows) {\n    this.rows.forEach(row => {\n      rows.push(row);\n    });\n    return rows;\n  }\n\n  //filter frozen rows out of display data\n  getRows(rows) {\n    var output = rows.slice(0);\n    this.rows.forEach(function (row) {\n      var index = output.indexOf(row);\n      if (index > -1) {\n        output.splice(index, 1);\n      }\n    });\n    return output;\n  }\n  freezeRow(row) {\n    if (!row.modules.frozen) {\n      row.modules.frozen = true;\n      this.topElement.appendChild(row.getElement());\n      row.initialize();\n      row.normalizeHeight();\n      this.rows.push(row);\n      this.refreshData(false, \"display\");\n      this.table.rowManager.adjustTableSize();\n      this.styleRows();\n    } else {\n      console.warn(\"Freeze Error - Row is already frozen\");\n    }\n  }\n  unfreezeRow(row) {\n    if (row.modules.frozen) {\n      row.modules.frozen = false;\n      this.detachRow(row);\n      this.table.rowManager.adjustTableSize();\n      this.refreshData(false, \"display\");\n      if (this.rows.length) {\n        this.styleRows();\n      }\n    } else {\n      console.warn(\"Freeze Error - Row is already unfrozen\");\n    }\n  }\n  detachRow(row) {\n    var index = this.rows.indexOf(row);\n    if (index > -1) {\n      var rowEl = row.getElement();\n      if (rowEl.parentNode) {\n        rowEl.parentNode.removeChild(rowEl);\n      }\n      this.rows.splice(index, 1);\n    }\n  }\n  styleRows(row) {\n    this.rows.forEach((row, i) => {\n      this.table.rowManager.styleRow(row, i);\n    });\n  }\n}\nFrozenRows.moduleName = \"frozenRows\";\n\n//public group object\nclass GroupComponent {\n  constructor(group) {\n    this._group = group;\n    this.type = \"GroupComponent\";\n    return new Proxy(this, {\n      get: function (target, name, receiver) {\n        if (typeof target[name] !== \"undefined\") {\n          return target[name];\n        } else {\n          return target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n        }\n      }\n    });\n  }\n  getKey() {\n    return this._group.key;\n  }\n  getField() {\n    return this._group.field;\n  }\n  getElement() {\n    return this._group.element;\n  }\n  getRows() {\n    return this._group.getRows(true);\n  }\n  getSubGroups() {\n    return this._group.getSubGroups(true);\n  }\n  getParentGroup() {\n    return this._group.parent ? this._group.parent.getComponent() : false;\n  }\n  isVisible() {\n    return this._group.visible;\n  }\n  show() {\n    this._group.show();\n  }\n  hide() {\n    this._group.hide();\n  }\n  toggle() {\n    this._group.toggleVisibility();\n  }\n  _getSelf() {\n    return this._group;\n  }\n  getTable() {\n    return this._group.groupManager.table;\n  }\n}\n\n//Group functions\nclass Group {\n  constructor(groupManager, parent, level, key, field, generator, oldGroup) {\n    this.groupManager = groupManager;\n    this.parent = parent;\n    this.key = key;\n    this.level = level;\n    this.field = field;\n    this.hasSubGroups = level < groupManager.groupIDLookups.length - 1;\n    this.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n    this.type = \"group\"; //type of element\n    this.old = oldGroup;\n    this.rows = [];\n    this.groups = [];\n    this.groupList = [];\n    this.generator = generator;\n    this.element = false;\n    this.elementContents = false;\n    this.height = 0;\n    this.outerHeight = 0;\n    this.initialized = false;\n    this.calcs = {};\n    this.initialized = false;\n    this.modules = {};\n    this.arrowElement = false;\n    this.visible = oldGroup ? oldGroup.visible : typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0];\n    this.component = null;\n    this.createElements();\n    this.addBindings();\n    this.createValueGroups();\n  }\n  wipe(elementsOnly) {\n    if (!elementsOnly) {\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          group.wipe();\n        });\n      } else {\n        this.rows.forEach(row => {\n          if (row.modules) {\n            delete row.modules.group;\n          }\n        });\n      }\n    }\n    this.element = false;\n    this.arrowElement = false;\n    this.elementContents = false;\n  }\n  createElements() {\n    var arrow = document.createElement(\"div\");\n    arrow.classList.add(\"tabulator-arrow\");\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-row\");\n    this.element.classList.add(\"tabulator-group\");\n    this.element.classList.add(\"tabulator-group-level-\" + this.level);\n    this.element.setAttribute(\"role\", \"rowgroup\");\n    this.arrowElement = document.createElement(\"div\");\n    this.arrowElement.classList.add(\"tabulator-group-toggle\");\n    this.arrowElement.appendChild(arrow);\n\n    //setup movable rows\n    if (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")) {\n      this.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n    }\n  }\n  createValueGroups() {\n    var level = this.level + 1;\n    if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n      this.groupManager.allowedValues[level].forEach(value => {\n        this._createGroup(value, level);\n      });\n    }\n  }\n  addBindings() {\n    var toggleElement;\n    if (this.groupManager.table.options.groupToggleElement) {\n      toggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n      toggleElement.addEventListener(\"click\", e => {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        this.toggleVisibility();\n      });\n    }\n  }\n  _createGroup(groupID, level) {\n    var groupKey = level + \"_\" + groupID;\n    var group = new Group(this.groupManager, this, level, groupID, this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n    this.groups[groupKey] = group;\n    this.groupList.push(group);\n  }\n  _addRowToGroup(row) {\n    var level = this.level + 1;\n    if (this.hasSubGroups) {\n      var groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n        groupKey = level + \"_\" + groupID;\n      if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n        if (this.groups[groupKey]) {\n          this.groups[groupKey].addRow(row);\n        }\n      } else {\n        if (!this.groups[groupKey]) {\n          this._createGroup(groupID, level);\n        }\n        this.groups[groupKey].addRow(row);\n      }\n    }\n  }\n  _addRow(row) {\n    this.rows.push(row);\n    row.modules.group = this;\n  }\n  insertRow(row, to, after) {\n    var data = this.conformRowData({});\n    row.updateData(data);\n    var toIndex = this.rows.indexOf(to);\n    if (toIndex > -1) {\n      if (after) {\n        this.rows.splice(toIndex + 1, 0, row);\n      } else {\n        this.rows.splice(toIndex, 0, row);\n      }\n    } else {\n      if (after) {\n        this.rows.push(row);\n      } else {\n        this.rows.unshift(row);\n      }\n    }\n    row.modules.group = this;\n\n    // this.generateGroupHeaderContents();\n\n    if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n      this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n    }\n    this.groupManager.updateGroupRows(true);\n  }\n  scrollHeader(left) {\n    if (this.arrowElement) {\n      this.arrowElement.style.marginLeft = left;\n      this.groupList.forEach(function (child) {\n        child.scrollHeader(left);\n      });\n    }\n  }\n  getRowIndex(row) {}\n\n  //update row data to match grouping constraints\n  conformRowData(data) {\n    if (this.field) {\n      data[this.field] = this.key;\n    } else {\n      console.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n    }\n    if (this.parent) {\n      data = this.parent.conformRowData(data);\n    }\n    return data;\n  }\n  removeRow(row) {\n    var index = this.rows.indexOf(row);\n    var el = row.getElement();\n    if (index > -1) {\n      this.rows.splice(index, 1);\n    }\n    if (!this.groupManager.table.options.groupValues && !this.rows.length) {\n      if (this.parent) {\n        this.parent.removeGroup(this);\n      } else {\n        this.groupManager.removeGroup(this);\n      }\n      this.groupManager.updateGroupRows(true);\n    } else {\n      if (el.parentNode) {\n        el.parentNode.removeChild(el);\n      }\n      if (!this.groupManager.blockRedraw) {\n        this.generateGroupHeaderContents();\n        if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n          this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n        }\n      }\n    }\n  }\n  removeGroup(group) {\n    var groupKey = group.level + \"_\" + group.key,\n      index;\n    if (this.groups[groupKey]) {\n      delete this.groups[groupKey];\n      index = this.groupList.indexOf(group);\n      if (index > -1) {\n        this.groupList.splice(index, 1);\n      }\n      if (!this.groupList.length) {\n        if (this.parent) {\n          this.parent.removeGroup(this);\n        } else {\n          this.groupManager.removeGroup(this);\n        }\n      }\n    }\n  }\n  getHeadersAndRows() {\n    var output = [];\n    output.push(this);\n    this._visSet();\n    if (this.calcs.top) {\n      this.calcs.top.detachElement();\n      this.calcs.top.deleteCells();\n    }\n    if (this.calcs.bottom) {\n      this.calcs.bottom.detachElement();\n      this.calcs.bottom.deleteCells();\n    }\n    if (this.visible) {\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          output = output.concat(group.getHeadersAndRows());\n        });\n      } else {\n        if (this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n          this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n          output.push(this.calcs.top);\n        }\n        output = output.concat(this.rows);\n        if (this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n          this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n          output.push(this.calcs.bottom);\n        }\n      }\n    } else {\n      if (!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\") {\n        if (this.groupManager.table.modExists(\"columnCalcs\")) {\n          if (this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\n              this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n              output.push(this.calcs.top);\n            }\n          }\n          if (this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\n              this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n              output.push(this.calcs.bottom);\n            }\n          }\n        }\n      }\n    }\n    return output;\n  }\n  getData(visible, transform) {\n    var output = [];\n    this._visSet();\n    if (!visible || visible && this.visible) {\n      this.rows.forEach(row => {\n        output.push(row.getData(transform || \"data\"));\n      });\n    }\n    return output;\n  }\n  getRowCount() {\n    var count = 0;\n    if (this.groupList.length) {\n      this.groupList.forEach(group => {\n        count += group.getRowCount();\n      });\n    } else {\n      count = this.rows.length;\n    }\n    return count;\n  }\n  toggleVisibility() {\n    if (this.visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  hide() {\n    this.visible = false;\n    if (this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination) {\n      this.element.classList.remove(\"tabulator-group-visible\");\n      if (this.groupList.length) {\n        this.groupList.forEach(group => {\n          var rows = group.getHeadersAndRows();\n          rows.forEach(row => {\n            row.detachElement();\n          });\n        });\n      } else {\n        this.rows.forEach(row => {\n          var rowEl = row.getElement();\n          rowEl.parentNode.removeChild(rowEl);\n        });\n      }\n      this.groupManager.updateGroupRows(true);\n    } else {\n      this.groupManager.updateGroupRows(true);\n    }\n    this.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n  }\n  show() {\n    this.visible = true;\n    if (this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination) {\n      this.element.classList.add(\"tabulator-group-visible\");\n      var prev = this.generateElement();\n      if (this.groupList.length) {\n        this.groupList.forEach(group => {\n          var rows = group.getHeadersAndRows();\n          rows.forEach(row => {\n            var rowEl = row.getElement();\n            prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n            row.initialize();\n            prev = rowEl;\n          });\n        });\n      } else {\n        this.rows.forEach(row => {\n          var rowEl = row.getElement();\n          prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n          row.initialize();\n          prev = rowEl;\n        });\n      }\n      this.groupManager.updateGroupRows(true);\n    } else {\n      this.groupManager.updateGroupRows(true);\n    }\n    this.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n  }\n  _visSet() {\n    var data = [];\n    if (typeof this.visible == \"function\") {\n      this.rows.forEach(function (row) {\n        data.push(row.getData());\n      });\n      this.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n    }\n  }\n  getRowGroup(row) {\n    var match = false;\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        var result = group.getRowGroup(row);\n        if (result) {\n          match = result;\n        }\n      });\n    } else {\n      if (this.rows.find(function (item) {\n        return item === row;\n      })) {\n        match = this;\n      }\n    }\n    return match;\n  }\n  getSubGroups(component) {\n    var output = [];\n    this.groupList.forEach(function (child) {\n      output.push(component ? child.getComponent() : child);\n    });\n    return output;\n  }\n  getRows(component) {\n    var output = [];\n    this.rows.forEach(function (row) {\n      output.push(component ? row.getComponent() : row);\n    });\n    return output;\n  }\n  generateGroupHeaderContents() {\n    var data = [];\n    this.rows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    this.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n    while (this.element.firstChild) this.element.removeChild(this.element.firstChild);\n    if (typeof this.elementContents === \"string\") {\n      this.element.innerHTML = this.elementContents;\n    } else {\n      this.element.appendChild(this.elementContents);\n    }\n    this.element.insertBefore(this.arrowElement, this.element.firstChild);\n  }\n  getPath() {\n    let path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    path.unshift(this.key);\n    if (this.parent) {\n      this.parent.getPath(path);\n    }\n    return path;\n  }\n\n  ////////////// Standard Row Functions //////////////\n\n  getElement() {\n    return this.elementContents ? this.element : this.generateElement();\n  }\n  generateElement() {\n    this.addBindings = false;\n    this._visSet();\n    if (this.visible) {\n      this.element.classList.add(\"tabulator-group-visible\");\n    } else {\n      this.element.classList.remove(\"tabulator-group-visible\");\n    }\n    for (var i = 0; i < this.element.childNodes.length; ++i) {\n      this.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n    }\n    this.generateGroupHeaderContents();\n\n    // this.addBindings();\n\n    return this.element;\n  }\n  detachElement() {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }\n\n  //normalize the height of elements in the row\n  normalizeHeight() {\n    this.setHeight(this.element.clientHeight);\n  }\n  initialize(force) {\n    if (!this.initialized || force) {\n      this.normalizeHeight();\n      this.initialized = true;\n    }\n  }\n  reinitialize() {\n    this.initialized = false;\n    this.height = 0;\n    if (Helpers.elVisible(this.element)) {\n      this.initialize(true);\n    }\n  }\n  setHeight(height) {\n    if (this.height != height) {\n      this.height = height;\n      this.outerHeight = this.element.offsetHeight;\n    }\n  }\n\n  //return rows outer height\n  getHeight() {\n    return this.outerHeight;\n  }\n  getGroup() {\n    return this;\n  }\n  reinitializeHeight() {}\n  calcHeight() {}\n  setCellHeight() {}\n  clearCellHeight() {}\n  deinitializeHeight() {}\n\n  //////////////// Object Generation /////////////////\n  getComponent() {\n    if (!this.component) {\n      this.component = new GroupComponent(this);\n    }\n    return this.component;\n  }\n}\nclass GroupRows extends Module {\n  constructor(table) {\n    super(table);\n    this.groupIDLookups = false; //enable table grouping and set field to group by\n    this.startOpen = [function () {\n      return false;\n    }]; //starting state of group\n    this.headerGenerator = [function () {\n      return \"\";\n    }];\n    this.groupList = []; //ordered list of groups\n    this.allowedValues = false;\n    this.groups = {}; //hold row groups\n\n    this.displayHandler = this.getRows.bind(this);\n    this.blockRedraw = false;\n\n    //register table options\n    this.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n    this.registerTableOption(\"groupStartOpen\", true); //starting state of group\n    this.registerTableOption(\"groupValues\", false);\n    this.registerTableOption(\"groupUpdateOnCellEdit\", false);\n    this.registerTableOption(\"groupHeader\", false); //header generation function\n    this.registerTableOption(\"groupHeaderPrint\", null);\n    this.registerTableOption(\"groupHeaderClipboard\", null);\n    this.registerTableOption(\"groupHeaderHtmlOutput\", null);\n    this.registerTableOption(\"groupHeaderDownload\", null);\n    this.registerTableOption(\"groupToggleElement\", \"arrow\");\n    this.registerTableOption(\"groupClosedShowCalcs\", false);\n\n    //register table functions\n    this.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n    this.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n    this.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n    this.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n    this.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n    this.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n  }\n\n  //initialize group configuration\n  initialize() {\n    this.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n    this.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n    this.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n    if (this.table.options.groupBy) {\n      if (this.table.options.groupUpdateOnCellEdit) {\n        this.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n        this.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n      }\n      this.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n      this.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n      this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n      this.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n      this.subscribe(\"rows-wipe\", this.wipe.bind(this));\n      this.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n      this.subscribe(\"row-moving\", this.rowMoving.bind(this));\n      this.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n      this.subscribe(\"rows-sample\", this.rowSample.bind(this));\n      this.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n      this.registerDisplayHandler(this.displayHandler, 20);\n      this.initialized = true;\n    }\n  }\n  _blockRedrawing() {\n    this.blockRedraw = true;\n  }\n  _restore_redrawing() {\n    this.blockRedraw = false;\n  }\n  configureGroupSetup() {\n    if (this.table.options.groupBy) {\n      var groupBy = this.table.options.groupBy,\n        startOpen = this.table.options.groupStartOpen,\n        groupHeader = this.table.options.groupHeader;\n      this.allowedValues = this.table.options.groupValues;\n      if (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\n        console.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n      }\n      this.headerGenerator = [function () {\n        return \"\";\n      }];\n      this.startOpen = [function () {\n        return false;\n      }]; //starting state of group\n\n      this.langBind(\"groups|item\", (langValue, lang) => {\n        this.headerGenerator[0] = (value, count, data) => {\n          //header layout function\n          return (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + (count === 1 ? langValue : lang.groups.items) + \")</span>\";\n        };\n      });\n      this.groupIDLookups = [];\n      if (groupBy) {\n        if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\") {\n          this.table.modules.columnCalcs.removeCalcs();\n        }\n      } else {\n        if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\") {\n          var cols = this.table.columnManager.getRealColumns();\n          cols.forEach(col => {\n            if (col.definition.topCalc) {\n              this.table.modules.columnCalcs.initializeTopRow();\n            }\n            if (col.definition.bottomCalc) {\n              this.table.modules.columnCalcs.initializeBottomRow();\n            }\n          });\n        }\n      }\n      if (!Array.isArray(groupBy)) {\n        groupBy = [groupBy];\n      }\n      groupBy.forEach((group, i) => {\n        var lookupFunc, column;\n        if (typeof group == \"function\") {\n          lookupFunc = group;\n        } else {\n          column = this.table.columnManager.getColumnByField(group);\n          if (column) {\n            lookupFunc = function (data) {\n              return column.getFieldValue(data);\n            };\n          } else {\n            lookupFunc = function (data) {\n              return data[group];\n            };\n          }\n        }\n        this.groupIDLookups.push({\n          field: typeof group === \"function\" ? false : group,\n          func: lookupFunc,\n          values: this.allowedValues ? this.allowedValues[i] : false\n        });\n      });\n      if (startOpen) {\n        if (!Array.isArray(startOpen)) {\n          startOpen = [startOpen];\n        }\n        startOpen.forEach(level => {});\n        this.startOpen = startOpen;\n      }\n      if (groupHeader) {\n        this.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n      }\n    } else {\n      this.groupList = [];\n      this.groups = {};\n    }\n  }\n  rowSample(rows, prevValue) {\n    if (this.table.options.groupBy) {\n      var group = this.getGroups(false)[0];\n      prevValue.push(group.getRows(false)[0]);\n    }\n    return prevValue;\n  }\n  virtualRenderFill() {\n    var el = this.table.rowManager.tableElement;\n    var rows = this.table.rowManager.getVisibleRows();\n    if (this.table.options.groupBy) {\n      rows = rows.filter(row => {\n        return row.type !== \"group\";\n      });\n      el.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n    } else {\n      return rows;\n    }\n  }\n  rowAddingIndex(row, index, top) {\n    if (this.table.options.groupBy) {\n      this.assignRowToGroup(row);\n      var groupRows = row.modules.group.rows;\n      if (groupRows.length > 1) {\n        if (!index || index && groupRows.indexOf(index) == -1) {\n          if (top) {\n            if (groupRows[0] !== row) {\n              index = groupRows[0];\n              this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n            }\n          } else {\n            if (groupRows[groupRows.length - 1] !== row) {\n              index = groupRows[groupRows.length - 1];\n              this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n            }\n          }\n        } else {\n          this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n        }\n      }\n      return index;\n    }\n  }\n  trackChanges() {\n    this.dispatch(\"group-changed\");\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  setGroupBy(groups) {\n    this.table.options.groupBy = groups;\n    if (!this.initialized) {\n      this.initialize();\n    }\n    this.configureGroupSetup();\n    if (!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true) {\n      this.table.modules.columnCalcs.reinitializeCalcs();\n    }\n    this.refreshData();\n    this.trackChanges();\n  }\n  setGroupValues(groupValues) {\n    this.table.options.groupValues = groupValues;\n    this.configureGroupSetup();\n    this.refreshData();\n    this.trackChanges();\n  }\n  setGroupStartOpen(values) {\n    this.table.options.groupStartOpen = values;\n    this.configureGroupSetup();\n    if (this.table.options.groupBy) {\n      this.refreshData();\n      this.trackChanges();\n    } else {\n      console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n    }\n  }\n  setGroupHeader(values) {\n    this.table.options.groupHeader = values;\n    this.configureGroupSetup();\n    if (this.table.options.groupBy) {\n      this.refreshData();\n      this.trackChanges();\n    } else {\n      console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n    }\n  }\n  userGetGroups(values) {\n    return this.getGroups(true);\n  }\n\n  // get grouped table data in the same format as getData()\n  userGetGroupedData() {\n    return this.table.options.groupBy ? this.getGroupedData() : this.getData();\n  }\n\n  ///////////////////////////////////////\n  ///////// Component Functions /////////\n  ///////////////////////////////////////\n\n  rowGetGroup(row) {\n    return row.modules.group ? row.modules.group.getComponent() : false;\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  rowMoving(from, to, after) {\n    if (this.table.options.groupBy) {\n      if (!after && to instanceof Group) {\n        to = this.table.rowManager.prevDisplayRow(from) || to;\n      }\n      var toGroup = to instanceof Group ? to : to.modules.group;\n      var fromGroup = from instanceof Group ? from : from.modules.group;\n      if (toGroup === fromGroup) {\n        this.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n      } else {\n        if (fromGroup) {\n          fromGroup.removeRow(from);\n        }\n        toGroup.insertRow(from, to, after);\n      }\n    }\n  }\n  rowDeleting(row) {\n    //remove from group\n    if (this.table.options.groupBy && row.modules.group) {\n      row.modules.group.removeRow(row);\n    }\n  }\n  rowsUpdated(row) {\n    if (this.table.options.groupBy) {\n      this.updateGroupRows(true);\n    }\n  }\n  cellUpdated(cell) {\n    if (this.table.options.groupBy) {\n      this.reassignRowToGroup(cell.row);\n    }\n  }\n\n  //return appropriate rows with group headers\n  getRows(rows) {\n    if (this.table.options.groupBy && this.groupIDLookups.length) {\n      this.dispatchExternal(\"dataGrouping\");\n      this.generateGroups(rows);\n      if (this.subscribedExternal(\"dataGrouped\")) {\n        this.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n      }\n      return this.updateGroupRows();\n    } else {\n      return rows.slice(0);\n    }\n  }\n  getGroups(component) {\n    var groupComponents = [];\n    this.groupList.forEach(function (group) {\n      groupComponents.push(component ? group.getComponent() : group);\n    });\n    return groupComponents;\n  }\n  getChildGroups(group) {\n    var groupComponents = [];\n    if (!group) {\n      group = this;\n    }\n    group.groupList.forEach(child => {\n      if (child.groupList.length) {\n        groupComponents = groupComponents.concat(this.getChildGroups(child));\n      } else {\n        groupComponents.push(child);\n      }\n    });\n    return groupComponents;\n  }\n  wipe() {\n    if (this.table.options.groupBy) {\n      this.groupList.forEach(function (group) {\n        group.wipe();\n      });\n      this.groupList = [];\n      this.groups = {};\n    }\n  }\n  pullGroupListData(groupList) {\n    var groupListData = [];\n    groupList.forEach(group => {\n      var groupHeader = {};\n      groupHeader.level = 0;\n      groupHeader.rowCount = 0;\n      groupHeader.headerContent = \"\";\n      var childData = [];\n      if (group.hasSubGroups) {\n        childData = this.pullGroupListData(group.groupList);\n        groupHeader.level = group.level;\n        groupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n        groupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n        groupListData.push(groupHeader);\n        groupListData = groupListData.concat(childData);\n      } else {\n        groupHeader.level = group.level;\n        groupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n        groupHeader.rowCount = group.getRows().length;\n        groupListData.push(groupHeader);\n        group.getRows().forEach(row => {\n          groupListData.push(row.getData(\"data\"));\n        });\n      }\n    });\n    return groupListData;\n  }\n  getGroupedData() {\n    return this.pullGroupListData(this.groupList);\n  }\n  getRowGroup(row) {\n    var match = false;\n    if (this.options(\"dataTree\")) {\n      row = this.table.modules.dataTree.getTreeParentRoot(row);\n    }\n    this.groupList.forEach(group => {\n      var result = group.getRowGroup(row);\n      if (result) {\n        match = result;\n      }\n    });\n    return match;\n  }\n  countGroups() {\n    return this.groupList.length;\n  }\n  generateGroups(rows) {\n    var oldGroups = this.groups;\n    this.groups = {};\n    this.groupList = [];\n    if (this.allowedValues && this.allowedValues[0]) {\n      this.allowedValues[0].forEach(value => {\n        this.createGroup(value, 0, oldGroups);\n      });\n      rows.forEach(row => {\n        this.assignRowToExistingGroup(row, oldGroups);\n      });\n    } else {\n      rows.forEach(row => {\n        this.assignRowToGroup(row, oldGroups);\n      });\n    }\n    Object.values(oldGroups).forEach(group => {\n      group.wipe(true);\n    });\n  }\n  createGroup(groupID, level, oldGroups) {\n    var groupKey = level + \"_\" + groupID,\n      group;\n    oldGroups = oldGroups || [];\n    group = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n    this.groups[groupKey] = group;\n    this.groupList.push(group);\n  }\n  assignRowToExistingGroup(row, oldGroups) {\n    var groupID = this.groupIDLookups[0].func(row.getData()),\n      groupKey = \"0_\" + groupID;\n    if (this.groups[groupKey]) {\n      this.groups[groupKey].addRow(row);\n    }\n  }\n  assignRowToGroup(row, oldGroups) {\n    var groupID = this.groupIDLookups[0].func(row.getData()),\n      newGroupNeeded = !this.groups[\"0_\" + groupID];\n    if (newGroupNeeded) {\n      this.createGroup(groupID, 0, oldGroups);\n    }\n    this.groups[\"0_\" + groupID].addRow(row);\n    return !newGroupNeeded;\n  }\n  reassignRowToGroup(row) {\n    if (row.type === \"row\") {\n      var oldRowGroup = row.modules.group,\n        oldGroupPath = oldRowGroup.getPath(),\n        newGroupPath = this.getExpectedPath(row),\n        samePath;\n\n      // figure out if new group path is the same as old group path\n      samePath = oldGroupPath.length == newGroupPath.length && oldGroupPath.every((element, index) => {\n        return element === newGroupPath[index];\n      });\n\n      // refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n      if (!samePath) {\n        oldRowGroup.removeRow(row);\n        this.assignRowToGroup(row, this.groups);\n        this.refreshData(true);\n      }\n    }\n  }\n  getExpectedPath(row) {\n    var groupPath = [],\n      rowData = row.getData();\n    this.groupIDLookups.forEach(groupId => {\n      groupPath.push(groupId.func(rowData));\n    });\n    return groupPath;\n  }\n  updateGroupRows(force) {\n    var output = [];\n    if (!this.blockRedraw) {\n      this.groupList.forEach(group => {\n        output = output.concat(group.getHeadersAndRows());\n      });\n      if (force) {\n        this.refreshData(true);\n      }\n    }\n    return output;\n  }\n  scrollHeaders(left) {\n    if (this.table.options.groupBy) {\n      if (this.table.options.renderHorizontal === \"virtual\") {\n        left -= this.table.columnManager.renderer.vDomPadLeft;\n      }\n      left = left + \"px\";\n      this.groupList.forEach(group => {\n        group.scrollHeader(left);\n      });\n    }\n  }\n  removeGroup(group) {\n    var groupKey = group.level + \"_\" + group.key,\n      index;\n    if (this.groups[groupKey]) {\n      delete this.groups[groupKey];\n      index = this.groupList.indexOf(group);\n      if (index > -1) {\n        this.groupList.splice(index, 1);\n      }\n    }\n  }\n  checkBasicModeGroupHeaderWidth() {\n    var element = this.table.rowManager.tableElement,\n      onlyGroupHeaders = true;\n    this.table.rowManager.getDisplayRows().forEach((row, index) => {\n      this.table.rowManager.styleRow(row, index);\n      element.appendChild(row.getElement());\n      row.initialize(true);\n      if (row.type !== \"group\") {\n        onlyGroupHeaders = false;\n      }\n    });\n    if (onlyGroupHeaders) {\n      element.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n    } else {\n      element.style.minWidth = \"\";\n    }\n  }\n}\nGroupRows.moduleName = \"groupRows\";\nvar defaultUndoers = {\n  cellEdit: function (action) {\n    action.component.setValueProcessData(action.data.oldValue);\n    action.component.cellRendered();\n  },\n  rowAdd: function (action) {\n    action.component.deleteActual();\n  },\n  rowDelete: function (action) {\n    var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.updateGroupRows(true);\n    }\n    this._rebindRow(action.component, newRow);\n  },\n  rowMove: function (action) {\n    this.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n    this.table.rowManager.redraw();\n  }\n};\nvar defaultRedoers = {\n  cellEdit: function (action) {\n    action.component.setValueProcessData(action.data.newValue);\n    action.component.cellRendered();\n  },\n  rowAdd: function (action) {\n    var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.updateGroupRows(true);\n    }\n    this._rebindRow(action.component, newRow);\n  },\n  rowDelete: function (action) {\n    action.component.deleteActual();\n  },\n  rowMove: function (action) {\n    this.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n    this.table.rowManager.redraw();\n  }\n};\nclass History extends Module {\n  constructor(table) {\n    super(table);\n    this.history = [];\n    this.index = -1;\n    this.registerTableOption(\"history\", false); //enable edit history\n  }\n\n  initialize() {\n    if (this.table.options.history) {\n      this.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n      this.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n      this.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n      this.subscribe(\"rows-wipe\", this.clear.bind(this));\n      this.subscribe(\"row-added\", this.rowAdded.bind(this));\n      this.subscribe(\"row-move\", this.rowMoved.bind(this));\n    }\n    this.registerTableFunction(\"undo\", this.undo.bind(this));\n    this.registerTableFunction(\"redo\", this.redo.bind(this));\n    this.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n    this.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n    this.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n  }\n  rowMoved(from, to, after) {\n    this.action(\"rowMove\", from, {\n      posFrom: from.getPosition(),\n      posTo: to.getPosition(),\n      to: to,\n      after: after\n    });\n  }\n  rowAdded(row, data, pos, index) {\n    this.action(\"rowAdd\", row, {\n      data: data,\n      pos: pos,\n      index: index\n    });\n  }\n  rowDeleted(row) {\n    var index, rows;\n    if (this.table.options.groupBy) {\n      rows = row.getComponent().getGroup()._getSelf().rows;\n      index = rows.indexOf(row);\n      if (index) {\n        index = rows[index - 1];\n      }\n    } else {\n      index = row.table.rowManager.getRowIndex(row);\n      if (index) {\n        index = row.table.rowManager.rows[index - 1];\n      }\n    }\n    this.action(\"rowDelete\", row, {\n      data: row.getData(),\n      pos: !index,\n      index: index\n    });\n  }\n  cellUpdated(cell) {\n    this.action(\"cellEdit\", cell, {\n      oldValue: cell.oldValue,\n      newValue: cell.value\n    });\n  }\n  clear() {\n    this.history = [];\n    this.index = -1;\n  }\n  action(type, component, data) {\n    this.history = this.history.slice(0, this.index + 1);\n    this.history.push({\n      type: type,\n      component: component,\n      data: data\n    });\n    this.index++;\n  }\n  getHistoryUndoSize() {\n    return this.index + 1;\n  }\n  getHistoryRedoSize() {\n    return this.history.length - (this.index + 1);\n  }\n  clearComponentHistory(component) {\n    var index = this.history.findIndex(function (item) {\n      return item.component === component;\n    });\n    if (index > -1) {\n      this.history.splice(index, 1);\n      if (index <= this.index) {\n        this.index--;\n      }\n      this.clearComponentHistory(component);\n    }\n  }\n  undo() {\n    if (this.index > -1) {\n      let action = this.history[this.index];\n      History.undoers[action.type].call(this, action);\n      this.index--;\n      this.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n      return true;\n    } else {\n      console.warn(\"History Undo Error - No more history to undo\");\n      return false;\n    }\n  }\n  redo() {\n    if (this.history.length - 1 > this.index) {\n      this.index++;\n      let action = this.history[this.index];\n      History.redoers[action.type].call(this, action);\n      this.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n      return true;\n    } else {\n      console.warn(\"History Redo Error - No more history to redo\");\n      return false;\n    }\n  }\n\n  //rebind rows to new element after deletion\n  _rebindRow(oldRow, newRow) {\n    this.history.forEach(function (action) {\n      if (action.component instanceof Row) {\n        if (action.component === oldRow) {\n          action.component = newRow;\n        }\n      } else if (action.component instanceof Cell) {\n        if (action.component.row === oldRow) {\n          var field = action.component.column.getField();\n          if (field) {\n            action.component = newRow.getCell(field);\n          }\n        }\n      }\n    });\n  }\n}\nHistory.moduleName = \"history\";\n\n//load defaults\nHistory.undoers = defaultUndoers;\nHistory.redoers = defaultRedoers;\nclass HtmlTableImport extends Module {\n  constructor(table) {\n    super(table);\n    this.fieldIndex = [];\n    this.hasIndex = false;\n  }\n  initialize() {\n    this.tableElementCheck();\n  }\n  tableElementCheck() {\n    if (this.table.originalElement && this.table.originalElement.tagName === \"TABLE\") {\n      if (this.table.originalElement.childNodes.length) {\n        this.parseTable();\n      } else {\n        console.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n      }\n    }\n  }\n  parseTable() {\n    var element = this.table.originalElement,\n      options = this.table.options,\n      headers = element.getElementsByTagName(\"th\"),\n      rows = element.getElementsByTagName(\"tbody\")[0],\n      data = [];\n    this.hasIndex = false;\n    this.dispatchExternal(\"htmlImporting\");\n    rows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n    //check for Tabulator inline options\n    this._extractOptions(element, options);\n    if (headers.length) {\n      this._extractHeaders(headers, rows);\n    } else {\n      this._generateBlankHeaders(headers, rows);\n    }\n\n    //iterate through table rows and build data set\n    for (var index = 0; index < rows.length; index++) {\n      var row = rows[index],\n        cells = row.getElementsByTagName(\"td\"),\n        item = {};\n\n      //create index if the don't exist in table\n      if (!this.hasIndex) {\n        item[options.index] = index;\n      }\n      for (var i = 0; i < cells.length; i++) {\n        var cell = cells[i];\n        if (typeof this.fieldIndex[i] !== \"undefined\") {\n          item[this.fieldIndex[i]] = cell.innerHTML;\n        }\n      }\n\n      //add row data to item\n      data.push(item);\n    }\n    options.data = data;\n    this.dispatchExternal(\"htmlImported\");\n  }\n\n  //extract tabulator attribute options\n  _extractOptions(element, options, defaultOptions) {\n    var attributes = element.attributes;\n    var optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n    var optionsList = {};\n    optionsArr.forEach(item => {\n      optionsList[item.toLowerCase()] = item;\n    });\n    for (var index in attributes) {\n      var attrib = attributes[index];\n      var name;\n      if (attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0) {\n        name = attrib.name.replace(\"tabulator-\", \"\");\n        if (typeof optionsList[name] !== \"undefined\") {\n          options[optionsList[name]] = this._attribValue(attrib.value);\n        }\n      }\n    }\n  }\n\n  //get value of attribute\n  _attribValue(value) {\n    if (value === \"true\") {\n      return true;\n    }\n    if (value === \"false\") {\n      return false;\n    }\n    return value;\n  }\n\n  //find column if it has already been defined\n  _findCol(title) {\n    var match = this.table.options.columns.find(column => {\n      return column.title === title;\n    });\n    return match || false;\n  }\n\n  //extract column from headers\n  _extractHeaders(headers, rows) {\n    for (var index = 0; index < headers.length; index++) {\n      var header = headers[index],\n        exists = false,\n        col = this._findCol(header.textContent),\n        width;\n      if (col) {\n        exists = true;\n      } else {\n        col = {\n          title: header.textContent.trim()\n        };\n      }\n      if (!col.field) {\n        col.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n      }\n      width = header.getAttribute(\"width\");\n      if (width && !col.width) {\n        col.width = width;\n      }\n\n      //check for Tabulator inline options\n      this._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n      this.fieldIndex[index] = col.field;\n      if (col.field == this.table.options.index) {\n        this.hasIndex = true;\n      }\n      if (!exists) {\n        this.table.options.columns.push(col);\n      }\n    }\n  }\n\n  //generate blank headers\n  _generateBlankHeaders(headers, rows) {\n    for (var index = 0; index < headers.length; index++) {\n      var header = headers[index],\n        col = {\n          title: \"\",\n          field: \"col\" + index\n        };\n      this.fieldIndex[index] = col.field;\n      var width = header.getAttribute(\"width\");\n      if (width) {\n        col.width = width;\n      }\n      this.table.options.columns.push(col);\n    }\n  }\n}\nHtmlTableImport.moduleName = \"htmlTableImport\";\nfunction csvImporter(input) {\n  var data = [],\n    row = 0,\n    col = 0,\n    inQuote = false;\n\n  //Iterate over each character\n  for (let index = 0; index < input.length; index++) {\n    let char = input[index],\n      nextChar = input[index + 1];\n\n    //Initialize empty row\n    if (!data[row]) {\n      data[row] = [];\n    }\n\n    //Initialize empty column\n    if (!data[row][col]) {\n      data[row][col] = \"\";\n    }\n\n    //Handle quotation mark inside string\n    if (char == '\"' && inQuote && nextChar == '\"') {\n      data[row][col] += char;\n      index++;\n      continue;\n    }\n\n    //Begin / End Quote\n    if (char == '\"') {\n      inQuote = !inQuote;\n      continue;\n    }\n\n    //Next column (if not in quote)\n    if (char == ',' && !inQuote) {\n      col++;\n      continue;\n    }\n\n    //New row if new line and not in quote (CRLF) \n    if (char == '\\r' && nextChar == '\\n' && !inQuote) {\n      col = 0;\n      row++;\n      index++;\n      continue;\n    }\n\n    //New row if new line and not in quote (CR or LF) \n    if ((char == '\\r' || char == '\\n') && !inQuote) {\n      col = 0;\n      row++;\n      continue;\n    }\n\n    //Normal Character, append to column\n    data[row][col] += char;\n  }\n  return data;\n}\nfunction json$1(input) {\n  try {\n    return JSON.parse(input);\n  } catch (e) {\n    console.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n    return Promise.reject();\n  }\n}\nfunction arrayImporter(input) {\n  return input;\n}\nvar defaultImporters = {\n  csv: csvImporter,\n  json: json$1,\n  array: arrayImporter\n};\nclass Import extends Module {\n  constructor(table) {\n    super(table);\n    this.registerTableOption(\"importFormat\");\n    this.registerTableOption(\"importReader\", \"text\");\n  }\n  initialize() {\n    this.registerTableFunction(\"import\", this.importFromFile.bind(this));\n    if (this.table.options.importFormat) {\n      this.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n      this.subscribe(\"data-load\", this.loadData.bind(this), 10);\n    }\n  }\n  loadDataCheck(data) {\n    return this.table.options.importFormat && (typeof data === \"string\" || Array.isArray(data) && data.length && Array.isArray(data));\n  }\n  loadData(data, params, config, silent, previousData) {\n    return this.importData(this.lookupImporter(), data).then(this.structureData.bind(this)).catch(err => {\n      console.error(\"Import Error:\", err || \"Unable to import data\");\n      return Promise.reject(err);\n    });\n  }\n  lookupImporter(importFormat) {\n    var importer;\n    if (!importFormat) {\n      importFormat = this.table.options.importFormat;\n    }\n    if (typeof importFormat === \"string\") {\n      importer = Import.importers[importFormat];\n    } else {\n      importer = importFormat;\n    }\n    if (!importer) {\n      console.error(\"Import Error - Importer not found:\", importFormat);\n    }\n    return importer;\n  }\n  importFromFile(importFormat, extension) {\n    var importer = this.lookupImporter(importFormat);\n    if (importer) {\n      return this.pickFile(extension).then(this.importData.bind(this, importer)).then(this.structureData.bind(this)).then(this.setData.bind(this)).catch(err => {\n        console.error(\"Import Error:\", err || \"Unable to import file\");\n        return Promise.reject(err);\n      });\n    }\n  }\n  pickFile(extensions) {\n    return new Promise((resolve, reject) => {\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n      input.accept = extensions;\n      input.addEventListener(\"change\", e => {\n        var file = input.files[0],\n          reader = new FileReader();\n        switch (this.table.options.importReader) {\n          case \"buffer\":\n            reader.readAsArrayBuffer(file);\n            break;\n          case \"binary\":\n            reader.readAsBinaryString(file);\n            break;\n          case \"url\":\n            reader.readAsDataURL(file);\n            break;\n          case \"text\":\n          default:\n            reader.readAsText(file);\n        }\n        reader.onload = e => {\n          resolve(reader.result);\n        };\n        reader.onerror = e => {\n          console.warn(\"File Load Error - Unable to read file\");\n          reject();\n        };\n      });\n      input.click();\n    });\n  }\n  importData(importer, fileContents) {\n    var data = importer.call(this.table, fileContents);\n    if (data instanceof Promise) {\n      return data;\n    } else {\n      return data ? Promise.resolve(data) : Promise.reject();\n    }\n  }\n  structureData(parsedData) {\n    var data = [];\n    if (Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])) {\n      if (this.table.options.autoColumns) {\n        data = this.structureArrayToObject(parsedData);\n      } else {\n        data = this.structureArrayToColumns(parsedData);\n      }\n      return data;\n    } else {\n      return parsedData;\n    }\n  }\n  structureArrayToObject(parsedData) {\n    var columns = parsedData.shift();\n    var data = parsedData.map(values => {\n      var row = {};\n      columns.forEach((key, i) => {\n        row[key] = values[i];\n      });\n      return row;\n    });\n    return data;\n  }\n  structureArrayToColumns(parsedData) {\n    var data = [],\n      columns = this.table.getColumns();\n\n    //remove first row if it is the column names\n    if (columns[0] && parsedData[0][0]) {\n      if (columns[0].getDefinition().title === parsedData[0][0]) {\n        parsedData.shift();\n      }\n    }\n\n    //convert row arrays to objects\n    parsedData.forEach(rowData => {\n      var row = {};\n      rowData.forEach((value, index) => {\n        var column = columns[index];\n        if (column) {\n          row[column.getField()] = value;\n        }\n      });\n      data.push(row);\n    });\n    return data;\n  }\n  setData(data) {\n    return this.table.setData(data);\n  }\n}\nImport.moduleName = \"import\";\n\n//load defaults\nImport.importers = defaultImporters;\nclass Interaction extends Module {\n  constructor(table) {\n    super(table);\n    this.eventMap = {\n      //row events\n      rowClick: \"row-click\",\n      rowDblClick: \"row-dblclick\",\n      rowContext: \"row-contextmenu\",\n      rowMouseEnter: \"row-mouseenter\",\n      rowMouseLeave: \"row-mouseleave\",\n      rowMouseOver: \"row-mouseover\",\n      rowMouseOut: \"row-mouseout\",\n      rowMouseMove: \"row-mousemove\",\n      rowMouseDown: \"row-mousedown\",\n      rowMouseUp: \"row-mouseup\",\n      rowTap: \"row\",\n      rowDblTap: \"row\",\n      rowTapHold: \"row\",\n      //cell events\n      cellClick: \"cell-click\",\n      cellDblClick: \"cell-dblclick\",\n      cellContext: \"cell-contextmenu\",\n      cellMouseEnter: \"cell-mouseenter\",\n      cellMouseLeave: \"cell-mouseleave\",\n      cellMouseOver: \"cell-mouseover\",\n      cellMouseOut: \"cell-mouseout\",\n      cellMouseMove: \"cell-mousemove\",\n      cellMouseDown: \"cell-mousedown\",\n      cellMouseUp: \"cell-mouseup\",\n      cellTap: \"cell\",\n      cellDblTap: \"cell\",\n      cellTapHold: \"cell\",\n      //column header events\n      headerClick: \"column-click\",\n      headerDblClick: \"column-dblclick\",\n      headerContext: \"column-contextmenu\",\n      headerMouseEnter: \"column-mouseenter\",\n      headerMouseLeave: \"column-mouseleave\",\n      headerMouseOver: \"column-mouseover\",\n      headerMouseOut: \"column-mouseout\",\n      headerMouseMove: \"column-mousemove\",\n      headerMouseDown: \"column-mousedown\",\n      headerMouseUp: \"column-mouseup\",\n      headerTap: \"column\",\n      headerDblTap: \"column\",\n      headerTapHold: \"column\",\n      //group header\n      groupClick: \"group-click\",\n      groupDblClick: \"group-dblclick\",\n      groupContext: \"group-contextmenu\",\n      groupMouseEnter: \"group-mouseenter\",\n      groupMouseLeave: \"group-mouseleave\",\n      groupMouseOver: \"group-mouseover\",\n      groupMouseOut: \"group-mouseout\",\n      groupMouseMove: \"group-mousemove\",\n      groupMouseDown: \"group-mousedown\",\n      groupMouseUp: \"group-mouseup\",\n      groupTap: \"group\",\n      groupDblTap: \"group\",\n      groupTapHold: \"group\"\n    };\n    this.subscribers = {};\n    this.touchSubscribers = {};\n    this.columnSubscribers = {};\n    this.touchWatchers = {\n      row: {\n        tap: null,\n        tapDbl: null,\n        tapHold: null\n      },\n      cell: {\n        tap: null,\n        tapDbl: null,\n        tapHold: null\n      },\n      column: {\n        tap: null,\n        tapDbl: null,\n        tapHold: null\n      },\n      group: {\n        tap: null,\n        tapDbl: null,\n        tapHold: null\n      }\n    };\n    this.registerColumnOption(\"headerClick\");\n    this.registerColumnOption(\"headerDblClick\");\n    this.registerColumnOption(\"headerContext\");\n    this.registerColumnOption(\"headerMouseEnter\");\n    this.registerColumnOption(\"headerMouseLeave\");\n    this.registerColumnOption(\"headerMouseOver\");\n    this.registerColumnOption(\"headerMouseOut\");\n    this.registerColumnOption(\"headerMouseMove\");\n    this.registerColumnOption(\"headerMouseDown\");\n    this.registerColumnOption(\"headerMouseUp\");\n    this.registerColumnOption(\"headerTap\");\n    this.registerColumnOption(\"headerDblTap\");\n    this.registerColumnOption(\"headerTapHold\");\n    this.registerColumnOption(\"cellClick\");\n    this.registerColumnOption(\"cellDblClick\");\n    this.registerColumnOption(\"cellContext\");\n    this.registerColumnOption(\"cellMouseEnter\");\n    this.registerColumnOption(\"cellMouseLeave\");\n    this.registerColumnOption(\"cellMouseOver\");\n    this.registerColumnOption(\"cellMouseOut\");\n    this.registerColumnOption(\"cellMouseMove\");\n    this.registerColumnOption(\"cellMouseDown\");\n    this.registerColumnOption(\"cellMouseUp\");\n    this.registerColumnOption(\"cellTap\");\n    this.registerColumnOption(\"cellDblTap\");\n    this.registerColumnOption(\"cellTapHold\");\n  }\n  initialize() {\n    this.initializeExternalEvents();\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n    this.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n  }\n  cellContentsSelectionFixer(e, cell) {\n    var range;\n    if (this.table.modExists(\"edit\")) {\n      if (this.table.modules.edit.currentCell === cell) {\n        return; //prevent instant selection of editor content\n      }\n    }\n\n    e.preventDefault();\n    try {\n      if (document.selection) {\n        // IE\n        range = document.body.createTextRange();\n        range.moveToElementText(cell.getElement());\n        range.select();\n      } else if (window.getSelection) {\n        range = document.createRange();\n        range.selectNode(cell.getElement());\n        window.getSelection().removeAllRanges();\n        window.getSelection().addRange(range);\n      }\n    } catch (e) {}\n  }\n  initializeExternalEvents() {\n    for (let key in this.eventMap) {\n      this.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n    }\n  }\n  subscriptionChanged(key, added) {\n    if (added) {\n      if (!this.subscribers[key]) {\n        if (this.eventMap[key].includes(\"-\")) {\n          this.subscribers[key] = this.handle.bind(this, key);\n          this.subscribe(this.eventMap[key], this.subscribers[key]);\n        } else {\n          this.subscribeTouchEvents(key);\n        }\n      }\n    } else {\n      if (this.eventMap[key].includes(\"-\")) {\n        if (this.subscribers[key] && !this.columnSubscribers[key] && !this.subscribedExternal(key)) {\n          this.unsubscribe(this.eventMap[key], this.subscribers[key]);\n          delete this.subscribers[key];\n        }\n      } else {\n        this.unsubscribeTouchEvents(key);\n      }\n    }\n  }\n  subscribeTouchEvents(key) {\n    var type = this.eventMap[key];\n    if (!this.touchSubscribers[type + \"-touchstart\"]) {\n      this.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n      this.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n      this.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n      this.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n    }\n    this.subscribers[key] = true;\n  }\n  unsubscribeTouchEvents(key) {\n    var noTouch = true,\n      type = this.eventMap[key];\n    if (this.subscribers[key] && !this.subscribedExternal(key)) {\n      delete this.subscribers[key];\n      for (let i in this.eventMap) {\n        if (this.eventMap[i] === type) {\n          if (this.subscribers[i]) {\n            noTouch = false;\n          }\n        }\n      }\n      if (noTouch) {\n        this.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n        this.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n        delete this.touchSubscribers[type + \"-touchstart\"];\n        delete this.touchSubscribers[type + \"-touchend\"];\n      }\n    }\n  }\n  initializeColumn(column) {\n    var def = column.definition;\n    for (let key in this.eventMap) {\n      if (def[key]) {\n        this.subscriptionChanged(key, true);\n        if (!this.columnSubscribers[key]) {\n          this.columnSubscribers[key] = [];\n        }\n        this.columnSubscribers[key].push(column);\n      }\n    }\n  }\n  handle(action, e, component) {\n    this.dispatchEvent(action, e, component);\n  }\n  handleTouch(type, action, e, component) {\n    var watchers = this.touchWatchers[type];\n    if (type === \"column\") {\n      type = \"header\";\n    }\n    switch (action) {\n      case \"start\":\n        watchers.tap = true;\n        clearTimeout(watchers.tapHold);\n        watchers.tapHold = setTimeout(() => {\n          clearTimeout(watchers.tapHold);\n          watchers.tapHold = null;\n          watchers.tap = null;\n          clearTimeout(watchers.tapDbl);\n          watchers.tapDbl = null;\n          this.dispatchEvent(type + \"TapHold\", e, component);\n        }, 1000);\n        break;\n      case \"end\":\n        if (watchers.tap) {\n          watchers.tap = null;\n          this.dispatchEvent(type + \"Tap\", e, component);\n        }\n        if (watchers.tapDbl) {\n          clearTimeout(watchers.tapDbl);\n          watchers.tapDbl = null;\n          this.dispatchEvent(type + \"DblTap\", e, component);\n        } else {\n          watchers.tapDbl = setTimeout(() => {\n            clearTimeout(watchers.tapDbl);\n            watchers.tapDbl = null;\n          }, 300);\n        }\n        clearTimeout(watchers.tapHold);\n        watchers.tapHold = null;\n        break;\n    }\n  }\n  dispatchEvent(action, e, component) {\n    var componentObj = component.getComponent(),\n      callback;\n    if (this.columnSubscribers[action]) {\n      if (component instanceof Cell) {\n        callback = component.column.definition[action];\n      } else if (component instanceof Column) {\n        callback = component.definition[action];\n      }\n      if (callback) {\n        callback(e, componentObj);\n      }\n    }\n    this.dispatchExternal(action, e, componentObj);\n  }\n}\nInteraction.moduleName = \"interaction\";\nvar defaultBindings = {\n  navPrev: \"shift + 9\",\n  navNext: 9,\n  navUp: 38,\n  navDown: 40,\n  scrollPageUp: 33,\n  scrollPageDown: 34,\n  scrollToStart: 36,\n  scrollToEnd: 35,\n  undo: [\"ctrl + 90\", \"meta + 90\"],\n  redo: [\"ctrl + 89\", \"meta + 89\"],\n  copyToClipboard: [\"ctrl + 67\", \"meta + 89\"]\n};\nvar defaultActions = {\n  keyBlock: function (e) {\n    e.stopPropagation();\n    e.preventDefault();\n  },\n  scrollPageUp: function (e) {\n    var rowManager = this.table.rowManager,\n      newPos = rowManager.scrollTop - rowManager.element.clientHeight;\n    e.preventDefault();\n    if (rowManager.displayRowsCount) {\n      if (newPos >= 0) {\n        rowManager.element.scrollTop = newPos;\n      } else {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n      }\n    }\n    this.table.element.focus();\n  },\n  scrollPageDown: function (e) {\n    var rowManager = this.table.rowManager,\n      newPos = rowManager.scrollTop + rowManager.element.clientHeight,\n      scrollMax = rowManager.element.scrollHeight;\n    e.preventDefault();\n    if (rowManager.displayRowsCount) {\n      if (newPos <= scrollMax) {\n        rowManager.element.scrollTop = newPos;\n      } else {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n      }\n    }\n    this.table.element.focus();\n  },\n  scrollToStart: function (e) {\n    var rowManager = this.table.rowManager;\n    e.preventDefault();\n    if (rowManager.displayRowsCount) {\n      rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n    }\n    this.table.element.focus();\n  },\n  scrollToEnd: function (e) {\n    var rowManager = this.table.rowManager;\n    e.preventDefault();\n    if (rowManager.displayRowsCount) {\n      rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n    }\n    this.table.element.focus();\n  },\n  navPrev: function (e) {\n    this.dispatch(\"keybinding-nav-prev\", e);\n  },\n  navNext: function (e) {\n    this.dispatch(\"keybinding-nav-next\", e);\n  },\n  navLeft: function (e) {\n    this.dispatch(\"keybinding-nav-left\", e);\n  },\n  navRight: function (e) {\n    this.dispatch(\"keybinding-nav-right\", e);\n  },\n  navUp: function (e) {\n    this.dispatch(\"keybinding-nav-up\", e);\n  },\n  navDown: function (e) {\n    this.dispatch(\"keybinding-nav-down\", e);\n  },\n  undo: function (e) {\n    var cell = false;\n    if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n      if (!cell) {\n        e.preventDefault();\n        this.table.modules.history.undo();\n      }\n    }\n  },\n  redo: function (e) {\n    var cell = false;\n    if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n      if (!cell) {\n        e.preventDefault();\n        this.table.modules.history.redo();\n      }\n    }\n  },\n  copyToClipboard: function (e) {\n    if (!this.table.modules.edit.currentCell) {\n      if (this.table.modExists(\"clipboard\", true)) {\n        this.table.modules.clipboard.copy(false, true);\n      }\n    }\n  }\n};\nclass Keybindings extends Module {\n  constructor(table) {\n    super(table);\n    this.watchKeys = null;\n    this.pressedKeys = null;\n    this.keyupBinding = false;\n    this.keydownBinding = false;\n    this.registerTableOption(\"keybindings\", {}); //array for keybindings\n    this.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n  }\n\n  initialize() {\n    var bindings = this.table.options.keybindings,\n      mergedBindings = {};\n    this.watchKeys = {};\n    this.pressedKeys = [];\n    if (bindings !== false) {\n      Object.assign(mergedBindings, Keybindings.bindings);\n      Object.assign(mergedBindings, bindings);\n      this.mapBindings(mergedBindings);\n      this.bindEvents();\n    }\n    this.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n  }\n  mapBindings(bindings) {\n    for (let key in bindings) {\n      if (Keybindings.actions[key]) {\n        if (bindings[key]) {\n          if (typeof bindings[key] !== \"object\") {\n            bindings[key] = [bindings[key]];\n          }\n          bindings[key].forEach(binding => {\n            var bindingList = Array.isArray(binding) ? binding : [binding];\n            bindingList.forEach(item => {\n              this.mapBinding(key, item);\n            });\n          });\n        }\n      } else {\n        console.warn(\"Key Binding Error - no such action:\", key);\n      }\n    }\n  }\n  mapBinding(action, symbolsList) {\n    var binding = {\n      action: Keybindings.actions[action],\n      keys: [],\n      ctrl: false,\n      shift: false,\n      meta: false\n    };\n    var symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n    symbols.forEach(symbol => {\n      switch (symbol) {\n        case \"ctrl\":\n          binding.ctrl = true;\n          break;\n        case \"shift\":\n          binding.shift = true;\n          break;\n        case \"meta\":\n          binding.meta = true;\n          break;\n        default:\n          symbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n          binding.keys.push(symbol);\n          if (!this.watchKeys[symbol]) {\n            this.watchKeys[symbol] = [];\n          }\n          this.watchKeys[symbol].push(binding);\n      }\n    });\n  }\n  bindEvents() {\n    var self = this;\n    this.keyupBinding = function (e) {\n      var code = e.keyCode;\n      var bindings = self.watchKeys[code];\n      if (bindings) {\n        self.pressedKeys.push(code);\n        bindings.forEach(function (binding) {\n          self.checkBinding(e, binding);\n        });\n      }\n    };\n    this.keydownBinding = function (e) {\n      var code = e.keyCode;\n      var bindings = self.watchKeys[code];\n      if (bindings) {\n        var index = self.pressedKeys.indexOf(code);\n        if (index > -1) {\n          self.pressedKeys.splice(index, 1);\n        }\n      }\n    };\n    this.table.element.addEventListener(\"keydown\", this.keyupBinding);\n    this.table.element.addEventListener(\"keyup\", this.keydownBinding);\n  }\n  clearBindings() {\n    if (this.keyupBinding) {\n      this.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n    }\n    if (this.keydownBinding) {\n      this.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n    }\n  }\n  checkBinding(e, binding) {\n    var match = true;\n    if (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\n      binding.keys.forEach(key => {\n        var index = this.pressedKeys.indexOf(key);\n        if (index == -1) {\n          match = false;\n        }\n      });\n      if (match) {\n        binding.action.call(this, e);\n      }\n      return true;\n    }\n    return false;\n  }\n}\nKeybindings.moduleName = \"keybindings\";\n\n//load defaults\nKeybindings.bindings = defaultBindings;\nKeybindings.actions = defaultActions;\nclass Menu extends Module {\n  constructor(table) {\n    super(table);\n    this.menuContainer = null;\n    this.nestedMenuBlock = false;\n    this.currentComponent = null;\n    this.rootPopup = null;\n    this.columnSubscribers = {};\n    this.registerTableOption(\"menuContainer\", undefined); //deprecated\n\n    this.registerTableOption(\"rowContextMenu\", false);\n    this.registerTableOption(\"rowClickMenu\", false);\n    this.registerTableOption(\"rowDblClickMenu\", false);\n    this.registerTableOption(\"groupContextMenu\", false);\n    this.registerTableOption(\"groupClickMenu\", false);\n    this.registerTableOption(\"groupDblClickMenu\", false);\n    this.registerColumnOption(\"headerContextMenu\");\n    this.registerColumnOption(\"headerClickMenu\");\n    this.registerColumnOption(\"headerDblClickMenu\");\n    this.registerColumnOption(\"headerMenu\");\n    this.registerColumnOption(\"headerMenuIcon\");\n    this.registerColumnOption(\"contextMenu\");\n    this.registerColumnOption(\"clickMenu\");\n    this.registerColumnOption(\"dblClickMenu\");\n  }\n  initialize() {\n    this.deprecatedOptionsCheck();\n    this.initializeRowWatchers();\n    this.initializeGroupWatchers();\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n  }\n  deprecatedOptionsCheck() {\n    if (!this.deprecationCheck(\"menuContainer\", \"popupContainer\")) {\n      this.table.options.popupContainer = this.table.options.menuContainer;\n    }\n  }\n  initializeRowWatchers() {\n    if (this.table.options.rowContextMenu) {\n      this.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n      this.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n    }\n    if (this.table.options.rowClickMenu) {\n      this.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n    }\n    if (this.table.options.rowDblClickMenu) {\n      this.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n    }\n  }\n  initializeGroupWatchers() {\n    if (this.table.options.groupContextMenu) {\n      this.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n      this.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n    }\n    if (this.table.options.groupClickMenu) {\n      this.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n    }\n    if (this.table.options.groupDblClickMenu) {\n      this.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n    }\n  }\n  initializeColumn(column) {\n    var def = column.definition;\n\n    //handle column events\n    if (def.headerContextMenu && !this.columnSubscribers.headerContextMenu) {\n      this.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n      this.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n      this.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n    }\n    if (def.headerClickMenu && !this.columnSubscribers.headerClickMenu) {\n      this.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n      this.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n    }\n    if (def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu) {\n      this.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n      this.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n    }\n    if (def.headerMenu) {\n      this.initializeColumnHeaderMenu(column);\n    }\n\n    //handle cell events\n    if (def.contextMenu && !this.columnSubscribers.contextMenu) {\n      this.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n      this.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n      this.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n    }\n    if (def.clickMenu && !this.columnSubscribers.clickMenu) {\n      this.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n      this.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n    }\n    if (def.dblClickMenu && !this.columnSubscribers.dblClickMenu) {\n      this.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n      this.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n    }\n  }\n  initializeColumnHeaderMenu(column) {\n    var icon = column.definition.headerMenuIcon,\n      headerMenuEl;\n    headerMenuEl = document.createElement(\"span\");\n    headerMenuEl.classList.add(\"tabulator-header-popup-button\");\n    if (icon) {\n      if (typeof icon === \"function\") {\n        icon = icon(column.getComponent());\n      }\n      if (icon instanceof HTMLElement) {\n        headerMenuEl.appendChild(icon);\n      } else {\n        headerMenuEl.innerHTML = icon;\n      }\n    } else {\n      headerMenuEl.innerHTML = \"&vellip;\";\n    }\n    headerMenuEl.addEventListener(\"click\", e => {\n      e.stopPropagation();\n      e.preventDefault();\n      this.loadMenuEvent(column.definition.headerMenu, e, column);\n    });\n    column.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n  }\n  loadMenuTableCellEvent(option, e, cell) {\n    if (cell._cell) {\n      cell = cell._cell;\n    }\n    if (cell.column.definition[option]) {\n      this.loadMenuEvent(cell.column.definition[option], e, cell);\n    }\n  }\n  loadMenuTableColumnEvent(option, e, column) {\n    if (column._column) {\n      column = column._column;\n    }\n    if (column.definition[option]) {\n      this.loadMenuEvent(column.definition[option], e, column);\n    }\n  }\n  loadMenuEvent(menu, e, component) {\n    if (component._group) {\n      component = component._group;\n    } else if (component._row) {\n      component = component._row;\n    }\n    menu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n    this.loadMenu(e, component, menu);\n  }\n  loadMenu(e, component, menu, parentEl, parentPopup) {\n    var touch = !(e instanceof MouseEvent),\n      menuEl = document.createElement(\"div\"),\n      popup;\n    menuEl.classList.add(\"tabulator-menu\");\n    if (!touch) {\n      e.preventDefault();\n    }\n\n    //abort if no menu set\n    if (!menu || !menu.length) {\n      return;\n    }\n    if (!parentEl) {\n      if (this.nestedMenuBlock) {\n        //abort if child menu already open\n        if (this.rootPopup) {\n          return;\n        }\n      } else {\n        this.nestedMenuBlock = setTimeout(() => {\n          this.nestedMenuBlock = false;\n        }, 100);\n      }\n      if (this.rootPopup) {\n        this.rootPopup.hide();\n      }\n      this.rootPopup = popup = this.popup(menuEl);\n    } else {\n      popup = parentPopup.child(menuEl);\n    }\n    menu.forEach(item => {\n      var itemEl = document.createElement(\"div\"),\n        label = item.label,\n        disabled = item.disabled;\n      if (item.separator) {\n        itemEl.classList.add(\"tabulator-menu-separator\");\n      } else {\n        itemEl.classList.add(\"tabulator-menu-item\");\n        if (typeof label == \"function\") {\n          label = label.call(this.table, component.getComponent());\n        }\n        if (label instanceof Node) {\n          itemEl.appendChild(label);\n        } else {\n          itemEl.innerHTML = label;\n        }\n        if (typeof disabled == \"function\") {\n          disabled = disabled.call(this.table, component.getComponent());\n        }\n        if (disabled) {\n          itemEl.classList.add(\"tabulator-menu-item-disabled\");\n          itemEl.addEventListener(\"click\", e => {\n            e.stopPropagation();\n          });\n        } else {\n          if (item.menu && item.menu.length) {\n            itemEl.addEventListener(\"click\", e => {\n              e.stopPropagation();\n              this.loadMenu(e, component, item.menu, itemEl, popup);\n            });\n          } else {\n            if (item.action) {\n              itemEl.addEventListener(\"click\", e => {\n                item.action(e, component.getComponent());\n              });\n            }\n          }\n        }\n        if (item.menu && item.menu.length) {\n          itemEl.classList.add(\"tabulator-menu-item-submenu\");\n        }\n      }\n      menuEl.appendChild(itemEl);\n    });\n    menuEl.addEventListener(\"click\", e => {\n      if (this.rootPopup) {\n        this.rootPopup.hide();\n      }\n    });\n    popup.show(parentEl || e);\n    if (popup === this.rootPopup) {\n      this.rootPopup.hideOnBlur(() => {\n        this.rootPopup = null;\n        if (this.currentComponent) {\n          this.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n          this.currentComponent = null;\n        }\n      });\n      this.currentComponent = component;\n      this.dispatchExternal(\"menuOpened\", component.getComponent());\n    }\n  }\n}\nMenu.moduleName = \"menu\";\nclass MoveColumns extends Module {\n  constructor(table) {\n    super(table);\n    this.placeholderElement = this.createPlaceholderElement();\n    this.hoverElement = false; //floating column header element\n    this.checkTimeout = false; //click check timeout holder\n    this.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n    this.moving = false; //currently moving column\n    this.toCol = false; //destination column\n    this.toColAfter = false; //position of moving column relative to the destination column\n    this.startX = 0; //starting position within header element\n    this.autoScrollMargin = 40; //auto scroll on edge when within margin\n    this.autoScrollStep = 5; //auto scroll distance in pixels\n    this.autoScrollTimeout = false; //auto scroll timeout\n    this.touchMove = false;\n    this.moveHover = this.moveHover.bind(this);\n    this.endMove = this.endMove.bind(this);\n    this.registerTableOption(\"movableColumns\", false); //enable movable columns\n  }\n\n  createPlaceholderElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col\");\n    el.classList.add(\"tabulator-col-placeholder\");\n    return el;\n  }\n  initialize() {\n    if (this.table.options.movableColumns) {\n      this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n    }\n  }\n  initializeColumn(column) {\n    var self = this,\n      config = {},\n      colEl;\n    if (!column.modules.frozen && !column.isGroup) {\n      colEl = column.getElement();\n      config.mousemove = function (e) {\n        if (column.parent === self.moving.parent) {\n          if ((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left + self.table.columnManager.contentsElement.scrollLeft > column.getWidth() / 2) {\n            if (self.toCol !== column || !self.toColAfter) {\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n              self.moveColumn(column, true);\n            }\n          } else {\n            if (self.toCol !== column || self.toColAfter) {\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl);\n              self.moveColumn(column, false);\n            }\n          }\n        }\n      }.bind(self);\n      colEl.addEventListener(\"mousedown\", function (e) {\n        self.touchMove = false;\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, column);\n          }, self.checkPeriod);\n        }\n      });\n      colEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      self.bindTouchEvents(column);\n    }\n    column.modules.moveColumn = config;\n  }\n  bindTouchEvents(column) {\n    var colEl = column.getElement(),\n      startXMove = false,\n      //shifting center position of the cell\n      nextCol,\n      prevCol,\n      nextColWidth,\n      prevColWidth,\n      nextColWidthLast,\n      prevColWidthLast;\n    colEl.addEventListener(\"touchstart\", e => {\n      this.checkTimeout = setTimeout(() => {\n        this.touchMove = true;\n        nextCol = column.nextColumn();\n        nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n        prevCol = column.prevColumn();\n        prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n        nextColWidthLast = 0;\n        prevColWidthLast = 0;\n        startXMove = false;\n        this.startMove(e, column);\n      }, this.checkPeriod);\n    }, {\n      passive: true\n    });\n    colEl.addEventListener(\"touchmove\", e => {\n      var diff, moveToCol;\n      if (this.moving) {\n        this.moveHover(e);\n        if (!startXMove) {\n          startXMove = e.touches[0].pageX;\n        }\n        diff = e.touches[0].pageX - startXMove;\n        if (diff > 0) {\n          if (nextCol && diff - nextColWidthLast > nextColWidth) {\n            moveToCol = nextCol;\n            if (moveToCol !== column) {\n              startXMove = e.touches[0].pageX;\n              moveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n              this.moveColumn(moveToCol, true);\n            }\n          }\n        } else {\n          if (prevCol && -diff - prevColWidthLast > prevColWidth) {\n            moveToCol = prevCol;\n            if (moveToCol !== column) {\n              startXMove = e.touches[0].pageX;\n              moveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n              this.moveColumn(moveToCol, false);\n            }\n          }\n        }\n        if (moveToCol) {\n          nextCol = moveToCol.nextColumn();\n          nextColWidthLast = nextColWidth;\n          nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n          prevCol = moveToCol.prevColumn();\n          prevColWidthLast = prevColWidth;\n          prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n        }\n      }\n    }, {\n      passive: true\n    });\n    colEl.addEventListener(\"touchend\", e => {\n      if (this.checkTimeout) {\n        clearTimeout(this.checkTimeout);\n      }\n      if (this.moving) {\n        this.endMove(e);\n      }\n    });\n  }\n  startMove(e, column) {\n    var element = column.getElement(),\n      headerElement = this.table.columnManager.getContentsElement(),\n      headersElement = this.table.columnManager.getHeadersElement();\n    this.moving = column;\n    this.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n    this.table.element.classList.add(\"tabulator-block-select\");\n\n    //create placeholder\n    this.placeholderElement.style.width = column.getWidth() + \"px\";\n    this.placeholderElement.style.height = column.getHeight() + \"px\";\n    element.parentNode.insertBefore(this.placeholderElement, element);\n    element.parentNode.removeChild(element);\n\n    //create hover element\n    this.hoverElement = element.cloneNode(true);\n    this.hoverElement.classList.add(\"tabulator-moving\");\n    headerElement.appendChild(this.hoverElement);\n    this.hoverElement.style.left = \"0\";\n    this.hoverElement.style.bottom = headerElement.clientHeight - headersElement.offsetHeight + \"px\";\n    if (!this.touchMove) {\n      this._bindMouseMove();\n      document.body.addEventListener(\"mousemove\", this.moveHover);\n      document.body.addEventListener(\"mouseup\", this.endMove);\n    }\n    this.moveHover(e);\n  }\n  _bindMouseMove() {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.modules.moveColumn.mousemove) {\n        column.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n      }\n    });\n  }\n  _unbindMouseMove() {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.modules.moveColumn.mousemove) {\n        column.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n      }\n    });\n  }\n  moveColumn(column, after) {\n    var movingCells = this.moving.getCells();\n    this.toCol = column;\n    this.toColAfter = after;\n    if (after) {\n      column.getCells().forEach(function (cell, i) {\n        var cellEl = cell.getElement(true);\n        if (cellEl.parentNode && movingCells[i]) {\n          cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n        }\n      });\n    } else {\n      column.getCells().forEach(function (cell, i) {\n        var cellEl = cell.getElement(true);\n        if (cellEl.parentNode && movingCells[i]) {\n          cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n        }\n      });\n    }\n  }\n  endMove(e) {\n    if (e.which === 1 || this.touchMove) {\n      this._unbindMouseMove();\n      this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n      this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n      this.hoverElement.parentNode.removeChild(this.hoverElement);\n      this.table.element.classList.remove(\"tabulator-block-select\");\n      if (this.toCol) {\n        this.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n      }\n      this.moving = false;\n      this.toCol = false;\n      this.toColAfter = false;\n      if (!this.touchMove) {\n        document.body.removeEventListener(\"mousemove\", this.moveHover);\n        document.body.removeEventListener(\"mouseup\", this.endMove);\n      }\n    }\n  }\n  moveHover(e) {\n    var columnHolder = this.table.columnManager.getContentsElement(),\n      scrollLeft = columnHolder.scrollLeft,\n      xPos = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left + scrollLeft,\n      scrollPos;\n    this.hoverElement.style.left = xPos - this.startX + \"px\";\n    if (xPos - scrollLeft < this.autoScrollMargin) {\n      if (!this.autoScrollTimeout) {\n        this.autoScrollTimeout = setTimeout(() => {\n          scrollPos = Math.max(0, scrollLeft - 5);\n          this.table.rowManager.getElement().scrollLeft = scrollPos;\n          this.autoScrollTimeout = false;\n        }, 1);\n      }\n    }\n    if (scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin) {\n      if (!this.autoScrollTimeout) {\n        this.autoScrollTimeout = setTimeout(() => {\n          scrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5);\n          this.table.rowManager.getElement().scrollLeft = scrollPos;\n          this.autoScrollTimeout = false;\n        }, 1);\n      }\n    }\n  }\n}\nMoveColumns.moduleName = \"moveColumn\";\nclass MoveRows extends Module {\n  constructor(table) {\n    super(table);\n    this.placeholderElement = this.createPlaceholderElement();\n    this.hoverElement = false; //floating row header element\n    this.checkTimeout = false; //click check timeout holder\n    this.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n    this.moving = false; //currently moving row\n    this.toRow = false; //destination row\n    this.toRowAfter = false; //position of moving row relative to the destination row\n    this.hasHandle = false; //row has handle instead of fully movable row\n    this.startY = 0; //starting Y position within header element\n    this.startX = 0; //starting X position within header element\n\n    this.moveHover = this.moveHover.bind(this);\n    this.endMove = this.endMove.bind(this);\n    this.tableRowDropEvent = false;\n    this.touchMove = false;\n    this.connection = false;\n    this.connectionSelectorsTables = false;\n    this.connectionSelectorsElements = false;\n    this.connectionElements = [];\n    this.connections = [];\n    this.connectedTable = false;\n    this.connectedRow = false;\n    this.registerTableOption(\"movableRows\", false); //enable movable rows\n    this.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n    this.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n    this.registerTableOption(\"movableRowsSender\", false);\n    this.registerTableOption(\"movableRowsReceiver\", \"insert\");\n    this.registerColumnOption(\"rowHandle\");\n  }\n  createPlaceholderElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    el.classList.add(\"tabulator-row-placeholder\");\n    return el;\n  }\n  initialize() {\n    if (this.table.options.movableRows) {\n      this.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n      this.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n      this.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n      this.subscribe(\"cell-init\", this.initializeCell.bind(this));\n      this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n      this.subscribe(\"row-init\", this.initializeRow.bind(this));\n    }\n  }\n  initializeGroupHeader(group) {\n    var self = this,\n      config = {};\n\n    //inter table drag drop\n    config.mouseup = function (e) {\n      self.tableRowDrop(e, group);\n    }.bind(self);\n\n    //same table drag drop\n    config.mousemove = function (e) {\n      var rowEl;\n      if (e.pageY - Helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop > group.getHeight() / 2) {\n        if (self.toRow !== group || !self.toRowAfter) {\n          rowEl = group.getElement();\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n          self.moveRow(group, true);\n        }\n      } else {\n        if (self.toRow !== group || self.toRowAfter) {\n          rowEl = group.getElement();\n          if (rowEl.previousSibling) {\n            rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n            self.moveRow(group, false);\n          }\n        }\n      }\n    }.bind(self);\n    group.modules.moveRow = config;\n  }\n  initializeRow(row) {\n    var self = this,\n      config = {},\n      rowEl;\n\n    //inter table drag drop\n    config.mouseup = function (e) {\n      self.tableRowDrop(e, row);\n    }.bind(self);\n\n    //same table drag drop\n    config.mousemove = function (e) {\n      var rowEl = row.getElement();\n      if (e.pageY - Helpers.elOffset(rowEl).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\n        if (self.toRow !== row || !self.toRowAfter) {\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n          self.moveRow(row, true);\n        }\n      } else {\n        if (self.toRow !== row || self.toRowAfter) {\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n          self.moveRow(row, false);\n        }\n      }\n    }.bind(self);\n    if (!this.hasHandle) {\n      rowEl = row.getElement();\n      rowEl.addEventListener(\"mousedown\", function (e) {\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, row);\n          }, self.checkPeriod);\n        }\n      });\n      rowEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      this.bindTouchEvents(row, row.getElement());\n    }\n    row.modules.moveRow = config;\n  }\n  initializeColumn(column) {\n    if (column.definition.rowHandle && this.table.options.movableRows !== false) {\n      this.hasHandle = true;\n    }\n  }\n  initializeCell(cell) {\n    if (cell.column.definition.rowHandle && this.table.options.movableRows !== false) {\n      var self = this,\n        cellEl = cell.getElement(true);\n      cellEl.addEventListener(\"mousedown\", function (e) {\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, cell.row);\n          }, self.checkPeriod);\n        }\n      });\n      cellEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      this.bindTouchEvents(cell.row, cellEl);\n    }\n  }\n  bindTouchEvents(row, element) {\n    var startYMove = false,\n      //shifting center position of the cell\n      nextRow,\n      prevRow,\n      nextRowHeight,\n      prevRowHeight,\n      nextRowHeightLast,\n      prevRowHeightLast;\n    element.addEventListener(\"touchstart\", e => {\n      this.checkTimeout = setTimeout(() => {\n        this.touchMove = true;\n        nextRow = row.nextRow();\n        nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n        prevRow = row.prevRow();\n        prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n        nextRowHeightLast = 0;\n        prevRowHeightLast = 0;\n        startYMove = false;\n        this.startMove(e, row);\n      }, this.checkPeriod);\n    }, {\n      passive: true\n    });\n    this.moving, this.toRow, this.toRowAfter;\n    element.addEventListener(\"touchmove\", e => {\n      var diff, moveToRow;\n      if (this.moving) {\n        e.preventDefault();\n        this.moveHover(e);\n        if (!startYMove) {\n          startYMove = e.touches[0].pageY;\n        }\n        diff = e.touches[0].pageY - startYMove;\n        if (diff > 0) {\n          if (nextRow && diff - nextRowHeightLast > nextRowHeight) {\n            moveToRow = nextRow;\n            if (moveToRow !== row) {\n              startYMove = e.touches[0].pageY;\n              moveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n              this.moveRow(moveToRow, true);\n            }\n          }\n        } else {\n          if (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\n            moveToRow = prevRow;\n            if (moveToRow !== row) {\n              startYMove = e.touches[0].pageY;\n              moveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n              this.moveRow(moveToRow, false);\n            }\n          }\n        }\n        if (moveToRow) {\n          nextRow = moveToRow.nextRow();\n          nextRowHeightLast = nextRowHeight;\n          nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n          prevRow = moveToRow.prevRow();\n          prevRowHeightLast = prevRowHeight;\n          prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n        }\n      }\n    });\n    element.addEventListener(\"touchend\", e => {\n      if (this.checkTimeout) {\n        clearTimeout(this.checkTimeout);\n      }\n      if (this.moving) {\n        this.endMove(e);\n        this.touchMove = false;\n      }\n    });\n  }\n  _bindMouseMove() {\n    this.table.rowManager.getDisplayRows().forEach(row => {\n      if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove) {\n        row.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n      }\n    });\n  }\n  _unbindMouseMove() {\n    this.table.rowManager.getDisplayRows().forEach(row => {\n      if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove) {\n        row.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n      }\n    });\n  }\n  startMove(e, row) {\n    var element = row.getElement();\n    this.setStartPosition(e, row);\n    this.moving = row;\n    this.table.element.classList.add(\"tabulator-block-select\");\n\n    //create placeholder\n    this.placeholderElement.style.width = row.getWidth() + \"px\";\n    this.placeholderElement.style.height = row.getHeight() + \"px\";\n    if (!this.connection) {\n      element.parentNode.insertBefore(this.placeholderElement, element);\n      element.parentNode.removeChild(element);\n    } else {\n      this.table.element.classList.add(\"tabulator-movingrow-sending\");\n      this.connectToTables(row);\n    }\n\n    //create hover element\n    this.hoverElement = element.cloneNode(true);\n    this.hoverElement.classList.add(\"tabulator-moving\");\n    if (this.connection) {\n      document.body.appendChild(this.hoverElement);\n      this.hoverElement.style.left = \"0\";\n      this.hoverElement.style.top = \"0\";\n      this.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n      this.hoverElement.style.whiteSpace = \"nowrap\";\n      this.hoverElement.style.overflow = \"hidden\";\n      this.hoverElement.style.pointerEvents = \"none\";\n    } else {\n      this.table.rowManager.getTableElement().appendChild(this.hoverElement);\n      this.hoverElement.style.left = \"0\";\n      this.hoverElement.style.top = \"0\";\n      this._bindMouseMove();\n    }\n    document.body.addEventListener(\"mousemove\", this.moveHover);\n    document.body.addEventListener(\"mouseup\", this.endMove);\n    this.dispatchExternal(\"rowMoving\", row.getComponent());\n    this.moveHover(e);\n  }\n  setStartPosition(e, row) {\n    var pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n      pageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n      element,\n      position;\n    element = row.getElement();\n    if (this.connection) {\n      position = element.getBoundingClientRect();\n      this.startX = position.left - pageX + window.pageXOffset;\n      this.startY = position.top - pageY + window.pageYOffset;\n    } else {\n      this.startY = pageY - element.getBoundingClientRect().top;\n    }\n  }\n  endMove(e) {\n    if (!e || e.which === 1 || this.touchMove) {\n      this._unbindMouseMove();\n      if (!this.connection) {\n        this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n        this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n      }\n      this.hoverElement.parentNode.removeChild(this.hoverElement);\n      this.table.element.classList.remove(\"tabulator-block-select\");\n      if (this.toRow) {\n        this.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n      } else {\n        this.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n      }\n      this.moving = false;\n      this.toRow = false;\n      this.toRowAfter = false;\n      document.body.removeEventListener(\"mousemove\", this.moveHover);\n      document.body.removeEventListener(\"mouseup\", this.endMove);\n      if (this.connection) {\n        this.table.element.classList.remove(\"tabulator-movingrow-sending\");\n        this.disconnectFromTables();\n      }\n    }\n  }\n  moveRow(row, after) {\n    this.toRow = row;\n    this.toRowAfter = after;\n  }\n  moveHover(e) {\n    if (this.connection) {\n      this.moveHoverConnections.call(this, e);\n    } else {\n      this.moveHoverTable.call(this, e);\n    }\n  }\n  moveHoverTable(e) {\n    var rowHolder = this.table.rowManager.getElement(),\n      scrollTop = rowHolder.scrollTop,\n      yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop;\n    this.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n  }\n  moveHoverConnections(e) {\n    this.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\";\n    this.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n  }\n  elementRowDrop(e, element, row) {\n    this.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n  }\n\n  //establish connection with other tables\n  connectToTables(row) {\n    var connectionTables;\n    if (this.connectionSelectorsTables) {\n      connectionTables = this.commsConnections(this.connectionSelectorsTables);\n      this.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n      this.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n        row: row\n      });\n    }\n    if (this.connectionSelectorsElements) {\n      this.connectionElements = [];\n      if (!Array.isArray(this.connectionSelectorsElements)) {\n        this.connectionSelectorsElements = [this.connectionSelectorsElements];\n      }\n      this.connectionSelectorsElements.forEach(query => {\n        if (typeof query === \"string\") {\n          this.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n        } else {\n          this.connectionElements.push(query);\n        }\n      });\n      this.connectionElements.forEach(element => {\n        var dropEvent = e => {\n          this.elementRowDrop(e, element, this.moving);\n        };\n        element.addEventListener(\"mouseup\", dropEvent);\n        element.tabulatorElementDropEvent = dropEvent;\n        element.classList.add(\"tabulator-movingrow-receiving\");\n      });\n    }\n  }\n\n  //disconnect from other tables\n  disconnectFromTables() {\n    var connectionTables;\n    if (this.connectionSelectorsTables) {\n      connectionTables = this.commsConnections(this.connectionSelectorsTables);\n      this.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n      this.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n    }\n    this.connectionElements.forEach(element => {\n      element.classList.remove(\"tabulator-movingrow-receiving\");\n      element.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n      delete element.tabulatorElementDropEvent;\n    });\n  }\n\n  //accept incomming connection\n  connect(table, row) {\n    if (!this.connectedTable) {\n      this.connectedTable = table;\n      this.connectedRow = row;\n      this.table.element.classList.add(\"tabulator-movingrow-receiving\");\n      this.table.rowManager.getDisplayRows().forEach(row => {\n        if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n          row.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n        }\n      });\n      this.tableRowDropEvent = this.tableRowDrop.bind(this);\n      this.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n      this.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n      return true;\n    } else {\n      console.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n      return false;\n    }\n  }\n\n  //close incoming connection\n  disconnect(table) {\n    if (table === this.connectedTable) {\n      this.connectedTable = false;\n      this.connectedRow = false;\n      this.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n      this.table.rowManager.getDisplayRows().forEach(row => {\n        if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n          row.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n        }\n      });\n      this.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n      this.dispatchExternal(\"movableRowsReceivingStop\", table);\n    } else {\n      console.warn(\"Move Row Error - trying to disconnect from non connected table\");\n    }\n  }\n  dropComplete(table, row, success) {\n    var sender = false;\n    if (success) {\n      switch (typeof this.table.options.movableRowsSender) {\n        case \"string\":\n          sender = this.senders[this.table.options.movableRowsSender];\n          break;\n        case \"function\":\n          sender = this.table.options.movableRowsSender;\n          break;\n      }\n      if (sender) {\n        sender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n      } else {\n        if (this.table.options.movableRowsSender) {\n          console.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n        }\n      }\n      this.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    } else {\n      this.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    }\n    this.endMove();\n  }\n  tableRowDrop(e, row) {\n    var receiver = false,\n      success = false;\n    e.stopImmediatePropagation();\n    switch (typeof this.table.options.movableRowsReceiver) {\n      case \"string\":\n        receiver = this.receivers[this.table.options.movableRowsReceiver];\n        break;\n      case \"function\":\n        receiver = this.table.options.movableRowsReceiver;\n        break;\n    }\n    if (receiver) {\n      success = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    } else {\n      console.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n    }\n    if (success) {\n      this.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    } else {\n      this.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    }\n    this.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n      row: row,\n      success: success\n    });\n  }\n  commsReceived(table, action, data) {\n    switch (action) {\n      case \"connect\":\n        return this.connect(table, data.row);\n      case \"disconnect\":\n        return this.disconnect(table);\n      case \"dropcomplete\":\n        return this.dropComplete(table, data.row, data.success);\n    }\n  }\n}\nMoveRows.prototype.receivers = {\n  insert: function (fromRow, toRow, fromTable) {\n    this.table.addRow(fromRow.getData(), undefined, toRow);\n    return true;\n  },\n  add: function (fromRow, toRow, fromTable) {\n    this.table.addRow(fromRow.getData());\n    return true;\n  },\n  update: function (fromRow, toRow, fromTable) {\n    if (toRow) {\n      toRow.update(fromRow.getData());\n      return true;\n    }\n    return false;\n  },\n  replace: function (fromRow, toRow, fromTable) {\n    if (toRow) {\n      this.table.addRow(fromRow.getData(), undefined, toRow);\n      toRow.delete();\n      return true;\n    }\n    return false;\n  }\n};\nMoveRows.prototype.senders = {\n  delete: function (fromRow, toRow, toTable) {\n    fromRow.delete();\n  }\n};\nMoveRows.moduleName = \"moveRow\";\nvar defaultMutators = {};\nclass Mutator extends Module {\n  constructor(table) {\n    super(table);\n    this.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of mutation types\n    this.enabled = true;\n    this.registerColumnOption(\"mutator\");\n    this.registerColumnOption(\"mutatorParams\");\n    this.registerColumnOption(\"mutatorData\");\n    this.registerColumnOption(\"mutatorDataParams\");\n    this.registerColumnOption(\"mutatorEdit\");\n    this.registerColumnOption(\"mutatorEditParams\");\n    this.registerColumnOption(\"mutatorClipboard\");\n    this.registerColumnOption(\"mutatorClipboardParams\");\n    this.registerColumnOption(\"mutateLink\");\n  }\n  initialize() {\n    this.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n    this.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n    this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n    this.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n    this.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n  }\n  rowDataChanged(row, tempData, updatedData) {\n    return this.transformRow(tempData, \"data\", updatedData);\n  }\n\n  //initialize column mutator\n  initializeColumn(column) {\n    var match = false,\n      config = {};\n    this.allowedTypes.forEach(type => {\n      var key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n        mutator;\n      if (column.definition[key]) {\n        mutator = this.lookupMutator(column.definition[key]);\n        if (mutator) {\n          match = true;\n          config[key] = {\n            mutator: mutator,\n            params: column.definition[key + \"Params\"] || {}\n          };\n        }\n      }\n    });\n    if (match) {\n      column.modules.mutate = config;\n    }\n  }\n  lookupMutator(value) {\n    var mutator = false;\n\n    //set column mutator\n    switch (typeof value) {\n      case \"string\":\n        if (Mutator.mutators[value]) {\n          mutator = Mutator.mutators[value];\n        } else {\n          console.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n        }\n        break;\n      case \"function\":\n        mutator = value;\n        break;\n    }\n    return mutator;\n  }\n\n  //apply mutator to row\n  transformRow(data, type, updatedData) {\n    var key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n      value;\n    if (this.enabled) {\n      this.table.columnManager.traverse(column => {\n        var mutator, params, component;\n        if (column.modules.mutate) {\n          mutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n          if (mutator) {\n            value = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n            if (type == \"data\" && !updatedData || typeof value !== \"undefined\") {\n              component = column.getComponent();\n              params = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n              column.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n            }\n          }\n        }\n      });\n    }\n    return data;\n  }\n\n  //apply mutator to new cell value\n  transformCell(cell, value) {\n    if (cell.column.modules.mutate) {\n      var mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n        tempData = {};\n      if (mutator) {\n        tempData = Object.assign(tempData, cell.row.getData());\n        cell.column.setFieldValue(tempData, value);\n        return mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n      }\n    }\n    return value;\n  }\n  mutateLink(cell) {\n    var links = cell.column.definition.mutateLink;\n    if (links) {\n      if (!Array.isArray(links)) {\n        links = [links];\n      }\n      links.forEach(link => {\n        var linkCell = cell.row.getCell(link);\n        if (linkCell) {\n          linkCell.setValue(linkCell.getValue(), true, true);\n        }\n      });\n    }\n  }\n  enable() {\n    this.enabled = true;\n  }\n  disable() {\n    this.enabled = false;\n  }\n}\nMutator.moduleName = \"mutator\";\n\n//load defaults\nMutator.mutators = defaultMutators;\nfunction rows(pageSize, currentRow, currentPage, totalRows, totalPages) {\n  var el = document.createElement(\"span\"),\n    showingEl = document.createElement(\"span\"),\n    valueEl = document.createElement(\"span\"),\n    ofEl = document.createElement(\"span\"),\n    totalEl = document.createElement(\"span\"),\n    rowsEl = document.createElement(\"span\");\n  this.table.modules.localize.langBind(\"pagination|counter|showing\", value => {\n    showingEl.innerHTML = value;\n  });\n  this.table.modules.localize.langBind(\"pagination|counter|of\", value => {\n    ofEl.innerHTML = value;\n  });\n  this.table.modules.localize.langBind(\"pagination|counter|rows\", value => {\n    rowsEl.innerHTML = value;\n  });\n  if (totalRows) {\n    valueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min(currentRow + pageSize - 1, totalRows) + \" \";\n    totalEl.innerHTML = \" \" + totalRows + \" \";\n    el.appendChild(showingEl);\n    el.appendChild(valueEl);\n    el.appendChild(ofEl);\n    el.appendChild(totalEl);\n    el.appendChild(rowsEl);\n  } else {\n    valueEl.innerHTML = \" 0 \";\n    el.appendChild(showingEl);\n    el.appendChild(valueEl);\n    el.appendChild(rowsEl);\n  }\n  return el;\n}\nfunction pages(pageSize, currentRow, currentPage, totalRows, totalPages) {\n  var el = document.createElement(\"span\"),\n    showingEl = document.createElement(\"span\"),\n    valueEl = document.createElement(\"span\"),\n    ofEl = document.createElement(\"span\"),\n    totalEl = document.createElement(\"span\"),\n    rowsEl = document.createElement(\"span\");\n  this.table.modules.localize.langBind(\"pagination|counter|showing\", value => {\n    showingEl.innerHTML = value;\n  });\n  valueEl.innerHTML = \" \" + currentPage + \" \";\n  this.table.modules.localize.langBind(\"pagination|counter|of\", value => {\n    ofEl.innerHTML = value;\n  });\n  totalEl.innerHTML = \" \" + totalPages + \" \";\n  this.table.modules.localize.langBind(\"pagination|counter|pages\", value => {\n    rowsEl.innerHTML = value;\n  });\n  el.appendChild(showingEl);\n  el.appendChild(valueEl);\n  el.appendChild(ofEl);\n  el.appendChild(totalEl);\n  el.appendChild(rowsEl);\n  return el;\n}\nvar defaultPageCounters = {\n  rows: rows,\n  pages: pages\n};\nclass Page extends Module {\n  constructor(table) {\n    super(table);\n    this.mode = \"local\";\n    this.progressiveLoad = false;\n    this.element = null;\n    this.pageCounterElement = null;\n    this.pageCounter = null;\n    this.size = 0;\n    this.page = 1;\n    this.count = 5;\n    this.max = 1;\n    this.remoteRowCountEstimate = null;\n    this.initialLoad = true;\n    this.dataChanging = false; //flag to check if data is being changed by this module\n\n    this.pageSizes = [];\n    this.registerTableOption(\"pagination\", false); //set pagination type\n    this.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n    this.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n    this.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n    this.registerTableOption(\"paginationCounter\", false); // set pagination counter\n    this.registerTableOption(\"paginationCounterElement\", false); // set pagination counter\n    this.registerTableOption(\"paginationButtonCount\", 5); // set count of page button\n    this.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n    this.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n    // this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n    // this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n    this.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\n    this.registerTableOption(\"progressiveLoad\", false); //progressive loading\n    this.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n    this.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\n    this.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n    this.registerTableFunction(\"setPage\", this.setPage.bind(this));\n    this.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n    this.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n    this.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n    this.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n    this.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n    this.registerTableFunction(\"getPage\", this.getPage.bind(this));\n    this.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n  }\n  initialize() {\n    if (this.table.options.pagination) {\n      this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n      this.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n      this.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n      this.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n      this.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n      if (this.table.options.paginationAddRow == \"page\") {\n        this.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n      }\n      if (this.table.options.paginationMode === \"remote\") {\n        this.subscribe(\"data-params\", this.remotePageParams.bind(this));\n        this.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n      }\n      if (this.table.options.progressiveLoad) {\n        console.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n      }\n      this.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n      this.registerDisplayHandler(this.getRows.bind(this), 50);\n      this.createElements();\n      this.initializePageCounter();\n      this.initializePaginator();\n    } else if (this.table.options.progressiveLoad) {\n      this.subscribe(\"data-params\", this.remotePageParams.bind(this));\n      this.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n      this.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n      this.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n      this.initializeProgressive(this.table.options.progressiveLoad);\n      if (this.table.options.progressiveLoad === \"scroll\") {\n        this.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n      }\n    }\n  }\n  rowAddingPosition(row, top) {\n    var rowManager = this.table.rowManager,\n      displayRows = rowManager.getDisplayRows(),\n      index;\n    if (top) {\n      if (displayRows.length) {\n        index = displayRows[0];\n      } else {\n        if (rowManager.activeRows.length) {\n          index = rowManager.activeRows[rowManager.activeRows.length - 1];\n          top = false;\n        }\n      }\n    } else {\n      if (displayRows.length) {\n        index = displayRows[displayRows.length - 1];\n        top = displayRows.length < this.size ? false : true;\n      }\n    }\n    return {\n      index,\n      top\n    };\n  }\n  calculatePageSizes() {\n    var testElRow, testElCell;\n    if (this.table.options.paginationSize) {\n      this.size = this.table.options.paginationSize;\n    } else {\n      testElRow = document.createElement(\"div\");\n      testElRow.classList.add(\"tabulator-row\");\n      testElRow.style.visibility = \"hidden\";\n      testElCell = document.createElement(\"div\");\n      testElCell.classList.add(\"tabulator-cell\");\n      testElCell.innerHTML = \"Page Row Test\";\n      testElRow.appendChild(testElCell);\n      this.table.rowManager.getTableElement().appendChild(testElRow);\n      this.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n      this.table.rowManager.getTableElement().removeChild(testElRow);\n    }\n    this.dispatchExternal(\"pageSizeChanged\", this.size);\n    this.generatePageSizeSelectList();\n  }\n  initialLoadComplete() {\n    this.initialLoad = false;\n  }\n  remotePageParams(data, config, silent, params) {\n    if (!this.initialLoad) {\n      if (this.progressiveLoad && !silent || !this.progressiveLoad && !this.dataChanging) {\n        this.reset(true);\n      }\n    }\n\n    //configure request params\n    params.page = this.page;\n\n    //set page size if defined\n    if (this.size) {\n      params.size = this.size;\n    }\n    return params;\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  userSetPageToRow(row) {\n    if (this.table.options.pagination) {\n      row = this.rowManager.findRow(row);\n      if (row) {\n        return this.setPageToRow(row);\n      }\n    }\n    return Promise.reject();\n  }\n  userSetPageSize(size) {\n    if (this.table.options.pagination) {\n      this.setPageSize(size);\n      return this.setPage(1);\n    } else {\n      return false;\n    }\n  }\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  scrollVertical(top, dir) {\n    var element, diff, margin;\n    if (!dir && !this.table.dataLoader.loading) {\n      element = this.table.rowManager.getElement();\n      diff = element.scrollHeight - element.clientHeight - top;\n      margin = this.table.options.progressiveLoadScrollMargin || element.clientHeight * 2;\n      if (diff < margin) {\n        this.nextPage().catch(() => {}); //consume the exception thrown when on the last page\n      }\n    }\n  }\n\n  restOnRenderBefore(rows, renderInPosition) {\n    if (!renderInPosition) {\n      if (this.mode === \"local\") {\n        this.reset();\n      }\n    }\n    return rows;\n  }\n  rowsUpdated() {\n    this.refreshData(true, \"all\");\n  }\n  createElements() {\n    var button;\n    this.element = document.createElement(\"span\");\n    this.element.classList.add(\"tabulator-paginator\");\n    this.pagesElement = document.createElement(\"span\");\n    this.pagesElement.classList.add(\"tabulator-pages\");\n    button = document.createElement(\"button\");\n    button.classList.add(\"tabulator-page\");\n    button.setAttribute(\"type\", \"button\");\n    button.setAttribute(\"role\", \"button\");\n    button.setAttribute(\"aria-label\", \"\");\n    button.setAttribute(\"title\", \"\");\n    this.firstBut = button.cloneNode(true);\n    this.firstBut.setAttribute(\"data-page\", \"first\");\n    this.prevBut = button.cloneNode(true);\n    this.prevBut.setAttribute(\"data-page\", \"prev\");\n    this.nextBut = button.cloneNode(true);\n    this.nextBut.setAttribute(\"data-page\", \"next\");\n    this.lastBut = button.cloneNode(true);\n    this.lastBut.setAttribute(\"data-page\", \"last\");\n    if (this.table.options.paginationSizeSelector) {\n      this.pageSizeSelect = document.createElement(\"select\");\n      this.pageSizeSelect.classList.add(\"tabulator-page-size\");\n    }\n  }\n  generatePageSizeSelectList() {\n    var pageSizes = [];\n    if (this.pageSizeSelect) {\n      if (Array.isArray(this.table.options.paginationSizeSelector)) {\n        pageSizes = this.table.options.paginationSizeSelector;\n        this.pageSizes = pageSizes;\n        if (this.pageSizes.indexOf(this.size) == -1) {\n          pageSizes.unshift(this.size);\n        }\n      } else {\n        if (this.pageSizes.indexOf(this.size) == -1) {\n          pageSizes = [];\n          for (let i = 1; i < 5; i++) {\n            pageSizes.push(this.size * i);\n          }\n          this.pageSizes = pageSizes;\n        } else {\n          pageSizes = this.pageSizes;\n        }\n      }\n      while (this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n      pageSizes.forEach(item => {\n        var itemEl = document.createElement(\"option\");\n        itemEl.value = item;\n        if (item === true) {\n          this.langBind(\"pagination|all\", function (value) {\n            itemEl.innerHTML = value;\n          });\n        } else {\n          itemEl.innerHTML = item;\n        }\n        this.pageSizeSelect.appendChild(itemEl);\n      });\n      this.pageSizeSelect.value = this.size;\n    }\n  }\n  initializePageCounter() {\n    var counter = this.table.options.paginationCounter,\n      pageCounter = null;\n    if (counter) {\n      if (typeof counter === \"function\") {\n        pageCounter = counter;\n      } else {\n        pageCounter = Page.pageCounters[counter];\n      }\n      if (pageCounter) {\n        this.pageCounter = pageCounter;\n        this.pageCounterElement = document.createElement(\"span\");\n        this.pageCounterElement.classList.add(\"tabulator-page-counter\");\n      } else {\n        console.warn(\"Pagination Error - No such page counter found: \", counter);\n      }\n    }\n  }\n\n  //setup pagination\n  initializePaginator(hidden) {\n    var pageSelectLabel, paginationCounterHolder;\n    if (!hidden) {\n      //build pagination element\n\n      //bind localizations\n      this.langBind(\"pagination|first\", value => {\n        this.firstBut.innerHTML = value;\n      });\n      this.langBind(\"pagination|first_title\", value => {\n        this.firstBut.setAttribute(\"aria-label\", value);\n        this.firstBut.setAttribute(\"title\", value);\n      });\n      this.langBind(\"pagination|prev\", value => {\n        this.prevBut.innerHTML = value;\n      });\n      this.langBind(\"pagination|prev_title\", value => {\n        this.prevBut.setAttribute(\"aria-label\", value);\n        this.prevBut.setAttribute(\"title\", value);\n      });\n      this.langBind(\"pagination|next\", value => {\n        this.nextBut.innerHTML = value;\n      });\n      this.langBind(\"pagination|next_title\", value => {\n        this.nextBut.setAttribute(\"aria-label\", value);\n        this.nextBut.setAttribute(\"title\", value);\n      });\n      this.langBind(\"pagination|last\", value => {\n        this.lastBut.innerHTML = value;\n      });\n      this.langBind(\"pagination|last_title\", value => {\n        this.lastBut.setAttribute(\"aria-label\", value);\n        this.lastBut.setAttribute(\"title\", value);\n      });\n\n      //click bindings\n      this.firstBut.addEventListener(\"click\", () => {\n        this.setPage(1);\n      });\n      this.prevBut.addEventListener(\"click\", () => {\n        this.previousPage();\n      });\n      this.nextBut.addEventListener(\"click\", () => {\n        this.nextPage();\n      });\n      this.lastBut.addEventListener(\"click\", () => {\n        this.setPage(this.max);\n      });\n      if (this.table.options.paginationElement) {\n        this.element = this.table.options.paginationElement;\n      }\n      if (this.pageSizeSelect) {\n        pageSelectLabel = document.createElement(\"label\");\n        this.langBind(\"pagination|page_size\", value => {\n          this.pageSizeSelect.setAttribute(\"aria-label\", value);\n          this.pageSizeSelect.setAttribute(\"title\", value);\n          pageSelectLabel.innerHTML = value;\n        });\n        this.element.appendChild(pageSelectLabel);\n        this.element.appendChild(this.pageSizeSelect);\n        this.pageSizeSelect.addEventListener(\"change\", e => {\n          this.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n          this.setPage(1);\n        });\n      }\n\n      //append to DOM\n      this.element.appendChild(this.firstBut);\n      this.element.appendChild(this.prevBut);\n      this.element.appendChild(this.pagesElement);\n      this.element.appendChild(this.nextBut);\n      this.element.appendChild(this.lastBut);\n      if (!this.table.options.paginationElement) {\n        if (this.table.options.paginationCounter) {\n          if (this.table.options.paginationCounterElement) {\n            if (this.table.options.paginationCounterElement instanceof HTMLElement) {\n              this.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n            } else if (typeof this.table.options.paginationCounterElement === \"string\") {\n              paginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n              if (paginationCounterHolder) {\n                paginationCounterHolder.appendChild(this.pageCounterElement);\n              } else {\n                console.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n              }\n            }\n          } else {\n            this.footerAppend(this.pageCounterElement);\n          }\n        }\n        this.footerAppend(this.element);\n      }\n      this.page = this.table.options.paginationInitialPage;\n      this.count = this.table.options.paginationButtonCount;\n    }\n\n    //set default values\n    this.mode = this.table.options.paginationMode;\n  }\n  initializeProgressive(mode) {\n    this.initializePaginator(true);\n    this.mode = \"progressive_\" + mode;\n    this.progressiveLoad = true;\n  }\n  trackChanges() {\n    this.dispatch(\"page-changed\");\n  }\n\n  //calculate maximum page from number of rows\n  setMaxRows(rowCount) {\n    if (!rowCount) {\n      this.max = 1;\n    } else {\n      this.max = this.size === true ? 1 : Math.ceil(rowCount / this.size);\n    }\n    if (this.page > this.max) {\n      this.page = this.max;\n    }\n  }\n\n  //reset to first page without triggering action\n  reset(force) {\n    if (!this.initialLoad) {\n      if (this.mode == \"local\" || force) {\n        this.page = 1;\n        this.trackChanges();\n      }\n    }\n  }\n\n  //set the maximum page\n  setMaxPage(max) {\n    max = parseInt(max);\n    this.max = max || 1;\n    if (this.page > this.max) {\n      this.page = this.max;\n      this.trigger();\n    }\n  }\n\n  //set current page number\n  setPage(page) {\n    switch (page) {\n      case \"first\":\n        return this.setPage(1);\n      case \"prev\":\n        return this.previousPage();\n      case \"next\":\n        return this.nextPage();\n      case \"last\":\n        return this.setPage(this.max);\n    }\n    page = parseInt(page);\n    if (page > 0 && page <= this.max || this.mode !== \"local\") {\n      this.page = page;\n      this.trackChanges();\n      return this.trigger();\n    } else {\n      console.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n      return Promise.reject();\n    }\n  }\n  setPageToRow(row) {\n    var rows = this.displayRows(-1);\n    var index = rows.indexOf(row);\n    if (index > -1) {\n      var page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n      return this.setPage(page);\n    } else {\n      console.warn(\"Pagination Error - Requested row is not visible\");\n      return Promise.reject();\n    }\n  }\n  setPageSize(size) {\n    if (size !== true) {\n      size = parseInt(size);\n    }\n    if (size > 0) {\n      this.size = size;\n      this.dispatchExternal(\"pageSizeChanged\", size);\n    }\n    if (this.pageSizeSelect) {\n      // this.pageSizeSelect.value = size;\n      this.generatePageSizeSelectList();\n    }\n    this.trackChanges();\n  }\n  _setPageCounter(totalRows, size, currentRow) {\n    var content;\n    if (this.pageCounter) {\n      if (this.mode === \"remote\") {\n        size = this.size;\n        currentRow = (this.page - 1) * this.size + 1;\n        totalRows = this.remoteRowCountEstimate;\n      }\n      content = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n      switch (typeof content) {\n        case \"object\":\n          if (content instanceof Node) {\n            //clear previous cell contents\n            while (this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n            this.pageCounterElement.appendChild(content);\n          } else {\n            this.pageCounterElement.innerHTML = \"\";\n            if (content != null) {\n              console.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n            }\n          }\n          break;\n        case \"undefined\":\n          this.pageCounterElement.innerHTML = \"\";\n          break;\n        default:\n          this.pageCounterElement.innerHTML = content;\n      }\n    }\n  }\n\n  //setup the pagination buttons\n  _setPageButtons() {\n    let leftSize = Math.floor((this.count - 1) / 2);\n    let rightSize = Math.ceil((this.count - 1) / 2);\n    let min = this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1);\n    let max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max);\n    while (this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n    if (this.page == 1) {\n      this.firstBut.disabled = true;\n      this.prevBut.disabled = true;\n    } else {\n      this.firstBut.disabled = false;\n      this.prevBut.disabled = false;\n    }\n    if (this.page == this.max) {\n      this.lastBut.disabled = true;\n      this.nextBut.disabled = true;\n    } else {\n      this.lastBut.disabled = false;\n      this.nextBut.disabled = false;\n    }\n    for (let i = min; i <= max; i++) {\n      if (i > 0 && i <= this.max) {\n        this.pagesElement.appendChild(this._generatePageButton(i));\n      }\n    }\n    this.footerRedraw();\n  }\n  _generatePageButton(page) {\n    var button = document.createElement(\"button\");\n    button.classList.add(\"tabulator-page\");\n    if (page == this.page) {\n      button.classList.add(\"active\");\n    }\n    button.setAttribute(\"type\", \"button\");\n    button.setAttribute(\"role\", \"button\");\n    this.langBind(\"pagination|page_title\", value => {\n      button.setAttribute(\"aria-label\", value + \" \" + page);\n      button.setAttribute(\"title\", value + \" \" + page);\n    });\n    button.setAttribute(\"data-page\", page);\n    button.textContent = page;\n    button.addEventListener(\"click\", e => {\n      this.setPage(page);\n    });\n    return button;\n  }\n\n  //previous page\n  previousPage() {\n    if (this.page > 1) {\n      this.page--;\n      this.trackChanges();\n      return this.trigger();\n    } else {\n      console.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n      return Promise.reject();\n    }\n  }\n\n  //next page\n  nextPage() {\n    if (this.page < this.max) {\n      this.page++;\n      this.trackChanges();\n      return this.trigger();\n    } else {\n      if (!this.progressiveLoad) {\n        console.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n      }\n      return Promise.reject();\n    }\n  }\n\n  //return current page number\n  getPage() {\n    return this.page;\n  }\n\n  //return max page number\n  getPageMax() {\n    return this.max;\n  }\n  getPageSize(size) {\n    return this.size;\n  }\n  getMode() {\n    return this.mode;\n  }\n\n  //return appropriate rows for current page\n  getRows(data) {\n    var actualRowPageSize = 0,\n      output,\n      start,\n      end,\n      actualStartRow;\n    var actualRows = data.filter(row => {\n      return row.type === \"row\";\n    });\n    if (this.mode == \"local\") {\n      output = [];\n      this.setMaxRows(data.length);\n      if (this.size === true) {\n        start = 0;\n        end = data.length;\n      } else {\n        start = this.size * (this.page - 1);\n        end = start + parseInt(this.size);\n      }\n      this._setPageButtons();\n      for (let i = start; i < end; i++) {\n        let row = data[i];\n        if (row) {\n          output.push(row);\n          if (row.type === \"row\") {\n            if (!actualStartRow) {\n              actualStartRow = row;\n            }\n            actualRowPageSize++;\n          }\n        }\n      }\n      this._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? actualRows.indexOf(actualStartRow) + 1 : 0);\n      return output;\n    } else {\n      this._setPageButtons();\n      this._setPageCounter(actualRows.length);\n      return data.slice(0);\n    }\n  }\n  trigger() {\n    var left;\n    switch (this.mode) {\n      case \"local\":\n        left = this.table.rowManager.scrollLeft;\n        this.refreshData();\n        this.table.rowManager.scrollHorizontal(left);\n        this.dispatchExternal(\"pageLoaded\", this.getPage());\n        return Promise.resolve();\n      case \"remote\":\n        this.dataChanging = true;\n        return this.reloadData(null).finally(() => {\n          this.dataChanging = false;\n        });\n      case \"progressive_load\":\n      case \"progressive_scroll\":\n        return this.reloadData(null, true);\n      default:\n        console.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n        return Promise.reject();\n    }\n  }\n  _parseRemoteData(data) {\n    var margin;\n    if (typeof data.last_page === \"undefined\") {\n      console.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n    }\n    if (data.data) {\n      this.max = parseInt(data.last_page) || 1;\n      this.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : data.last_page * this.size - (this.page == data.last_page ? this.size - data.data.length : 0);\n      if (this.progressiveLoad) {\n        switch (this.mode) {\n          case \"progressive_load\":\n            if (this.page == 1) {\n              this.table.rowManager.setData(data.data, false, this.page == 1);\n            } else {\n              this.table.rowManager.addRows(data.data);\n            }\n            if (this.page < this.max) {\n              setTimeout(() => {\n                this.nextPage();\n              }, this.table.options.progressiveLoadDelay);\n            }\n            break;\n          case \"progressive_scroll\":\n            data = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n            this.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n            margin = this.table.options.progressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2;\n            if (this.table.rowManager.element.scrollHeight <= this.table.rowManager.element.clientHeight + margin) {\n              if (this.page < this.max) {\n                setTimeout(() => {\n                  this.nextPage();\n                });\n              }\n            }\n            break;\n        }\n        return false;\n      } else {\n        // left = this.table.rowManager.scrollLeft;\n        this.dispatchExternal(\"pageLoaded\", this.getPage());\n        // this.table.rowManager.scrollHorizontal(left);\n        // this.table.columnManager.scrollHorizontal(left);\n      }\n    } else {\n      console.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n    }\n    return data.data;\n  }\n\n  //handle the footer element being redrawn\n  footerRedraw() {\n    var footer = this.table.footerManager.containerElement;\n    if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n      this.pagesElement.style.display = 'none';\n    } else {\n      this.pagesElement.style.display = '';\n      if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n        this.pagesElement.style.display = 'none';\n      }\n    }\n  }\n}\nPage.moduleName = \"page\";\n\n//load defaults\nPage.pageCounters = defaultPageCounters;\n\n// read persistance information from storage\nvar defaultReaders = {\n  local: function (id, type) {\n    var data = localStorage.getItem(id + \"-\" + type);\n    return data ? JSON.parse(data) : false;\n  },\n  cookie: function (id, type) {\n    var cookie = document.cookie,\n      key = id + \"-\" + type,\n      cookiePos = cookie.indexOf(key + \"=\"),\n      end,\n      data;\n\n    //if cookie exists, decode and load column data into tabulator\n    if (cookiePos > -1) {\n      cookie = cookie.slice(cookiePos);\n      end = cookie.indexOf(\";\");\n      if (end > -1) {\n        cookie = cookie.slice(0, end);\n      }\n      data = cookie.replace(key + \"=\", \"\");\n    }\n    return data ? JSON.parse(data) : false;\n  }\n};\n\n//write persistence information to storage\nvar defaultWriters = {\n  local: function (id, type, data) {\n    localStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n  },\n  cookie: function (id, type, data) {\n    var expireDate = new Date();\n    expireDate.setDate(expireDate.getDate() + 10000);\n    document.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n  }\n};\nclass Persistence extends Module {\n  constructor(table) {\n    super(table);\n    this.mode = \"\";\n    this.id = \"\";\n    // this.persistProps = [\"field\", \"width\", \"visible\"];\n    this.defWatcherBlock = false;\n    this.config = {};\n    this.readFunc = false;\n    this.writeFunc = false;\n    this.registerTableOption(\"persistence\", false);\n    this.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n    this.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n    this.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n    this.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n  }\n\n  // Test for whether localStorage is available for use.\n  localStorageTest() {\n    var testKey = \"_tabulator_test\";\n    try {\n      window.localStorage.setItem(testKey, testKey);\n      window.localStorage.removeItem(testKey);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  //setup parameters\n  initialize() {\n    if (this.table.options.persistence) {\n      //determine persistent layout storage type\n      var mode = this.table.options.persistenceMode,\n        id = this.table.options.persistenceID,\n        retrievedData;\n      this.mode = mode !== true ? mode : this.localStorageTest() ? \"local\" : \"cookie\";\n      if (this.table.options.persistenceReaderFunc) {\n        if (typeof this.table.options.persistenceReaderFunc === \"function\") {\n          this.readFunc = this.table.options.persistenceReaderFunc;\n        } else {\n          if (Persistence.readers[this.table.options.persistenceReaderFunc]) {\n            this.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n          } else {\n            console.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n          }\n        }\n      } else {\n        if (Persistence.readers[this.mode]) {\n          this.readFunc = Persistence.readers[this.mode];\n        } else {\n          console.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n        }\n      }\n      if (this.table.options.persistenceWriterFunc) {\n        if (typeof this.table.options.persistenceWriterFunc === \"function\") {\n          this.writeFunc = this.table.options.persistenceWriterFunc;\n        } else {\n          if (Persistence.writers[this.table.options.persistenceWriterFunc]) {\n            this.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n          } else {\n            console.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n          }\n        }\n      } else {\n        if (Persistence.writers[this.mode]) {\n          this.writeFunc = Persistence.writers[this.mode];\n        } else {\n          console.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n        }\n      }\n\n      //set storage tag\n      this.id = \"tabulator-\" + (id || this.table.element.getAttribute(\"id\") || \"\");\n      this.config = {\n        sort: this.table.options.persistence === true || this.table.options.persistence.sort,\n        filter: this.table.options.persistence === true || this.table.options.persistence.filter,\n        group: this.table.options.persistence === true || this.table.options.persistence.group,\n        page: this.table.options.persistence === true || this.table.options.persistence.page,\n        columns: this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n      };\n\n      //load pagination data if needed\n      if (this.config.page) {\n        retrievedData = this.retrieveData(\"page\");\n        if (retrievedData) {\n          if (typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)) {\n            this.table.options.paginationSize = retrievedData.paginationSize;\n          }\n          if (typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)) {\n            this.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n          }\n        }\n      }\n\n      //load group data if needed\n      if (this.config.group) {\n        retrievedData = this.retrieveData(\"group\");\n        if (retrievedData) {\n          if (typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)) {\n            this.table.options.groupBy = retrievedData.groupBy;\n          }\n          if (typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)) {\n            this.table.options.groupStartOpen = retrievedData.groupStartOpen;\n          }\n          if (typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)) {\n            this.table.options.groupHeader = retrievedData.groupHeader;\n          }\n        }\n      }\n      if (this.config.columns) {\n        this.table.options.columns = this.load(\"columns\", this.table.options.columns);\n        this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n        this.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n        this.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n        this.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n      }\n      this.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n      this.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n      this.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n      this.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n      this.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n      this.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n      this.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n      this.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n      this.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n    }\n    this.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n    this.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n  }\n  eventSave(type) {\n    if (this.config[type]) {\n      this.save(type);\n    }\n  }\n  tableBuilt() {\n    var sorters, filters;\n    if (this.config.sort) {\n      sorters = this.load(\"sort\");\n      if (!sorters === false) {\n        this.table.options.initialSort = sorters;\n      }\n    }\n    if (this.config.filter) {\n      filters = this.load(\"filter\");\n      if (!filters === false) {\n        this.table.options.initialFilter = filters;\n      }\n    }\n  }\n  tableRedraw(force) {\n    if (force && this.config.columns) {\n      this.save(\"columns\");\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  getColumnLayout() {\n    return this.parseColumns(this.table.columnManager.getColumns());\n  }\n  setColumnLayout(layout) {\n    this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout));\n    return true;\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  initializeColumn(column) {\n    var def, keys;\n    if (this.config.columns) {\n      this.defWatcherBlock = true;\n      def = column.getDefinition();\n      keys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n      keys.forEach(key => {\n        var props = Object.getOwnPropertyDescriptor(def, key);\n        var value = def[key];\n        if (props) {\n          Object.defineProperty(def, key, {\n            set: newValue => {\n              value = newValue;\n              if (!this.defWatcherBlock) {\n                this.save(\"columns\");\n              }\n              if (props.set) {\n                props.set(newValue);\n              }\n            },\n            get: () => {\n              if (props.get) {\n                props.get();\n              }\n              return value;\n            }\n          });\n        }\n      });\n      this.defWatcherBlock = false;\n    }\n  }\n\n  //load saved definitions\n  load(type, current) {\n    var data = this.retrieveData(type);\n    if (current) {\n      data = data ? this.mergeDefinition(current, data) : current;\n    }\n    return data;\n  }\n\n  //retrieve data from memory\n  retrieveData(type) {\n    return this.readFunc ? this.readFunc(this.id, type) : false;\n  }\n\n  //merge old and new column definitions\n  mergeDefinition(oldCols, newCols) {\n    var output = [];\n    newCols = newCols || [];\n    newCols.forEach((column, to) => {\n      var from = this._findColumn(oldCols, column),\n        keys;\n      if (from) {\n        if (this.config.columns === true || this.config.columns == undefined) {\n          keys = Object.keys(from);\n          keys.push(\"width\");\n        } else {\n          keys = this.config.columns;\n        }\n        keys.forEach(key => {\n          if (key !== \"columns\" && typeof column[key] !== \"undefined\") {\n            from[key] = column[key];\n          }\n        });\n        if (from.columns) {\n          from.columns = this.mergeDefinition(from.columns, column.columns);\n        }\n        output.push(from);\n      }\n    });\n    oldCols.forEach((column, i) => {\n      var from = this._findColumn(newCols, column);\n      if (!from) {\n        if (output.length > i) {\n          output.splice(i, 0, column);\n        } else {\n          output.push(column);\n        }\n      }\n    });\n    return output;\n  }\n\n  //find matching columns\n  _findColumn(columns, subject) {\n    var type = subject.columns ? \"group\" : subject.field ? \"field\" : \"object\";\n    return columns.find(function (col) {\n      switch (type) {\n        case \"group\":\n          return col.title === subject.title && col.columns.length === subject.columns.length;\n        case \"field\":\n          return col.field === subject.field;\n        case \"object\":\n          return col === subject;\n      }\n    });\n  }\n\n  //save data\n  save(type) {\n    var data = {};\n    switch (type) {\n      case \"columns\":\n        data = this.parseColumns(this.table.columnManager.getColumns());\n        break;\n      case \"filter\":\n        data = this.table.modules.filter.getFilters();\n        break;\n      case \"sort\":\n        data = this.validateSorters(this.table.modules.sort.getSort());\n        break;\n      case \"group\":\n        data = this.getGroupConfig();\n        break;\n      case \"page\":\n        data = this.getPageConfig();\n        break;\n    }\n    if (this.writeFunc) {\n      this.writeFunc(this.id, type, data);\n    }\n  }\n\n  //ensure sorters contain no function data\n  validateSorters(data) {\n    data.forEach(function (item) {\n      item.column = item.field;\n      delete item.field;\n    });\n    return data;\n  }\n  getGroupConfig() {\n    var data = {};\n    if (this.config.group) {\n      if (this.config.group === true || this.config.group.groupBy) {\n        data.groupBy = this.table.options.groupBy;\n      }\n      if (this.config.group === true || this.config.group.groupStartOpen) {\n        data.groupStartOpen = this.table.options.groupStartOpen;\n      }\n      if (this.config.group === true || this.config.group.groupHeader) {\n        data.groupHeader = this.table.options.groupHeader;\n      }\n    }\n    return data;\n  }\n  getPageConfig() {\n    var data = {};\n    if (this.config.page) {\n      if (this.config.page === true || this.config.page.size) {\n        data.paginationSize = this.table.modules.page.getPageSize();\n      }\n      if (this.config.page === true || this.config.page.page) {\n        data.paginationInitialPage = this.table.modules.page.getPage();\n      }\n    }\n    return data;\n  }\n\n  //parse columns for data to store\n  parseColumns(columns) {\n    var definitions = [],\n      excludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n    columns.forEach(column => {\n      var defStore = {},\n        colDef = column.getDefinition(),\n        keys;\n      if (column.isGroup) {\n        defStore.title = colDef.title;\n        defStore.columns = this.parseColumns(column.getColumns());\n      } else {\n        defStore.field = column.getField();\n        if (this.config.columns === true || this.config.columns == undefined) {\n          keys = Object.keys(colDef);\n          keys.push(\"width\");\n          keys.push(\"visible\");\n        } else {\n          keys = this.config.columns;\n        }\n        keys.forEach(key => {\n          switch (key) {\n            case \"width\":\n              defStore.width = column.getWidth();\n              break;\n            case \"visible\":\n              defStore.visible = column.visible;\n              break;\n            default:\n              if (typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1) {\n                defStore[key] = colDef[key];\n              }\n          }\n        });\n      }\n      definitions.push(defStore);\n    });\n    return definitions;\n  }\n}\nPersistence.moduleName = \"persistence\";\nPersistence.moduleInitOrder = -10;\n\n//load defaults\nPersistence.readers = defaultReaders;\nPersistence.writers = defaultWriters;\nclass Popup$1 extends Module {\n  constructor(table) {\n    super(table);\n    this.columnSubscribers = {};\n    this.registerTableOption(\"rowContextPopup\", false);\n    this.registerTableOption(\"rowClickPopup\", false);\n    this.registerTableOption(\"rowDblClickPopup\", false);\n    this.registerTableOption(\"groupContextPopup\", false);\n    this.registerTableOption(\"groupClickPopup\", false);\n    this.registerTableOption(\"groupDblClickPopup\", false);\n    this.registerColumnOption(\"headerContextPopup\");\n    this.registerColumnOption(\"headerClickPopup\");\n    this.registerColumnOption(\"headerDblClickPopup\");\n    this.registerColumnOption(\"headerPopup\");\n    this.registerColumnOption(\"headerPopupIcon\");\n    this.registerColumnOption(\"contextPopup\");\n    this.registerColumnOption(\"clickPopup\");\n    this.registerColumnOption(\"dblClickPopup\");\n    this.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n    this.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n    this.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n    this.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n  }\n  initialize() {\n    this.initializeRowWatchers();\n    this.initializeGroupWatchers();\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n  }\n  _componentPopupCall(component, contents, position) {\n    this.loadPopupEvent(contents, null, component, position);\n  }\n  initializeRowWatchers() {\n    if (this.table.options.rowContextPopup) {\n      this.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n      this.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n    }\n    if (this.table.options.rowClickPopup) {\n      this.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n    }\n    if (this.table.options.rowDblClickPopup) {\n      this.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n    }\n  }\n  initializeGroupWatchers() {\n    if (this.table.options.groupContextPopup) {\n      this.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n      this.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n    }\n    if (this.table.options.groupClickPopup) {\n      this.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n    }\n    if (this.table.options.groupDblClickPopup) {\n      this.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n    }\n  }\n  initializeColumn(column) {\n    var def = column.definition;\n\n    //handle column events\n    if (def.headerContextPopup && !this.columnSubscribers.headerContextPopup) {\n      this.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n      this.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n      this.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n    }\n    if (def.headerClickPopup && !this.columnSubscribers.headerClickPopup) {\n      this.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n      this.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n    }\n    if (def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup) {\n      this.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n      this.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n    }\n    if (def.headerPopup) {\n      this.initializeColumnHeaderPopup(column);\n    }\n\n    //handle cell events\n    if (def.contextPopup && !this.columnSubscribers.contextPopup) {\n      this.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n      this.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n      this.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n    }\n    if (def.clickPopup && !this.columnSubscribers.clickPopup) {\n      this.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n      this.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n    }\n    if (def.dblClickPopup && !this.columnSubscribers.dblClickPopup) {\n      this.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n      this.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n    }\n  }\n  initializeColumnHeaderPopup(column) {\n    var icon = column.definition.headerPopupIcon,\n      headerPopupEl;\n    headerPopupEl = document.createElement(\"span\");\n    headerPopupEl.classList.add(\"tabulator-header-popup-button\");\n    if (icon) {\n      if (typeof icon === \"function\") {\n        icon = icon(column.getComponent());\n      }\n      if (icon instanceof HTMLElement) {\n        headerPopupEl.appendChild(icon);\n      } else {\n        headerPopupEl.innerHTML = icon;\n      }\n    } else {\n      headerPopupEl.innerHTML = \"&vellip;\";\n    }\n    headerPopupEl.addEventListener(\"click\", e => {\n      e.stopPropagation();\n      e.preventDefault();\n      this.loadPopupEvent(column.definition.headerPopup, e, column);\n    });\n    column.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n  }\n  loadPopupTableCellEvent(option, e, cell) {\n    if (cell._cell) {\n      cell = cell._cell;\n    }\n    if (cell.column.definition[option]) {\n      this.loadPopupEvent(cell.column.definition[option], e, cell);\n    }\n  }\n  loadPopupTableColumnEvent(option, e, column) {\n    if (column._column) {\n      column = column._column;\n    }\n    if (column.definition[option]) {\n      this.loadPopupEvent(column.definition[option], e, column);\n    }\n  }\n  loadPopupEvent(contents, e, component, position) {\n    var renderedCallback;\n    function onRendered(callback) {\n      renderedCallback = callback;\n    }\n    if (component._group) {\n      component = component._group;\n    } else if (component._row) {\n      component = component._row;\n    }\n    contents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(), onRendered) : contents;\n    this.loadPopup(e, component, contents, renderedCallback, position);\n  }\n  loadPopup(e, component, contents, renderedCallback, position) {\n    var touch = !(e instanceof MouseEvent),\n      contentsEl,\n      popup;\n    if (contents instanceof HTMLElement) {\n      contentsEl = contents;\n    } else {\n      contentsEl = document.createElement(\"div\");\n      contentsEl.innerHTML = contents;\n    }\n    contentsEl.classList.add(\"tabulator-popup\");\n    contentsEl.addEventListener(\"click\", e => {\n      e.stopPropagation();\n    });\n    if (!touch) {\n      e.preventDefault();\n    }\n    popup = this.popup(contentsEl);\n    if (typeof renderedCallback === \"function\") {\n      popup.renderCallback(renderedCallback);\n    }\n    if (e) {\n      popup.show(e);\n    } else {\n      popup.show(component.getElement(), position || \"center\");\n    }\n    popup.hideOnBlur(() => {\n      this.dispatchExternal(\"popupClosed\", component.getComponent());\n    });\n    this.dispatchExternal(\"popupOpened\", component.getComponent());\n  }\n}\nPopup$1.moduleName = \"popup\";\nclass Print extends Module {\n  constructor(table) {\n    super(table);\n    this.element = false;\n    this.manualBlock = false;\n    this.beforeprintEventHandler = null;\n    this.afterprintEventHandler = null;\n    this.registerTableOption(\"printAsHtml\", false); //enable print as html\n    this.registerTableOption(\"printFormatter\", false); //printing page formatter\n    this.registerTableOption(\"printHeader\", false); //page header contents\n    this.registerTableOption(\"printFooter\", false); //page footer contents\n    this.registerTableOption(\"printStyled\", true); //enable print as html styling\n    this.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n    this.registerTableOption(\"printConfig\", {}); //print config options\n\n    this.registerColumnOption(\"print\");\n    this.registerColumnOption(\"titlePrint\");\n  }\n  initialize() {\n    if (this.table.options.printAsHtml) {\n      this.beforeprintEventHandler = this.replaceTable.bind(this);\n      this.afterprintEventHandler = this.cleanup.bind(this);\n      window.addEventListener(\"beforeprint\", this.beforeprintEventHandler);\n      window.addEventListener(\"afterprint\", this.afterprintEventHandler);\n      this.subscribe(\"table-destroy\", this.destroy.bind(this));\n    }\n    this.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n  }\n  destroy() {\n    if (this.table.options.printAsHtml) {\n      window.removeEventListener(\"beforeprint\", this.beforeprintEventHandler);\n      window.removeEventListener(\"afterprint\", this.afterprintEventHandler);\n    }\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  replaceTable() {\n    if (!this.manualBlock) {\n      this.element = document.createElement(\"div\");\n      this.element.classList.add(\"tabulator-print-table\");\n      this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n      this.table.element.style.display = \"none\";\n      this.table.element.parentNode.insertBefore(this.element, this.table.element);\n    }\n  }\n  cleanup() {\n    document.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n      this.table.element.style.display = \"\";\n    }\n  }\n  printFullscreen(visible, style, config) {\n    var scrollX = window.scrollX,\n      scrollY = window.scrollY,\n      headerEl = document.createElement(\"div\"),\n      footerEl = document.createElement(\"div\"),\n      tableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n      headerContent,\n      footerContent;\n    this.manualBlock = true;\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-print-fullscreen\");\n    if (this.table.options.printHeader) {\n      headerEl.classList.add(\"tabulator-print-header\");\n      headerContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n      if (typeof headerContent == \"string\") {\n        headerEl.innerHTML = headerContent;\n      } else {\n        headerEl.appendChild(headerContent);\n      }\n      this.element.appendChild(headerEl);\n    }\n    this.element.appendChild(tableEl);\n    if (this.table.options.printFooter) {\n      footerEl.classList.add(\"tabulator-print-footer\");\n      footerContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n      if (typeof footerContent == \"string\") {\n        footerEl.innerHTML = footerContent;\n      } else {\n        footerEl.appendChild(footerContent);\n      }\n      this.element.appendChild(footerEl);\n    }\n    document.body.classList.add(\"tabulator-print-fullscreen-hide\");\n    document.body.appendChild(this.element);\n    if (this.table.options.printFormatter) {\n      this.table.options.printFormatter(this.element, tableEl);\n    }\n    window.print();\n    this.cleanup();\n    window.scrollTo(scrollX, scrollY);\n    this.manualBlock = false;\n  }\n}\nPrint.moduleName = \"print\";\nclass ReactiveData extends Module {\n  constructor(table) {\n    super(table);\n    this.data = false;\n    this.blocked = false; //block reactivity while performing update\n    this.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n    this.currentVersion = 0;\n    this.registerTableOption(\"reactiveData\", false); //enable data reactivity\n  }\n\n  initialize() {\n    if (this.table.options.reactiveData) {\n      this.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n      this.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n      this.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n      this.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n      this.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n      this.subscribe(\"data-processing\", this.watchData.bind(this));\n      this.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n    }\n  }\n  watchData(data) {\n    var self = this,\n      version;\n    this.currentVersion++;\n    version = this.currentVersion;\n    this.unwatchData();\n    this.data = data;\n\n    //override array push function\n    this.origFuncs.push = data.push;\n    Object.defineProperty(this.data, \"push\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var args = Array.from(arguments),\n          result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-push\");\n          args.forEach(arg => {\n            self.table.rowManager.addRowActual(arg, false);\n          });\n          result = self.origFuncs.push.apply(data, arguments);\n          self.unblock(\"data-push\");\n        }\n        return result;\n      }\n    });\n\n    //override array unshift function\n    this.origFuncs.unshift = data.unshift;\n    Object.defineProperty(this.data, \"unshift\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var args = Array.from(arguments),\n          result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-unshift\");\n          args.forEach(arg => {\n            self.table.rowManager.addRowActual(arg, true);\n          });\n          result = self.origFuncs.unshift.apply(data, arguments);\n          self.unblock(\"data-unshift\");\n        }\n        return result;\n      }\n    });\n\n    //override array shift function\n    this.origFuncs.shift = data.shift;\n    Object.defineProperty(this.data, \"shift\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var row, result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-shift\");\n          if (self.data.length) {\n            row = self.table.rowManager.getRowFromDataObject(self.data[0]);\n            if (row) {\n              row.deleteActual();\n            }\n          }\n          result = self.origFuncs.shift.call(data);\n          self.unblock(\"data-shift\");\n        }\n        return result;\n      }\n    });\n\n    //override array pop function\n    this.origFuncs.pop = data.pop;\n    Object.defineProperty(this.data, \"pop\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var row, result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-pop\");\n          if (self.data.length) {\n            row = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n            if (row) {\n              row.deleteActual();\n            }\n          }\n          result = self.origFuncs.pop.call(data);\n          self.unblock(\"data-pop\");\n        }\n        return result;\n      }\n    });\n\n    //override array splice function\n    this.origFuncs.splice = data.splice;\n    Object.defineProperty(this.data, \"splice\", {\n      enumerable: false,\n      configurable: true,\n      value: function () {\n        var args = Array.from(arguments),\n          start = args[0] < 0 ? data.length + args[0] : args[0],\n          end = args[1],\n          newRows = args[2] ? args.slice(2) : false,\n          startRow,\n          result;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"data-splice\");\n          //add new rows\n          if (newRows) {\n            startRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n            if (startRow) {\n              newRows.forEach(rowData => {\n                self.table.rowManager.addRowActual(rowData, true, startRow, true);\n              });\n            } else {\n              newRows = newRows.slice().reverse();\n              newRows.forEach(rowData => {\n                self.table.rowManager.addRowActual(rowData, true, false, true);\n              });\n            }\n          }\n\n          //delete removed rows\n          if (end !== 0) {\n            var oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n            oldRows.forEach((rowData, i) => {\n              var row = self.table.rowManager.getRowFromDataObject(rowData);\n              if (row) {\n                row.deleteActual(i !== oldRows.length - 1);\n              }\n            });\n          }\n          if (newRows || end !== 0) {\n            self.table.rowManager.reRenderInPosition();\n          }\n          result = self.origFuncs.splice.apply(data, arguments);\n          self.unblock(\"data-splice\");\n        }\n        return result;\n      }\n    });\n  }\n  unwatchData() {\n    if (this.data !== false) {\n      for (var key in this.origFuncs) {\n        Object.defineProperty(this.data, key, {\n          enumerable: true,\n          configurable: true,\n          writable: true,\n          value: this.origFuncs.key\n        });\n      }\n    }\n  }\n  watchRow(row) {\n    var data = row.getData();\n    for (var key in data) {\n      this.watchKey(row, data, key);\n    }\n    if (this.table.options.dataTree) {\n      this.watchTreeChildren(row);\n    }\n  }\n  watchTreeChildren(row) {\n    var self = this,\n      childField = row.getData()[this.table.options.dataTreeChildField],\n      origFuncs = {};\n    if (childField) {\n      origFuncs.push = childField.push;\n      Object.defineProperty(childField, \"push\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-push\");\n            var result = origFuncs.push.apply(childField, arguments);\n            this.rebuildTree(row);\n            self.unblock(\"tree-push\");\n          }\n          return result;\n        }\n      });\n      origFuncs.unshift = childField.unshift;\n      Object.defineProperty(childField, \"unshift\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-unshift\");\n            var result = origFuncs.unshift.apply(childField, arguments);\n            this.rebuildTree(row);\n            self.unblock(\"tree-unshift\");\n          }\n          return result;\n        }\n      });\n      origFuncs.shift = childField.shift;\n      Object.defineProperty(childField, \"shift\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-shift\");\n            var result = origFuncs.shift.call(childField);\n            this.rebuildTree(row);\n            self.unblock(\"tree-shift\");\n          }\n          return result;\n        }\n      });\n      origFuncs.pop = childField.pop;\n      Object.defineProperty(childField, \"pop\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-pop\");\n            var result = origFuncs.pop.call(childField);\n            this.rebuildTree(row);\n            self.unblock(\"tree-pop\");\n          }\n          return result;\n        }\n      });\n      origFuncs.splice = childField.splice;\n      Object.defineProperty(childField, \"splice\", {\n        enumerable: false,\n        configurable: true,\n        value: () => {\n          if (!self.blocked) {\n            self.block(\"tree-splice\");\n            var result = origFuncs.splice.apply(childField, arguments);\n            this.rebuildTree(row);\n            self.unblock(\"tree-splice\");\n          }\n          return result;\n        }\n      });\n    }\n  }\n  rebuildTree(row) {\n    this.table.modules.dataTree.initializeRow(row);\n    this.table.modules.dataTree.layoutRow(row);\n    this.table.rowManager.refreshActiveData(\"tree\", false, true);\n  }\n  watchKey(row, data, key) {\n    var self = this,\n      props = Object.getOwnPropertyDescriptor(data, key),\n      value = data[key],\n      version = this.currentVersion;\n    Object.defineProperty(data, key, {\n      set: newValue => {\n        value = newValue;\n        if (!self.blocked && version === self.currentVersion) {\n          self.block(\"key\");\n          var update = {};\n          update[key] = newValue;\n          row.updateData(update);\n          self.unblock(\"key\");\n        }\n        if (props.set) {\n          props.set(newValue);\n        }\n      },\n      get: () => {\n        if (props.get) {\n          props.get();\n        }\n        return value;\n      }\n    });\n  }\n  unwatchRow(row) {\n    var data = row.getData();\n    for (var key in data) {\n      Object.defineProperty(data, key, {\n        value: data[key]\n      });\n    }\n  }\n  block(key) {\n    if (!this.blocked) {\n      this.blocked = key;\n    }\n  }\n  unblock(key) {\n    if (this.blocked === key) {\n      this.blocked = false;\n    }\n  }\n}\nReactiveData.moduleName = \"reactiveData\";\nclass ResizeColumns extends Module {\n  constructor(table) {\n    super(table);\n    this.startColumn = false;\n    this.startX = false;\n    this.startWidth = false;\n    this.latestX = false;\n    this.handle = null;\n    this.initialNextColumn = null;\n    this.nextColumn = null;\n    this.initialized = false;\n    this.registerColumnOption(\"resizable\", true);\n    this.registerTableOption(\"resizableColumnFit\", false);\n  }\n  initialize() {\n    this.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n  }\n  initializeEventWatchers() {\n    if (!this.initialized) {\n      this.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n      this.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n      this.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n      this.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n      this.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n      this.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n      this.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n      this.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n      this.subscribe(\"column-height\", this.resizeHandle.bind(this));\n      this.initialized = true;\n    }\n  }\n  layoutCellHandles(cell) {\n    if (cell.row.type === \"row\") {\n      this.deInitializeComponent(cell);\n      this.initializeColumn(\"cell\", cell, cell.column, cell.element);\n    }\n  }\n  layoutColumnHeader(column) {\n    if (column.definition.resizable) {\n      this.initializeEventWatchers();\n      this.deInitializeComponent(column);\n      this.initializeColumn(\"header\", column, column, column.element);\n    }\n  }\n  columnLayoutUpdated(column) {\n    var prev = column.prevColumn();\n    this.reinitializeColumn(column);\n    if (prev) {\n      this.reinitializeColumn(prev);\n    }\n  }\n  columnWidthUpdated(column) {\n    if (column.modules.frozen) {\n      if (this.table.modules.frozenColumns.leftColumns.includes(column)) {\n        this.table.modules.frozenColumns.leftColumns.forEach(col => {\n          this.reinitializeColumn(col);\n        });\n      } else if (this.table.modules.frozenColumns.rightColumns.includes(column)) {\n        this.table.modules.frozenColumns.rightColumns.forEach(col => {\n          this.reinitializeColumn(col);\n        });\n      }\n    }\n  }\n  frozenColumnOffset(column) {\n    var offset = false;\n    if (column.modules.frozen) {\n      offset = column.modules.frozen.marginValue;\n      if (column.modules.frozen.position === \"left\") {\n        offset += column.getWidth() - 3;\n      } else {\n        if (offset) {\n          offset -= 3;\n        }\n      }\n    }\n    return offset !== false ? offset + \"px\" : false;\n  }\n  reinitializeColumn(column) {\n    var frozenOffset = this.frozenColumnOffset(column);\n    column.cells.forEach(cell => {\n      if (cell.modules.resize && cell.modules.resize.handleEl) {\n        if (frozenOffset) {\n          cell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n        }\n        cell.element.after(cell.modules.resize.handleEl);\n      }\n    });\n    if (column.modules.resize && column.modules.resize.handleEl) {\n      if (frozenOffset) {\n        column.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n      }\n      column.element.after(column.modules.resize.handleEl);\n    }\n  }\n  initializeColumn(type, component, column, element) {\n    var self = this,\n      variableHeight = false,\n      mode = column.definition.resizable,\n      config = {},\n      nearestColumn = column.getLastColumn();\n\n    //set column resize mode\n    if (type === \"header\") {\n      variableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n      config = {\n        variableHeight: variableHeight\n      };\n    }\n    if ((mode === true || mode == type) && this._checkResizability(nearestColumn)) {\n      var handle = document.createElement('span');\n      handle.className = \"tabulator-col-resize-handle\";\n      handle.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n      });\n      var handleDown = function (e) {\n        self.startColumn = column;\n        self.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n        self._mouseDown(e, nearestColumn, handle);\n      };\n      handle.addEventListener(\"mousedown\", handleDown);\n      handle.addEventListener(\"touchstart\", handleDown, {\n        passive: true\n      });\n\n      //resize column on  double click\n      handle.addEventListener(\"dblclick\", e => {\n        var oldWidth = nearestColumn.getWidth();\n        e.stopPropagation();\n        nearestColumn.reinitializeWidth(true);\n        if (oldWidth !== nearestColumn.getWidth()) {\n          self.dispatch(\"column-resized\", nearestColumn);\n          self.table.externalEvents.dispatch(\"columnResized\", nearestColumn.getComponent());\n        }\n      });\n      if (column.modules.frozen) {\n        handle.style.position = \"sticky\";\n        handle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n      }\n      config.handleEl = handle;\n      if (element.parentNode && column.visible) {\n        element.after(handle);\n      }\n    }\n    component.modules.resize = config;\n  }\n  deInitializeColumn(column) {\n    this.deInitializeComponent(column);\n    column.cells.forEach(cell => {\n      this.deInitializeComponent(cell);\n    });\n  }\n  deInitializeComponent(component) {\n    var handleEl;\n    if (component.modules.resize) {\n      handleEl = component.modules.resize.handleEl;\n      if (handleEl && handleEl.parentElement) {\n        handleEl.parentElement.removeChild(handleEl);\n      }\n    }\n  }\n  resizeHandle(component, height) {\n    if (component.modules.resize && component.modules.resize.handleEl) {\n      component.modules.resize.handleEl.style.height = height;\n    }\n  }\n  _checkResizability(column) {\n    return column.definition.resizable;\n  }\n  _mouseDown(e, column, handle) {\n    var self = this;\n    self.table.element.classList.add(\"tabulator-block-select\");\n    function mouseMove(e) {\n      var x = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX,\n        startDiff = x - self.startX,\n        moveDiff = x - self.latestX,\n        blockedBefore,\n        blockedAfter;\n      self.latestX = x;\n      if (self.table.rtl) {\n        startDiff = -startDiff;\n        moveDiff = -moveDiff;\n      }\n      blockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n      column.setWidth(self.startWidth + startDiff);\n      blockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n      if (moveDiff < 0) {\n        self.nextColumn = self.initialNextColumn;\n      }\n      if (self.table.options.resizableColumnFit && self.nextColumn && !(blockedBefore && blockedAfter)) {\n        let colWidth = self.nextColumn.getWidth();\n        if (moveDiff > 0) {\n          if (colWidth <= self.nextColumn.minWidth) {\n            self.nextColumn = self.nextColumn.nextColumn();\n          }\n        }\n        if (self.nextColumn) {\n          self.nextColumn.setWidth(self.nextColumn.getWidth() - moveDiff);\n        }\n      }\n      self.table.columnManager.rerenderColumns(true);\n      if (!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n        column.checkCellHeights();\n      }\n    }\n    function mouseUp(e) {\n      //block editor from taking action while resizing is taking place\n      if (self.startColumn.modules.edit) {\n        self.startColumn.modules.edit.blocked = false;\n      }\n      if (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n        column.checkCellHeights();\n      }\n      document.body.removeEventListener(\"mouseup\", mouseUp);\n      document.body.removeEventListener(\"mousemove\", mouseMove);\n      handle.removeEventListener(\"touchmove\", mouseMove);\n      handle.removeEventListener(\"touchend\", mouseUp);\n      self.table.element.classList.remove(\"tabulator-block-select\");\n      if (self.startWidth !== column.getWidth()) {\n        self.table.columnManager.verticalAlignHeaders();\n        self.dispatch(\"column-resized\", column);\n        self.table.externalEvents.dispatch(\"columnResized\", column.getComponent());\n      }\n    }\n    e.stopPropagation(); //prevent resize from interfering with movable columns\n\n    //block editor from taking action while resizing is taking place\n    if (self.startColumn.modules.edit) {\n      self.startColumn.modules.edit.blocked = true;\n    }\n    self.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n    self.latestX = self.startX;\n    self.startWidth = column.getWidth();\n    document.body.addEventListener(\"mousemove\", mouseMove);\n    document.body.addEventListener(\"mouseup\", mouseUp);\n    handle.addEventListener(\"touchmove\", mouseMove, {\n      passive: true\n    });\n    handle.addEventListener(\"touchend\", mouseUp);\n  }\n}\nResizeColumns.moduleName = \"resizeColumns\";\nclass ResizeRows extends Module {\n  constructor(table) {\n    super(table);\n    this.startColumn = false;\n    this.startY = false;\n    this.startHeight = false;\n    this.handle = null;\n    this.prevHandle = null;\n    this.registerTableOption(\"resizableRows\", false); //resizable rows\n  }\n\n  initialize() {\n    if (this.table.options.resizableRows) {\n      this.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n    }\n  }\n  initializeRow(row) {\n    var self = this,\n      rowEl = row.getElement();\n    var handle = document.createElement('div');\n    handle.className = \"tabulator-row-resize-handle\";\n    var prevHandle = document.createElement('div');\n    prevHandle.className = \"tabulator-row-resize-handle prev\";\n    handle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n    var handleDown = function (e) {\n      self.startRow = row;\n      self._mouseDown(e, row, handle);\n    };\n    handle.addEventListener(\"mousedown\", handleDown);\n    handle.addEventListener(\"touchstart\", handleDown, {\n      passive: true\n    });\n    prevHandle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n    var prevHandleDown = function (e) {\n      var prevRow = self.table.rowManager.prevDisplayRow(row);\n      if (prevRow) {\n        self.startRow = prevRow;\n        self._mouseDown(e, prevRow, prevHandle);\n      }\n    };\n    prevHandle.addEventListener(\"mousedown\", prevHandleDown);\n    prevHandle.addEventListener(\"touchstart\", prevHandleDown, {\n      passive: true\n    });\n    rowEl.appendChild(handle);\n    rowEl.appendChild(prevHandle);\n  }\n  _mouseDown(e, row, handle) {\n    var self = this;\n    self.table.element.classList.add(\"tabulator-block-select\");\n    function mouseMove(e) {\n      row.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n    }\n    function mouseUp(e) {\n      // //block editor from taking action while resizing is taking place\n      // if(self.startColumn.modules.edit){\n      // \tself.startColumn.modules.edit.blocked = false;\n      // }\n\n      document.body.removeEventListener(\"mouseup\", mouseMove);\n      document.body.removeEventListener(\"mousemove\", mouseMove);\n      handle.removeEventListener(\"touchmove\", mouseMove);\n      handle.removeEventListener(\"touchend\", mouseUp);\n      self.table.element.classList.remove(\"tabulator-block-select\");\n      self.dispatchExternal(\"rowResized\", row.getComponent());\n    }\n    e.stopPropagation(); //prevent resize from interfering with movable columns\n\n    //block editor from taking action while resizing is taking place\n    // if(self.startColumn.modules.edit){\n    // \tself.startColumn.modules.edit.blocked = true;\n    // }\n\n    self.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n    self.startHeight = row.getHeight();\n    document.body.addEventListener(\"mousemove\", mouseMove);\n    document.body.addEventListener(\"mouseup\", mouseUp);\n    handle.addEventListener(\"touchmove\", mouseMove, {\n      passive: true\n    });\n    handle.addEventListener(\"touchend\", mouseUp);\n  }\n}\nResizeRows.moduleName = \"resizeRows\";\nclass ResizeTable extends Module {\n  constructor(table) {\n    super(table);\n    this.binding = false;\n    this.visibilityObserver = false;\n    this.resizeObserver = false;\n    this.containerObserver = false;\n    this.tableHeight = 0;\n    this.tableWidth = 0;\n    this.containerHeight = 0;\n    this.containerWidth = 0;\n    this.autoResize = false;\n    this.visible = false;\n    this.initialized = false;\n    this.initialRedraw = false;\n    this.registerTableOption(\"autoResize\", true); //auto resize table\n  }\n\n  initialize() {\n    if (this.table.options.autoResize) {\n      var table = this.table,\n        tableStyle;\n      this.tableHeight = table.element.clientHeight;\n      this.tableWidth = table.element.clientWidth;\n      if (table.element.parentNode) {\n        this.containerHeight = table.element.parentNode.clientHeight;\n        this.containerWidth = table.element.parentNode.clientWidth;\n      }\n      if (typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\") {\n        this.initializeVisibilityObserver();\n        this.autoResize = true;\n        this.resizeObserver = new ResizeObserver(entry => {\n          if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n            var nodeHeight = Math.floor(entry[0].contentRect.height);\n            var nodeWidth = Math.floor(entry[0].contentRect.width);\n            if (this.tableHeight != nodeHeight || this.tableWidth != nodeWidth) {\n              this.tableHeight = nodeHeight;\n              this.tableWidth = nodeWidth;\n              if (table.element.parentNode) {\n                this.containerHeight = table.element.parentNode.clientHeight;\n                this.containerWidth = table.element.parentNode.clientWidth;\n              }\n              this.redrawTable();\n            }\n          }\n        });\n        this.resizeObserver.observe(table.element);\n        tableStyle = window.getComputedStyle(table.element);\n        if (this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))) {\n          this.containerObserver = new ResizeObserver(entry => {\n            if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n              var nodeHeight = Math.floor(entry[0].contentRect.height);\n              var nodeWidth = Math.floor(entry[0].contentRect.width);\n              if (this.containerHeight != nodeHeight || this.containerWidth != nodeWidth) {\n                this.containerHeight = nodeHeight;\n                this.containerWidth = nodeWidth;\n                this.tableHeight = table.element.clientHeight;\n                this.tableWidth = table.element.clientWidth;\n              }\n              this.redrawTable();\n            }\n          });\n          this.containerObserver.observe(this.table.element.parentNode);\n        }\n        this.subscribe(\"table-resize\", this.tableResized.bind(this));\n      } else {\n        this.binding = function () {\n          if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n            table.columnManager.rerenderColumns(true);\n            table.redraw();\n          }\n        };\n        window.addEventListener(\"resize\", this.binding);\n      }\n      this.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n    }\n  }\n  initializeVisibilityObserver() {\n    this.visibilityObserver = new IntersectionObserver(entries => {\n      this.visible = entries[0].isIntersecting;\n      if (!this.initialized) {\n        this.initialized = true;\n        this.initialRedraw = !this.visible;\n      } else {\n        if (this.visible) {\n          this.redrawTable(this.initialRedraw);\n          this.initialRedraw = false;\n        }\n      }\n    });\n    this.visibilityObserver.observe(this.table.element);\n  }\n  redrawTable(force) {\n    if (this.initialized && this.visible) {\n      this.table.columnManager.rerenderColumns(true);\n      this.table.redraw(force);\n    }\n  }\n  tableResized() {\n    this.table.rowManager.redraw();\n  }\n  clearBindings() {\n    if (this.binding) {\n      window.removeEventListener(\"resize\", this.binding);\n    }\n    if (this.resizeObserver) {\n      this.resizeObserver.unobserve(this.table.element);\n    }\n    if (this.visibilityObserver) {\n      this.visibilityObserver.unobserve(this.table.element);\n    }\n    if (this.containerObserver) {\n      this.containerObserver.unobserve(this.table.element.parentNode);\n    }\n  }\n}\nResizeTable.moduleName = \"resizeTable\";\nclass ResponsiveLayout extends Module {\n  constructor(table) {\n    super(table);\n    this.columns = [];\n    this.hiddenColumns = [];\n    this.mode = \"\";\n    this.index = 0;\n    this.collapseFormatter = [];\n    this.collapseStartOpen = true;\n    this.collapseHandleColumn = false;\n    this.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n    this.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n    this.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n    this.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n    this.registerColumnOption(\"responsive\");\n  }\n\n  //generate responsive columns list\n  initialize() {\n    if (this.table.options.responsiveLayout) {\n      this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n      this.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n      this.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n      this.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n      this.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n      this.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n      this.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n      this.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n      if (this.table.options.responsiveLayout === \"collapse\") {\n        this.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n        this.subscribe(\"row-init\", this.initializeRow.bind(this));\n        this.subscribe(\"row-layout\", this.layoutRow.bind(this));\n      }\n    }\n  }\n  tableRedraw(force) {\n    if ([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1) {\n      if (!force) {\n        this.update();\n      }\n    }\n  }\n  initializeResponsivity() {\n    var columns = [];\n    this.mode = this.table.options.responsiveLayout;\n    this.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n    this.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n    this.hiddenColumns = [];\n\n    //determine level of responsivity for each column\n    this.table.columnManager.columnsByIndex.forEach((column, i) => {\n      if (column.modules.responsive) {\n        if (column.modules.responsive.order && column.modules.responsive.visible) {\n          column.modules.responsive.index = i;\n          columns.push(column);\n          if (!column.visible && this.mode === \"collapse\") {\n            this.hiddenColumns.push(column);\n          }\n        }\n      }\n    });\n\n    //sort list by responsivity\n    columns = columns.reverse();\n    columns = columns.sort((a, b) => {\n      var diff = b.modules.responsive.order - a.modules.responsive.order;\n      return diff || b.modules.responsive.index - a.modules.responsive.index;\n    });\n    this.columns = columns;\n    if (this.mode === \"collapse\") {\n      this.generateCollapsedContent();\n    }\n\n    //assign collapse column\n    for (let col of this.table.columnManager.columnsByIndex) {\n      if (col.definition.formatter == \"responsiveCollapse\") {\n        this.collapseHandleColumn = col;\n        break;\n      }\n    }\n    if (this.collapseHandleColumn) {\n      if (this.hiddenColumns.length) {\n        this.collapseHandleColumn.show();\n      } else {\n        this.collapseHandleColumn.hide();\n      }\n    }\n  }\n\n  //define layout information\n  initializeColumn(column) {\n    var def = column.getDefinition();\n    column.modules.responsive = {\n      order: typeof def.responsive === \"undefined\" ? 1 : def.responsive,\n      visible: def.visible === false ? false : true\n    };\n  }\n  initializeRow(row) {\n    var el;\n    if (row.type !== \"calc\") {\n      el = document.createElement(\"div\");\n      el.classList.add(\"tabulator-responsive-collapse\");\n      row.modules.responsiveLayout = {\n        element: el,\n        open: this.collapseStartOpen\n      };\n      if (!this.collapseStartOpen) {\n        el.style.display = 'none';\n      }\n    }\n  }\n  layoutRow(row) {\n    var rowEl = row.getElement();\n    if (row.modules.responsiveLayout) {\n      rowEl.appendChild(row.modules.responsiveLayout.element);\n      this.generateCollapsedRowContent(row);\n    }\n  }\n\n  //update column visibility\n  updateColumnVisibility(column, responsiveToggle) {\n    if (!responsiveToggle && column.modules.responsive) {\n      column.modules.responsive.visible = column.visible;\n      this.initializeResponsivity();\n    }\n  }\n  hideColumn(column) {\n    var colCount = this.hiddenColumns.length;\n    column.hide(false, true);\n    if (this.mode === \"collapse\") {\n      this.hiddenColumns.unshift(column);\n      this.generateCollapsedContent();\n      if (this.collapseHandleColumn && !colCount) {\n        this.collapseHandleColumn.show();\n      }\n    }\n  }\n  showColumn(column) {\n    var index;\n    column.show(false, true);\n    //set column width to prevent calculation loops on uninitialized columns\n    column.setWidth(column.getWidth());\n    if (this.mode === \"collapse\") {\n      index = this.hiddenColumns.indexOf(column);\n      if (index > -1) {\n        this.hiddenColumns.splice(index, 1);\n      }\n      this.generateCollapsedContent();\n      if (this.collapseHandleColumn && !this.hiddenColumns.length) {\n        this.collapseHandleColumn.hide();\n      }\n    }\n  }\n\n  //redraw columns to fit space\n  update() {\n    var working = true;\n    while (working) {\n      let width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n      let diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n      if (diff < 0) {\n        //table is too wide\n        let column = this.columns[this.index];\n        if (column) {\n          this.hideColumn(column);\n          this.index++;\n        } else {\n          working = false;\n        }\n      } else {\n        //table has spare space\n        let column = this.columns[this.index - 1];\n        if (column) {\n          if (diff > 0) {\n            if (diff >= column.getWidth()) {\n              this.showColumn(column);\n              this.index--;\n            } else {\n              working = false;\n            }\n          } else {\n            working = false;\n          }\n        } else {\n          working = false;\n        }\n      }\n      if (!this.table.rowManager.activeRowsCount) {\n        this.table.rowManager.renderEmptyScroll();\n      }\n    }\n  }\n  generateCollapsedContent() {\n    var rows = this.table.rowManager.getDisplayRows();\n    rows.forEach(row => {\n      this.generateCollapsedRowContent(row);\n    });\n  }\n  generateCollapsedRowContent(row) {\n    var el, contents;\n    if (row.modules.responsiveLayout) {\n      el = row.modules.responsiveLayout.element;\n      while (el.firstChild) el.removeChild(el.firstChild);\n      contents = this.collapseFormatter(this.generateCollapsedRowData(row));\n      if (contents) {\n        el.appendChild(contents);\n      }\n    }\n  }\n  generateCollapsedRowData(row) {\n    var data = row.getData(),\n      output = [],\n      mockCellComponent;\n    this.hiddenColumns.forEach(column => {\n      var value = column.getFieldValue(data);\n      if (column.definition.title && column.field) {\n        if (column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters) {\n          mockCellComponent = {\n            value: false,\n            data: {},\n            getValue: function () {\n              return value;\n            },\n            getData: function () {\n              return data;\n            },\n            getElement: function () {\n              return document.createElement(\"div\");\n            },\n            getRow: function () {\n              return row.getComponent();\n            },\n            getColumn: function () {\n              return column.getComponent();\n            },\n            getTable: () => {\n              return this.table;\n            }\n          };\n          function onRendered(callback) {\n            callback();\n          }\n          output.push({\n            field: column.field,\n            title: column.definition.title,\n            value: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n          });\n        } else {\n          output.push({\n            field: column.field,\n            title: column.definition.title,\n            value: value\n          });\n        }\n      }\n    });\n    return output;\n  }\n  formatCollapsedData(data) {\n    var list = document.createElement(\"table\");\n    data.forEach(function (item) {\n      var row = document.createElement(\"tr\");\n      var titleData = document.createElement(\"td\");\n      var valueData = document.createElement(\"td\");\n      var node_content;\n      var titleHighlight = document.createElement(\"strong\");\n      titleData.appendChild(titleHighlight);\n      this.langBind(\"columns|\" + item.field, function (text) {\n        titleHighlight.innerHTML = text || item.title;\n      });\n      if (item.value instanceof Node) {\n        node_content = document.createElement(\"div\");\n        node_content.appendChild(item.value);\n        valueData.appendChild(node_content);\n      } else {\n        valueData.innerHTML = item.value;\n      }\n      row.appendChild(titleData);\n      row.appendChild(valueData);\n      list.appendChild(row);\n    }, this);\n    return Object.keys(data).length ? list : \"\";\n  }\n}\nResponsiveLayout.moduleName = \"responsiveLayout\";\nclass SelectRow extends Module {\n  constructor(table) {\n    super(table);\n    this.selecting = false; //flag selecting in progress\n    this.lastClickedRow = false; //last clicked row\n    this.selectPrev = []; //hold previously selected element for drag drop selection\n    this.selectedRows = []; //hold selected rows\n    this.headerCheckboxElement = null; // hold header select element\n\n    this.registerTableOption(\"selectable\", \"highlight\"); //highlight rows on hover\n    this.registerTableOption(\"selectableRangeMode\", \"drag\"); //highlight rows on hover\n    this.registerTableOption(\"selectableRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n    this.registerTableOption(\"selectablePersistence\", true); // maintain selection when table view is updated\n    this.registerTableOption(\"selectableCheck\", function (data, row) {\n      return true;\n    }); //check whether row is selectable\n\n    this.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n    this.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n    this.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n    this.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n    this.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\n    //register component functions\n    this.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n    this.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n    this.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n    this.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n  }\n  initialize() {\n    if (this.table.options.selectable !== false) {\n      this.subscribe(\"row-init\", this.initializeRow.bind(this));\n      this.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n      this.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n      this.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n      if (this.table.options.selectable && !this.table.options.selectablePersistence) {\n        this.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n      }\n    }\n  }\n  rowRetrieve(type, prevValue) {\n    return type === \"selected\" ? this.selectedRows : prevValue;\n  }\n  rowDeleted(row) {\n    this._deselectRow(row, true);\n  }\n  clearSelectionData(silent) {\n    var prevSelected = this.selectedRows.length;\n    this.selecting = false;\n    this.lastClickedRow = false;\n    this.selectPrev = [];\n    this.selectedRows = [];\n    if (prevSelected && silent !== true) {\n      this._rowSelectionChanged();\n    }\n  }\n  initializeRow(row) {\n    var self = this,\n      element = row.getElement();\n\n    // trigger end of row selection\n    var endSelect = function () {\n      setTimeout(function () {\n        self.selecting = false;\n      }, 50);\n      document.body.removeEventListener(\"mouseup\", endSelect);\n    };\n    row.modules.select = {\n      selected: false\n    };\n\n    //set row selection class\n    if (self.checkRowSelectability(row)) {\n      element.classList.add(\"tabulator-selectable\");\n      element.classList.remove(\"tabulator-unselectable\");\n      if (self.table.options.selectable && self.table.options.selectable != \"highlight\") {\n        if (self.table.options.selectableRangeMode === \"click\") {\n          element.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n        } else {\n          element.addEventListener(\"click\", function (e) {\n            if (!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()) {\n              self.table._clearSelection();\n            }\n            if (!self.selecting) {\n              self.toggleRow(row);\n            }\n          });\n          element.addEventListener(\"mousedown\", function (e) {\n            if (e.shiftKey) {\n              self.table._clearSelection();\n              self.selecting = true;\n              self.selectPrev = [];\n              document.body.addEventListener(\"mouseup\", endSelect);\n              document.body.addEventListener(\"keyup\", endSelect);\n              self.toggleRow(row);\n              return false;\n            }\n          });\n          element.addEventListener(\"mouseenter\", function (e) {\n            if (self.selecting) {\n              self.table._clearSelection();\n              self.toggleRow(row);\n              if (self.selectPrev[1] == row) {\n                self.toggleRow(self.selectPrev[0]);\n              }\n            }\n          });\n          element.addEventListener(\"mouseout\", function (e) {\n            if (self.selecting) {\n              self.table._clearSelection();\n              self.selectPrev.unshift(row);\n            }\n          });\n        }\n      }\n    } else {\n      element.classList.add(\"tabulator-unselectable\");\n      element.classList.remove(\"tabulator-selectable\");\n    }\n  }\n  handleComplexRowClick(row, e) {\n    if (e.shiftKey) {\n      this.table._clearSelection();\n      this.lastClickedRow = this.lastClickedRow || row;\n      var lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n      var rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n      var fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n      var toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n      var rows = this.table.rowManager.getDisplayRows().slice(0);\n      var toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n      if (e.ctrlKey || e.metaKey) {\n        toggledRows.forEach(toggledRow => {\n          if (toggledRow !== this.lastClickedRow) {\n            if (this.table.options.selectable !== true && !this.isRowSelected(row)) {\n              if (this.selectedRows.length < this.table.options.selectable) {\n                this.toggleRow(toggledRow);\n              }\n            } else {\n              this.toggleRow(toggledRow);\n            }\n          }\n        });\n        this.lastClickedRow = row;\n      } else {\n        this.deselectRows(undefined, true);\n        if (this.table.options.selectable !== true) {\n          if (toggledRows.length > this.table.options.selectable) {\n            toggledRows = toggledRows.slice(0, this.table.options.selectable);\n          }\n        }\n        this.selectRows(toggledRows);\n      }\n      this.table._clearSelection();\n    } else if (e.ctrlKey || e.metaKey) {\n      this.toggleRow(row);\n      this.lastClickedRow = row;\n    } else {\n      this.deselectRows(undefined, true);\n      this.selectRows(row);\n      this.lastClickedRow = row;\n    }\n  }\n  checkRowSelectability(row) {\n    if (row.type === \"row\") {\n      return this.table.options.selectableCheck.call(this.table, row.getComponent());\n    }\n    return false;\n  }\n\n  //toggle row selection\n  toggleRow(row) {\n    if (this.checkRowSelectability(row)) {\n      if (row.modules.select && row.modules.select.selected) {\n        this._deselectRow(row);\n      } else {\n        this._selectRow(row);\n      }\n    }\n  }\n\n  //select a number of rows\n  selectRows(rows) {\n    var rowMatch;\n    switch (typeof rows) {\n      case \"undefined\":\n        this.table.rowManager.rows.forEach(row => {\n          this._selectRow(row, true, true);\n        });\n        this._rowSelectionChanged();\n        break;\n      case \"string\":\n        rowMatch = this.table.rowManager.findRow(rows);\n        if (rowMatch) {\n          this._selectRow(rowMatch, true, true);\n          this._rowSelectionChanged();\n        } else {\n          rowMatch = this.table.rowManager.getRows(rows);\n          rowMatch.forEach(row => {\n            this._selectRow(row, true, true);\n          });\n          if (rowMatch.length) {\n            this._rowSelectionChanged();\n          }\n        }\n        break;\n      default:\n        if (Array.isArray(rows)) {\n          rows.forEach(row => {\n            this._selectRow(row, true, true);\n          });\n          this._rowSelectionChanged();\n        } else {\n          this._selectRow(rows, false, true);\n        }\n        break;\n    }\n  }\n\n  //select an individual row\n  _selectRow(rowInfo, silent, force) {\n    //handle max row count\n    if (!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force) {\n      if (this.selectedRows.length >= this.table.options.selectable) {\n        if (this.table.options.selectableRollingSelection) {\n          this._deselectRow(this.selectedRows[0]);\n        } else {\n          return false;\n        }\n      }\n    }\n    var row = this.table.rowManager.findRow(rowInfo);\n    if (row) {\n      if (this.selectedRows.indexOf(row) == -1) {\n        row.getElement().classList.add(\"tabulator-selected\");\n        if (!row.modules.select) {\n          row.modules.select = {};\n        }\n        row.modules.select.selected = true;\n        if (row.modules.select.checkboxEl) {\n          row.modules.select.checkboxEl.checked = true;\n        }\n        this.selectedRows.push(row);\n        if (this.table.options.dataTreeSelectPropagate) {\n          this.childRowSelection(row, true);\n        }\n        this.dispatchExternal(\"rowSelected\", row.getComponent());\n        this._rowSelectionChanged(silent);\n      }\n    } else {\n      if (!silent) {\n        console.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n      }\n    }\n  }\n  isRowSelected(row) {\n    return this.selectedRows.indexOf(row) !== -1;\n  }\n\n  //deselect a number of rows\n  deselectRows(rows, silent) {\n    var self = this,\n      rowCount;\n    if (typeof rows == \"undefined\") {\n      rowCount = self.selectedRows.length;\n      for (let i = 0; i < rowCount; i++) {\n        self._deselectRow(self.selectedRows[0], true);\n      }\n      if (rowCount) {\n        self._rowSelectionChanged(silent);\n      }\n    } else {\n      if (Array.isArray(rows)) {\n        rows.forEach(function (row) {\n          self._deselectRow(row, true);\n        });\n        self._rowSelectionChanged(silent);\n      } else {\n        self._deselectRow(rows, silent);\n      }\n    }\n  }\n\n  //deselect an individual row\n  _deselectRow(rowInfo, silent) {\n    var self = this,\n      row = self.table.rowManager.findRow(rowInfo),\n      index;\n    if (row) {\n      index = self.selectedRows.findIndex(function (selectedRow) {\n        return selectedRow == row;\n      });\n      if (index > -1) {\n        row.getElement().classList.remove(\"tabulator-selected\");\n        if (!row.modules.select) {\n          row.modules.select = {};\n        }\n        row.modules.select.selected = false;\n        if (row.modules.select.checkboxEl) {\n          row.modules.select.checkboxEl.checked = false;\n        }\n        self.selectedRows.splice(index, 1);\n        if (this.table.options.dataTreeSelectPropagate) {\n          this.childRowSelection(row, false);\n        }\n        this.dispatchExternal(\"rowDeselected\", row.getComponent());\n        self._rowSelectionChanged(silent);\n      }\n    } else {\n      if (!silent) {\n        console.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n      }\n    }\n  }\n  getSelectedData() {\n    var data = [];\n    this.selectedRows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    return data;\n  }\n  getSelectedRows() {\n    var rows = [];\n    this.selectedRows.forEach(function (row) {\n      rows.push(row.getComponent());\n    });\n    return rows;\n  }\n  _rowSelectionChanged(silent) {\n    if (this.headerCheckboxElement) {\n      if (this.selectedRows.length === 0) {\n        this.headerCheckboxElement.checked = false;\n        this.headerCheckboxElement.indeterminate = false;\n      } else if (this.table.rowManager.rows.length === this.selectedRows.length) {\n        this.headerCheckboxElement.checked = true;\n        this.headerCheckboxElement.indeterminate = false;\n      } else {\n        this.headerCheckboxElement.indeterminate = true;\n        this.headerCheckboxElement.checked = false;\n      }\n    }\n    if (!silent) {\n      this.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows());\n    }\n  }\n  registerRowSelectCheckbox(row, element) {\n    if (!row._row.modules.select) {\n      row._row.modules.select = {};\n    }\n    row._row.modules.select.checkboxEl = element;\n  }\n  registerHeaderSelectCheckbox(element) {\n    this.headerCheckboxElement = element;\n  }\n  childRowSelection(row, select) {\n    var children = this.table.modules.dataTree.getChildren(row, true);\n    if (select) {\n      for (let child of children) {\n        this._selectRow(child, true);\n      }\n    } else {\n      for (let child of children) {\n        this._deselectRow(child, true);\n      }\n    }\n  }\n}\nSelectRow.moduleName = \"selectRow\";\n\n//sort numbers\nfunction number$1(a, b, aRow, bRow, column, dir, params) {\n  var alignEmptyValues = params.alignEmptyValues;\n  var decimal = params.decimalSeparator;\n  var thousand = params.thousandSeparator;\n  var emptyAlign = 0;\n  a = String(a);\n  b = String(b);\n  if (thousand) {\n    a = a.split(thousand).join(\"\");\n    b = b.split(thousand).join(\"\");\n  }\n  if (decimal) {\n    a = a.split(decimal).join(\".\");\n    b = b.split(decimal).join(\".\");\n  }\n  a = parseFloat(a);\n  b = parseFloat(b);\n\n  //handle non numeric values\n  if (isNaN(a)) {\n    emptyAlign = isNaN(b) ? 0 : -1;\n  } else if (isNaN(b)) {\n    emptyAlign = 1;\n  } else {\n    //compare valid values\n    return a - b;\n  }\n\n  //fix empty values in position\n  if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n    emptyAlign *= -1;\n  }\n  return emptyAlign;\n}\n\n//sort strings\nfunction string(a, b, aRow, bRow, column, dir, params) {\n  var alignEmptyValues = params.alignEmptyValues;\n  var emptyAlign = 0;\n  var locale;\n\n  //handle empty values\n  if (!a) {\n    emptyAlign = !b ? 0 : -1;\n  } else if (!b) {\n    emptyAlign = 1;\n  } else {\n    //compare valid values\n    switch (typeof params.locale) {\n      case \"boolean\":\n        if (params.locale) {\n          locale = this.langLocale();\n        }\n        break;\n      case \"string\":\n        locale = params.locale;\n        break;\n    }\n    return String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n  }\n\n  //fix empty values in position\n  if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n    emptyAlign *= -1;\n  }\n  return emptyAlign;\n}\n\n//sort datetime\nfunction datetime$2(a, b, aRow, bRow, column, dir, params) {\n  var DT = window.DateTime || luxon.DateTime;\n  var format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n    alignEmptyValues = params.alignEmptyValues,\n    emptyAlign = 0;\n  if (typeof DT != \"undefined\") {\n    if (!DT.isDateTime(a)) {\n      if (format === \"iso\") {\n        a = DT.fromISO(String(a));\n      } else {\n        a = DT.fromFormat(String(a), format);\n      }\n    }\n    if (!DT.isDateTime(b)) {\n      if (format === \"iso\") {\n        b = DT.fromISO(String(b));\n      } else {\n        b = DT.fromFormat(String(b), format);\n      }\n    }\n    if (!a.isValid) {\n      emptyAlign = !b.isValid ? 0 : -1;\n    } else if (!b.isValid) {\n      emptyAlign = 1;\n    } else {\n      //compare valid values\n      return a - b;\n    }\n\n    //fix empty values in position\n    if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n      emptyAlign *= -1;\n    }\n    return emptyAlign;\n  } else {\n    console.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n  }\n}\n\n//sort date\nfunction date$1(a, b, aRow, bRow, column, dir, params) {\n  if (!params.format) {\n    params.format = \"dd/MM/yyyy\";\n  }\n  return datetime$2.call(this, a, b, aRow, bRow, column, dir, params);\n}\n\n//sort times\nfunction time$1(a, b, aRow, bRow, column, dir, params) {\n  if (!params.format) {\n    params.format = \"HH:mm\";\n  }\n  return datetime$2.call(this, a, b, aRow, bRow, column, dir, params);\n}\n\n//sort booleans\nfunction boolean(a, b, aRow, bRow, column, dir, params) {\n  var el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n  var el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n  return el1 - el2;\n}\n\n//sort if element contains any data\nfunction array(a, b, aRow, bRow, column, dir, params) {\n  var type = params.type || \"length\",\n    alignEmptyValues = params.alignEmptyValues,\n    emptyAlign = 0;\n  function calc(value) {\n    var result;\n    switch (type) {\n      case \"length\":\n        result = value.length;\n        break;\n      case \"sum\":\n        result = value.reduce(function (c, d) {\n          return c + d;\n        });\n        break;\n      case \"max\":\n        result = Math.max.apply(null, value);\n        break;\n      case \"min\":\n        result = Math.min.apply(null, value);\n        break;\n      case \"avg\":\n        result = value.reduce(function (c, d) {\n          return c + d;\n        }) / value.length;\n        break;\n    }\n    return result;\n  }\n\n  //handle non array values\n  if (!Array.isArray(a)) {\n    emptyAlign = !Array.isArray(b) ? 0 : -1;\n  } else if (!Array.isArray(b)) {\n    emptyAlign = 1;\n  } else {\n    return calc(b) - calc(a);\n  }\n\n  //fix empty values in position\n  if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n    emptyAlign *= -1;\n  }\n  return emptyAlign;\n}\n\n//sort if element contains any data\nfunction exists(a, b, aRow, bRow, column, dir, params) {\n  var el1 = typeof a == \"undefined\" ? 0 : 1;\n  var el2 = typeof b == \"undefined\" ? 0 : 1;\n  return el1 - el2;\n}\n\n//sort alpha numeric strings\nfunction alphanum(as, bs, aRow, bRow, column, dir, params) {\n  var a,\n    b,\n    a1,\n    b1,\n    i = 0,\n    L,\n    rx = /(\\d+)|(\\D+)/g,\n    rd = /\\d/;\n  var alignEmptyValues = params.alignEmptyValues;\n  var emptyAlign = 0;\n\n  //handle empty values\n  if (!as && as !== 0) {\n    emptyAlign = !bs && bs !== 0 ? 0 : -1;\n  } else if (!bs && bs !== 0) {\n    emptyAlign = 1;\n  } else {\n    if (isFinite(as) && isFinite(bs)) return as - bs;\n    a = String(as).toLowerCase();\n    b = String(bs).toLowerCase();\n    if (a === b) return 0;\n    if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n    a = a.match(rx);\n    b = b.match(rx);\n    L = a.length > b.length ? b.length : a.length;\n    while (i < L) {\n      a1 = a[i];\n      b1 = b[i++];\n      if (a1 !== b1) {\n        if (isFinite(a1) && isFinite(b1)) {\n          if (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n          if (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n          return a1 - b1;\n        } else return a1 > b1 ? 1 : -1;\n      }\n    }\n    return a.length > b.length;\n  }\n\n  //fix empty values in position\n  if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n    emptyAlign *= -1;\n  }\n  return emptyAlign;\n}\nvar defaultSorters = {\n  number: number$1,\n  string: string,\n  date: date$1,\n  time: time$1,\n  datetime: datetime$2,\n  boolean: boolean,\n  array: array,\n  exists: exists,\n  alphanum: alphanum\n};\nclass Sort extends Module {\n  constructor(table) {\n    super(table);\n    this.sortList = []; //holder current sort\n    this.changed = false; //has the sort changed since last render\n\n    this.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\n    this.registerTableOption(\"initialSort\", false); //initial sorting criteria\n    this.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n    this.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n    this.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n    this.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\n    this.registerColumnOption(\"sorter\");\n    this.registerColumnOption(\"sorterParams\");\n    this.registerColumnOption(\"headerSort\", true);\n    this.registerColumnOption(\"headerSortStartingDir\");\n    this.registerColumnOption(\"headerSortTristate\");\n  }\n  initialize() {\n    this.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n    this.subscribe(\"table-built\", this.tableBuilt.bind(this));\n    this.registerDataHandler(this.sort.bind(this), 20);\n    this.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n    this.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n    this.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n    if (this.table.options.sortMode === \"remote\") {\n      this.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n    }\n  }\n  tableBuilt() {\n    if (this.table.options.initialSort) {\n      this.setSort(this.table.options.initialSort);\n    }\n  }\n  remoteSortParams(data, config, silent, params) {\n    var sorters = this.getSort();\n    sorters.forEach(item => {\n      delete item.column;\n    });\n    params.sort = sorters;\n    return params;\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  userSetSort(sortList, dir) {\n    this.setSort(sortList, dir);\n    // this.table.rowManager.sorterRefresh();\n    this.refreshSort();\n  }\n  clearSort() {\n    this.clear();\n    // this.table.rowManager.sorterRefresh();\n    this.refreshSort();\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  //initialize column header for sorting\n  initializeColumn(column) {\n    var sorter = false,\n      colEl,\n      arrowEl;\n    switch (typeof column.definition.sorter) {\n      case \"string\":\n        if (Sort.sorters[column.definition.sorter]) {\n          sorter = Sort.sorters[column.definition.sorter];\n        } else {\n          console.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n        }\n        break;\n      case \"function\":\n        sorter = column.definition.sorter;\n        break;\n    }\n    column.modules.sort = {\n      sorter: sorter,\n      dir: \"none\",\n      params: column.definition.sorterParams || {},\n      startingDir: column.definition.headerSortStartingDir || \"asc\",\n      tristate: column.definition.headerSortTristate\n    };\n    if (column.definition.headerSort !== false) {\n      colEl = column.getElement();\n      colEl.classList.add(\"tabulator-sortable\");\n      arrowEl = document.createElement(\"div\");\n      arrowEl.classList.add(\"tabulator-col-sorter\");\n      switch (this.table.options.headerSortClickElement) {\n        case \"icon\":\n          arrowEl.classList.add(\"tabulator-col-sorter-element\");\n          break;\n        case \"header\":\n          colEl.classList.add(\"tabulator-col-sorter-element\");\n          break;\n        default:\n          colEl.classList.add(\"tabulator-col-sorter-element\");\n          break;\n      }\n      switch (this.table.options.headerSortElement) {\n        case \"function\":\n          //do nothing\n          break;\n        case \"object\":\n          arrowEl.appendChild(this.table.options.headerSortElement);\n          break;\n        default:\n          arrowEl.innerHTML = this.table.options.headerSortElement;\n      }\n\n      //create sorter arrow\n      column.titleHolderElement.appendChild(arrowEl);\n      column.modules.sort.element = arrowEl;\n      this.setColumnHeaderSortIcon(column, \"none\");\n\n      //sort on click\n      (this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", e => {\n        var dir = \"\",\n          sorters = [],\n          match = false;\n        if (column.modules.sort) {\n          if (column.modules.sort.tristate) {\n            if (column.modules.sort.dir == \"none\") {\n              dir = column.modules.sort.startingDir;\n            } else {\n              if (column.modules.sort.dir == column.modules.sort.startingDir) {\n                dir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n              } else {\n                dir = \"none\";\n              }\n            }\n          } else {\n            switch (column.modules.sort.dir) {\n              case \"asc\":\n                dir = \"desc\";\n                break;\n              case \"desc\":\n                dir = \"asc\";\n                break;\n              default:\n                dir = column.modules.sort.startingDir;\n            }\n          }\n          if (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n            sorters = this.getSort();\n            match = sorters.findIndex(sorter => {\n              return sorter.field === column.getField();\n            });\n            if (match > -1) {\n              sorters[match].dir = dir;\n              match = sorters.splice(match, 1)[0];\n              if (dir != \"none\") {\n                sorters.push(match);\n              }\n            } else {\n              if (dir != \"none\") {\n                sorters.push({\n                  column: column,\n                  dir: dir\n                });\n              }\n            }\n\n            //add to existing sort\n            this.setSort(sorters);\n          } else {\n            if (dir == \"none\") {\n              this.clear();\n            } else {\n              //sort by column only\n              this.setSort(column, dir);\n            }\n          }\n\n          // this.table.rowManager.sorterRefresh(!this.sortList.length);\n          this.refreshSort();\n        }\n      });\n    }\n  }\n  refreshSort() {\n    if (this.table.options.sortMode === \"remote\") {\n      this.reloadData(null, false, false);\n    } else {\n      this.refreshData(true);\n    }\n\n    //TODO - Persist left position of row manager\n    // left = this.scrollLeft;\n    // this.scrollHorizontal(left);\n  }\n\n  //check if the sorters have changed since last use\n  hasChanged() {\n    var changed = this.changed;\n    this.changed = false;\n    return changed;\n  }\n\n  //return current sorters\n  getSort() {\n    var self = this,\n      sorters = [];\n    self.sortList.forEach(function (item) {\n      if (item.column) {\n        sorters.push({\n          column: item.column.getComponent(),\n          field: item.column.getField(),\n          dir: item.dir\n        });\n      }\n    });\n    return sorters;\n  }\n\n  //change sort list and trigger sort\n  setSort(sortList, dir) {\n    var self = this,\n      newSortList = [];\n    if (!Array.isArray(sortList)) {\n      sortList = [{\n        column: sortList,\n        dir: dir\n      }];\n    }\n    sortList.forEach(function (item) {\n      var column;\n      column = self.table.columnManager.findColumn(item.column);\n      if (column) {\n        item.column = column;\n        newSortList.push(item);\n        self.changed = true;\n      } else {\n        console.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n      }\n    });\n    self.sortList = newSortList;\n    this.dispatch(\"sort-changed\");\n  }\n\n  //clear sorters\n  clear() {\n    this.setSort([]);\n  }\n\n  //find appropriate sorter for column\n  findSorter(column) {\n    var row = this.table.rowManager.activeRows[0],\n      sorter = \"string\",\n      field,\n      value;\n    if (row) {\n      row = row.getData();\n      field = column.getField();\n      if (field) {\n        value = column.getFieldValue(row);\n        switch (typeof value) {\n          case \"undefined\":\n            sorter = \"string\";\n            break;\n          case \"boolean\":\n            sorter = \"boolean\";\n            break;\n          default:\n            if (!isNaN(value) && value !== \"\") {\n              sorter = \"number\";\n            } else {\n              if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n                sorter = \"alphanum\";\n              }\n            }\n            break;\n        }\n      }\n    }\n    return Sort.sorters[sorter];\n  }\n\n  //work through sort list sorting data\n  sort(data) {\n    var self = this,\n      sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n      sortListActual = [],\n      rowComponents = [];\n    if (this.subscribedExternal(\"dataSorting\")) {\n      this.dispatchExternal(\"dataSorting\", self.getSort());\n    }\n    self.clearColumnHeaders();\n    if (this.table.options.sortMode !== \"remote\") {\n      //build list of valid sorters and trigger column specific callbacks before sort begins\n      sortList.forEach(function (item, i) {\n        var sortObj;\n        if (item.column) {\n          sortObj = item.column.modules.sort;\n          if (sortObj) {\n            //if no sorter has been defined, take a guess\n            if (!sortObj.sorter) {\n              sortObj.sorter = self.findSorter(item.column);\n            }\n            item.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n            sortListActual.push(item);\n          }\n          self.setColumnHeader(item.column, item.dir);\n        }\n      });\n\n      //sort data\n      if (sortListActual.length) {\n        self._sortItems(data, sortListActual);\n      }\n    } else {\n      sortList.forEach(function (item, i) {\n        self.setColumnHeader(item.column, item.dir);\n      });\n    }\n    if (this.subscribedExternal(\"dataSorted\")) {\n      data.forEach(row => {\n        rowComponents.push(row.getComponent());\n      });\n      this.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n    }\n    return data;\n  }\n\n  //clear sort arrows on columns\n  clearColumnHeaders() {\n    this.table.columnManager.getRealColumns().forEach(column => {\n      if (column.modules.sort) {\n        column.modules.sort.dir = \"none\";\n        column.getElement().setAttribute(\"aria-sort\", \"none\");\n        this.setColumnHeaderSortIcon(column, \"none\");\n      }\n    });\n  }\n\n  //set the column header sort direction\n  setColumnHeader(column, dir) {\n    column.modules.sort.dir = dir;\n    column.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n    this.setColumnHeaderSortIcon(column, dir);\n  }\n  setColumnHeaderSortIcon(column, dir) {\n    var sortEl = column.modules.sort.element,\n      arrowEl;\n    if (column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\") {\n      while (sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n      arrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n      if (typeof arrowEl === \"object\") {\n        sortEl.appendChild(arrowEl);\n      } else {\n        sortEl.innerHTML = arrowEl;\n      }\n    }\n  }\n\n  //sort each item in sort list\n  _sortItems(data, sortList) {\n    var sorterCount = sortList.length - 1;\n    data.sort((a, b) => {\n      var result;\n      for (var i = sorterCount; i >= 0; i--) {\n        let sortItem = sortList[i];\n        result = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n        if (result !== 0) {\n          break;\n        }\n      }\n      return result;\n    });\n  }\n\n  //process individual rows for a sort function on active data\n  _sortRow(a, b, column, dir, params) {\n    var el1Comp, el2Comp;\n\n    //switch elements depending on search direction\n    var el1 = dir == \"asc\" ? a : b;\n    var el2 = dir == \"asc\" ? b : a;\n    a = column.getFieldValue(el1.getData());\n    b = column.getFieldValue(el2.getData());\n    a = typeof a !== \"undefined\" ? a : \"\";\n    b = typeof b !== \"undefined\" ? b : \"\";\n    el1Comp = el1.getComponent();\n    el2Comp = el2.getComponent();\n    return column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n  }\n}\nSort.moduleName = \"sort\";\n\n//load defaults\nSort.sorters = defaultSorters;\nclass Tooltip extends Module {\n  constructor(table) {\n    super(table);\n    this.tooltipSubscriber = null, this.headerSubscriber = null, this.timeout = null;\n    this.popupInstance = null;\n    this.registerTableOption(\"tooltipGenerationMode\", undefined); //deprecated\n    this.registerTableOption(\"tooltipDelay\", 300);\n    this.registerColumnOption(\"tooltip\");\n    this.registerColumnOption(\"headerTooltip\");\n  }\n  initialize() {\n    this.deprecatedOptionsCheck();\n    this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n  }\n  deprecatedOptionsCheck() {\n    this.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n  }\n  initializeColumn(column) {\n    if (column.definition.headerTooltip && !this.headerSubscriber) {\n      this.headerSubscriber = true;\n      this.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n      this.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n    }\n    if (column.definition.tooltip && !this.tooltipSubscriber) {\n      this.tooltipSubscriber = true;\n      this.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n      this.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n    }\n  }\n  mousemoveCheck(action, e, component) {\n    var tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n    if (tooltip) {\n      this.clearPopup();\n      this.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n    }\n  }\n  mouseoutCheck(action, e, component) {\n    if (!this.popupInstance) {\n      this.clearPopup();\n    }\n  }\n  clearPopup(action, e, component) {\n    clearTimeout(this.timeout);\n    this.timeout = null;\n    if (this.popupInstance) {\n      this.popupInstance.hide();\n    }\n  }\n  loadTooltip(e, component, tooltip) {\n    var contentsEl, renderedCallback, coords;\n    function onRendered(callback) {\n      renderedCallback = callback;\n    }\n    if (typeof tooltip === \"function\") {\n      tooltip = tooltip(e, component.getComponent(), onRendered);\n    }\n    if (tooltip instanceof HTMLElement) {\n      contentsEl = tooltip;\n    } else {\n      contentsEl = document.createElement(\"div\");\n      if (tooltip === true) {\n        if (component instanceof Cell) {\n          tooltip = component.value;\n        } else {\n          if (component.definition.field) {\n            this.langBind(\"columns|\" + component.definition.field, value => {\n              contentsEl.innerHTML = tooltip = value || component.definition.title;\n            });\n          } else {\n            tooltip = component.definition.title;\n          }\n        }\n      }\n      contentsEl.innerHTML = tooltip;\n    }\n    if (tooltip || tooltip === 0 || tooltip === false) {\n      contentsEl.classList.add(\"tabulator-tooltip\");\n      contentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n      this.popupInstance = this.popup(contentsEl);\n      if (typeof renderedCallback === \"function\") {\n        this.popupInstance.renderCallback(renderedCallback);\n      }\n      coords = this.popupInstance.containerEventCoords(e);\n      this.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n        this.dispatchExternal(\"TooltipClosed\", component.getComponent());\n        this.popupInstance = null;\n      });\n      this.dispatchExternal(\"TooltipOpened\", component.getComponent());\n    }\n  }\n}\nTooltip.moduleName = \"tooltip\";\nvar defaultValidators = {\n  //is integer\n  integer: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    value = Number(value);\n    return !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n  },\n  //is float\n  float: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    value = Number(value);\n    return !isNaN(value) && isFinite(value) && value % 1 !== 0;\n  },\n  //must be a number\n  numeric: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return !isNaN(value);\n  },\n  //must be a string\n  string: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return isNaN(value);\n  },\n  //maximum value\n  max: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return parseFloat(value) <= parameters;\n  },\n  //minimum value\n  min: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return parseFloat(value) >= parameters;\n  },\n  //starts with  value\n  starts: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n  },\n  //ends with  value\n  ends: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n  },\n  //minimum string length\n  minLength: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return String(value).length >= parameters;\n  },\n  //maximum string length\n  maxLength: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    return String(value).length <= parameters;\n  },\n  //in provided value list\n  in: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    if (typeof parameters == \"string\") {\n      parameters = parameters.split(\"|\");\n    }\n    return parameters.indexOf(value) > -1;\n  },\n  //must match provided regex\n  regex: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    var reg = new RegExp(parameters);\n    return reg.test(value);\n  },\n  //value must be unique in this column\n  unique: function (cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n    var unique = true;\n    var cellData = cell.getData();\n    var column = cell.getColumn()._getSelf();\n    this.table.rowManager.rows.forEach(function (row) {\n      var data = row.getData();\n      if (data !== cellData) {\n        if (value == column.getFieldValue(data)) {\n          unique = false;\n        }\n      }\n    });\n    return unique;\n  },\n  //must have a value\n  required: function (cell, value, parameters) {\n    return value !== \"\" && value !== null && typeof value !== \"undefined\";\n  }\n};\nclass Validate extends Module {\n  constructor(table) {\n    super(table);\n    this.invalidCells = [];\n    this.registerTableOption(\"validationMode\", \"blocking\");\n    this.registerColumnOption(\"validator\");\n    this.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n    this.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n    this.registerTableFunction(\"validate\", this.userValidate.bind(this));\n    this.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n    this.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n    this.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n    this.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n    this.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n  }\n  initialize() {\n    this.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n    this.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n    this.subscribe(\"edit-success\", this.editValidate.bind(this));\n    this.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n    this.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n  }\n\n  ///////////////////////////////////\n  ///////// Event Handling //////////\n  ///////////////////////////////////\n\n  editValidate(cell, value, previousValue) {\n    var valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\n    // allow time for editor to make render changes then style cell\n    if (valid !== true) {\n      setTimeout(() => {\n        cell.getElement().classList.add(\"tabulator-validation-fail\");\n        this.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n      });\n    }\n    return valid;\n  }\n  editorClear(cell, cancelled) {\n    if (cancelled) {\n      if (cell.column.modules.validate) {\n        this.cellValidate(cell);\n      }\n    }\n    cell.getElement().classList.remove(\"tabulator-validation-fail\");\n  }\n  editedClear(cell) {\n    if (cell.modules.validate) {\n      cell.modules.validate.invalid = false;\n    }\n  }\n\n  ///////////////////////////////////\n  ////////// Cell Functions /////////\n  ///////////////////////////////////\n\n  cellIsValid(cell) {\n    return cell.modules.validate ? cell.modules.validate.invalid || true : true;\n  }\n  cellValidate(cell) {\n    return this.validate(cell.column.modules.validate, cell, cell.getValue());\n  }\n\n  ///////////////////////////////////\n  ///////// Column Functions ////////\n  ///////////////////////////////////\n\n  columnValidate(column) {\n    var invalid = [];\n    column.cells.forEach(cell => {\n      if (this.cellValidate(cell) !== true) {\n        invalid.push(cell.getComponent());\n      }\n    });\n    return invalid.length ? invalid : true;\n  }\n\n  ///////////////////////////////////\n  ////////// Row Functions //////////\n  ///////////////////////////////////\n\n  rowValidate(row) {\n    var invalid = [];\n    row.cells.forEach(cell => {\n      if (this.cellValidate(cell) !== true) {\n        invalid.push(cell.getComponent());\n      }\n    });\n    return invalid.length ? invalid : true;\n  }\n\n  ///////////////////////////////////\n  ///////// Table Functions /////////\n  ///////////////////////////////////\n\n  userClearCellValidation(cells) {\n    if (!cells) {\n      cells = this.getInvalidCells();\n    }\n    if (!Array.isArray(cells)) {\n      cells = [cells];\n    }\n    cells.forEach(cell => {\n      this.clearValidation(cell._getSelf());\n    });\n  }\n  userValidate(cells) {\n    var output = [];\n\n    //clear row data\n    this.table.rowManager.rows.forEach(row => {\n      row = row.getComponent();\n      var valid = row.validate();\n      if (valid !== true) {\n        output = output.concat(valid);\n      }\n    });\n    return output.length ? output : true;\n  }\n\n  ///////////////////////////////////\n  ///////// Internal Logic //////////\n  ///////////////////////////////////\n\n  initializeColumnCheck(column) {\n    if (typeof column.definition.validator !== \"undefined\") {\n      this.initializeColumn(column);\n    }\n  }\n\n  //validate\n  initializeColumn(column) {\n    var self = this,\n      config = [],\n      validator;\n    if (column.definition.validator) {\n      if (Array.isArray(column.definition.validator)) {\n        column.definition.validator.forEach(item => {\n          validator = self._extractValidator(item);\n          if (validator) {\n            config.push(validator);\n          }\n        });\n      } else {\n        validator = this._extractValidator(column.definition.validator);\n        if (validator) {\n          config.push(validator);\n        }\n      }\n      column.modules.validate = config.length ? config : false;\n    }\n  }\n  _extractValidator(value) {\n    var type, params, pos;\n    switch (typeof value) {\n      case \"string\":\n        pos = value.indexOf(':');\n        if (pos > -1) {\n          type = value.substring(0, pos);\n          params = value.substring(pos + 1);\n        } else {\n          type = value;\n        }\n        return this._buildValidator(type, params);\n      case \"function\":\n        return this._buildValidator(value);\n      case \"object\":\n        return this._buildValidator(value.type, value.parameters);\n    }\n  }\n  _buildValidator(type, params) {\n    var func = typeof type == \"function\" ? type : Validate.validators[type];\n    if (!func) {\n      console.warn(\"Validator Setup Error - No matching validator found:\", type);\n      return false;\n    } else {\n      return {\n        type: typeof type == \"function\" ? \"function\" : type,\n        func: func,\n        params: params\n      };\n    }\n  }\n  validate(validators, cell, value) {\n    var self = this,\n      failedValidators = [],\n      invalidIndex = this.invalidCells.indexOf(cell);\n    if (validators) {\n      validators.forEach(item => {\n        if (!item.func.call(self, cell.getComponent(), value, item.params)) {\n          failedValidators.push({\n            type: item.type,\n            parameters: item.params\n          });\n        }\n      });\n    }\n    if (!cell.modules.validate) {\n      cell.modules.validate = {};\n    }\n    if (!failedValidators.length) {\n      cell.modules.validate.invalid = false;\n      cell.getElement().classList.remove(\"tabulator-validation-fail\");\n      if (invalidIndex > -1) {\n        this.invalidCells.splice(invalidIndex, 1);\n      }\n    } else {\n      cell.modules.validate.invalid = failedValidators;\n      if (this.table.options.validationMode !== \"manual\") {\n        cell.getElement().classList.add(\"tabulator-validation-fail\");\n      }\n      if (invalidIndex == -1) {\n        this.invalidCells.push(cell);\n      }\n    }\n    return failedValidators.length ? failedValidators : true;\n  }\n  getInvalidCells() {\n    var output = [];\n    this.invalidCells.forEach(cell => {\n      output.push(cell.getComponent());\n    });\n    return output;\n  }\n  clearValidation(cell) {\n    var invalidIndex;\n    if (cell.modules.validate && cell.modules.validate.invalid) {\n      cell.getElement().classList.remove(\"tabulator-validation-fail\");\n      cell.modules.validate.invalid = false;\n      invalidIndex = this.invalidCells.indexOf(cell);\n      if (invalidIndex > -1) {\n        this.invalidCells.splice(invalidIndex, 1);\n      }\n    }\n  }\n}\nValidate.moduleName = \"validate\";\n\n//load defaults\nValidate.validators = defaultValidators;\nvar modules = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  AccessorModule: Accessor,\n  AjaxModule: Ajax,\n  ClipboardModule: Clipboard,\n  ColumnCalcsModule: ColumnCalcs,\n  DataTreeModule: DataTree,\n  DownloadModule: Download,\n  EditModule: Edit$1,\n  ExportModule: Export,\n  FilterModule: Filter,\n  FormatModule: Format,\n  FrozenColumnsModule: FrozenColumns,\n  FrozenRowsModule: FrozenRows,\n  GroupRowsModule: GroupRows,\n  HistoryModule: History,\n  HtmlTableImportModule: HtmlTableImport,\n  ImportModule: Import,\n  InteractionModule: Interaction,\n  KeybindingsModule: Keybindings,\n  MenuModule: Menu,\n  MoveColumnsModule: MoveColumns,\n  MoveRowsModule: MoveRows,\n  MutatorModule: Mutator,\n  PageModule: Page,\n  PersistenceModule: Persistence,\n  PopupModule: Popup$1,\n  PrintModule: Print,\n  ReactiveDataModule: ReactiveData,\n  ResizeColumnsModule: ResizeColumns,\n  ResizeRowsModule: ResizeRows,\n  ResizeTableModule: ResizeTable,\n  ResponsiveLayoutModule: ResponsiveLayout,\n  SelectRowModule: SelectRow,\n  SortModule: Sort,\n  TooltipModule: Tooltip,\n  ValidateModule: Validate\n});\nvar defaultOptions = {\n  debugEventsExternal: false,\n  //flag to console log events\n  debugEventsInternal: false,\n  //flag to console log events\n  debugInvalidOptions: true,\n  //allow toggling of invalid option warnings\n  debugInvalidComponentFuncs: true,\n  //allow toggling of invalid component warnings\n  debugInitialization: true,\n  //allow toggling of pre initialization function call warnings\n  debugDeprecation: true,\n  //allow toggling of deprecation warnings\n\n  height: false,\n  //height of tabulator\n  minHeight: false,\n  //minimum height of tabulator\n  maxHeight: false,\n  //maximum height of tabulator\n\n  columnHeaderVertAlign: \"top\",\n  //vertical alignment of column headers\n\n  popupContainer: false,\n  columns: [],\n  //store for colum header info\n  columnDefaults: {},\n  //store column default props\n\n  data: false,\n  //default starting data\n\n  autoColumns: false,\n  //build columns from data row structure\n  autoColumnsDefinitions: false,\n  nestedFieldSeparator: \".\",\n  //separator for nested data\n\n  footerElement: false,\n  //hold footer element\n\n  index: \"id\",\n  //filed for row index\n\n  textDirection: \"auto\",\n  addRowPos: \"bottom\",\n  //position to insert blank rows, top|bottom\n\n  headerVisible: true,\n  //hide header\n\n  renderVertical: \"virtual\",\n  renderHorizontal: \"basic\",\n  renderVerticalBuffer: 0,\n  // set virtual DOM buffer size\n\n  scrollToRowPosition: \"top\",\n  scrollToRowIfVisible: true,\n  scrollToColumnPosition: \"left\",\n  scrollToColumnIfVisible: true,\n  rowFormatter: false,\n  rowFormatterPrint: null,\n  rowFormatterClipboard: null,\n  rowFormatterHtmlOutput: null,\n  rowHeight: null,\n  placeholder: false,\n  dataLoader: true,\n  dataLoaderLoading: false,\n  dataLoaderError: false,\n  dataLoaderErrorTimeout: 3000,\n  dataSendParams: {},\n  dataReceiveParams: {}\n};\nclass OptionsList {\n  constructor(table, msgType) {\n    let defaults = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.table = table;\n    this.msgType = msgType;\n    this.registeredDefaults = Object.assign({}, defaults);\n  }\n  register(option, value) {\n    this.registeredDefaults[option] = value;\n  }\n  generate(defaultOptions) {\n    let userOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var output = Object.assign({}, this.registeredDefaults),\n      warn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n    Object.assign(output, defaultOptions);\n    for (let key in userOptions) {\n      if (!output.hasOwnProperty(key)) {\n        if (warn) {\n          console.warn(\"Invalid \" + this.msgType + \" option:\", key);\n        }\n        output[key] = userOptions.key;\n      }\n    }\n    for (let key in output) {\n      if (key in userOptions) {\n        output[key] = userOptions[key];\n      } else {\n        if (Array.isArray(output[key])) {\n          output[key] = Object.assign([], output[key]);\n        } else if (typeof output[key] === \"object\" && output[key] !== null) {\n          output[key] = Object.assign({}, output[key]);\n        } else if (typeof output[key] === \"undefined\") {\n          delete output[key];\n        }\n      }\n    }\n    return output;\n  }\n}\nclass Renderer extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.elementVertical = table.rowManager.element;\n    this.elementHorizontal = table.columnManager.element;\n    this.tableElement = table.rowManager.tableElement;\n    this.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n  }\n\n  ///////////////////////////////////\n  /////// Internal Bindings /////////\n  ///////////////////////////////////\n\n  initialize() {\n    //initialize core functionality\n  }\n  clearRows() {\n    //clear down existing rows layout\n  }\n  clearColumns() {\n    //clear down existing columns layout\n  }\n  reinitializeColumnWidths(columns) {\n    //resize columns to fit data\n  }\n  renderRows() {\n    //render rows from a clean slate\n  }\n  renderColumns() {\n    //render columns from a clean slate\n  }\n  rerenderRows(callback) {\n    // rerender rows and keep position\n    if (callback) {\n      callback();\n    }\n  }\n  rerenderColumns(update, blockRedraw) {\n    //rerender columns\n  }\n  renderRowCells(row) {\n    //render the cells in a row\n  }\n  rerenderRowCells(row, force) {\n    //rerender the cells in a row\n  }\n  scrollColumns(left, dir) {\n    //handle horizontal scrolling\n  }\n  scrollRows(top, dir) {\n    //handle vertical scrolling\n  }\n  resize() {\n    //container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n  }\n  scrollToRow(row) {\n    //scroll to a specific row\n  }\n  scrollToRowNearestTop(row) {\n    //determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n  }\n  visibleRows(includingBuffer) {\n    //return the visible rows\n    return [];\n  }\n\n  ///////////////////////////////////\n  //////// Helper Functions /////////\n  ///////////////////////////////////\n\n  rows() {\n    return this.table.rowManager.getDisplayRows();\n  }\n  styleRow(row, index) {\n    var rowEl = row.getElement();\n    if (index % 2) {\n      rowEl.classList.add(\"tabulator-row-even\");\n      rowEl.classList.remove(\"tabulator-row-odd\");\n    } else {\n      rowEl.classList.add(\"tabulator-row-odd\");\n      rowEl.classList.remove(\"tabulator-row-even\");\n    }\n  }\n\n  ///////////////////////////////////\n  /////// External Triggers /////////\n  /////// (DO NOT OVERRIDE) /////////\n  ///////////////////////////////////\n\n  clear() {\n    //clear down existing layout\n    this.clearRows();\n    this.clearColumns();\n  }\n  render() {\n    //render from a clean slate\n    this.renderRows();\n    this.renderColumns();\n  }\n  rerender(callback) {\n    // rerender and keep position\n    this.rerenderRows();\n    this.rerenderColumns();\n  }\n  scrollToRowPosition(row, position, ifVisible) {\n    var rowIndex = this.rows().indexOf(row),\n      rowEl = row.getElement(),\n      offset = 0;\n    return new Promise((resolve, reject) => {\n      if (rowIndex > -1) {\n        if (typeof ifVisible === \"undefined\") {\n          ifVisible = this.table.options.scrollToRowIfVisible;\n        }\n\n        //check row visibility\n        if (!ifVisible) {\n          if (Helpers.elVisible(rowEl)) {\n            offset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n            if (offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight) {\n              resolve();\n              return false;\n            }\n          }\n        }\n        if (typeof position === \"undefined\") {\n          position = this.table.options.scrollToRowPosition;\n        }\n        if (position === \"nearest\") {\n          position = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n        }\n\n        //scroll to row\n        this.scrollToRow(row);\n\n        //align to correct position\n        switch (position) {\n          case \"middle\":\n          case \"center\":\n            if (this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight) {\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - (this.elementVertical.scrollHeight - rowEl.offsetTop) / 2;\n            } else {\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight / 2;\n            }\n            break;\n          case \"bottom\":\n            if (this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight) {\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n            } else {\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n            }\n            break;\n          case \"top\":\n            this.elementVertical.scrollTop = rowEl.offsetTop;\n            break;\n        }\n        resolve();\n      } else {\n        console.warn(\"Scroll Error - Row not visible\");\n        reject(\"Scroll Error - Row not visible\");\n      }\n    });\n  }\n}\nclass BasicHorizontal extends Renderer {\n  constructor(table) {\n    super(table);\n  }\n  renderRowCells(row) {\n    row.cells.forEach(cell => {\n      row.element.appendChild(cell.getElement());\n      cell.cellRendered();\n    });\n  }\n  reinitializeColumnWidths(columns) {\n    columns.forEach(function (column) {\n      column.reinitializeWidth();\n    });\n  }\n}\nclass VirtualDomHorizontal extends Renderer {\n  constructor(table) {\n    super(table);\n    this.leftCol = 0;\n    this.rightCol = 0;\n    this.scrollLeft = 0;\n    this.vDomScrollPosLeft = 0;\n    this.vDomScrollPosRight = 0;\n    this.vDomPadLeft = 0;\n    this.vDomPadRight = 0;\n    this.fitDataColAvg = 0;\n    this.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\n    this.visibleRows = null;\n    this.initialized = false;\n    this.isFitData = false;\n    this.columns = [];\n  }\n  initialize() {\n    this.compatibilityCheck();\n    this.layoutCheck();\n    this.vertScrollListen();\n  }\n  compatibilityCheck() {\n    if (this.options(\"layout\") == \"fitDataTable\") {\n      console.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n    }\n    if (this.options(\"responsiveLayout\")) {\n      console.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n    }\n    if (this.options(\"rtl\")) {\n      console.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n    }\n  }\n  layoutCheck() {\n    this.isFitData = this.options(\"layout\").startsWith('fitData');\n  }\n  vertScrollListen() {\n    this.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n    this.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n  }\n  clearVisRowCache() {\n    this.visibleRows = null;\n  }\n\n  //////////////////////////////////////\n  ///////// Public Functions ///////////\n  //////////////////////////////////////\n\n  renderColumns(row, force) {\n    this.dataChange();\n  }\n  scrollColumns(left, dir) {\n    if (this.scrollLeft != left) {\n      this.scrollLeft = left;\n      this.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n    }\n  }\n  calcWindowBuffer() {\n    var buffer = this.elementVertical.clientWidth;\n    this.table.columnManager.columnsByIndex.forEach(column => {\n      if (column.visible) {\n        var width = column.getWidth();\n        if (width > buffer) {\n          buffer = width;\n        }\n      }\n    });\n    this.windowBuffer = buffer * 2;\n  }\n  rerenderColumns(update, blockRedraw) {\n    var old = {\n        cols: this.columns,\n        leftCol: this.leftCol,\n        rightCol: this.rightCol\n      },\n      colPos = 0;\n    if (update && !this.initialized) {\n      return;\n    }\n    this.clear();\n    this.calcWindowBuffer();\n    this.scrollLeft = this.elementVertical.scrollLeft;\n    this.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n    this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n    this.table.columnManager.columnsByIndex.forEach(column => {\n      var config = {},\n        width;\n      if (column.visible) {\n        if (!column.modules.frozen) {\n          width = column.getWidth();\n          config.leftPos = colPos;\n          config.rightPos = colPos + width;\n          config.width = width;\n          if (this.isFitData) {\n            config.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n          }\n          if (colPos + width > this.vDomScrollPosLeft && colPos < this.vDomScrollPosRight) {\n            //column is visible\n\n            if (this.leftCol == -1) {\n              this.leftCol = this.columns.length;\n              this.vDomPadLeft = colPos;\n            }\n            this.rightCol = this.columns.length;\n          } else {\n            // column is hidden\n            if (this.leftCol !== -1) {\n              this.vDomPadRight += width;\n            }\n          }\n          this.columns.push(column);\n          column.modules.vdomHoz = config;\n          colPos += width;\n        }\n      }\n    });\n    this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n    this.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n    this.initialized = true;\n    if (!blockRedraw) {\n      if (!update || this.reinitChanged(old)) {\n        this.reinitializeRows();\n      }\n    }\n    this.elementVertical.scrollLeft = this.scrollLeft;\n  }\n  renderRowCells(row) {\n    if (this.initialized) {\n      this.initializeRow(row);\n    } else {\n      row.cells.forEach(cell => {\n        row.element.appendChild(cell.getElement());\n        cell.cellRendered();\n      });\n    }\n  }\n  rerenderRowCells(row, force) {\n    this.reinitializeRow(row, force);\n  }\n  reinitializeColumnWidths(columns) {\n    for (let i = this.leftCol; i <= this.rightCol; i++) {\n      this.columns[i].reinitializeWidth();\n    }\n  }\n\n  //////////////////////////////////////\n  //////// Internal Rendering //////////\n  //////////////////////////////////////\n\n  deinitialize() {\n    this.initialized = false;\n  }\n  clear() {\n    this.columns = [];\n    this.leftCol = -1;\n    this.rightCol = 0;\n    this.vDomScrollPosLeft = 0;\n    this.vDomScrollPosRight = 0;\n    this.vDomPadLeft = 0;\n    this.vDomPadRight = 0;\n  }\n  dataChange() {\n    var change = false,\n      row,\n      rowEl;\n    if (this.isFitData) {\n      this.table.columnManager.columnsByIndex.forEach(column => {\n        if (!column.definition.width && column.visible) {\n          change = true;\n        }\n      });\n      if (change && this.table.rowManager.getDisplayRows().length) {\n        this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n        row = this.chain(\"rows-sample\", [1], [], () => {\n          return this.table.rowManager.getDisplayRows();\n        })[0];\n        if (row) {\n          rowEl = row.getElement();\n          row.generateCells();\n          this.tableElement.appendChild(rowEl);\n          for (let colEnd = 0; colEnd < row.cells.length; colEnd++) {\n            let cell = row.cells[colEnd];\n            rowEl.appendChild(cell.getElement());\n            cell.column.reinitializeWidth();\n          }\n          rowEl.parentNode.removeChild(rowEl);\n          this.rerenderColumns(false, true);\n        }\n      }\n    } else {\n      if (this.options(\"layout\") === \"fitColumns\") {\n        this.layoutRefresh();\n        this.rerenderColumns(false, true);\n      }\n    }\n  }\n  reinitChanged(old) {\n    var match = true;\n    if (old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol) {\n      return true;\n    }\n    old.cols.forEach((col, i) => {\n      if (col !== this.columns[i]) {\n        match = false;\n      }\n    });\n    return !match;\n  }\n  reinitializeRows() {\n    var visibleRows = this.getVisibleRows(),\n      otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n    visibleRows.forEach(row => {\n      this.reinitializeRow(row, true);\n    });\n    otherRows.forEach(row => {\n      row.deinitialize();\n    });\n  }\n  getVisibleRows() {\n    if (!this.visibleRows) {\n      this.visibleRows = this.table.rowManager.getVisibleRows();\n    }\n    return this.visibleRows;\n  }\n  scroll(diff) {\n    this.vDomScrollPosLeft += diff;\n    this.vDomScrollPosRight += diff;\n    if (Math.abs(diff) > this.windowBuffer / 2) {\n      this.rerenderColumns();\n    } else {\n      if (diff > 0) {\n        //scroll right\n        this.addColRight();\n        this.removeColLeft();\n      } else {\n        //scroll left\n        this.addColLeft();\n        this.removeColRight();\n      }\n    }\n  }\n  colPositionAdjust(start, end, diff) {\n    for (let i = start; i < end; i++) {\n      let column = this.columns[i];\n      column.modules.vdomHoz.leftPos += diff;\n      column.modules.vdomHoz.rightPos += diff;\n    }\n  }\n  addColRight() {\n    var changes = false,\n      working = true;\n    while (working) {\n      let column = this.columns[this.rightCol + 1];\n      if (column) {\n        if (column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight) {\n          changes = true;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              var cell = row.getCell(column);\n              row.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n              cell.cellRendered();\n            }\n          });\n          this.fitDataColActualWidthCheck(column);\n          this.rightCol++; // Don't move this below the >= check below\n\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              row.modules.vdomHoz.rightCol = this.rightCol;\n            }\n          });\n          if (this.rightCol >= this.columns.length - 1) {\n            this.vDomPadRight = 0;\n          } else {\n            this.vDomPadRight -= column.getWidth();\n          }\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    if (changes) {\n      this.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n    }\n  }\n  addColLeft() {\n    var changes = false,\n      working = true;\n    while (working) {\n      let column = this.columns[this.leftCol - 1];\n      if (column) {\n        if (column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft) {\n          changes = true;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              var cell = row.getCell(column);\n              row.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n              cell.cellRendered();\n            }\n          });\n          this.leftCol--; // don't move this below the <= check below\n\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              row.modules.vdomHoz.leftCol = this.leftCol;\n            }\n          });\n          if (this.leftCol <= 0) {\n            // replicating logic in addColRight\n            this.vDomPadLeft = 0;\n          } else {\n            this.vDomPadLeft -= column.getWidth();\n          }\n          let diff = this.fitDataColActualWidthCheck(column);\n          if (diff) {\n            this.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n            this.vDomPadRight -= diff;\n          }\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    if (changes) {\n      this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n    }\n  }\n  removeColRight() {\n    var changes = false,\n      working = true;\n    while (working) {\n      let column = this.columns[this.rightCol];\n      if (column) {\n        if (column.modules.vdomHoz.leftPos > this.vDomScrollPosRight) {\n          changes = true;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              var cell = row.getCell(column);\n              try {\n                row.getElement().removeChild(cell.getElement());\n              } catch (ex) {\n                console.warn(\"Could not removeColRight\", ex.message);\n              }\n            }\n          });\n          this.vDomPadRight += column.getWidth();\n          this.rightCol--;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              row.modules.vdomHoz.rightCol = this.rightCol;\n            }\n          });\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    if (changes) {\n      this.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n    }\n  }\n  removeColLeft() {\n    var changes = false,\n      working = true;\n    while (working) {\n      let column = this.columns[this.leftCol];\n      if (column) {\n        if (column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft) {\n          changes = true;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              var cell = row.getCell(column);\n              try {\n                row.getElement().removeChild(cell.getElement());\n              } catch (ex) {\n                console.warn(\"Could not removeColLeft\", ex.message);\n              }\n            }\n          });\n          this.vDomPadLeft += column.getWidth();\n          this.leftCol++;\n          this.getVisibleRows().forEach(row => {\n            if (row.type !== \"group\") {\n              row.modules.vdomHoz.leftCol = this.leftCol;\n            }\n          });\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    if (changes) {\n      this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n    }\n  }\n  fitDataColActualWidthCheck(column) {\n    var newWidth, widthDiff;\n    if (column.modules.vdomHoz.fitDataCheck) {\n      column.reinitializeWidth();\n      newWidth = column.getWidth();\n      widthDiff = newWidth - column.modules.vdomHoz.width;\n      if (widthDiff) {\n        column.modules.vdomHoz.rightPos += widthDiff;\n        column.modules.vdomHoz.width = newWidth;\n        this.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n      }\n      column.modules.vdomHoz.fitDataCheck = false;\n    }\n    return widthDiff;\n  }\n  initializeRow(row) {\n    if (row.type !== \"group\") {\n      row.modules.vdomHoz = {\n        leftCol: this.leftCol,\n        rightCol: this.rightCol\n      };\n      if (this.table.modules.frozenColumns) {\n        this.table.modules.frozenColumns.leftColumns.forEach(column => {\n          this.appendCell(row, column);\n        });\n      }\n      for (let i = this.leftCol; i <= this.rightCol; i++) {\n        this.appendCell(row, this.columns[i]);\n      }\n      if (this.table.modules.frozenColumns) {\n        this.table.modules.frozenColumns.rightColumns.forEach(column => {\n          this.appendCell(row, column);\n        });\n      }\n    }\n  }\n  appendCell(row, column) {\n    if (column && column.visible) {\n      let cell = row.getCell(column);\n      row.getElement().appendChild(cell.getElement());\n      cell.cellRendered();\n    }\n  }\n  reinitializeRow(row, force) {\n    if (row.type !== \"group\") {\n      if (force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol) {\n        var rowEl = row.getElement();\n        while (rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n        this.initializeRow(row);\n      }\n    }\n  }\n}\nclass ColumnManager extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.blockHozScrollEvent = false;\n    this.headersElement = null;\n    this.contentsElement = null;\n    this.element = null; //containing element\n    this.columns = []; // column definition object\n    this.columnsByIndex = []; //columns by index\n    this.columnsByField = {}; //columns by field\n    this.scrollLeft = 0;\n    this.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n    this.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n    this.redrawBlockUpdate = null; //store latest redraw update only status\n\n    this.renderer = null;\n  }\n\n  ////////////// Setup Functions /////////////////\n\n  initialize() {\n    this.initializeRenderer();\n    this.headersElement = this.createHeadersElement();\n    this.contentsElement = this.createHeaderContentsElement();\n    this.element = this.createHeaderElement();\n    this.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n    this.element.insertBefore(this.contentsElement, this.element.firstChild);\n    this.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n    this.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n  }\n  padVerticalScrollbar(width) {\n    if (this.table.rtl) {\n      this.headersElement.style.marginLeft = width + \"px\";\n    } else {\n      this.headersElement.style.marginRight = width + \"px\";\n    }\n  }\n  initializeRenderer() {\n    var renderClass;\n    var renderers = {\n      \"virtual\": VirtualDomHorizontal,\n      \"basic\": BasicHorizontal\n    };\n    if (typeof this.table.options.renderHorizontal === \"string\") {\n      renderClass = renderers[this.table.options.renderHorizontal];\n    } else {\n      renderClass = this.table.options.renderHorizontal;\n    }\n    if (renderClass) {\n      this.renderer = new renderClass(this.table, this.element, this.tableElement);\n      this.renderer.initialize();\n    } else {\n      console.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n    }\n  }\n  createHeadersElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-headers\");\n    el.setAttribute(\"role\", \"row\");\n    return el;\n  }\n  createHeaderContentsElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-header-contents\");\n    el.setAttribute(\"role\", \"rowgroup\");\n    return el;\n  }\n  createHeaderElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-header\");\n    el.setAttribute(\"role\", \"rowgroup\");\n    if (!this.table.options.headerVisible) {\n      el.classList.add(\"tabulator-header-hidden\");\n    }\n    return el;\n  }\n\n  //return containing element\n  getElement() {\n    return this.element;\n  }\n\n  //return containing contents element\n  getContentsElement() {\n    return this.contentsElement;\n  }\n\n  //return header containing element\n  getHeadersElement() {\n    return this.headersElement;\n  }\n\n  //scroll horizontally to match table body\n  scrollHorizontal(left) {\n    this.contentsElement.scrollLeft = left;\n    this.scrollLeft = left;\n    this.renderer.scrollColumns(left);\n  }\n\n  ///////////// Column Setup Functions /////////////\n  generateColumnsFromRowData(data) {\n    var cols = [],\n      definitions = this.table.options.autoColumnsDefinitions,\n      row,\n      sorter;\n    if (data && data.length) {\n      row = data[0];\n      for (var key in row) {\n        let col = {\n          field: key,\n          title: key\n        };\n        let value = row[key];\n        switch (typeof value) {\n          case \"undefined\":\n            sorter = \"string\";\n            break;\n          case \"boolean\":\n            sorter = \"boolean\";\n            break;\n          case \"object\":\n            if (Array.isArray(value)) {\n              sorter = \"array\";\n            } else {\n              sorter = \"string\";\n            }\n            break;\n          default:\n            if (!isNaN(value) && value !== \"\") {\n              sorter = \"number\";\n            } else {\n              if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n                sorter = \"alphanum\";\n              } else {\n                sorter = \"string\";\n              }\n            }\n            break;\n        }\n        col.sorter = sorter;\n        cols.push(col);\n      }\n      if (definitions) {\n        switch (typeof definitions) {\n          case \"function\":\n            this.table.options.columns = definitions.call(this.table, cols);\n            break;\n          case \"object\":\n            if (Array.isArray(definitions)) {\n              cols.forEach(col => {\n                var match = definitions.find(def => {\n                  return def.field === col.field;\n                });\n                if (match) {\n                  Object.assign(col, match);\n                }\n              });\n            } else {\n              cols.forEach(col => {\n                if (definitions[col.field]) {\n                  Object.assign(col, definitions[col.field]);\n                }\n              });\n            }\n            this.table.options.columns = cols;\n            break;\n        }\n      } else {\n        this.table.options.columns = cols;\n      }\n      this.setColumns(this.table.options.columns);\n    }\n  }\n  setColumns(cols, row) {\n    while (this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n    this.columns = [];\n    this.columnsByIndex = [];\n    this.columnsByField = {};\n    this.dispatch(\"columns-loading\");\n    cols.forEach((def, i) => {\n      this._addColumn(def);\n    });\n    this._reIndexColumns();\n    this.dispatch(\"columns-loaded\");\n    this.rerenderColumns(false, true);\n    this.redraw(true);\n  }\n  _addColumn(definition, before, nextToColumn) {\n    var column = new Column(definition, this),\n      colEl = column.getElement(),\n      index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n    if (nextToColumn && index > -1) {\n      var topColumn = nextToColumn.getTopColumn();\n      var parentIndex = this.columns.indexOf(topColumn);\n      var nextEl = topColumn.getElement();\n      if (before) {\n        this.columns.splice(parentIndex, 0, column);\n        nextEl.parentNode.insertBefore(colEl, nextEl);\n      } else {\n        this.columns.splice(parentIndex + 1, 0, column);\n        nextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n      }\n    } else {\n      if (before) {\n        this.columns.unshift(column);\n        this.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n      } else {\n        this.columns.push(column);\n        this.headersElement.appendChild(column.getElement());\n      }\n    }\n    column.columnRendered();\n    return column;\n  }\n  registerColumnField(col) {\n    if (col.definition.field) {\n      this.columnsByField[col.definition.field] = col;\n    }\n  }\n  registerColumnPosition(col) {\n    this.columnsByIndex.push(col);\n  }\n  _reIndexColumns() {\n    this.columnsByIndex = [];\n    this.columns.forEach(function (column) {\n      column.reRegisterPosition();\n    });\n  }\n\n  //ensure column headers take up the correct amount of space in column groups\n  verticalAlignHeaders() {\n    var minHeight = 0;\n    if (!this.redrawBlock) {\n      this.headersElement.style.height = \"\";\n      this.columns.forEach(column => {\n        column.clearVerticalAlign();\n      });\n      this.columns.forEach(column => {\n        var height = column.getHeight();\n        if (height > minHeight) {\n          minHeight = height;\n        }\n      });\n      this.headersElement.style.height = minHeight + \"px\";\n      this.columns.forEach(column => {\n        column.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n      });\n      this.table.rowManager.adjustTableSize();\n    }\n  }\n\n  //////////////// Column Details /////////////////\n  findColumn(subject) {\n    var columns;\n    if (typeof subject == \"object\") {\n      if (subject instanceof Column) {\n        //subject is column element\n        return subject;\n      } else if (subject instanceof ColumnComponent) {\n        //subject is public column component\n        return subject._getSelf() || false;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        columns = [];\n        this.columns.forEach(column => {\n          columns.push(column);\n          columns = columns.concat(column.getColumns(true));\n        });\n\n        //subject is a HTML element of the column header\n        let match = columns.find(column => {\n          return column.element === subject;\n        });\n        return match || false;\n      }\n    } else {\n      //subject should be treated as the field name of the column\n      return this.columnsByField[subject] || false;\n    }\n\n    //catch all for any other type of input\n    return false;\n  }\n  getColumnByField(field) {\n    return this.columnsByField[field];\n  }\n  getColumnsByFieldRoot(root) {\n    var matches = [];\n    Object.keys(this.columnsByField).forEach(field => {\n      var fieldRoot = field.split(\".\")[0];\n      if (fieldRoot === root) {\n        matches.push(this.columnsByField[field]);\n      }\n    });\n    return matches;\n  }\n  getColumnByIndex(index) {\n    return this.columnsByIndex[index];\n  }\n  getFirstVisibleColumn() {\n    var index = this.columnsByIndex.findIndex(col => {\n      return col.visible;\n    });\n    return index > -1 ? this.columnsByIndex[index] : false;\n  }\n  getColumns() {\n    return this.columns;\n  }\n  findColumnIndex(column) {\n    return this.columnsByIndex.findIndex(col => {\n      return column === col;\n    });\n  }\n\n  //return all columns that are not groups\n  getRealColumns() {\n    return this.columnsByIndex;\n  }\n\n  //traverse across columns and call action\n  traverse(callback) {\n    this.columnsByIndex.forEach((column, i) => {\n      callback(column, i);\n    });\n  }\n\n  //get definitions of actual columns\n  getDefinitions(active) {\n    var output = [];\n    this.columnsByIndex.forEach(column => {\n      if (!active || active && column.visible) {\n        output.push(column.getDefinition());\n      }\n    });\n    return output;\n  }\n\n  //get full nested definition tree\n  getDefinitionTree() {\n    var output = [];\n    this.columns.forEach(column => {\n      output.push(column.getDefinition(true));\n    });\n    return output;\n  }\n  getComponents(structured) {\n    var output = [],\n      columns = structured ? this.columns : this.columnsByIndex;\n    columns.forEach(column => {\n      output.push(column.getComponent());\n    });\n    return output;\n  }\n  getWidth() {\n    var width = 0;\n    this.columnsByIndex.forEach(column => {\n      if (column.visible) {\n        width += column.getWidth();\n      }\n    });\n    return width;\n  }\n  moveColumn(from, to, after) {\n    to.element.parentNode.insertBefore(from.element, to.element);\n    if (after) {\n      to.element.parentNode.insertBefore(to.element, from.element);\n    }\n    this.moveColumnActual(from, to, after);\n    this.verticalAlignHeaders();\n    this.table.rowManager.reinitialize();\n  }\n  moveColumnActual(from, to, after) {\n    if (from.parent.isGroup) {\n      this._moveColumnInArray(from.parent.columns, from, to, after);\n    } else {\n      this._moveColumnInArray(this.columns, from, to, after);\n    }\n    this._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n    this.rerenderColumns(true);\n    this.dispatch(\"column-moved\", from, to, after);\n    if (this.subscribedExternal(\"columnMoved\")) {\n      this.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n    }\n  }\n  _moveColumnInArray(columns, from, to, after, updateRows) {\n    var fromIndex = columns.indexOf(from),\n      toIndex,\n      rows = [];\n    if (fromIndex > -1) {\n      columns.splice(fromIndex, 1);\n      toIndex = columns.indexOf(to);\n      if (toIndex > -1) {\n        if (after) {\n          toIndex = toIndex + 1;\n        }\n      } else {\n        toIndex = fromIndex;\n      }\n      columns.splice(toIndex, 0, from);\n      if (updateRows) {\n        rows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n        rows = rows.concat(this.table.rowManager.rows);\n        rows.forEach(function (row) {\n          if (row.cells.length) {\n            var cell = row.cells.splice(fromIndex, 1)[0];\n            row.cells.splice(toIndex, 0, cell);\n          }\n        });\n      }\n    }\n  }\n  scrollToColumn(column, position, ifVisible) {\n    var left = 0,\n      offset = column.getLeftOffset(),\n      adjust = 0,\n      colEl = column.getElement();\n    return new Promise((resolve, reject) => {\n      if (typeof position === \"undefined\") {\n        position = this.table.options.scrollToColumnPosition;\n      }\n      if (typeof ifVisible === \"undefined\") {\n        ifVisible = this.table.options.scrollToColumnIfVisible;\n      }\n      if (column.visible) {\n        //align to correct position\n        switch (position) {\n          case \"middle\":\n          case \"center\":\n            adjust = -this.element.clientWidth / 2;\n            break;\n          case \"right\":\n            adjust = colEl.clientWidth - this.headersElement.clientWidth;\n            break;\n        }\n\n        //check column visibility\n        if (!ifVisible) {\n          if (offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth) {\n            return false;\n          }\n        }\n\n        //calculate scroll position\n        left = offset + adjust;\n        left = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth), 0);\n        this.table.rowManager.scrollHorizontal(left);\n        this.scrollHorizontal(left);\n        resolve();\n      } else {\n        console.warn(\"Scroll Error - Column not visible\");\n        reject(\"Scroll Error - Column not visible\");\n      }\n    });\n  }\n\n  //////////////// Cell Management /////////////////\n  generateCells(row) {\n    var cells = [];\n    this.columnsByIndex.forEach(column => {\n      cells.push(column.generateCell(row));\n    });\n    return cells;\n  }\n\n  //////////////// Column Management /////////////////\n  getFlexBaseWidth() {\n    var totalWidth = this.table.element.clientWidth,\n      //table element width\n      fixedWidth = 0;\n\n    //adjust for vertical scrollbar if present\n    if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n      totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n    }\n    this.columnsByIndex.forEach(function (column) {\n      var width, minWidth, colWidth;\n      if (column.visible) {\n        width = column.definition.width || 0;\n        minWidth = parseInt(column.minWidth);\n        if (typeof width == \"string\") {\n          if (width.indexOf(\"%\") > -1) {\n            colWidth = totalWidth / 100 * parseInt(width);\n          } else {\n            colWidth = parseInt(width);\n          }\n        } else {\n          colWidth = width;\n        }\n        fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n      }\n    });\n    return fixedWidth;\n  }\n  addColumn(definition, before, nextToColumn) {\n    return new Promise((resolve, reject) => {\n      var column = this._addColumn(definition, before, nextToColumn);\n      this._reIndexColumns();\n      this.dispatch(\"column-add\", definition, before, nextToColumn);\n      if (this.layoutMode() != \"fitColumns\") {\n        column.reinitializeWidth();\n      }\n      this.redraw(true);\n      this.table.rowManager.reinitialize();\n      this.rerenderColumns();\n      resolve(column);\n    });\n  }\n\n  //remove column from system\n  deregisterColumn(column) {\n    var field = column.getField(),\n      index;\n\n    //remove from field list\n    if (field) {\n      delete this.columnsByField[field];\n    }\n\n    //remove from index list\n    index = this.columnsByIndex.indexOf(column);\n    if (index > -1) {\n      this.columnsByIndex.splice(index, 1);\n    }\n\n    //remove from column list\n    index = this.columns.indexOf(column);\n    if (index > -1) {\n      this.columns.splice(index, 1);\n    }\n    this.verticalAlignHeaders();\n    this.redraw();\n  }\n  rerenderColumns(update, silent) {\n    if (!this.redrawBlock) {\n      this.renderer.rerenderColumns(update, silent);\n    } else {\n      if (update === false || update === true && this.redrawBlockUpdate === null) {\n        this.redrawBlockUpdate = update;\n      }\n    }\n  }\n  blockRedraw() {\n    this.redrawBlock = true;\n    this.redrawBlockUpdate = null;\n  }\n  restoreRedraw() {\n    this.redrawBlock = false;\n    this.verticalAlignHeaders();\n    this.renderer.rerenderColumns(this.redrawBlockUpdate);\n  }\n\n  //redraw columns\n  redraw(force) {\n    if (Helpers.elVisible(this.element)) {\n      this.verticalAlignHeaders();\n    }\n    if (force) {\n      this.table.rowManager.resetScroll();\n      this.table.rowManager.reinitialize();\n    }\n    if (!this.confirm(\"table-redrawing\", force)) {\n      this.layoutRefresh(force);\n    }\n    this.dispatch(\"table-redraw\", force);\n    this.table.footerManager.redraw();\n  }\n}\nclass BasicVertical extends Renderer {\n  constructor(table) {\n    super(table);\n    this.verticalFillMode = \"fill\";\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n  }\n  clearRows() {\n    var element = this.tableElement;\n\n    // element.children.detach();\n    while (element.firstChild) element.removeChild(element.firstChild);\n    element.scrollTop = 0;\n    element.scrollLeft = 0;\n    element.style.minWidth = \"\";\n    element.style.minHeight = \"\";\n    element.style.display = \"\";\n    element.style.visibility = \"\";\n  }\n  renderRows() {\n    var element = this.tableElement,\n      onlyGroupHeaders = true;\n    this.rows().forEach((row, index) => {\n      this.styleRow(row, index);\n      element.appendChild(row.getElement());\n      row.initialize(true);\n      if (row.type !== \"group\") {\n        onlyGroupHeaders = false;\n      }\n    });\n    if (onlyGroupHeaders) {\n      element.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n    } else {\n      element.style.minWidth = \"\";\n    }\n  }\n  rerenderRows(callback) {\n    this.clearRows();\n    if (callback) {\n      callback();\n    }\n    this.renderRows();\n  }\n  scrollToRowNearestTop(row) {\n    var rowTop = Helpers.elOffset(row.getElement()).top;\n    return !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n  }\n  scrollToRow(row) {\n    var rowEl = row.getElement();\n    this.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n  }\n  visibleRows(includingBuffer) {\n    return this.rows();\n  }\n}\nclass VirtualDomVertical extends Renderer {\n  constructor(table) {\n    super(table);\n    this.verticalFillMode = \"fill\";\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.vDomRowHeight = 20; //approximation of row heights for padding\n\n    this.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n    this.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n    this.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n    this.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n    this.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n    this.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n    this.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n    this.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n    this.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n    this.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n    this.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n    this.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n  }\n\n  //////////////////////////////////////\n  ///////// Public Functions ///////////\n  //////////////////////////////////////\n\n  clearRows() {\n    var element = this.tableElement;\n\n    // element.children.detach();\n    while (element.firstChild) element.removeChild(element.firstChild);\n    element.style.paddingTop = \"\";\n    element.style.paddingBottom = \"\";\n    // element.style.minWidth = \"\";\n    element.style.minHeight = \"\";\n    element.style.display = \"\";\n    element.style.visibility = \"\";\n    this.elementVertical.scrollTop = 0;\n    this.elementVertical.scrollLeft = 0;\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.vDomTop = 0;\n    this.vDomBottom = 0;\n    this.vDomTopPad = 0;\n    this.vDomBottomPad = 0;\n    this.vDomScrollPosTop = 0;\n    this.vDomScrollPosBottom = 0;\n  }\n  renderRows() {\n    this._virtualRenderFill();\n  }\n  rerenderRows(callback) {\n    var scrollTop = this.elementVertical.scrollTop;\n    var topRow = false;\n    var topOffset = false;\n    var left = this.table.rowManager.scrollLeft;\n    var rows = this.rows();\n    for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n      if (rows[i]) {\n        var diff = scrollTop - rows[i].getElement().offsetTop;\n        if (topOffset === false || Math.abs(diff) < topOffset) {\n          topOffset = diff;\n          topRow = i;\n        } else {\n          break;\n        }\n      }\n    }\n    rows.forEach(row => {\n      row.deinitializeHeight();\n    });\n    if (callback) {\n      callback();\n    }\n    if (this.rows().length) {\n      this._virtualRenderFill(topRow === false ? this.rows.length - 1 : topRow, true, topOffset || 0);\n    } else {\n      this.clear();\n      this.table.rowManager.tableEmpty();\n    }\n    this.scrollColumns(left);\n  }\n  scrollColumns(left) {\n    this.table.rowManager.scrollHorizontal(left);\n  }\n  scrollRows(top, dir) {\n    var topDiff = top - this.vDomScrollPosTop;\n    var bottomDiff = top - this.vDomScrollPosBottom;\n    var margin = this.vDomWindowBuffer * 2;\n    var rows = this.rows();\n    this.scrollTop = top;\n    if (-topDiff > margin || bottomDiff > margin) {\n      //if big scroll redraw table;\n      var left = this.table.rowManager.scrollLeft;\n      this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop / this.elementVertical.scrollHeight * rows.length));\n      this.scrollColumns(left);\n    } else {\n      if (dir) {\n        //scrolling up\n        if (topDiff < 0) {\n          this._addTopRow(rows, -topDiff);\n        }\n        if (bottomDiff < 0) {\n          //hide bottom row if needed\n          if (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\n            this._removeBottomRow(rows, -bottomDiff);\n          } else {\n            this.vDomScrollPosBottom = this.scrollTop;\n          }\n        }\n      } else {\n        if (bottomDiff >= 0) {\n          this._addBottomRow(rows, bottomDiff);\n        }\n\n        //scrolling down\n        if (topDiff >= 0) {\n          //hide top row if needed\n          if (this.scrollTop > this.vDomWindowBuffer) {\n            this._removeTopRow(rows, topDiff);\n          } else {\n            this.vDomScrollPosTop = this.scrollTop;\n          }\n        }\n      }\n    }\n  }\n  resize() {\n    this.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n  }\n  scrollToRowNearestTop(row) {\n    var rowIndex = this.rows().indexOf(row);\n    return !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n  }\n  scrollToRow(row) {\n    var index = this.rows().indexOf(row);\n    if (index > -1) {\n      this._virtualRenderFill(index, true);\n    }\n  }\n  visibleRows(includingBuffer) {\n    var topEdge = this.elementVertical.scrollTop,\n      bottomEdge = this.elementVertical.clientHeight + topEdge,\n      topFound = false,\n      topRow = 0,\n      bottomRow = 0,\n      rows = this.rows();\n    if (includingBuffer) {\n      topRow = this.vDomTop;\n      bottomRow = this.vDomBottom;\n    } else {\n      for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n        if (rows[i]) {\n          if (!topFound) {\n            if (topEdge - rows[i].getElement().offsetTop >= 0) {\n              topRow = i;\n            } else {\n              topFound = true;\n              if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n                bottomRow = i;\n              } else {\n                break;\n              }\n            }\n          } else {\n            if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n              bottomRow = i;\n            } else {\n              break;\n            }\n          }\n        }\n      }\n    }\n    return rows.slice(topRow, bottomRow + 1);\n  }\n\n  //////////////////////////////////////\n  //////// Internal Rendering //////////\n  //////////////////////////////////////\n\n  //full virtual render\n  _virtualRenderFill(position, forceMove, offset) {\n    var element = this.tableElement,\n      holder = this.elementVertical,\n      topPad = 0,\n      rowsHeight = 0,\n      heightOccupied = 0,\n      topPadHeight = 0,\n      i = 0,\n      rows = this.rows(),\n      rowsCount = rows.length,\n      containerHeight = this.elementVertical.clientHeight;\n    position = position || 0;\n    offset = offset || 0;\n    if (!position) {\n      this.clear();\n    } else {\n      while (element.firstChild) element.removeChild(element.firstChild);\n\n      //check if position is too close to bottom of table\n      heightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n      if (heightOccupied < containerHeight) {\n        position -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n        if (position < 0) {\n          position = 0;\n        }\n      }\n\n      //calculate initial pad\n      topPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight), this.vDomWindowMinMarginRows), position);\n      position -= topPad;\n    }\n    if (rowsCount && Helpers.elVisible(this.elementVertical)) {\n      this.vDomTop = position;\n      this.vDomBottom = position - 1;\n      while ((rowsHeight <= containerHeight + this.vDomWindowBuffer || i < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount - 1) {\n        var index = this.vDomBottom + 1,\n          row = rows[index],\n          rowHeight = 0;\n        this.styleRow(row, index);\n        element.appendChild(row.getElement());\n        row.initialize();\n        if (!row.heightInitialized) {\n          row.normalizeHeight(true);\n        }\n        rowHeight = row.getHeight();\n        if (i < topPad) {\n          topPadHeight += rowHeight;\n        } else {\n          rowsHeight += rowHeight;\n        }\n        if (rowHeight > this.vDomWindowBuffer) {\n          this.vDomWindowBuffer = rowHeight * 2;\n        }\n        this.vDomBottom++;\n        i++;\n      }\n      if (!position) {\n        this.vDomTopPad = 0;\n        //adjust row height to match average of rendered elements\n        this.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n        this.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom - 1);\n        this.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n      } else {\n        this.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : this.vDomRowHeight * this.vDomTop + offset;\n        this.vDomBottomPad = this.vDomBottom == rowsCount - 1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n      }\n      element.style.paddingTop = this.vDomTopPad + \"px\";\n      element.style.paddingBottom = this.vDomBottomPad + \"px\";\n      if (forceMove) {\n        this.scrollTop = this.vDomTopPad + topPadHeight + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n      }\n      this.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n      //adjust for horizontal scrollbar if present (and not at top of table)\n      if (this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove) {\n        this.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n      }\n      this.vDomScrollPosTop = this.scrollTop;\n      this.vDomScrollPosBottom = this.scrollTop;\n      holder.scrollTop = this.scrollTop;\n      this.dispatch(\"render-virtual-fill\");\n    }\n  }\n  _addTopRow(rows, fillableSpace) {\n    var table = this.tableElement,\n      addedRows = [],\n      paddingAdjust = 0,\n      index = this.vDomTop - 1,\n      i = 0,\n      working = true;\n    while (working) {\n      if (this.vDomTop) {\n        let row = rows[index],\n          rowHeight,\n          initialized;\n        if (row && i < this.vDomMaxRenderChain) {\n          rowHeight = row.getHeight() || this.vDomRowHeight;\n          initialized = row.initialized;\n          if (fillableSpace >= rowHeight) {\n            this.styleRow(row, index);\n            table.insertBefore(row.getElement(), table.firstChild);\n            if (!row.initialized || !row.heightInitialized) {\n              addedRows.push(row);\n            }\n            row.initialize();\n            if (!initialized) {\n              rowHeight = row.getElement().offsetHeight;\n              if (rowHeight > this.vDomWindowBuffer) {\n                this.vDomWindowBuffer = rowHeight * 2;\n              }\n            }\n            fillableSpace -= rowHeight;\n            paddingAdjust += rowHeight;\n            this.vDomTop--;\n            index--;\n            i++;\n          } else {\n            working = false;\n          }\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    for (let row of addedRows) {\n      row.clearCellHeight();\n    }\n    this._quickNormalizeRowHeight(addedRows);\n    if (paddingAdjust) {\n      this.vDomTopPad -= paddingAdjust;\n      if (this.vDomTopPad < 0) {\n        this.vDomTopPad = index * this.vDomRowHeight;\n      }\n      if (index < 1) {\n        this.vDomTopPad = 0;\n      }\n      table.style.paddingTop = this.vDomTopPad + \"px\";\n      this.vDomScrollPosTop -= paddingAdjust;\n    }\n  }\n  _removeTopRow(rows, fillableSpace) {\n    var removableRows = [],\n      paddingAdjust = 0,\n      i = 0,\n      working = true;\n    while (working) {\n      let row = rows[this.vDomTop],\n        rowHeight;\n      if (row && i < this.vDomMaxRenderChain) {\n        rowHeight = row.getHeight() || this.vDomRowHeight;\n        if (fillableSpace >= rowHeight) {\n          this.vDomTop++;\n          fillableSpace -= rowHeight;\n          paddingAdjust += rowHeight;\n          removableRows.push(row);\n          i++;\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    for (let row of removableRows) {\n      let rowEl = row.getElement();\n      if (rowEl.parentNode) {\n        rowEl.parentNode.removeChild(rowEl);\n      }\n    }\n    if (paddingAdjust) {\n      this.vDomTopPad += paddingAdjust;\n      this.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n      this.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n    }\n  }\n  _addBottomRow(rows, fillableSpace) {\n    var table = this.tableElement,\n      addedRows = [],\n      paddingAdjust = 0,\n      index = this.vDomBottom + 1,\n      i = 0,\n      working = true;\n    while (working) {\n      let row = rows[index],\n        rowHeight,\n        initialized;\n      if (row && i < this.vDomMaxRenderChain) {\n        rowHeight = row.getHeight() || this.vDomRowHeight;\n        initialized = row.initialized;\n        if (fillableSpace >= rowHeight) {\n          this.styleRow(row, index);\n          table.appendChild(row.getElement());\n          if (!row.initialized || !row.heightInitialized) {\n            addedRows.push(row);\n          }\n          row.initialize();\n          if (!initialized) {\n            rowHeight = row.getElement().offsetHeight;\n            if (rowHeight > this.vDomWindowBuffer) {\n              this.vDomWindowBuffer = rowHeight * 2;\n            }\n          }\n          fillableSpace -= rowHeight;\n          paddingAdjust += rowHeight;\n          this.vDomBottom++;\n          index++;\n          i++;\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    for (let row of addedRows) {\n      row.clearCellHeight();\n    }\n    this._quickNormalizeRowHeight(addedRows);\n    if (paddingAdjust) {\n      this.vDomBottomPad -= paddingAdjust;\n      if (this.vDomBottomPad < 0 || index == rows.length - 1) {\n        this.vDomBottomPad = 0;\n      }\n      table.style.paddingBottom = this.vDomBottomPad + \"px\";\n      this.vDomScrollPosBottom += paddingAdjust;\n    }\n  }\n  _removeBottomRow(rows, fillableSpace) {\n    var removableRows = [],\n      paddingAdjust = 0,\n      i = 0,\n      working = true;\n    while (working) {\n      let row = rows[this.vDomBottom],\n        rowHeight;\n      if (row && i < this.vDomMaxRenderChain) {\n        rowHeight = row.getHeight() || this.vDomRowHeight;\n        if (fillableSpace >= rowHeight) {\n          this.vDomBottom--;\n          fillableSpace -= rowHeight;\n          paddingAdjust += rowHeight;\n          removableRows.push(row);\n          i++;\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n    for (let row of removableRows) {\n      let rowEl = row.getElement();\n      if (rowEl.parentNode) {\n        rowEl.parentNode.removeChild(rowEl);\n      }\n    }\n    if (paddingAdjust) {\n      this.vDomBottomPad += paddingAdjust;\n      if (this.vDomBottomPad < 0) {\n        this.vDomBottomPad = 0;\n      }\n      this.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n      this.vDomScrollPosBottom -= paddingAdjust;\n    }\n  }\n  _quickNormalizeRowHeight(rows) {\n    for (let row of rows) {\n      row.calcHeight();\n    }\n    for (let row of rows) {\n      row.setCellHeight();\n    }\n  }\n}\nclass RowManager extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.element = this.createHolderElement(); //containing element\n    this.tableElement = this.createTableElement(); //table element\n    this.heightFixer = this.createTableElement(); //table element\n    this.placeholder = null; //placeholder element\n    this.placeholderContents = null; //placeholder element\n\n    this.firstRender = false; //handle first render\n    this.renderMode = \"virtual\"; //current rendering mode\n    this.fixedHeight = false; //current rendering mode\n\n    this.rows = []; //hold row data objects\n    this.activeRowsPipeline = []; //hold calculation of active rows\n    this.activeRows = []; //rows currently available to on display in the table\n    this.activeRowsCount = 0; //count of active rows\n\n    this.displayRows = []; //rows currently on display in the table\n    this.displayRowsCount = 0; //count of display rows\n\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n    this.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n    this.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\n    this.dataPipeline = []; //hold data pipeline tasks\n    this.displayPipeline = []; //hold data display pipeline tasks\n\n    this.scrollbarWidth = 0;\n    this.renderer = null;\n  }\n\n  //////////////// Setup Functions /////////////////\n\n  createHolderElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-tableholder\");\n    el.setAttribute(\"tabindex\", 0);\n    // el.setAttribute(\"role\", \"rowgroup\");\n\n    return el;\n  }\n  createTableElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-table\");\n    el.setAttribute(\"role\", \"rowgroup\");\n    return el;\n  }\n  initializePlaceholder() {\n    var placeholder = this.table.options.placeholder;\n\n    //configure placeholder element\n    if (placeholder) {\n      let el = document.createElement(\"div\");\n      el.classList.add(\"tabulator-placeholder\");\n      if (typeof placeholder == \"string\") {\n        let contents = document.createElement(\"div\");\n        contents.classList.add(\"tabulator-placeholder-contents\");\n        contents.innerHTML = placeholder;\n        el.appendChild(contents);\n        this.placeholderContents = contents;\n      } else if (typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement) {\n        el.appendChild(placeholder);\n        this.placeholderContents = placeholder;\n      } else {\n        console.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n        this.el = null;\n      }\n      this.placeholder = el;\n    }\n  }\n\n  //return containing element\n  getElement() {\n    return this.element;\n  }\n\n  //return table element\n  getTableElement() {\n    return this.tableElement;\n  }\n  initialize() {\n    this.initializePlaceholder();\n    this.initializeRenderer();\n\n    //initialize manager\n    this.element.appendChild(this.tableElement);\n    this.firstRender = true;\n\n    //scroll header along with table body\n    this.element.addEventListener(\"scroll\", () => {\n      var left = this.element.scrollLeft,\n        leftDir = this.scrollLeft > left,\n        top = this.element.scrollTop,\n        topDir = this.scrollTop > top;\n\n      //handle horizontal scrolling\n      if (this.scrollLeft != left) {\n        this.scrollLeft = left;\n        this.dispatch(\"scroll-horizontal\", left, leftDir);\n        this.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n        this._positionPlaceholder();\n      }\n\n      //handle vertical scrolling\n      if (this.scrollTop != top) {\n        this.scrollTop = top;\n        this.renderer.scrollRows(top, topDir);\n        this.dispatch(\"scroll-vertical\", top, topDir);\n        this.dispatchExternal(\"scrollVertical\", top, topDir);\n      }\n    });\n  }\n\n  ////////////////// Row Manipulation //////////////////\n  findRow(subject) {\n    if (typeof subject == \"object\") {\n      if (subject instanceof Row) {\n        //subject is row element\n        return subject;\n      } else if (subject instanceof RowComponent) {\n        //subject is public row component\n        return subject._getSelf() || false;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        //subject is a HTML element of the row\n        let match = this.rows.find(row => {\n          return row.getElement() === subject;\n        });\n        return match || false;\n      } else if (subject === null) {\n        return false;\n      }\n    } else if (typeof subject == \"undefined\") {\n      return false;\n    } else {\n      //subject should be treated as the index of the row\n      let match = this.rows.find(row => {\n        return row.data[this.table.options.index] == subject;\n      });\n      return match || false;\n    }\n\n    //catch all for any other type of input\n    return false;\n  }\n  getRowFromDataObject(data) {\n    var match = this.rows.find(row => {\n      return row.data === data;\n    });\n    return match || false;\n  }\n  getRowFromPosition(position) {\n    return this.getDisplayRows().find(row => {\n      return row.getPosition() === position && row.isDisplayed();\n    });\n  }\n  scrollToRow(row, position, ifVisible) {\n    return this.renderer.scrollToRowPosition(row, position, ifVisible);\n  }\n\n  ////////////////// Data Handling //////////////////\n  setData(data, renderInPosition, columnsChanged) {\n    return new Promise((resolve, reject) => {\n      if (renderInPosition && this.getDisplayRows().length) {\n        if (this.table.options.pagination) {\n          this._setDataActual(data, true);\n        } else {\n          this.reRenderInPosition(() => {\n            this._setDataActual(data);\n          });\n        }\n      } else {\n        if (this.table.options.autoColumns && columnsChanged && this.table.initialized) {\n          this.table.columnManager.generateColumnsFromRowData(data);\n        }\n        this.resetScroll();\n        this._setDataActual(data);\n      }\n      resolve();\n    });\n  }\n  _setDataActual(data, renderInPosition) {\n    this.dispatchExternal(\"dataProcessing\", data);\n    this._wipeElements();\n    if (Array.isArray(data)) {\n      this.dispatch(\"data-processing\", data);\n      data.forEach((def, i) => {\n        if (def && typeof def === \"object\") {\n          var row = new Row(def, this);\n          this.rows.push(row);\n        } else {\n          console.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n        }\n      });\n      this.refreshActiveData(false, false, renderInPosition);\n      this.dispatch(\"data-processed\", data);\n      this.dispatchExternal(\"dataProcessed\", data);\n    } else {\n      console.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n    }\n  }\n  _wipeElements() {\n    this.dispatch(\"rows-wipe\");\n    this.destroy();\n    this.adjustTableSize();\n    this.dispatch(\"rows-wiped\");\n  }\n  destroy() {\n    this.rows.forEach(row => {\n      row.wipe();\n    });\n    this.rows = [];\n    this.activeRows = [];\n    this.activeRowsPipeline = [];\n    this.activeRowsCount = 0;\n    this.displayRows = [];\n    this.displayRowsCount = 0;\n  }\n  deleteRow(row, blockRedraw) {\n    var allIndex = this.rows.indexOf(row),\n      activeIndex = this.activeRows.indexOf(row);\n    if (activeIndex > -1) {\n      this.activeRows.splice(activeIndex, 1);\n    }\n    if (allIndex > -1) {\n      this.rows.splice(allIndex, 1);\n    }\n    this.setActiveRows(this.activeRows);\n    this.displayRowIterator(rows => {\n      var displayIndex = rows.indexOf(row);\n      if (displayIndex > -1) {\n        rows.splice(displayIndex, 1);\n      }\n    });\n    if (!blockRedraw) {\n      this.reRenderInPosition();\n    }\n    this.regenerateRowPositions();\n    this.dispatchExternal(\"rowDeleted\", row.getComponent());\n    if (!this.displayRowsCount) {\n      this.tableEmpty();\n    }\n    if (this.subscribedExternal(\"dataChanged\")) {\n      this.dispatchExternal(\"dataChanged\", this.getData());\n    }\n  }\n  addRow(data, pos, index, blockRedraw) {\n    var row = this.addRowActual(data, pos, index, blockRedraw);\n    return row;\n  }\n\n  //add multiple rows\n  addRows(data, pos, index, refreshDisplayOnly) {\n    var rows = [];\n    return new Promise((resolve, reject) => {\n      pos = this.findAddRowPos(pos);\n      if (!Array.isArray(data)) {\n        data = [data];\n      }\n      if (typeof index == \"undefined\" && pos || typeof index !== \"undefined\" && !pos) {\n        data.reverse();\n      }\n      data.forEach((item, i) => {\n        var row = this.addRow(item, pos, index, true);\n        rows.push(row);\n        this.dispatch(\"row-added\", row, item, pos, index);\n      });\n      this.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n      this.regenerateRowPositions();\n      if (rows.length) {\n        this._clearPlaceholder();\n      }\n      resolve(rows);\n    });\n  }\n  findAddRowPos(pos) {\n    if (typeof pos === \"undefined\") {\n      pos = this.table.options.addRowPos;\n    }\n    if (pos === \"pos\") {\n      pos = true;\n    }\n    if (pos === \"bottom\") {\n      pos = false;\n    }\n    return pos;\n  }\n  addRowActual(data, pos, index, blockRedraw) {\n    var row = data instanceof Row ? data : new Row(data || {}, this),\n      top = this.findAddRowPos(pos),\n      allIndex = -1,\n      activeIndex,\n      chainResult;\n    if (!index) {\n      chainResult = this.chain(\"row-adding-position\", [row, top], null, {\n        index,\n        top\n      });\n      index = chainResult.index;\n      top = chainResult.top;\n    }\n    if (typeof index !== \"undefined\") {\n      index = this.findRow(index);\n    }\n    index = this.chain(\"row-adding-index\", [row, index, top], null, index);\n    if (index) {\n      allIndex = this.rows.indexOf(index);\n    }\n    if (index && allIndex > -1) {\n      activeIndex = this.activeRows.indexOf(index);\n      this.displayRowIterator(function (rows) {\n        var displayIndex = rows.indexOf(index);\n        if (displayIndex > -1) {\n          rows.splice(top ? displayIndex : displayIndex + 1, 0, row);\n        }\n      });\n      if (activeIndex > -1) {\n        this.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row);\n      }\n      this.rows.splice(top ? allIndex : allIndex + 1, 0, row);\n    } else {\n      if (top) {\n        this.displayRowIterator(function (rows) {\n          rows.unshift(row);\n        });\n        this.activeRows.unshift(row);\n        this.rows.unshift(row);\n      } else {\n        this.displayRowIterator(function (rows) {\n          rows.push(row);\n        });\n        this.activeRows.push(row);\n        this.rows.push(row);\n      }\n    }\n    this.setActiveRows(this.activeRows);\n    this.dispatchExternal(\"rowAdded\", row.getComponent());\n    if (this.subscribedExternal(\"dataChanged\")) {\n      this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n    }\n    if (!blockRedraw) {\n      this.reRenderInPosition();\n    }\n    return row;\n  }\n  moveRow(from, to, after) {\n    this.dispatch(\"row-move\", from, to, after);\n    this.moveRowActual(from, to, after);\n    this.regenerateRowPositions();\n    this.dispatch(\"row-moved\", from, to, after);\n    this.dispatchExternal(\"rowMoved\", from.getComponent());\n  }\n  moveRowActual(from, to, after) {\n    this.moveRowInArray(this.rows, from, to, after);\n    this.moveRowInArray(this.activeRows, from, to, after);\n    this.displayRowIterator(rows => {\n      this.moveRowInArray(rows, from, to, after);\n    });\n    this.dispatch(\"row-moving\", from, to, after);\n  }\n  moveRowInArray(rows, from, to, after) {\n    var fromIndex, toIndex, start, end;\n    if (from !== to) {\n      fromIndex = rows.indexOf(from);\n      if (fromIndex > -1) {\n        rows.splice(fromIndex, 1);\n        toIndex = rows.indexOf(to);\n        if (toIndex > -1) {\n          if (after) {\n            rows.splice(toIndex + 1, 0, from);\n          } else {\n            rows.splice(toIndex, 0, from);\n          }\n        } else {\n          rows.splice(fromIndex, 0, from);\n        }\n      }\n\n      //restyle rows\n      if (rows === this.getDisplayRows()) {\n        start = fromIndex < toIndex ? fromIndex : toIndex;\n        end = toIndex > fromIndex ? toIndex : fromIndex + 1;\n        for (let i = start; i <= end; i++) {\n          if (rows[i]) {\n            this.styleRow(rows[i], i);\n          }\n        }\n      }\n    }\n  }\n  clearData() {\n    this.setData([]);\n  }\n  getRowIndex(row) {\n    return this.findRowIndex(row, this.rows);\n  }\n  getDisplayRowIndex(row) {\n    var index = this.getDisplayRows().indexOf(row);\n    return index > -1 ? index : false;\n  }\n  nextDisplayRow(row, rowOnly) {\n    var index = this.getDisplayRowIndex(row),\n      nextRow = false;\n    if (index !== false && index < this.displayRowsCount - 1) {\n      nextRow = this.getDisplayRows()[index + 1];\n    }\n    if (nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")) {\n      return this.nextDisplayRow(nextRow, rowOnly);\n    }\n    return nextRow;\n  }\n  prevDisplayRow(row, rowOnly) {\n    var index = this.getDisplayRowIndex(row),\n      prevRow = false;\n    if (index) {\n      prevRow = this.getDisplayRows()[index - 1];\n    }\n    if (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")) {\n      return this.prevDisplayRow(prevRow, rowOnly);\n    }\n    return prevRow;\n  }\n  findRowIndex(row, list) {\n    var rowIndex;\n    row = this.findRow(row);\n    if (row) {\n      rowIndex = list.indexOf(row);\n      if (rowIndex > -1) {\n        return rowIndex;\n      }\n    }\n    return false;\n  }\n  getData(active, transform) {\n    var output = [],\n      rows = this.getRows(active);\n    rows.forEach(function (row) {\n      if (row.type == \"row\") {\n        output.push(row.getData(transform || \"data\"));\n      }\n    });\n    return output;\n  }\n  getComponents(active) {\n    var output = [],\n      rows = this.getRows(active);\n    rows.forEach(function (row) {\n      output.push(row.getComponent());\n    });\n    return output;\n  }\n  getDataCount(active) {\n    var rows = this.getRows(active);\n    return rows.length;\n  }\n  scrollHorizontal(left) {\n    this.scrollLeft = left;\n    this.element.scrollLeft = left;\n    this.dispatch(\"scroll-horizontal\", left);\n  }\n  registerDataPipelineHandler(handler, priority) {\n    if (typeof priority !== \"undefined\") {\n      this.dataPipeline.push({\n        handler,\n        priority\n      });\n      this.dataPipeline.sort((a, b) => {\n        return a.priority - b.priority;\n      });\n    } else {\n      console.error(\"Data pipeline handlers must have a priority in order to be registered\");\n    }\n  }\n  registerDisplayPipelineHandler(handler, priority) {\n    if (typeof priority !== \"undefined\") {\n      this.displayPipeline.push({\n        handler,\n        priority\n      });\n      this.displayPipeline.sort((a, b) => {\n        return a.priority - b.priority;\n      });\n    } else {\n      console.error(\"Display pipeline handlers must have a priority in order to be registered\");\n    }\n  }\n\n  //set active data set\n  refreshActiveData(handler, skipStage, renderInPosition) {\n    var table = this.table,\n      stage = \"\",\n      index = 0,\n      cascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n    if (!this.table.destroyed) {\n      if (typeof handler === \"function\") {\n        index = this.dataPipeline.findIndex(item => {\n          return item.handler === handler;\n        });\n        if (index > -1) {\n          stage = \"dataPipeline\";\n          if (skipStage) {\n            if (index == this.dataPipeline.length - 1) {\n              stage = \"display\";\n            } else {\n              index++;\n            }\n          }\n        } else {\n          index = this.displayPipeline.findIndex(item => {\n            return item.handler === handler;\n          });\n          if (index > -1) {\n            stage = \"displayPipeline\";\n            if (skipStage) {\n              if (index == this.displayPipeline.length - 1) {\n                stage = \"end\";\n              } else {\n                index++;\n              }\n            }\n          } else {\n            console.error(\"Unable to refresh data, invalid handler provided\", handler);\n            return;\n          }\n        }\n      } else {\n        stage = handler || \"all\";\n        index = 0;\n      }\n      if (this.redrawBlock) {\n        if (!this.redrawBlockRestoreConfig || this.redrawBlockRestoreConfig && (this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index || cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))) {\n          this.redrawBlockRestoreConfig = {\n            handler: handler,\n            skipStage: skipStage,\n            renderInPosition: renderInPosition,\n            stage: stage,\n            index: index\n          };\n        }\n        return;\n      } else {\n        if (Helpers.elVisible(this.element)) {\n          if (renderInPosition) {\n            this.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n          } else {\n            this.refreshPipelines(handler, stage, index, renderInPosition);\n            if (!handler) {\n              this.table.columnManager.renderer.renderColumns();\n            }\n            this.renderTable();\n            if (table.options.layoutColumnsOnNewData) {\n              this.table.columnManager.redraw(true);\n            }\n          }\n        } else {\n          this.refreshPipelines(handler, stage, index, renderInPosition);\n        }\n        this.dispatch(\"data-refreshed\");\n      }\n    }\n  }\n  refreshPipelines(handler, stage, index, renderInPosition) {\n    this.dispatch(\"data-refreshing\");\n    if (!handler) {\n      this.activeRowsPipeline[0] = this.rows.slice(0);\n    }\n\n    //cascade through data refresh stages\n    switch (stage) {\n      case \"all\":\n      //handle case where all data needs refreshing\n\n      case \"dataPipeline\":\n        for (let i = index; i < this.dataPipeline.length; i++) {\n          let result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n          this.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n        }\n        this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n      case \"display\":\n        index = 0;\n        this.resetDisplayRows();\n      case \"displayPipeline\":\n        for (let i = index; i < this.displayPipeline.length; i++) {\n          let result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n          this.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n        }\n      case \"end\":\n        //case to handle scenario when trying to skip past end stage\n        this.regenerateRowPositions();\n    }\n    if (this.getDisplayRows().length) {\n      this._clearPlaceholder();\n    }\n  }\n\n  //regenerate row positions\n  regenerateRowPositions() {\n    var rows = this.getDisplayRows();\n    var index = 1;\n    rows.forEach(row => {\n      if (row.type === \"row\") {\n        row.setPosition(index);\n        index++;\n      }\n    });\n  }\n  setActiveRows(activeRows) {\n    this.activeRows = this.activeRows = Object.assign([], activeRows);\n    this.activeRowsCount = this.activeRows.length;\n  }\n\n  //reset display rows array\n  resetDisplayRows() {\n    this.displayRows = [];\n    this.displayRows.push(this.activeRows.slice(0));\n    this.displayRowsCount = this.displayRows[0].length;\n  }\n\n  //set display row pipeline data\n  setDisplayRows(displayRows, index) {\n    this.displayRows[index] = displayRows;\n    if (index == this.displayRows.length - 1) {\n      this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n    }\n  }\n  getDisplayRows(index) {\n    if (typeof index == \"undefined\") {\n      return this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [];\n    } else {\n      return this.displayRows[index] || [];\n    }\n  }\n  getVisibleRows(chain, viewable) {\n    var rows = Object.assign([], this.renderer.visibleRows(!viewable));\n    if (chain) {\n      rows = this.chain(\"rows-visible\", [viewable], rows, rows);\n    }\n    return rows;\n  }\n\n  //repeat action across display rows\n  displayRowIterator(callback) {\n    this.activeRowsPipeline.forEach(callback);\n    this.displayRows.forEach(callback);\n    this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n  }\n\n  //return only actual rows (not group headers etc)\n  getRows(type) {\n    var rows = [];\n    switch (type) {\n      case \"active\":\n        rows = this.activeRows;\n        break;\n      case \"display\":\n        rows = this.table.rowManager.getDisplayRows();\n        break;\n      case \"visible\":\n        rows = this.getVisibleRows(false, true);\n        break;\n      default:\n        rows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n    }\n    return rows;\n  }\n\n  ///////////////// Table Rendering /////////////////\n  //trigger rerender of table in current position\n  reRenderInPosition(callback) {\n    if (this.redrawBlock) {\n      if (callback) {\n        callback();\n      } else {\n        this.redrawBlockRenderInPosition = true;\n      }\n    } else {\n      this.dispatchExternal(\"renderStarted\");\n      this.renderer.rerenderRows(callback);\n      if (!this.fixedHeight) {\n        this.adjustTableSize();\n      }\n      this.scrollBarCheck();\n      this.dispatchExternal(\"renderComplete\");\n    }\n  }\n  scrollBarCheck() {\n    var scrollbarWidth = 0;\n\n    //adjust for vertical scrollbar moving table when present\n    if (this.element.scrollHeight > this.element.clientHeight) {\n      scrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n    }\n    if (scrollbarWidth !== this.scrollbarWidth) {\n      this.scrollbarWidth = scrollbarWidth;\n      this.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n    }\n  }\n  initializeRenderer() {\n    var renderClass;\n    var renderers = {\n      \"virtual\": VirtualDomVertical,\n      \"basic\": BasicVertical\n    };\n    if (typeof this.table.options.renderVertical === \"string\") {\n      renderClass = renderers[this.table.options.renderVertical];\n    } else {\n      renderClass = this.table.options.renderVertical;\n    }\n    if (renderClass) {\n      this.renderMode = this.table.options.renderVertical;\n      this.renderer = new renderClass(this.table, this.element, this.tableElement);\n      this.renderer.initialize();\n      if ((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)) {\n        this.fixedHeight = true;\n      } else {\n        this.fixedHeight = false;\n      }\n    } else {\n      console.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n    }\n  }\n  getRenderMode() {\n    return this.renderMode;\n  }\n  renderTable() {\n    this.dispatchExternal(\"renderStarted\");\n    this.element.scrollTop = 0;\n    this._clearTable();\n    if (this.displayRowsCount) {\n      this.renderer.renderRows();\n      if (this.firstRender) {\n        this.firstRender = false;\n        if (!this.fixedHeight) {\n          this.adjustTableSize();\n        }\n        this.layoutRefresh(true);\n      }\n    } else {\n      this.renderEmptyScroll();\n    }\n    if (!this.fixedHeight) {\n      this.adjustTableSize();\n    }\n    this.dispatch(\"table-layout\");\n    if (!this.displayRowsCount) {\n      this._showPlaceholder();\n    }\n    this.scrollBarCheck();\n    this.dispatchExternal(\"renderComplete\");\n  }\n\n  //show scrollbars on empty table div\n  renderEmptyScroll() {\n    if (this.placeholder) {\n      this.tableElement.style.display = \"none\";\n    } else {\n      this.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n      // this.tableElement.style.minHeight = \"1px\";\n      // this.tableElement.style.visibility = \"hidden\";\n    }\n  }\n\n  _clearTable() {\n    this._clearPlaceholder();\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.renderer.clearRows();\n  }\n  tableEmpty() {\n    this.renderEmptyScroll();\n    this._showPlaceholder();\n  }\n  _showPlaceholder() {\n    if (this.placeholder) {\n      this.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n      this.getElement().appendChild(this.placeholder);\n      this._positionPlaceholder();\n    }\n  }\n  _clearPlaceholder() {\n    if (this.placeholder && this.placeholder.parentNode) {\n      this.placeholder.parentNode.removeChild(this.placeholder);\n    }\n\n    // clear empty table placeholder min\n    this.tableElement.style.minWidth = \"\";\n    this.tableElement.style.display = \"\";\n  }\n  _positionPlaceholder() {\n    if (this.placeholder && this.placeholder.parentNode) {\n      this.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n      this.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n      this.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n    }\n  }\n  styleRow(row, index) {\n    var rowEl = row.getElement();\n    if (index % 2) {\n      rowEl.classList.add(\"tabulator-row-even\");\n      rowEl.classList.remove(\"tabulator-row-odd\");\n    } else {\n      rowEl.classList.add(\"tabulator-row-odd\");\n      rowEl.classList.remove(\"tabulator-row-even\");\n    }\n  }\n\n  //normalize height of active rows\n  normalizeHeight() {\n    this.activeRows.forEach(function (row) {\n      row.normalizeHeight();\n    });\n  }\n\n  //adjust the height of the table holder to fit in the Tabulator element\n  adjustTableSize() {\n    var initialHeight = this.element.clientHeight,\n      minHeight;\n    if (this.renderer.verticalFillMode === \"fill\") {\n      let otherHeight = Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n      if (this.fixedHeight) {\n        minHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n        this.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n        this.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n        this.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n      } else {\n        this.element.style.height = \"\";\n        this.element.style.height = this.table.element.clientHeight - otherHeight + \"px\";\n        this.element.scrollTop = this.scrollTop;\n      }\n      this.renderer.resize();\n\n      //check if the table has changed size when dealing with variable height tables\n      if (!this.fixedHeight && initialHeight != this.element.clientHeight) {\n        if (this.subscribed(\"table-resize\")) {\n          this.dispatch(\"table-resize\");\n        } else {\n          this.redraw();\n        }\n      }\n      this.scrollBarCheck();\n    }\n    this._positionPlaceholder();\n  }\n\n  //reinitialize all rows\n  reinitialize() {\n    this.rows.forEach(function (row) {\n      row.reinitialize(true);\n    });\n  }\n\n  //prevent table from being redrawn\n  blockRedraw() {\n    this.redrawBlock = true;\n    this.redrawBlockRestoreConfig = false;\n  }\n\n  //restore table redrawing\n  restoreRedraw() {\n    this.redrawBlock = false;\n    if (this.redrawBlockRestoreConfig) {\n      this.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n      this.redrawBlockRestoreConfig = false;\n    } else {\n      if (this.redrawBlockRenderInPosition) {\n        this.reRenderInPosition();\n      }\n    }\n    this.redrawBlockRenderInPosition = false;\n  }\n\n  //redraw table\n  redraw(force) {\n    var left = this.scrollLeft;\n    this.adjustTableSize();\n    this.table.tableWidth = this.table.element.clientWidth;\n    if (!force) {\n      this.reRenderInPosition();\n      this.scrollHorizontal(left);\n    } else {\n      this.renderTable();\n    }\n  }\n  resetScroll() {\n    this.element.scrollLeft = 0;\n    this.element.scrollTop = 0;\n    if (this.table.browser === \"ie\") {\n      var event = document.createEvent(\"Event\");\n      event.initEvent(\"scroll\", false, true);\n      this.element.dispatchEvent(event);\n    } else {\n      this.element.dispatchEvent(new Event('scroll'));\n    }\n  }\n}\nclass FooterManager extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.active = false;\n    this.element = this.createElement(); //containing element\n    this.containerElement = this.createContainerElement(); //containing element\n    this.external = false;\n  }\n  initialize() {\n    this.initializeElement();\n  }\n  createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-footer\");\n    return el;\n  }\n  createContainerElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-footer-contents\");\n    this.element.appendChild(el);\n    return el;\n  }\n  initializeElement() {\n    if (this.table.options.footerElement) {\n      switch (typeof this.table.options.footerElement) {\n        case \"string\":\n          if (this.table.options.footerElement[0] === \"<\") {\n            this.containerElement.innerHTML = this.table.options.footerElement;\n          } else {\n            this.external = true;\n            this.containerElement = document.querySelector(this.table.options.footerElement);\n          }\n          break;\n        default:\n          this.element = this.table.options.footerElement;\n          break;\n      }\n    }\n  }\n  getElement() {\n    return this.element;\n  }\n  append(element) {\n    this.activate();\n    this.containerElement.appendChild(element);\n    this.table.rowManager.adjustTableSize();\n  }\n  prepend(element) {\n    this.activate();\n    this.element.insertBefore(element, this.element.firstChild);\n    this.table.rowManager.adjustTableSize();\n  }\n  remove(element) {\n    element.parentNode.removeChild(element);\n    this.deactivate();\n  }\n  deactivate(force) {\n    if (!this.element.firstChild || force) {\n      if (!this.external) {\n        this.element.parentNode.removeChild(this.element);\n      }\n      this.active = false;\n    }\n  }\n  activate() {\n    if (!this.active) {\n      this.active = true;\n      if (!this.external) {\n        this.table.element.appendChild(this.getElement());\n        this.table.element.style.display = '';\n      }\n    }\n  }\n  redraw() {\n    this.dispatch(\"footer-redraw\");\n  }\n}\nclass InteractionManager extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.el = null;\n    this.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n    this.previousTargets = {};\n    this.listeners = [\"click\", \"dblclick\", \"contextmenu\", \"mouseenter\", \"mouseleave\", \"mouseover\", \"mouseout\", \"mousemove\", \"mouseup\", \"mousedown\", \"touchstart\", \"touchend\"];\n    this.componentMap = {\n      \"tabulator-cell\": \"cell\",\n      \"tabulator-row\": \"row\",\n      \"tabulator-group\": \"group\",\n      \"tabulator-col\": \"column\"\n    };\n    this.pseudoTrackers = {\n      \"row\": {\n        subscriber: null,\n        target: null\n      },\n      \"cell\": {\n        subscriber: null,\n        target: null\n      },\n      \"group\": {\n        subscriber: null,\n        target: null\n      },\n      \"column\": {\n        subscriber: null,\n        target: null\n      }\n    };\n    this.pseudoTracking = false;\n  }\n  initialize() {\n    this.el = this.table.element;\n    this.buildListenerMap();\n    this.bindSubscriptionWatchers();\n  }\n  buildListenerMap() {\n    var listenerMap = {};\n    this.listeners.forEach(listener => {\n      listenerMap[listener] = {\n        handler: null,\n        components: []\n      };\n    });\n    this.listeners = listenerMap;\n  }\n  bindPseudoEvents() {\n    Object.keys(this.pseudoTrackers).forEach(key => {\n      this.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n      this.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n    });\n    this.pseudoTracking = true;\n  }\n  pseudoMouseEnter(key, e, target) {\n    if (this.pseudoTrackers[key].target !== target) {\n      if (this.pseudoTrackers[key].target) {\n        this.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n      }\n      this.pseudoMouseLeave(key, e);\n      this.pseudoTrackers[key].target = target;\n      this.dispatch(key + \"-mouseenter\", e, target);\n    }\n  }\n  pseudoMouseLeave(key, e) {\n    var leaveList = Object.keys(this.pseudoTrackers),\n      linkedKeys = {\n        \"row\": [\"cell\"],\n        \"cell\": [\"row\"]\n      };\n    leaveList = leaveList.filter(item => {\n      var links = linkedKeys[key];\n      return item !== key && (!links || links && !links.includes(item));\n    });\n    leaveList.forEach(key => {\n      var target = this.pseudoTrackers[key].target;\n      if (this.pseudoTrackers[key].target) {\n        this.dispatch(key + \"-mouseleave\", e, target);\n        this.pseudoTrackers[key].target = null;\n      }\n    });\n  }\n  bindSubscriptionWatchers() {\n    var listeners = Object.keys(this.listeners),\n      components = Object.values(this.componentMap);\n    for (let comp of components) {\n      for (let listener of listeners) {\n        let key = comp + \"-\" + listener;\n        this.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n      }\n    }\n    this.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n  }\n  subscriptionChanged(component, key, added) {\n    var listener = this.listeners[key].components,\n      index = listener.indexOf(component),\n      changed = false;\n    if (added) {\n      if (index === -1) {\n        listener.push(component);\n        changed = true;\n      }\n    } else {\n      if (!this.subscribed(component + \"-\" + key)) {\n        if (index > -1) {\n          listener.splice(index, 1);\n          changed = true;\n        }\n      }\n    }\n    if ((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking) {\n      this.bindPseudoEvents();\n    }\n    if (changed) {\n      this.updateEventListeners();\n    }\n  }\n  updateEventListeners() {\n    for (let key in this.listeners) {\n      let listener = this.listeners[key];\n      if (listener.components.length) {\n        if (!listener.handler) {\n          listener.handler = this.track.bind(this, key);\n          this.el.addEventListener(key, listener.handler);\n          // this.el.addEventListener(key, listener.handler, {passive: true})\n        }\n      } else {\n        if (listener.handler) {\n          this.el.removeEventListener(key, listener.handler);\n          listener.handler = null;\n        }\n      }\n    }\n  }\n  track(type, e) {\n    var path = e.composedPath && e.composedPath() || e.path;\n    var targets = this.findTargets(path);\n    targets = this.bindComponents(type, targets);\n    this.triggerEvents(type, e, targets);\n    if (this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length) {\n      this.pseudoMouseLeave(\"none\", e);\n    }\n  }\n  findTargets(path) {\n    var targets = {};\n    let componentMap = Object.keys(this.componentMap);\n    for (let el of path) {\n      let classList = el.classList ? [...el.classList] : [];\n      let abort = classList.filter(item => {\n        return this.abortClasses.includes(item);\n      });\n      if (abort.length) {\n        break;\n      }\n      let elTargets = classList.filter(item => {\n        return componentMap.includes(item);\n      });\n      for (let target of elTargets) {\n        if (!targets[this.componentMap[target]]) {\n          targets[this.componentMap[target]] = el;\n        }\n      }\n    }\n    if (targets.group && targets.group === targets.row) {\n      delete targets.row;\n    }\n    return targets;\n  }\n  bindComponents(type, targets) {\n    //ensure row component is looked up before cell\n    var keys = Object.keys(targets).reverse(),\n      listener = this.listeners[type],\n      matches = {},\n      targetMatches = {};\n    for (let key of keys) {\n      let component,\n        target = targets[key],\n        previousTarget = this.previousTargets[key];\n      if (previousTarget && previousTarget.target === target) {\n        component = previousTarget.component;\n      } else {\n        switch (key) {\n          case \"row\":\n          case \"group\":\n            if (listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")) {\n              let rows = this.table.rowManager.getVisibleRows(true);\n              component = rows.find(row => {\n                return row.getElement() === target;\n              });\n              if (targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")) {\n                targets[key] = false;\n              }\n            }\n            break;\n          case \"column\":\n            if (listener.components.includes(\"column\")) {\n              component = this.table.columnManager.findColumn(target);\n            }\n            break;\n          case \"cell\":\n            if (listener.components.includes(\"cell\")) {\n              if (matches[\"row\"] instanceof Row) {\n                component = matches[\"row\"].findCell(target);\n              } else {\n                if (targets[\"row\"]) {\n                  console.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n                }\n              }\n            }\n            break;\n        }\n      }\n      if (component) {\n        matches[key] = component;\n        targetMatches[key] = {\n          target: target,\n          component: component\n        };\n      }\n    }\n    this.previousTargets = targetMatches;\n    return matches;\n  }\n  triggerEvents(type, e, targets) {\n    var listener = this.listeners[type];\n    for (let key in targets) {\n      if (targets[key] && listener.components.includes(key)) {\n        this.dispatch(key + \"-\" + type, e, targets[key]);\n      }\n    }\n  }\n  clearWatchers() {\n    for (let key in this.listeners) {\n      let listener = this.listeners[key];\n      if (listener.handler) {\n        this.el.removeEventListener(key, listener.handler);\n        listener.handler = null;\n      }\n    }\n  }\n}\nclass ComponentFunctionBinder {\n  constructor(table) {\n    this.table = table;\n    this.bindings = {};\n  }\n  bind(type, funcName, handler) {\n    if (!this.bindings[type]) {\n      this.bindings[type] = {};\n    }\n    if (this.bindings[type][funcName]) {\n      console.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n    } else {\n      this.bindings[type][funcName] = handler;\n    }\n  }\n  handle(type, component, name) {\n    if (this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function') {\n      return this.bindings[type][name].bind(null, component);\n    } else {\n      if (name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")) {\n        if (this.table.options.debugInvalidComponentFuncs) {\n          console.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n        }\n      }\n    }\n  }\n}\nclass DataLoader extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n    this.loading = false;\n  }\n  initialize() {}\n  load(data, params, config, replace, silent, columnsChanged) {\n    var requestNo = ++this.requestOrder;\n    this.dispatchExternal(\"dataLoading\", data);\n\n    //parse json data to array\n    if (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)) {\n      data = JSON.parse(data);\n    }\n    if (this.confirm(\"data-loading\", [data, params, config, silent])) {\n      this.loading = true;\n      if (!silent) {\n        this.alertLoader();\n      }\n\n      //get params for request\n      params = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n      params = this.mapParams(params, this.table.options.dataSendParams);\n      var result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n      return result.then(response => {\n        if (!Array.isArray(response) && typeof response == \"object\") {\n          response = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n        }\n        var rowData = this.chain(\"data-loaded\", response, null, response);\n        if (requestNo == this.requestOrder) {\n          this.clearAlert();\n          if (rowData !== false) {\n            this.dispatchExternal(\"dataLoaded\", rowData);\n            this.table.rowManager.setData(rowData, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n          }\n        } else {\n          console.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n        }\n      }).catch(error => {\n        console.error(\"Data Load Error: \", error);\n        this.dispatchExternal(\"dataLoadError\", error);\n        if (!silent) {\n          this.alertError();\n        }\n        setTimeout(() => {\n          this.clearAlert();\n        }, this.table.options.dataLoaderErrorTimeout);\n      }).finally(() => {\n        this.loading = false;\n      });\n    } else {\n      this.dispatchExternal(\"dataLoaded\", data);\n      if (!data) {\n        data = [];\n      }\n      this.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n      return Promise.resolve();\n    }\n  }\n  mapParams(params, map) {\n    var output = {};\n    for (let key in params) {\n      output[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n    }\n    return output;\n  }\n  objectInvert(obj) {\n    var output = {};\n    for (let key in obj) {\n      output[obj[key]] = key;\n    }\n    return output;\n  }\n  blockActiveLoad() {\n    this.requestOrder++;\n  }\n  alertLoader() {\n    var shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n    if (shouldLoad) {\n      this.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n    }\n  }\n  alertError() {\n    this.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n  }\n  clearAlert() {\n    this.table.alertManager.clear();\n  }\n}\nclass ExternalEventBus {\n  constructor(table, optionsList, debug) {\n    this.table = table;\n    this.events = {};\n    this.optionsList = optionsList || {};\n    this.subscriptionNotifiers = {};\n    this.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n    this.debug = debug;\n  }\n  subscriptionChange(key, callback) {\n    if (!this.subscriptionNotifiers[key]) {\n      this.subscriptionNotifiers[key] = [];\n    }\n    this.subscriptionNotifiers[key].push(callback);\n    if (this.subscribed(key)) {\n      this._notifySubscriptionChange(key, true);\n    }\n  }\n  subscribe(key, callback) {\n    if (!this.events[key]) {\n      this.events[key] = [];\n    }\n    this.events[key].push(callback);\n    this._notifySubscriptionChange(key, true);\n  }\n  unsubscribe(key, callback) {\n    var index;\n    if (this.events[key]) {\n      if (callback) {\n        index = this.events[key].findIndex(item => {\n          return item === callback;\n        });\n        if (index > -1) {\n          this.events[key].splice(index, 1);\n        } else {\n          console.warn(\"Cannot remove event, no matching event found:\", key, callback);\n          return;\n        }\n      } else {\n        delete this.events[key];\n      }\n    } else {\n      console.warn(\"Cannot remove event, no events set on:\", key);\n      return;\n    }\n    this._notifySubscriptionChange(key, false);\n  }\n  subscribed(key) {\n    return this.events[key] && this.events[key].length;\n  }\n  _notifySubscriptionChange(key, subscribed) {\n    var notifiers = this.subscriptionNotifiers[key];\n    if (notifiers) {\n      notifiers.forEach(callback => {\n        callback(subscribed);\n      });\n    }\n  }\n  _dispatch() {\n    var args = Array.from(arguments),\n      key = args.shift(),\n      result;\n    if (this.events[key]) {\n      this.events[key].forEach((callback, i) => {\n        let callResult = callback.apply(this.table, args);\n        if (!i) {\n          result = callResult;\n        }\n      });\n    }\n    return result;\n  }\n  _debugDispatch() {\n    var args = Array.from(arguments),\n      key = args[0];\n    args[0] = \"ExternalEvent:\" + args[0];\n    if (this.debug === true || this.debug.includes(key)) {\n      console.log(...args);\n    }\n    return this._dispatch(...arguments);\n  }\n}\nclass InternalEventBus {\n  constructor(debug) {\n    this.events = {};\n    this.subscriptionNotifiers = {};\n    this.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n    this.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n    this.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n    this.debug = debug;\n  }\n  subscriptionChange(key, callback) {\n    if (!this.subscriptionNotifiers[key]) {\n      this.subscriptionNotifiers[key] = [];\n    }\n    this.subscriptionNotifiers[key].push(callback);\n    if (this.subscribed(key)) {\n      this._notifySubscriptionChange(key, true);\n    }\n  }\n  subscribe(key, callback) {\n    let priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10000;\n    if (!this.events[key]) {\n      this.events[key] = [];\n    }\n    this.events[key].push({\n      callback,\n      priority\n    });\n    this.events[key].sort((a, b) => {\n      return a.priority - b.priority;\n    });\n    this._notifySubscriptionChange(key, true);\n  }\n  unsubscribe(key, callback) {\n    var index;\n    if (this.events[key]) {\n      if (callback) {\n        index = this.events[key].findIndex(item => {\n          return item.callback === callback;\n        });\n        if (index > -1) {\n          this.events[key].splice(index, 1);\n        } else {\n          console.warn(\"Cannot remove event, no matching event found:\", key, callback);\n          return;\n        }\n      }\n    } else {\n      console.warn(\"Cannot remove event, no events set on:\", key);\n      return;\n    }\n    this._notifySubscriptionChange(key, false);\n  }\n  subscribed(key) {\n    return this.events[key] && this.events[key].length;\n  }\n  _chain(key, args, initialValue, fallback) {\n    var value = initialValue;\n    if (!Array.isArray(args)) {\n      args = [args];\n    }\n    if (this.subscribed(key)) {\n      this.events[key].forEach((subscriber, i) => {\n        value = subscriber.callback.apply(this, args.concat([value]));\n      });\n      return value;\n    } else {\n      return typeof fallback === \"function\" ? fallback() : fallback;\n    }\n  }\n  _confirm(key, args) {\n    var confirmed = false;\n    if (!Array.isArray(args)) {\n      args = [args];\n    }\n    if (this.subscribed(key)) {\n      this.events[key].forEach((subscriber, i) => {\n        if (subscriber.callback.apply(this, args)) {\n          confirmed = true;\n        }\n      });\n    }\n    return confirmed;\n  }\n  _notifySubscriptionChange(key, subscribed) {\n    var notifiers = this.subscriptionNotifiers[key];\n    if (notifiers) {\n      notifiers.forEach(callback => {\n        callback(subscribed);\n      });\n    }\n  }\n  _dispatch() {\n    var args = Array.from(arguments),\n      key = args.shift();\n    if (this.events[key]) {\n      this.events[key].forEach(subscriber => {\n        subscriber.callback.apply(this, args);\n      });\n    }\n  }\n  _debugDispatch() {\n    var args = Array.from(arguments),\n      key = args[0];\n    args[0] = \"InternalEvent:\" + key;\n    if (this.debug === true || this.debug.includes(key)) {\n      console.log(...args);\n    }\n    return this._dispatch(...arguments);\n  }\n  _debugChain() {\n    var args = Array.from(arguments),\n      key = args[0];\n    args[0] = \"InternalEvent:\" + key;\n    if (this.debug === true || this.debug.includes(key)) {\n      console.log(...args);\n    }\n    return this._chain(...arguments);\n  }\n  _debugConfirm() {\n    var args = Array.from(arguments),\n      key = args[0];\n    args[0] = \"InternalEvent:\" + key;\n    if (this.debug === true || this.debug.includes(key)) {\n      console.log(...args);\n    }\n    return this._confirm(...arguments);\n  }\n}\nclass DeprecationAdvisor extends CoreFeature {\n  constructor(table) {\n    super(table);\n  }\n  _warnUser() {\n    if (this.options(\"debugDeprecation\")) {\n      console.warn(...arguments);\n    }\n  }\n  check(oldOption, newOption) {\n    var msg = \"\";\n    if (typeof this.options(oldOption) !== \"undefined\") {\n      msg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n      if (newOption) {\n        msg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n        this._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n      } else {\n        this._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n      }\n      return false;\n    } else {\n      return true;\n    }\n  }\n  checkMsg(oldOption, msg) {\n    if (typeof this.options(oldOption) !== \"undefined\") {\n      this._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n      return false;\n    } else {\n      return true;\n    }\n  }\n  msg(msg) {\n    this._warnUser(msg);\n  }\n}\nclass TableRegistry {\n  static register(table) {\n    TableRegistry.tables.push(table);\n  }\n  static deregister(table) {\n    var index = TableRegistry.tables.indexOf(table);\n    if (index > -1) {\n      TableRegistry.tables.splice(index, 1);\n    }\n  }\n  static lookupTable(query, silent) {\n    var results = [],\n      matches,\n      match;\n    if (typeof query === \"string\") {\n      matches = document.querySelectorAll(query);\n      if (matches.length) {\n        for (var i = 0; i < matches.length; i++) {\n          match = TableRegistry.matchElement(matches[i]);\n          if (match) {\n            results.push(match);\n          }\n        }\n      }\n    } else if (typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement || query instanceof Tabulator) {\n      match = TableRegistry.matchElement(query);\n      if (match) {\n        results.push(match);\n      }\n    } else if (Array.isArray(query)) {\n      query.forEach(function (item) {\n        results = results.concat(TableRegistry.lookupTable(item));\n      });\n    } else {\n      if (!silent) {\n        console.warn(\"Table Connection Error - Invalid Selector\", query);\n      }\n    }\n    return results;\n  }\n  static matchElement(element) {\n    return TableRegistry.tables.find(function (table) {\n      return element instanceof Tabulator ? table === element : table.element === element;\n    });\n  }\n}\nTableRegistry.tables = [];\n\n//resize columns to fit data they contain\nfunction fitData(columns, forced) {\n  if (forced) {\n    this.table.columnManager.renderer.reinitializeColumnWidths(columns);\n  }\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.update();\n  }\n}\n\n//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nfunction fitDataGeneral(columns, forced) {\n  columns.forEach(function (column) {\n    column.reinitializeWidth();\n  });\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.update();\n  }\n}\n\n//resize columns to fit data the contain and stretch last column to fill table\nfunction fitDataStretch(columns, forced) {\n  var colsWidth = 0,\n    tableWidth = this.table.rowManager.element.clientWidth,\n    gap = 0,\n    lastCol = false;\n  columns.forEach((column, i) => {\n    if (!column.widthFixed) {\n      column.reinitializeWidth();\n    }\n    if (this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\n      lastCol = column;\n    }\n    if (column.visible) {\n      colsWidth += column.getWidth();\n    }\n  });\n  if (lastCol) {\n    gap = tableWidth - colsWidth + lastCol.getWidth();\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      lastCol.setWidth(0);\n      this.table.modules.responsiveLayout.update();\n    }\n    if (gap > 0) {\n      lastCol.setWidth(gap);\n    } else {\n      lastCol.reinitializeWidth();\n    }\n  } else {\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.update();\n    }\n  }\n}\n\n//resize columns to fit\nfunction fitColumns(columns, forced) {\n  var totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n  var fixedWidth = 0; //total width of columns with a defined width\n  var flexWidth = 0; //total width available to flexible columns\n  var flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n  var flexColWidth = 0; //desired width of flexible columns\n  var flexColumns = []; //array of flexible width columns\n  var fixedShrinkColumns = []; //array of fixed width columns that can shrink\n  var flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n  var overflowWidth = 0; //horizontal overflow width\n  var gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n  function calcWidth(width) {\n    var colWidth;\n    if (typeof width == \"string\") {\n      if (width.indexOf(\"%\") > -1) {\n        colWidth = totalWidth / 100 * parseInt(width);\n      } else {\n        colWidth = parseInt(width);\n      }\n    } else {\n      colWidth = width;\n    }\n    return colWidth;\n  }\n\n  //ensure columns resize to take up the correct amount of space\n  function scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\n    var oversizeCols = [],\n      oversizeSpace = 0,\n      remainingSpace = 0,\n      nextColWidth = 0,\n      remainingFlexGrowUnits = flexGrowUnits,\n      gap = 0,\n      changeUnits = 0,\n      undersizeCols = [];\n    function calcGrow(col) {\n      return colWidth * (col.column.definition.widthGrow || 1);\n    }\n    function calcShrink(col) {\n      return calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0);\n    }\n    columns.forEach(function (col, i) {\n      var width = shrinkCols ? calcShrink(col) : calcGrow(col);\n      if (col.column.minWidth >= width) {\n        oversizeCols.push(col);\n      } else {\n        if (col.column.maxWidth && col.column.maxWidth < width) {\n          col.width = col.column.maxWidth;\n          freeSpace -= col.column.maxWidth;\n          remainingFlexGrowUnits -= shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n          if (remainingFlexGrowUnits) {\n            colWidth = Math.floor(freeSpace / remainingFlexGrowUnits);\n          }\n        } else {\n          undersizeCols.push(col);\n          changeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n        }\n      }\n    });\n    if (oversizeCols.length) {\n      oversizeCols.forEach(function (col) {\n        oversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth;\n        col.width = col.column.minWidth;\n      });\n      remainingSpace = freeSpace - oversizeSpace;\n      nextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace;\n      gap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n    } else {\n      gap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace;\n      undersizeCols.forEach(function (column) {\n        column.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n      });\n    }\n    return gap;\n  }\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.update();\n  }\n\n  //adjust for vertical scrollbar if present\n  if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n    totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n  }\n  columns.forEach(function (column) {\n    var width, minWidth, colWidth;\n    if (column.visible) {\n      width = column.definition.width;\n      minWidth = parseInt(column.minWidth);\n      if (width) {\n        colWidth = calcWidth(width);\n        fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n        if (column.definition.widthShrink) {\n          fixedShrinkColumns.push({\n            column: column,\n            width: colWidth > minWidth ? colWidth : minWidth\n          });\n          flexShrinkUnits += column.definition.widthShrink;\n        }\n      } else {\n        flexColumns.push({\n          column: column,\n          width: 0\n        });\n        flexGrowUnits += column.definition.widthGrow || 1;\n      }\n    }\n  });\n\n  //calculate available space\n  flexWidth = totalWidth - fixedWidth;\n\n  //calculate correct column size\n  flexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n  //generate column widths\n  gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n  //increase width of last column to account for rounding errors\n  if (flexColumns.length && gapFill > 0) {\n    flexColumns[flexColumns.length - 1].width += gapFill;\n  }\n\n  //calculate space for columns to be shrunk into\n  flexColumns.forEach(function (col) {\n    flexWidth -= col.width;\n  });\n  overflowWidth = Math.abs(gapFill) + flexWidth;\n\n  //shrink oversize columns if there is no available space\n  if (overflowWidth > 0 && flexShrinkUnits) {\n    gapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n  }\n\n  //decrease width of last column to account for rounding errors\n  if (gapFill && fixedShrinkColumns.length) {\n    fixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill;\n  }\n  flexColumns.forEach(function (col) {\n    col.column.setWidth(col.width);\n  });\n  fixedShrinkColumns.forEach(function (col) {\n    col.column.setWidth(col.width);\n  });\n}\nvar defaultModes = {\n  fitData: fitData,\n  fitDataFill: fitDataGeneral,\n  fitDataTable: fitDataGeneral,\n  fitDataStretch: fitDataStretch,\n  fitColumns: fitColumns\n};\nclass Layout extends Module {\n  constructor(table) {\n    super(table, \"layout\");\n    this.mode = null;\n    this.registerTableOption(\"layout\", \"fitData\"); //layout type\n    this.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n    this.registerColumnOption(\"widthGrow\");\n    this.registerColumnOption(\"widthShrink\");\n  }\n\n  //initialize layout system\n  initialize() {\n    var layout = this.table.options.layout;\n    if (Layout.modes[layout]) {\n      this.mode = layout;\n    } else {\n      console.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n      this.mode = 'fitData';\n    }\n    this.table.element.setAttribute(\"tabulator-layout\", this.mode);\n  }\n  getMode() {\n    return this.mode;\n  }\n\n  //trigger table layout\n  layout(dataChanged) {\n    this.dispatch(\"layout-refreshing\");\n    Layout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n    this.dispatch(\"layout-refreshed\");\n  }\n}\nLayout.moduleName = \"layout\";\n\n//load defaults\nLayout.modes = defaultModes;\nvar defaultLangs = {\n  \"default\": {\n    //hold default locale text\n    \"groups\": {\n      \"item\": \"item\",\n      \"items\": \"items\"\n    },\n    \"columns\": {},\n    \"data\": {\n      \"loading\": \"Loading\",\n      \"error\": \"Error\"\n    },\n    \"pagination\": {\n      \"page_size\": \"Page Size\",\n      \"page_title\": \"Show Page\",\n      \"first\": \"First\",\n      \"first_title\": \"First Page\",\n      \"last\": \"Last\",\n      \"last_title\": \"Last Page\",\n      \"prev\": \"Prev\",\n      \"prev_title\": \"Prev Page\",\n      \"next\": \"Next\",\n      \"next_title\": \"Next Page\",\n      \"all\": \"All\",\n      \"counter\": {\n        \"showing\": \"Showing\",\n        \"of\": \"of\",\n        \"rows\": \"rows\",\n        \"pages\": \"pages\"\n      }\n    },\n    \"headerFilters\": {\n      \"default\": \"filter column...\",\n      \"columns\": {}\n    }\n  }\n};\nclass Localize extends Module {\n  constructor(table) {\n    super(table);\n    this.locale = \"default\"; //current locale\n    this.lang = false; //current language\n    this.bindings = {}; //update events to call when locale is changed\n    this.langList = {};\n    this.registerTableOption(\"locale\", false); //current system language\n    this.registerTableOption(\"langs\", {});\n  }\n  initialize() {\n    this.langList = Helpers.deepClone(Localize.langs);\n    if (this.table.options.columnDefaults.headerFilterPlaceholder !== false) {\n      this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n    }\n    for (let locale in this.table.options.langs) {\n      this.installLang(locale, this.table.options.langs[locale]);\n    }\n    this.setLocale(this.table.options.locale);\n    this.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n    this.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n    this.registerTableFunction(\"getLang\", this.getLang.bind(this));\n  }\n\n  //set header placeholder\n  setHeaderFilterPlaceholder(placeholder) {\n    this.langList.default.headerFilters.default = placeholder;\n  }\n\n  //setup a lang description object\n  installLang(locale, lang) {\n    if (this.langList[locale]) {\n      this._setLangProp(this.langList[locale], lang);\n    } else {\n      this.langList[locale] = lang;\n    }\n  }\n  _setLangProp(lang, values) {\n    for (let key in values) {\n      if (lang[key] && typeof lang[key] == \"object\") {\n        this._setLangProp(lang[key], values[key]);\n      } else {\n        lang[key] = values[key];\n      }\n    }\n  }\n\n  //set current locale\n  setLocale(desiredLocale) {\n    desiredLocale = desiredLocale || \"default\";\n\n    //fill in any matching language values\n    function traverseLang(trans, path) {\n      for (var prop in trans) {\n        if (typeof trans[prop] == \"object\") {\n          if (!path[prop]) {\n            path[prop] = {};\n          }\n          traverseLang(trans[prop], path[prop]);\n        } else {\n          path[prop] = trans[prop];\n        }\n      }\n    }\n\n    //determining correct locale to load\n    if (desiredLocale === true && navigator.language) {\n      //get local from system\n      desiredLocale = navigator.language.toLowerCase();\n    }\n    if (desiredLocale) {\n      //if locale is not set, check for matching top level locale else use default\n      if (!this.langList[desiredLocale]) {\n        let prefix = desiredLocale.split(\"-\")[0];\n        if (this.langList[prefix]) {\n          console.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n          desiredLocale = prefix;\n        } else {\n          console.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n          desiredLocale = \"default\";\n        }\n      }\n    }\n    this.locale = desiredLocale;\n\n    //load default lang template\n    this.lang = Helpers.deepClone(this.langList.default || {});\n    if (desiredLocale != \"default\") {\n      traverseLang(this.langList[desiredLocale], this.lang);\n    }\n    this.dispatchExternal(\"localized\", this.locale, this.lang);\n    this._executeBindings();\n  }\n\n  //get current locale\n  getLocale(locale) {\n    return this.locale;\n  }\n\n  //get lang object for given local or current if none provided\n  getLang(locale) {\n    return locale ? this.langList[locale] : this.lang;\n  }\n\n  //get text for current locale\n  getText(path, value) {\n    var fillPath = value ? path + \"|\" + value : path,\n      pathArray = fillPath.split(\"|\"),\n      text = this._getLangElement(pathArray, this.locale);\n\n    // if(text === false){\n    // \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n    // }\n\n    return text || \"\";\n  }\n\n  //traverse langs object and find localized copy\n  _getLangElement(path, locale) {\n    var root = this.lang;\n    path.forEach(function (level) {\n      var rootPath;\n      if (root) {\n        rootPath = root[level];\n        if (typeof rootPath != \"undefined\") {\n          root = rootPath;\n        } else {\n          root = false;\n        }\n      }\n    });\n    return root;\n  }\n\n  //set update binding\n  bind(path, callback) {\n    if (!this.bindings[path]) {\n      this.bindings[path] = [];\n    }\n    this.bindings[path].push(callback);\n    callback(this.getText(path), this.lang);\n  }\n\n  //iterate through bindings and trigger updates\n  _executeBindings() {\n    for (let path in this.bindings) {\n      this.bindings[path].forEach(binding => {\n        binding(this.getText(path), this.lang);\n      });\n    }\n  }\n}\nLocalize.moduleName = \"localize\";\n\n//load defaults\nLocalize.langs = defaultLangs;\nclass Comms extends Module {\n  constructor(table) {\n    super(table);\n  }\n  initialize() {\n    this.registerTableFunction(\"tableComms\", this.receive.bind(this));\n  }\n  getConnections(selectors) {\n    var connections = [],\n      connection;\n    connection = TableRegistry.lookupTable(selectors);\n    connection.forEach(con => {\n      if (this.table !== con) {\n        connections.push(con);\n      }\n    });\n    return connections;\n  }\n  send(selectors, module, action, data) {\n    var connections = this.getConnections(selectors);\n    connections.forEach(connection => {\n      connection.tableComms(this.table.element, module, action, data);\n    });\n    if (!connections.length && selectors) {\n      console.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n    }\n  }\n  receive(table, module, action, data) {\n    if (this.table.modExists(module)) {\n      return this.table.modules[module].commsReceived(table, action, data);\n    } else {\n      console.warn(\"Inter-table Comms Error - no such module:\", module);\n    }\n  }\n}\nComms.moduleName = \"comms\";\nvar coreModules = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  LayoutModule: Layout,\n  LocalizeModule: Localize,\n  CommsModule: Comms\n});\nclass ModuleBinder {\n  constructor(tabulator, modules) {\n    this.bindStaticFunctionality(tabulator);\n    this.bindModules(tabulator, coreModules, true);\n    if (modules) {\n      this.bindModules(tabulator, modules);\n    }\n  }\n  bindStaticFunctionality(tabulator) {\n    tabulator.moduleBindings = {};\n    tabulator.extendModule = function (name, property, values) {\n      if (tabulator.moduleBindings[name]) {\n        var source = tabulator.moduleBindings[name][property];\n        if (source) {\n          if (typeof values == \"object\") {\n            for (let key in values) {\n              source[key] = values[key];\n            }\n          } else {\n            console.warn(\"Module Error - Invalid value type, it must be an object\");\n          }\n        } else {\n          console.warn(\"Module Error - property does not exist:\", property);\n        }\n      } else {\n        console.warn(\"Module Error - module does not exist:\", name);\n      }\n    };\n    tabulator.registerModule = function (modules) {\n      if (!Array.isArray(modules)) {\n        modules = [modules];\n      }\n      modules.forEach(mod => {\n        tabulator.registerModuleBinding(mod);\n      });\n    };\n    tabulator.registerModuleBinding = function (mod) {\n      tabulator.moduleBindings[mod.moduleName] = mod;\n    };\n    tabulator.findTable = function (query) {\n      var results = TableRegistry.lookupTable(query, true);\n      return Array.isArray(results) && !results.length ? false : results;\n    };\n\n    //ensure that module are bound to instantiated function\n    tabulator.prototype.bindModules = function () {\n      var orderedStartMods = [],\n        orderedEndMods = [],\n        unOrderedMods = [];\n      this.modules = {};\n      for (var name in tabulator.moduleBindings) {\n        let mod = tabulator.moduleBindings[name];\n        let module = new mod(this);\n        this.modules[name] = module;\n        if (mod.prototype.moduleCore) {\n          this.modulesCore.push(module);\n        } else {\n          if (mod.moduleInitOrder) {\n            if (mod.moduleInitOrder < 0) {\n              orderedStartMods.push(module);\n            } else {\n              orderedEndMods.push(module);\n            }\n          } else {\n            unOrderedMods.push(module);\n          }\n        }\n      }\n      orderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n      orderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n      this.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n    };\n  }\n  bindModules(tabulator, modules, core) {\n    var mods = Object.values(modules);\n    if (core) {\n      mods.forEach(mod => {\n        mod.prototype.moduleCore = true;\n      });\n    }\n    tabulator.registerModule(mods);\n  }\n}\nclass Alert extends CoreFeature {\n  constructor(table) {\n    super(table);\n    this.element = this._createAlertElement();\n    this.msgElement = this._createMsgElement();\n    this.type = null;\n    this.element.appendChild(this.msgElement);\n  }\n  _createAlertElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-alert\");\n    return el;\n  }\n  _createMsgElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-alert-msg\");\n    el.setAttribute(\"role\", \"alert\");\n    return el;\n  }\n  _typeClass() {\n    return \"tabulator-alert-state-\" + this.type;\n  }\n  alert(content) {\n    let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"msg\";\n    if (content) {\n      this.clear();\n      this.type = type;\n      while (this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n      this.msgElement.classList.add(this._typeClass());\n      if (typeof content === \"function\") {\n        content = content();\n      }\n      if (content instanceof HTMLElement) {\n        this.msgElement.appendChild(content);\n      } else {\n        this.msgElement.innerHTML = content;\n      }\n      this.table.element.appendChild(this.element);\n    }\n  }\n  clear() {\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n    this.msgElement.classList.remove(this._typeClass());\n  }\n}\nclass Tabulator {\n  constructor(element, options) {\n    this.options = {};\n    this.columnManager = null; // hold Column Manager\n    this.rowManager = null; //hold Row Manager\n    this.footerManager = null; //holder Footer Manager\n    this.alertManager = null; //hold Alert Manager\n    this.vdomHoz = null; //holder horizontal virtual dom\n    this.externalEvents = null; //handle external event messaging\n    this.eventBus = null; //handle internal event messaging\n    this.interactionMonitor = false; //track user interaction\n    this.browser = \"\"; //hold current browser type\n    this.browserSlow = false; //handle reduced functionality for slower browsers\n    this.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n    this.rtl = false; //check if the table is in RTL mode\n    this.originalElement = null; //hold original table element if it has been replaced\n\n    this.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n    this.dataLoader = false; //bind component functions\n\n    this.modules = {}; //hold all modules bound to this table\n    this.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n    this.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\n    this.deprecationAdvisor = new DeprecationAdvisor(this);\n    this.optionsList = new OptionsList(this, \"table constructor\");\n    this.initialized = false;\n    this.destroyed = false;\n    if (this.initializeElement(element)) {\n      this.initializeCoreSystems(options);\n\n      //delay table creation to allow event bindings immediately after the constructor\n      setTimeout(() => {\n        this._create();\n      });\n    }\n    TableRegistry.register(this); //register table for inter-device communication\n  }\n\n  initializeElement(element) {\n    if (typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement) {\n      this.element = element;\n      return true;\n    } else if (typeof element === \"string\") {\n      this.element = document.querySelector(element);\n      if (this.element) {\n        return true;\n      } else {\n        console.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n        return false;\n      }\n    } else {\n      console.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n      return false;\n    }\n  }\n  initializeCoreSystems(options) {\n    this.columnManager = new ColumnManager(this);\n    this.rowManager = new RowManager(this);\n    this.footerManager = new FooterManager(this);\n    this.dataLoader = new DataLoader(this);\n    this.alertManager = new Alert(this);\n    this.bindModules();\n    this.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n    this._clearObjectPointers();\n    this._mapDeprecatedFunctionality();\n    this.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n    this.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n    this.interactionMonitor = new InteractionManager(this);\n    this.dataLoader.initialize();\n    // this.columnManager.initialize();\n    // this.rowManager.initialize();\n    this.footerManager.initialize();\n  }\n\n  //convert deprecated functionality to new functions\n  _mapDeprecatedFunctionality() {\n    //all previously deprecated functionality removed in the 5.0 release\n  }\n  _clearSelection() {\n    this.element.classList.add(\"tabulator-block-select\");\n    if (window.getSelection) {\n      if (window.getSelection().empty) {\n        // Chrome\n        window.getSelection().empty();\n      } else if (window.getSelection().removeAllRanges) {\n        // Firefox\n        window.getSelection().removeAllRanges();\n      }\n    } else if (document.selection) {\n      // IE?\n      document.selection.empty();\n    }\n    this.element.classList.remove(\"tabulator-block-select\");\n  }\n\n  //create table\n  _create() {\n    this.externalEvents.dispatch(\"tableBuilding\");\n    this.eventBus.dispatch(\"table-building\");\n    this._rtlCheck();\n    this._buildElement();\n    this._initializeTable();\n    this._loadInitialData();\n    this.initialized = true;\n    this.externalEvents.dispatch(\"tableBuilt\");\n  }\n  _rtlCheck() {\n    var style = window.getComputedStyle(this.element);\n    switch (this.options.textDirection) {\n      case \"auto\":\n        if (style.direction !== \"rtl\") {\n          break;\n        }\n      case \"rtl\":\n        this.element.classList.add(\"tabulator-rtl\");\n        this.rtl = true;\n        break;\n      case \"ltr\":\n        this.element.classList.add(\"tabulator-ltr\");\n      default:\n        this.rtl = false;\n    }\n  }\n\n  //clear pointers to objects in default config object\n  _clearObjectPointers() {\n    this.options.columns = this.options.columns.slice(0);\n    if (Array.isArray(this.options.data) && !this.options.reactiveData) {\n      this.options.data = this.options.data.slice(0);\n    }\n  }\n\n  //build tabulator element\n  _buildElement() {\n    var element = this.element,\n      options = this.options,\n      newElement;\n    if (element.tagName === \"TABLE\") {\n      this.originalElement = this.element;\n      newElement = document.createElement(\"div\");\n\n      //transfer attributes to new element\n      var attributes = element.attributes;\n\n      // loop through attributes and apply them on div\n      for (var i in attributes) {\n        if (typeof attributes[i] == \"object\") {\n          newElement.setAttribute(attributes[i].name, attributes[i].value);\n        }\n      }\n\n      // replace table with div element\n      element.parentNode.replaceChild(newElement, element);\n      this.element = element = newElement;\n    }\n    element.classList.add(\"tabulator\");\n    element.setAttribute(\"role\", \"grid\");\n\n    //empty element\n    while (element.firstChild) element.removeChild(element.firstChild);\n\n    //set table height\n    if (options.height) {\n      options.height = isNaN(options.height) ? options.height : options.height + \"px\";\n      element.style.height = options.height;\n    }\n\n    //set table min height\n    if (options.minHeight !== false) {\n      options.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n      element.style.minHeight = options.minHeight;\n    }\n\n    //set table maxHeight\n    if (options.maxHeight !== false) {\n      options.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n      element.style.maxHeight = options.maxHeight;\n    }\n  }\n\n  //initialize core systems and modules\n  _initializeTable() {\n    var element = this.element,\n      options = this.options;\n    this.interactionMonitor.initialize();\n    this.columnManager.initialize();\n    this.rowManager.initialize();\n    this._detectBrowser();\n\n    //initialize core modules\n    this.modulesCore.forEach(mod => {\n      mod.initialize();\n    });\n\n    //build table elements\n    element.appendChild(this.columnManager.getElement());\n    element.appendChild(this.rowManager.getElement());\n    if (options.footerElement) {\n      this.footerManager.activate();\n    }\n    if (options.autoColumns && options.data) {\n      this.columnManager.generateColumnsFromRowData(this.options.data);\n    }\n\n    //initialize regular modules\n    this.modulesRegular.forEach(mod => {\n      mod.initialize();\n    });\n    this.columnManager.setColumns(options.columns);\n    this.eventBus.dispatch(\"table-built\");\n  }\n  _loadInitialData() {\n    this.dataLoader.load(this.options.data);\n  }\n\n  //deconstructor\n  destroy() {\n    var element = this.element;\n    this.destroyed = true;\n    TableRegistry.deregister(this); //deregister table from inter-device communication\n\n    this.eventBus.dispatch(\"table-destroy\");\n\n    //clear row data\n    this.rowManager.destroy();\n\n    //clear DOM\n    while (element.firstChild) element.removeChild(element.firstChild);\n    element.classList.remove(\"tabulator\");\n    this.externalEvents.dispatch(\"tableDestroyed\");\n  }\n  _detectBrowser() {\n    var ua = navigator.userAgent || navigator.vendor || window.opera;\n    if (ua.indexOf(\"Trident\") > -1) {\n      this.browser = \"ie\";\n      this.browserSlow = true;\n    } else if (ua.indexOf(\"Edge\") > -1) {\n      this.browser = \"edge\";\n      this.browserSlow = true;\n    } else if (ua.indexOf(\"Firefox\") > -1) {\n      this.browser = \"firefox\";\n      this.browserSlow = false;\n    } else if (ua.indexOf(\"Mac OS\") > -1) {\n      this.browser = \"safari\";\n      this.browserSlow = false;\n    } else {\n      this.browser = \"other\";\n      this.browserSlow = false;\n    }\n    this.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0, 4));\n  }\n  initGuard(func, msg) {\n    var stack, line;\n    if (this.options.debugInitialization && !this.initialized) {\n      if (!func) {\n        stack = new Error().stack.split(\"\\n\");\n        line = stack[0] == \"Error\" ? stack[2] : stack[1];\n        if (line[0] == \" \") {\n          func = line.trim().split(\" \")[1].split(\".\")[1];\n        } else {\n          func = line.trim().split(\"@\")[0];\n        }\n      }\n      console.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n    }\n    return this.initialized;\n  }\n\n  ////////////////// Data Handling //////////////////\n  //block table redrawing\n  blockRedraw() {\n    this.initGuard();\n    this.eventBus.dispatch(\"redraw-blocking\");\n    this.rowManager.blockRedraw();\n    this.columnManager.blockRedraw();\n    this.eventBus.dispatch(\"redraw-blocked\");\n  }\n\n  //restore table redrawing\n  restoreRedraw() {\n    this.initGuard();\n    this.eventBus.dispatch(\"redraw-restoring\");\n    this.rowManager.restoreRedraw();\n    this.columnManager.restoreRedraw();\n    this.eventBus.dispatch(\"redraw-restored\");\n  }\n\n  //load data\n  setData(data, params, config) {\n    this.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n    return this.dataLoader.load(data, params, config, false);\n  }\n\n  //clear data\n  clearData() {\n    this.initGuard();\n    this.dataLoader.blockActiveLoad();\n    this.rowManager.clearData();\n  }\n\n  //get table data array\n  getData(active) {\n    return this.rowManager.getData(active);\n  }\n\n  //get table data array count\n  getDataCount(active) {\n    return this.rowManager.getDataCount(active);\n  }\n\n  //replace data, keeping table in position with same sort\n  replaceData(data, params, config) {\n    this.initGuard();\n    return this.dataLoader.load(data, params, config, true, true);\n  }\n\n  //update table data\n  updateData(data) {\n    var responses = 0;\n    this.initGuard();\n    return new Promise((resolve, reject) => {\n      this.dataLoader.blockActiveLoad();\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      if (data && data.length > 0) {\n        data.forEach(item => {\n          var row = this.rowManager.findRow(item[this.options.index]);\n          if (row) {\n            responses++;\n            row.updateData(item).then(() => {\n              responses--;\n              if (!responses) {\n                resolve();\n              }\n            }).catch(e => {\n              reject(\"Update Error - Unable to update row\", item, e);\n            });\n          } else {\n            reject(\"Update Error - Unable to find row\", item);\n          }\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }\n  addData(data, pos, index) {\n    this.initGuard();\n    return new Promise((resolve, reject) => {\n      this.dataLoader.blockActiveLoad();\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      if (data) {\n        this.rowManager.addRows(data, pos, index).then(rows => {\n          var output = [];\n          rows.forEach(function (row) {\n            output.push(row.getComponent());\n          });\n          resolve(output);\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }\n\n  //update table data\n  updateOrAddData(data) {\n    var rows = [],\n      responses = 0;\n    this.initGuard();\n    return new Promise((resolve, reject) => {\n      this.dataLoader.blockActiveLoad();\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      if (data && data.length > 0) {\n        data.forEach(item => {\n          var row = this.rowManager.findRow(item[this.options.index]);\n          responses++;\n          if (row) {\n            row.updateData(item).then(() => {\n              responses--;\n              rows.push(row.getComponent());\n              if (!responses) {\n                resolve(rows);\n              }\n            });\n          } else {\n            this.rowManager.addRows(item).then(newRows => {\n              responses--;\n              rows.push(newRows[0].getComponent());\n              if (!responses) {\n                resolve(rows);\n              }\n            });\n          }\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }\n\n  //get row object\n  getRow(index) {\n    var row = this.rowManager.findRow(index);\n    if (row) {\n      return row.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching row found:\", index);\n      return false;\n    }\n  }\n\n  //get row object\n  getRowFromPosition(position) {\n    var row = this.rowManager.getRowFromPosition(position);\n    if (row) {\n      return row.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching row found:\", position);\n      return false;\n    }\n  }\n\n  //delete row from table\n  deleteRow(index) {\n    var foundRows = [];\n    this.initGuard();\n    if (!Array.isArray(index)) {\n      index = [index];\n    }\n\n    //find matching rows\n    for (let item of index) {\n      let row = this.rowManager.findRow(item, true);\n      if (row) {\n        foundRows.push(row);\n      } else {\n        console.error(\"Delete Error - No matching row found:\", item);\n        return Promise.reject(\"Delete Error - No matching row found\");\n      }\n    }\n\n    //sort rows into correct order to ensure smooth delete from table\n    foundRows.sort((a, b) => {\n      return this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n    });\n\n    //delete rows\n    foundRows.forEach(row => {\n      row.delete();\n    });\n    this.rowManager.reRenderInPosition();\n    return Promise.resolve();\n  }\n\n  //add row to table\n  addRow(data, pos, index) {\n    this.initGuard();\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    return this.rowManager.addRows(data, pos, index, true).then(rows => {\n      return rows[0].getComponent();\n    });\n  }\n\n  //update a row if it exists otherwise create it\n  updateOrAddRow(index, data) {\n    var row = this.rowManager.findRow(index);\n    this.initGuard();\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    if (row) {\n      return row.updateData(data).then(() => {\n        return row.getComponent();\n      });\n    } else {\n      return this.rowManager.addRows(data).then(rows => {\n        return rows[0].getComponent();\n      });\n    }\n  }\n\n  //update row data\n  updateRow(index, data) {\n    var row = this.rowManager.findRow(index);\n    this.initGuard();\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    if (row) {\n      return row.updateData(data).then(() => {\n        return Promise.resolve(row.getComponent());\n      });\n    } else {\n      console.warn(\"Update Error - No matching row found:\", index);\n      return Promise.reject(\"Update Error - No matching row found\");\n    }\n  }\n\n  //scroll to row in DOM\n  scrollToRow(index, position, ifVisible) {\n    var row = this.rowManager.findRow(index);\n    if (row) {\n      return this.rowManager.scrollToRow(row, position, ifVisible);\n    } else {\n      console.warn(\"Scroll Error - No matching row found:\", index);\n      return Promise.reject(\"Scroll Error - No matching row found\");\n    }\n  }\n  moveRow(from, to, after) {\n    var fromRow = this.rowManager.findRow(from);\n    this.initGuard();\n    if (fromRow) {\n      fromRow.moveToRow(to, after);\n    } else {\n      console.warn(\"Move Error - No matching row found:\", from);\n    }\n  }\n  getRows(active) {\n    return this.rowManager.getComponents(active);\n  }\n\n  //get position of row in table\n  getRowPosition(index) {\n    var row = this.rowManager.findRow(index);\n    if (row) {\n      return row.getPosition();\n    } else {\n      console.warn(\"Position Error - No matching row found:\", index);\n      return false;\n    }\n  }\n\n  /////////////// Column Functions  ///////////////\n  setColumns(definition) {\n    this.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n    this.columnManager.setColumns(definition);\n  }\n  getColumns(structured) {\n    return this.columnManager.getComponents(structured);\n  }\n  getColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    if (column) {\n      return column.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  getColumnDefinitions() {\n    return this.columnManager.getDefinitionTree();\n  }\n  showColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      column.show();\n    } else {\n      console.warn(\"Column Show Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  hideColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      column.hide();\n    } else {\n      console.warn(\"Column Hide Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  toggleColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      if (column.visible) {\n        column.hide();\n      } else {\n        column.show();\n      }\n    } else {\n      console.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n      return false;\n    }\n  }\n  addColumn(definition, before, field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    return this.columnManager.addColumn(definition, before, column).then(column => {\n      return column.getComponent();\n    });\n  }\n  deleteColumn(field) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      return column.delete();\n    } else {\n      console.warn(\"Column Delete Error - No matching column found:\", field);\n      return Promise.reject();\n    }\n  }\n  updateColumnDefinition(field, definition) {\n    var column = this.columnManager.findColumn(field);\n    this.initGuard();\n    if (column) {\n      return column.updateDefinition(definition);\n    } else {\n      console.warn(\"Column Update Error - No matching column found:\", field);\n      return Promise.reject();\n    }\n  }\n  moveColumn(from, to, after) {\n    var fromColumn = this.columnManager.findColumn(from),\n      toColumn = this.columnManager.findColumn(to);\n    this.initGuard();\n    if (fromColumn) {\n      if (toColumn) {\n        this.columnManager.moveColumn(fromColumn, toColumn, after);\n      } else {\n        console.warn(\"Move Error - No matching column found:\", toColumn);\n      }\n    } else {\n      console.warn(\"Move Error - No matching column found:\", from);\n    }\n  }\n\n  //scroll to column in DOM\n  scrollToColumn(field, position, ifVisible) {\n    return new Promise((resolve, reject) => {\n      var column = this.columnManager.findColumn(field);\n      if (column) {\n        return this.columnManager.scrollToColumn(column, position, ifVisible);\n      } else {\n        console.warn(\"Scroll Error - No matching column found:\", field);\n        return Promise.reject(\"Scroll Error - No matching column found\");\n      }\n    });\n  }\n\n  //////////// General Public Functions ////////////\n  //redraw list without updating data\n  redraw(force) {\n    this.initGuard();\n    this.columnManager.redraw(force);\n    this.rowManager.redraw(force);\n  }\n  setHeight(height) {\n    this.options.height = isNaN(height) ? height : height + \"px\";\n    this.element.style.height = this.options.height;\n    this.rowManager.initializeRenderer();\n    this.rowManager.redraw();\n  }\n\n  //////////////////// Event Bus ///////////////////\n\n  on(key, callback) {\n    this.externalEvents.subscribe(key, callback);\n  }\n  off(key, callback) {\n    this.externalEvents.unsubscribe(key, callback);\n  }\n  dispatchEvent() {\n    var args = Array.from(arguments);\n    args.shift();\n    this.externalEvents.dispatch(...arguments);\n  }\n\n  //////////////////// Alerts ///////////////////\n\n  alert(contents, type) {\n    this.initGuard();\n    this.alertManager.alert(contents, type);\n  }\n  clearAlert() {\n    this.initGuard();\n    this.alertManager.clear();\n  }\n\n  ////////////// Extension Management //////////////\n  modExists(plugin, required) {\n    if (this.modules[plugin]) {\n      return true;\n    } else {\n      if (required) {\n        console.error(\"Tabulator Module Not Installed: \" + plugin);\n      }\n      return false;\n    }\n  }\n  module(key) {\n    var mod = this.modules[key];\n    if (!mod) {\n      console.error(\"Tabulator module not installed: \" + key);\n    }\n    return mod;\n  }\n}\n\n//default setup options\nTabulator.defaultOptions = defaultOptions;\n\n//bind modules and static functionality\nnew ModuleBinder(Tabulator);\n\n//tabulator with all modules installed\n\nclass TabulatorFull extends Tabulator {}\n\n//bind modules and static functionality\nnew ModuleBinder(TabulatorFull, modules);\nclass PseudoRow {\n  constructor(type) {\n    this.type = type;\n    this.element = this._createElement();\n  }\n  _createElement() {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    return el;\n  }\n  getElement() {\n    return this.element;\n  }\n  getComponent() {\n    return false;\n  }\n  getData() {\n    return {};\n  }\n  getHeight() {\n    return this.element.outerHeight;\n  }\n  initialize() {}\n  reinitialize() {}\n  normalizeHeight() {}\n  generateCells() {}\n  reinitializeHeight() {}\n  calcHeight() {}\n  setCellHeight() {}\n  clearCellHeight() {}\n}\nexport { Accessor as AccessorModule, Ajax as AjaxModule, CalcComponent, CellComponent, Clipboard as ClipboardModule, ColumnCalcs as ColumnCalcsModule, ColumnComponent, DataTree as DataTreeModule, Download as DownloadModule, Edit$1 as EditModule, Export as ExportModule, Filter as FilterModule, Format as FormatModule, FrozenColumns as FrozenColumnsModule, FrozenRows as FrozenRowsModule, GroupComponent, GroupRows as GroupRowsModule, History as HistoryModule, HtmlTableImport as HtmlTableImportModule, Import as ImportModule, Interaction as InteractionModule, Keybindings as KeybindingsModule, Menu as MenuModule, Module, MoveColumns as MoveColumnsModule, MoveRows as MoveRowsModule, Mutator as MutatorModule, Page as PageModule, Persistence as PersistenceModule, Popup$1 as PopupModule, Print as PrintModule, PseudoRow, ReactiveData as ReactiveDataModule, Renderer, ResizeColumns as ResizeColumnsModule, ResizeRows as ResizeRowsModule, ResizeTable as ResizeTableModule, ResponsiveLayout as ResponsiveLayoutModule, RowComponent, SelectRow as SelectRowModule, Sort as SortModule, Tabulator, TabulatorFull, Tooltip as TooltipModule, Validate as ValidateModule };","map":{"version":3,"names":["CoreFeature","constructor","table","reloadData","data","silent","columnsChanged","dataLoader","load","undefined","langText","modules","localize","getText","arguments","langBind","bind","langLocale","getLocale","commsConnections","comms","getConnections","commsSend","send","layoutMode","layout","getMode","layoutRefresh","force","subscribe","eventBus","unsubscribe","subscribed","key","subscriptionChange","dispatch","chain","confirm","dispatchExternal","externalEvents","subscribedExternal","subscriptionChangeExternal","options","setOption","value","deprecationCheck","oldOption","newOption","deprecationAdvisor","check","deprecationCheckMsg","msg","checkMsg","deprecationMsg","module","Helpers","elVisible","el","offsetWidth","offsetHeight","elOffset","box","getBoundingClientRect","top","window","pageYOffset","document","documentElement","clientTop","left","pageXOffset","clientLeft","deepClone","obj","clone","list","length","objectProto","__proto__","arrayProto","Object","assign","Array","isArray","i","subject","match","copy","findIndex","item","unshift","Popup","element","parent","container","_lookupContainer","reversedX","childPopup","blurable","blurCallback","blurEventsBound","renderedCallback","visible","hideable","classList","add","blurEvent","hide","escEvent","_escapeCheck","destroyBinding","tableDestroyed","destroyed","popupContainer","querySelector","console","warn","_checkContainerIsParent","body","parentNode","renderCallback","callback","containerEventCoords","e","touch","MouseEvent","x","touches","pageX","y","pageY","parentOffset","elementPositionCoords","position","offset","containerOffset","show","origin","parentEl","coords","HTMLElement","style","appendChild","_fitToScreen","addEventListener","stopPropagation","scrollTop","right","Math","max","scrollHeight","parseInt","isVisible","hideOnBlur","setTimeout","rowManager","keyCode","blockHide","restoreHide","removeEventListener","removeChild","child","Module","name","_handler","initialize","registerTableOption","optionsList","register","registerColumnOption","columnManager","registerTableFunction","func","_this","initGuard","registerComponentFunction","component","handler","componentFunctionBinder","registerDataHandler","priority","registerDataPipelineHandler","registerDisplayHandler","registerDisplayPipelineHandler","displayRows","adjust","index","lookupIndex","displayPipeline","getDisplayRows","activeRows","refreshData","renderInPosition","refreshActiveData","footerAppend","footerManager","append","footerPrepend","prepend","footerRemove","remove","popup","menuEl","menuContainer","alert","content","type","alertManager","clearAlert","clear","defaultAccessors","Accessor","allowedTypes","initializeColumn","transformRow","column","config","forEach","charAt","toUpperCase","slice","accessor","definition","lookupAccessor","params","accessors","row","rowComponent","getComponent","traverse","colComponent","getFieldValue","setFieldValue","moduleName","defaultConfig","method","generateParamsList","prefix","output","concat","push","serializeParams","encoded","encodeURIComponent","join","urlBuilder","url","keys","toLowerCase","includes","defaultLoaderPromise","contentType","Promise","resolve","reject","urlGenerator","call","ajaxContentType","contentTypeFormatters","headers","Accept","mode","location","credentials","fetch","then","response","ok","json","catch","error","status","statusText","generateParamsList$1","defaultContentTypeFormatters","JSON","stringify","form","FormData","Ajax","loaderPromise","ajaxRequestFunc","ajaxURLGenerator","defaultURLGenerator","ajaxURL","setUrl","setDefaultConfig","ajaxConfig","getUrl","requestDataCheck","requestParams","requestData","ajaxParams","previousData","generateConfig","sendRequest","ajaxRequesting","ajaxResponse","defaultPasteActions","replace","rows","setData","update","updateOrAddData","insert","addData","defaultPasteParsers","clipboard","headerFindSuccess","columns","columnMap","split","find","title","trim","field","columnsByIndex","shift","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","clipboardCopyRowRange","plain","html","preventDefault","clipboardCopyFormatter","export","generateExportList","clipboardCopyConfig","clipboardCopyStyled","generateHTMLTable","generatePlainContent","clipboardData","originalEvent","reset","paste","setPasteParser","clipboardPasteParser","setPasteAction","clipboardPasteAction","rowData","col","getKey","range","internal","sel","textRange","getSelection","createRange","selectNodeContents","toString","removeAllRanges","addRange","selection","createTextRange","moveToElementText","select","execCommand","action","pasteActions","parser","pasteParsers","checkPaseOrigin","getPasteData","modExists","mutateData","mutator","valid","target","tagName","edit","currentCell","getData","CalcComponent","_row","Proxy","get","receiver","handle","transform","getElement","getTable","getCells","cells","cell","getCell","_getSelf","CellComponent","_cell","getValue","getOldValue","getInitialValue","initialValue","getRow","getField","getColumn","setValue","mutate","restoreOldValue","setValueActual","restoreInitialValue","checkHeight","Cell","oldValue","height","width","minWidth","loaded","build","generateElement","setWidth","_configureCell","createElement","className","setAttribute","vertAligns","bottom","middle","hozAligns","center","textAlign","hozAlign","vertAlign","display","alignItems","justifyContent","cssClass","classNames","_generateContents","val","innerHTML","Node","firstChild","cellRendered","containerOnly","layoutElement","changed","setValueProcessData","cellEdited","widthStyled","clearWidth","getWidth","setMinWidth","minWidthStyled","setMaxWidth","maxWidth","maxWidthStyled","reinitializeHeight","clearHeight","setHeight","heightStyled","getHeight","delete","redrawBlock","deleteCell","calcs","getIndex","getCellIndex","ColumnComponent","_column","getDefinition","getTitleDownload","isGroup","toggle","getSubColumns","getParentColumn","Column","scrollTo","scrollToColumn","move","to","after","toColumn","findColumn","moveColumn","getNextColumn","nextCol","nextColumn","getPrevColumn","prevCol","prevColumn","updateDefinition","updates","result","reinitializeWidth","rerenderColumns","defaultColumnOptions","def","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleDownload","titleFormatterRendered","mapDefinitions","setField","maxInitialWidth","widthFixed","newCol","attachColumn","checkColumnVisibility","registerColumnField","_initialize","columnHeaderVertAlign","defaults","columnDefaults","generate","defaultOptionList","checkDefinition","indexOf","nestedFieldSeparator","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","headerVertical","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","headerHozAlign","_buildColumnHeaderTitle","headerWordWrap","editableTitle","focus","text","_formatColumnHeaderTitle","contents","dataObj","structure","columnRendered","verticalAlign","alignment","parentHeight","getGroupElement","clientHeight","getHeadersElement","minHeight","clearVerticalAlign","paddingTop","getFirstColumn","getLastColumn","getColumns","getTopColumn","updateBranches","colDefs","responsiveToggle","verticalAlignHeaders","matchChildWidths","childWidth","splice","setWidthActual","isNaN","floor","clientWidth","min","checkCellHeights","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","getLeftOffset","offsetLeft","ceil","cellCount","deregisterColumn","generateCell","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","fitToData","setTo","addColumn","RowComponent","getPosition","watchPosition","scrollToRow","moveToRow","updateData","normalizeHeight","reformat","reinitialize","getNextRow","nextRow","getPrevRow","prevRow","Row","manualHeight","outerHeight","initialized","positionWatchers","created","create","detachElement","generateCells","deleteCells","renderer","renderRowCells","rowFormatter","rerenderRowCells","deinitialize","deinitializeHeight","children","maxHeight","rowHeight","resizableRows","updatedData","tempData","newRowData","parse","attrname","getColumnsByFieldRoot","findCell","nextDisplayRow","prevDisplayRow","before","toRow","findRow","moveRowActual","deleteActual","blockRedraw","detachModules","deleteRow","wipe","isDisplayed","setPosition","getGroup","group","defaultCalculations","avg","values","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","String","count","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","topRow","botRow","topInitialized","botInitialized","recalcAfterBlock","cellValueChanged","initializeColumnCheck","rowsUpdated","scrollHorizontal","recalcActiveRows","recalcActiveRowsRefresh","tableRedraw","visibleRows","adjustForScrollbar","restoreRedraw","resizeHolderWidth","getResults","userRecalc","headersElement","recalc","redraw","blockCheck","viewable","groupBy","recalcRowGroup","dataTreeStartExpanded","dataTree","recalcAll","topCalc","bottomCalc","columnCalcs","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","adjustTableSize","reinitializeCalcs","getContentsElement","insertBefore","nextSibling","scrollLeft","rowsToData","generateRow","frozenColumns","recalcGroup","groupRows","getRowGroup","groups","getChildGroups","generateRowData","generateTopRow","generateBottomRow","dataTreeChildColumnCalcs","open","getFilteredTreeChildren","pos","disable","enable","format","formatter","getFormatter","paramKey","hasTopCalcs","hasBottomCalcs","results","getGroups","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","rtl","paddingLeft","paddingRight","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","collapseRow","expandRow","toggleRow","getTreeParent","getRowChildren","addTreeChildRow","isRowExpanded","dummyEl","dataTreeChildField","dataTreeChildIndent","dataTreeBranchElement","dataTreeCollapseElement","tabIndex","dataTreeExpandElement","initializeRow","layoutRow","rowDelete","rowDataChanged","columnMoving","initializeElementField","tableRedrawing","getRows","reinitializeRowChildren","firstCol","getFirstVisibleColumn","dataTreeElementColumn","getTreeChildren","redrawNeeded","childArray","controlEl","generateControlElement","cloneNode","marginRight","marginLeft","getComputedStyle","getPropertyValue","oldControl","replaceChild","getChildren","allChildren","generateChildren","dataTreeFilter","filter","dataTreeSort","sort","subChildren","sub","childData","childRow","getTreeParentRoot","childIndex","findChildIndex","recurse","getChildField","csv","setFileContents","delimiter","fileContents","depth","bom","pdf","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","orientation","unit","parseRow","styles","colSpan","rowSpan","doc","jspdf","autoTable","didDrawPage","head","documentProcessing","xlsx","self","sheetName","workbook","XLSX","utils","book_new","tableFeatures","compression","compress","SheetNames","Sheets","generateSheet","merges","worksheet","s","c","r","a","b","j","Date","sheet_add_aoa","encode_range","sheetOnly","sheets","sheet","active","intercept","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","write","bookType","bookSST","jsonLines","defaultDownloaders","Download","mimeType","Blob","deprecatedOptionsCheck","download","downloadToTab","filename","interceptCallback","downloadFunc","buildLink","mime","triggerDownload","downloaders","downloadConfig","downloadRowRange","groupHeader","groupHeaderDownload","_group","getRowCount","newTab","blob","downloadEncoder","URL","createObjectURL","navigator","msSaveOrOpenBlob","click","commsReceived","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","ctrlKey","metaKey","maskAutoFill","placeholder","input","onRendered","success","cancel","editorParams","cellValue","search","padding","boxSizing","elementAttributes","getAttribute","preventScroll","selectContents","onChange","textarea","vertNav","verticalNavigation","whiteSpace","resize","heightNow","shiftKey","shiftEnterSubmit","selectionStart","stopImmediatePropagation","number","step","blurFunc","date","inputFormat","DT","DateTime","luxon","convertDate","newDatetime","isDateTime","fromISO","fromFormat","toFormat","luxDate","toISO","relatedTarget","rangeParent","explicitOriginalTarget","time","luxTime","datetime","luxDateTime","Edit","editor","_initializeParams","displayItems","currentItems","focusedItem","_createInputElement","listEl","_createListElement","initialValues","isFilter","filterTimeout","filtered","typing","listIteration","lastAction","filterTerm","actions","_deprecatedOptionsCheck","_initializeValue","_onRendered","listItemFormatter","sortValuesList","searchFunc","searchingPlaceholder","defaultValue","multiselect","headerFilterInitialListGen","cellEl","clickStop","_preventPopupBlur","_preventBlur","_inputKeyDown","_setListWidth","attribs","clearable","autocomplete","cursor","caretColor","_bindInputEvents","valueKeys","valueCheck","placeholderLoading","placeholderEmpty","filterDelay","emptyValue","freetext","filterFunc","filterRemote","allowEmpty","listOnEmpty","valuesLookup","valuesURL","_inputFocus","_inputClick","_inputBlur","_inputSearch","_inputKeyUp","rebuildOptionsList","_filter","clearTimeout","_filterList","_resolveValue","_clearChoices","_keyUp","_keyDown","_keySide","_keyEnter","_keyEsc","_keyHomeEnd","_keySelectLetter","_keyAutoCompLetter","_focusItem","_chooseItem","_cancel","_scrollToValue","character","fromCharCode","label","startsWith","scrollIntoView","behavior","block","inline","_generateOptions","_sortOptions","_buildList","_showList","isInteger","_filterOptions","iteration","_ajaxRequest","_uniqueColumnValues","valuesLookupField","_addPlaceholder","responseValues","_parseList","_clearList","term","getColumnByField","inputValues","entries","map","_ref","_parseListItem","option","level","_parseListGroup","itemParams","selected","original","sorter","_defaultSortFunction","_sortGroup","as","bs","a1","b1","L","rx","rd","emptyAlign","isFinite","test","_defaultFilterFunc","_filterItem","matches","_buildItem","itemFormatter","_groupClick","_itemClick","_styleItem","startVis","blur","star","maxStars","getElementsByTagName","size","stars","starsHolder","createElementNS","starChange","browser","buildStar","starHolder","nextStar","changeValue","overflow","textOverflow","progress","percent","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","backgroundColor","screenX","tickCross","tristate","indetermValue","indeterminateValue","indetermState","trueValueSet","falseValueSet","marginTop","indeterminate","checked","trueValue","checkedValue","falseValue","defaultEditors","Edit$1","mouseClick","recursionBlock","invalidEdit","editedCells","editors","getEditedCells","clearCellEdited","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","cellIsEdited","clearEdited","editCell","cellCancelEdit","bindEditor","updateCellClass","columnDeleteCheck","rowDeleteCheck","rowEditableCheck","cancelEdit","keybindingNavigateNext","newRow","addRow","edited","allowEdit","nextCell","findPrevEditableCell","findNextEditableCell","prevCell","editable","getCurrentCell","clearEditor","variableHeight","cellEditCancelled","contains","button","focusCellNoEvent","forceEdit","focusScrollAdjust","getRenderMode","topEdge","bottomEdge","rowEl","offsetTop","leftEdge","rightEdge","leftMargin","rightMargin","renderHorizontal","vDomPadLeft","rendered","cellEditor","validationMode","cellClick","cellEditing","editIndex","ExportRow","ExportColumn","Export","cloneTableStyle","colVisProp","getHtml","columnHeaders","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","generateTable","generateTableElement","getVisibleRows","selectRow","selectedRows","pagination","columnGroups","colData","processColumnGroup","maxDepth","groupData","subGroup","subGroupData","columnVisCheck","visProp","headerDepth","exportRows","parseColumnGroup","rowGroups","exportCols","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","generateHeaderElement","generateGroupElement","generateCalcElement","generateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","firstCell","lastCell","generator","cellStyle","cellWrapper","formatCells","formatExportValue","align","formatComponent","holder","htmlOutputConfig","from","props","lookup","fromStyle","prop","defaultFilters","=","filterVal","rowVal","filterParams","<","<=",">",">=","!=","regex","RegExp","like","keywords","separator","keyword","matchAll","starts","ends","endsWith","in","Filter","filterList","headerFilters","headerFilterColumns","prevHeaderFilterChangeCheck","tableInitialized","searchRows","searchData","userSetFilter","userRefreshFilter","userAddFilter","getFilters","userSetHeaderFilterFocus","userGetHeaderFilterValue","userSetHeaderFilterValue","getHeaderFilters","userRemoveFilter","userClearFilter","userClearHeaderFilter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","initializeColumnHeaderFilter","hideHeaderFilterElements","showHeaderFilterElements","tableBuilt","filterMode","remoteFilterParams","initialFilter","setFilter","initialHeaderFilter","refreshFilter","addFilter","removeFilter","all","clearFilter","clearHeaderFilter","headerFilter","filterType","tagType","attrType","filterChangeCheck","prevSuccess","emptyFunc","headerFilterFunc","filters","headerFilterFuncParams","fieldVal","colVal","trackChanges","generateHeaderFilterElement","filterElement","editorElement","typingTimer","searchTrigger","onRenderedCallback","headerElement","headerFilterEmptyCheck","headerFilterParams","headerFilterPlaceholder","contentsElement","headerPos","headerFilterLiveFilterDelay","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","ajax","filtersToArray","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","plaintext","formatterParams","emptyToSpace","sanitizeHTML","html$1","textarea$1","money","floatVal","sign","integer","decimal","rgx","decimalSym","thousandSym","thousand","negativeSign","symbolAfter","abs","link","urlPrefix","labelTraverse","path","labelField","urlField","image","src","urlSuffix","tickCross$1","empty","truthy","allowTruthy","tick","tickElement","cross","crossElement","datetime$1","outputFormat","invalid","invalidPlaceholder","isValid","timezone","setZone","datetimediff","suffix","humanize","now","diff","toHuman","star$1","starActive","starInactive","traffic","colors","color","percentValue","progress$1","legendAlign","legend","legendColor","barEl","barContainer","legendEl","holderEl","buttonTick","buttonCross","rownum","innerText","responsiveCollapse","responsiveLayout","toggleList","isOpen","rowSelection","checkbox","selectableRangeMode","toggleSelect","handleComplexRowClick","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","defaultFormatters","Format","formatValue","formatHeader","lookupFormatter","formatterPrint","print","formatterClipboard","formatterHtmlOutput","htmlOutput","formatters","mockCell","titleFormatter","titleFormatterParams","entityMap","FrozenColumns","leftColumns","rightColumns","initializationMode","layoutCell","reinitializeColumns","blockLayout","unblockLayout","margin","edge","frozenCheck","frozen","layoutCalcRows","layoutGroupCalcs","groupList","layoutColumnPosition","allCells","leftParents","marginValue","getColGroupParentElement","reinitializeRows","otherRows","getTableElement","_calcSpace","FrozenRows","freezeRow","unfreezeRow","isRowFrozen","detachRow","frozenRows","initializeRows","rowType","isFrozen","styleRows","styleRow","GroupComponent","groupManager","getParentGroup","toggleVisibility","Group","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","old","elementContents","arrowElement","createElements","addBindings","createValueGroups","elementsOnly","arrow","movableRows","moveRow","initializeGroupHeader","allowedValues","_createGroup","toggleElement","groupToggleElement","groupID","groupKey","headerGenerator","insertRow","conformRowData","toIndex","updateGroupRows","scrollHeader","getRowIndex","removeRow","groupValues","removeGroup","generateGroupHeaderContents","getHeadersAndRows","_visSet","groupClosedShowCalcs","prev","getPath","childNodes","GroupRows","displayHandler","setGroupBy","setGroupValues","setGroupStartOpen","setGroupHeader","userGetGroups","userGetGroupedData","rowGetGroup","_blockRedrawing","_restore_redrawing","groupUpdateOnCellEdit","cellUpdated","reassignRowToGroup","configureGroupSetup","rowDeleting","scrollHeaders","rowMoving","rowAddingIndex","rowSample","virtualRenderFill","groupStartOpen","langValue","lang","items","cols","getRealColumns","lookupFunc","prevValue","tableElement","assignRowToGroup","moveRowInArray","getGroupedData","toGroup","fromGroup","generateGroups","groupComponents","pullGroupListData","groupListData","rowCount","headerContent","countGroups","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","samePath","every","groupPath","groupId","checkBasicModeGroupHeaderWidth","onlyGroupHeaders","defaultUndoers","cellEdit","rowAdd","addRowActual","_rebindRow","rowMove","posFrom","defaultRedoers","newValue","posTo","History","history","clearComponentHistory","rowDeleted","rowAdded","rowMoved","undo","redo","getHistoryUndoSize","getHistoryRedoSize","undoers","redoers","oldRow","HtmlTableImport","fieldIndex","hasIndex","tableElementCheck","originalElement","parseTable","_extractOptions","_extractHeaders","_generateBlankHeaders","defaultOptions","attributes","optionsArr","attrib","_attribValue","_findCol","exists","textContent","registeredDefaults","csvImporter","inQuote","nextChar","json$1","arrayImporter","defaultImporters","array","Import","importFromFile","importFormat","loadDataCheck","loadData","importData","lookupImporter","structureData","err","importer","importers","extension","pickFile","extensions","accept","file","files","reader","FileReader","importReader","readAsArrayBuffer","readAsBinaryString","readAsDataURL","readAsText","onload","onerror","parsedData","autoColumns","structureArrayToObject","structureArrayToColumns","Interaction","eventMap","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowMouseDown","rowMouseUp","rowTap","rowDblTap","rowTapHold","cellDblClick","cellContext","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellMouseDown","cellMouseUp","cellTap","cellDblTap","cellTapHold","headerClick","headerDblClick","headerContext","headerMouseEnter","headerMouseLeave","headerMouseOver","headerMouseOut","headerMouseMove","headerMouseDown","headerMouseUp","headerTap","headerDblTap","headerTapHold","groupClick","groupDblClick","groupContext","groupMouseEnter","groupMouseLeave","groupMouseOver","groupMouseOut","groupMouseMove","groupMouseDown","groupMouseUp","groupTap","groupDblTap","groupTapHold","subscribers","touchSubscribers","columnSubscribers","touchWatchers","tap","tapDbl","tapHold","initializeExternalEvents","cellContentsSelectionFixer","selectNode","subscriptionChanged","added","subscribeTouchEvents","unsubscribeTouchEvents","handleTouch","noTouch","dispatchEvent","watchers","componentObj","defaultBindings","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","copyToClipboard","defaultActions","keyBlock","newPos","displayRowsCount","scrollMax","navLeft","navRight","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","bindings","keybindings","mergedBindings","mapBindings","bindEvents","clearBindings","binding","bindingList","mapBinding","symbolsList","ctrl","meta","symbols","code","checkBinding","Menu","nestedMenuBlock","currentComponent","rootPopup","initializeRowWatchers","initializeGroupWatchers","rowContextMenu","loadMenuEvent","on","rowClickMenu","rowDblClickMenu","groupContextMenu","groupClickMenu","groupDblClickMenu","headerContextMenu","loadMenuTableColumnEvent","headerClickMenu","headerDblClickMenu","headerMenu","initializeColumnHeaderMenu","contextMenu","loadMenuTableCellEvent","clickMenu","dblClickMenu","icon","headerMenuIcon","headerMenuEl","menu","loadMenu","parentPopup","itemEl","disabled","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","movableColumns","colEl","mousemove","which","startMove","bindTouchEvents","startXMove","nextColWidth","prevColWidth","nextColWidthLast","prevColWidthLast","passive","moveToCol","_bindMouseMove","_unbindMouseMove","movingCells","moveColumnActual","columnHolder","xPos","scrollPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connection","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connections","connectedTable","connectedRow","movableRowsConnectedTables","movableRowsConnectedElements","initializeCell","mouseup","tableRowDrop","previousSibling","rowHandle","startYMove","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","elementRowDrop","connectionTables","query","prototype","querySelectorAll","dropEvent","tabulatorElementDropEvent","connect","disconnect","dropComplete","sender","movableRowsSender","senders","movableRowsReceiver","receivers","fromRow","fromTable","toTable","defaultMutators","Mutator","enabled","transformCell","mutateLink","lookupMutator","mutators","mutatorEdit","links","linkCell","pageSize","currentRow","currentPage","totalRows","totalPages","showingEl","valueEl","ofEl","totalEl","rowsEl","pages","defaultPageCounters","Page","progressiveLoad","pageCounterElement","pageCounter","page","remoteRowCountEstimate","initialLoad","dataChanging","pageSizes","setMaxPage","setPage","userSetPageToRow","userSetPageSize","getPageSize","previousPage","nextPage","getPage","getPageMax","setPageToRow","initialLoadComplete","calculatePageSizes","footerRedraw","paginationAddRow","rowAddingPosition","paginationMode","remotePageParams","_parseRemoteData","restOnRenderBefore","initializePageCounter","initializePaginator","initializeProgressive","scrollVertical","testElRow","testElCell","paginationSize","visibility","generatePageSizeSelectList","setPageSize","dir","loading","progressiveLoadScrollMargin","pagesElement","firstBut","prevBut","nextBut","lastBut","paginationSizeSelector","pageSizeSelect","counter","paginationCounter","pageCounters","hidden","pageSelectLabel","paginationCounterHolder","paginationElement","paginationCounterElement","paginationInitialPage","paginationButtonCount","setMaxRows","trigger","_setPageCounter","_setPageButtons","leftSize","rightSize","_generatePageButton","actualRowPageSize","start","end","actualStartRow","actualRows","finally","last_page","last_row","addRows","progressiveLoadDelay","footer","containerElement","scrollWidth","defaultReaders","local","id","localStorage","getItem","cookie","cookiePos","defaultWriters","setItem","expireDate","setDate","getDate","toUTCString","Persistence","defWatcherBlock","readFunc","writeFunc","localStorageTest","testKey","removeItem","persistence","persistenceMode","persistenceID","retrievedData","persistenceReaderFunc","readers","persistenceWriterFunc","writers","retrieveData","save","eventSave","getColumnLayout","setColumnLayout","sorters","initialSort","parseColumns","setColumns","mergeDefinition","getOwnPropertyDescriptor","defineProperty","set","current","oldCols","newCols","_findColumn","validateSorters","getSort","getGroupConfig","getPageConfig","definitions","excludedKeys","defStore","colDef","moduleInitOrder","Popup$1","_componentPopupCall","loadPopupEvent","rowContextPopup","rowClickPopup","rowDblClickPopup","groupContextPopup","groupClickPopup","groupDblClickPopup","headerContextPopup","loadPopupTableColumnEvent","headerClickPopup","headerDblClickPopup","headerPopup","initializeColumnHeaderPopup","contextPopup","loadPopupTableCellEvent","clickPopup","dblClickPopup","headerPopupIcon","headerPopupEl","loadPopup","contentsEl","Print","manualBlock","beforeprintEventHandler","afterprintEventHandler","printAsHtml","replaceTable","cleanup","destroy","printFullscreen","printConfig","printStyled","printRowRange","scrollX","scrollY","footerEl","tableEl","footerContent","printHeader","printFooter","printFormatter","ReactiveData","origFuncs","currentVersion","reactiveData","unblock","watchRow","watchData","unwatchData","version","enumerable","configurable","args","arg","apply","getRowFromDataObject","pop","newRows","startRow","reverse","oldRows","reRenderInPosition","writable","watchKey","watchTreeChildren","childField","rebuildTree","unwatchRow","ResizeColumns","startColumn","startWidth","latestX","initialNextColumn","layoutColumnHeader","initializeEventWatchers","layoutCellHandles","deInitializeComponent","resizeHandle","columnLayoutUpdated","deInitializeColumn","columnWidthUpdated","resizable","reinitializeColumn","frozenColumnOffset","frozenOffset","handleEl","nearestColumn","_checkResizability","handleDown","_mouseDown","oldWidth","parentElement","mouseMove","startDiff","moveDiff","blockedBefore","blockedAfter","resizableColumnFit","colWidth","browserSlow","mouseUp","ResizeRows","startHeight","prevHandle","prevHandleDown","screenY","ResizeTable","visibilityObserver","resizeObserver","containerObserver","tableHeight","tableWidth","containerHeight","containerWidth","autoResize","initialRedraw","tableStyle","IntersectionObserver","ResizeObserver","initializeVisibilityObserver","entry","browserMobile","nodeHeight","contentRect","nodeWidth","redrawTable","observe","fixedHeight","tableResized","isIntersecting","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","updateColumnVisibility","initializeResponsivity","generateCollapsedRowContent","responsiveLayoutCollapseFormatter","formatCollapsedData","responsiveLayoutCollapseStartOpen","responsive","order","generateCollapsedContent","hideColumn","colCount","showColumn","working","getFlexBaseWidth","headerVisible","activeRowsCount","renderEmptyScroll","generateCollapsedRowData","mockCellComponent","responsiveLayoutCollapseUseFormatters","titleData","valueData","node_content","titleHighlight","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","selectRows","deselectRows","getSelectedRows","getSelectedData","isRowSelected","selectable","clearSelectionData","rowRetrieve","selectablePersistence","_deselectRow","prevSelected","_rowSelectionChanged","endSelect","checkRowSelectability","_clearSelection","lastClickedRowIdx","getDisplayRowIndex","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","selectableCheck","_selectRow","rowMatch","rowInfo","selectableRollingSelection","checkboxEl","dataTreeSelectPropagate","childRowSelection","selectedRow","number$1","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","string","locale","localeCompare","datetime$2","date$1","time$1","boolean","el1","el2","calc","d","alphanum","defaultSorters","Sort","sortList","userSetSort","clearSort","sortMode","remoteSortParams","setSort","refreshSort","arrowEl","sorterParams","startingDir","headerSortStartingDir","headerSortTristate","headerSort","headerSortClickElement","headerSortElement","setColumnHeaderSortIcon","columnHeaderSortMulti","newSortList","findSorter","sortOrderReverse","sortListActual","rowComponents","clearColumnHeaders","sortObj","setColumnHeader","_sortItems","sortEl","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","Tooltip","tooltipSubscriber","headerSubscriber","timeout","popupInstance","headerTooltip","mousemoveCheck","mouseoutCheck","tooltip","clearPopup","loadTooltip","tooltipDelay","defaultValidators","parameters","float","numeric","minLength","maxLength","reg","unique","cellData","required","Validate","invalidCells","getInvalidCells","userClearCellValidation","userValidate","cellIsValid","clearValidation","cellValidate","columnValidate","rowValidate","editValidate","editorClear","editedClear","previousValue","validate","cancelled","validator","_extractValidator","substring","_buildValidator","validators","failedValidators","invalidIndex","debugEventsExternal","debugEventsInternal","debugInvalidOptions","debugInvalidComponentFuncs","debugInitialization","debugDeprecation","autoColumnsDefinitions","footerElement","textDirection","addRowPos","renderVertical","renderVerticalBuffer","scrollToRowPosition","scrollToRowIfVisible","scrollToColumnPosition","scrollToColumnIfVisible","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","dataLoaderLoading","dataLoaderError","dataLoaderErrorTimeout","dataSendParams","dataReceiveParams","OptionsList","msgType","userOptions","hasOwnProperty","Renderer","elementVertical","elementHorizontal","verticalFillMode","clearRows","clearColumns","reinitializeColumnWidths","renderRows","renderColumns","rerenderRows","scrollColumns","scrollRows","scrollToRowNearestTop","includingBuffer","render","rerender","ifVisible","rowIndex","BasicHorizontal","VirtualDomHorizontal","leftCol","rightCol","vDomScrollPosLeft","vDomScrollPosRight","vDomPadRight","fitDataColAvg","windowBuffer","isFitData","compatibilityCheck","layoutCheck","vertScrollListen","clearVisRowCache","dataChange","scroll","calcWindowBuffer","buffer","colPos","leftPos","rightPos","fitDataCheck","vdomHoz","reinitChanged","reinitializeRow","change","colEnd","addColRight","removeColLeft","addColLeft","removeColRight","colPositionAdjust","changes","fitDataColActualWidthCheck","ex","message","newWidth","widthDiff","appendCell","ColumnManager","blockHozScrollEvent","columnsByField","redrawBlockUpdate","initializeRenderer","createHeadersElement","createHeaderContentsElement","createHeaderElement","padVerticalScrollbar","renderClass","renderers","generateColumnsFromRowData","_addColumn","_reIndexColumns","nextToColumn","topColumn","parentIndex","nextEl","root","fieldRoot","getDefinitions","getDefinitionTree","getComponents","structured","_moveColumnInArray","updateRows","fromIndex","totalWidth","fixedWidth","resetScroll","BasicVertical","rowTop","VirtualDomVertical","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","paddingBottom","_virtualRenderFill","topOffset","tableEmpty","topDiff","bottomDiff","_addTopRow","vDomScrollHeight","_removeBottomRow","_addBottomRow","_removeTopRow","topFound","bottomRow","forceMove","topPad","rowsHeight","heightOccupied","topPadHeight","rowsCount","fillableSpace","addedRows","paddingAdjust","_quickNormalizeRowHeight","removableRows","RowManager","createHolderElement","createTableElement","heightFixer","placeholderContents","firstRender","renderMode","activeRowsPipeline","redrawBlockRestoreConfig","redrawBlockRenderInPosition","dataPipeline","scrollbarWidth","initializePlaceholder","leftDir","topDir","_positionPlaceholder","getRowFromPosition","_setDataActual","_wipeElements","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","regenerateRowPositions","refreshDisplayOnly","findAddRowPos","_clearPlaceholder","chainResult","clearData","findRowIndex","rowOnly","getDataCount","skipStage","stage","cascadeOrder","refreshPipelines","renderTable","layoutColumnsOnNewData","resetDisplayRows","setDisplayRows","scrollBarCheck","_clearTable","_showPlaceholder","initialHeight","otherHeight","external","event","createEvent","initEvent","Event","FooterManager","createContainerElement","initializeElement","activate","deactivate","InteractionManager","abortClasses","previousTargets","listeners","componentMap","pseudoTrackers","subscriber","pseudoTracking","buildListenerMap","bindSubscriptionWatchers","listenerMap","listener","components","bindPseudoEvents","pseudoMouseEnter","pseudoMouseLeave","leaveList","linkedKeys","comp","clearWatchers","updateEventListeners","track","composedPath","targets","findTargets","bindComponents","triggerEvents","abort","elTargets","targetMatches","previousTarget","closest","ComponentFunctionBinder","funcName","DataLoader","requestOrder","requestNo","alertLoader","mapParams","objectInvert","alertError","blockActiveLoad","shouldLoad","ExternalEventBus","debug","events","subscriptionNotifiers","_debugDispatch","_dispatch","_notifySubscriptionChange","notifiers","callResult","log","InternalEventBus","_debugChain","_chain","_debugConfirm","_confirm","fallback","confirmed","DeprecationAdvisor","_warnUser","TableRegistry","tables","deregister","lookupTable","matchElement","Tabulator","fitData","forced","fitDataGeneral","fitDataStretch","colsWidth","gap","lastCol","fitColumns","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","defaultModes","fitDataFill","fitDataTable","Layout","modes","dataChanged","defaultLangs","Localize","langList","langs","setHeaderFilterPlaceholder","installLang","setLocale","getLang","default","_setLangProp","desiredLocale","traverseLang","trans","language","_executeBindings","fillPath","pathArray","_getLangElement","rootPath","Comms","receive","selectors","con","tableComms","ModuleBinder","tabulator","bindStaticFunctionality","bindModules","coreModules","moduleBindings","extendModule","property","source","registerModule","mod","registerModuleBinding","findTable","orderedStartMods","orderedEndMods","unOrderedMods","moduleCore","modulesCore","modulesRegular","core","mods","Alert","_createAlertElement","msgElement","_createMsgElement","_typeClass","interactionMonitor","initializeCoreSystems","_create","_clearObjectPointers","_mapDeprecatedFunctionality","_rtlCheck","_buildElement","_initializeTable","_loadInitialData","direction","newElement","_detectBrowser","ua","userAgent","vendor","opera","stack","line","Error","replaceData","responses","foundRows","updateOrAddRow","updateRow","getRowPosition","getColumnDefinitions","toggleColumn","deleteColumn","updateColumnDefinition","fromColumn","off","plugin","TabulatorFull","PseudoRow","_createElement"],"sources":["C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\CoreFeature.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\Helpers.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\Popup.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\Module.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Accessor\\defaults\\accessors.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Accessor\\Accessor.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\defaults\\config.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\defaults\\urlGenerator.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\defaults\\loaderPromise.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\defaults\\contentTypeFormatters.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Ajax\\Ajax.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\defaults\\pasteActions.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\defaults\\pasteParsers.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Clipboard\\Clipboard.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\ColumnCalcs\\CalcComponent.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\cell\\CellComponent.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\cell\\Cell.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\column\\ColumnComponent.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\column\\defaults\\options.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\column\\Column.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\row\\RowComponent.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\row\\Row.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\ColumnCalcs\\defaults\\calculations.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\ColumnCalcs\\ColumnCalcs.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\DataTree\\DataTree.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\csv.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\json.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\pdf.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\xlsx.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\html.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders\\jsonLines.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\defaults\\downloaders.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Download\\Download.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\inputMask.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\input.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\textarea.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\number.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\range.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\date.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\time.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\datetime.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\List.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\select.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\list.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\autocomplete.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\star.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\progress.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors\\tickCross.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\defaults\\editors.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Edit\\Edit.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Export\\ExportRow.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Export\\ExportColumn.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Export\\Export.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Filter\\defaults\\filters.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Filter\\Filter.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\plaintext.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\html.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\textarea.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\money.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\link.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\image.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\tickCross.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\datetime.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\datetimediff.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\lookup.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\star.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\traffic.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\progress.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\color.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\buttonTick.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\buttonCross.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\rownum.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\handle.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\responsiveCollapse.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters\\rowSelection.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\defaults\\formatters.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Format\\Format.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\FrozenColumns\\FrozenColumns.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\FrozenRows\\FrozenRows.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\GroupRows\\GroupComponent.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\GroupRows\\Group.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\GroupRows\\GroupRows.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\defaults\\undoers.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\defaults\\redoers.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\History\\History.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\HtmlTableImport\\HtmlTableImport.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers\\csv.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers\\json.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers\\array.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\defaults\\importers.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Import\\Import.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Interaction\\Interaction.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Keybindings\\defaults\\bindings.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Keybindings\\defaults\\actions.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Keybindings\\Keybindings.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Menu\\Menu.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\MoveColumns\\MoveColumns.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\MoveRows\\MoveRows.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Mutator\\defaults\\mutators.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Mutator\\Mutator.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Page\\defaults\\pageCounters\\rows.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Page\\defaults\\pageCounters\\pages.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Page\\defaults\\pageCounters.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Page\\Page.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Persistence\\defaults\\readers.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Persistence\\defaults\\writers.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Persistence\\Persistence.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Popup\\Popup.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Print\\Print.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\ReactiveData\\ReactiveData.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\ResizeColumns\\ResizeColumns.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\ResizeRows\\ResizeRows.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\ResizeTable\\ResizeTable.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\ResponsiveLayout\\ResponsiveLayout.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\SelectRow\\SelectRow.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\number.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\string.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\datetime.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\date.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\time.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\boolean.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\array.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\exists.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters\\alphanum.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\defaults\\sorters.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Sort\\Sort.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Tooltip\\Tooltip.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Validate\\defaults\\validators.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Validate\\Validate.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\defaults\\options.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\OptionsList.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\Renderer.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\renderers\\BasicHorizontal.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\renderers\\VirtualDomHorizontal.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\ColumnManager.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\renderers\\BasicVertical.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\rendering\\renderers\\VirtualDomVertical.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\RowManager.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\FooterManager.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\InteractionMonitor.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\ComponentFunctionBinder.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\DataLoader.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\ExternalEventBus.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\InternalEventBus.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\DeprecationAdvisor.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\TableRegistry.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes\\fitData.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes\\fitDataGeneral.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes\\fitDataStretch.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes\\fitColumns.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\defaults\\modes.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Layout\\Layout.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Localize\\defaults\\langs.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Localize\\Localize.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\modules\\Comms\\Comms.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\ModuleBinder.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\tools\\Alert.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\Tabulator.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\TabulatorFull.js","C:\\code-challenge-react\\frontend\\node_modules\\tabulator-tables\\src\\js\\core\\row\\PseudoRow.js"],"sourcesContent":["export default class CoreFeature{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\t}\n\n\t//////////////////////////////////////////\n\t/////////////// DataLoad /////////////////\n\t//////////////////////////////////////////\n\n\treloadData(data, silent, columnsChanged){\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n\t}\n\n\t//////////////////////////////////////////\n\t///////////// Localization ///////////////\n\t//////////////////////////////////////////\n\n\tlangText(){\n\t\treturn this.table.modules.localize.getText(...arguments);\n\t}\n\n\tlangBind(){\n\t\treturn this.table.modules.localize.bind(...arguments);\n\t}\n\n\tlangLocale(){\n\t\treturn this.table.modules.localize.getLocale(...arguments);\n\t}\n\n\n\t//////////////////////////////////////////\n\t////////// Inter Table Comms /////////////\n\t//////////////////////////////////////////\n\n\tcommsConnections(){\n\t\treturn this.table.modules.comms.getConnections(...arguments);\n\t}\n\n\tcommsSend(){\n\t\treturn this.table.modules.comms.send(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Layout  /////////////////\n\t//////////////////////////////////////////\n\n\tlayoutMode(){\n\t\treturn this.table.modules.layout.getMode();\n\t}\n\n\tlayoutRefresh(force){\n\t\treturn this.table.modules.layout.layout(force);\n\t}\n\n\n\t//////////////////////////////////////////\n\t/////////////// Event Bus ////////////////\n\t//////////////////////////////////////////\n\n\tsubscribe(){\n\t\treturn this.table.eventBus.subscribe(...arguments);\n\t}\n\n\tunsubscribe(){\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.table.eventBus.subscribed(key);\n\t}\n\n\tsubscriptionChange(){\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\n\t}\n\n\tdispatch(){\n\t\treturn this.table.eventBus.dispatch(...arguments);\n\t}\n\n\tchain(){\n\t\treturn this.table.eventBus.chain(...arguments);\n\t}\n\n\tconfirm(){\n\t\treturn this.table.eventBus.confirm(...arguments);\n\t}\n\n\tdispatchExternal(){\n\t\treturn this.table.externalEvents.dispatch(...arguments);\n\t}\n\n\tsubscribedExternal(key){\n\t\treturn this.table.externalEvents.subscribed(key);\n\t}\n\n\tsubscriptionChangeExternal(){\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Options /////////////////\n\t//////////////////////////////////////////\n\n\toptions(key){\n\t\treturn this.table.options[key];\n\t}\n\n\tsetOption(key, value){\n\t\tif(typeof value !== \"undefined\"){\n\t\t\tthis.table.options[key] = value;\n\t\t}\n\n\t\treturn this.table.options[key];\n\t}\n\n\t//////////////////////////////////////////\n\t/////////// Deprecation Checks ///////////\n\t//////////////////////////////////////////\n\n\tdeprecationCheck(oldOption, newOption){\n\t\treturn this.table.deprecationAdvisor.check(oldOption, newOption);\n\t}\n\n\tdeprecationCheckMsg(oldOption, msg){\n\t\treturn this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n\t}\n\n\tdeprecationMsg(msg){\n\t\treturn this.table.deprecationAdvisor.msg(msg);\n\t}\n\t//////////////////////////////////////////\n\t//////////////// Modules /////////////////\n\t//////////////////////////////////////////\n\n\tmodule(key){\n\t\treturn this.table.module(key);\n\t}\n}","export default class Helpers{\n\n\tstatic elVisible(el){\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t}\n\n\tstatic elOffset(el){\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t}\n\n\tstatic deepClone(obj, clone, list = []){\n\t\tvar objectProto = {}.__proto__,\n\t\tarrayProto = [].__proto__;\n\n\t\tif (!clone){\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\t\t}\n\n\t\tfor(var i in obj) {\n\t\t\tlet subject = obj[i],\n\t\t\tmatch, copy;\n\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\n\t\t\t\tmatch = list.findIndex((item) => {\n\t\t\t\t\treturn item.subject === subject;\n\t\t\t\t});\n\n\t\t\t\tif(match > -1){\n\t\t\t\t\tclone[i] = list[match].copy;\n\t\t\t\t}else{\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n\n\t\t\t\t\tlist.unshift({subject, copy});\n\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from './Helpers.js';\n\nexport default class Popup extends CoreFeature{\n\tconstructor(table, element, parent){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = element;\n\t\tthis.container = this._lookupContainer();\n\t\t\n\t\tthis.parent = parent;\n\t\t\n\t\tthis.reversedX = false;\n\t\tthis.childPopup = null;\n\t\tthis.blurable = false;\n\t\tthis.blurCallback = null;\n\t\tthis.blurEventsBound = false;\n\t\tthis.renderedCallback = null;\n\t\t\n\t\tthis.visible = false;\n\t\tthis.hideable = true;\n\t\t\n\t\tthis.element.classList.add(\"tabulator-popup-container\");\n\t\t\n\t\tthis.blurEvent = this.hide.bind(this, false);\n\t\tthis.escEvent = this._escapeCheck.bind(this);\n\t\t\n\t\tthis.destroyBinding = this.tableDestroyed.bind(this);\n\t\tthis.destroyed = false;\n\t}\n\t\n\ttableDestroyed(){\n\t\tthis.destroyed = true;\n\t\tthis.hide(true);\n\t}\n\t\n\t_lookupContainer(){\n\t\tvar container = this.table.options.popupContainer;\n\t\t\n\t\tif(typeof container === \"string\"){\n\t\t\tcontainer = document.querySelector(container);\n\t\t\t\n\t\t\tif(!container){\n\t\t\t\tconsole.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t\t}\n\t\t}else if (container === true){\n\t\t\tcontainer = this.table.element;\n\t\t}\n\t\t\n\t\tif(container && !this._checkContainerIsParent(container)){\n\t\t\tcontainer = false;\n\t\t\tconsole.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t}\n\t\t\n\t\tif(!container){\n\t\t\tcontainer = document.body;\n\t\t}\n\t\t\n\t\treturn container;\n\t}\n\t\n\t_checkContainerIsParent(container, element = this.table.element){\n\t\tif(container === element){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n\t\t}\n\t}\n\t\n\trenderCallback(callback){\n\t\tthis.renderedCallback = callback;\n\t}\n\t\n\tcontainerEventCoords(e){\n\t\tvar touch = !(e instanceof MouseEvent);\n\t\t\n\t\tvar x = touch ? e.touches[0].pageX : e.pageX;\n\t\tvar y = touch ? e.touches[0].pageY : e.pageY;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tlet parentOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\tx -= parentOffset.left;\n\t\t\ty -= parentOffset.top;\n\t\t}\n\t\t\n\t\treturn {x, y};\n\t}\n\t\n\telementPositionCoords(element, position = \"right\"){\n\t\tvar offset = Helpers.elOffset(element),\n\t\tcontainerOffset, x, y;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tcontainerOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\toffset.left -= containerOffset.left;\n\t\t\toffset.top -= containerOffset.top;\n\t\t}\n\t\t\n\t\tswitch(position){\n\t\t\tcase \"right\":\n\t\t\t\tx = offset.left + element.offsetWidth;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"bottom\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top + element.offsetHeight;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"left\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"top\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"center\":\n\t\t\t\tx = offset.left + (element.offsetWidth / 2);\n\t\t\t\ty = offset.top + (element.offsetHeight / 2);\n\t\t\t\tbreak;\n\t\t\t\n\t\t}\n\t\t\n\t\treturn {x, y, offset};\n\t}\n\t\n\tshow(origin, position){\n\t\tvar x, y, parentEl, parentOffset, coords;\n\t\t\n\t\tif(this.destroyed || this.table.destroyed){\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tif(origin instanceof HTMLElement){\n\t\t\tparentEl = origin;\n\t\t\tcoords = this.elementPositionCoords(origin, position);\n\t\t\t\n\t\t\tparentOffset = coords.offset;\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t}else if(typeof origin === \"number\"){\n\t\t\tparentOffset = {top:0, left:0};\n\t\t\tx = origin;\n\t\t\ty = position;\n\t\t}else{\n\t\t\tcoords = this.containerEventCoords(origin);\n\t\t\t\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t\tthis.reversedX = false;\n\t\t}\n\t\t\n\t\tthis.element.style.top = y + \"px\";\n\t\tthis.element.style.left = x + \"px\";\n\t\t\n\t\tthis.container.appendChild(this.element);\n\t\t\n\t\tif(typeof this.renderedCallback === \"function\"){\n\t\t\tthis.renderedCallback();\n\t\t}\n\t\t\n\t\tthis._fitToScreen(x, y, parentEl, parentOffset, position);\n\t\t\n\t\tthis.visible = true;\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.destroyBinding);\n\t\t\n\t\tthis.element.addEventListener(\"mousedown\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_fitToScreen(x, y, parentEl, parentOffset, position){\n\t\tvar scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\t\t\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\n\t\t\tthis.element.style.left = \"\";\n\t\t\t\n\t\t\tif(parentEl){\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - x) + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.reversedX = true;\n\t\t}\n\t\t\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tif((y + this.element.offsetHeight) > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\n\t\t\tif(parentEl){\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"bottom\":\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight) + \"px\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisVisible(){\n\t\treturn this.visible;\n\t}\n\t\n\thideOnBlur(callback){\n\t\tthis.blurable = true;\n\t\t\n\t\tif(this.visible){\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\t\t\t\t\tthis.subscribe(\"cell-editing\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\n\n\t\t\t\t\tthis.blurEventsBound = true;\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\t\n\t\t\tthis.blurCallback = callback;\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_escapeCheck(e){\n\t\tif(e.keyCode == 27){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\tblockHide(){\n\t\tthis.hideable = false;\n\t}\n\t\n\trestoreHide(){\n\t\tthis.hideable = true;\n\t}\n\t\n\thide(silent = false){\n\t\tif(this.visible && this.hideable){\n\t\t\tif(this.blurable && this.blurEventsBound){\n\t\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\twindow.removeEventListener(\"resize\", this.blurEvent);\n\t\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t\t\tthis.unsubscribe(\"cell-editing\", this.blurEvent);\n\n\t\t\t\tthis.blurEventsBound = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.childPopup){\n\t\t\t\tthis.childPopup.hide();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.childPopup = null;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tif(this.blurCallback && !silent){\n\t\t\t\tthis.blurCallback();\n\t\t\t}\n\t\t\t\n\t\t\tthis.unsubscribe(\"table-destroy\", this.destroyBinding);\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\tchild(element){\n\t\tif(this.childPopup){\n\t\t\tthis.childPopup.hide();\n\t\t}\n\t\t\n\t\tthis.childPopup = new Popup(this.table, element, this);\n\t\t\n\t\treturn this.childPopup;\n\t}\n}","import CoreFeature from './CoreFeature.js';\nimport Popup from './tools/Popup.js';\n\nclass Module extends CoreFeature{\n\t\n\tconstructor(table, name){\n\t\tsuper(table);\n\t\t\n\t\tthis._handler = null;\n\t}\n\t\n\tinitialize(){\n\t\t// setup module when table is initialized, to be overridden in module\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Options Registration ///////\n\t///////////////////////////////////\n\t\n\tregisterTableOption(key, value){\n\t\tthis.table.optionsList.register(key, value);\n\t}\n\t\n\tregisterColumnOption(key, value){\n\t\tthis.table.columnManager.optionsList.register(key, value);\n\t}\n\t\n\t///////////////////////////////////\n\t/// Public Function Registration ///\n\t///////////////////////////////////\n\t\n\tregisterTableFunction(name, func){\n\t\tif(typeof this.table[name] === \"undefined\"){\n\t\t\tthis.table[name] = (...args) => {\n\t\t\t\tthis.table.initGuard(name);\n\t\t\t\t\n\t\t\t\treturn func(...args);\n\t\t\t};\n\t\t}else{\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name);\n\t\t}\n\t}\n\t\n\tregisterComponentFunction(component, func, handler){\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Data Pipeline //////////\n\t///////////////////////////////////\n\t\n\tregisterDataHandler(handler, priority){\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tregisterDisplayHandler(handler, priority){\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tdisplayRows(adjust){\n\t\tvar index = this.table.rowManager.displayRows.length - 1, \n\t\tlookupIndex;\n\t\t\n\t\tif(this._handler){\n\t\t\tlookupIndex = this.table.rowManager.displayPipeline.findIndex((item) => {\n\t\t\t\treturn item.handler === this._handler;\n\t\t\t});\n\n\t\t\tif(lookupIndex > -1){\n\t\t\t\tindex = lookupIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(adjust){\n\t\t\tindex = index + adjust;\n\t\t}\n\n\t\tif(this._handler){\n\t\t\tif(index > -1){\n\t\t\t\treturn this.table.rowManager.getDisplayRows(index);\n\t\t\t}else{\n\t\t\t\treturn this.activeRows();\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tactiveRows(){\n\t\treturn this.table.rowManager.activeRows;\n\t}\n\t\n\trefreshData(renderInPosition, handler){\n\t\tif(!handler){\n\t\t\thandler = this._handler;\n\t\t}\n\t\t\n\t\tif(handler){\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Footer Management ////////\n\t///////////////////////////////////\n\t\n\tfooterAppend(element){\n\t\treturn this.table.footerManager.append(element);\n\t}\n\t\n\tfooterPrepend(element){\n\t\treturn this.table.footerManager.prepend(element);\n\t}\n\t\n\tfooterRemove(element){\n\t\treturn this.table.footerManager.remove(element);\n\t} \n\t\n\t///////////////////////////////////\n\t//////// Popups Management ////////\n\t///////////////////////////////////\n\t\n\tpopup(menuEl, menuContainer){\n\t\treturn new Popup(this.table, menuEl, menuContainer);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Alert Management ////////\n\t///////////////////////////////////\n\t\n\talert(content, type){\n\t\treturn this.table.alertManager.alert(content, type);\n\t}\n\t\n\tclearAlert(){\n\t\treturn this.table.alertManager.clear();\n\t}\n\t\n}\n\nexport default Module;","export default {};","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultAccessors from './defaults/accessors.js';\n\nclass Accessor extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n\t\tthis.registerColumnOption(\"accessor\");\n\t\tthis.registerColumnOption(\"accessorParams\");\n\t\tthis.registerColumnOption(\"accessorData\");\n\t\tthis.registerColumnOption(\"accessorDataParams\");\n\t\tthis.registerColumnOption(\"accessorDownload\");\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\n\t\tthis.registerColumnOption(\"accessorClipboard\");\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\n\t\tthis.registerColumnOption(\"accessorPrint\");\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n\t}\n\n\t//initialize column accessor\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\taccessor;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor:accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t}\n\n\tlookupAccessor(value){\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Accessor.accessors[value]){\n\t\t\t\t\taccessor = Accessor.accessors[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t}\n\n\t//apply accessor to row\n\ttransformRow(row, type){\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\trowComponent = row.getComponent();\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Helpers.deepClone(row.data || {});\n\n\t\tthis.table.columnManager.traverse(function(column){\n\t\t\tvar value, accessor, params, colComponent;\n\n\t\t\tif(column.modules.accessor){\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif(value != \"undefined\"){\n\t\t\t\t\t\tcolComponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}\n\n//load defaults\nAccessor.moduleName = \"accessor\";\nAccessor.accessors = defaultAccessors;\n\nexport default Accessor;","export default {\n\tmethod: \"GET\",\n};","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nfunction serializeParams(params){\n\tvar output = generateParamsList(params),\n\tencoded = [];\n\n\toutput.forEach(function(item){\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n}\n\nexport default function(url, config, params){\n\tif(url){\n\t\tif(params && Object.keys(params).length){\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n}","export default function(url, config, params){\n\tvar contentType;\n\n\treturn new Promise((resolve, reject) => {\n\t\t//set url\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif(config.method.toUpperCase() != \"GET\"){\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n\t\t\tif(contentType){\n\n\t\t\t\tfor(var key in contentType.headers){\n\t\t\t\t\tif(!config.headers){\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif(url){\n\t\t\t//configure headers\n\t\t\tif(typeof config.headers === \"undefined\"){\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif(typeof config.mode === \"undefined\"){\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif(config.mode == \"cors\"){\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\n\t\t\t\t}\n        \n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config)\n\t\t\t\t.then((response)=>{\n\t\t\t\t\tif(response.ok) {\n\t\t\t\t\t\tresponse.json()\n\t\t\t\t\t\t\t.then((data)=>{\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error)=>{\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n}","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nexport default {\n\t\"json\":{\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody:function(url, config, params){\n\t\t\treturn JSON.stringify(params);\n\t\t},\n\t},\n\t\"form\":{\n\t\theaders:{\n\t\t},\n\t\tbody:function(url, config, params){\n\n\t\t\tvar output = generateParamsList(params),\n\t\t\tform = new FormData();\n\n\t\t\toutput.forEach(function(item){\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t},\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultConfig from './defaults/config.js';\nimport defaultURLGenerator from './defaults/urlGenerator.js';\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\n\nclass Ajax extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {}; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\t\t\n\t\tthis.loaderPromise = false;\n\t\t\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\t\t\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\n\t\t\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\n\t}\n\t\n\t//initialize setup options\n\tinitialize(){\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n\t\t\n\t\tif(this.table.options.ajaxURL){\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\n\t\t\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\n\t}\n\t\n\trequestParams(data, config, silent, params){\n\t\tvar ajaxParams = this.table.options.ajaxParams;\n\t\t\n\t\tif(ajaxParams){\n\t\t\tif(typeof ajaxParams === \"function\"){\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\n\t\t\t}\n\t\t\t\n\t\t\tparams = Object.assign(params, ajaxParams);\n\t\t}\t\t\n\t\t\n\t\treturn params;\n\t}\n\t\n\trequestDataCheck(data, params, config, silent){\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\n\t}\n\t\n\trequestData(url, params, config, silent, previousData){\n\t\tvar ajaxConfig;\n\t\t\n\t\tif(!previousData && this.requestDataCheck(url)){\n\t\t\tif(url){\n\t\t\t\tthis.setUrl(url);\n\t\t\t}\n\t\t\t\n\t\t\tajaxConfig = this.generateConfig(config);\n\t\t\t\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\n\t\t}else{\n\t\t\treturn previousData;\n\t\t}\n\t}\n\t\n\tsetDefaultConfig(config = {}){\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\n\n\t\tif(typeof config == \"string\"){\n\t\t\tthis.config.method = config;\n\t\t}else{\n\t\t\tObject.assign(this.config, config);\n\t\t}\n\t}\n\t\n\t//load config object\n\tgenerateConfig(config = {}){\n\t\tvar ajaxConfig = Object.assign({}, this.config);\n\t\t\n\t\tif(typeof config == \"string\"){\n\t\t\tajaxConfig.method = config;\n\t\t}else{\n\t\t\tObject.assign(ajaxConfig, config);\n\t\t}\n\t\t\n\t\treturn ajaxConfig;\n\t}\n\t\n\t//set request url\n\tsetUrl(url){\n\t\tthis.url = url;\n\t}\n\t\n\t//get request url\n\tgetUrl(){\n\t\treturn this.url;\n\t}\n\t\n\t//send ajax request\n\tsendRequest(url, params, config){\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\n\t\t\treturn this.loaderPromise(url, config, params)\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tif(this.table.options.ajaxResponse){\n\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n}\n\nAjax.moduleName = \"ajax\";\n\n//load defaults\nAjax.defaultConfig = defaultConfig;\nAjax.defaultURLGenerator = defaultURLGenerator;\nAjax.defaultLoaderPromise = defaultLoaderPromise;\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\n\nexport default Ajax;","export default {\n\treplace:function(rows){\n\t\treturn this.table.setData(rows);\n\t},\n\tupdate:function(rows){\n\t\treturn this.table.updateOrAddData(rows);\n\t},\n\tinsert:function(rows){\n\t\treturn this.table.addData(rows);\n\t},\n};","export default {\n\ttable:function(clipboard){\n\t\tvar data = [],\n\t\theaderFindSuccess = true,\n\t\tcolumns = this.table.columnManager.columns,\n\t\tcolumnMap = [],\n\t\trows = [];\n\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\n\t\tclipboard.forEach(function(row){\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\n\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function(value){\n\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\n\t\t\t\tif(column){\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t}else{\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//check if column headers are present by field\n\t\t\tif(!headerFindSuccess){\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\n\t\t\t\tdata[0].forEach(function(value){\n\t\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t}else{\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(!headerFindSuccess){\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//remove header row if found\n\t\t\tif(headerFindSuccess){\n\t\t\t\tdata.shift();\n\t\t\t}\n\n\t\t\tdata.forEach(function(item){\n\t\t\t\tvar row = {};\n\n\t\t\t\titem.forEach(function(value, i){\n\t\t\t\t\tif(columnMap[i]){\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n};","import Module from '../../core/Module.js';\n\nimport defaultPasteActions from './defaults/pasteActions.js';\nimport defaultPasteParsers from './defaults/pasteParsers.js';\n\nclass Clipboard extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = true;\n\t\tthis.pasteParser = function(){};\n\t\tthis.pasteAction = function(){};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n\t\tthis.registerColumnOption(\"clipboard\");\n\t\tthis.registerColumnOption(\"titleClipboard\");\n\t}\n\n\tinitialize(){\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif(this.mode === true || this.mode === \"copy\"){\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif(!this.blocked){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif(this.customSelection){\n\t\t\t\t\t\tplain = this.customSelection;\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\n\t\t\t\t\t\tlist = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n\n\t\t\t\t\t\thtml = this.table.modules.export.generateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\n\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.mode === true || this.mode === \"paste\"){\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\n\t\t\t\tthis.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n\t}\n\n\treset(){\n\t\tthis.blocked = true;\n\t\tthis.customSelection = false;\n\t}\n\n\tgeneratePlainContent (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach((row) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tif(row.type === \"group\"){\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tif(col.value === null){\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t}\n\n\tcopy (range, internal) {\n\t\tvar sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t//PASTE EVENT HANDLING\n\tsetPasteAction(action){\n\n\t\tswitch(typeof action){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\n\n\t\t\t\tif(!this.pasteAction){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPasteParser(parser){\n\t\tswitch(typeof parser){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\n\n\t\t\t\tif(!this.pasteParser){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaste(e){\n\t\tvar data, rowData, rows;\n\n\t\tif(this.checkPaseOrigin(e)){\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif(rowData){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif(this.table.modExists(\"mutator\")){\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\n\t\t\t}\n\t\t}\n\t}\n\n\tmutateData(data){\n\t\tvar output = [];\n\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t}else{\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\n\tcheckPaseOrigin(e){\n\t\tvar valid = true;\n\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t}\n\n\tgetPasteData(e){\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nClipboard.moduleName = \"clipboard\";\n\n//load defaults\nClipboard.pasteActions = defaultPasteActions;\nClipboard.pasteParsers = defaultPasteParsers;\n\nexport default Clipboard;","class CalcComponent{\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n}\n\nexport default CalcComponent;","//public cell object\nexport default class CellComponent {\n\n\tconstructor (cell){\n\t\tthis._cell = cell;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetValue(){\n\t\treturn this._cell.getValue();\n\t}\n\n\tgetOldValue(){\n\t\treturn this._cell.getOldValue();\n\t}\n\n\tgetInitialValue(){\n\t\treturn this._cell.initialValue;\n\t}\n\n\tgetElement(){\n\t\treturn this._cell.getElement();\n\t}\n\n\tgetRow(){\n\t\treturn this._cell.row.getComponent();\n\t}\n\n\tgetData(){\n\t\treturn this._cell.row.getData();\n\t}\n\n\tgetField(){\n\t\treturn this._cell.column.getField();\n\t}\n\n\tgetColumn(){\n\t\treturn this._cell.column.getComponent();\n\t}\n\n\tsetValue(value, mutate){\n\t\tif(typeof mutate == \"undefined\"){\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t}\n\n\trestoreOldValue(){\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t}\n\n\trestoreInitialValue(){\n\t\tthis._cell.setValueActual(this._cell.initialValue);\n\t}\n\n\tcheckHeight(){\n\t\tthis._cell.checkHeight();\n\t}\n\n\tgetTable(){\n\t\treturn this._cell.table;\n\t}\n\n\t_getSelf(){\n\t\treturn this._cell;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport CellComponent from './CellComponent.js';\n\nexport default class Cell extends CoreFeature{\n\tconstructor(column, row){\n\t\tsuper(column.table);\n\n\t\tthis.table = column.table;\n\t\tthis.column = column;\n\t\tthis.row = row;\n\t\tthis.element = null;\n\t\tthis.value = null;\n\t\tthis.initialValue;\n\t\tthis.oldValue = null;\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\t\tthis.build();\n\t}\n\n\t//////////////// Setup Functions /////////////////\n\t//generate element\n\tbuild(){\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\t\tthis.initialValue = this.value;\n\t}\n\n\tgenerateElement(){\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = \"tabulator-cell\";\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\t}\n\n\t_configureCell(){\n\t\tvar element = this.element,\n\t\tfield = this.column.getField(),\n\t\tvertAligns = {\n\t\t\ttop:\"flex-start\",\n\t\t\tbottom:\"flex-end\",\n\t\t\tmiddle:\"center\",\n\t\t},\n\t\thozAligns = {\n\t\t\tleft:\"flex-start\",\n\t\t\tright:\"flex-end\",\n\t\t\tcenter:\"center\",\n\t\t};\n\n\t\t//set text alignment\n\t\telement.style.textAlign = this.column.hozAlign;\n\n\t\tif(this.column.vertAlign){\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n\n\t\t\tif(this.column.hozAlign){\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif(field){\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\t\tif(this.column.definition.cssClass){\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.dispatch(\"cell-init\", this);\n\n\t\t//hide cell if not visible\n\t\tif(!this.column.visible){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//generate cell contents\n\t_generateContents(){\n\t\tvar val;\n\n\t\tval = this.chain(\"cell-format\", this, null, () => {\n\t\t\treturn this.element.innerHTML = this.value;\n\t\t});\n\n\t\tswitch(typeof val){\n\t\t\tcase \"object\":\n\t\t\t\tif(val instanceof Node){\n\n\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\t\t\t\tthis.element.appendChild(val);\n\t\t\t\t}else{\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif(val != null){\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.element.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.element.innerHTML = val;\n\t\t}\n\t}\n\n\tcellRendered(){\n\t\tthis.dispatch(\"cell-rendered\", this);\n\t}\n\n\t//////////////////// Getters ////////////////////\n\tgetElement(containerOnly){\n\t\tif(!this.loaded){\n\t\t\tthis.loaded = true;\n\t\t\tif(!containerOnly){\n\t\t\t\tthis.layoutElement();\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tgetValue(){\n\t\treturn this.value;\n\t}\n\n\tgetOldValue(){\n\t\treturn this.oldValue;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tsetValue(value, mutate, force){\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\n\n\t\t\tthis.cellRendered();\n\n\t\t\tif(this.column.definition.cellEdited){\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\n\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValueProcessData(value, mutate, force){\n\t\tvar changed = false;\n\n\t\tif(this.value !== value || force){\n\n\t\t\tchanged = true;\n\n\t\t\tif(mutate){\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tsetValueActual(value){\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tthis.dispatch(\"cell-value-save-before\", this);\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tthis.dispatch(\"cell-value-save-after\", this);\n\n\t\tif(this.loaded){\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\n\tlayoutElement(){\n\t\tthis._generateContents();\n\n\t\tthis.dispatch(\"cell-layout\", this);\n\t}\n\n\tsetWidth(){\n\t\tthis.width = this.column.width;\n\t\tthis.element.style.width = this.column.widthStyled;\n\t}\n\n\tclearWidth(){\n\t\tthis.width = \"\";\n\t\tthis.element.style.width = \"\";\n\t}\n\n\tgetWidth(){\n\t\treturn this.width || this.element.offsetWidth;\n\t}\n\n\tsetMinWidth(){\n\t\tthis.minWidth = this.column.minWidth;\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t}\n\n\tsetMaxWidth(){\n\t\tthis.maxWidth = this.column.maxWidth;\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\n\t}\n\n\tcheckHeight(){\n\t\t// var height = this.element.css(\"height\");\n\t\tthis.row.reinitializeHeight();\n\t}\n\n\tclearHeight(){\n\t\tthis.element.style.height = \"\";\n\t\tthis.height = null;\n\n\t\tthis.dispatch(\"cell-height\", this, \"\");\n\t}\n\n\tsetHeight(){\n\t\tthis.height = this.row.height;\n\t\tthis.element.style.height = this.row.heightStyled;\n\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\n\t}\n\n\tgetHeight(){\n\t\treturn this.height || this.element.offsetHeight;\n\t}\n\n\tshow(){\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n\t}\n\n\thide(){\n\t\tthis.element.style.display = \"none\";\n\t}\n\n\tdelete(){\n\t\tthis.dispatch(\"cell-delete\", this);\n\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\t\tthis.column.deleteCell(this);\n\t\tthis.row.deleteCell(this);\n\t\tthis.calcs = {};\n\t}\n\n\tgetIndex(){\n\t\treturn this.row.getCellIndex(this);\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n","import Column from './Column.js';\n\n//public column object\nexport default class ColumnComponent {\n\tconstructor (column){\n\t\tthis._column = column;\n\t\tthis.type = \"ColumnComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetElement(){\n\t\treturn this._column.getElement();\n\t}\n\n\tgetDefinition(){\n\t\treturn this._column.getDefinition();\n\t}\n\n\tgetField(){\n\t\treturn this._column.getField();\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this._column.getTitleDownload();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tisVisible(){\n\t\treturn this._column.visible;\n\t}\n\n\tshow(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.show();\n\t\t}\n\t}\n\n\thide(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.hide();\n\t\t}\n\t}\n\n\ttoggle(){\n\t\tif(this._column.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tdelete(){\n\t\treturn this._column.delete();\n\t}\n\n\tgetSubColumns(){\n\t\tvar output = [];\n\n\t\tif(this._column.columns.length){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetParentColumn(){\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._column;\n\t}\n\n\tscrollTo(){\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column);\n\t}\n\n\tgetTable(){\n\t\treturn this._column.table;\n\t}\n\n\tmove(to, after){\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif(toColumn){\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t}\n\n\tgetNextColumn(){\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t}\n\n\tgetPrevColumn(){\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t}\n\n\tupdateDefinition(updates){\n\t\treturn this._column.updateDefinition(updates);\n\t}\n\n\tgetWidth(){\n\t\treturn this._column.getWidth();\n\t}\n\n\tsetWidth(width){\n\t\tvar result;\n\n\t\tif(width === true){\n\t\t\tresult =  this._column.reinitializeWidth(true);\n\t\t}else{\n\t\t\tresult =  this._column.setWidth(width);\n\t\t}\n\n\t\tthis._column.table.columnManager.rerenderColumns(true);\n\n\t\treturn result;\n\t}\n}","export default {\n\t\"title\": undefined,\n\t\"field\": undefined,\n\t\"columns\": undefined,\n\t\"visible\": undefined,\n\t\"hozAlign\": undefined,\n\t\"vertAlign\": undefined,\n\t\"width\": undefined,\n\t\"minWidth\": 40,\n\t\"maxWidth\": undefined,\n\t\"maxInitialWidth\": undefined,\n\t\"cssClass\": undefined,\n\t\"variableHeight\": undefined,\n\t\"headerVertical\": undefined,\n\t\"headerHozAlign\": undefined,\n\t\"headerWordWrap\": false,\n\t\"editableTitle\": undefined,\n};","import CoreFeature from '../CoreFeature.js';\nimport ColumnComponent from './ColumnComponent.js';\nimport defaultOptions from './defaults/options.js';\n\nimport Cell from '../cell/Cell.js';\n\nclass Column extends CoreFeature{\n\n\tconstructor(def, parent){\n\t\tsuper(parent.table);\n\n\t\tthis.definition = def; //column definition\n\t\tthis.parent = parent; //hold parent object\n\t\tthis.type = \"column\"; //type of element\n\t\tthis.columns = []; //child columns\n\t\tthis.cells = []; //cells bound to this column\n\t\tthis.element = this.createElement(); //column header element\n\t\tthis.contentElement = false;\n\t\tthis.titleHolderElement = false;\n\t\tthis.titleElement = false;\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\t\tthis.isGroup = false;\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\n\t\t//multi dimensional filed handling\n\t\tthis.field =\"\";\n\t\tthis.fieldStructure = \"\";\n\t\tthis.getFieldValue = \"\";\n\t\tthis.setFieldValue = \"\";\n\n\t\tthis.titleDownload = null;\n\t\tthis.titleFormatterRendered = false;\n\n\t\tthis.mapDefinitions();\n\n\t\tthis.setField(this.definition.field);\n\n\t\tthis.modules = {}; //hold module variables;\n\n\t\tthis.width = null; //column width\n\t\tthis.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n\t\tthis.maxWidth = null; //column maximum width\n\t\tthis.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n\t\tthis.maxInitialWidth = null;\n\t\tthis.minWidth = null; //column minimum width\n\t\tthis.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\n\t\tthis.visible = true; //default visible state\n\n\t\tthis.component = null;\n\n\t\t//initialize column\n\t\tif(this.definition.columns){\n\n\t\t\tthis.isGroup = true;\n\n\t\t\tthis.definition.columns.forEach((def, i) => {\n\t\t\t\tvar newCol = new Column(def, this);\n\t\t\t\tthis.attachColumn(newCol);\n\t\t\t});\n\n\t\t\tthis.checkColumnVisibility();\n\t\t}else{\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\n\t\tthis._initialize();\n\t}\n\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\tswitch(this.table.options.columnHeaderVertAlign){\n\t\t\tcase \"middle\":\n\t\t\t\tel.style.justifyContent = \"center\";\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tel.style.justifyContent = \"flex-end\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn el;\n\t}\n\n\tcreateGroupElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\n\t\treturn el;\n\t}\n\n\tmapDefinitions(){\n\t\tvar defaults = this.table.options.columnDefaults;\n\n\t\t//map columnDefaults onto column definitions\n\t\tif(defaults){\n\t\t\tfor(let key in defaults){\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\n\t\t\t\t\tthis.definition[key] = defaults[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n\t}\n\n\tcheckDefinition(){\n\t\tObject.keys(this.definition).forEach((key) => {\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetField(field){\n\t\tthis.field = field;\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t}\n\n\t//register column position with column manager\n\tregisterColumnPosition(column){\n\t\tthis.parent.registerColumnPosition(column);\n\t}\n\n\t//register column position with column manager\n\tregisterColumnField(column){\n\t\tthis.parent.registerColumnField(column);\n\t}\n\n\t//trigger position registration\n\treRegisterPosition(){\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t}else{\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t}\n\n\t//build header element\n\t_initialize(){\n\t\tvar def = this.definition;\n\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\tif(def.headerVertical){\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\n\n\t\t\tif(def.headerVertical === \"flip\"){\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\n\t\tthis.contentElement = this._buildColumnHeaderContent();\n\n\t\tthis.element.appendChild(this.contentElement);\n\n\t\tif(this.isGroup){\n\t\t\tthis._buildGroupHeader();\n\t\t}else{\n\t\t\tthis._buildColumnHeader();\n\t\t}\n\n\t\tthis.dispatch(\"column-init\", this);\n\t}\n\n\t//build header element for header\n\t_buildColumnHeader(){\n\t\tvar def = this.definition;\n\n\t\tthis.dispatch(\"column-layout\", this);\n\n\t\t//set column visibility\n\t\tif(typeof def.visible != \"undefined\"){\n\t\t\tif(def.visible){\n\t\t\t\tthis.show(true);\n\t\t\t}else{\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}\n\n\t\t//assign additional css classes to column header\n\t\tif(def.cssClass){\n\t\t\tvar classNames = def.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tif(def.field){\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\n\t\t//set min width if present\n\t\tthis.setMinWidth(parseInt(def.minWidth));\n\n\t\tif (def.maxInitialWidth) {\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\n\t\t}\n\t\t\n\t\tif(def.maxWidth){\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\n\t\t}\n\n\t\tthis.reinitializeWidth();\n\n\t\t//set horizontal text alignment\n\t\tthis.hozAlign = this.definition.hozAlign;\n\t\tthis.vertAlign = this.definition.vertAlign;\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t}\n\n\t_buildColumnHeaderContent(){\n\t\tvar contentElement = document.createElement(\"div\");\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\n\t\tthis.titleHolderElement = document.createElement(\"div\");\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\n\t\tcontentElement.appendChild(this.titleHolderElement);\n\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\n\n\t\treturn contentElement;\n\t}\n\n\t//build title element of column\n\t_buildColumnHeaderTitle(){\n\t\tvar def = this.definition;\n\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\t\t\n\t\tif(def.headerWordWrap){\n\t\t\ttitleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n\t\t}\n\n\t\tif(def.editableTitle){\n\t\t\tvar titleElement = document.createElement(\"input\");\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\n\t\t\ttitleElement.addEventListener(\"change\", () => {\n\t\t\t\tdef.title = titleElement.value;\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n\t\t\t});\n\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\n\t\t\t}\n\n\t\t}else{\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\n\t\treturn titleHolderElement;\n\t}\n\n\t_formatColumnHeaderTitle(el, title){\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\n\t\t\treturn title;\n\t\t});\n\n\t\tswitch(typeof contents){\n\t\t\tcase \"object\":\n\t\t\t\tif(contents instanceof Node){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = \"\";\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tel.innerHTML = contents;\n\t\t}\n\t}\n\n\t//build header element for column group\n\t_buildGroupHeader(){\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\n\t\t//asign additional css classes to column header\n\t\tif(this.definition.cssClass){\n\t\t\tvar classNames = this.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\n\t\tthis.element.appendChild(this.groupElement);\n\t}\n\n\t//flat field lookup\n\t_getFlatData(data){\n\t\treturn data[this.field];\n\t}\n\n\t//nested field lookup\n\t_getNestedData(data){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length,\n\t\toutput;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tdataObj = dataObj[structure[i]];\n\n\t\t\toutput = dataObj;\n\n\t\t\tif(!dataObj){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//flat field set\n\t_setFlatData(data, value){\n\t\tif(this.field){\n\t\t\tdata[this.field] = value;\n\t\t}\n\t}\n\n\t//nested field set\n\t_setNestedData(data, value){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tif(i == length -1){\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t}else{\n\t\t\t\tif(!dataObj[structure[i]]){\n\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\t//attach column to this group\n\tattachColumn(column){\n\t\tif(this.groupElement){\n\t\t\tthis.columns.push(column);\n\t\t\tthis.groupElement.appendChild(column.getElement());\n\n\t\t\tcolumn.columnRendered();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t}\n\n\t//vertically align header in column\n\tverticalAlign(alignment, height){\n\n\t\t//calculate height of column header and group holder element\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n\t\tthis.element.style.height = parentHeight + \"px\";\n\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\n\n\t\tif(this.isGroup){\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t}\n\n\t\t//vertically align cell contents\n\t\t// if(!this.isGroup && alignment !== \"top\"){\n\t\t// \tif(alignment === \"bottom\"){\n\t\t// \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t// \t}else{\n\t\t// \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n\t\t// \t}\n\t\t// }\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t}\n\n\t//clear vertical alignment\n\tclearVerticalAlign(){\n\t\tthis.element.style.paddingTop = \"\";\n\t\tthis.element.style.height = \"\";\n\t\tthis.element.style.minHeight = \"\";\n\t\tthis.groupElement.style.minHeight = \"\";\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\n\t\tthis.dispatch(\"column-height\", this, \"\");\n\t}\n\n\t//// Retrieve Column Information ////\n\t//return column header element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return column group element\n\tgetGroupElement(){\n\t\treturn this.groupElement;\n\t}\n\n\t//return field name\n\tgetField(){\n\t\treturn this.field;\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this.titleDownload;\n\t}\n\n\t//return the first column in a group\n\tgetFirstColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return the last column in a group\n\tgetLastColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return all columns in a group\n\tgetColumns(traverse){\n\t\tvar columns = [];\n\n\t\tif(traverse){\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumns.push(column);\n\t\t\t\t\t\n\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t});\n\t\t}else{\n\t\t\tcolumns = this.columns;\n\t\t}\n\t\t\n\t\treturn columns;\n\t}\n\n\t//return all columns in a group\n\tgetCells(){\n\t\treturn this.cells;\n\t}\n\n\t//retrieve the top column in a group of columns\n\tgetTopColumn(){\n\t\tif(this.parent.isGroup){\n\t\t\treturn this.parent.getTopColumn();\n\t\t}else{\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t//return column definition object\n\tgetDefinition(updateBranches){\n\t\tvar colDefs = [];\n\n\t\tif(this.isGroup && updateBranches){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\n\t\treturn this.definition;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tcheckColumnVisibility(){\n\t\tvar visible = false;\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tif(column.visible){\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\n\t\tif(visible){\n\t\t\tthis.show();\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t}else{\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//show column\n\tshow(silent, responsiveToggle){\n\t\tif(!this.visible){\n\t\t\tthis.visible = true;\n\n\t\t\tthis.element.style.display = \"\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.show();\n\t\t\t});\n\n\t\t\tif(!this.isGroup && this.width === null){\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\t//hide column\n\thide(silent, responsiveToggle){\n\t\tif(this.visible){\n\t\t\tthis.visible = false;\n\n\t\t\tthis.element.style.display = \"none\";\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.hide();\n\t\t\t});\n\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\tmatchChildWidths(){\n\t\tvar childWidth = 0;\n\n\t\tif(this.contentElement && this.columns.length){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveChild(child){\n\t\tvar index = this.columns.indexOf(child);\n\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\n\t\tif(!this.columns.length){\n\t\t\tthis.delete();\n\t\t}\n\t}\n\n\tsetWidth(width){\n\t\tthis.widthFixed = true;\n\t\tthis.setWidthActual(width);\n\t}\n\n\tsetWidthActual(width){\n\t\tif(isNaN(width)){\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\n\t\t}\n\n\t\twidth = Math.max(this.minWidth, width);\n\n\t\tif(this.maxWidth){\n\t\t\twidth = Math.min(this.maxWidth, width);\n\t\t}\n\n\t\tthis.width = width;\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\n\t\tthis.element.style.width = this.widthStyled;\n\n\t\tif(!this.isGroup){\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\n\t\tif(this.parent.isGroup){\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\n\t\tthis.dispatch(\"column-width\", this);\n\t}\n\n\tcheckCellHeights(){\n\t\tvar rows = [];\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tif(cell.row.heightInitialized){\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\n\t\t\t\t\trows.push(cell.row);\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t}else{\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.setCellHeight();\n\t\t});\n\t}\n\n\tgetWidth(){\n\t\tvar width = 0;\n\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\twidth = this.width;\n\t\t}\n\n\t\treturn width;\n\t}\n\n\tgetLeftOffset(){\n\t\tvar offset = this.element.offsetLeft;\n\n\t\tif(this.parent.isGroup){\n\t\t\toffset += this.parent.getLeftOffset();\n\t\t}\n\n\t\treturn offset;\n\t}\n\n\tgetHeight(){\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\n\t}\n\n\tsetMinWidth(minWidth){\n\t\tif(this.maxWidth && minWidth > this.maxWidth){\n\t\t\tminWidth = this.maxWidth;\n\n\t\t\tconsole.warn(\"the minWidth (\"+ minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\"+ this.maxWidthStyled + \")\");\n\t\t}\n\n\t\tthis.minWidth = minWidth;\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMinWidth();\n\t\t});\n\t}\n\n\tsetMaxWidth(maxWidth){\n\t\tif(this.minWidth && maxWidth < this.minWidth){\n\t\t\tmaxWidth = this.minWidth;\n\n\t\t\tconsole.warn(\"the maxWidth (\"+ maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\"+ this.minWidthStyled + \")\");\n\t\t}\n\n\t\tthis.maxWidth = maxWidth;\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMaxWidth();\n\t\t});\n\t}\n\n\tdelete(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(this.isGroup){\n\t\t\t\tthis.columns.forEach(function(column){\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.dispatch(\"column-delete\", this);\n\n\t\t\tvar cellCount = this.cells.length;\n\n\t\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\t\tthis.cells[0].delete();\n\t\t\t}\n\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\n\t\t\tthis.element = false;\n\t\t\tthis.contentElement = false;\n\t\t\tthis.titleElement = false;\n\t\t\tthis.groupElement = false;\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.removeChild(this);\n\t\t\t}\n\n\t\t\tthis.table.columnManager.deregisterColumn(this);\n\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tcolumnRendered(){\n\t\tif(this.titleFormatterRendered){\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\n\t\tthis.dispatch(\"column-rendered\", this);\n\t}\n\n\t//////////////// Cell Management /////////////////\n\t//generate cell for this column\n\tgenerateCell(row){\n\t\tvar cell = new Cell(this, row);\n\n\t\tthis.cells.push(cell);\n\n\t\treturn cell;\n\t}\n\n\tnextColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t}\n\n\t_nextVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t}\n\n\tprevColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t}\n\n\t_prevVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t}\n\n\treinitializeWidth(force){\n\t\tthis.widthFixed = false;\n\n\t\t//set width if present\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\n\t\t\t// maxInitialWidth ignored here as width specified\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\n\t\tthis.dispatch(\"column-width-fit-before\", this);\n\n\t\tthis.fitToData(force);\n\n\t\tthis.dispatch(\"column-width-fit-after\", this);\n\t}\n\n\t//set column width to maximum cell width for non group columns\n\tfitToData(force){\n\t\tif(this.isGroup){\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.widthFixed){\n\t\t\tthis.element.style.width = \"\";\n\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\n\t\tvar maxWidth = this.element.offsetWidth;\n\n\t\tif(!this.width || !this.widthFixed){\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tvar width = cell.getWidth();\n\n\t\t\t\tif(width > maxWidth){\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(maxWidth){\n\t\t\t\tvar setTo = maxWidth + 1;\n\t\t\t\tif (this.maxInitialWidth && !force) {\n\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\n\t\t\t\t}\n\t\t\t\tthis.setWidthActual(setTo);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateDefinition(updates){\n\t\tvar definition;\n\n\t\tif(!this.isGroup){\n\t\t\tif(!this.parent.isGroup){\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\n\t\t\t\t\t.then((column) => {\n\n\t\t\t\t\t\tif(definition.field == this.field){\n\t\t\t\t\t\t\tthis.field = false; //clear field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.delete()\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t}\n\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n\nColumn.defaultOptionList = defaultOptions;\n\nexport default Column;\n","//public row object\nexport default class RowComponent {\n\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\tgetIndex(){\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t}\n\n\tgetPosition(){\n\t\treturn this._row.getPosition();\n\t}\n\n\twatchPosition(callback){\n\t\treturn this._row.watchPosition(callback);\n\t}\n\n\tdelete(){\n\t\treturn this._row.delete();\n\t}\n\n\tscrollTo(){\n\t\treturn this._row.table.rowManager.scrollToRow(this._row);\n\t}\n\n\tmove(to, after){\n\t\tthis._row.moveToRow(to, after);\n\t}\n\n\tupdate(data){\n\t\treturn this._row.updateData(data);\n\t}\n\n\tnormalizeHeight(){\n\t\tthis._row.normalizeHeight(true);\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n\n\treformat(){\n\t\treturn this._row.reinitialize();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetNextRow(){\n\t\tvar row = this._row.nextRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n\n\tgetPrevRow(){\n\t\tvar row = this._row.prevRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport RowComponent from './RowComponent.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Row extends CoreFeature{\n\tconstructor (data, parent, type = \"row\"){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.parent = parent;\n\t\tthis.data = {};\n\t\tthis.type = type; //type of element\n\t\tthis.element = false;\n\t\tthis.modules = {}; //hold module variables;\n\t\tthis.cells = [];\n\t\tthis.height = 0; //hold element height\n\t\tthis.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n\t\tthis.manualHeight = false; //user has manually set row height\n\t\tthis.outerHeight = 0; //hold elements outer height\n\t\tthis.initialized = false; //element has been rendered\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\t\tthis.position = 0; //store position of element in row list\n\t\tthis.positionWatchers = [];\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.created = false;\n\t\t\n\t\tthis.setData(data);\n\t}\n\t\n\tcreate(){\n\t\tif(!this.created){\n\t\t\tthis.created = true;\n\t\t\tthis.generateElement();\n\t\t}\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\tthis.element = el;\n\t}\n\t\n\tgetElement(){\n\t\tthis.create();\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.createElement();\n\t\tthis.dispatch(\"row-init\", this);\n\t}\n\t\n\tgenerateCells(){\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t}\n\t\n\t//functions to setup on first render\n\tinitialize(force){\n\t\tthis.create();\n\t\t\n\t\tif(!this.initialized || force){\n\t\t\t\n\t\t\tthis.deleteCells();\n\t\t\t\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-before\", this);\n\t\t\t\n\t\t\tthis.generateCells();\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this);\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.normalizeHeight();\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout\", this);\n\t\t\t\n\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-after\", this);\n\t\t}else{\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this);\n\t\t}\n\t}\n\t\n\treinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t}\n\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tdeinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t}\n\t\n\treinitialize(children){\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(!this.manualHeight){\n\t\t\tthis.height = 0;\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.initialize(true);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"row-relayout\", this);\n\t}\n\t\n\t//get heights when doing bulk row style calcs in virtual DOM\n\tcalcHeight(force){\n\t\tvar maxHeight = 0,\n\t\tminHeight;\n\t\t\n\t\tif(this.table.options.rowHeight){\n\t\t\tthis.height = this.table.options.rowHeight;\n\t\t}else{\n\t\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tvar height = cell.getHeight();\n\t\t\t\tif(height > maxHeight){\n\t\t\t\t\tmaxHeight = height;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t\t}else{\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n\t\n\t//set of cells\n\tsetCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setHeight();\n\t\t});\n\t\t\n\t\tthis.heightInitialized = true;\n\t}\n\t\n\tclearCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.clearHeight();\n\t\t});\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(force){\n\t\tif(force && !this.table.options.rowHeight){\n\t\t\tthis.clearCellHeight();\n\t\t}\n\t\t\n\t\tthis.calcHeight(force);\n\t\t\n\t\tthis.setCellHeight();\n\t}\n\t\n\t//set height of rows\n\tsetHeight(height, force){\n\t\tif(this.height != height || force){\n\t\t\t\n\t\t\tthis.manualHeight = true;\n\t\t\t\n\t\t\tthis.height = height;\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\t\t\t\n\t\t\tthis.setCellHeight();\n\t\t\t\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\t//return rows outer Width\n\tgetWidth(){\n\t\treturn this.element.offsetWidth;\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Data Management /////////////////\n\tsetData(data){\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n\t\t\n\t\tthis.dispatch(\"row-data-init-after\", this);\n\t}\n\t\n\t//update the rows data\n\tupdateData(updatedData){\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\n\t\ttempData = {},\n\t\tnewRowData;\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof updatedData === \"string\"){\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\n\t\t\t\n\t\t\tif(this.subscribed(\"row-data-changing\")){\n\t\t\t\ttempData = Object.assign(tempData, this.data);\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\t\t\t\n\t\t\t//set data\n\t\t\tfor (let attrname in newRowData) {\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\n\t\t\t\n\t\t\t//update affected cells only\n\t\t\tfor (let attrname in updatedData) {\n\t\t\t\t\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n\t\t\t\t\n\t\t\t\tcolumns.forEach((column) => {\n\t\t\t\t\tlet cell = this.getCell(column.getField());\n\t\t\t\t\t\n\t\t\t\t\tif(cell){\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\n\t\t\t\t\t\tif(cell.getValue() !== value){\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(visible){\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//Partial reinitialization if visible\n\t\t\tif(visible){\n\t\t\t\tthis.normalizeHeight(true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.initialized = false;\n\t\t\t\tthis.height = 0;\n\t\t\t\tthis.heightStyled = \"\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\n\t\t\t\n\t\t\t//this.reinitialize();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tgetData(transform){\n\t\tif(transform){\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\tgetCell(column){\n\t\tvar match = false;\n\t\t\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\t\t\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\tmatch = this.cells.find(function(cell){\n\t\t\treturn cell.column === column;\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetCellIndex(findCell){\n\t\treturn this.cells.findIndex(function(cell){\n\t\t\treturn cell === findCell;\n\t\t});\n\t}\n\t\n\tfindCell(subject){\n\t\treturn this.cells.find((cell) => {\n\t\t\treturn cell.element === subject;\n\t\t});\n\t}\n\t\n\tgetCells(){\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\treturn this.cells;\n\t}\n\t\n\tnextRow(){\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tprevRow(){\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tmoveToRow(to, before){\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\t\t\n\t\tif(toRow){\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t}\n\t\n\t///////////////////// Actions  /////////////////////\n\tdelete(){\n\t\tthis.dispatch(\"row-delete\", this);\n\t\t\n\t\tthis.deleteActual();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\tdeleteActual(blockRedraw){\n\t\tthis.detachModules();\n\t\t\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\t\t\n\t\tthis.deleteCells();\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\tthis.element = false;\n\t\t\n\t\tthis.dispatch(\"row-deleted\", this);\n\t}\n\t\n\tdetachModules(){\n\t\tthis.dispatch(\"row-deleting\", this);\n\t}\n\t\n\tdeleteCells(){\n\t\tvar cellCount = this.cells.length;\n\t\t\n\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t}\n\t\n\twipe(){\n\t\tthis.detachModules();\n\t\tthis.deleteCells();\n\t\t\n\t\tif(this.element){\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.modules = {};\n\t}\n\n\tisDisplayed(){\n\t\treturn this.table.rowManager.getDisplayRows().includes(this);\n\t}\n\n\tgetPosition(){\n\t\treturn this.isDisplayed() ? this.position : false;\n\t}\n\n\tsetPosition(position){\n\t\tif(position != this.position){\n\t\t\tthis.position = position;\n\n\t\t\tthis.positionWatchers.forEach((callback) => {\n\t\t\t\tcallback(this.position);\n\t\t\t});\n\t\t}\n\t}\n\n\twatchPosition(callback){\n\t\tthis.positionWatchers.push(callback);\n\n\t\tcallback(this.position);\n\t}\n\t\n\tgetGroup(){\n\t\treturn this.modules.group || false;\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n","export default {\n\t\"avg\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn Number(sum) + Number(value);\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value > output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"min\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value < output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"sum\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tif(value){\n\t\t\t\t\toutput ++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n};","import Module from '../../core/Module.js';\n\nimport CalcComponent from './CalcComponent.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\nimport Row from '../../core/row/Row.js';\n\nimport defaultCalculations from './defaults/calculations.js';\n\nclass ColumnCalcs extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\t\t\n\t\tthis.blocked = false;\n\t\tthis.recalcAfterBlock = false;\n\t\t\n\t\tthis.registerTableOption(\"columnCalcs\", true);\n\t\t\n\t\tthis.registerColumnOption(\"topCalc\");\n\t\tthis.registerColumnOption(\"topCalcParams\");\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\n\t\tthis.registerColumnOption(\"bottomCalc\");\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\n\t\t\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t\t\n\t\tthis.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n\t\tthis.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n\n\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\t\n\ttableRedraw(force){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\n\t\tif(force){\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.blocked = true;\n\t\tthis.recalcAfterBlock = false;\n\t}\n\t\n\t\n\trestoreRedraw(){\n\t\tthis.blocked = false;\n\t\t\n\t\tif(this.recalcAfterBlock){\n\t\t\tthis.recalcAfterBlock = false;\n\t\t\tthis.recalcActiveRowsRefresh();\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tuserRecalc(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tblockCheck(){\n\t\tif(this.blocked){\n\t\t\tthis.recalcAfterBlock = true;\n\t\t}\n\t\t\n\t\treturn this.blocked;\n\t}\n\t\n\tvisibleRows(viewable, rows){\n\t\tif(this.topRow){\n\t\t\trows.unshift(this.topRow);\n\t\t}\n\t\t\n\t\tif(this.botRow){\n\t\t\trows.push(this.botRow);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.recalcRowGroup(row);\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRowsRefresh(){\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\n\t\t\tthis.recalcAll();\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRows(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\tcellValueChanged(cell){\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\n\t\t\tif(this.table.options.groupBy){\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\n\t\t\t\t\tthis.recalcActiveRows();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeColumnCheck(column){\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//initialize column calcs\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\tvar config = {\n\t\t\ttopCalcParams:def.topCalcParams || {},\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\n\t\t};\n\t\t\n\t\tif(def.topCalc){\n\t\t\t\n\t\t\tswitch(typeof def.topCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\n\t\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.topCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(def.bottomCalc){\n\t\t\tswitch(typeof def.bottomCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\n\t\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.botCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t//dummy functions to handle being mock column manager\n\tregisterColumnField(){}\n\t\n\tremoveCalcs(){\n\t\tvar changed = false;\n\t\t\n\t\tif(this.topInitialized){\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(this.botInitialized){\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.footerRemove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\treinitializeCalcs(){\n\t\tif(this.topCalcs.length){\n\t\t\tthis.initializeTopRow();\n\t\t}\n\n\t\tif(this.botCalcs.length){\n\t\t\tthis.initializeBottomRow();\n\t\t}\n\t}\n\t\n\tinitializeTopRow(){\n\t\tif(!this.topInitialized){\n\t\t\tthis.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t}\n\t\n\tinitializeBottomRow(){\n\t\tif(!this.botInitialized){\n\t\t\tthis.footerPrepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tif(this.botInitialized && this.botRow){\n\t\t\tthis.botElement.scrollLeft = left;\n\t\t}\n\t}\n\t\n\trecalc(rows){\n\t\tvar data, row;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(this.topInitialized || this.botInitialized){\n\t\t\t\tdata = this.rowsToData(rows);\n\t\t\t\t\n\t\t\t\tif(this.topInitialized){\n\t\t\t\t\tif(this.topRow){\n\t\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"top\", data);\n\t\t\t\t\tthis.topRow = row;\n\t\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.botInitialized){\n\t\t\t\t\tif(this.botRow){\n\t\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"bottom\", data);\n\t\t\t\t\tthis.botRow = row;\n\t\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t\tthis.botElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t\t\t\n\t\t\t\t//set resizable handles\n\t\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcRowGroup(row){\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t}\n\t\n\trecalcAll(){\n\t\tif(this.topCalcs.length || this.botCalcs.length){\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\n\t\t\t\t\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\n\t\t\t\t\n\t\t\t\tgroups.forEach((group) => {\n\t\t\t\t\tthis.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcGroup(group){\n\t\tvar data, rowData;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(group){\n\t\t\t\tif(group.calcs){\n\t\t\t\t\tif(group.calcs.bottom){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(group.calcs.top){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//generate top stats row\n\tgenerateTopRow(rows){\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t}\n\t//generate bottom stats row\n\tgenerateBottomRow(rows){\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t}\n\t\n\trowsToData(rows){\n\t\tvar data = [];\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tdata.push(row.getData());\n\t\t\t\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\n\t\t\t\tif(row.modules.dataTree && row.modules.dataTree.open){\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\n\t\t\t\t\tdata = data.concat(children);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\t//generate stats row\n\tgenerateRow(pos, data){\n\t\tvar rowData = this.generateRowData(pos, data),\n\t\trow;\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.disable();\n\t\t}\n\t\t\n\t\trow = new Row(rowData, this, \"calc\");\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.enable();\n\t\t}\n\t\t\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\t\t\n\t\trow.component = false;\n\t\t\n\t\trow.getComponent = () => {\n\t\t\tif(!row.component){\n\t\t\t\trow.component = new CalcComponent(row);\n\t\t\t}\n\t\t\t\n\t\t\treturn row.component;\n\t\t};\n\t\t\n\t\trow.generateCells = () => {\n\t\t\t\n\t\t\tvar cells = [];\n\t\t\t\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\t\n\t\t\t\t//set field name of mock column\n\t\t\t\tthis.genColumn.setField(column.getField());\n\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\n\t\t\t\t\n\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams:{}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//ensure css class definition is replicated to calculation cell\n\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\n\t\t\t\t\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(this.genColumn, row);\n\t\t\t\tcell.getElement();\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\t\t\t\t\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\t\t\t\t\n\t\t\t\tif(!column.visible){\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\trow.cells = cells;\n\t\t};\n\t\t\n\t\treturn row;\n\t}\n\t\n\t//generate stats row\n\tgenerateRowData(pos, data){\n\t\tvar rowData = {},\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\tparams, paramKey;\n\t\t\n\t\tcalcs.forEach(function(column){\n\t\t\tvar values = [];\n\t\t\t\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\n\t\t\t\tdata.forEach(function(item){\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\t\t\t\t\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowData;\n\t}\n\t\n\thasTopCalcs(){\n\t\treturn\t!!(this.topCalcs.length);\n\t}\n\t\n\thasBottomCalcs(){\n\t\treturn\t!!(this.botCalcs.length);\n\t}\n\t\n\t//handle table redraw\n\tredraw(){\n\t\tif(this.topRow){\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif(this.botRow){\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t}\n\t\n\t//return the calculated\n\tgetResults(){\n\t\tvar results = {},\n\t\tgroups;\n\t\t\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\t\t\t\n\t\t\tgroups.forEach((group) => {\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\n\t\t\t});\n\t\t}else{\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\n\t\t\t};\n\t\t}\n\t\t\n\t\treturn results;\n\t}\n\t\n\t//get results from a group\n\tgetGroupResults(group){\n\t\tvar groupObj = group._getSelf(),\n\t\tsubGroups = group.getSubGroups(),\n\t\tsubGroupResults = {},\n\t\tresults = {};\n\t\t\n\t\tsubGroups.forEach((subgroup) => {\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n\t\t});\n\t\t\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults,\n\t\t};\n\t\t\n\t\treturn results;\n\t}\n\t\n\tadjustForScrollbar(width){\n\t\tif(this.botRow){\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.botElement.style.paddingLeft = width + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.botElement.style.paddingRight = width + \"px\";\n\t\t\t}\n\t\t}\n\t}\n}\n\nColumnCalcs.moduleName = \"columnCalcs\";\n\n//load defaults\nColumnCalcs.calculations = defaultCalculations;\n\nexport default ColumnCalcs;","import Module from '../../core/Module.js';\n\nimport Row from '../../core/row/Row.js';\n\nimport RowComponent from '../../core/row/RowComponent.js';\n\nclass DataTree extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function(){};\n\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//selecting a parent row selects its children\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.dataTree){\n\t\t\tvar dummyEl = null,\n\t\t\toptions = this.table.options;\n\n\t\t\tthis.field = options.dataTreeChildField;\n\t\t\tthis.indent = options.dataTreeChildIndent;\n\n\t\t\tif(this.options(\"movableRows\")){\n\t\t\t\tconsole.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeBranchElement){\n\n\t\t\t\tif(options.dataTreeBranchElement === true){\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t\t}else{\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(options.dataTreeCollapseElement){\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t\t}\n\n\t\t\tif(options.dataTreeExpandElement){\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t\t}\n\n\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\n\t\t}\n\t}\n\n\ttableRedrawing(force){\n\t\tvar rows;\n\n\t\tif(force){\n\t\t\trows = this.table.rowManager.getRows();\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.reinitializeRowChildren(row);\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeElementField(){\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\n\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\t}\n\t\n\tgetRowChildren(row){\n\t\treturn this.getTreeChildren(row, true);\n\t}\n\n\tcolumnMoving(){\n\t\tvar rows = [];\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\trowDataChanged(row, visible, updatedData){\n\t\tif(this.redrawNeeded(updatedData)){\n\t\t\tthis.initializeRow(row);\n\n\t\t\tif(visible){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcellValueChanged(cell){\n\t\tvar field = cell.column.getField();\n\n\t\tif(field === this.elementField){\n\t\t\tthis.layoutRow(cell.row);\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren:children,\n\t\t};\n\t}\n\n\treinitializeRowChildren(row){\n\t\tvar children = this.getTreeChildren(row, false, true);\n\n\t\tchildren.forEach(function(child){\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n\n\tlayoutRow(row){\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\tel = cell.getElement(),\n\t\tconfig = row.modules.dataTree;\n\n\t\tif(config.branchEl){\n\t\t\tif(config.branchEl.parentNode){\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif(config.controlEl){\n\t\t\tif(config.controlEl.parentNode){\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif(config.index){\n\t\t\tif(this.branchEl){\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateControlElement(row, el){\n\t\tvar config = row.modules.dataTree,\n\t\toldControl = config.controlEl;\n\n\t\tel = el || row.getCells()[0].getElement();\n\n\t\tif(config.children !== false){\n\n\t\t\tif(config.open){\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.collapseRow(row);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif(oldControl && oldControl.parentNode === el){\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\n\t\t\t}else{\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRows(rows){\n\t\tvar output = [];\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif(row instanceof Row){\n\n\t\t\t\trow.create();\n\n\t\t\t\tconfig = row.modules.dataTree.children;\n\n\t\t\t\tif(!config.index && config.children !== false){\n\t\t\t\t\tchildren = this.getChildren(row);\n\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tchild.create();\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetChildren(row, allChildren){\n\t\tvar config = row.modules.dataTree,\n\t\tchildren = [],\n\t\toutput = [];\n\n\t\tif(config.children !== false && (config.open || allChildren)){\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\n\t\t\t\tthis.table.modules.sort.sort(children);\n\t\t\t}\n\n\t\t\tchildren.forEach((child) => {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = this.getChildren(child);\n\n\t\t\t\tsubChildren.forEach((sub) => {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgenerateChildren(row){\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif(!Array.isArray(childArray)){\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach((childData) => {\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\n\n\t\t\tchildRow.create();\n\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\n\t\t\tif(childRow.modules.dataTree.children){\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t}\n\n\texpandRow(row, silent){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\tcollapseRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\ttoggleRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tif(config.open){\n\t\t\t\tthis.collapseRow(row);\n\t\t\t}else{\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowExpanded(row){\n\t\treturn row.modules.dataTree.open;\n\t}\n\n\tgetTreeParent(row){\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t}\n\n\tgetTreeParentRoot(row){\n\t\treturn row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n\t}\n\n\tgetFilteredTreeChildren(row){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [], children;\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trowDelete(row){\n\t\tvar parent = row.modules.dataTree.parent,\n\t\tchildIndex;\n\n\t\tif(parent){\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif(!parent.data[this.field].length){\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.refreshData(true);\n\t}\n\n\taddTreeChildRow(row, data, top, index){\n\t\tvar childIndex = false;\n\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(!Array.isArray(row.data[this.field])){\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif(childIndex === false){\n\t\t\tif(top){\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t}else{\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.refreshData(true);\n\t}\n\n\tfindChildIndex(subject, parent){\n\t\tvar match = false;\n\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\tif(parent.modules.dataTree){\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else if(subject === null){\n\t\t\t\tmatch = false;\n\t\t\t}\n\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\tmatch = false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif(match){\n\n\t\t\tif(Array.isArray(parent.data[this.field])){\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif(match == -1){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t}\n\n\tgetTreeChildren(row, component, recurse){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [];\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\t\tif(recurse){\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetChildField(){\n\t\treturn this.field;\n\t}\n\n\tredrawNeeded(data){\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t}\n}\n\nDataTree.moduleName = \"dataTree\";\n\nexport default DataTree;","export default function(list, options = {}, setFileContents){\n\tvar delimiter = options.delimiter ? options.delimiter : \",\",\n\tfileContents = [],\n\theaders = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = [];\n\n\t\tswitch(row.type){\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"header\":\n\t\t\t\trow.columns.forEach((col, i) => {\n\t\t\t\t\tif(col && col.depth === 1){\n\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\n\t\t\t\t\tif(col){\n\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(headers.length){\n\t\tfileContents.unshift(headers.join(delimiter));\n\t}\n\n\tfileContents = fileContents.join(\"\\n\");\n\n\tif(options.bom){\n\t\tfileContents = \"\\ufeff\" + fileContents;\n\t}\n\n\tsetFileContents(fileContents, \"text/csv\");\n}\n","export default function(list, options, setFileContents){\n\tvar fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif(col){\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\tsetFileContents(fileContents, \"application/json\");\n}","export default function(list, options = {}, setFileContents){\n\tvar header = [],\n\tbody = [],\n\tautoTableParams = {},\n\trowGroupStyles = options.rowGroupStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 12,\n\t\tcellPadding: 6,\n\t\tfillColor: 220,\n\t},\n\trowCalcStyles = options.rowCalcStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 10,\n\t\tcellPadding: 4,\n\t\tfillColor: 232,\n\t},\n\tjsPDFParams = options.jsPDF || {},\n\ttitle = options.title ? options.title : \"\";\n\n\tif(!jsPDFParams.orientation){\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t}\n\n\tif(!jsPDFParams.unit){\n\t\tjsPDFParams.unit = \"pt\";\n\t}\n\n\t//parse row list\n\tlist.forEach((row) => {\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\theader.push(parseRow(row));\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\tbody.push(parseRow(row));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfunction parseRow(row, styles){\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach((col) =>{\n\t\t\tvar cell;\n\n\t\t\tif(col){\n\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcell = {\n\t\t\t\t\tcontent:col.value,\n\t\t\t\t\tcolSpan:col.width,\n\t\t\t\t\trowSpan:col.height,\n\t\t\t\t};\n\n\t\t\t\tif(styles){\n\t\t\t\t\tcell.styles = styles;\n\t\t\t\t}\n\n\t\t\t\trowData.push(cell);\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\n\t//configure PDF\n\tvar doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\tif(options.autoTable){\n\t\tif(typeof options.autoTable === \"function\"){\n\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t}else{\n\t\t\tautoTableParams = options.autoTable;\n\t\t}\n\t}\n\n\tif(title){\n\t\tautoTableParams.didDrawPage = function(data) {\n\t\t\tdoc.text(title, 40, 30);\n\t\t};\n\t}\n\n\tautoTableParams.head = header;\n\tautoTableParams.body = body;\n\n\tdoc.autoTable(autoTableParams);\n\n\tif(options.documentProcessing){\n\t\toptions.documentProcessing(doc);\n\t}\n\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\n","import CoreFeature from '../../../../core/CoreFeature.js';\n\nexport default function(list, options, setFileContents){\n\tvar self = this,\n\tsheetName = options.sheetName || \"Sheet1\",\n\tworkbook = XLSX.utils.book_new(),\n\ttableFeatures = new CoreFeature(this),\n\tcompression =  'compress' in options ? options.compress : true,\n\toutput;\n\n\tworkbook.SheetNames = [];\n\tworkbook.Sheets = {};\n\n\tfunction generateSheet(){\n\t\tvar rows = [],\n\t\tmerges = [],\n\t\tworksheet = {},\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\n\n\t\t//parse row list\n\t\tlist.forEach((row, i) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function(col, j){\n\n\t\t\t\tif(col){\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trows.push(rowData);\n\t\t});\n\n\t\t//convert rows to worksheet\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\n\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\tif(merges.length){\n\t\t\tworksheet[\"!merges\"] = merges;\n\t\t}\n\n\t\treturn worksheet;\n\t}\n\n\tif(options.sheetOnly){\n\t\tsetFileContents(generateSheet());\n\t\treturn;\n\t}\n\n\tif(options.sheets){\n\t\tfor(var sheet in options.sheets){\n\n\t\t\tif(options.sheets[sheet] === true){\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t}else{\n\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\n\t\t\t\t\ttype:\"xlsx\",\n\t\t\t\t\toptions:{sheetOnly:true},\n\t\t\t\t\tactive:self.active,\n\t\t\t\t\tintercept:function(data){\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}else{\n\t\tworkbook.SheetNames.push(sheetName);\n\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t}\n\n\tif(options.documentProcessing){\n\t\tworkbook = options.documentProcessing(workbook);\n\t}\n\n\t//convert workbook to binary array\n\tfunction s2ab(s) {\n\t\tvar buf = new ArrayBuffer(s.length);\n\t\tvar view = new Uint8Array(buf);\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\t\treturn buf;\n\t}\n\n\toutput = XLSX.write(workbook, {bookType:'xlsx', bookSST:true, type: 'binary', compression });\n\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\n}","export default function(list, options, setFileContents){\n\tif(this.modExists(\"export\", true)){\n\t\tsetFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n\t}\n}","export default function (list, options, setFileContents) {\n\tconst fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tconst item = {};\n\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(JSON.stringify(item));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}","import csv from './downloaders/csv.js';\nimport json from './downloaders/json.js';\nimport pdf from './downloaders/pdf.js';\nimport xlsx from './downloaders/xlsx.js';\nimport html from './downloaders/html.js';\nimport jsonLines from './downloaders/jsonLines.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tjsonLines:jsonLines,\n\tpdf:pdf,\n\txlsx:xlsx,\n\thtml:html,\n};","import Module from '../../core/Module.js';\n\nimport defaultDownloaders from './defaults/downloaders.js';\n\nclass Download extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerTableOption(\"downloadEncoder\", function(data, mimeType){\n\t\t\treturn new Blob([data],{type:mimeType});\n\t\t}); //function to manipulate download data\n\t\tthis.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n\t\tthis.registerColumnOption(\"download\");\n\t\tthis.registerColumnOption(\"titleDownload\");\n\t}\n\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\tthis.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\n\t}\t\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tdownloadToTab(type, filename, options, active){\n\t\tthis.download(type, filename, options, active, true);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//trigger file download\n\tdownload(type, filename, options, range, interceptCallback){\n\t\tvar downloadFunc = false;\n\n\t\tfunction buildLink(data, mime){\n\t\t\tif(interceptCallback){\n\t\t\t\tif(interceptCallback === true){\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t}else{\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif(typeof type == \"function\"){\n\t\t\tdownloadFunc = type;\n\t\t}else{\n\t\t\tif(Download.downloaders[type]){\n\t\t\t\tdownloadFunc = Download.downloaders[type];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif(downloadFunc){\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\n\t\t}\n\t}\n\n\tgenerateExportList(range){\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach((row) => {\n\t\t\tvar group;\n\n\t\t\tif(row.type === \"group\"){\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t}\n\n\ttriggerDownload(data, mime, type, filename, newTab){\n\t\tvar element = document.createElement('a'),\n\t\tblob = this.table.options.downloadEncoder(data, mime);\n\n\t\tif(blob){\n\t\t\tif(newTab){\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t}else{\n\t\t\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\t\t\t\t\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t}else{\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\n\t\t}\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nDownload.moduleName = \"download\";\n\n//load defaults\nDownload.downloaders = defaultDownloaders;\n\nexport default Download;","export default function maskInput(el, options){\n\tvar mask = options.mask,\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n\n\tfunction fillSymbols(index){\n\t\tvar symbol = mask[index];\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index+1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", (e) => {\n\t\tvar index = el.value.length,\n\t\tchar = e.key;\n\n\t\tif(e.keyCode > 46 && !e.ctrlKey && !e.metaKey){\n\t\t\tif(index >= mask.length){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tswitch(mask[index]){\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\tif(isNaN(char)){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(char !== mask[index]){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", (e) => {\n\t\tif(e.keyCode > 46){\n\t\t\tif(options.maskAutoFill){\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tif(!el.placeholder){\n\t\tel.placeholder = mask;\n\t}\n\n\tif(options.maskAutoFill){\n\t\tfillSymbols(el.value.length);\n\t}\n}","import maskInput from '../../inputMask.js';\n\n//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\tonRendered(function(){\n\t\tif(cell._getSelf){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange(e);\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","import maskInput from '../../inputMask.js';\n\n//resizable text area element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"hybrid\",\n\tvalue = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\n\tinput = document.createElement(\"textarea\"),\n\tscrollHeight = 0;\n\n\t//create and style input\n\tinput.style.display = \"block\";\n\tinput.style.padding = \"2px\";\n\tinput.style.height = \"100%\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\tinput.style.whiteSpace = \"pre-wrap\";\n\tinput.style.resize = \"none\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = value;\n\n\tonRendered(function(){\n\t\tif(cell._getSelf){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tinput.scrollHeight;\n\t\t\tinput.style.height = input.scrollHeight + \"px\";\n\t\t\tcell.getRow().normalizeHeight();\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t},300);\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\tinput.addEventListener(\"keyup\", function(){\n\n\t\tinput.style.height = \"\";\n\n\t\tvar heightNow = input.scrollHeight;\n\n\t\tinput.style.height = heightNow + \"px\";\n\n\t\tif(heightNow != scrollHeight){\n\t\t\tscrollHeight = heightNow;\n\t\t\tcell.getRow().normalizeHeight();\n\t\t}\n\t});\n\n\tinput.addEventListener(\"keydown\", function(e){\n\n\t\tswitch(e.keyCode){\n\n\t\t\tcase 13:\n\t\t\t\tif(e.shiftKey && editorParams.shiftEnterSubmit){\n\t\t\t\t\tonChange(e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","import maskInput from '../../inputMask.js';\n\n//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"number\");\n\n\tif(typeof editorParams.max != \"undefined\"){\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif(typeof editorParams.min != \"undefined\"){\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif(typeof editorParams.step != \"undefined\"){\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tvar blurFunc = function(e){\n\t\tonChange();\n\t};\n\n\tonRendered(function () {\n\t\tif(cell._getSelf){\n\t\t\t//submit new value on blur\n\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value !== cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.setAttribute(\"type\", \"range\");\n\t\n\tif (typeof editorParams.max != \"undefined\") {\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\t\n\tif (typeof editorParams.min != \"undefined\") {\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\t\n\tif (typeof editorParams.step != \"undefined\") {\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\t\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function () {\n\t\tif(cell._getSelf){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value;\n\t\t\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\t\t\n\t\tif(value != cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e){\n\t\tonChange();\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tfunction convertDate(value){\n\t\tvar newDatetime;\n\t\t\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\t\t\n\t\treturn newDatetime.toFormat(\"yyyy-MM-dd\");\n\t}\n\t\n\tinput.type = \"date\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.max){\n\t\tinput.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n\t}\n\n\tif(editorParams.min){\n\t\tinput.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n\t}\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\t\t\n\t\t\tcellValue = convertDate(cellValue);\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell._getSelf){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDate;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDate;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDate.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDate.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"time\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"hh:mm\");\n\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell._getSelf){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxTime = DT.fromFormat(String(value), \"hh:mm\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"datetime-local\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"yyyy-MM-dd\")  + \"T\" + newDatetime.toFormat(\"hh:mm\");\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell._getSelf){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDateTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDateTime = DT.fromISO(String(value));\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDateTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDateTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDateTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","import maskInput from './inputMask.js';\nimport urlBuilder from '../Ajax/defaults/urlGenerator.js';\n\nexport default class Edit{\n\tconstructor(editor, cell, onRendered, success, cancel, editorParams){\n\t\tthis.edit = editor;\n\t\tthis.table = editor.table;\n\t\tthis.cell = cell;\n\t\tthis.params = this._initializeParams(editorParams);\n\t\t\n\t\tthis.data = [];\n\t\tthis.displayItems = [];\n\t\tthis.currentItems = [];\n\t\tthis.focusedItem = null;\n\t\t\n\t\tthis.input = this._createInputElement();\n\t\tthis.listEl = this._createListElement();\n\t\t\n\t\tthis.initialValues = null; \n\t\t\n\t\tthis.isFilter = !cell._getSelf;\n\t\t\n\t\tthis.filterTimeout = null;\n\t\tthis.filtered = false;\n\t\tthis.typing = false;\n\t\t\n\t\tthis.values = []; \n\t\tthis.popup = null;  \n\t\t\n\t\tthis.listIteration = 0;\n\t\t\n\t\tthis.lastAction=\"\";\n\t\tthis.filterTerm=\"\";\n\t\t\n\t\tthis.blurable = true;\n\t\t\n\t\tthis.actions = {\n\t\t\tsuccess:success,\n\t\t\tcancel:cancel\n\t\t};\n\t\t\n\t\tthis._deprecatedOptionsCheck();\n\t\tthis._initializeValue();\n\t\t\n\t\tonRendered(this._onRendered.bind(this));\n\t}\n\t\n\t_deprecatedOptionsCheck(){\n\t\tif(this.params.listItemFormatter){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.sortValuesList){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.searchFunc){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.searchingPlaceholder){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t}\n\t\n\t_initializeValue(){\n\t\tvar initialValue = this.cell.getValue();\n\t\t\n\t\tif(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\n\t\t\tinitialValue = this.params.defaultValue;\n\t\t}\n\t\t\n\t\tthis.initialValues = this.params.multiselect ? initialValue : [initialValue];\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n\t\t\tthis.headerFilterInitialListGen();            \n\t\t}\n\t}\n\t\n\t_onRendered(){\n\t\tvar cellEl = this.cell.getElement();\n\t\t\n\t\tfunction clickStop(e){\n\t\t\te.stopPropagation();\n\t\t}\t\n\t\n\t\tif(!this.isFilter){\n\t\t\tthis.input.style.height = \"100%\";\n\t\t\tthis.input.focus({preventScroll: true});\n\t\t}\n\t\t\n\t\t\n\t\tcellEl.addEventListener(\"click\", clickStop);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tcellEl.removeEventListener(\"click\", clickStop);\n\t\t}, 1000);\n\t\t\n\t\tthis.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n\t}\n\t\n\t_createListElement(){\n\t\tvar listEl = document.createElement(\"div\");\n\t\tlistEl.classList.add(\"tabulator-edit-list\");\n\t\t\n\t\tlistEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\tlistEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\t\n\t\treturn listEl;\n\t}\n\t\n\t_setListWidth(){\n\t\tvar element = this.isFilter ? this.input : this.cell.getElement();\n\t\t\n\t\tthis.listEl.style.minWidth = element.offsetWidth + \"px\";\n\t\t\n\t\tif(this.params.maxWidth){\n\t\t\tif(this.params.maxWidth === true){\n\t\t\t\tthis.listEl.style.maxWidth = element.offsetWidth + \"px\";\n\t\t\t}else if(typeof this.params.maxWidth === \"number\"){\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t_createInputElement(){\n\t\tvar attribs = this.params.elementAttributes;\n\t\tvar input = document.createElement(\"input\");\n\t\t\n\t\tinput.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n\t\t\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\t\n\t\tif(!this.params.autocomplete){\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.style.caretColor = \"transparent\";\n\t\t\t// input.readOnly = (this.edit.currentCell != false);\n\t\t}\n\t\t\n\t\tif(attribs && typeof attribs == \"object\"){\n\t\t\tfor (let key in attribs){\n\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n\t\t\t\t}else{\n\t\t\t\t\tinput.setAttribute(key, attribs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(this.params.mask){\n\t\t\tmaskInput(input, this.params);\n\t\t}\n\t\t\n\t\tthis._bindInputEvents(input);\n\t\t\n\t\treturn input;\n\t}\n\t\n\t_initializeParams(params){\n\t\tvar valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n\t\tvalueCheck;\n\t\t\n\t\tparams = Object.assign({}, params);\n\t\t\n\t\tparams.verticalNavigation = params.verticalNavigation || \"editor\";\n\t\tparams.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n\t\tparams.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n\t\tparams.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n\t\t\n\t\tparams.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n\t\t\n\t\tvalueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n\t\t\n\t\tif(!valueCheck){\n\t\t\tconsole.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n\t\t}else if(valueCheck > 1){\n\t\t\tconsole.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n\t\t}\n\t\t\n\t\tif(params.autocomplete){\n\t\t\tif(params.multiselect){\n\t\t\t\tparams.multiselect = false;\n\t\t\t\tconsole.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n\t\t\t}\n\t\t}else{\n\t\t\tif(params.freetext){\n\t\t\t\tparams.freetext = false;\n\t\t\t\tconsole.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterFunc){\n\t\t\t\tparams.filterFunc = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterRemote){\n\t\t\t\tparams.filterRemote = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.mask){\n\t\t\t\tparams.mask = false;\n\t\t\t\tconsole.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.allowEmpty){\n\t\t\t\tparams.allowEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.listOnEmpty){\n\t\t\t\tparams.listOnEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)){\n\t\t\tparams.filterRemote = false;\n\t\t\tconsole.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n\t\t}\n\t\treturn params;\n\t}\n\t//////////////////////////////////////\n\t////////// Event Handling ////////////\n\t//////////////////////////////////////\n\t\n\t_bindInputEvents(input){\n\t\tinput.addEventListener(\"focus\", this._inputFocus.bind(this));\n\t\tinput.addEventListener(\"click\", this._inputClick.bind(this));\n\t\tinput.addEventListener(\"blur\", this._inputBlur.bind(this));\n\t\tinput.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\tinput.addEventListener(\"search\", this._inputSearch.bind(this));\n\t\t\n\t\tif(this.params.autocomplete){\n\t\t\tinput.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\t\t}\n\t}\n\t\n\t\n\t_inputFocus(e){\n\t\tthis.rebuildOptionsList();\n\t}\n\t\n\t_filter(){\n\t\tif(this.params.filterRemote){\n\t\t\tclearTimeout(this.filterTimeout);\n\t\t\t\n\t\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\t\tthis.rebuildOptionsList();\n\t\t\t}, this.params.filterDelay);\n\t\t}else{\n\t\t\tthis._filterList();\n\t\t}\n\t}\n\t\n\t_inputClick(e){\n\t\te.stopPropagation();\n\t}\n\t\n\t_inputBlur(e){\n\t\tif(this.blurable){\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.hide();\n\t\t\t}else{\n\t\t\t\tthis._resolveValue(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_inputSearch(){\n\t\tthis._clearChoices();\n\t}\n\t\n\t_inputKeyDown(e){\n\t\tswitch(e.keyCode){\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\t\tthis._keyUp(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 40: //down arrow\n\t\t\t\tthis._keyDown(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //right arrow\n\t\t\t\tthis._keySide(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 13: //enter\n\t\t\t\tthis._keyEnter();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27: //escape\n\t\t\t\tthis._keyEsc();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 36: //home\n\t\t\tcase 35: //end\n\t\t\t\tthis._keyHomeEnd(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 9: //tab\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keySelectLetter(e);\n\t\t}\n\t}\n\t\n\t_inputKeyUp(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 38: //up arrow\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //up arrow\n\t\t\tcase 40: //right arrow\n\t\t\tcase 13: //enter\n\t\t\tcase 27: //escape\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keyAutoCompLetter(e);\n\t\t}\n\t}\n\t\n\t_preventPopupBlur(){\n\t\tif(this.popup){\n\t\t\tthis.popup.blockHide();\n\t\t}\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.restoreHide();\n\t\t\t}\n\t\t}, 10);\n\t}\n\t\n\t_preventBlur(){\n\t\tthis.blurable = false;\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tthis.blurable = true;\n\t\t}, 10);\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Keyboard Navigation /////////\n\t//////////////////////////////////////\n\t\n\t_keyUp(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index > 0){\n\t\t\t\tthis._focusItem(this.displayItems[index - 1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyDown(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index < this.displayItems.length - 1){\n\t\t\t\tif(index == -1){\n\t\t\t\t\tthis._focusItem(this.displayItems[0]);\n\t\t\t\t}else{\n\t\t\t\t\tthis._focusItem(this.displayItems[index + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keySide(e){\n\t\tif(!this.params.autocomplete){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\t_keyEnter(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyEsc(e){\n\t\tthis._cancel();\n\t}\n\t\n\t_keyHomeEnd(e){\n\t\tif(this.params.autocomplete){\n\t\t\t//prevent table navigation while using input element\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\t\n\t_keySelectLetter(e){\n\t\tif(!this.params.autocomplete){\n\t\t\t// if(this.edit.currentCell === false){\n\t\t\te.preventDefault();\n\t\t\t// }\n\t\t\t\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\n\t\t\t\tthis._scrollToValue(e.keyCode);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyAutoCompLetter(e){\n\t\tthis._filter();\n\t\tthis.lastAction = \"typing\";\n\t\tthis.typing = true;\n\t}\n\t\n\t\n\t_scrollToValue(char){\n\t\tclearTimeout(this.filterTimeout);\n\t\t\n\t\tvar character = String.fromCharCode(char).toLowerCase();\n\t\tthis.filterTerm += character.toLowerCase();\n\t\t\n\t\tvar match = this.displayItems.find((item) => {\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n\t\t});\n\t\t\n\t\tif(match){\n\t\t\tthis._focusItem(match);\n\t\t}\n\t\t\n\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\tthis.filterTerm = \"\";\n\t\t}, 800);\n\t}\n\t\n\t_focusItem(item){\n\t\tthis.lastAction = \"focus\";\n\t\t\n\t\tif(this.focusedItem && this.focusedItem.element){\n\t\t\tthis.focusedItem.element.classList.remove(\"focused\");\n\t\t}\n\t\t\n\t\tthis.focusedItem = item;\n\t\t\n\t\tif(item && item.element){\n\t\t\titem.element.classList.add(\"focused\");\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\n\t\t}\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t/////// Data List Generation /////////\n\t//////////////////////////////////////\n\theaderFilterInitialListGen(){\n\t\tthis._generateOptions(true);\n\t}\n\t\n\trebuildOptionsList(){\n\t\tthis._generateOptions()\n\t\t\t.then(this._sortOptions.bind(this))\n\t\t\t.then(this._buildList.bind(this))\n\t\t\t.then(this._showList.bind(this))\n\t\t\t.catch((e) => {\n\t\t\t\tif(!Number.isInteger(e)){\n\t\t\t\t\tconsole.error(\"List generation error\", e);\n\t\t\t\t}\n\t\t\t});\n\t}\n\t\n\t_filterList(){\n\t\tthis._buildList(this._filterOptions());\n\t\tthis._showList();\n\t}\n\t\n\t_generateOptions(silent){\n\t\tvar values = [];\n\t\tvar iteration = ++ this.listIteration;\n\t\t\n\t\tthis.filtered = false;\n\t\t\n\t\tif(this.params.values){\n\t\t\tvalues = this.params.values;\n\t\t}else if (this.params.valuesURL){\n\t\t\tvalues = this._ajaxRequest(this.params.valuesURL, this.input.value);\n\t\t}else{\n\t\t\tif(typeof this.params.valuesLookup === \"function\"){\n\t\t\t\tvalues = this.params.valuesLookup(this.cell, this.input.value);\n\t\t\t}else if(this.params.valuesLookup){\n\t\t\t\tvalues = this._uniqueColumnValues(this.params.valuesLookupField);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(values instanceof Promise){\n\t\t\tif(!silent){\n\t\t\t\tthis._addPlaceholder(this.params.placeholderLoading);\n\t\t\t}\n\t\t\t\n\t\t\treturn values.then()\n\t\t\t\t.then((responseValues) => {\n\t\t\t\t\tif(this.listIteration === iteration){\n\t\t\t\t\t\treturn this._parseList(responseValues);\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn Promise.reject(iteration);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.resolve(this._parseList(values));\n\t\t}\n\t}\n\t\n\t_addPlaceholder(contents){\n\t\tvar placeholder = document.createElement(\"div\");\n\t\t\n\t\tif(typeof contents === \"function\"){\n\t\t\tcontents = contents(this.cell.getComponent(), this.listEl);\n\t\t}\n\t\t\n\t\tif(contents){\n\t\t\tthis._clearList();\n\t\t\t\n\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\tplaceholder = contents;\n\t\t\t}else{\n\t\t\t\tplaceholder.classList.add(\"tabulator-edit-list-placeholder\");\n\t\t\t\tplaceholder.innerHTML = contents;\n\t\t\t}\n\t\t\t\n\t\t\tthis.listEl.appendChild(placeholder);\n\t\t\t\n\t\t\tthis._showList();\n\t\t}\n\t}\n\t\n\t_ajaxRequest(url, term){\n\t\tvar params = this.params.filterRemote ? {term:term} : {};\n\t\turl = urlBuilder(url, {}, params);\n\t\t\n\t\treturn fetch(url)\n\t\t\t.then((response)=>{\n\t\t\t\tif(response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.catch((error)=>{\n\t\t\t\t\t\t\tconsole.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treturn Promise.reject(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error)=>{\n\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \", error);\n\t\t\t\treturn Promise.reject(error);\n\t\t\t});\n\t}\n\t\n\t_uniqueColumnValues(field){\n\t\tvar output = {},\n\t\tdata = this.table.getData(this.params.valuesLookup),\n\t\tcolumn;\n\t\t\n\t\tif(field){\n\t\t\tcolumn = this.table.columnManager.getColumnByField(field);\n\t\t}else{\n\t\t\tcolumn = this.cell.getColumn()._getSelf();\n\t\t}\n\t\t\n\t\tif(column){\n\t\t\tdata.forEach((row) => {\n\t\t\t\tvar val = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\n\t\t\t\t\toutput[val] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\toutput = [];\n\t\t}\n\t\t\n\t\treturn Object.keys(output);\n\t}\n\t\n\t\n\t_parseList(inputValues){\n\t\tvar data = [];\n\t\t\n\t\tif(!Array.isArray(inputValues)){\n\t\t\tinputValues = Object.entries(inputValues).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:key,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t\n\t\tinputValues.forEach((value) => {\n\t\t\tif(typeof value !== \"object\"){\n\t\t\t\tvalue = {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:value,\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tthis._parseListItem(value, data, 0);\n\t\t});\n\t\t\n\t\tif(!this.currentItems.length && this.params.freetext){\n\t\t\tthis.input.value = this.initialValues;\n\t\t\tthis.typing = true;\n\t\t\tthis.lastAction = \"typing\";\n\t\t}\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\treturn data;    \n\t}\n\t\n\t_parseListItem(option, data, level){\n\t\tvar item = {};\n\t\t\n\t\tif(option.options){\n\t\t\titem = this._parseListGroup(option, level + 1);\n\t\t}else{\n\t\t\titem = {\n\t\t\t\tlabel:option.label,\n\t\t\t\tvalue:option.value,\n\t\t\t\titemParams:option.itemParams,\n\t\t\t\telementAttributes: option.elementAttributes,\n\t\t\t\telement:false,\n\t\t\t\tselected:false,\n\t\t\t\tvisible:true,\n\t\t\t\tlevel:level,\n\t\t\t\toriginal:option,\n\t\t\t};\n\t\t\t\n\t\t\tif(this.initialValues && this.initialValues.indexOf(option.value) > -1){\n\t\t\t\tthis._chooseItem(item, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata.push(item);\n\t}\n\t\n\t_parseListGroup(option, level){\n\t\tvar item = {\n\t\t\tlabel:option.label,\n\t\t\tgroup:true,\n\t\t\titemParams:option.itemParams,\n\t\t\telementAttributes:option.elementAttributes,\n\t\t\telement:false,\n\t\t\tvisible:true,\n\t\t\tlevel:level,\n\t\t\toptions:[],\n\t\t\toriginal:option,\n\t\t};\n\t\t\n\t\toption.options.forEach((child) => {\n\t\t\tthis._parseListItem(child, item.options, level);\n\t\t});\n\t\t\n\t\treturn item;\n\t}\n\t\n\t_sortOptions(options){\n\t\tvar sorter;\n\t\t\n\t\tif(this.params.sort){\n\t\t\tsorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n\t\t\t\n\t\t\tthis._sortGroup(sorter, options);\n\t\t}\n\t\t\n\t\treturn options;\n\t}\n\t\n\t_sortGroup(sorter, options){\n\t\toptions.sort((a,b) => {\n\t\t\treturn sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n\t\t});\n\t\t\n\t\toptions.forEach((option) => {\n\t\t\tif(option.group){\n\t\t\t\tthis._sortGroup(sorter, option.options);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_defaultSortFunction(as, bs){\n\t\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\t\tvar emptyAlign = 0;\n\t\t\n\t\tif(this.params.sort === \"desc\"){\n\t\t\t[as, bs] = [bs, as];\n\t\t}\n\t\t\n\t\t//handle empty values\n\t\tif(!as && as!== 0){\n\t\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t\t}else if(!bs && bs!== 0){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\ta = String(as).toLowerCase();\n\t\t\tb = String(bs).toLowerCase();\n\t\t\tif(a === b) return 0;\n\t\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\ta = a.match(rx);\n\t\t\tb = b.match(rx);\n\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\twhile(i < L){\n\t\t\t\ta1= a[i];\n\t\t\t\tb1= b[i++];\n\t\t\t\tif(a1 !== b1){\n\t\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t}\n\t\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn a.length > b.length;\n\t\t}\n\t\t\n\t\treturn emptyAlign;\n\t}\n\t\n\t_filterOptions(){\n\t\tvar filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n\t\tterm = this.input.value;\n\t\t\n\t\tif(term){\n\t\t\tthis.filtered = true;\n\t\t\t\n\t\t\tthis.data.forEach((item) => {\n\t\t\t\tthis._filterItem(filterFunc, term, item);\n\t\t\t});\n\t\t}else{\n\t\t\tthis.filtered = false;\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\t_filterItem(func, term, item){\n\t\tvar matches = false;\n\t\t\n\t\tif(!item.group){\n\t\t\titem.visible = func(term, item.label, item.value, item.original);\n\t\t}else{\n\t\t\titem.options.forEach((option) => {\n\t\t\t\tif(this._filterItem(func, term, option)){\n\t\t\t\t\tmatches = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\titem.visible = matches;\n\t\t}\n\t\t\n\t\treturn item.visible;\n\t}\n\t\n\t_defaultFilterFunc(term, label, value, item){\n\t\tterm = String(term).toLowerCase();\n\t\t\n\t\tif(label !== null && typeof label !== \"undefined\"){\n\t\t\tif(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\t//////////////////////////////////////\n\t/////////// Display List /////////////\n\t//////////////////////////////////////\n\t\n\t_clearList(){\n\t\twhile(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n\t\t\n\t\tthis.displayItems = [];\n\t}\n\t\n\t_buildList(data){\n\t\tthis._clearList();\n\t\t\n\t\tdata.forEach((option) => {\n\t\t\tthis._buildItem(option);\n\t\t});\n\t\t\n\t\tif(!this.displayItems.length){\n\t\t\tthis._addPlaceholder(this.params.placeholderEmpty);\n\t\t}  \n\t}\n\t\n\t_buildItem(item){\n\t\tvar el = item.element,\n\t\tcontents;\n\t\t\n\t\tif(!this.filtered || item.visible){\n\t\t\t\n\t\t\tif(!el){\n\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\n\t\t\t\tcontents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n\t\t\t\t\n\t\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = contents;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-group\");\n\t\t\t\t}else{\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-item\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n\t\t\t\t\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\n\t\t\t\t\tfor (let key in item.elementAttributes){\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\tel.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.addEventListener(\"click\", this._groupClick.bind(this, item));\n\t\t\t\t}else{\n\t\t\t\t\tel.addEventListener(\"click\", this._itemClick.bind(this, item));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\t\t\t\n\t\t\t\titem.element = el;\n\t\t\t}\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tthis.listEl.appendChild(el);\n\t\t\t\n\t\t\tif(item.group){\n\t\t\t\titem.options.forEach((option) => {\n\t\t\t\t\tthis._buildItem(option);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.displayItems.push(item);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_showList(){\n\t\tvar startVis = this.popup && this.popup.isVisible();\n\t\t\n\t\tif(this.input.parentNode){\n\t\t\tif(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\n\t\t\t\tif(this.popup){\n\t\t\t\t\tthis.popup.hide(true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._setListWidth();\n\t\t\t\n\t\t\tif(!this.popup){\n\t\t\t\tthis.popup = this.edit.popup(this.listEl);\n\t\t\t}\n\t\t\t\n\t\t\tthis.popup.show(this.cell.getElement(), \"bottom\");\n\t\t\t\n\t\t\tif(!startVis){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.hideOnBlur(this._resolveValue.bind(this, true));\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_styleItem(item){\n\t\tif(item && item.element){\n\t\t\tif(item.selected){\n\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t}else{\n\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// User Interaction ///////////\n\t//////////////////////////////////////\n\t\n\t_itemClick(item, e){\n\t\te.stopPropagation();\n\t\t\n\t\tthis._chooseItem(item);\n\t}\n\t\n\t_groupClick(item, e){\n\t\te.stopPropagation();\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t////// Current Item Management ///////\n\t//////////////////////////////////////\n\t\n\t_cancel(){\n\t\tthis.popup.hide(true);\n\t\tthis.actions.cancel();\n\t}\n\t\n\t_clearChoices(){\n\t\tthis.typing = true;\n\t\t\n\t\tthis.currentItems.forEach((item) => {\n\t\t\titem.selected = false;\n\t\t\tthis._styleItem(item);\n\t\t});\n\t\t\n\t\tthis.currentItems = [];\n\t\t\n\t\tthis.focusedItem = null;\n\t}\n\t\n\t_chooseItem(item, silent){\n\t\tvar index;\n\t\t\n\t\tthis.typing = false;\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\tindex = this.currentItems.indexOf(item);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.currentItems.splice(index, 1);\n\t\t\t\titem.selected = false;\n\t\t\t}else{\n\t\t\t\tthis.currentItems.push(item);\n\t\t\t\titem.selected = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.input.value = this.currentItems.map(item => item.label).join(\",\");\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t}else{\n\t\t\tthis.currentItems = [item];\n\t\t\titem.selected = true;\n\t\t\t\n\t\t\tthis.input.value = item.label;\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis._resolveValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._focusItem(item);\n\t}\n\t\n\t_resolveValue(blur){\n\t\tvar output, initialValue;\n\n\t\tif(this.popup){\n\t\t\tthis.popup.hide(true);\n\t\t}\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\toutput = this.currentItems.map(item => item.value);\n\t\t}else{\n\t\t\tif(blur && this.params.autocomplete && this.typing){\n\t\t\t\tif(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\n\t\t\t\t\toutput = this.input.value;\n\t\t\t\t}else{\n\t\t\t\t\tthis.actions.cancel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.currentItems[0]){\n\t\t\t\t\toutput = this.currentItems[0].value;\n\t\t\t\t}else{\n\t\t\t\t\tinitialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n\t\t\t\t\t\n\t\t\t\t\tif(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\n\t\t\t\t\t\toutput = initialValue;\n\t\t\t\t\t}else{\n\t\t\t\t\t\toutput = this.params.emptyValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(output === \"\"){\n\t\t\toutput = this.params.emptyValue;\n\t\t}\n\t\t\n\t\tthis.actions.success(output);\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.initialValues = output && !Array.isArray(output) ? [output] : output;\n\t\t\tthis.currentItems = [];\n\t\t}\n\t}\n\t\n}\n","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\n\tthis.deprecationMsg(\"The select editor has been deprecated, please use the new list editor\");\n\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\n\tthis.deprecationMsg(\"The autocomplete editor has been deprecated, please use the new list editor with the 'autocomplete' editorParam\");\n\n\teditorParams.autocomplete = true;\n\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}","//star rating\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar self = this,\n\telement = cell.getElement(),\n\tvalue = cell.getValue(),\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\tstars = [],\n\tstarsHolder = document.createElement(\"div\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\n\t//change star type\n\tfunction starChange(val){\n\t\tstars.forEach(function(star, i){\n\t\t\tif(i < val){\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}else{\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}\n\t\t});\n\t}\n\n\t//build stars\n\tfunction buildStar(i){\n\n\t\tvar starHolder =  document.createElement(\"span\");\n\t\tvar nextStar = star.cloneNode(true);\n\n\t\tstars.push(nextStar);\n\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tstarChange(i);\n\t\t});\n\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\n\t\tstarHolder.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tsuccess(i);\n\t\t\telement.blur();\n\t\t});\n\n\t\tstarHolder.appendChild(nextStar);\n\t\tstarsHolder.appendChild(starHolder);\n\n\t}\n\n\t//handle keyboard navigation value change\n\tfunction changeValue(val){\n\t\tvalue = val;\n\t\tstarChange(val);\n\t}\n\n\t//style cell\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\t//style holding element\n\tstarsHolder.style.verticalAlign = \"middle\";\n\tstarsHolder.style.display = \"inline-block\";\n\tstarsHolder.style.padding = \"4px\";\n\n\t//style star\n\tstar.setAttribute(\"width\", size);\n\tstar.setAttribute(\"height\", size);\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//create correct number of stars\n\tfor(var i=1;i<= maxStars;i++){\n\t\tbuildStar(i);\n\t}\n\n\t//ensure value does not exceed number of stars\n\tvalue = Math.min(parseInt(value), maxStars);\n\n\t// set initial styling of stars\n\tstarChange(value);\n\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\n\t\tstarChange(0);\n\t});\n\n\tstarsHolder.addEventListener(\"click\", function(e){\n\t\tsuccess(0);\n\t});\n\n\telement.addEventListener(\"blur\", function(e){\n\t\tcancel();\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\tchangeValue(value + 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\tchangeValue(value - 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 13: //enter\n\t\t\t\tsuccess(value);\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn starsHolder;\n}","//draggable progress bar\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar element = cell.getElement(),\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\n\tpercent = (max - min) / 100,\n\tvalue = cell.getValue() || 0,\n\thandle = document.createElement(\"div\"),\n\tbar = document.createElement(\"div\"),\n\tmouseDrag, mouseDragWidth;\n\n\t//set new value\n\tfunction updateValue(){\n\t\tvar style = window.getComputedStyle(element, null);\n\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\n\t\tsuccess(calcVal);\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\telement.setAttribute(\"aria-label\", value);\n\t}\n\n\t//style handle\n\thandle.style.position = \"absolute\";\n\thandle.style.right = \"0\";\n\thandle.style.top = \"0\";\n\thandle.style.bottom = \"0\";\n\thandle.style.width = \"5px\";\n\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t//style bar\n\tbar.style.display = \"inline-block\";\n\tbar.style.position = \"relative\";\n\t// bar.style.top = \"8px\";\n\t// bar.style.bottom = \"8px\";\n\t// bar.style.left = \"4px\";\n\t// bar.style.marginRight = \"4px\";\n\tbar.style.height = \"100%\";\n\tbar.style.backgroundColor = \"#488CE9\";\n\tbar.style.maxWidth = \"100%\";\n\tbar.style.minWidth = \"0%\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//style cell\n\telement.style.padding = \"4px 4px\";\n\n\t//make sure value is in range\n\tvalue = Math.min(parseFloat(value), max);\n\tvalue = Math.max(parseFloat(value), min);\n\n\t//workout percentage\n\tvalue = Math.round((value - min) / percent);\n\t// bar.style.right = value + \"%\";\n\tbar.style.width = value + \"%\";\n\n\telement.setAttribute(\"aria-valuemin\", min);\n\telement.setAttribute(\"aria-valuemax\", max);\n\n\tbar.appendChild(handle);\n\n\thandle.addEventListener(\"mousedown\", function(e){\n\t\tmouseDrag = e.screenX;\n\t\tmouseDragWidth = bar.offsetWidth;\n\t});\n\n\thandle.addEventListener(\"mouseover\", function(){\n\t\thandle.style.cursor = \"ew-resize\";\n\t});\n\n\telement.addEventListener(\"mousemove\", function(e){\n\t\tif(mouseDrag){\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\n\t\t}\n\t});\n\n\telement.addEventListener(\"mouseup\", function(e){\n\t\tif(mouseDrag){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tmouseDrag = false;\n\t\t\tmouseDragWidth = false;\n\n\t\t\tupdateValue();\n\t\t}\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\tcase 13: //enter\n\t\t\t\tupdateValue();\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t}\n\t});\n\n\telement.addEventListener(\"blur\", function(){\n\t\tcancel();\n\t});\n\n\treturn bar;\n}","//checkbox\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar value = cell.getValue(),\n\tinput = document.createElement(\"input\"),\n\ttristate = editorParams.tristate,\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\tindetermState = false,\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n\t\n\tinput.setAttribute(\"type\", \"checkbox\");\n\tinput.style.marginTop = \"5px\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = value;\n\t\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\n\t\tindetermState = true;\n\t\tinput.indeterminate = true;\n\t}\n\t\n\tif(this.table.browser != \"firefox\" && this.table.browser != \"safari\"){ //prevent blur issue on mac firefox\n\t\tonRendered(function(){\n\t\t\tif(cell._getSelf){\n\t\t\t\tinput.focus({preventScroll: true});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\n\t\n\tfunction setValue(blur){\n\t\tvar checkedValue = input.checked;\n\t\t\n\t\tif(trueValueSet && checkedValue){\n\t\t\tcheckedValue = editorParams.trueValue;\n\t\t}else if(falseValueSet && !checkedValue){\n\t\t\tcheckedValue = editorParams.falseValue;\n\t\t}\n\t\t\n\t\tif(tristate){\n\t\t\tif(!blur){\n\t\t\t\tif(input.checked && !indetermState){\n\t\t\t\t\tinput.checked = false;\n\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\tindetermState = true;\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\tindetermState = false;\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(indetermState){\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn checkedValue;\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"change\", function(e){\n\t\tsuccess(setValue());\n\t});\n\n\tinput.addEventListener(\"blur\", function(e){\n\t\tsuccess(setValue(true));\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tif(e.keyCode == 13){\n\t\t\tsuccess(setValue());\n\t\t}\n\t\tif(e.keyCode == 27){\n\t\t\tcancel();\n\t\t}\n\t});\n\t\n\treturn input;\n}","import input from './editors/input.js';\nimport textarea from './editors/textarea.js';\nimport number from './editors/number.js';\nimport range from './editors/range.js';\nimport date from './editors/date.js';\nimport time from './editors/time.js';\nimport datetime from './editors/datetime.js';\nimport select from './editors/select.js';\nimport list from './editors/list.js';\nimport autocomplete from './editors/autocomplete.js';\nimport star from './editors/star.js';\nimport progress from './editors/progress.js';\nimport tickCross from './editors/tickCross.js';\n\nexport default {\n\tinput:input,\n\ttextarea:textarea,\n\tnumber:number,\n\trange:range,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tselect:select,\n\tlist:list,\n\tautocomplete:autocomplete,\n\tstar:star,\n\tprogress:progress,\n\ttickCross:tickCross,\n};","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultEditors from './defaults/editors.js';\n\nclass Edit extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\t\t\n\t\tthis.editors = Edit.editors;\n\t\t\n\t\tthis.registerColumnOption(\"editable\");\n\t\tthis.registerColumnOption(\"editor\");\n\t\tthis.registerColumnOption(\"editorParams\");\n\t\t\n\t\tthis.registerColumnOption(\"cellEditing\");\n\t\tthis.registerColumnOption(\"cellEdited\");\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\n\t\t\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\t\tthis.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Keybinding Functions ///////\n\t///////////////////////////////////\n\t\n\tkeybindingNavigateNext(e){\n\t\tvar cell = this.currentCell,\n\t\tnewRow = this.options(\"tabEndNewRow\");\n\t\t\n\t\tif(cell){\n\t\t\tif(!this.navigateNext(cell, e)){\n\t\t\t\tif(newRow){\n\t\t\t\t\tcell.getElement().firstChild.blur();\n\t\t\t\t\t\n\t\t\t\t\tif(newRow === true){\n\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(typeof newRow == \"function\"){\n\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tnewRow.then(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tcell.getComponent().navigateNext();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Cell Functions //////////\n\t///////////////////////////////////\n\t\n\tcellIsEdited(cell){\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\n\t}\n\t\n\tcellCancelEdit(cell){\n\t\tif(cell === this.currentCell){\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}else{\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tupdateCellClass(cell){\n\t\tif(this.allowEdit(cell)) {\n\t\t\tcell.getElement().classList.add(\"tabulator-editable\");\n\t\t}\n\t\telse {\n\t\t\tcell.getElement().classList.remove(\"tabulator-editable\");\n\t\t}\n\t}\n\t\n\tclearCellEdited(cells){\n\t\tif(!cells){\n\t\t\tcells = this.table.modules.edit.getEditedCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n\t\n\tnavigatePrev(cell = this.currentCell, e){\n\t\tvar nextCell, prevRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateLeft();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(prevRow){\n\t\t\t\t\tnextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateNext(cell = this.currentCell, e){\n\t\tvar nextCell, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateRight();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(nextRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateLeft(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateRight(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateUp(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateDown(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tfindNextEditableCell(row, index){\n\t\tvar nextCell = false;\n\t\t\n\t\tif(index < row.cells.length-1){\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tnextCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn nextCell;\n\t}\n\t\n\tfindPrevEditableCell(row, index){\n\t\tvar prevCell = false;\n\t\t\n\t\tif(index > 0){\n\t\t\tfor(var i = index-1; i >= 0; i--){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tprevCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn prevCell;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.editor !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\tcolumnDeleteCheck(column){\n\t\tif(this.currentCell && this.currentCell.column === column){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowDeleteCheck(row){\n\t\tif(this.currentCell && this.currentCell.row === row){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\n\trowEditableCheck(row){\n\t\trow.getCells().forEach((cell) => {\n\t\t\tif(cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\"){\n\t\t\t\tthis.updateCellClass(cell);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//initialize column editor\n\tinitializeColumn(column){\n\t\tvar config = {\n\t\t\teditor:false,\n\t\t\tblocked:false,\n\t\t\tcheck:column.definition.editable,\n\t\t\tparams:column.definition.editorParams || {}\n\t\t};\n\t\t\n\t\t//set column editor\n\t\tswitch(typeof column.definition.editor){\n\t\t\tcase \"string\":\n\t\t\t\tif(this.editors[column.definition.editor]){\n\t\t\t\t\tconfig.editor = this.editors[column.definition.editor];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.editor = column.definition.editor;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tif(column.definition.editor === true){\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\n\t\t\t\t\t\tif(this.editors[column.definition.formatter]){\n\t\t\t\t\t\t\tconfig.editor = this.editors[column.definition.formatter];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconfig.editor = this.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\tif(config.editor){\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t}\n\t\n\tgetCurrentCell(){\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t}\n\t\n\tclearEditor(cancel){\n\t\tvar cell = this.currentCell,\n\t\tcellEl;\n\t\t\n\t\tthis.invalidEdit = false;\n\t\t\n\t\tif(cell){\n\t\t\tthis.currentCell = false;\n\t\t\t\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\n\t\t\t\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n\t\t\t\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\tcell.table.element.classList.remove(\"tabulator-editing\");\n\t\t}\n\t}\n\t\n\tcancelEdit(){\n\t\tif(this.currentCell){\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\t\t\t\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\t\t\t\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\n\t\t\t\tcell.row.normalizeHeight(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(cell.column.definition.cellEditCancelled){\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\n\t\t}\n\t}\n\t\n\t//return a formatted value for a cell\n\tbindEditor(cell){\n\t\tif(cell.column.modules.edit){\n\t\t\tvar self = this,\n\t\t\telement = cell.getElement(true);\n\t\t\t\n\t\t\tthis.updateCellClass(cell);\n\t\t\telement.setAttribute(\"tabindex\", 0);\n\t\t\t\n\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif (e.button === 2) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}else{\n\t\t\t\t\tself.mouseClick = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\telement.addEventListener(\"focus\", function(e){\n\t\t\t\tif(!self.recursionBlock){\n\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tfocusCellNoEvent(cell, block){\n\t\tthis.recursionBlock = true;\n\t\t\n\t\tif(!(block && this.table.browser === \"ie\")){\n\t\t\tcell.getElement().focus({preventScroll: true});\n\t\t}\n\t\t\n\t\tthis.recursionBlock = false;\n\t}\n\t\n\teditCell(cell, forceEdit){\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t}\n\t\n\tfocusScrollAdjust(cell){\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\trowEl = cell.row.getElement();\n\t\t\t\n\t\t\tif(rowEl.offsetTop < topEdge){\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\n\t\t\t}else{\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t}\n\t\t\t\n\t\t\tif(cellEl.offsetLeft < leftEdge){\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\n\t\t\t}else{\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tallowEdit(cell) {\n\t\tvar check = cell.column.modules.edit ? true : false;\n\n\t\tif(cell.column.modules.edit){\n\t\t\tswitch(typeof cell.column.modules.edit.check){\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif(cell.row.initialized){\n\t\t\t\t\t\tcheck = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcheck = !!cell.row.data[cell.column.modules.edit.check];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tcheck = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn check;\n\t}\n\t\n\tedit(cell, e, forceEdit){\n\t\tvar self = this,\n\t\tallowEdit = true,\n\t\trendered = function(){},\n\t\telement = cell.getElement(),\n\t\tcellEditor, component, params;\n\t\t\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n\t\tif(this.currentCell){\n\t\t\tif(!this.invalidEdit && this.currentCell !== cell){\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//handle successful value change\n\t\tfunction success(value){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\n\t\t\t\t\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif(!cell.modules.edit){\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.modules.edit.edited = true;\n\t\t\t\t\t\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.setValue(value, true);\n\t\t\t\t\t\n\t\t\t\t\treturn valid === true;\n\t\t\t\t}else{\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//handle aborted edit\n\t\tfunction cancel(){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tself.cancelEdit();\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\trendered = callback;\n\t\t}\n\t\t\n\t\tif(!cell.column.modules.edit.blocked){\n\t\t\tif(e){\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\t\n\t\t\tallowEdit = this.allowEdit(cell);\n\t\t\t\n\t\t\tif(allowEdit || forceEdit){\n\t\t\t\t\n\t\t\t\tself.cancelEdit();\n\t\t\t\t\n\t\t\t\tself.currentCell = cell;\n\t\t\t\t\n\t\t\t\tthis.focusScrollAdjust(cell);\n\t\t\t\t\n\t\t\t\tcomponent = cell.getComponent();\n\t\t\t\t\n\t\t\t\tif(this.mouseClick){\n\t\t\t\t\tthis.mouseClick = false;\n\t\t\t\t\t\n\t\t\t\t\tif(cell.column.definition.cellClick){\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cell.column.definition.cellEditing){\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\n\t\t\t\t\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\t\t\t\t\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\t\t\t\t\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif(this.currentCell && cellEditor !== false){\n\t\t\t\t\tif(cellEditor instanceof Node){\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.table.element.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\t\t\t\telement.appendChild(cellEditor);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\telement.blur();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\telement.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\telement.blur();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.mouseClick = false;\n\t\t\telement.blur();\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetEditedCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.editedCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearEdited(cell){\n\t\tvar editIndex;\n\t\t\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\n\t\t\tcell.modules.edit.edited = false;\n\t\t\t\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\n\t\t}\n\t\t\n\t\teditIndex = this.editedCells.indexOf(cell);\n\t\t\n\t\tif(editIndex > -1){\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n}\n\nEdit.moduleName = \"edit\";\n\n//load defaults\nEdit.editors = defaultEditors;\n\n\nexport default Edit;\n","class ExportRow{\n\tconstructor(type, columns, component, indent){\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t}\n}\n\nexport default ExportRow;","class ExportColumn{\n\tconstructor(value, component, width, height, depth){\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t}\n}\n\nexport default ExportColumn;","import Module from '../../core/Module.js';\n\nimport ExportRow from './ExportRow.js';\nimport ExportColumn from './ExportColumn.js';\n\nclass Export extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t\t\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\t\t\n\t\tthis.registerColumnOption(\"htmlOutput\");\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tgenerateExportList(config, style, range, colVisProp){\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\t\t\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\n\t\t\n\t\treturn headers.concat(body);\n\t}\n\t\n\tgenerateTable(config, style, range, colVisProp){\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\t\t\n\t\treturn this.generateTableElement(list);\n\t}\n\t\n\trowLookup(range){\n\t\tvar rows = [];\n\t\t\n\t\tif(typeof range == \"function\"){\n\t\t\trange.call(this.table).forEach((row) =>{\n\t\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tswitch(range){\n\t\t\t\tcase true:\n\t\t\t\tcase \"visible\":\n\t\t\t\t\trows = this.table.rowManager.getVisibleRows(false, true);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"all\":\n\t\t\t\t\trows = this.table.rowManager.rows;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"selected\":\n\t\t\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"active\":\n\t\t\t\tdefault:\n\t\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\n\t\t\t\t\t}else{\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Object.assign([], rows);\n\t}\n\t\n\tgenerateColumnGroupHeaders(){\n\t\tvar output = [];\n\t\t\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\tvar colData = this.processColumnGroup(column);\n\t\t\t\n\t\t\tif(colData){\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tprocessColumnGroup(column){\n\t\tvar subGroups = column.columns,\n\t\tmaxDepth = 0,\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n\t\t\n\t\tvar groupData = {\n\t\t\ttitle:title,\n\t\t\tcolumn:column,\n\t\t\tdepth:1,\n\t\t};\n\t\t\n\t\tif(subGroups.length){\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\t\t\t\n\t\t\tsubGroups.forEach((subGroup) => {\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\n\t\t\t\t\n\t\t\t\tif(subGroupData){\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\t\t\t\t\t\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tgroupData.depth += maxDepth;\n\t\t\t\n\t\t\tif(!groupData.width){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.columnVisCheck(column)){\n\t\t\t\tgroupData.width = 1;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn groupData;\n\t}\n\t\n\tcolumnVisCheck(column){\n\t\tvar visProp = column.definition[this.colVisProp];\n\t\t\n\t\tif(typeof visProp === \"function\"){\n\t\t\tvisProp = visProp.call(this.table, column.getComponent());\n\t\t}\n\t\t\n\t\treturn visProp !== false && (column.visible || (!column.visible && visProp));\n\t}\n\t\n\theadersToExportRows(columns){\n\t\tvar headers = [],\n\t\theaderDepth = 0,\n\t\texportRows = [];\n\t\t\n\t\tfunction parseColumnGroup(column, level){\n\t\t\t\n\t\t\tvar depth = headerDepth - level;\n\t\t\t\n\t\t\tif(typeof headers[level] === \"undefined\"){\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\n\t\t\t\n\t\t\theaders[level].push(column);\n\t\t\t\n\t\t\tif(column.height > 1){\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\n\t\t\t\t\t\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\n\t\t\t\t\t\theaders[level + i] = [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\theaders[level + i].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.width > 1){\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.subGroups){\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\t//calculate maximum header depth\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.depth > headerDepth){\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\t\t\n\t\tcolumns.forEach(function(column){\n\t\t\tparseColumnGroup(column,0);\n\t\t});\n\t\t\n\t\theaders.forEach((header) => {\n\t\t\tvar columns = [];\n\t\t\t\n\t\t\theader.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t}else{\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tbodyToExportRows(rows){\n\t\t\n\t\tvar columns = [];\n\t\tvar exportRows = [];\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\t\t\n\t\trows = rows.filter((row) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn this.config.rowGroups !== false;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn this.config.columnCalcs !== false;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\trows.forEach((row, i) => {\n\t\t\tvar rowData = row.getData(this.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\tindent = row.level;\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\" :\n\t\t\t\tcase \"row\" :\n\t\t\t\t\tcolumns.forEach((col) => {\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tgenerateTableElement(list){\n\t\tvar table = document.createElement(\"table\"),\n\t\theaderEl = document.createElement(\"thead\"),\n\t\tbodyEl = document.createElement(\"tbody\"),\n\t\tstyles = this.lookupTableStyles(),\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n\t\tsetup = {};\n\t\t\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\t\t\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\t\t\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\t\t\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\t\t\n\t\ttable.classList.add(\"tabulator-print-table\");\n\t\t\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\n\t\t\n\t\tif(list.length > 1000){\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\t\t\n\t\tlist.forEach((row, i) => {\n\t\t\tlet rowEl;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"header\":\n\t\t\t\t\theaderEl.appendChild(this.generateHeaderElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\trowEl = this.generateRowElement(row, setup, styles);\n\t\t\t\t\n\t\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(headerEl.innerHTML){\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\t\t\n\t\ttable.appendChild(bodyEl);\n\t\t\n\t\t\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t}\n\t\n\tlookupTableStyles(){\n\t\tvar styles = {};\n\t\t\n\t\t//lookup row styles\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\t\t\t\n\t\t\tif(styles.firstRow){\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn styles;\n\t}\n\t\n\tgenerateHeaderElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trow.columns.forEach((column) => {\n\t\t\tif(column){\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\t\t\t\t\n\t\t\t\tcellEl.innerHTML = column.value;\n\t\t\t\t\n\t\t\t\tif(this.cloneTableStyle){\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\t\t\n\t\t\t\tif(column.component._column.visible){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t}else{\n\t\t\t\t\tif(column.component._column.definition.width){\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.parent){\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateGroupElement(row, setup, styles){\n\t\t\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\tcellEl = document.createElement(\"td\"),\n\t\tgroup = row.columns[0];\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}else{\n\t\t\tif(setup.groupHeader !== false){\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\t\t\n\t\tif(group.component.isVisible()){\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\trowEl.appendChild(cellEl);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateCalcElement(row, setup, styles){\n\t\tvar rowEl = this.generateRowElement(row, setup, styles);\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateRowElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\trow.columns.forEach((col, i) => {\n\t\t\tif(col){\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\tcolumn = col.component._column,\n\t\t\t\tindex = this.table.columnManager.findColumnIndex(column),\n\t\t\t\tvalue = col.value,\n\t\t\t\tcellStyle;\n\t\t\t\t\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules:{},\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\treturn row.component.getData();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn row.component;\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent:function(){\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn:column,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n\t\t\t\t}else{\n\t\t\t\t\tswitch(typeof value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = value !== null ? JSON.stringify(value) : \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(value instanceof Node){\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t}else{\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n\t\t\t\t\n\t\t\t\tif(cellStyle){\n\t\t\t\t\tthis.mapElementStyles(cellStyle, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"]);\n\t\t\t\t\t\n\t\t\t\t\tif(column.definition.align){\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t\t\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false){\n\t\t\tlet formatComponent = Object.assign(row.component);\n\n\t\t\tformatComponent.getElement = function(){return rowEl;};\n\n\t\t\tsetup.rowFormatter(row.component);\n\t\t}\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateHTMLTable(list){\n\t\tvar holder = document.createElement(\"div\");\n\t\t\n\t\tholder.appendChild(this.generateTableElement(list));\n\t\t\n\t\treturn holder.innerHTML;\n\t}\n\t\n\tgetHtml(visible, style, config, colVisProp){\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\t\t\n\t\treturn this.generateHTMLTable(list);\n\t}\n\t\n\tmapElementStyles(from, to, props){\n\t\tif(this.cloneTableStyle && from && to){\n\t\t\t\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\" : \"backgroundColor\",\n\t\t\t\t\"color\" : \"fontColor\",\n\t\t\t\t\"width\" : \"width\",\n\t\t\t\t\"font-weight\" : \"fontWeight\",\n\t\t\t\t\"font-family\" : \"fontFamily\",\n\t\t\t\t\"font-size\" : \"fontSize\",\n\t\t\t\t\"text-align\" : \"textAlign\",\n\t\t\t\t\"border-top\" : \"borderTop\",\n\t\t\t\t\"border-left\" : \"borderLeft\",\n\t\t\t\t\"border-right\" : \"borderRight\",\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\n\t\t\t\t\"padding-top\" : \"paddingTop\",\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\n\t\t\t\t\"padding-right\" : \"paddingRight\",\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\n\t\t\t};\n\t\t\t\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\t\t\t\t\n\t\t\t\tprops.forEach(function(prop){\n\t\t\t\t\tif(!to.style[lookup[prop]]){\n\t\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nExport.moduleName = \"export\";\n\nexport default Export;\n","export default {\n\n\t//equal to\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\n\n\t\tif(typeof filterVal == \"string\"){\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\tmatches = [];\n\n\t\tkeywords.forEach((keyword) =>{\n\t\t\tif(value.includes(keyword)){\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(Array.isArray(filterVal)){\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultFilters from './defaults/filters.js';\n\nclass Filter extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t\tthis.tableInitialized = false;\n\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\n\t\tthis.registerColumnOption(\"headerFilter\");\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\n\t\tthis.registerColumnOption(\"headerFilterParams\");\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\n\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\n\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\n\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n\t\t}\n\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialFilter){\n\t\t\tthis.setFilter(this.table.options.initialFilter);\n\t\t}\n\n\t\tif(this.table.options.initialHeaderFilter){\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\n\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.tableInitialized = true;\n\t}\n\n\tremoteFilterParams(data, config, silent, params){\n\t\tparams.filter = this.getFilters(true, true);\n\t\treturn params;\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t//set standard filters\n\tuserSetFilter(field, type, value, params){\n\t\tthis.setFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\t//set standard filters\n\tuserRefreshFilter(){\n\t\tthis.refreshFilter();\n\t}\n\n\t//add filter to array\n\tuserAddFilter(field, type, value, params){\n\t\tthis.addFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\tuserSetHeaderFilterFocus(field){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterFocus(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserGetHeaderFilterValue(field) {\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\treturn this.getHeaderFilterValue(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n\n\tuserSetHeaderFilterValue(field, value){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterValue(column, value);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//remove filter from array\n\tuserRemoveFilter(field, type, value){\n\t\tthis.removeFilter(field, type, value);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear filters\n\tuserClearFilter(all){\n\t\tthis.clearFilter(all);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear header filters\n\tuserClearHeaderFilter(){\n\t\tthis.clearHeaderFilter();\n\t\tthis.refreshFilter();\n\t}\n\n\n\t//search for specific row components\n\tsearchRows(field, type, value){\n\t\treturn this.search(\"rows\", field, type, value);\n\t}\n\n\t//search for specific data\n\tsearchData(field, type, value){\n\t\treturn this.search(\"data\", field, type, value);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnHeaderFilter(column){\n\t\tvar def = column.definition;\n\n\t\tif(def.headerFilter){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column header filter\n\tinitializeColumn(column, value){\n\t\tvar self = this,\n\t\tfield = column.getField();\n\n\t\t//handle successfully value change\n\t\tfunction success(value){\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\ttype = \"\",\n\t\t\tfilterChangeCheck = \"\",\n\t\t\tfilterFunc;\n\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!filterFunc){\n\t\t\t\t\t\tswitch(filterType){\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type};\n\t\t\t\t}else{\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.trackChanges();\n\t\t\t\t\tself.refreshFilter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess:success,\n\t\t\tattrType:false,\n\t\t\ttagType:false,\n\t\t\temptyFunc:false,\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t}\n\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\n\t\tvar self = this,\n\t\tsuccess = column.modules.filter.success,\n\t\tfield = column.getField(),\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params, onRenderedCallback;\n\n\t\tcolumn.modules.filter.value = initialValue;\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){}\n\n\t\tfunction onRendered(callback){\n\t\t\tonRenderedCallback = callback;\n\t\t}\n\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif(field){\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\n\t\t\t\treturn !value && value !== 0;\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch(typeof column.definition.headerFilter){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(editor){\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight:function(){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n\n\t\t\t\tif(!editorElement){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(!(editorElement instanceof Node)){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : (column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\")));\n\t\t\t\t});\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\n\t\t\t\t\tvar left = this.table.columnManager.contentsElement.scrollLeft;\n\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft;\n\n\t\t\t\t\tif(left !== headerPos){\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function(e){\n\t\t\t\t\tif(typingTimer){\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function(){\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propagating click to column sorters etc\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif(!reinitialize){\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\n\t\t\t\tif(onRenderedCallback){\n\t\t\t\t\tonRenderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t}\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\thideHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tshowHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t}\n\n\t//programmatically set focus of header filter\n\tsetHeaderFilterFocus(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically get value of header filter\n\tgetHeaderFilterValue(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\treturn column.modules.filter.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically set value of header filter\n\tsetHeaderFilterValue(column, value){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\treloadHeaderFilter(column){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshFilter(){\n\t\tif(this.tableInitialized){\n\t\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\t\tthis.reloadData(null, false, false);\n\t\t\t}else{\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the filters has changed since last use\n\ttrackChanges(){\n\t\tthis.changed = true;\n\t\tthis.dispatch(\"filter-changed\");\n\t}\n\n\t//check if the filters has changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//set standard filters\n\tsetFilter(field, type, value, params){\n\t\tthis.filterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tthis.addFilter(field);\n\t}\n\n\t//add filter to array\n\taddFilter(field, type, value, params){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tthis.filterList.push(filter);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\n\t\tif(changed){\n\t\t\tthis.trackChanges();\n\t\t}\n\t}\n\n\tfindFilter(filter){\n\t\tvar column;\n\n\t\tif(Array.isArray(filter)){\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif(typeof filter.field == \"function\"){\n\t\t\tfilterFunc = function(data){\n\t\t\t\treturn filter.field(data, filter.type || {});// pass params to custom filter function\n\t\t\t};\n\t\t}else{\n\n\t\t\tif(Filter.filters[filter.type]){\n\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t}\n\n\tfindSubFilters(filters){\n\t\tvar output = [];\n\n\t\tfilters.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t}\n\n\t//get all filters\n\tgetFilters(all, ajax){\n\t\tvar output = [];\n\n\t\tif(all){\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif(ajax){\n\t\t\toutput.forEach(function(item){\n\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t}\n\n\t//filter to Object\n\tfiltersToArray(filterList, ajax){\n\t\tvar output = [];\n\n\t\tfilterList.forEach((filter) => {\n\t\t\tvar item;\n\n\t\t\tif(Array.isArray(filter)){\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\n\t\t\t}else{\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value};\n\n\t\t\t\tif(ajax){\n\t\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get all filters\n\tgetHeaderFilters(){\n\t\tvar output = [];\n\n\t\tfor(var key in this.headerFilters){\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//remove filter from array\n\tremoveFilter(field, type, value){\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tvar index = -1;\n\n\t\t\tif(typeof filter.field == \"object\"){\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.filterList.splice(index, 1);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear filters\n\tclearFilter(all){\n\t\tthis.filterList = [];\n\n\t\tif(all){\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear header filters\n\tclearHeaderFilter(){\n\t\tthis.headerFilters = {};\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach((column) => {\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\n\t\t\t\tdelete column.modules.filter.value;\n\t\t\t}\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tthis.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//search data and return matching rows\n\tsearch (searchType, field, type, value){\n\t\tvar activeRows = [],\n\t\tfilterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach((filter) => {\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\n\t\t});\n\n\t\treturn activeRows;\n\t}\n\n\t//filter row array\n\tfilter(rowList, filters){\n\t\tvar activeRows = [],\n\t\tactiveRowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n\t\t}\n\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\n\n\t\t\trowList.forEach((row) => {\n\t\t\t\tif(this.filterRow(row)){\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else{\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\n\n\t\t\tactiveRows.forEach((row) => {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t}\n\n\t//filter individual row\n\tfilterRow(row, filters){\n\t\tvar match = true,\n\t\tdata = row.getData();\n\n\t\tthis.filterList.forEach((filter) => {\n\t\t\tif(!this.filterRecurse(filter, data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\n\t\tfor(var field in this.headerFilters){\n\t\t\tif(!this.headerFilters[field].func(data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfilterRecurse(filter, data){\n\t\tvar match = false;\n\n\t\tif(Array.isArray(filter)){\n\t\t\tfilter.forEach((subFilter) => {\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t}\n}\n\nFilter.moduleName = \"filter\";\n\n//load defaults\nFilter.filters = defaultFilters;\n\nexport default Filter;","export default function(cell, formatterParams, onRendered){\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}","export default function(cell, formatterParams, onRendered){\n\treturn cell.getValue();\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}","export default function(cell, formatterParams, onRendered){\n\tvar floatVal = parseFloat(cell.getValue()),\n\tsign = \"\",\n\tnumber, integer, decimal, rgx;\n\n\tvar decimalSym = formatterParams.decimal || \".\";\n\tvar thousandSym = formatterParams.thousand || \",\";\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\n\tvar symbol = formatterParams.symbol || \"\";\n\tvar after = !!formatterParams.symbolAfter;\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\tif(isNaN(floatVal)){\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t}\n\n\tif(floatVal < 0){\n\t\tfloatVal = Math.abs(floatVal);\n\t\tsign = negativeSign;\n\t}\n\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\tnumber = String(number).split(\".\");\n\n\tinteger = number[0];\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\tif (formatterParams.thousand !== false) {\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)){\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\t}\n\n\treturn after ? sign + integer + decimal + symbol : sign + symbol + integer + decimal;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\turlPrefix = formatterParams.urlPrefix || \"\",\n\tdownload = formatterParams.download,\n\tlabel = value,\n\tel = document.createElement(\"a\"),\n\tdata;\n\n\tfunction labelTraverse(path, data){\n\t\tvar item = path.shift(),\n\t\tvalue = data[item];\n\t\t\n\t\tif(path.length && typeof value === \"object\"){\n\t\t\treturn labelTraverse(path, value);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tif(formatterParams.labelField){\n\t\tdata = cell.getData();\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n\t}\n\n\tif(formatterParams.label){\n\t\tswitch(typeof formatterParams.label){\n\t\t\tcase \"string\":\n\t\t\t\tlabel = formatterParams.label;\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(label){\n\t\tif(formatterParams.urlField){\n\t\t\tdata = cell.getData();\n\t\t\tvalue = data[formatterParams.urlField];\n\t\t}\n\n\t\tif(formatterParams.url){\n\t\t\tswitch(typeof formatterParams.url){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\tif(formatterParams.target){\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t}\n\n\t\tif(formatterParams.download){\n\n\t\t\tif(typeof download == \"function\"){\n\t\t\t\tdownload = download(cell);\n\t\t\t}else{\n\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t}\n\n\t\t\tel.setAttribute(\"download\", download);\n\t\t}\n\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\treturn el;\n\t}else{\n\t\treturn \"&nbsp;\";\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"img\"),\n\tsrc = cell.getValue();\n\n\tif(formatterParams.urlPrefix){\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\n\t}\n\n\tif(formatterParams.urlSuffix){\n\t\tsrc = src + formatterParams.urlSuffix;\n\t}\n\n\tel.setAttribute(\"src\", src);\n\n\tswitch(typeof formatterParams.height){\n\t\tcase \"number\":\n\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.height = formatterParams.height;\n\t\t\tbreak;\n\t}\n\n\tswitch(typeof formatterParams.width){\n\t\tcase \"number\":\n\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.width = formatterParams.width;\n\t\t\tbreak;\n\t}\n\n\tel.addEventListener(\"load\", function(){\n\t\tcell.getRow().normalizeHeight();\n\t});\n\n\treturn el;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tempty = formatterParams.allowEmpty,\n\ttruthy = formatterParams.allowTruthy,\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\n\t\telement.setAttribute(\"aria-checked\", true);\n\t\treturn tick || \"\";\n\t}else{\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\treturn \"\";\n\t\t}else{\n\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\treturn cross || \"\";\n\t\t}\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif(newDatetime.isValid){\n\t\t\tif(formatterParams.timezone){\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\n\t\t\t}\n\n\t\t\treturn newDatetime.toFormat(outputFormat);\n\t\t}else{\n\t\t\tif(invalid === true || !value){\n\t\t\t\treturn value;\n\t\t\t}else if(typeof invalid === \"function\"){\n\t\t\t\treturn invalid(value);\n\t\t\t}else{\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n\t}\n}","export default function (cell, formatterParams, onRendered) {\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif (newDatetime.isValid){\n\t\t\tif(humanize){\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\n\t\t\t}else{\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n\t}\n}","export default function (cell, formatterParams, onRendered) {\n\tvar value = cell.getValue();\n\n\tif (typeof formatterParams[value] === \"undefined\") {\n\t\tconsole.warn('Missing display value for ' + value);\n\t\treturn value;\n\t}\n\n\treturn formatterParams[value];\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\tstars = document.createElement(\"span\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t//style stars holder\n\tstars.style.verticalAlign = \"middle\";\n\n\t//style star\n\tstar.setAttribute(\"width\", \"14\");\n\tstar.setAttribute(\"height\", \"14\");\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\tfor(var i=1;i<= maxStars;i++){\n\t\tvar nextStar = star.cloneNode(true);\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\tstars.appendChild(nextStar);\n\t}\n\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\telement.setAttribute(\"aria-label\", value);\n\n\treturn stars;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\tel = document.createElement(\"span\"),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\tcolor = \"#666666\",\n\tpercent, percentValue;\n\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\n\t\treturn;\n\t}\n\n\tel.classList.add(\"tabulator-traffic-light\");\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set color\n\tswitch(typeof colors){\n\t\tcase \"string\":\n\t\t\tcolor = colors;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = colors(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(colors)){\n\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = colors[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n\n\tel.style.backgroundColor = color;\n\n\treturn el;\n}","import CellComponent from '../../../../core/cell/CellComponent.js';\n\nexport default function(cell, formatterParams = {}, onRendered){ //progress bar\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\telement = cell.getElement(),\n\tmax = formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams.min ? formatterParams.min : 0,\n\tlegendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\tpercent, percentValue, color, legend, legendColor;\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set bar color\n\tswitch(typeof formatterParams.color){\n\t\tcase \"string\":\n\t\t\tcolor = formatterParams.color;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = formatterParams.color(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.color)){\n\t\t\t\tlet unit = 100 / formatterParams.color.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\tdefault:\n\t\t\tcolor = \"#2DC214\";\n\t}\n\n\t//generate legend\n\tswitch(typeof formatterParams.legend){\n\t\tcase \"string\":\n\t\t\tlegend = formatterParams.legend;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegend = formatterParams.legend(value);\n\t\t\tbreak;\n\t\tcase \"boolean\":\n\t\t\tlegend = value;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegend = false;\n\t}\n\n\t//set legend color\n\tswitch(typeof formatterParams.legendColor){\n\t\tcase \"string\":\n\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.legendColor)){\n\t\t\t\tlet unit = 100 / formatterParams.legendColor.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegendColor = \"#000\";\n\t}\n\n\telement.style.minWidth = \"30px\";\n\telement.style.position = \"relative\";\n\n\telement.setAttribute(\"aria-label\", percentValue);\n\n\tvar barEl = document.createElement(\"div\");\n\tbarEl.style.display = \"inline-block\";\n\tbarEl.style.width = percentValue + \"%\";\n\tbarEl.style.backgroundColor = color;\n\tbarEl.style.height = \"100%\";\n\n\tbarEl.setAttribute('data-max', max);\n\tbarEl.setAttribute('data-min', min);\n\n\tvar barContainer = document.createElement(\"div\");\n\tbarContainer.style.position = \"relative\";\n\tbarContainer.style.width = \"100%\";\n\tbarContainer.style.height = \"100%\";\n\n\tif(legend){\n\t\tvar legendEl = document.createElement(\"div\");\n\t\tlegendEl.style.position = \"absolute\";\n\t\tlegendEl.style.top = 0;\n\t\tlegendEl.style.left = 0;\n\t\tlegendEl.style.textAlign = legendAlign;\n\t\tlegendEl.style.width = \"100%\";\n\t\tlegendEl.style.color = legendColor;\n\t\tlegendEl.innerHTML = legend;\n\t}\n\n\tonRendered(function(){\n\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\tif(!(cell instanceof CellComponent)){\n\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\tholderEl.style.position = \"absolute\";\n\t\t\tholderEl.style.top = \"4px\";\n\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\tholderEl.style.left = \"4px\";\n\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\telement.appendChild(holderEl);\n\n\t\t\telement = holderEl;\n\t\t}\n\n\t\telement.appendChild(barContainer);\n\t\tbarContainer.appendChild(barEl);\n\n\t\tif(legend){\n\t\t\tbarContainer.appendChild(legendEl);\n\t\t}\n\t});\n\n\treturn \"\";\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\treturn \"\";\n}","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}","export default function(cell, formatterParams, onRendered){\n\tvar content = document.createElement(\"span\");\n\tvar row = cell.getRow();\n\n\trow.watchPosition((position) => {\n\t\tcontent.innerText = position;\n\t});\n\t\n\treturn content;\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"div\"),\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\n\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\n\tel.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\tfunction toggleList(isOpen){\n\t\tvar collapseEl = config.element;\n\n\t\tconfig.open = isOpen;\n\n\t\tif(collapseEl){\n\n\t\t\tif(config.open){\n\t\t\t\tel.classList.add(\"open\");\n\t\t\t\tcollapseEl.style.display = '';\n\t\t\t}else{\n\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tel.addEventListener(\"click\", function(e){\n\t\te.stopImmediatePropagation();\n\t\ttoggleList(!config.open);\n\t\tcell.getTable().rowManager.adjustTableSize();\n\t});\n\n\ttoggleList(config.open);\n\n\treturn el;\n}","import RowComponent from '../../../../core/row/RowComponent.js';\n\nexport default function(cell, formatterParams, onRendered){\n\tvar checkbox = document.createElement(\"input\");\n\tvar blocked = false;\n\n\tcheckbox.type = 'checkbox';\n\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\n\t\n\tif(this.table.modExists(\"selectRow\", true)){\n\n\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(typeof cell.getRow == 'function'){\n\t\t\tvar row = cell.getRow();\n\n\t\t\tif(row instanceof RowComponent){\n\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\t\tif(!blocked){\n\t\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tblocked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t}else{\n\t\t\t\tcheckbox = \"\";\n\t\t\t}\n\t\t}else {\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\n\t\t\t\t\tthis.table.deselectRow();\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t}\n\t}\n\n\treturn checkbox;\n}","import plaintext from './formatters/plaintext.js';\nimport html from './formatters/html.js';\nimport textarea from './formatters/textarea.js';\nimport money from './formatters/money.js';\nimport link from './formatters/link.js';\nimport image from './formatters/image.js';\nimport tickCross from './formatters/tickCross.js';\nimport datetime from './formatters/datetime.js';\nimport datetimediff from './formatters/datetimediff.js';\nimport lookup from './formatters/lookup.js';\nimport star from './formatters/star.js';\nimport traffic from './formatters/traffic.js';\nimport progress from './formatters/progress.js';\nimport color from './formatters/color.js';\nimport buttonTick from './formatters/buttonTick.js';\nimport buttonCross from './formatters/buttonCross.js';\nimport rownum from './formatters/rownum.js';\nimport handle from './formatters/handle.js';\nimport responsiveCollapse from './formatters/responsiveCollapse.js';\nimport rowSelection from './formatters/rowSelection.js';\n\nexport default {\n\tplaintext:plaintext,\n\thtml:html,\n\ttextarea:textarea,\n\tmoney:money,\n\tlink:link,\n\timage:image,\n\ttickCross:tickCross,\n\tdatetime:datetime,\n\tdatetimediff:datetimediff,\n\tlookup:lookup,\n\tstar:star,\n\ttraffic:traffic,\n\tprogress:progress,\n\tcolor:color,\n\tbuttonTick:buttonTick,\n\tbuttonCross:buttonCross,\n\trownum:rownum,\n\thandle:handle,\n\tresponsiveCollapse:responsiveCollapse,\n\trowSelection:rowSelection,\n};","import Module from '../../core/Module.js';\n\nimport defaultFormatters from './defaults/formatters.js';\n\nclass Format extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerColumnOption(\"formatter\");\n\t\tthis.registerColumnOption(\"formatterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"formatterPrint\");\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\n\t\tthis.registerColumnOption(\"formatterClipboard\");\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\n\t\tthis.registerColumnOption(\"titleFormatter\");\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\n\t}\n\t\n\t//initialize column formatter\n\tinitializeColumn(column){\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\t\t\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t\t}\n\t}\n\t\n\tlookupFormatter(column, type){\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\n\t\tformatter = column.definition[\"formatter\" + type];\n\t\t\n\t\t//set column formatter\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tconfig.formatter = Format.formatters[formatter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.formatter = formatter;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn config;\n\t}\n\t\n\tcellRendered(cell){\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\n\t\t\tcell.modules.format.renderedCallback();\n\t\t\tcell.modules.format.rendered = true;\n\t\t}\n\t}\n\t\n\t//return a formatted value for a column header\n\tformatHeader(column, title, el){\n\t\tvar formatter, params, onRendered, mockCell;\n\t\t\n\t\tif(column.definition.titleFormatter){\n\t\t\tformatter = this.getFormatter(column.definition.titleFormatter);\n\t\t\t\n\t\t\tonRendered = (callback) => {\n\t\t\t\tcolumn.titleFormatterRendered = callback;\n\t\t\t};\n\t\t\t\n\t\t\tmockCell = {\n\t\t\t\tgetValue:function(){\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tgetElement:function(){\n\t\t\t\t\treturn el;\n\t\t\t\t},\n\t\t\t\tgetColumn:function(){\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetTable:() => {\n\t\t\t\t\treturn this.table;\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tparams = column.definition.titleFormatterParams || {};\n\t\t\t\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\t\t\t\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\n\t\t}else{\n\t\t\treturn title;\n\t\t}\n\t}\n\t\n\t\n\t//return a formatted value for a cell\n\tformatValue(cell){\n\t\tvar component = cell.getComponent(),\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\tif(!cell.modules.format){\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\t\t\t\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t}\n\t\t\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t}\n\t\n\tformatExportValue(cell, type){\n\t\tvar formatter = cell.column.modules.format[type],\n\t\tparams;\n\t\t\n\t\tif(formatter){\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n\t\t\t\n\t\t\tfunction onRendered(callback){\n\t\t\t\tif(!cell.modules.format){\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t\tcell.modules.format.rendered = false;\n\t\t\t}\n\t\t\t\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t\t\n\t\t}else{\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t}\n\t\n\tsanitizeHTML(value){\n\t\tif(value){\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\t\t\t\n\t\t\treturn String(value).replace(/[&<>\"'`=/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t}else{\n\t\t\treturn value;\n\t\t}\n\t}\n\t\n\temptyToSpace(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t}\n\t\n\t//get formatter for cell\n\tgetFormatter(formatter){\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tformatter = Format.formatters[formatter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t//Custom formatter Function, do nothing\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn formatter;\n\t}\n}\n\nFormat.moduleName = \"format\";\n\n//load defaults\nFormat.formatters = defaultFormatters;\n\nexport default Format;","import Module from '../../core/Module.js';\n\nclass FrozenColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.blocked = true;\n\t\t\n\t\tthis.registerColumnOption(\"frozen\");\n\t}\n\t\n\t//reset initial state\n\treset(){\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.active = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\n\t\t\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.reinitializeColumns.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t}\n\t\n\tblockLayout(){\n\t\tthis.blocked = true;\n\t}\n\t\n\tunblockLayout(){\n\t\tthis.blocked = false;\n\t}\n\t\n\tlayoutCell(cell){\n\t\tthis.layoutElement(cell.element, cell.column);\n\t}\n\t\n\treinitializeColumns(){\n\t\tthis.reset();\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tthis.initializeColumn(column);\n\t\t});\n\t}\n\t\n\t//initialize specific column\n\tinitializeColumn(column){\n\t\tvar config = {margin:0, edge:false};\n\t\t\n\t\tif(!column.isGroup){\n\t\t\t\n\t\t\tif(this.frozenCheck(column)){\n\t\t\t\t\n\t\t\t\tconfig.position = this.initializationMode;\n\t\t\t\t\n\t\t\t\tif(this.initializationMode == \"left\"){\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t}else{\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.active = true;\n\t\t\t\t\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t}else{\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfrozenCheck(column){\n\t\tif(column.parent.isGroup && column.definition.frozen){\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\t\t\n\t\tif(column.parent.isGroup){\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t}else{\n\t\t\treturn column.definition.frozen;\n\t\t}\n\t}\n\t\n\t//layout calculation rows\n\tlayoutCalcRows(){\n\t\tif(this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modExists(\"groupRows\")){\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlayoutGroupCalcs(groups){\n\t\tgroups.forEach((group) => {\n\t\t\tif(group.calcs.top){\n\t\t\t\tthis.layoutRow(group.calcs.top);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.calcs.bottom){\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.groupList && group.groupList.length){\n\t\t\t\tthis.layoutGroupCalcs(group.groupList);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//calculate column positions and layout headers\n\tlayoutColumnPosition(allCells){\n\t\tvar leftParents = [];\n\t\t\n\t\tvar leftMargin = 0;\n\t\tvar rightMargin = 0;\n\t\t\n\t\tthis.leftColumns.forEach((column, i) => {\t\n\t\t\tcolumn.modules.frozen.marginValue = leftMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tleftMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.leftColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\n\t\t\t\tif(!leftParents.includes(parentEl)){\n\t\t\t\t\tthis.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.modules.frozen.edge){\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column, i) => {\n\t\t\t\n\t\t\tcolumn.modules.frozen.marginValue = rightMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\trightMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.rightColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tgetColGroupParentElement(column){\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t}\n\t\n\t//layout columns appropriately\n\tlayout(){\t\n\t\tif(this.active && !this.blocked){\n\t\t\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition();\n\t\t\t\n\t\t\tthis.reinitializeRows();\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t}\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.table.rowManager.getVisibleRows(true);\n\t\tvar otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\t\t\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t\t\n\t\tvisibleRows.forEach((row) =>{\n\t\t\tif(row.type === \"row\"){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutRow(row){\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n\t\t}\n\t\t\n\t\tthis.leftColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutElement(element, column){\n\t\tvar position;\n\t\t\n\t\tif(column.modules.frozen){\n\t\t\telement.style.position = \"sticky\";\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tposition = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n\t\t\t}else{\n\t\t\t\tposition = column.modules.frozen.position;\n\t\t\t}\n\t\t\n\t\t\telement.style[position] = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\t\t\t\n\t\t\tif(column.modules.frozen.edge){\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustForScrollbar(width){\n\t\tif(this.rightColumns.length){\n\t\t\tthis.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n\t\t}\n\t}\n\t\n\t_calcSpace(columns, index){\n\t\tvar width = 0;\n\t\t\n\t\tfor (let i = 0; i < index; i++){\n\t\t\tif(columns[i].visible){\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n}\n\nFrozenColumns.moduleName = \"frozenColumns\";\n\nexport default FrozenColumns;","import Module from '../../core/Module.js';\n\nclass FrozenRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n\t\t//register table options\n\t\tthis.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n\t\tthis.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n\t}\n\n\tinitialize(){\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\n\n\t\tif(this.table.options.frozenRows){\n\t\t\tthis.subscribe(\"data-processed\", this.initializeRows.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t}\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\tinitializeRows(){\n\t\tthis.table.rowManager.getRows().forEach((row) => {\n\t\t\tthis.initializeRow(row);\n\t\t});\n\t}\n\n\tinitializeRow(row){\n\t\tvar frozenRows = this.table.options.frozenRows,\n\t\trowType = typeof frozenRows;\n\n\t\tif(rowType === \"number\"){\n\t\t\tif(row.getPosition() && (row.getPosition() + this.rows.length) <= frozenRows){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(rowType === \"function\"){\n\t\t\tif(frozenRows.call(this.table, row.getComponent())){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(Array.isArray(frozenRows)){\n\t\t\tif(frozenRows.includes(row.data[this.options(\"frozenRowsField\")])){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowFrozen(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\treturn index > -1;\n\t}\n\n\tisFrozen(){\n\t\treturn !!this.rows.length;\n\t}\n\n\tvisibleRows(viewable, rows){\n\t\tthis.rows.forEach((row) => {\n\t\t\trows.push(row);\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\t//filter frozen rows out of display data\n\tgetRows(rows){\n\t\tvar output = rows.slice(0);\n\n\t\tthis.rows.forEach(function(row){\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif(index > -1){\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tfreezeRow(row){\n\t\tif(!row.modules.frozen){\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.styleRows();\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t}\n\n\tunfreezeRow(row){\n\t\tif(row.modules.frozen){\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tif(this.rows.length){\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t}\n\n\tdetachRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t}\n\n\tstyleRows(row){\n\t\tthis.rows.forEach((row, i) => {\n\t\t\tthis.table.rowManager.styleRow(row, i);\n\t\t});\n\t}\n}\n\nFrozenRows.moduleName = \"frozenRows\";\n\nexport default FrozenRows;","//public group object\nclass GroupComponent {\n\tconstructor (group){\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKey(){\n\t\treturn this._group.key;\n\t}\n\n\tgetField(){\n\t\treturn this._group.field;\n\t}\n\n\tgetElement(){\n\t\treturn this._group.element;\n\t}\n\n\tgetRows(){\n\t\treturn this._group.getRows(true);\n\t}\n\n\tgetSubGroups(){\n\t\treturn this._group.getSubGroups(true);\n\t}\n\n\tgetParentGroup(){\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t}\n\n\tisVisible(){\n\t\treturn this._group.visible;\n\t}\n\n\tshow(){\n\t\tthis._group.show();\n\t}\n\n\thide(){\n\t\tthis._group.hide();\n\t}\n\n\ttoggle(){\n\t\tthis._group.toggleVisibility();\n\t}\n\n\t_getSelf(){\n\t\treturn this._group;\n\t}\n\n\tgetTable(){\n\t\treturn this._group.groupManager.table;\n\t}\n}\n\nexport default GroupComponent;","import Helpers from '../../core/tools/Helpers.js';\nimport GroupComponent from './GroupComponent.js';\n\n//Group functions\nclass Group{\n\t\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.element = false;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\t\t\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\t\t\n\t\tthis.createValueGroups();\n\t}\n\t\n\twipe(elementsOnly){\n\t\tif(!elementsOnly){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\tgroup.wipe();\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tif(row.modules){\n\t\t\t\t\t\tdelete row.modules.group;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n\t\n\tcreateElements(){\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\t\t\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\n\t\t//setup movable rows\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t}\n\t\n\tcreateValueGroups(){\n\t\tvar level = this.level + 1;\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\n\t\t\t\tthis._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t}\n\t\n\taddBindings(){\n\t\tvar toggleElement;\n\t\t\n\t\tif(this.groupManager.table.options.groupToggleElement){\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n\t\t\t\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tthis.toggleVisibility();\n\t\t\t});\n\t\t}\n\t}\n\t\n\t_createGroup(groupID, level){\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\t_addRowToGroup(row){\n\t\t\n\t\tvar level = this.level + 1;\n\t\t\n\t\tif(this.hasSubGroups){\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\tgroupKey = level + \"_\" + groupID;\n\t\t\t\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\t\tif(this.groups[groupKey]){\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(!this.groups[groupKey]){\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_addRow(row){\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t}\n\t\n\tinsertRow(row, to, after){\n\t\tvar data = this.conformRowData({});\n\t\t\n\t\trow.updateData(data);\n\t\t\n\t\tvar toIndex = this.rows.indexOf(to);\n\t\t\n\t\tif(toIndex > -1){\n\t\t\tif(after){\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\n\t\t\t}else{\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t}else{\n\t\t\tif(after){\n\t\t\t\tthis.rows.push(row);\n\t\t\t}else{\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\trow.modules.group = this;\n\t\t\n\t\t// this.generateGroupHeaderContents();\n\t\t\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t\t\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\t\n\tscrollHeader(left){\n\t\tif(this.arrowElement){\n\t\t\tthis.arrowElement.style.marginLeft = left;\n\t\t\t\n\t\t\tthis.groupList.forEach(function(child){\n\t\t\t\tchild.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetRowIndex(row){}\n\t\n\t//update row data to match grouping constraints\n\tconformRowData(data){\n\t\tif(this.field){\n\t\t\tdata[this.field] = this.key;\n\t\t}else{\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\t\t\n\t\tif(this.parent){\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\tremoveRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t}else{\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\t\t\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(el.parentNode){\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\n\t\t\tif(!this.groupManager.blockRedraw){\n\t\t\t\tthis.generateGroupHeaderContents();\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupList.length){\n\t\t\t\tif(this.parent){\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t}else{\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetHeadersAndRows(){\n\t\tvar output = [];\n\t\t\n\t\toutput.push(this);\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\t\n\t\tif(this.calcs.top){\n\t\t\tthis.calcs.top.detachElement();\n\t\t\tthis.calcs.top.deleteCells();\n\t\t}\n\t\t\n\t\tif(this.calcs.bottom){\n\t\t\tthis.calcs.bottom.detachElement();\n\t\t\tthis.calcs.bottom.deleteCells();\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tif(this.visible){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toutput = output.concat(this.rows);\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetData(visible, transform){\n\t\tvar output = [];\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(!visible || (visible && this.visible)){\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRowCount(){\n\t\tvar count = 0;\n\t\t\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t}else{\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t}\n\t\n\ttoggleVisibility(){\n\t\tif(this.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\t\n\thide(){\n\t\tthis.visible = false;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\t\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n\t}\n\t\n\tshow(){\n\t\tthis.visible = true;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tvar prev = this.generateElement();\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n\t}\n\t\n\t_visSet(){\n\t\tvar data = [];\n\t\t\n\t\tif(typeof this.visible == \"function\"){\n\t\t\t\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\t\t\t\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tif(this.rows.find(function(item){\n\t\t\t\treturn item === row;\n\t\t\t})){\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetSubGroups(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.groupList.forEach(function(child){\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRows(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.rows.forEach(function(row){\n\t\t\toutput.push(component ? row.getComponent() : row);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgenerateGroupHeaderContents(){\n\t\tvar data = [];\n\t\t\n\t\tthis.rows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(typeof this.elementContents === \"string\"){\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t}else{\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\t\t\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t}\n\t\n\tgetPath(path = []) {\n\t\tpath.unshift(this.key);\n\t\tif(this.parent) {\n\t\t\tthis.parent.getPath(path);\n\t\t}\n\t\treturn path;\n\t}\n\t\n\t////////////// Standard Row Functions //////////////\n\t\n\tgetElement(){\n\t\treturn this.elementContents ? this.element : this.generateElement();\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.addBindings = false;\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t}else{\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\t// this.addBindings();\n\t\t\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(){\n\t\tthis.setHeight(this.element.clientHeight);\n\t}\n\t\n\tinitialize(force){\n\t\tif(!this.initialized || force){\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\treinitialize(){\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\t\t\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.initialize(true);\n\t\t}\n\t}\n\t\n\tsetHeight(height){\n\t\tif(this.height != height){\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\tgetGroup(){\n\t\treturn this;\n\t}\n\t\n\treinitializeHeight(){}\n\t\n\tcalcHeight(){}\n\t\n\tsetCellHeight(){}\n\t\n\tclearCellHeight(){}\n\t\n\tdeinitializeHeight(){}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n\nexport default Group;","import Module from '../../core/Module.js';\n\nimport Group from './Group.js';\n\nclass GroupRows extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\t\n\t\tthis.displayHandler = this.getRows.bind(this);\n\n\t\tthis.blockRedraw = false;\n\t\t\n\t\t//register table options\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\n\t\tthis.registerTableOption(\"groupValues\", false);\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\n\t\t\n\t\t//register table functions\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n\t}\n\t\n\t//initialize group configuration\n\tinitialize(){\n\t\tthis.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t_blockRedrawing(){\n\t\tthis.blockRedraw = true;\n\t}\n\n\t_restore_redrawing(){\n\t\tthis.blockRedraw = false;\n\t}\n\n\tconfigureGroupSetup(){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar groupBy = this.table.options.groupBy,\n\t\t\tstartOpen = this.table.options.groupStartOpen,\n\t\t\tgroupHeader = this.table.options.groupHeader;\n\t\t\t\n\t\t\tthis.allowedValues = this.table.options.groupValues;\n\t\t\t\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\t\t\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t\t};\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupIDLookups = [];\n\t\t\t\n\t\t\tif(groupBy){\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\t\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\t\t\t\t\t\n\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\tif(col.definition.topCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(col.definition.bottomCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(!Array.isArray(groupBy)){\n\t\t\t\tgroupBy = [groupBy];\n\t\t\t}\n\t\t\t\n\t\t\tgroupBy.forEach((group, i) => {\n\t\t\t\tvar lookupFunc, column;\n\t\t\t\t\n\t\t\t\tif(typeof group == \"function\"){\n\t\t\t\t\tlookupFunc = group;\n\t\t\t\t}else{\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groupIDLookups.push({\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\t\tfunc:lookupFunc,\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(startOpen){\n\t\t\t\tif(!Array.isArray(startOpen)){\n\t\t\t\t\tstartOpen = [startOpen];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tstartOpen.forEach((level) => {\n\t\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.startOpen = startOpen;\n\t\t\t}\n\t\t\t\n\t\t\tif(groupHeader){\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t\t}\n\t\t}else{\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\trowSample(rows, prevValue){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar group = this.getGroups(false)[0];\n\t\t\t\n\t\t\tprevValue.push(group.getRows(false)[0]);\n\t\t}\n\t\t\n\t\treturn prevValue;\n\t}\n\t\n\tvirtualRenderFill(){\n\t\tvar el = this.table.rowManager.tableElement;\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\trows = rows.filter((row) => {\n\t\t\t\treturn row.type !== \"group\";\n\t\t\t});\n\t\t\t\n\t\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n\t\t}else{\n\t\t\treturn rows;\n\t\t}\n\t}\n\t\n\trowAddingIndex(row, index, top){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.assignRowToGroup(row);\n\t\t\t\n\t\t\tvar groupRows = row.modules.group.rows;\n\t\t\t\n\t\t\tif(groupRows.length > 1){\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\n\t\t\t\t\tif(top){\n\t\t\t\t\t\tif(groupRows[0] !== row){\n\t\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn index;\n\t\t}\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"group-changed\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tsetGroupBy(groups){\n\t\tthis.table.options.groupBy = groups;\n\t\t\n\t\tif(!this.initialized){\n\t\t\tthis.initialize();\n\t\t}\n\t\t\n\t\tthis.configureGroupSetup();\n\n\t\tif(!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true){\n\t\t\tthis.table.modules.columnCalcs.reinitializeCalcs();\n\t\t}\n\t\t\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupValues(groupValues){\n\t\tthis.table.options.groupValues = groupValues;\n\t\tthis.configureGroupSetup();\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupStartOpen(values){\n\t\tthis.table.options.groupStartOpen = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tsetGroupHeader(values){\n\t\tthis.table.options.groupHeader = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tuserGetGroups(values){\n\t\treturn this.getGroups(true);\n\t}\n\t\n\t// get grouped table data in the same format as getData()\n\tuserGetGroupedData(){\n\t\treturn this.table.options.groupBy ? this.getGroupedData() : this.getData();\n\t}\n\t\n\t\n\t///////////////////////////////////////\n\t///////// Component Functions /////////\n\t///////////////////////////////////////\n\t\n\trowGetGroup(row){\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\trowMoving(from, to, after){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(!after && to instanceof Group){\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\t\t\t\n\t\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\n\t\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\n\t\t\t\n\t\t\tif(toGroup === fromGroup){\n\t\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t}else{\n\t\t\t\tif(fromGroup){\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\trowDeleting(row){\n\t\t//remove from group\n\t\tif(this.table.options.groupBy && row.modules.group){\n\t\t\trow.modules.group.removeRow(row);\n\t\t}\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.updateGroupRows(true);\n\t\t}\t\n\t}\n\t\n\tcellUpdated(cell){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.reassignRowToGroup(cell.row);\n\t\t}\n\t}\n\t\n\t//return appropriate rows with group headers\n\tgetRows(rows){\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\n\t\t\t\n\t\t\tthis.generateGroups(rows);\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n\t\t\t}\n\t\t\t\n\t\t\treturn this.updateGroupRows();\n\t\t\t\n\t\t}else{\n\t\t\treturn rows.slice(0);\n\t\t}\n\t}\n\t\n\tgetGroups(component){\n\t\tvar groupComponents = [];\n\t\t\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\tgetChildGroups(group){\n\t\tvar groupComponents = [];\n\t\t\n\t\tif(!group){\n\t\t\tgroup = this;\n\t\t}\n\t\t\n\t\tgroup.groupList.forEach((child) => {\n\t\t\tif(child.groupList.length){\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\n\t\t\t}else{\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\twipe(){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\tpullGroupListData(groupList) {\n\t\tvar groupListData = [];\n\t\t\n\t\tgroupList.forEach((group) => {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\t\t\t\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\n\t\t\t\t\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\t\n\t\t\t\tgroup.getRows().forEach((row) => {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupListData;\n\t}\n\t\n\tgetGroupedData(){\n\t\t\n\t\treturn this.pullGroupListData(this.groupList);\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\t\n\t\tif(this.options(\"dataTree\")){\n\t\t\trow = this.table.modules.dataTree.getTreeParentRoot(row);\n\t\t}\n\t\t\n\t\tthis.groupList.forEach((group) => {\n\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\n\t\t\tif(result){\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tcountGroups(){\n\t\treturn this.groupList.length;\n\t}\n\t\n\tgenerateGroups(rows){\n\t\tvar oldGroups = this.groups;\n\t\t\n\t\tthis.groups = {};\n\t\tthis.groupList = [];\n\t\t\n\t\tif(this.allowedValues && this.allowedValues[0]){\n\t\t\tthis.allowedValues[0].forEach((value) => {\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\n\t\t\t});\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t}else{\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t\t\n\t\tObject.values(oldGroups).forEach((group) => {\n\t\t\tgroup.wipe(true);\n\t\t});\t\n\t}\n\t\n\t\n\tcreateGroup(groupID, level, oldGroups){\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\tgroup;\n\t\t\n\t\toldGroups = oldGroups || [];\n\t\t\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\tassignRowToExistingGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tgroupKey = \"0_\" + groupID;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n\t\n\tassignRowToGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\n\t\t\n\t\tif(newGroupNeeded){\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\t\t\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\t\t\n\t\treturn !newGroupNeeded;\n\t}\n\t\n\treassignRowToGroup(row){\n\t\tif(row.type === \"row\"){\n\t\t\tvar oldRowGroup = row.modules.group,\n\t\t\toldGroupPath = oldRowGroup.getPath(),\n\t\t\tnewGroupPath = this.getExpectedPath(row),\n\t\t\tsamePath;\n\t\t\t\n\t\t\t// figure out if new group path is the same as old group path\n\t\t\tsamePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\n\t\t\t\treturn element === newGroupPath[index];\n\t\t\t});\n\t\t\t\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\t\t\tif(!samePath) {\n\t\t\t\toldRowGroup.removeRow(row);\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetExpectedPath(row) {\n\t\tvar groupPath = [], rowData = row.getData();\n\t\t\n\t\tthis.groupIDLookups.forEach((groupId) => {\n\t\t\tgroupPath.push(groupId.func(rowData));\n\t\t});\n\t\t\n\t\treturn groupPath;\n\t}\n\t\n\tupdateGroupRows(force){\n\t\tvar output = [];\n\n\t\tif(!this.blockRedraw){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tscrollHeaders(left){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\n\t\t\t}\n\t\t\t\n\t\t\tleft = left + \"px\";\n\t\t\t\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tgroup.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcheckBasicModeGroupHeaderWidth(){\n\t\tvar element = this.table.rowManager.tableElement,\n\t\tonlyGroupHeaders = true;\n\t\t\n\t\tthis.table.rowManager.getDisplayRows().forEach((row, index) =>{\n\t\t\tthis.table.rowManager.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t\t\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n}\n\nGroupRows.moduleName = \"groupRows\";\n\nexport default GroupRows;","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowDelete: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n\t\tthis.table.rowManager.redraw();\n\t},\n};","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowDelete:function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n\t\tthis.table.rowManager.redraw();\n\t},\n};","import Module from '../../core/Module.js';\nimport Row from '../../core/row/Row.js';\nimport Cell from '../../core/cell/Cell.js';\n\nimport defaultUndoers from './defaults/undoers.js';\nimport defaultRedoers from './defaults/redoers.js';\n\nclass History extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.history){\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n\t}\n\n\trowMoved(from, to, after){\n\t\tthis.action(\"rowMove\", from, {posFrom:from.getPosition(), posTo:to.getPosition(), to:to, after:after});\n\t}\n\n\trowAdded(row, data, pos, index){\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\n\t}\n\n\trowDeleted(row){\n\t\tvar index, rows;\n\n\t\tif(this.table.options.groupBy){\n\n\t\t\trows = row.getComponent().getGroup()._getSelf().rows;\n\t\t\tindex = rows.indexOf(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = rows[index-1];\n\t\t\t}\n\t\t}else{\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\n\t\t\t}\n\t\t}\n\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\n\t}\n\n\tclear(){\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t}\n\n\taction(type, component, data){\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype:type,\n\t\t\tcomponent:component,\n\t\t\tdata:data,\n\t\t});\n\n\t\tthis.index ++;\n\t}\n\n\tgetHistoryUndoSize(){\n\t\treturn this.index + 1;\n\t}\n\n\tgetHistoryRedoSize(){\n\t\treturn this.history.length - (this.index + 1);\n\t}\n\n\tclearComponentHistory(component){\n\t\tvar index = this.history.findIndex(function(item){\n\t\t\treturn item.component === component;\n\t\t});\n\n\t\tif(index > -1){\n\t\t\tthis.history.splice(index, 1);\n\t\t\tif(index <= this.index){\n\t\t\t\tthis.index--;\n\t\t\t}\n\n\t\t\tthis.clearComponentHistory(component);\n\t\t}\n\t}\n\n\tundo(){\n\t\tif(this.index > -1){\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tredo(){\n\t\tif(this.history.length-1 > this.index){\n\n\t\t\tthis.index++;\n\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.redoers[action.type].call(this, action);\n\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//rebind rows to new element after deletion\n\t_rebindRow(oldRow, newRow){\n\t\tthis.history.forEach(function(action){\n\t\t\tif(action.component instanceof Row){\n\t\t\t\tif(action.component === oldRow){\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t}else if(action.component instanceof Cell){\n\t\t\t\tif(action.component.row === oldRow){\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif(field){\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nHistory.moduleName = \"history\";\n\n//load defaults\nHistory.undoers = defaultUndoers;\nHistory.redoers = defaultRedoers;\n\nexport default History;","import Module from '../../core/Module.js';\n\nclass HtmlTableImport extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t}\n\n\tinitialize(){\n\t\tthis.tableElementCheck();\n\t}\n\n\ttableElementCheck(){\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\n\t\t\tif(this.table.originalElement.childNodes.length){\n\t\t\t\tthis.parseTable();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tparseTable(){\n\t\tvar element = this.table.originalElement,\n\t\toptions = this.table.options,\n\t\theaders = element.getElementsByTagName(\"th\"),\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\n\t\tdata = [];\n\n\t\tthis.hasIndex = false;\n\n\t\tthis.dispatchExternal(\"htmlImporting\");\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for Tabulator inline options\n\t\tthis._extractOptions(element, options);\n\n\t\tif(headers.length){\n\t\t\tthis._extractHeaders(headers, rows);\n\t\t}else{\n\t\t\tthis._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor(var index = 0; index < rows.length; index++){\n\t\t\tvar row = rows[index],\n\t\t\tcells = row.getElementsByTagName(\"td\"),\n\t\t\titem = {};\n\n\t\t\t//create index if the don't exist in table\n\t\t\tif(!this.hasIndex){\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\toptions.data = data;\n\n\t\tthis.dispatchExternal(\"htmlImported\");\n\t}\n\n\t//extract tabulator attribute options\n\t_extractOptions(element, options, defaultOptions){\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach((item) => {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor(var index in attributes){\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//get value of attribute\n\t_attribValue(value){\n\t\tif(value === \"true\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(value === \"false\"){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t//find column if it has already been defined\n\t_findCol(title){\n\t\tvar match = this.table.options.columns.find((column) => {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t}\n\n\t//extract column from headers\n\t_extractHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\texists = false,\n\t\t\tcol = this._findCol(header.textContent),\n\t\t\twidth;\n\n\t\t\tif(col){\n\t\t\t\texists = true;\n\t\t\t}else{\n\t\t\t\tcol = {title:header.textContent.trim()};\n\t\t\t}\n\n\t\t\tif(!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif(width && !col.width)\t{\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for Tabulator inline options\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif(col.field == this.table.options.index){\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif(!exists){\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\n\t\t}\n\t}\n\n\t//generate blank headers\n\t_generateBlankHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\tcol = {title:\"\", field:\"col\" + index};\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif(width){\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n}\n\nHtmlTableImport.moduleName = \"htmlTableImport\";\n\nexport default HtmlTableImport;","function csvImporter(input){\n\tvar data = [],\n\trow = 0, \n\tcol = 0,\n\tinQuote = false;\n    \n\t//Iterate over each character\n\tfor (let index = 0; index < input.length; index++) {\n\t\tlet char = input[index], \n\t\tnextChar = input[index+1];      \n        \n\t\t//Initialize empty row\n\t\tif(!data[row]){\n\t\t\tdata[row] = [];\n\t\t}\n\n\t\t//Initialize empty column\n\t\tif(!data[row][col]){\n\t\t\tdata[row][col] = \"\";\n\t\t}\n        \n\t\t//Handle quotation mark inside string\n\t\tif (char == '\"' && inQuote && nextChar == '\"') { \n\t\t\tdata[row][col] += char; \n\t\t\tindex++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//Begin / End Quote\n\t\tif (char == '\"') { \n\t\t\tinQuote = !inQuote;\n\t\t\tcontinue;\n\t\t}\n        \n\t\t//Next column (if not in quote)\n\t\tif (char == ',' && !inQuote) { \n\t\t\tcol++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CRLF) \n\t\tif (char == '\\r' && nextChar == '\\n' && !inQuote) { \n\t\t\tcol = 0; \n\t\t\trow++; \n\t\t\tindex++; \n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CR or LF) \n\t\tif ((char == '\\r' || char == '\\n') && !inQuote) { \n\t\t\tcol = 0;\n\t\t\trow++;\n\t\t\tcontinue; \n\t\t}\n\n\t\t//Normal Character, append to column\n\t\tdata[row][col] += char;\n\t}\n\n\treturn data;\n}\n\nexport default csvImporter;","export default function(input){\n\ttry {\n\t\treturn JSON.parse(input);\n\t} catch(e) {\n\t\tconsole.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n\t\treturn Promise.reject();\n\t}\n}","function arrayImporter(input){\n\treturn input;\n}\n\nexport default arrayImporter;","import csv from './importers/csv.js';\nimport json from './importers/json.js';\nimport array from './importers/array.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tarray:array,\n};","import Module from '../../core/Module.js';\n\nimport defaultImporters from './defaults/importers.js';\n\nclass Import extends Module{\n    \n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.registerTableOption(\"importFormat\");\n\t\tthis.registerTableOption(\"importReader\", \"text\");\n\t}\n    \n\tinitialize(){\n\t\tthis.registerTableFunction(\"import\", this.importFromFile.bind(this));\n\n\t\tif(this.table.options.importFormat){\n\t\t\tthis.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n\t\t\tthis.subscribe(\"data-load\", this.loadData.bind(this), 10);\n\t\t}\n\t}\n\n\tloadDataCheck(data){\n\t\treturn this.table.options.importFormat && (typeof data === \"string\" || (Array.isArray(data) && data.length && Array.isArray(data)));\n\t}\n\n\tloadData(data, params, config, silent, previousData){\n\t\treturn this.importData(this.lookupImporter(), data)\n\t\t\t.then(this.structureData.bind(this))\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import data\");\n\t\t\t\treturn Promise.reject(err);\n\t\t\t});\n\t}\n\n\tlookupImporter(importFormat){\n\t\tvar importer;\n        \n\t\tif(!importFormat){\n\t\t\timportFormat = this.table.options.importFormat;\n\t\t}\n        \n\t\tif(typeof importFormat === \"string\"){\n\t\t\timporter = Import.importers[importFormat];\n\t\t}else{\n\t\t\timporter = importFormat;\n\t\t}\n\n\t\tif(!importer){\n\t\t\tconsole.error(\"Import Error - Importer not found:\", importFormat);\n\t\t}\n        \n\t\treturn importer;\n\t}\n    \n\timportFromFile(importFormat, extension){\n\t\tvar importer = this.lookupImporter(importFormat);\n        \n\t\tif(importer){\n\t\t\treturn this.pickFile(extension)\n\t\t\t\t.then(this.importData.bind(this, importer))\n\t\t\t\t.then(this.structureData.bind(this))\n\t\t\t\t.then(this.setData.bind(this))\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import file\");\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t});\n\t\t}\n\t}\n    \n\tpickFile(extensions){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.type = \"file\";\n\t\t\tinput.accept = extensions;\n            \n\t\t\tinput.addEventListener(\"change\", (e) => {\n\t\t\t\tvar file = input.files[0],\n\t\t\t\treader = new FileReader();\n                \n\t\t\t\tswitch(this.table.options.importReader){\n\t\t\t\t\tcase \"buffer\":\n\t\t\t\t\t\treader.readAsArrayBuffer(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"binary\":\n\t\t\t\t\t\treader.readAsBinaryString(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treader.readAsText(file);\n\t\t\t\t}\n                  \n\t\t\t\treader.onload = (e) => {\n\t\t\t\t\tresolve(reader.result);\n\t\t\t\t};\n                \n\t\t\t\treader.onerror = (e) => {\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t});\n            \n\t\t\tinput.click();\n\t\t});\n\t}\n    \n\timportData(importer, fileContents){\n\t\tvar data = importer.call(this.table, fileContents);\n        \n\t\tif(data instanceof Promise){\n\t\t\treturn data;\n\t\t}else{\n\t\t\treturn data ? Promise.resolve(data) : Promise.reject();\n\t\t}\n\t}\n\n\tstructureData(parsedData){\n\t\tvar data = [];\n        \n\t\tif(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\n\t\t\tif(this.table.options.autoColumns){\n\t\t\t\tdata = this.structureArrayToObject(parsedData);\n\t\t\t}else{\n\t\t\t\tdata = this.structureArrayToColumns(parsedData);\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}else{\n\t\t\treturn parsedData;\n\t\t}\n\t}\n\n\tstructureArrayToObject(parsedData){\n\t\tvar columns = parsedData.shift();\n\n\t\tvar data = parsedData.map((values) => {\n\t\t\tvar row = {};\n\n\t\t\tcolumns.forEach((key, i) => {\n\t\t\t\trow[key] = values[i];\n\t\t\t});\n\n\t\t\treturn row;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tstructureArrayToColumns(parsedData){\n\t\tvar data = [],\n\t\tcolumns = this.table.getColumns();\n\n\t\t//remove first row if it is the column names\n\t\tif(columns[0] && parsedData[0][0]){\n\t\t\tif(columns[0].getDefinition().title === parsedData[0][0]){\n\t\t\t\tparsedData.shift();\n\t\t\t}\n\t\t}\n        \n\t\t//convert row arrays to objects\n\t\tparsedData.forEach((rowData) => {\n\t\t\tvar row = {};\n\n\t\t\trowData.forEach((value, index) => {\n\t\t\t\tvar column = columns[index];\n\n\t\t\t\tif(column){\n\t\t\t\t\trow[column.getField()] = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdata.push(row);\n\t\t});\n\n\t\treturn data;\n\t}\n    \n\tsetData(data){\n\t\treturn this.table.setData(data);\n\t}\n}\n\nImport.moduleName = \"import\";\n\n//load defaults\nImport.importers = defaultImporters;\n\nexport default Import;","import Module from '../../core/Module.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\n\nclass Interaction extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.eventMap = {\n\t\t\t//row events\n\t\t\trowClick:\"row-click\",\n\t\t\trowDblClick:\"row-dblclick\",\n\t\t\trowContext:\"row-contextmenu\",\n\t\t\trowMouseEnter:\"row-mouseenter\",\n\t\t\trowMouseLeave:\"row-mouseleave\",\n\t\t\trowMouseOver:\"row-mouseover\",\n\t\t\trowMouseOut:\"row-mouseout\",\n\t\t\trowMouseMove:\"row-mousemove\",\n\t\t\trowMouseDown:\"row-mousedown\",\n\t\t\trowMouseUp:\"row-mouseup\",\n\t\t\trowTap:\"row\",\n\t\t\trowDblTap:\"row\",\n\t\t\trowTapHold:\"row\",\n\n\t\t\t//cell events\n\t\t\tcellClick:\"cell-click\",\n\t\t\tcellDblClick:\"cell-dblclick\",\n\t\t\tcellContext:\"cell-contextmenu\",\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\n\t\t\tcellMouseOver:\"cell-mouseover\",\n\t\t\tcellMouseOut:\"cell-mouseout\",\n\t\t\tcellMouseMove:\"cell-mousemove\",\n\t\t\tcellMouseDown:\"cell-mousedown\",\n\t\t\tcellMouseUp:\"cell-mouseup\",\n\t\t\tcellTap:\"cell\",\n\t\t\tcellDblTap:\"cell\",\n\t\t\tcellTapHold:\"cell\",\n\n\t\t\t//column header events\n\t\t\theaderClick:\"column-click\",\n\t\t\theaderDblClick:\"column-dblclick\",\n\t\t\theaderContext:\"column-contextmenu\",\n\t\t\theaderMouseEnter:\"column-mouseenter\",\n\t\t\theaderMouseLeave:\"column-mouseleave\",\n\t\t\theaderMouseOver:\"column-mouseover\",\n\t\t\theaderMouseOut:\"column-mouseout\",\n\t\t\theaderMouseMove:\"column-mousemove\",\n\t\t\theaderMouseDown:\"column-mousedown\",\n\t\t\theaderMouseUp:\"column-mouseup\",\n\t\t\theaderTap:\"column\",\n\t\t\theaderDblTap:\"column\",\n\t\t\theaderTapHold:\"column\",\n\n\t\t\t//group header\n\t\t\tgroupClick:\"group-click\",\n\t\t\tgroupDblClick:\"group-dblclick\",\n\t\t\tgroupContext:\"group-contextmenu\",\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\n\t\t\tgroupMouseOver:\"group-mouseover\",\n\t\t\tgroupMouseOut:\"group-mouseout\",\n\t\t\tgroupMouseMove:\"group-mousemove\",\n\t\t\tgroupMouseDown:\"group-mousedown\",\n\t\t\tgroupMouseUp:\"group-mouseup\",\n\t\t\tgroupTap:\"group\",\n\t\t\tgroupDblTap:\"group\",\n\t\t\tgroupTapHold:\"group\",\n\t\t};\n\n\t\tthis.subscribers = {};\n\n\t\tthis.touchSubscribers = {};\n\n\t\tthis.columnSubscribers = {};\n\n\t\tthis.touchWatchers = {\n\t\t\trow:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcell:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcolumn:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tgroup:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t}\n\t\t};\n\n\t\tthis.registerColumnOption(\"headerClick\");\n\t\tthis.registerColumnOption(\"headerDblClick\");\n\t\tthis.registerColumnOption(\"headerContext\");\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\n\t\tthis.registerColumnOption(\"headerMouseOver\");\n\t\tthis.registerColumnOption(\"headerMouseOut\");\n\t\tthis.registerColumnOption(\"headerMouseMove\");\n\t\tthis.registerColumnOption(\"headerMouseDown\");\n\t\tthis.registerColumnOption(\"headerMouseUp\");\n\t\tthis.registerColumnOption(\"headerTap\");\n\t\tthis.registerColumnOption(\"headerDblTap\");\n\t\tthis.registerColumnOption(\"headerTapHold\");\n\n\t\tthis.registerColumnOption(\"cellClick\");\n\t\tthis.registerColumnOption(\"cellDblClick\");\n\t\tthis.registerColumnOption(\"cellContext\");\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\n\t\tthis.registerColumnOption(\"cellMouseOver\");\n\t\tthis.registerColumnOption(\"cellMouseOut\");\n\t\tthis.registerColumnOption(\"cellMouseMove\");\n\t\tthis.registerColumnOption(\"cellMouseDown\");\n\t\tthis.registerColumnOption(\"cellMouseUp\");\n\t\tthis.registerColumnOption(\"cellTap\");\n\t\tthis.registerColumnOption(\"cellDblTap\");\n\t\tthis.registerColumnOption(\"cellTapHold\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.initializeExternalEvents();\n\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n\t}\n\n\tcellContentsSelectionFixer(e, cell){\n\t\tvar range;\n\n\t\tif(this.table.modExists(\"edit\")){\n\t\t\tif (this.table.modules.edit.currentCell === cell){\n\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\n\tinitializeExternalEvents(){\n\t\tfor(let key in this.eventMap){\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n\t\t}\n\t}\n\n\tsubscriptionChanged(key, added){\n\t\tif(added){\n\t\t\tif(!this.subscribers[key]){\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.subscribeTouchEvents(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t\tdelete this.subscribers[key];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.unsubscribeTouchEvents(key);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsubscribeTouchEvents(key){\n\t\tvar type = this.eventMap[key];\n\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\t\t}\n\n\t\tthis.subscribers[key] = true;\n\t}\n\n\tunsubscribeTouchEvents(key){\n\t\tvar noTouch = true,\n\t\ttype = this.eventMap[key];\n\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\n\t\t\tdelete this.subscribers[key];\n\n\t\t\tfor(let i in this.eventMap){\n\t\t\t\tif(this.eventMap[i] === type){\n\t\t\t\t\tif(this.subscribers[i]){\n\t\t\t\t\t\tnoTouch = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(noTouch){\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\n\t\tfor(let key in this.eventMap){\n\t\t\tif(def[key]){\n\t\t\t\tthis.subscriptionChanged(key, true);\n\n\t\t\t\tif(!this.columnSubscribers[key]){\n\t\t\t\t\tthis.columnSubscribers[key] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.columnSubscribers[key].push(column);\n\t\t\t}\n\t\t}\n\t}\n\n\thandle(action, e, component){\n\t\tthis.dispatchEvent(action, e, component);\n\t}\n\n\thandleTouch(type, action, e, component){\n\t\tvar watchers = this.touchWatchers[type];\n\n\t\tif(type === \"column\"){\n\t\t\ttype = \"header\";\n\t\t}\n\n\t\tswitch(action){\n\t\t\tcase \"start\":\n\t\t\t\twatchers.tap = true;\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\n\t\t\t\twatchers.tapHold = setTimeout(() => {\n\t\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\t\twatchers.tapHold = null;\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\n\t\t\t\t}, 1000);\n\t\t\t\tbreak;\n\n\t\t\tcase \"end\":\n\t\t\t\tif(watchers.tap){\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\n\t\t\t\t}\n\n\t\t\t\tif(watchers.tapDbl){\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\n\t\t\t\t}else{\n\t\t\t\t\twatchers.tapDbl = setTimeout(() => {\n\t\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\t\twatchers.tapDbl = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\twatchers.tapHold = null;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdispatchEvent(action, e, component){\n\t\tvar componentObj = component.getComponent(),\n\t\tcallback;\n\n\t\tif(this.columnSubscribers[action]){\n\n\t\t\tif(component instanceof Cell){\n\t\t\t\tcallback = component.column.definition[action];\n\t\t\t}else if(component instanceof Column){\n\t\t\t\tcallback = component.definition[action];\n\t\t\t}\n\n\t\t\tif(callback){\n\t\t\t\tcallback(e, componentObj);\n\t\t\t}\n\t\t}\n\n\t\tthis.dispatchExternal(action, e, componentObj);\n\t}\n}\n\nInteraction.moduleName = \"interaction\";\n\nexport default Interaction;\n","export default {\n\tnavPrev:\"shift + 9\",\n\tnavNext:9,\n\tnavUp:38,\n\tnavDown:40,\n\tscrollPageUp:33,\n\tscrollPageDown:34,\n\tscrollToStart:36,\n\tscrollToEnd:35,\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 89\"],\n};","export default {\n\tkeyBlock:function(e){\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\tscrollPageUp:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos >= 0){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollPageDown:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos <= scrollMax){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\n\t},\n\tscrollToStart:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollToEnd:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tnavPrev:function(e){\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\n\t},\n\n\tnavNext:function(e){\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\n\t},\n\n\tnavLeft:function(e){\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\n\t},\n\n\tnavRight:function(e){\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\n\t},\n\n\tnavUp:function(e){\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\n\t},\n\n\tnavDown:function(e){\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\n\t},\n\n\tundo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.undo();\n\t\t\t}\n\t\t}\n\t},\n\n\tredo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.redo();\n\t\t\t}\n\t\t}\n\t},\n\n\tcopyToClipboard:function(e){\n\t\tif(!this.table.modules.edit.currentCell){\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\n\t\t\t}\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultBindings from './defaults/bindings.js';\nimport defaultActions from './defaults/actions.js';\n\nclass Keybindings extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n\t}\n\n\tinitialize(){\n\t\tvar bindings = this.table.options.keybindings,\n\t\tmergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif(bindings !== false){\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings);\n\t\t\tObject.assign(mergedBindings, bindings);\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t}\n\n\tmapBindings(bindings){\n\t\tfor(let key in bindings){\n\t\t\tif(Keybindings.actions[key]){\n\t\t\t\tif(bindings[key]){\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach((binding) => {\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\n\t\t\t\t\t\t\n\t\t\t\t\t\tbindingList.forEach((item) => {\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\n\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\tmapBinding(action, symbolsList){\n\t\tvar binding = {\n\t\t\taction: Keybindings.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false,\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach((symbol) => {\n\t\t\tswitch(symbol){\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif(!this.watchKeys[symbol]){\n\t\t\t\t\t\tthis.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents(){\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function(binding){\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t}\n\n\tclearBindings(){\n\t\tif(this.keyupBinding){\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif(this.keydownBinding){\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t}\n\n\tcheckBinding(e, binding){\n\t\tvar match = true;\n\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\n\t\t\tbinding.keys.forEach((key) => {\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\n\n\t\t\t\tif(index == -1){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tbinding.action.call(this, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nKeybindings.moduleName = \"keybindings\";\n\n//load defaults\nKeybindings.bindings = defaultBindings;\nKeybindings.actions = defaultActions;\n\nexport default Keybindings;","import Module from '../../core/Module.js';\n\nclass Menu extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.menuContainer = null;\n\t\tthis.nestedMenuBlock = false;\n\t\t\n\t\tthis.currentComponent = null;\n\t\tthis.rootPopup = null;\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"menuContainer\", undefined); //deprecated\n\t\t\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\n\t\tthis.registerTableOption(\"rowDblClickMenu\", false);\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\n\t\tthis.registerTableOption(\"groupDblClickMenu\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextMenu\");\n\t\tthis.registerColumnOption(\"headerClickMenu\");\n\t\tthis.registerColumnOption(\"headerDblClickMenu\");\n\t\tthis.registerColumnOption(\"headerMenu\");\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\n\t\tthis.registerColumnOption(\"contextMenu\");\n\t\tthis.registerColumnOption(\"clickMenu\");\n\t\tthis.registerColumnOption(\"dblClickMenu\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\tif(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\n\t\t\tthis.table.options.popupContainer = this.table.options.menuContainer;\n\t\t}\n\t}\t\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextMenu){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickMenu){\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowDblClickMenu){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextMenu){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickMenu){\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupDblClickMenu){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu){\n\t\t\tthis.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerMenu){\n\t\t\tthis.initializeColumnHeaderMenu(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n\t\t}\n\t\t\n\t\tif(def.dblClickMenu && !this.columnSubscribers.dblClickMenu){\n\t\t\tthis.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n\t\t\tthis.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderMenu(column){\n\t\tvar icon = column.definition.headerMenuIcon,\n\t\theaderMenuEl;\n\t\t\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\n\t\t\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderMenuEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderMenuEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadMenuTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadMenuTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadMenuEvent(menu, e, component){\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n\t\t\n\t\tthis.loadMenu(e, component, menu);\n\t}\n\t\n\tloadMenu(e, component, menu, parentEl, parentPopup){\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\n\t\tmenuEl = document.createElement(\"div\"),\n\t\tpopup;\n\t\t\n\t\tmenuEl.classList.add(\"tabulator-menu\");\n\t\t\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\t//abort if no menu set\n\t\tif(!menu || !menu.length){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!parentEl){\n\t\t\tif(this.nestedMenuBlock){\n\t\t\t\t//abort if child menu already open\n\t\t\t\tif(this.rootPopup){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\n\t\t\t\t\tthis.nestedMenuBlock = false;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\n\t\t\t\n\t\t}else{\n\t\t\tpopup = parentPopup.child(menuEl);\n\t\t}\n\t\t\n\t\tmenu.forEach((item) => {\n\t\t\tvar itemEl = document.createElement(\"div\"),\n\t\t\tlabel = item.label,\n\t\t\tdisabled = item.disabled;\n\t\t\t\n\t\t\tif(item.separator){\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t}else{\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\t\t\t\t\n\t\t\t\tif(typeof label == \"function\"){\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(label instanceof Node){\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof disabled == \"function\"){\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(disabled){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(item.action){\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tmenuEl.appendChild(itemEl);\n\t\t});\n\t\t\n\t\tmenuEl.addEventListener(\"click\", (e) => {\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\n\t\t\t}\n\t\t});\n\t\t\n\t\tpopup.show(parentEl || e);\n\t\t\n\t\tif(popup === this.rootPopup){\n\t\t\tthis.rootPopup.hideOnBlur(() => {\n\t\t\t\tthis.rootPopup = null;\n\t\t\t\t\n\t\t\t\tif(this.currentComponent){\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n\t\t\t\t\tthis.currentComponent = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.currentComponent = component;\n\t\t\t\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nMenu.moduleName = \"menu\";\n\nexport default Menu;\n","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nclass MoveColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the destination column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\t\t\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\n\t}\n\t\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.movableColumns){\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\tcolEl;\n\t\t\n\t\tif(!column.modules.frozen && !column.isGroup){\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tconfig.mousemove = function(e){\n\t\t\t\tif(column.parent === self.moving.parent){\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.contentsElement.scrollLeft) > (column.getWidth() / 2)){\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\t\t\n\t\tcolumn.modules.moveColumn = config;\n\t}\n\t\n\tbindTouchEvents(column){\n\t\tvar colEl = column.getElement(),\n\t\tstartXMove = false, //shifting center position of the cell\n\t\tnextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\n\t\t\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\t\t\t\t\n\t\t\t\tthis.startMove(e, column);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\n\t\t\tvar diff, moveToCol;\n\t\t\t\n\t\t\tif(this.moving){\n\t\t\t\tthis.moveHover(e);\n\t\t\t\t\n\t\t\t\tif(!startXMove){\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\t\t\t\t\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\n\t\t\t\t\t\tmoveToCol = nextCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\n\t\t\t\t\t\tmoveToCol = prevCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(moveToCol){\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartMove(e, column){\n\t\tvar element = column.getElement(),\n\t\theaderElement = this.table.columnManager.getContentsElement(),\n\t\theadersElement = this.table.columnManager.getHeadersElement();\n\t\t\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n\t\t\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\t\t\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t\t\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\t\t\n\t\theaderElement.appendChild(this.hoverElement);\n\t\t\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\n\t\t\n\t\tif(!this.touchMove){\n\t\t\tthis._bindMouseMove();\n\t\t\t\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t\t\n\t\tthis.moveHover(e);\n\t}\n\t\n\t_bindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_unbindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmoveColumn(column, after){\n\t\tvar movingCells = this.moving.getCells();\n\t\t\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\t\t\n\t\tif(after){\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tendMove(e){\n\t\tif(e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\t\t\t\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\t\t\t\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(this.toCol){\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\t\t\t\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\t\t\t\n\t\t\tif(!this.touchMove){\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmoveHover(e){\n\t\tvar columnHolder = this.table.columnManager.getContentsElement(),\n\t\tscrollLeft = columnHolder.scrollLeft,\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\n\t\tscrollPos;\n\t\t\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\n\t\t\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nMoveColumns.moduleName = \"moveColumn\";\n\nexport default MoveColumns;\n","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nclass MoveRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the destination row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\n\n\t\tthis.registerColumnOption(\"rowHandle\");\n\t}\n\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.movableRows){\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeGroupHeader(group){\n\t\tvar self = this,\n\t\tconfig = {};\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, group);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl;\n\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\tif(rowEl.previousSibling){\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\n\t\tif(!this.hasHandle){\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tthis.hasHandle = true;\n\t\t}\n\t}\n\n\tinitializeCell(cell){\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tvar self = this,\n\t\t\tcellEl = cell.getElement(true);\n\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\n\t\t}\n\t}\n\n\tbindTouchEvents(row, element){\n\t\tvar startYMove = false, //shifting center position of the cell\n\t\tnextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tthis.startMove(e, row);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", (e) => {\n\n\t\t\tvar diff, moveToRow;\n\n\t\t\tif(this.moving){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.moveHover(e);\n\n\t\t\t\tif(!startYMove){\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(moveToRow){\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t\tthis.touchMove = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t_bindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\t_unbindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\tstartMove(e, row){\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif(!this.connection){\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t}else{\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif(this.connection){\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t}else{\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\n\n\t\tthis.moveHover(e);\n\t}\n\n\tsetStartPosition(e, row){\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\telement, position;\n\n\t\telement = row.getElement();\n\t\tif(this.connection){\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t}else{\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\n\t\t}\n\t}\n\n\tendMove(e){\n\t\tif(!e || e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif(!this.connection){\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif(this.toRow){\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif(this.connection){\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveRow(row, after){\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t}\n\n\tmoveHover(e){\n\t\tif(this.connection){\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t}else{\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t}\n\n\tmoveHoverTable(e){\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\tscrollTop = rowHolder.scrollTop,\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop;\n\t\t\n\t\tthis.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n\t}\n\n\tmoveHoverConnections(e){\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\n\t}\n\n\telementRowDrop(e, element, row){\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n\t}\n\n\t//establish connection with other tables\n\tconnectToTables(row){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow:row,\n\t\t\t});\n\t\t}\n\n\t\tif(this.connectionSelectorsElements){\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\n\t\t\t\tif(typeof query === \"string\"){\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t}else{\n\t\t\t\t\tthis.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach((element) => {\n\t\t\t\tvar dropEvent = (e) => {\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t}\n\n\t//disconnect from other tables\n\tdisconnectFromTables(){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach((element) => {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t}\n\n\t//accept incomming connection\n\tconnect(table, row){\n\t\tif(!this.connectedTable){\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\n\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//close incoming connection\n\tdisconnect(table){\n\t\tif(table === this.connectedTable){\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t}\n\n\tdropComplete(table, row, success){\n\t\tvar sender = false;\n\n\t\tif(success){\n\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(sender){\n\t\t\t\tsender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n\t\t\t}else{\n\t\t\t\tif(this.table.options.movableRowsSender){\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t}\n\n\ttableRowDrop(e, row){\n\t\tvar receiver = false,\n\t\tsuccess = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\n\t\t\tcase \"string\":\n\t\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(receiver){\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif(success){\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow:row,\n\t\t\tsuccess:success,\n\t\t});\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t}\n\t}\n}\n\nMoveRows.prototype.receivers = {\n\tinsert:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\treturn true;\n\t},\n\n\tadd:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData());\n\t\treturn true;\n\t},\n\n\tupdate:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\ttoRow.update(fromRow.getData());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\treplace:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\ttoRow.delete();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n};\n\nMoveRows.prototype.senders = {\n\tdelete:function(fromRow, toRow, toTable){\n\t\tfromRow.delete();\n\t}\n};\n\nMoveRows.moduleName = \"moveRow\";\n\nexport default MoveRows;","export default {};","import Module from '../../core/Module.js';\n\nimport defaultMutators from './defaults/mutators.js';\n\nclass Mutator extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of mutation types\n\t\tthis.enabled = true;\n\n\t\tthis.registerColumnOption(\"mutator\");\n\t\tthis.registerColumnOption(\"mutatorParams\");\n\t\tthis.registerColumnOption(\"mutatorData\");\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\n\t\tthis.registerColumnOption(\"mutatorEdit\");\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\n\t\tthis.registerColumnOption(\"mutateLink\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n\t}\n\n\trowDataChanged(row, tempData, updatedData){\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\n\t}\n\n\t//initialize column mutator\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\tmutator;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\n\n\t\t\t\tif(mutator){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator:mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t}\n\n\tlookupMutator(value){\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Mutator.mutators[value]){\n\t\t\t\t\tmutator = Mutator.mutators[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t}\n\n\t//apply mutator to row\n\ttransformRow(data, type, updatedData){\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\tvalue;\n\n\t\tif(this.enabled){\n\n\t\t\tthis.table.columnManager.traverse((column) => {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif(column.modules.mutate){\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif(mutator){\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif((type == \"data\" && !updatedData)|| typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//apply mutator to new cell value\n\ttransformCell(cell, value){\n\t\tif(cell.column.modules.mutate){\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t\ttempData = {};\n\n\t\t\tif(mutator){\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tmutateLink(cell){\n\t\tvar links = cell.column.definition.mutateLink;\n\n\t\tif(links){\n\t\t\tif(!Array.isArray(links)){\n\t\t\t\tlinks = [links];\n\t\t\t}\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\tvar linkCell = cell.row.getCell(link);\n\n\t\t\t\tif(linkCell){\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tenable(){\n\t\tthis.enabled = true;\n\t}\n\n\tdisable(){\n\t\tthis.enabled = false;\n\t}\n}\n\nMutator.moduleName = \"mutator\";\n\n//load defaults\nMutator.mutators = defaultMutators;\n\nexport default Mutator;","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\n\tif(totalRows){\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\n\t\t\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\n\t\t\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(ofEl);\n\t\tel.appendChild(totalEl);\n\t\tel.appendChild(rowsEl);\n\t}else{\n\t\tvalueEl.innerHTML = \" 0 \";\n\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(rowsEl);\n\t}\n\t\n\treturn el;\n}","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\t\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\t\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\t\n\tel.appendChild(showingEl);\n\tel.appendChild(valueEl);\n\tel.appendChild(ofEl);\n\tel.appendChild(totalEl);\n\tel.appendChild(rowsEl);\n\t\n\treturn el;\n}","import rows from './pageCounters/rows.js';\nimport pages from './pageCounters/pages.js';\n\n\nexport default {\n\trows:rows,\n\tpages:pages,\n};","import Module from '../../core/Module.js';\n\nimport defaultPageCounters from './defaults/pageCounters.js';\n\nclass Page extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\t\t\n\t\tthis.element = null;\n\t\tthis.pageCounterElement = null;\n\t\tthis.pageCounter = null;\n\t\t\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.remoteRowCountEstimate = null;\n\t\t\n\t\tthis.initialLoad = true;\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\n\t\t\n\t\tthis.pageSizes = [];\n\t\t\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\t\t\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\t\t\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad){\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\n\t\t\t\n\t\t\tthis.createElements();\n\t\t\tthis.initializePageCounter();\n\t\t\tthis.initializePaginator();\n\t\t}else if(this.table.options.progressiveLoad){\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\t\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad);\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowAddingPosition(row, top){\n\t\tvar rowManager = this.table.rowManager,\n\t\tdisplayRows = rowManager.getDisplayRows(),\n\t\tindex;\n\t\t\n\t\tif(top){\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[0];\n\t\t\t}else{\n\t\t\t\tif(rowManager.activeRows.length){\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[displayRows.length - 1];\n\t\t\t\ttop = displayRows.length < this.size ? false : true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {index, top};\n\t}\n\t\n\tcalculatePageSizes(){\n\t\tvar testElRow, testElCell;\n\t\t\n\t\tif(this.table.options.paginationSize){\n\t\t\tthis.size = this.table.options.paginationSize;\n\t\t}else{\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = \"hidden\";\n\t\t\t\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\t\t\t\n\t\t\ttestElRow.appendChild(testElCell);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\n\t\t\t\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\n\t\t\n\t\tthis.generatePageSizeSelectList();\n\t}\n\t\n\tinitialLoadComplete(){\n\t\tthis.initialLoad = false;\n\t}\n\t\n\tremotePageParams(data, config, silent, params){\n\t\tif(!this.initialLoad){\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\n\t\t\t\tthis.reset(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//configure request params\n\t\tparams.page = this.page;\n\t\t\n\t\t//set page size if defined\n\t\tif(this.size){\n\t\t\tparams.size = this.size;\n\t\t}\n\t\t\n\t\treturn params;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetPageToRow(row){\n\t\tif(this.table.options.pagination){\n\t\t\trow = this.rowManager.findRow(row);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\treturn this.setPageToRow(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Promise.reject();\n\t}\n\t\n\tuserSetPageSize(size){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.setPageSize(size);\n\t\t\treturn this.setPage(1);\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tscrollVertical(top, dir){\n\t\tvar element, diff, margin;\n\t\tif(!dir && !this.table.dataLoader.loading){\n\t\t\telement = this.table.rowManager.getElement();\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\n\t\t\t\n\t\t\tif(diff < margin){\n\t\t\t\tthis.nextPage()\n\t\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\n\t\t\t}\n\t\t}\n\t}\n\t\n\trestOnRenderBefore(rows, renderInPosition){\n\t\tif(!renderInPosition){\n\t\t\tif(this.mode === \"local\"){\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(){\n\t\tthis.refreshData(true, \"all\");\n\t}\n\t\n\tcreateElements(){\n\t\tvar button;\n\t\t\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\t\t\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\t\t\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\t\t\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\t\t\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\t\t\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\t\t\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\t\t\n\t\tif(this.table.options.paginationSizeSelector){\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t}\n\t\n\tgeneratePageSizeSelectList(){\n\t\tvar pageSizes = [];\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t}else{\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t\n\t\t\tpageSizes.forEach((item) => {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\t\n\t\t\t\tif(item === true){\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\t\t\t\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t}\n\t\n\tinitializePageCounter(){\n\t\tvar counter = this.table.options.paginationCounter,\n\t\tpageCounter = null;\n\t\t\n\t\tif(counter){\n\t\t\tif(typeof counter === \"function\"){\n\t\t\t\tpageCounter = counter;\n\t\t\t}else{\n\t\t\t\tpageCounter = Page.pageCounters[counter];\n\t\t\t}\n\t\t\t\n\t\t\tif(pageCounter){\n\t\t\t\tthis.pageCounter = pageCounter;\n\t\t\t\t\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup pagination\n\tinitializePaginator(hidden){\n\t\tvar pageSelectLabel, paginationCounterHolder;\n\t\t\n\t\tif(!hidden){\n\t\t\t//build pagination element\n\t\t\t\n\t\t\t//bind localizations\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\n\t\t\t\tthis.firstBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\n\t\t\t\tthis.prevBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\n\t\t\t\tthis.nextBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\n\t\t\t\tthis.lastBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\t//click bindings\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(1);\n\t\t\t});\n\t\t\t\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.previousPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.nextPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(this.max);\n\t\t\t});\n\t\t\t\n\t\t\tif(this.table.options.paginationElement){\n\t\t\t\tthis.element = this.table.options.paginationElement;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.pageSizeSelect){\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\n\t\t\t\t\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n\t\t\t\t\tthis.setPage(1);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//append to DOM\n\t\t\tthis.element.appendChild(this.firstBut);\n\t\t\tthis.element.appendChild(this.prevBut);\n\t\t\tthis.element.appendChild(this.pagesElement);\n\t\t\tthis.element.appendChild(this.nextBut);\n\t\t\tthis.element.appendChild(this.lastBut);\n\t\t\t\n\t\t\tif(!this.table.options.paginationElement){\n\t\t\t\tif(this.table.options.paginationCounter){\n\n\t\t\t\t\tpaginationCounterHolder; \n\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(paginationCounterHolder){\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.footerAppend(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.page = this.table.options.paginationInitialPage;\n\t\t\tthis.count = this.table.options.paginationButtonCount;\n\t\t}\n\t\t\n\t\t//set default values\n\t\tthis.mode = this.table.options.paginationMode;\n\t}\n\t\n\tinitializeProgressive(mode){\n\t\tthis.initializePaginator(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"page-changed\");\n\t}\n\t\n\t//calculate maximum page from number of rows\n\tsetMaxRows(rowCount){\n\t\tif(!rowCount){\n\t\t\tthis.max = 1;\n\t\t}else{\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\n\t\t}\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t}\n\t}\n\t\n\t//reset to first page without triggering action\n\treset(force){\n\t\tif(!this.initialLoad){\n\t\t\tif(this.mode == \"local\" || force){\n\t\t\t\tthis.page = 1;\n\t\t\t\tthis.trackChanges();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//set the maximum page\n\tsetMaxPage(max){\n\t\t\n\t\tmax = parseInt(max);\n\t\t\n\t\tthis.max = max || 1;\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t}\n\t\n\t//set current page number\n\tsetPage(page){\n\t\tswitch(page){\n\t\t\tcase \"first\":\n\t\t\t\treturn this.setPage(1);\n\t\n\t\t\tcase \"prev\":\n\t\t\t\treturn this.previousPage();\n\t\t\t\n\t\t\tcase \"next\":\n\t\t\t\treturn this.nextPage();\n\t\t\t\n\t\t\tcase \"last\":\n\t\t\t\treturn this.setPage(this.max);\n\t\t}\n\t\t\n\t\tpage = parseInt(page);\n\t\t\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\n\t\t\tthis.page = page;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageToRow(row){\n\t\tvar rows = this.displayRows(-1);\n\t\tvar index = rows.indexOf(row);\n\t\n\t\tif(index > -1){\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n\t\t\t\n\t\t\treturn this.setPage(page);\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageSize(size){\n\t\tif(size !== true){\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif(size > 0){\n\t\t\tthis.size = size;\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\n\t\t}\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\t_setPageCounter(totalRows, size, currentRow){\n\t\tvar content;\n\t\t\n\t\tif(this.pageCounter){\n\n\t\t\tif(this.mode === \"remote\"){\n\t\t\t\tsize = this.size;\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\n\t\t\t}\n\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n\t\t\t\n\t\t\tswitch(typeof content){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif(content instanceof Node){\n\t\t\t\t\t\n\t\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.pageCounterElement.appendChild(content);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\t\n\t\t\t\t\t\tif(content != null){\n\t\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.pageCounterElement.innerHTML = content;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup the pagination buttons\n\t_setPageButtons(){\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\n\t\t\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n\t\t\n\t\tif(this.page == 1){\n\t\t\tthis.firstBut.disabled = true;\n\t\t\tthis.prevBut.disabled = true;\n\t\t}else{\n\t\t\tthis.firstBut.disabled = false;\n\t\t\tthis.prevBut.disabled = false;\n\t\t}\n\t\t\n\t\tif(this.page == this.max){\n\t\t\tthis.lastBut.disabled = true;\n\t\t\tthis.nextBut.disabled = true;\n\t\t}else{\n\t\t\tthis.lastBut.disabled = false;\n\t\t\tthis.nextBut.disabled = false;\n\t\t}\n\t\t\n\t\tfor(let i = min; i <= max; i++){\n\t\t\tif(i>0 && i <= this.max){\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.footerRedraw();\n\t}\n\t\n\t_generatePageButton(page){\n\t\tvar button = document.createElement(\"button\");\n\t\t\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif(page == this.page){\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\t\t\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\t\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\t\t\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\t\t\n\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\tthis.setPage(page);\n\t\t});\n\t\t\n\t\treturn button;\n\t}\n\t\n\t//previous page\n\tpreviousPage(){\n\t\tif(this.page > 1){\n\t\t\tthis.page--;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//next page\n\tnextPage(){\n\t\tif(this.page < this.max){\n\t\t\tthis.page++;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tif(!this.progressiveLoad){\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n\t\t\t}\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//return current page number\n\tgetPage(){\n\t\treturn this.page;\n\t}\n\t\n\t//return max page number\n\tgetPageMax(){\n\t\treturn this.max;\n\t}\n\t\n\tgetPageSize(size){\n\t\treturn this.size;\n\t}\n\t\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\t\n\t//return appropriate rows for current page\n\tgetRows(data){\n\t\tvar actualRowPageSize = 0,\n\t\toutput, start, end, actualStartRow;\n\n\t\tvar actualRows = data.filter((row) => {\n\t\t\treturn row.type === \"row\";\n\t\t});\n\t\t\n\t\tif(this.mode == \"local\"){\n\t\t\toutput = [];\n\t\t\t\n\t\t\tthis.setMaxRows(data.length);\n\t\t\t\n\t\t\tif(this.size === true){\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length;\n\t\t\t}else{\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageButtons();\n\t\t\t\n\t\t\tfor(let i = start; i < end; i++){\n\t\t\t\tlet row = data[i];\n\n\t\t\t\tif(row){\n\t\t\t\t\toutput.push(row);\n\n\t\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\t\tif(!actualStartRow){\n\t\t\t\t\t\t\tactualStartRow = row;\n\t\t\t\t\t\t}\t\n\n\t\t\t\t\t\tactualRowPageSize++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\n\t\t\t\n\t\t\treturn output;\n\t\t}else{\n\t\t\tthis._setPageButtons();\n\t\t\tthis._setPageCounter(actualRows.length);\n\t\t\t\n\t\t\treturn data.slice(0);\n\t\t}\n\t}\n\t\n\ttrigger(){\n\t\tvar left;\n\t\t\n\t\tswitch(this.mode){\n\t\t\tcase \"local\":\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\t\t\t\n\t\t\t\tthis.refreshData();\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\n\t\t\t\n\t\t\t\treturn Promise.resolve();\n\t\t\t\n\t\t\tcase \"remote\":\n\t\t\t\tthis.dataChanging = true;\n\t\t\t\treturn this.reloadData(null)\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.dataChanging = false;\n\t\t\t\t\t});\n\t\t\t\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\t\treturn this.reloadData(null, true);\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n\t\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t_parseRemoteData(data){\n\t\tvar margin;\n\t\t\n\t\tif(typeof data.last_page === \"undefined\"){\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n\t\t}\n\t\t\n\t\tif(data.data){\n\t\t\tthis.max = parseInt(data.last_page) || 1;\n\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\n\t\t\t\n\t\t\tif(this.progressiveLoad){\n\t\t\t\tswitch(this.mode){\n\t\t\t\t\tcase \"progressive_load\":\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page == 1){\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n\t\t\t\t\t\n\t\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\n\t\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n\t\t}\n\t\t\n\t\treturn data.data;\n\t}\n\t\n\t//handle the footer element being redrawn\n\tfooterRedraw(){\n\t\tvar footer = this.table.footerManager.containerElement;\n\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}else{\n\t\t\tthis.pagesElement.style.display = '';\n\t\t\t\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}\n\nPage.moduleName = \"page\";\n\n//load defaults\nPage.pageCounters = defaultPageCounters;\n\nexport default Page;\n","// read persistance information from storage\nexport default {\n\tlocal:function(id, type){\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie:function(id, type){\n\t\tvar cookie = document.cookie,\n\t\tkey = id + \"-\" + type,\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\n\t\tend, data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif(cookiePos > -1){\n\t\t\tcookie = cookie.slice(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif(end > -1){\n\t\t\t\tcookie = cookie.slice(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n","//write persistence information to storage\nexport default {\n\tlocal:function(id, type, data){\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie:function(id, type, data){\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};","import Module from '../../core/Module.js';\n\nimport defaultReaders from './defaults/readers.js';\nimport defaultWriters from './defaults/writers.js';\n\nclass Persistence extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\n\t\tthis.registerTableOption(\"persistence\", false);\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n\t}\n\n\t// Test for whether localStorage is available for use.\n\tlocalStorageTest() {\n\t\tvar  testKey =  \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem( testKey, testKey);\n\t\t\twindow.localStorage.removeItem( testKey );\n\t\t\treturn true;\n\t\t} catch(e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//setup parameters\n\tinitialize(){\n\t\tif(this.table.options.persistence){\n\t\t\t//determine persistent layout storage type\n\t\t\tvar mode = this.table.options.persistenceMode,\n\t\t\tid = this.table.options.persistenceID,\n\t\t\tretrievedData;\n\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\n\n\t\t\tif(this.table.options.persistenceReaderFunc){\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.readers[this.mode]){\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.table.options.persistenceWriterFunc){\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.writers[this.mode]){\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set storage tag\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\n\n\t\t\tthis.config = {\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\n\t\t\t};\n\n\t\t\t//load pagination data if needed\n\t\t\tif(this.config.page){\n\t\t\t\tretrievedData = this.retrieveData(\"page\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\n\t\t\t\t\t\tthis.table.options.paginationSize = retrievedData.paginationSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//load group data if needed\n\t\t\tif(this.config.group){\n\t\t\t\tretrievedData = this.retrieveData(\"group\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\n\t\t\t\t\t\tthis.table.options.groupBy = retrievedData.groupBy;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retrievedData.groupStartOpen;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\n\t\t\t\t\t\tthis.table.options.groupHeader = retrievedData.groupHeader;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.config.columns){\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n\t\t}\n\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n\t}\n\n\teventSave(type){\n\t\tif(this.config[type]){\n\t\t\tthis.save(type);\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tvar sorters, filters;\n\n\t\tif(this.config.sort){\n\t\t\tsorters = this.load(\"sort\");\n\n\t\t\tif(!sorters === false){\n\t\t\t\tthis.table.options.initialSort = sorters;\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.filter){\n\t\t\tfilters = this.load(\"filter\");\n\n\t\t\tif(!filters === false){\n\t\t\t\tthis.table.options.initialFilter = filters;\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif(force && this.config.columns){\n\t\t\tthis.save(\"columns\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tgetColumnLayout(){\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\n\t}\n\n\tsetColumnLayout(layout){\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout));\n\t\treturn true;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumn(column){\n\t\tvar def, keys;\n\n\t\tif(this.config.columns){\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach((key)=>{\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\n\t\t\t\tif(props){\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: (newValue) => {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(props.set){\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget:() => {\n\t\t\t\t\t\t\tif(props.get){\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t}\n\n\t//load saved definitions\n\tload(type, current){\n\t\tvar data = this.retrieveData(type);\n\n\t\tif(current){\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//retrieve data from memory\n\tretrieveData(type){\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t}\n\n\t//merge old and new column definitions\n\tmergeDefinition(oldCols, newCols){\n\t\tvar output = [];\n\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach((column, to) => {\n\t\t\tvar from = this._findColumn(oldCols, column),\n\t\t\tkeys;\n\n\t\t\tif(from){\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(from.columns){\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach((column, i) => {\n\t\t\tvar from = this._findColumn(newCols, column);\n\n\t\t\tif (!from) {\n\t\t\t\tif(output.length>i){\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t}else{\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//find matching columns\n\t_findColumn(columns, subject){\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\n\n\t\treturn columns.find(function(col){\n\t\t\tswitch(type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t}\n\t\t});\n\t}\n\n\t//save data\n\tsave(type){\n\t\tvar data = {};\n\n\t\tswitch(type){\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.writeFunc){\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\n\t}\n\n\t//ensure sorters contain no function data\n\tvalidateSorters(data){\n\t\tdata.forEach(function(item){\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tgetGroupConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.group){\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetPageConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.page){\n\t\t\tif(this.config.page === true || this.config.page.size){\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif(this.config.page === true || this.config.page.page){\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\n\t//parse columns for data to store\n\tparseColumns(columns){\n\t\tvar definitions = [],\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar defStore = {},\n\t\t\tcolDef = column.getDefinition(),\n\t\t\tkeys;\n\n\t\t\tif(column.isGroup){\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\n\t\t\t}else{\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t\tkeys.push(\"visible\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\n\t\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t}\n}\n\nPersistence.moduleName = \"persistence\";\n\nPersistence.moduleInitOrder = -10;\n\n//load defaults\nPersistence.readers = defaultReaders;\nPersistence.writers = defaultWriters;\n\nexport default Persistence;","import Module from '../../core/Module.js';\n\nclass Popup extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\n\t\tthis.registerTableOption(\"rowDblClickPopup\", false);\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\n\t\tthis.registerTableOption(\"groupDblClickPopup\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextPopup\");\n\t\tthis.registerColumnOption(\"headerClickPopup\");\n\t\tthis.registerColumnOption(\"headerDblClickPopup\");\n\t\tthis.registerColumnOption(\"headerPopup\");\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\n\t\tthis.registerColumnOption(\"contextPopup\");\n\t\tthis.registerColumnOption(\"clickPopup\");\n\t\tthis.registerColumnOption(\"dblClickPopup\");\n\n\t\tthis.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\t_componentPopupCall(component, contents, position){\n\t\tthis.loadPopupEvent(contents, null, component, position);\n\t}\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextPopup){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickPopup){\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n\t\t}\n\n\t\tif(this.table.options.rowDblClickPopup){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextPopup){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickPopup){\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n\t\t}\n\n\t\tif(this.table.options.groupDblClickPopup){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n\t\t\n\t\t\n\t\t}if(def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup){\n\t\t\tthis.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n\t\t}\n\t\t\n\t\tif(def.headerPopup){\n\t\t\tthis.initializeColumnHeaderPopup(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n\t\t}\n\n\t\tif(def.dblClickPopup && !this.columnSubscribers.dblClickPopup){\n\t\t\tthis.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderPopup(column){\n\t\tvar icon = column.definition.headerPopupIcon,\n\t\theaderPopupEl;\n\t\t\n\t\theaderPopupEl = document.createElement(\"span\");\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderPopupEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderPopupEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadPopupTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadPopupTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadPopupEvent(contents, e, component, position){\n\t\tvar renderedCallback;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\n\t\t\n\t\tthis.loadPopup(e, component, contents, renderedCallback, position);\n\t}\n\t\n\tloadPopup(e, component, contents, renderedCallback, position){\n\t\tvar touch = !(e instanceof MouseEvent),\n\t\tcontentsEl, popup;\n\t\t\n\t\tif(contents instanceof HTMLElement){\n\t\t\tcontentsEl = contents;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\tcontentsEl.innerHTML = contents;\n\t\t}\n\t\t\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\n\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\tpopup = this.popup(contentsEl);\n\n\t\tif(typeof renderedCallback === \"function\"){\n\t\t\tpopup.renderCallback(renderedCallback);\n\t\t}\n\n\t\tif(e){\n\t\t\tpopup.show(e);\n\t\t}else{\n\t\t\tpopup.show(component.getElement(), position || \"center\");\n\t\t}\n\n\t\t\n\t\tpopup.hideOnBlur(() => {\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\n\t\t});\n\n\n\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent());\n\t}\n}\n\nPopup.moduleName = \"popup\";\n\nexport default Popup;\n","import Module from '../../core/Module.js';\n\nclass Print extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t\tthis.beforeprintEventHandler = null;\n\t\tthis.afterprintEventHandler = null;\n\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\n\n\t\tthis.registerColumnOption(\"print\");\n\t\tthis.registerColumnOption(\"titlePrint\");\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\tthis.beforeprintEventHandler = this.replaceTable.bind(this);\n\t\t\tthis.afterprintEventHandler = this.cleanup.bind(this);\n\n\t\t\twindow.addEventListener(\"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.addEventListener(\"afterprint\", this.afterprintEventHandler);\n\t\t\tthis.subscribe(\"table-destroy\", this.destroy.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n\t}\n\n\tdestroy(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\twindow.removeEventListener( \"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.removeEventListener( \"afterprint\", this.afterprintEventHandler );\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\treplaceTable(){\n\t\tif(!this.manualBlock){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t}\n\n\tcleanup(){\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif(this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t}\n\n\tprintFullscreen(visible, style, config){\n\t\tvar scrollX = window.scrollX,\n\t\tscrollY = window.scrollY,\n\t\theaderEl = document.createElement(\"div\"),\n\t\tfooterEl = document.createElement(\"div\"),\n\t\ttableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n\t\theaderContent, footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif(this.table.options.printHeader){\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif(typeof headerContent == \"string\"){\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t}else{\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif(this.table.options.printFooter){\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\n\t\t\tif(typeof footerContent == \"string\"){\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t}else{\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif(this.table.options.printFormatter){\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t}\n}\n\nPrint.moduleName = \"print\";\n\nexport default Print;","import Module from '../../core/Module.js';\n\nclass ReactiveData extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t\t\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.reactiveData){\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n\t\t}\n\t}\n\t\n\twatchData(data){\n\t\tvar self = this,\n\t\tversion;\n\t\t\n\t\tthis.currentVersion ++;\n\t\t\n\t\tversion = this.currentVersion;\n\t\t\n\t\tthis.unwatchData();\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\t//override array push function\n\t\tthis.origFuncs.push = data.push;\n\t\t\n\t\tObject.defineProperty(this.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\t\n\t\t\t\t\tself.block(\"data-push\");\n\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.push.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-push\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array unshift function\n\t\tthis.origFuncs.unshift = data.unshift;\n\t\t\n\t\tObject.defineProperty(this.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-unshift\");\n\t\t\t\t\t\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.unshift.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-unshift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array shift function\n\t\tthis.origFuncs.shift = data.shift;\n\t\t\n\t\tObject.defineProperty(this.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-shift\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.shift.call(data);\n\n\t\t\t\t\tself.unblock(\"data-shift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array pop function\n\t\tthis.origFuncs.pop = data.pop;\n\t\t\n\t\tObject.defineProperty(this.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-pop\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.pop.call(data);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-pop\");\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array splice function\n\t\tthis.origFuncs.splice = data.splice;\n\t\t\n\t\tObject.defineProperty(this.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\tend = args[1],\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\n\t\t\t\tstartRow, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-splice\");\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif(newRows){\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(startRow){\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif(end !== 0){\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\t\t\t\t\t\t\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(newRows || end !== 0){\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.splice.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-splice\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result ;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchData(){\n\t\tif(this.data !== false){\n\t\t\tfor(var key in this.origFuncs){\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable:true,\n\t\t\t\t\twritable:true,\n\t\t\t\t\tvalue: this.origFuncs.key,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\twatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\t\t\n\t\tif(this.table.options.dataTree){\n\t\t\tthis.watchTreeChildren(row);\n\t\t}\n\t}\n\t\n\twatchTreeChildren (row){\n\t\tvar self = this,\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\n\t\torigFuncs = {};\n\t\t\n\t\tif(childField){\n\t\t\t\n\t\t\torigFuncs.push = childField.push;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"push\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-push\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-push\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.unshift = childField.unshift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-unshift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-unshift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.shift = childField.shift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-shift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-shift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.pop = childField.pop;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-pop\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-pop\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.splice = childField.splice;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-splice\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-splice\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trebuildTree(row){\n\t\tthis.table.modules.dataTree.initializeRow(row);\n\t\tthis.table.modules.dataTree.layoutRow(row);\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t}\n\t\n\twatchKey(row, data, key){\n\t\tvar self = this,\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\n\t\tvalue = data[key],\n\t\tversion = this.currentVersion;\n\t\t\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: (newValue) => {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"key\");\n\t\t\t\t\t\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"key\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(props.set){\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget:() => {\n\t\t\t\t\n\t\t\t\tif(props.get){\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue:data[key],\n\t\t\t});\n\t\t}\n\t}\n\t\n\tblock(key){\n\t\tif(!this.blocked){\n\t\t\tthis.blocked = key;\n\t\t}\n\t}\n\t\n\tunblock(key){\n\t\tif(this.blocked === key){\n\t\t\tthis.blocked = false;\n\t\t}\n\t}\n}\n\nReactiveData.moduleName = \"reactiveData\";\n\nexport default ReactiveData;\n\n\n\n","import Module from '../../core/Module.js';\n\nclass ResizeColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.latestX = false;\n\t\tthis.handle = null;\n\t\tthis.initialNextColumn = null;\n\t\tthis.nextColumn = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.registerColumnOption(\"resizable\", true);\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n\t}\n\t\n\tinitializeEventWatchers(){\n\t\tif(!this.initialized){\n\t\t\t\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n\t\t\tthis.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t\n\tlayoutCellHandles(cell){\n\t\tif(cell.row.type === \"row\"){\n\t\t\tthis.deInitializeComponent(cell);\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\n\t\t}\n\t}\n\t\n\tlayoutColumnHeader(column){\n\t\tif(column.definition.resizable){\n\t\t\tthis.initializeEventWatchers();\n\t\t\tthis.deInitializeComponent(column);\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\n\t\t}\n\t}\n\t\n\tcolumnLayoutUpdated(column){\n\t\tvar prev = column.prevColumn();\n\t\t\n\t\tthis.reinitializeColumn(column);\n\t\t\n\t\tif(prev){\n\t\t\tthis.reinitializeColumn(prev);\n\t\t}\n\t}\n\t\n\tcolumnWidthUpdated(column){\n\t\tif(column.modules.frozen){\n\t\t\tif(this.table.modules.frozenColumns.leftColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}else if(this.table.modules.frozenColumns.rightColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfrozenColumnOffset(column){\n\t\tvar offset = false;\n\n\t\tif(column.modules.frozen){\n\t\t\toffset = column.modules.frozen.marginValue; \n\n\t\t\tif(column.modules.frozen.position === \"left\"){\n\t\t\t\toffset += column.getWidth() - 3;\n\t\t\t}else{\n\t\t\t\tif(offset){\n\t\t\t\t\toffset -= 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset !== false ? offset + \"px\" : false;\n\t}\n\t\n\treinitializeColumn(column){\n\t\tvar frozenOffset = this.frozenColumnOffset(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\n\t\t\t\tif(frozenOffset){\n\t\t\t\t\tcell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\n\t\t\tif(frozenOffset){\n\t\t\t\tcolumn.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\n\t\t}\n\t}\n\t\n\tinitializeColumn(type, component, column, element){\n\t\tvar self = this,\n\t\tvariableHeight = false,\n\t\tmode = column.definition.resizable,\n\t\tconfig = {},\n\t\tnearestColumn = column.getLastColumn();\n\t\t\n\t\t//set column resize mode\n\t\tif(type === \"header\"){\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tconfig = {variableHeight:variableHeight};\n\t\t}\n\t\t\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\n\t\t\t\n\t\t\tvar handle = document.createElement('span');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\t\t\t\n\t\t\thandle.addEventListener(\"click\", function(e){\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\tvar handleDown = function(e){\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t};\n\t\t\t\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\t\t\t\n\t\t\t//resize column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\n\t\t\t\t\n\t\t\t\te.stopPropagation();\n\t\t\t\tnearestColumn.reinitializeWidth(true);\n\t\t\t\t\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\n\t\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", nearestColumn.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(column.modules.frozen){\n\t\t\t\thandle.style.position = \"sticky\";\n\t\t\t\thandle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n\t\t\t}\n\t\t\t\n\t\t\tconfig.handleEl = handle;\n\t\t\t\n\t\t\tif(element.parentNode && column.visible){\n\t\t\t\telement.after(handle);\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomponent.modules.resize = config;\n\t}\n\t\n\tdeInitializeColumn(column){\n\t\tthis.deInitializeComponent(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tthis.deInitializeComponent(cell);\n\t\t});\n\t}\n\t\n\tdeInitializeComponent(component){\n\t\tvar handleEl;\n\t\t\n\t\tif(component.modules.resize){\n\t\t\thandleEl = component.modules.resize.handleEl;\n\t\t\t\n\t\t\tif(handleEl && handleEl.parentElement){\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tresizeHandle(component, height){\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\n\t\t}\n\t}\n\t\n\t_checkResizability(column){\n\t\treturn column.definition.resizable;\n\t}\n\t\n\t_mouseDown(e, column, handle){\n\t\tvar self = this;\n\t\t\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tfunction mouseMove(e){\n\t\t\tvar x = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX,\n\t\t\tstartDiff = x - self.startX,\n\t\t\tmoveDiff = x - self.latestX,\n\t\t\tblockedBefore, blockedAfter;\n\t\t\t\n\t\t\tself.latestX = x;\n\t\t\t\n\t\t\tif(self.table.rtl){\n\t\t\t\tstartDiff = -startDiff;\n\t\t\t\tmoveDiff = -moveDiff;\n\t\t\t}\n\t\t\t\n\t\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n\t\t\t\n\t\t\tcolumn.setWidth(self.startWidth + startDiff);\n\t\t\t\n\t\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n\t\t\t\n\t\t\tif(moveDiff < 0){\n\t\t\t\tself.nextColumn = self.initialNextColumn;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.options.resizableColumnFit && self.nextColumn && !(blockedBefore && blockedAfter)){\n\t\t\t\tlet colWidth = self.nextColumn.getWidth();\n\t\t\t\t\n\t\t\t\tif(moveDiff > 0){\n\t\t\t\t\tif(colWidth <= self.nextColumn.minWidth){\n\t\t\t\t\t\tself.nextColumn = self.nextColumn.nextColumn();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(self.nextColumn){\n\t\t\t\t\tself.nextColumn.setWidth(self.nextColumn.getWidth() - moveDiff);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.table.columnManager.rerenderColumns(true);\n\t\t\t\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction mouseUp(e){\n\t\t\t\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif(self.startColumn.modules.edit){\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\t\t\t\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(self.startWidth !== column.getWidth()){\n\t\t\t\tself.table.columnManager.verticalAlignHeaders();\n\n\t\t\t\tself.dispatch(\"column-resized\", column);\n\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", column.getComponent());\n\t\t\t}\n\t\t}\n\t\t\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\t\t\n\t\t//block editor from taking action while resizing is taking place\n\t\tif(self.startColumn.modules.edit){\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\t\t\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n\t\tself.latestX = self.startX;\n\t\tself.startWidth = column.getWidth();\n\t\t\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeColumns.moduleName = \"resizeColumns\";\n\nexport default ResizeColumns;","import Module from '../../core/Module.js';\n\nclass ResizeRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.resizableRows){\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\trowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function(e){\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\n\t\tprevHandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown =  function(e){\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif(prevRow){\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t}\n\n\t_mouseDown(e, row, handle){\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n\t\t}\n\n\t\tfunction mouseUp(e){\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeRows.moduleName = \"resizeRows\";\n\nexport default ResizeRows;","import Module from '../../core/Module.js';\n\nclass ResizeTable extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.binding = false;\n\t\tthis.visibilityObserver = false;\n\t\tthis.resizeObserver = false;\n\t\tthis.containerObserver = false;\n\t\t\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\t\t\n\t\tthis.autoResize = false;\n\t\t\n\t\tthis.visible = false;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.initialRedraw = false;\n\t\t\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.autoResize){\n\t\t\tvar table = this.table,\n\t\t\ttableStyle;\n\t\t\t\n\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\n\t\t\tif(table.element.parentNode){\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\n\t\t\t\t\n\t\t\t\tthis.initializeVisibilityObserver();\n\t\t\t\t\n\t\t\t\tthis.autoResize = true;\n\t\t\t\t\n\t\t\t\tthis.resizeObserver = new ResizeObserver((entry) => {\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(table.element.parentNode){\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.resizeObserver.observe(table.element);\n\t\t\t\t\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\n\t\t\t\t\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.binding = function(){\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\n\t\t\t\t\t\ttable.columnManager.rerenderColumns(true);\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeVisibilityObserver(){\n\t\tthis.visibilityObserver = new IntersectionObserver((entries) => {\n\t\t\tthis.visible = entries[0].isIntersecting;\n\t\t\t\n\t\t\tif(!this.initialized){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.initialRedraw = !this.visible;\n\t\t\t}else{\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.redrawTable(this.initialRedraw);\n\t\t\t\t\tthis.initialRedraw = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.visibilityObserver.observe(this.table.element);\n\t}\n\t\n\tredrawTable(force){\n\t\tif(this.initialized && this.visible){\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\tthis.table.redraw(force);\n\t\t}\n\t}\n\t\n\ttableResized(){\n\t\tthis.table.rowManager.redraw();\n\t}\n\t\n\tclearBindings(){\n\t\tif(this.binding){\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\t\t\n\t\tif(this.resizeObserver){\n\t\t\tthis.resizeObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.visibilityObserver){\n\t\t\tthis.visibilityObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.containerObserver){\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t}\n}\n\nResizeTable.moduleName = \"resizeTable\";\n\nexport default ResizeTable;","import Module from '../../core/Module.js';\n\nclass ResponsiveLayout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n\t\tthis.registerColumnOption(\"responsive\");\n\t}\n\n\t//generate responsive columns list\n\tinitialize(){\n\t\tif(this.table.options.responsiveLayout){\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\n\t\t\tif(!force){\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeResponsivity(){\n\t\tvar columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\t//determine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\n\t\t\tif(column.modules.responsive){\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort((a, b) => {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.collapseHandleColumn){\n\t\t\tif(this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}else{\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//define layout information\n\tinitializeColumn(column){\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\n\t}\n\n\tinitializeRow(row){\n\t\tvar el;\n\n\t\tif(row.type !== \"calc\"){\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement:el,\n\t\t\t\topen:this.collapseStartOpen,\n\t\t\t};\n\n\t\t\tif(!this.collapseStartOpen){\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tlayoutRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t}\n\n\t//update column visibility\n\tupdateColumnVisibility(column, responsiveToggle){\n\t\tif(!responsiveToggle && column.modules.responsive){\n\t\t\tcolumn.modules.responsive.visible = column.visible;\n\t\t\tthis.initializeResponsivity();\n\t\t}\n\t}\n\n\thideColumn(column){\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !colCount){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowColumn(column){\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//redraw columns to fit space\n\tupdate(){\n\t\tvar working = true;\n\n\t\twhile(working){\n\n\t\t\tlet width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n\n\t\t\tlet diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n\n\t\t\tif(diff < 0){\n\t\t\t\t//table is too wide\n\t\t\t\tlet column = this.columns[this.index];\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.hideColumn(column);\n\t\t\t\t\tthis.index ++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\n\t\t\t\t//table has spare space\n\t\t\t\tlet column = this.columns[this.index -1];\n\n\t\t\t\tif(column){\n\t\t\t\t\tif(diff > 0){\n\t\t\t\t\t\tif(diff >= column.getWidth()){\n\t\t\t\t\t\t\tthis.showColumn(column);\n\t\t\t\t\t\t\tthis.index --;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!this.table.rowManager.activeRowsCount){\n\t\t\t\tthis.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedContent(){\n\t\tvar rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach((row) => {\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t});\n\t}\n\n\tgenerateCollapsedRowContent(row){\n\t\tvar el, contents;\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\n\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif(contents){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedRowData(row){\n\t\tvar data = row.getData(),\n\t\toutput = [],\n\t\tmockCellComponent;\n\n\t\tthis.hiddenColumns.forEach((column) => {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif(column.definition.title && column.field){\n\t\t\t\tif(column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters){\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue:false,\n\t\t\t\t\t\tdata:{},\n\t\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction onRendered(callback){\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tformatCollapsedData(data){\n\t\tvar list = document.createElement(\"table\");\n\n\t\tdata.forEach(function(item){\n\t\t\tvar row = document.createElement(\"tr\");\n\t\t\tvar titleData = document.createElement(\"td\");\n\t\t\tvar valueData = document.createElement(\"td\");\n\t\t\tvar node_content;\n\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\n\t\t\ttitleData.appendChild(titleHighlight);\n\t\t\tthis.langBind(\"columns|\" + item.field, function(text){\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\n\t\t\t});\n\n\t\t\tif(item.value instanceof Node){\n\t\t\t\tnode_content = document.createElement(\"div\");\n\t\t\t\tnode_content.appendChild(item.value);\n\t\t\t\tvalueData.appendChild(node_content);\n\t\t\t}else{\n\t\t\t\tvalueData.innerHTML = item.value;\n\t\t\t}\n\n\t\t\trow.appendChild(titleData);\n\t\t\trow.appendChild(valueData);\n\t\t\tlist.appendChild(row);\n\t\t}, this);\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t}\n}\n\nResponsiveLayout.moduleName = \"responsiveLayout\";\n\nexport default ResponsiveLayout;\n","import Module from '../../core/Module.js';\n\nclass SelectRow extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t\t\n\t\tthis.registerTableOption(\"selectable\", \"highlight\"); //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRangeMode\", \"drag\");  //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n\t\tthis.registerTableOption(\"selectablePersistence\", true); // maintain selection when table view is updated\n\t\tthis.registerTableOption(\"selectableCheck\", function(data, row){return true;}); //check whether row is selectable\n\t\t\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.selectable !== false){\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.selectable && !this.table.options.selectablePersistence){\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowRetrieve(type, prevValue){\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\n\t}\n\t\n\trowDeleted(row){\n\t\tthis._deselectRow(row, true);\n\t}\n\t\n\tclearSelectionData(silent){\n\t\tvar prevSelected = this.selectedRows.length;\n\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\t\t\n\t\tif(prevSelected && silent !== true){\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t}\n\t\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\telement = row.getElement();\n\t\t\n\t\t// trigger end of row selection\n\t\tvar endSelect = function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\t\t\n\t\trow.modules.select = {selected:false};\n\t\t\n\t\t//set row selection class\n\t\tif(self.checkRowSelectability(row)){\n\t\t\telement.classList.add(\"tabulator-selectable\");\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\n\t\t\t\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n\t\t\t\t}else{\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!self.selecting){\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\t\t\tif(e.shiftKey){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selecting = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selectPrev = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\telement.classList.add(\"tabulator-unselectable\");\n\t\t\telement.classList.remove(\"tabulator-selectable\");\n\t\t}\n\t}\n\t\n\thandleComplexRowClick(row, e){\n\t\tif(e.shiftKey){\n\t\t\tthis.table._clearSelection();\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\n\t\t\t\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n\t\t\t\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\t\t\t\n\t\t\tif(e.ctrlKey || e.metaKey){\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.options.selectable !== true && !this.isRowSelected(row)){\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectable){\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.lastClickedRow = row;\n\t\t\t}else{\n\t\t\t\tthis.deselectRows(undefined, true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.selectable !== true){\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectable){\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectable);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectRows(toggledRows);\n\t\t\t}\n\t\t\tthis.table._clearSelection();\n\t\t}\n\t\telse if(e.ctrlKey || e.metaKey){\n\t\t\tthis.toggleRow(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}else{\n\t\t\tthis.deselectRows(undefined, true);\n\t\t\tthis.selectRows(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}\n\t}\n\n\tcheckRowSelectability(row){\n\t\tif(row.type === \"row\"){\n\t\t\treturn this.table.options.selectableCheck.call(this.table, row.getComponent());\n\t\t}\n\n\t\treturn false;\n\t}\n\t\n\t//toggle row selection\n\ttoggleRow(row){\n\t\tif(this.checkRowSelectability(row)){\n\t\t\tif(row.modules.select && row.modules.select.selected){\n\t\t\t\tthis._deselectRow(row);\n\t\t\t}else{\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//select a number of rows\n\tselectRows(rows){\n\t\tvar rowMatch;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\t\t\tthis._selectRow(row, true, true);\n\t\t\t\t});\n\t\t\t\n\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(rowMatch){\n\t\t\t\t\tthis._selectRow(rowMatch, true, true);\n\t\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\t}else{\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t\t\n\t\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\t\tthis._selectRow(row, true, true);\n\t\t\t\t\t});\n\n\t\t\t\t\tif(rowMatch.length){\n\t\t\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tif(Array.isArray(rows)){\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tthis._selectRow(row, true, true);\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\t}else{\n\t\t\t\t\tthis._selectRow(rows, false, true);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t//select an individual row\n\t_selectRow(rowInfo, silent, force){\n\t\t//handle max row count\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\n\t\t\t\tif(this.table.options.selectableRollingSelection){\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\t\t\n\t\tif(row){\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged(silent);\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisRowSelected(row){\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t}\n\t\n\t//deselect a number of rows\n\tdeselectRows(rows, silent){\n\t\tvar self = this,\n\t\trowCount;\n\t\t\n\t\tif(typeof rows == \"undefined\"){\n\t\t\t\n\t\t\trowCount = self.selectedRows.length;\n\t\t\t\n\t\t\tfor(let i = 0; i < rowCount; i++){\n\t\t\t\tself._deselectRow(self.selectedRows[0], true);\n\t\t\t}\n\t\t\t\n\t\t\tif(rowCount){\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tif(Array.isArray(rows)){\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tself._deselectRow(row, true);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t}else{\n\t\t\t\tself._deselectRow(rows, silent);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//deselect an individual row\n\t_deselectRow(rowInfo, silent){\n\t\tvar self = this,\n\t\trow = self.table.rowManager.findRow(rowInfo),\n\t\tindex;\n\t\t\n\t\tif(row){\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\t\n\t\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\tself.selectedRows.splice(index, 1);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetSelectedData(){\n\t\tvar data = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetSelectedRows(){\n\t\t\n\t\tvar rows = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\trows.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t_rowSelectionChanged(silent){\n\t\tif(this.headerCheckboxElement){\n\t\t\tif(this.selectedRows.length === 0){\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(!silent){\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows());\n\t\t}\n\t}\n\t\n\tregisterRowSelectCheckbox (row, element) {\n\t\tif(!row._row.modules.select){\n\t\t\trow._row.modules.select = {};\n\t\t}\n\t\t\n\t\trow._row.modules.select.checkboxEl = element;\n\t}\n\t\n\tregisterHeaderSelectCheckbox (element) {\n\t\tthis.headerCheckboxElement = element;\n\t}\n\t\n\tchildRowSelection(row, select){\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\n\t\t\n\t\tif(select){\n\t\t\tfor(let child of children){\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t}else{\n\t\t\tfor(let child of children){\n\t\t\t\tthis._deselectRow(child, true);\n\t\t\t}\n\t\t}\n\t}\n}\n\nSelectRow.moduleName = \"selectRow\";\n\nexport default SelectRow;","//sort numbers\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar decimal = params.decimalSeparator;\n\tvar thousand = params.thousandSeparator;\n\tvar emptyAlign = 0;\n\n\ta = String(a);\n\tb = String(b);\n\n\tif(thousand){\n\t\ta = a.split(thousand).join(\"\");\n\t\tb = b.split(thousand).join(\"\");\n\t}\n\n\tif(decimal){\n\t\ta = a.split(decimal).join(\".\");\n\t\tb = b.split(decimal).join(\".\");\n\t}\n\n\ta = parseFloat(a);\n\tb = parseFloat(b);\n\n\t//handle non numeric values\n\tif(isNaN(a)){\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\n\t}else if(isNaN(b)){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\treturn a - b;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort strings\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\tvar locale;\n\n\t//handle empty values\n\tif(!a){\n\t\temptyAlign =  !b ? 0 : -1;\n\t}else if(!b){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\tswitch(typeof params.locale){\n\t\t\tcase \"boolean\":\n\t\t\t\tif(params.locale){\n\t\t\t\t\tlocale = this.langLocale();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\t\tlocale = params.locale;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort datetime\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tif(typeof DT != \"undefined\"){\n\t\tif(!DT.isDateTime(a)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\ta = DT.fromISO(String(a));\n\t\t\t}else{\n\t\t\t\ta = DT.fromFormat(String(a), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!DT.isDateTime(b)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\tb = DT.fromISO(String(b));\n\t\t\t}else{\n\t\t\t\tb = DT.fromFormat(String(b), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!a.isValid){\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\n\t\t}else if(!b.isValid){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\n\t}else{\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n\t}\n}","import datetime from './datetime.js';\n\n//sort date\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"dd/MM/yyyy\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}","import datetime from './datetime.js';\n\n//sort times\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"HH:mm\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}","//sort booleans\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\treturn el1 - el2;\n}","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar type = params.type || \"length\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tfunction calc(value){\n\t\tvar result;\n\n\t\tswitch(type){\n\t\t\tcase \"length\":\n\t\t\t\tresult = value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"sum\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"max\":\n\t\t\t\tresult = Math.max.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"min\":\n\t\t\t\tresult = Math.min.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"avg\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t}) / value.length;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t//handle non array values\n\tif(!Array.isArray(a)){\n\t\temptyAlign = !Array.isArray(b) ? 0 : -1;\n\t}else if(!Array.isArray(b)){\n\t\temptyAlign = 1;\n\t}else{\n\t\treturn calc(b) - calc(a);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\treturn el1 - el2;\n}","//sort alpha numeric strings\nexport default function(as, bs, aRow, bRow, column, dir, params){\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\t//handle empty values\n\tif(!as && as!== 0){\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t}else if(!bs && bs!== 0){\n\t\temptyAlign =  1;\n\t}else{\n\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\ta = String(as).toLowerCase();\n\t\tb = String(bs).toLowerCase();\n\t\tif(a === b) return 0;\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\ta = a.match(rx);\n\t\tb = b.match(rx);\n\t\tL = a.length > b.length ? b.length : a.length;\n\t\twhile(i < L){\n\t\t\ta1= a[i];\n\t\t\tb1= b[i++];\n\t\t\tif(a1 !== b1){\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\treturn a1 - b1;\n\t\t\t\t}\n\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn a.length > b.length;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","import number from './sorters/number.js';\nimport string from './sorters/string.js';\nimport date from './sorters/date.js';\nimport time from './sorters/time.js';\nimport datetime from './sorters/datetime.js';\nimport boolean from './sorters/boolean.js';\nimport array from './sorters/array.js';\nimport exists from './sorters/exists.js';\nimport alphanum from './sorters/alphanum.js';\n\nexport default {\n\tnumber:number,\n\tstring:string,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tboolean:boolean,\n\tarray:array,\n\texists:exists,\n\talphanum:alphanum\n};","import Module from '../../core/Module.js';\n\nimport defaultSorters from './defaults/sorters.js';\n\nclass Sort extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\n\t\tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\n\t\tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\n\t\tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n\t\tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n\t\tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n\t\tthis.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\n\t\tthis.registerColumnOption(\"sorter\");\n\t\tthis.registerColumnOption(\"sorterParams\");\n\n\t\tthis.registerColumnOption(\"headerSort\", true);\n\t\tthis.registerColumnOption(\"headerSortStartingDir\");\n\t\tthis.registerColumnOption(\"headerSortTristate\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.registerDataHandler(this.sort.bind(this), 20);\n\n\t\tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n\t\tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n\t\tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialSort){\n\t\t\tthis.setSort(this.table.options.initialSort);\n\t\t}\n\t}\n\n\tremoteSortParams(data, config, silent, params){\n\t\tvar sorters = this.getSort();\n\n\t\tsorters.forEach((item) => {\n\t\t\tdelete item.column;\n\t\t});\n\n\t\tparams.sort = sorters;\n\n\t\treturn params;\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tuserSetSort(sortList, dir){\n\t\tthis.setSort(sortList, dir);\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\tclearSort(){\n\t\tthis.clear();\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//initialize column header for sorting\n\tinitializeColumn(column){\n\t\tvar sorter = false,\n\t\tcolEl,\n\t\tarrowEl;\n\n\t\tswitch(typeof column.definition.sorter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Sort.sorters[column.definition.sorter]){\n\t\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tcolumn.modules.sort = {\n\t\t\tsorter:sorter, dir:\"none\",\n\t\t\tparams:column.definition.sorterParams || {},\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: column.definition.headerSortTristate,\n\t\t};\n\n\t\tif(column.definition.headerSort !== false){\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\n\t\t\tswitch(this.table.options.headerSortClickElement){\n\t\t\t\tcase \"icon\":\n\t\t\t\t\tarrowEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"header\":\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch(this.table.options.headerSortElement){\n\t\t\t\tcase \"function\":\n\t\t\t\t\t//do nothing\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t\t}\n\n\t\t\t//create sorter arrow\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\n\n\t\t\tcolumn.modules.sort.element = arrowEl;\n\n\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\n\t\t\t//sort on click\n\t\t\t(this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", (e) => {\n\t\t\t\tvar dir = \"\",\n\t\t\t\tsorters=[],\n\t\t\t\tmatch = false;\n\n\t\t\t\tif(column.modules.sort){\n\t\t\t\t\tif(column.modules.sort.tristate){\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = this.getSort();\n\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(match > -1){\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\n\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tthis.setSort(sorters);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(dir == \"none\"){\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tthis.setSort(column, dir);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\n\t\t\t\t\tthis.refreshSort();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trefreshSort(){\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.reloadData(null, false, false);\n\t\t}else{\n\t\t\tthis.refreshData(true);\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the sorters have changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//return current sorters\n\tgetSort(){\n\t\tvar self = this,\n\t\tsorters = [];\n\n\t\tself.sortList.forEach(function(item){\n\t\t\tif(item.column){\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\n\t\t\t}\n\t\t});\n\n\t\treturn sorters;\n\t}\n\n\t//change sort list and trigger sort\n\tsetSort(sortList, dir){\n\t\tvar self = this,\n\t\tnewSortList = [];\n\n\t\tif(!Array.isArray(sortList)){\n\t\t\tsortList = [{column: sortList, dir:dir}];\n\t\t}\n\n\t\tsortList.forEach(function(item){\n\t\t\tvar column;\n\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\n\t\t\tif(column){\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\n\t\t});\n\n\t\tself.sortList = newSortList;\n\n\t\tthis.dispatch(\"sort-changed\");\n\t}\n\n\t//clear sorters\n\tclear(){\n\t\tthis.setSort([]);\n\t}\n\n\t//find appropriate sorter for column\n\tfindSorter(column){\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\tsorter = \"string\",\n\t\tfield, value;\n\n\t\tif(row){\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\n\t\t\tif(field){\n\n\t\t\t\tvalue = column.getFieldValue(row);\n\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Sort.sorters[sorter];\n\t}\n\n\t//work through sort list sorting data\n\tsort(data){\n\t\tvar self = this,\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\tsortListActual = [],\n\t\trowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataSorting\")){\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\n\t\t}\n\n\t\tself.clearColumnHeaders();\n\n\t\tif(this.table.options.sortMode !== \"remote\"){\n\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tvar sortObj;\n\n\t\t\t\tif(item.column){\n\t\t\t\t\tsortObj = item.column.modules.sort;\n\n\t\t\t\t\tif(sortObj){\n\n\t\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\t\tif(!sortObj.sorter){\n\t\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\n\t\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\n\t\t}else{\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataSorted\")){\n\t\t\tdata.forEach((row) => {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//clear sort arrows on columns\n\tclearColumnHeaders(){\n\t\tthis.table.columnManager.getRealColumns().forEach((column) => {\n\t\t\tif(column.modules.sort){\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t}\n\t\t});\n\t}\n\n\t//set the column header sort direction\n\tsetColumnHeader(column, dir){\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n\t\tthis.setColumnHeaderSortIcon(column, dir);\n\t}\n\n\tsetColumnHeaderSortIcon(column, dir){\n\t\tvar sortEl = column.modules.sort.element,\n\t\tarrowEl;\n\n\t\tif(column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\"){\n\t\t\twhile(sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n\n\t\t\tarrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n\t\t\t\n\t\t\tif(typeof arrowEl === \"object\"){\n\t\t\t\tsortEl.appendChild(arrowEl);\n\t\t\t}else{\n\t\t\t\tsortEl.innerHTML = arrowEl;\n\t\t\t}\n\t\t}\n\t}\n\n\t//sort each item in sort list\n\t_sortItems(data, sortList){\n\t\tvar sorterCount = sortList.length - 1;\n\n\t\tdata.sort((a, b) => {\n\t\t\tvar result;\n\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\n\t\t\t\tlet sortItem = sortList[i];\n\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n\t\t\t\tif(result !== 0){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t//process individual rows for a sort function on active data\n\t_sortRow(a, b, column, dir, params){\n\t\tvar el1Comp, el2Comp;\n\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t}\n}\n\nSort.moduleName = \"sort\";\n\n//load defaults\nSort.sorters = defaultSorters;\n\nexport default Sort;","import Module from '../../core/Module.js';\nimport Cell from '../../core/cell/Cell.js';\n\nclass Tooltip extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.tooltipSubscriber = null,\n\t\tthis.headerSubscriber = null,\n\t\t\n\t\tthis.timeout = null;\n\t\tthis.popupInstance = null;\n\t\t\n\t\tthis.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \n\t\t\n\t\tthis.registerColumnOption(\"tooltip\");\n\t\tthis.registerColumnOption(\"headerTooltip\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\tthis.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n\t}\t\n\t\n\tinitializeColumn(column){\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\n\t\t\tthis.headerSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n\t\t}\n\t\t\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\n\t\t\tthis.tooltipSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n\t\t}\n\t}\n\t\n\tmousemoveCheck(action, e, component){\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n\t\t\n\t\tif(tooltip){\n\t\t\tthis.clearPopup();\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n\t\t}\n\t}\n\n\tmouseoutCheck(action, e, component){\n\t\tif(!this.popupInstance){\n\t\t\tthis.clearPopup();\n\t\t}\n\t}\n\t\n\tclearPopup(action, e, component){\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t\t\n\t\tif(this.popupInstance){\n\t\t\tthis.popupInstance.hide();\n\t\t}\n\t}\n\t\n\tloadTooltip(e, component, tooltip){\n\t\tvar contentsEl, renderedCallback, coords;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(typeof tooltip === \"function\"){\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\n\t\t}\n\t\t\n\t\tif(tooltip instanceof HTMLElement){\n\t\t\tcontentsEl = tooltip;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\t\n\t\t\tif(tooltip === true){\n\t\t\t\tif(component instanceof Cell){\n\t\t\t\t\ttooltip = component.value;\n\t\t\t\t}else{\n\t\t\t\t\tif(component.definition.field){\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttooltip = component.definition.title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontentsEl.innerHTML = tooltip;\n\t\t}\n\t\t\n\t\tif(tooltip || tooltip === 0 || tooltip === false){\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\n\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n\t\t\t\n\t\t\tthis.popupInstance = this.popup(contentsEl);\n\t\t\t\n\t\t\tif(typeof renderedCallback === \"function\"){\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\n\t\t\t}\n\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\n\t\t\t\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\n\t\t\t\tthis.popupInstance = null;\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nTooltip.moduleName = \"tooltip\";\n\nexport default Tooltip;\n","export default {\n\t//is integer\n\tinteger: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//maximum value\n\tmax: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\n\t//minimum string length\n\tminLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(typeof parameters == \"string\"){\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function(row){\n\t\t\tvar data = row.getData();\n\n\t\t\tif(data !== cellData){\n\t\t\t\tif(value == column.getFieldValue(data)){\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired:function(cell, value, parameters){\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultValidators from './defaults/validators.js';\n\nclass Validate extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.invalidCells = [];\n\t\t\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\n\t\t\n\t\tthis.registerColumnOption(\"validator\");\n\t\t\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n\t}\n\t\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Event Handling //////////\n\t///////////////////////////////////\n\t\n\teditValidate(cell, value, previousValue){\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\t\t\n\t\t// allow time for editor to make render changes then style cell\n\t\tif(valid !== true){\n\t\t\tsetTimeout(() => {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn valid;\n\t}\n\t\n\teditorClear(cell, cancelled){\n\t\tif(cancelled){\n\t\t\tif(cell.column.modules.validate){\n\t\t\t\tthis.cellValidate(cell);\n\t\t\t}\n\t\t}\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t}\n\t\n\teditedClear(cell){\n\t\tif(cell.modules.validate){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Cell Functions /////////\n\t///////////////////////////////////\n\t\n\tcellIsValid(cell){\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\n\t}\n\t\n\tcellValidate(cell){\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Column Functions ////////\n\t///////////////////////////////////\n\t\n\tcolumnValidate(column){\n\t\tvar invalid = [];\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Row Functions //////////\n\t///////////////////////////////////\n\t\n\trowValidate(row){\n\t\tvar invalid = [];\n\t\t\n\t\trow.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\tuserClearCellValidation(cells){\n\t\tif(!cells){\n\t\t\tcells = this.getInvalidCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.clearValidation(cell._getSelf());\n\t\t});\n\t}\n\t\n\tuserValidate(cells){\n\t\tvar output = [];\n\t\t\n\t\t//clear row data\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trow = row.getComponent();\n\t\t\t\n\t\t\tvar valid = row.validate();\n\t\t\t\n\t\t\tif(valid !== true){\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output.length ? output : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.validator !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//validate\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = [],\n\t\tvalidator;\n\t\t\n\t\tif(column.definition.validator){\n\t\t\t\n\t\t\tif(Array.isArray(column.definition.validator)){\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\t\t\t\t\t\n\t\t\t\t\tif(validator){\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\t\t\t\t\n\t\t\t\tif(validator){\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t}\n\t\n\t_extractValidator(value){\n\t\tvar type, params, pos;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\t\t\t\n\t\t\t\tif(pos > -1){\n\t\t\t\t\ttype = value.substring(0,pos);\n\t\t\t\t\tparams = value.substring(pos+1);\n\t\t\t\t}else{\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\t\t\t\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t}\n\t}\n\t\n\t_buildValidator(type, params){\n\t\t\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\n\t\t\n\t\tif(!func){\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn {\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc:func,\n\t\t\t\tparams:params,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tvalidate(validators, cell, value){\n\t\tvar self = this,\n\t\tfailedValidators = [],\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\n\t\tif(validators){\n\t\t\tvalidators.forEach((item) => {\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\n\t\t\t\t\tfailedValidators.push({\n\t\t\t\t\t\ttype:item.type,\n\t\t\t\t\t\tparameters:item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(!cell.modules.validate){\n\t\t\tcell.modules.validate = {};\n\t\t}\n\t\t\n\t\tif(!failedValidators.length){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}else{\n\t\t\tcell.modules.validate.invalid = failedValidators;\n\t\t\t\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\t\t\t\n\t\t\tif(invalidIndex == -1){\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn failedValidators.length ? failedValidators : true;\n\t}\n\t\n\tgetInvalidCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.invalidCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearValidation(cell){\n\t\tvar invalidIndex;\n\t\t\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\n\t\t\t\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\t\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nValidate.moduleName = \"validate\";\n\n//load defaults\nValidate.validators = defaultValidators;\n\nexport default Validate;\n","export default {\n\n\tdebugEventsExternal:false, //flag to console log events\n\tdebugEventsInternal:false, //flag to console log events\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\n\tdebugInvalidComponentFuncs:true, //allow toggling of invalid component warnings\n\tdebugInitialization:true, //allow toggling of pre initialization function call warnings\n\tdebugDeprecation:true, //allow toggling of deprecation warnings\n\n\theight:false, //height of tabulator\n\tminHeight:false, //minimum height of tabulator\n\tmaxHeight:false, //maximum height of tabulator\n\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\n\n\tpopupContainer:false,\n\n\tcolumns:[],//store for colum header info\n\tcolumnDefaults:{}, //store column default props\n\n\tdata:false, //default starting data\n\n\tautoColumns:false, //build columns from data row structure\n\tautoColumnsDefinitions:false,\n\n\tnestedFieldSeparator:\".\", //separator for nested data\n\n\tfooterElement:false, //hold footer element\n\n\tindex:\"id\", //filed for row index\n\n\ttextDirection:\"auto\",\n\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\n\n\theaderVisible:true, //hide header\n\n\trenderVertical:\"virtual\",\n\trenderHorizontal:\"basic\",\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\n\n\tscrollToRowPosition:\"top\",\n\tscrollToRowIfVisible:true,\n\n\tscrollToColumnPosition:\"left\",\n\tscrollToColumnIfVisible:true,\n\n\trowFormatter:false,\n\trowFormatterPrint:null,\n\trowFormatterClipboard:null,\n\trowFormatterHtmlOutput:null,\n\n\trowHeight:null,\n\n\tplaceholder:false,\n\n\tdataLoader:true,\n\tdataLoaderLoading:false,\n\tdataLoaderError:false,\n\tdataLoaderErrorTimeout:3000,\n\n\tdataSendParams:{},\n\n\tdataReceiveParams:{},\n};\n","export default class OptionsList {\n\tconstructor(table, msgType, defaults = {}){\n\t\tthis.table = table;\n\t\tthis.msgType = msgType;\n\t\tthis.registeredDefaults = Object.assign({}, defaults);\n\t}\n\t\n\tregister(option, value){\n\t\tthis.registeredDefaults[option] = value;\n\t}\n\t\n\tgenerate(defaultOptions, userOptions = {}){\n\t\tvar output = Object.assign({}, this.registeredDefaults),\n\t\twarn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n\t\t\n\t\tObject.assign(output, defaultOptions);\n\t\t\n\t\tfor (let key in userOptions){\n\t\t\tif(!output.hasOwnProperty(key)){\n\t\t\t\tif(warn){\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key);\n\t\t\t\t}\n\n\t\t\t\toutput[key] = userOptions.key;\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfor (let key in output){\n\t\t\tif(key in userOptions){\n\t\t\t\toutput[key] = userOptions[key];\n\t\t\t}else{\n\t\t\t\tif(Array.isArray(output[key])){\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\n\t\t\t\t\tdelete output[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Renderer extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.elementVertical = table.rowManager.element;\n\t\tthis.elementHorizontal = table.columnManager.element;\n\t\tthis.tableElement =  table.rowManager.tableElement;\n\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n\t}\n\n\n\t///////////////////////////////////\n\t/////// Internal Bindings /////////\n\t///////////////////////////////////\n\n\tinitialize(){\n\t\t//initialize core functionality\n\t}\n\n\tclearRows(){\n\t\t//clear down existing rows layout\n\t}\n\n\tclearColumns(){\n\t\t//clear down existing columns layout\n\t}\n\n\n\treinitializeColumnWidths(columns){\n\t\t//resize columns to fit data\n\t}\n\n\n\trenderRows(){\n\t\t//render rows from a clean slate\n\t}\n\n\trenderColumns(){\n\t\t//render columns from a clean slate\n\t}\n\n\trerenderRows(callback){\n\t\t// rerender rows and keep position\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\trerenderColumns(update, blockRedraw){\n\t\t//rerender columns\n\t}\n\n\trenderRowCells(row){\n\t\t//render the cells in a row\n\t}\n\n\trerenderRowCells(row, force){\n\t\t//rerender the cells in a row\n\t}\n\n\tscrollColumns(left, dir){\n\t\t//handle horizontal scrolling\n\t}\n\n\tscrollRows(top, dir){\n\t\t//handle vertical scrolling\n\t}\n\n\tresize(){\n\t\t//container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n\t}\n\n\tscrollToRow(row){\n\t\t//scroll to a specific row\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\t//determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\t//return the visible rows\n\t\treturn [];\n\t}\n\n\t///////////////////////////////////\n\t//////// Helper Functions /////////\n\t///////////////////////////////////\n\n\trows(){\n\t\treturn this.table.rowManager.getDisplayRows();\n\t}\n\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t/////// External Triggers /////////\n\t/////// (DO NOT OVERRIDE) /////////\n\t///////////////////////////////////\n\n\tclear(){\n\t\t//clear down existing layout\n\t\tthis.clearRows();\n\t\tthis.clearColumns();\n\t}\n\n\trender(){\n\t\t//render from a clean slate\n\t\tthis.renderRows();\n\t\tthis.renderColumns();\n\t}\n\n\trerender(callback){\n\t\t// rerender and keep position\n\t\tthis.rerenderRows();\n\t\tthis.rerenderColumns();\n\t}\n\n\tscrollToRowPosition(row, position, ifVisible){\n\t\tvar rowIndex = this.rows().indexOf(row),\n\t\trowEl = row.getElement(),\n\t\toffset = 0;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(rowIndex > -1){\n\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif(position === \"nearest\"){\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\t\t\t\tthis.scrollToRow(row);\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\tthis.elementVertical.scrollTop = rowEl.offsetTop;\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\n\nexport default class BasicHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\trenderRowCells(row){\n\t\trow.cells.forEach((cell) => {\n\t\t\trow.element.appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t});\n\t}\n\n\treinitializeColumnWidths(columns){\n\t\tcolumns.forEach(function(column){\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\n\nexport default class VirtualDomHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftCol = 0;\n\t\tthis.rightCol = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\t\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t\t\n\t\tthis.fitDataColAvg = 0;\n\t\t\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\t\t\n\t\tthis.visibleRows = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.isFitData = false;\n\t\t\n\t\tthis.columns = [];\n\t}\n\t\n\tinitialize(){\n\t\tthis.compatibilityCheck();\n\t\tthis.layoutCheck();\n\t\tthis.vertScrollListen();\n\t}\n\t\n\tcompatibilityCheck(){\t\t\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n\t\t}\n\t\t\n\t\tif(this.options(\"responsiveLayout\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n\t\t}\n\t\t\n\t\tif(this.options(\"rtl\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n\t\t}\n\t}\n\t\n\tlayoutCheck(){\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\n\t}\n\t\n\tvertScrollListen(){\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n\t}\n\t\n\tclearVisRowCache(){\n\t\tthis.visibleRows = null;\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\t\n\trenderColumns(row, force){\n\t\tthis.dataChange();\n\t}\n\t\n\t\n\tscrollColumns(left, dir){\n\t\tif(this.scrollLeft != left){\n\t\t\tthis.scrollLeft = left;\n\t\t\t\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n\t\t}\n\t}\n\t\n\tcalcWindowBuffer(){\n\t\tvar buffer = this.elementVertical.clientWidth;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > buffer){\n\t\t\t\t\tbuffer = width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.windowBuffer = buffer * 2;\n\t}\n\t\n\trerenderColumns(update, blockRedraw){\t\t\n\t\tvar old = {\n\t\t\tcols:this.columns,\n\t\t\tleftCol:this.leftCol,\n\t\t\trightCol:this.rightCol,\n\t\t},\n\t\tcolPos = 0;\n\t\t\n\t\tif(update && !this.initialized){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.clear();\n\t\t\n\t\tthis.calcWindowBuffer();\n\t\t\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\n\t\t\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tvar config = {},\n\t\t\twidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tif(!column.modules.frozen){\t\t\t\n\t\t\t\t\twidth = column.getWidth();\n\n\t\t\t\t\tconfig.leftPos = colPos;\n\t\t\t\t\tconfig.rightPos = colPos + width;\n\t\t\t\t\t\n\t\t\t\t\tconfig.width = width;\n\t\t\t\t\t\n\t\t\t\t\tif (this.isFitData) {\n\t\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\n\t\t\t\t\t\t//column is visible\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.leftCol == -1){\n\t\t\t\t\t\t\tthis.leftCol = this.columns.length;\n\t\t\t\t\t\t\tthis.vDomPadLeft = colPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.rightCol = this.columns.length;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// column is hidden\n\t\t\t\t\t\tif(this.leftCol !== -1){\n\t\t\t\t\t\t\tthis.vDomPadRight += width;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.columns.push(column);\n\t\t\t\t\t\n\t\t\t\t\tcolumn.modules.vdomHoz = config;\n\t\t\t\t\t\n\t\t\t\t\tcolPos += width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tif(!update || this.reinitChanged(old)){\n\t\t\t\tthis.reinitializeRows();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\n\t}\n\t\n\trenderRowCells(row){\n\t\tif(this.initialized){\n\t\t\tthis.initializeRow(row);\n\t\t}else{\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\trow.element.appendChild(cell.getElement());\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\trerenderRowCells(row, force){\n\t\tthis.reinitializeRow(row, force);\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\tthis.columns[i].reinitializeWidth();\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\t\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tclear(){\n\t\tthis.columns = [];\n\t\t\n\t\tthis.leftCol = -1;\n\t\tthis.rightCol = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t}\n\t\n\tdataChange(){\n\t\tvar change = false,\n\t\trow, rowEl;\n\t\t\n\t\tif(this.isFitData){\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif(!column.definition.width && column.visible){\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\t\t\n\t\t\t\trow = this.chain(\"rows-sample\", [1], [], () => {\n\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\n\t\t\t\t})[0];\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trowEl = row.getElement();\n\t\t\t\t\t\n\t\t\t\t\trow.generateCells();\n\t\t\t\t\t\n\t\t\t\t\tthis.tableElement.appendChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tfor(let colEnd = 0; colEnd < row.cells.length; colEnd++){\n\t\t\t\t\t\tlet cell = row.cells[colEnd];\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\t\t\t\t\t\t\n\t\t\t\t\t\tcell.column.reinitializeWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\n\t\t\t\tthis.layoutRefresh();\n\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitChanged(old){\n\t\tvar match = true;\n\t\t\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\told.cols.forEach((col, i) => {\n\t\t\tif(col !== this.columns[i]){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn !match;\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.getVisibleRows(),\n\t\totherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\n\t\tvisibleRows.forEach((row) => {\n\t\t\tthis.reinitializeRow(row, true);\n\t\t});\n\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t}\n\t\n\tgetVisibleRows(){\n\t\tif (!this.visibleRows){\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\n\t\t}\n\t\t\n\t\treturn this.visibleRows;\t\n\t}\n\t\n\tscroll(diff){\n\t\tthis.vDomScrollPosLeft += diff;\n\t\tthis.vDomScrollPosRight += diff;\n\t\t\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\n\t\t\tthis.rerenderColumns();\n\t\t}else{\n\t\t\tif(diff > 0){\n\t\t\t\t//scroll right\n\t\t\t\tthis.addColRight();\n\t\t\t\tthis.removeColLeft();\n\t\t\t}else{\n\t\t\t\t//scroll left\n\t\t\t\tthis.addColLeft();\n\t\t\t\tthis.removeColRight();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcolPositionAdjust (start, end, diff){\n\t\tfor(let i = start; i < end; i++){\n\t\t\tlet column = this.columns[i];\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\n\t\t}\n\t}\n\t\n\taddColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\n\t\t\tlet column = this.columns[this.rightCol + 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\n\t\t\t\t\t\tthis.vDomPadRight = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t\t\t\t}\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\taddColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol - 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tif(diff){\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.rightCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\n\t\t\t\t\tthis.rightCol --;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\n\t\t\t\t\tthis.leftCol ++;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tfitDataColActualWidthCheck(column){\n\t\tvar newWidth, widthDiff;\n\t\t\n\t\tif(column.modules.vdomHoz.fitDataCheck){\n\t\t\tcolumn.reinitializeWidth();\n\t\t\t\n\t\t\tnewWidth = column.getWidth();\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\n\t\t\t\n\t\t\tif(widthDiff){\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\n\t\t}\n\t\t\n\t\treturn widthDiff;\n\t}\n\t\n\tinitializeRow(row){\n\t\tif(row.type !== \"group\"){\n\t\t\trow.modules.vdomHoz = {\n\t\t\t\tleftCol:this.leftCol,\n\t\t\t\trightCol:this.rightCol,\n\t\t\t};\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\t\tthis.appendCell(row, this.columns[i]);\n\t\t\t}\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tappendCell(row, column){\n\t\tif(column && column.visible){\n\t\t\tlet cell = row.getCell(column);\n\t\t\t\n\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t}\n\t}\n\t\n\treinitializeRow(row, force){\n\t\tif(row.type !== \"group\"){\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\n\t\t\t\t\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n\n\t\t\t\tthis.initializeRow(row);\n\t\t\t}\n\t\t}\n\t}\n}","import CoreFeature from './CoreFeature.js';\nimport Column from './column/Column.js';\nimport ColumnComponent from './column/ColumnComponent.js';\nimport Helpers from './tools/Helpers.js';\nimport OptionsList from './tools/OptionsList.js';\n\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js';\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js';\n\nimport defaultColumnOptions from './column/defaults/options.js';\n\nexport default class ColumnManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.blockHozScrollEvent = false;\n\t\tthis.headersElement = null;\n\t\tthis.contentsElement = null;\n\t\tthis.element = null ; //containing element\n\t\tthis.columns = []; // column definition object\n\t\tthis.columnsByIndex = []; //columns by index\n\t\tthis.columnsByField = {}; //columns by field\n\t\tthis.scrollLeft = 0;\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockUpdate = null; //store latest redraw update only status\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t////////////// Setup Functions /////////////////\n\t\n\tinitialize(){\n\t\tthis.initializeRenderer();\n\t\t\n\t\tthis.headersElement = this.createHeadersElement();\n\t\tthis.contentsElement = this.createHeaderContentsElement();\n\t\tthis.element = this.createHeaderElement();\n\t\t\n\t\tthis.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n\t\tthis.element.insertBefore(this.contentsElement, this.element.firstChild);\n\t\t\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n\t}\n\n\tpadVerticalScrollbar(width){\n\t\tif(this.table.rtl){\n\t\t\tthis.headersElement.style.marginLeft = width + \"px\";\n\t\t}else{\n\t\t\tthis.headersElement.style.marginRight = width + \"px\";\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomHorizontal,\n\t\t\t\"basic\": RendererBasicHorizontal,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderHorizontal;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n\t\t}\n\t}\n\t\n\t\n\tcreateHeadersElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-headers\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\treturn el;\n\t}\n\n\tcreateHeaderContentsElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header-contents\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tif(!this.table.options.headerVisible){\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return containing contents element\n\tgetContentsElement(){\n\t\treturn this.contentsElement;\n\t}\n\t\n\t\n\t//return header containing element\n\tgetHeadersElement(){\n\t\treturn this.headersElement;\n\t}\n\t\n\t//scroll horizontally to match table body\n\tscrollHorizontal(left){\n\t\tthis.contentsElement.scrollLeft = left;\n\n\t\tthis.scrollLeft = left;\n\t\t\n\t\tthis.renderer.scrollColumns(left);\n\t}\n\t\n\t///////////// Column Setup Functions /////////////\n\tgenerateColumnsFromRowData(data){\n\t\tvar cols = [],\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\n\t\trow, sorter;\n\t\t\n\t\tif(data && data.length){\n\t\t\t\n\t\t\trow = data[0];\n\t\t\t\n\t\t\tfor(var key in row){\n\t\t\t\tlet col = {\n\t\t\t\t\tfield:key,\n\t\t\t\t\ttitle:key,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tlet value = row[key];\n\t\t\t\t\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(value)){\n\t\t\t\t\t\t\tsorter = \"array\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcol.sorter = sorter;\n\t\t\t\t\n\t\t\t\tcols.push(col);\n\t\t\t}\n\t\t\t\n\t\t\tif(definitions){\n\t\t\t\t\n\t\t\t\tswitch(typeof definitions){\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(definitions)){\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.table.options.columns = cols;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.table.options.columns = cols;\n\t\t\t}\n\t\t\t\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t}\n\t\n\tsetColumns(cols, row){\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.columnsByIndex = [];\n\t\tthis.columnsByField = {};\n\t\t\n\t\tthis.dispatch(\"columns-loading\");\n\t\t\n\t\tcols.forEach((def, i) => {\n\t\t\tthis._addColumn(def);\n\t\t});\n\t\t\n\t\tthis._reIndexColumns();\n\t\t\n\t\tthis.dispatch(\"columns-loaded\");\n\t\t\n\t\tthis.rerenderColumns(false, true);\n\t\t\n\t\tthis.redraw(true);\n\t}\n\t\n\t_addColumn(definition, before, nextToColumn){\n\t\tvar column = new Column(definition, this),\n\t\tcolEl = column.getElement(),\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\t\t\n\t\tif(nextToColumn && index > -1){\n\t\t\tvar topColumn = nextToColumn.getTopColumn();\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\n\t\t\tvar nextEl = topColumn.getElement();\n\t\t\t\n\t\t\tif(before){\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t}else{\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t}else{\n\t\t\tif(before){\n\t\t\t\tthis.columns.unshift(column);\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t}else{\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\t\t}\n\t\t\n\t\tcolumn.columnRendered();\n\t\t\n\t\treturn column;\n\t}\n\t\n\tregisterColumnField(col){\n\t\tif(col.definition.field){\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t}\n\t\n\tregisterColumnPosition(col){\n\t\tthis.columnsByIndex.push(col);\n\t}\n\t\n\t_reIndexColumns(){\n\t\tthis.columnsByIndex = [];\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t}\n\t\n\t//ensure column headers take up the correct amount of space in column groups\n\tverticalAlignHeaders(){\n\t\tvar minHeight = 0;\n\t\t\n\t\tif(!this.redrawBlock){\n\n\t\t\tthis.headersElement.style.height=\"\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.clearVerticalAlign();\n\t\t\t});\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tvar height = column.getHeight();\n\t\t\t\t\n\t\t\t\tif(height > minHeight){\n\t\t\t\t\tminHeight = height;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.headersElement.style.height = minHeight + \"px\";\n\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n\t\t\t});\n\t\t\t\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\t//////////////// Column Details /////////////////\n\tfindColumn(subject){\n\t\tvar columns;\n\n\t\tif(typeof subject == \"object\"){\n\t\t\t\n\t\t\tif(subject instanceof Column){\n\t\t\t\t//subject is column element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof ColumnComponent){\n\t\t\t\t//subject is public column component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\n\t\t\t\tcolumns = [];\n\n\t\t\t\tthis.columns.forEach((column) => {\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t\t});\n\n\t\t\t\t//subject is a HTML element of the column header\n\t\t\t\tlet match = columns.find((column) => {\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t//subject should be treated as the field name of the column\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetColumnByField(field){\n\t\treturn this.columnsByField[field];\n\t}\n\t\n\tgetColumnsByFieldRoot(root){\n\t\tvar matches = [];\n\t\t\n\t\tObject.keys(this.columnsByField).forEach((field) => {\n\t\t\tvar fieldRoot = field.split(\".\")[0];\n\t\t\tif(fieldRoot === root){\n\t\t\t\tmatches.push(this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn matches;\n\t}\n\t\n\tgetColumnByIndex(index){\n\t\treturn this.columnsByIndex[index];\n\t}\n\t\n\tgetFirstVisibleColumn(){\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\n\t\t\treturn col.visible;\n\t\t});\n\t\t\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t}\n\t\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\t\n\tfindColumnIndex(column){\n\t\treturn this.columnsByIndex.findIndex((col) => {\n\t\t\treturn column === col;\n\t\t});\n\t}\n\t\n\t//return all columns that are not groups\n\tgetRealColumns(){\n\t\treturn this.columnsByIndex;\n\t}\n\t\n\t//traverse across columns and call action\n\ttraverse(callback){\n\t\tthis.columnsByIndex.forEach((column,i) =>{\n\t\t\tcallback(column, i);\n\t\t});\n\t}\n\t\n\t//get definitions of actual columns\n\tgetDefinitions(active){\n\t\tvar output = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(!active || (active && column.visible)){\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//get full nested definition tree\n\tgetDefinitionTree(){\n\t\tvar output = [];\n\t\t\n\t\tthis.columns.forEach((column) => {\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(structured){\n\t\tvar output = [],\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn width;\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\t\t\n\t\tif(after){\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\t\t\n\t\tthis.moveColumnActual(from, to, after);\n\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\t\n\tmoveColumnActual(from, to, after){\n\t\tif(from.parent.isGroup){\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t}else{\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\t\t\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\t\t\n\t\tthis.rerenderColumns(true);\n\t\t\n\t\tthis.dispatch(\"column-moved\", from, to, after);\n\t\t\n\t\tif(this.subscribedExternal(\"columnMoved\")){\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\t}\n\t\n\t_moveColumnInArray(columns, from, to, after, updateRows){\n\t\tvar\tfromIndex = columns.indexOf(from),\n\t\ttoIndex, rows = [];\n\t\t\n\t\tif (fromIndex > -1) {\n\t\t\t\n\t\t\tcolumns.splice(fromIndex, 1);\n\t\t\t\n\t\t\ttoIndex = columns.indexOf(to);\n\t\t\t\n\t\t\tif (toIndex > -1) {\n\t\t\t\t\n\t\t\t\tif(after){\n\t\t\t\t\ttoIndex = toIndex+1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\t\t\t\n\t\t\tcolumns.splice(toIndex, 0, from);\n\t\t\t\n\t\t\tif(updateRows){\n\t\t\t\t\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n\t\t\t\t\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\n\t\t\t\t\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tif(row.cells.length){\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tscrollToColumn(column, position, ifVisible){\n\t\tvar left = 0,\n\t\toffset = column.getLeftOffset(),\n\t\tadjust = 0,\n\t\tcolEl = column.getElement();\n\t\t\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\tadjust = -this.element.clientWidth / 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//check column visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//calculate scroll position\n\t\t\t\tleft = offset + adjust;\n\t\t\t\t\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t\t\n\t\t\t\tresolve();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tgenerateCells(row){\n\t\tvar cells = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\t\t\n\t\treturn cells;\n\t}\n\t\n\t//////////////// Column Management /////////////////\n\tgetFlexBaseWidth(){\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\n\t\tfixedWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar if present\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\t\t\n\t\tthis.columnsByIndex.forEach(function(column){\n\t\t\tvar width, minWidth, colWidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\twidth = column.definition.width || 0;\n\t\t\t\t\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\t\t\t\t\n\t\t\t\tif(typeof(width) == \"string\"){\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn fixedWidth;\n\t}\n\t\n\taddColumn(definition, before, nextToColumn){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\n\t\t\t\n\t\t\tthis._reIndexColumns();\n\t\t\t\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\n\t\t\t\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.redraw(true);\n\t\t\t\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t\t\n\t\t\tthis.rerenderColumns();\n\t\t\t\n\t\t\tresolve(column);\n\t\t});\n\t}\n\t\n\t//remove column from system\n\tderegisterColumn(column){\n\t\tvar field = column.getField(),\n\t\tindex;\n\t\t\n\t\t//remove from field list\n\t\tif(field){\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\t\t\n\t\t//remove from index list\n\t\tindex = this.columnsByIndex.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\t\t\n\t\t//remove from column list\n\t\tindex = this.columns.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.redraw();\n\t}\n\t\n\trerenderColumns(update, silent){\n\t\tif(!this.redrawBlock){\n\t\t\tthis.renderer.rerenderColumns(update, silent);\n\t\t}else{\n\t\t\tif(update === false || (update === true && this.redrawBlockUpdate === null)){\n\t\t\t\tthis.redrawBlockUpdate = update;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockUpdate = null;\n\t}\n\t\n\trestoreRedraw(){\n\t\tthis.redrawBlock = false;\n\t\tthis.verticalAlignHeaders();\n\t\tthis.renderer.rerenderColumns(this.redrawBlockUpdate);\n\t\t\n\t}\n\t\n\t//redraw columns\n\tredraw(force){\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.verticalAlignHeaders();\n\t\t}\n\t\t\n\t\tif(force){\n\t\t\tthis.table.rowManager.resetScroll();\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\t\t\n\t\tif(!this.confirm(\"table-redrawing\", force)){\n\t\t\tthis.layoutRefresh(force);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-redraw\", force);\n\t\t\n\t\tthis.table.footerManager.redraw();\n\t}\n}","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class BasicVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.scrollTop = 0;\n\t\telement.scrollLeft = 0;\n\n\t\telement.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\t}\n\n\trenderRows(){\n\t\tvar element = this.tableElement,\n\t\tonlyGroupHeaders = true;\n\n\t\tthis.rows().forEach((row, index) => {\n\t\t\tthis.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\n\n\trerenderRows(callback){\t\n\t\tthis.clearRows();\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tthis.renderRows();\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\n\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n\t}\n\n\tscrollToRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\treturn this.rows();\n\t}\n\n}","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class VirtualDomVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\t\tthis.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\t}\n\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.style.paddingTop = \"\";\n\t\telement.style.paddingBottom = \"\";\n\t\t// element.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\n\t\tthis.elementVertical.scrollTop = 0;\n\t\tthis.elementVertical.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\t\tthis.vDomBottom = 0;\n\t\tthis.vDomTopPad = 0;\n\t\tthis.vDomBottomPad = 0;\n\t\tthis.vDomScrollPosTop = 0;\n\t\tthis.vDomScrollPosBottom = 0;\n\t}\n\n\trenderRows(){\n\t\tthis._virtualRenderFill();\n\t}\n\n\trerenderRows(callback){\n\t\tvar scrollTop = this.elementVertical.scrollTop;\n\t\tvar topRow = false;\n\t\tvar topOffset = false;\n\n\t\tvar left = this.table.rowManager.scrollLeft;\n\n\t\tvar rows = this.rows();\n\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\n\t\t\tif(rows[i]){\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\n\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\ttopRow = i;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trows.forEach((row) => {\n\t\t\trow.deinitializeHeight();\n\t\t});\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tif(this.rows().length){\n\t\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\n\t\t}else{\n\t\t\tthis.clear();\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\n\t\tthis.scrollColumns(left);\n\t}\n\n\tscrollColumns(left){\n\t\tthis.table.rowManager.scrollHorizontal(left);\n\t}\n\n\tscrollRows(top, dir){\n\t\tvar topDiff = top - this.vDomScrollPosTop;\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\t\tvar rows = this.rows();\n\n\t\tthis.scrollTop = top;\n\n\t\tif(-topDiff > margin || bottomDiff > margin){\n\t\t\t//if big scroll redraw table;\n\t\t\tvar left = this.table.rowManager.scrollLeft;\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\n\t\t\tthis.scrollColumns(left);\n\t\t}else{\n\n\t\t\tif(dir){\n\t\t\t\t//scrolling up\n\t\t\t\tif(topDiff < 0){\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\n\t\t\t\t}\n\n\t\t\t\tif(bottomDiff < 0){\n\t\t\t\t\t//hide bottom row if needed\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(bottomDiff >= 0){\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\n\t\t\t\t}\n\n\t\t\t\t//scrolling down\n\t\t\t\tif(topDiff >= 0){\n\t\t\t\t\t//hide top row if needed\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(){\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowIndex = this.rows().indexOf(row);\n\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n\t}\n\n\tscrollToRow(row){\n\t\tvar index = this.rows().indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tthis._virtualRenderFill(index, true);\n\t\t}\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\tvar topEdge = this.elementVertical.scrollTop,\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\n\t\ttopFound = false,\n\t\ttopRow = 0,\n\t\tbottomRow = 0,\n\t\trows = this.rows();\n\n\t\tif(includingBuffer){\n\t\t\ttopRow = this.vDomTop;\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}else{\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\t\t\t\tif(rows[i]){\n\t\t\t\t\tif(!topFound){\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t}\n\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\n\t//full virtual render\n\t_virtualRenderFill(position, forceMove, offset){\n\t\tvar\telement = this.tableElement,\n\t\tholder = this.elementVertical,\n\t\ttopPad = 0,\n\t\trowsHeight = 0,\n\t\theightOccupied = 0,\n\t\ttopPadHeight = 0,\n\t\ti = 0,\n\t\trows = this.rows(),\n\t\trowsCount = rows.length,\n\t\tcontainerHeight = this.elementVertical.clientHeight;\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif(!position){\n\t\t\tthis.clear();\n\t\t}else{\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\t\t//check if position is too close to bottom of table\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n\n\t\t\tif(heightOccupied < containerHeight){\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n\t\t\t\tif(position < 0){\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\n\t\t\tthis.vDomTop = position;\n\n\t\t\tthis.vDomBottom = position -1;\n\n\t\t\twhile ((rowsHeight <= containerHeight + this.vDomWindowBuffer || i < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1){\n\t\t\t\tvar index = this.vDomBottom + 1,\n\t\t\t\trow = rows[index],\n\t\t\t\trowHeight = 0;\n\n\t\t\t\tthis.styleRow(row, index);\n\n\t\t\t\telement.appendChild(row.getElement());\n\n\t\t\t\trow.initialize();\n\n\t\t\t\tif(!row.heightInitialized){\n\t\t\t\t\trow.normalizeHeight(true);\n\t\t\t\t}\n\n\t\t\t\trowHeight = row.getHeight();\n\n\t\t\t\tif(i < topPad){\n\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t}else{\n\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t}\n\n\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t}\n\n\t\t\t\tthis.vDomBottom ++;\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tif(!position){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t//adjust row height to match average of rendered elements\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\n\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n\t\t\t}else{\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\n\t\t\telement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\telement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\n\t\t\tif(forceMove){\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove){\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\tthis.dispatch(\"render-virtual-fill\");\n\t\t}\n\t}\n\n\t_addTopRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomTop -1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tif(this.vDomTop){\n\t\t\t\tlet row = rows[index],\n\t\t\t\trowHeight, initialized;\n\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\n\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.initialize();\n\n\t\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\t\tthis.vDomTop--;\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\ti++;\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad -= paddingAdjust;\n\n\t\t\tif(this.vDomTopPad < 0){\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif(index < 1){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\n\t\t}\n\t}\n\n\t_removeTopRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomTop],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomTop++;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad += paddingAdjust;\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n\t\t}\n\t}\n\n\t_addBottomRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomBottom + 1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[index],\n\t\t\trowHeight, initialized;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\ttable.appendChild(row.getElement());\n\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.initialize();\n\n\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tthis.vDomBottom++;\n\t\t\t\t\tindex++;\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\n\t\t}\n\t}\n\n\t_removeBottomRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomBottom],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomBottom --;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad += paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\n\t\t}\n\t}\n\n\t_quickNormalizeRowHeight(rows){\n\t\tfor(let row of rows){\n\t\t\trow.calcHeight();\n\t\t}\n\n\t\tfor(let row of rows){\n\t\t\trow.setCellHeight();\n\t\t}\n\t}\n}","import CoreFeature from './CoreFeature.js';\nimport Row from './row/Row.js';\nimport RowComponent from './row/RowComponent.js';\nimport Helpers from './tools/Helpers.js';\n\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js';\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js';\n\nexport default class RowManager extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = this.createHolderElement(); //containing element\n\t\tthis.tableElement = this.createTableElement(); //table element\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\t\tthis.placeholder = null; //placeholder element\n\t\tthis.placeholderContents = null; //placeholder element\n\t\t\n\t\tthis.firstRender = false; //handle first render\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\t\tthis.fixedHeight = false; //current rendering mode\n\t\t\n\t\tthis.rows = []; //hold row data objects\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\t\tthis.activeRowsCount = 0; //count of active rows\n\t\t\n\t\tthis.displayRows = []; //rows currently on display in the table\n\t\tthis.displayRowsCount = 0; //count of display rows\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\t\t\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\n\n\t\tthis.scrollbarWidth = 0;\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t//////////////// Setup Functions /////////////////\n\t\n\tcreateHolderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-tableholder\");\n\t\tel.setAttribute(\"tabindex\", 0);\n\t\t// el.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateTableElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-table\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitializePlaceholder(){\n\t\tvar placeholder = this.table.options.placeholder;\n\n\t\t//configure placeholder element\n\t\tif(placeholder){\t\n\t\t\tlet el = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\n\t\t\tif(typeof placeholder == \"string\"){\n\t\t\t\tlet contents = document.createElement(\"div\");\n\t\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\n\t\t\t\tcontents.innerHTML = placeholder;\n\t\t\t\t\n\t\t\t\tel.appendChild(contents);\n\t\t\t\t\n\t\t\t\tthis.placeholderContents = contents;\n\t\t\t\t\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tel.appendChild(placeholder);\n\t\t\t\tthis.placeholderContents = placeholder;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n\n\t\t\t\tthis.el = null;\n\t\t\t}\n\n\t\t\tthis.placeholder = el;\n\t\t}\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return table element\n\tgetTableElement(){\n\t\treturn this.tableElement;\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializePlaceholder();\n\t\tthis.initializeRenderer();\n\t\t\n\t\t//initialize manager\n\t\tthis.element.appendChild(this.tableElement);\n\t\t\n\t\tthis.firstRender = true;\n\t\t\n\t\t//scroll header along with table body\n\t\tthis.element.addEventListener(\"scroll\", () => {\n\t\t\tvar left = this.element.scrollLeft,\n\t\t\tleftDir = this.scrollLeft > left,\n\t\t\ttop = this.element.scrollTop,\n\t\t\ttopDir = this.scrollTop > top;\n\t\t\t\n\t\t\t//handle horizontal scrolling\n\t\t\tif(this.scrollLeft != left){\n\t\t\t\tthis.scrollLeft = left;\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n\t\t\t\t\n\t\t\t\tthis._positionPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\t//handle vertical scrolling\n\t\t\tif(this.scrollTop != top){\n\t\t\t\tthis.scrollTop = top;\n\t\t\t\t\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t////////////////// Row Manipulation //////////////////\n\tfindRow(subject){\n\t\tif(typeof subject == \"object\"){\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the row\n\t\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\t\treturn row.getElement() === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}else if(subject === null){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\treturn false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t\t\n\t\t\treturn match || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetRowFromDataObject(data){\n\t\tvar match = this.rows.find((row) => {\n\t\t\treturn row.data === data;\n\t\t});\n\t\t\n\t\treturn match || false;\n\t}\n\t\n\tgetRowFromPosition(position){\n\t\treturn this.getDisplayRows().find((row) => {\n\t\t\treturn row.getPosition() === position && row.isDisplayed();\n\t\t});\n\t}\n\t\n\tscrollToRow(row, position, ifVisible){\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\tsetData(data, renderInPosition, columnsChanged){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\tthis._setDataActual(data, true);\n\t\t\t\t}else{\n\t\t\t\t\tthis.reRenderInPosition(() => {\n\t\t\t\t\t\tthis._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\t\n\t\t\t\tthis._setDataActual(data);\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\t_setDataActual(data, renderInPosition){\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\n\t\t\n\t\tthis._wipeElements();\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tthis.dispatch(\"data-processing\", data);\n\t\t\t\n\t\t\tdata.forEach((def, i) => {\n\t\t\t\tif(def && typeof def === \"object\"){\n\t\t\t\t\tvar row = new Row(def, this);\n\t\t\t\t\tthis.rows.push(row);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\n\t\t\t\n\t\t\tthis.dispatch(\"data-processed\", data);\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\n\t\t}else{\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n\t\t}\n\t}\n\t\n\t_wipeElements(){\n\t\tthis.dispatch(\"rows-wipe\");\n\t\t\n\t\tthis.destroy();\n\t\t\n\t\tthis.adjustTableSize();\n\n\t\tthis.dispatch(\"rows-wiped\");\n\t}\n\n\tdestroy(){\n\t\tthis.rows.forEach((row) => {\n\t\t\trow.wipe();\n\t\t});\n\n\t\tthis.rows = [];\n\t\tthis.activeRows = [];\n\t\tthis.activeRowsPipeline = [];\n\t\tthis.activeRowsCount = 0;\n\t\tthis.displayRows = [];\n\t\tthis.displayRowsCount = 0;\n\t}\n\t\n\tdeleteRow(row, blockRedraw){\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\tactiveIndex = this.activeRows.indexOf(row);\n\t\t\n\t\tif(activeIndex > -1){\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\t\t\n\t\tif(allIndex > -1){\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tvar displayIndex = rows.indexOf(row);\n\t\t\t\n\t\t\tif(displayIndex > -1){\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis.tableEmpty();\n\t\t}\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\n\t\t}\n\t}\n\t\n\taddRow(data, pos, index, blockRedraw){\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\t\treturn row;\n\t}\n\t\n\t//add multiple rows\n\taddRows(data, pos, index, refreshDisplayOnly){\n\t\tvar rows = [];\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tpos = this.findAddRowPos(pos);\n\t\t\t\n\t\t\tif(!Array.isArray(data)){\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\t\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\n\t\t\t\tdata.reverse();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach((item, i) => {\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\n\t\t\t\trows.push(row);\n\t\t\t\tthis.dispatch(\"row-added\", row, item, pos, index);\n\t\t\t});\n\n\t\t\tthis.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n\t\t\t\n\t\t\tthis.regenerateRowPositions();\n\t\t\t\n\t\t\tif(rows.length){\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tresolve(rows);\n\t\t});\n\t}\n\t\n\tfindAddRowPos(pos){\n\t\tif(typeof pos === \"undefined\"){\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\t\t\n\t\tif(pos === \"pos\"){\n\t\t\tpos = true;\n\t\t}\n\t\t\n\t\tif(pos === \"bottom\"){\n\t\t\tpos = false;\n\t\t}\n\t\t\n\t\treturn pos;\n\t}\n\t\n\taddRowActual(data, pos, index, blockRedraw){\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\ttop = this.findAddRowPos(pos),\n\t\tallIndex = -1,\n\t\tactiveIndex, chainResult;\n\t\t\n\t\tif(!index){\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\n\t\t\t\n\t\t\tindex = chainResult.index;\n\t\t\ttop = chainResult.top;\n\t\t}\n\t\t\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tindex = this.findRow(index);\n\t\t}\n\t\t\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\n\t\t\n\t\tif(index){\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\t\t\n\t\tif(index && allIndex > -1){\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\t\t\t\n\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\t\t\t\t\n\t\t\t\tif(displayIndex > -1){\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(activeIndex > -1){\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\n\t\t\t}\n\t\t\t\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(top){\n\t\t\t\t\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.unshift(row);\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}else{\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.push(row);\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t}\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\treturn row;\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tthis.dispatch(\"row-move\", from, to, after);\n\t\t\n\t\tthis.moveRowActual(from, to, after);\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatch(\"row-moved\", from, to, after);\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\n\t}\n\t\n\tmoveRowActual(from, to, after){\n\t\tthis.moveRowInArray(this.rows, from, to, after);\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tthis.moveRowInArray(rows, from, to, after);\n\t\t});\n\t\t\n\t\tthis.dispatch(\"row-moving\", from, to, after);\n\t}\n\t\n\tmoveRowInArray(rows, from, to, after){\n\t\tvar\tfromIndex, toIndex, start, end;\n\t\t\n\t\tif(from !== to){\n\t\t\t\n\t\t\tfromIndex = rows.indexOf(from);\n\t\t\t\n\t\t\tif (fromIndex > -1) {\n\t\t\t\t\n\t\t\t\trows.splice(fromIndex, 1);\n\t\t\t\t\n\t\t\t\ttoIndex = rows.indexOf(to);\n\t\t\t\t\n\t\t\t\tif (toIndex > -1) {\n\t\t\t\t\t\n\t\t\t\t\tif(after){\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\n\t\t\t\t\t}else{\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//restyle rows\n\t\t\tif(rows === this.getDisplayRows()){\n\t\t\t\t\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\n\t\t\t\t\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tif(rows[i]){\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearData(){\n\t\tthis.setData([]);\n\t}\n\t\n\tgetRowIndex(row){\n\t\treturn this.findRowIndex(row, this.rows);\n\t}\n\t\n\tgetDisplayRowIndex(row){\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\t\treturn index > -1 ? index : false;\n\t}\n\t\n\tnextDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tnextRow = false;\n\t\t\n\t\t\n\t\tif(index !== false && index < this.displayRowsCount -1){\n\t\t\tnextRow = this.getDisplayRows()[index+1];\n\t\t}\n\t\t\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn nextRow;\n\t}\n\t\n\tprevDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tprevRow = false;\n\t\t\n\t\tif(index){\n\t\t\tprevRow = this.getDisplayRows()[index-1];\n\t\t}\n\t\t\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn prevRow;\n\t}\n\t\n\tfindRowIndex(row, list){\n\t\tvar rowIndex;\n\t\t\n\t\trow = this.findRow(row);\n\t\t\n\t\tif(row){\n\t\t\trowIndex = list.indexOf(row);\n\t\t\t\n\t\t\tif(rowIndex > -1){\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tgetData(active, transform){\n\t\tvar output = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tif(row.type == \"row\"){\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(active){\n\t\tvar\toutput = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDataCount(active){\n\t\tvar rows = this.getRows(active);\n\t\t\n\t\treturn rows.length;\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tthis.scrollLeft = left;\n\t\tthis.element.scrollLeft = left;\n\t\t\n\t\tthis.dispatch(\"scroll-horizontal\", left);\n\t}\n\t\n\tregisterDataPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.dataPipeline.push({handler, priority});\n\t\t\tthis.dataPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\tregisterDisplayPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.displayPipeline.push({handler, priority});\n\t\t\tthis.displayPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\t//set active data set\n\trefreshActiveData(handler, skipStage, renderInPosition){\n\t\tvar table = this.table,\n\t\tstage = \"\",\n\t\tindex = 0,\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n\t\t\n\t\tif(!this.table.destroyed){\n\t\t\tif(typeof handler === \"function\"){\n\t\t\t\tindex = this.dataPipeline.findIndex((item) => {\n\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(index > -1){\n\t\t\t\t\tstage = \"dataPipeline\";\n\t\t\t\t\t\n\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\tif(index == this.dataPipeline.length - 1){\n\t\t\t\t\t\t\tstage = \"display\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\n\t\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\tstage = \"displayPipeline\";\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\n\t\t\t\t\t\t\t\tstage = \"end\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tstage = handler || \"all\";\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.redrawBlock){\n\t\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\n\t\t\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\t\t\thandler: handler,\n\t\t\t\t\t\tskipStage: skipStage,\n\t\t\t\t\t\trenderInPosition: renderInPosition,\n\t\t\t\t\t\tstage:stage,\n\t\t\t\t\t\tindex:index,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}else{\n\t\t\t\tif(Helpers.elVisible(this.element)){\n\t\t\t\t\tif(renderInPosition){\n\t\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!handler){\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\n\t\t\t\t\t\t\tthis.table.columnManager.redraw(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"data-refreshed\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\trefreshPipelines(handler, stage, index, renderInPosition){\n\t\tthis.dispatch(\"data-refreshing\");\n\t\t\n\t\tif(!handler){\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\n\t\t}\n\t\t\n\t\t//cascade through data refresh stages\n\t\tswitch(stage){\n\t\t\tcase \"all\":\n\t\t\t//handle case where all data needs refreshing\n\t\t\t\n\t\t\tcase \"dataPipeline\":\n\t\t\t\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n\t\t\t\t\t\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n\t\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\tindex = 0;\n\t\t\t\tthis.resetDisplayRows();\n\t\t\t\t\n\t\t\tcase \"displayPipeline\":\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"end\":\n\t\t\t\t//case to handle scenario when trying to skip past end stage\n\t\t\t\tthis.regenerateRowPositions();\n\t\t}\n\n\t\tif(this.getDisplayRows().length){\n\t\t\tthis._clearPlaceholder();\n\t\t}\n\t}\n\t\n\t//regenerate row positions\n\tregenerateRowPositions(){\n\t\tvar rows = this.getDisplayRows();\n\t\tvar index = 1;\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\"){\n\t\t\t\trow.setPosition(index);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tsetActiveRows(activeRows){\n\t\tthis.activeRows = this.activeRows = Object.assign([], activeRows);\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t}\n\t\n\t//reset display rows array\n\tresetDisplayRows(){\n\t\tthis.displayRows = [];\n\t\t\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\t}\n\t\n\t//set display row pipeline data\n\tsetDisplayRows(displayRows, index){\n\t\tthis.displayRows[index] = displayRows;\n\n\t\tif(index == this.displayRows.length -1){\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t\t}\n\t}\n\t\n\tgetDisplayRows(index){\n\t\tif(typeof index == \"undefined\"){\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\n\t\t}else{\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t}\n\t\n\tgetVisibleRows(chain, viewable){\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\n\t\t\n\t\tif(chain){\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t//repeat action across display rows\n\tdisplayRowIterator(callback){\n\t\tthis.activeRowsPipeline.forEach(callback);\n\t\tthis.displayRows.forEach(callback);\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t}\n\t\n\t//return only actual rows (not group headers etc)\n\tgetRows(type){\n\t\tvar rows = [];\n\n\t\tswitch(type){\n\t\t\tcase \"active\":\n\t\t\t\trows = this.activeRows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\tcase \"visible\":\n\t\t\t\trows = this.getVisibleRows(false, true);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t///////////////// Table Rendering /////////////////\n\t//trigger rerender of table in current position\n\treRenderInPosition(callback){\n\t\tif(this.redrawBlock){\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}else{\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\t\n\t\t\tthis.renderer.rerenderRows(callback);\n\n\t\t\tif(!this.fixedHeight){\n\t\t\t\tthis.adjustTableSize();\n\t\t\t}\n\n\t\t\tthis.scrollBarCheck();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"renderComplete\");\n\t\t}\n\t}\n\n\tscrollBarCheck(){\n\t\tvar scrollbarWidth = 0;\n\n\t\t//adjust for vertical scrollbar moving table when present\n\t\tif(this.element.scrollHeight > this.element.clientHeight){\n\t\t\tscrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n\t\t}\n\n\t\tif(scrollbarWidth !== this.scrollbarWidth){\n\t\t\tthis.scrollbarWidth = scrollbarWidth;\n\t\t\tthis.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomVertical,\n\t\t\t\"basic\": RendererBasicVertical,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderVertical;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderMode = this.table.options.renderVertical;\n\t\t\t\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t\t\n\t\t\tif((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)){\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t}else{\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n\t\t}\n\t}\n\t\n\tgetRenderMode(){\n\t\treturn this.renderMode;\n\t}\n\t\n\trenderTable(){\n\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tthis._clearTable();\n\t\t\n\t\tif(this.displayRowsCount){\n\t\t\tthis.renderer.renderRows();\n\t\t\t\n\t\t\tif(this.firstRender){\n\t\t\t\tthis.firstRender = false;\n\n\t\t\t\tif(!this.fixedHeight){\n\t\t\t\t\tthis.adjustTableSize();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.layoutRefresh(true);\n\t\t\t}\n\t\t}else{\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t\t\n\t\tif(!this.fixedHeight){\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-layout\");\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\n\t\tthis.scrollBarCheck();\n\t\t\n\t\tthis.dispatchExternal(\"renderComplete\");\n\t}\n\t\n\t//show scrollbars on empty table div\n\trenderEmptyScroll(){\n\t\tif(this.placeholder){\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t_clearTable(){\t\n\t\tthis._clearPlaceholder();\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.renderer.clearRows();\n\t}\n\n\ttableEmpty(){\n\t\tthis.renderEmptyScroll();\n\t\tthis._showPlaceholder();\n\t}\n\t\n\t_showPlaceholder(){\n\t\tif(this.placeholder){\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\t\t\t\n\t\t\tthis.getElement().appendChild(this.placeholder);\n\t\t\tthis._positionPlaceholder();\n\t\t}\n\t}\n\t\n\t_clearPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\n\t\t// clear empty table placeholder min\n\t\tthis.tableElement.style.minWidth = \"\";\n\t\tthis.tableElement.style.display = \"\";\n\t}\n\t\n\t_positionPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n\t\t}\n\t}\n\t\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\t\n\t//normalize height of active rows\n\tnormalizeHeight(){\n\t\tthis.activeRows.forEach(function(row){\n\t\t\trow.normalizeHeight();\n\t\t});\n\t}\n\t\n\t//adjust the height of the table holder to fit in the Tabulator element\n\tadjustTableSize(){\n\t\tvar initialHeight = this.element.clientHeight, minHeight;\n\t\t\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n\t\t\t\n\t\t\tif(this.fixedHeight){\n\t\t\t\tminHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n\t\t\t\t\n\t\t\t\tthis.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.height = \"\";\n\t\t\t\tthis.element.style.height = (this.table.element.clientHeight - otherHeight) + \"px\";\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tthis.renderer.resize();\n\t\t\t\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\n\t\t\t\tif(this.subscribed(\"table-resize\")){\n\t\t\t\t\tthis.dispatch(\"table-resize\");\n\t\t\t\t}else{\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.scrollBarCheck();\n\t\t}\n\t\t\n\t\tthis._positionPlaceholder();\n\t}\n\t\n\t//reinitialize all rows\n\treinitialize(){\n\t\tthis.rows.forEach(function(row){\n\t\t\trow.reinitialize(true);\n\t\t});\n\t}\n\t\n\t//prevent table from being redrawn\n\tblockRedraw (){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockRestoreConfig = false;\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw (){\n\t\tthis.redrawBlock = false;\n\t\t\n\t\tif(this.redrawBlockRestoreConfig){\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\t\t\t\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t}else{\n\t\t\tif(this.redrawBlockRenderInPosition){\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBlockRenderInPosition = false;\n\t}\n\t\n\t//redraw table\n\tredraw (force){\n\t\tvar left = this.scrollLeft;\n\t\t\n\t\tthis.adjustTableSize();\n\t\t\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\t\t\n\t\tif(!force){\n\t\t\tthis.reRenderInPosition();\n\t\t\tthis.scrollHorizontal(left);\n\t\t}else{\n\t\t\tthis.renderTable();\n\t\t}\n\t}\n\t\n\tresetScroll(){\n\t\tthis.element.scrollLeft = 0;\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tif(this.table.browser === \"ie\"){\n\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}else{\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\n\nexport default class FooterManager extends CoreFeature{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.active = false;\n\t\tthis.element = this.createElement(); //containing element\n\t\tthis.containerElement = this.createContainerElement(); //containing element\n\t\tthis.external = false;\n\t}\n\n\tinitialize(){\n\t\tthis.initializeElement();\n\t}\n\n\tcreateElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t}\n\n\t\n\tcreateContainerElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer-contents\");\n\n\t\tthis.element.appendChild(el);\n\n\t\treturn el;\n\t}\n\n\tinitializeElement(){\n\t\tif(this.table.options.footerElement){\n\n\t\t\tswitch(typeof this.table.options.footerElement){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\n\t\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.external = true;\n\t\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tappend(element){\n\t\tthis.activate();\n\n\t\tthis.containerElement.appendChild(element);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tprepend(element){\n\t\tthis.activate();\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tremove(element){\n\t\telement.parentNode.removeChild(element);\n\t\tthis.deactivate();\n\t}\n\n\tdeactivate(force){\n\t\tif(!this.element.firstChild || force){\n\t\t\tif(!this.external){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tactivate(){\n\t\tif(!this.active){\n\t\t\tthis.active = true;\n\t\t\tif(!this.external){\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(){\n\t\tthis.dispatch(\"footer-redraw\");\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Row from '../row/Row.js';\n\nexport default class InteractionManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.el = null;\n\t\t\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n\t\t\n\t\tthis.previousTargets = {};\n\t\t\n\t\tthis.listeners = [\n\t\t\t\"click\",\n\t\t\t\"dblclick\",\n\t\t\t\"contextmenu\",\n\t\t\t\"mouseenter\",\n\t\t\t\"mouseleave\",\n\t\t\t\"mouseover\",\n\t\t\t\"mouseout\",\n\t\t\t\"mousemove\",\n\t\t\t\"mouseup\",\n\t\t\t\"mousedown\",\n\t\t\t\"touchstart\",\n\t\t\t\"touchend\",\n\t\t];\n\t\t\n\t\tthis.componentMap = {\n\t\t\t\"tabulator-cell\":\"cell\",\n\t\t\t\"tabulator-row\":\"row\",\n\t\t\t\"tabulator-group\":\"group\",\n\t\t\t\"tabulator-col\":\"column\",\n\t\t};\n\t\t\n\t\tthis.pseudoTrackers = {\n\t\t\t\"row\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"cell\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"group\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"column\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t};\n\t\t\n\t\tthis.pseudoTracking = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.el = this.table.element;\n\t\t\n\t\tthis.buildListenerMap();\n\t\tthis.bindSubscriptionWatchers();\n\t}\n\t\n\tbuildListenerMap(){\n\t\tvar listenerMap = {};\n\t\t\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistenerMap[listener] = {\n\t\t\t\thandler:null,\n\t\t\t\tcomponents:[],\n\t\t\t};\n\t\t});\n\t\t\n\t\tthis.listeners = listenerMap;\n\t}\n\t\n\tbindPseudoEvents(){\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n\t\t});\n\t\t\n\t\tthis.pseudoTracking = true;\n\t}\n\t\n\tpseudoMouseEnter(key, e, target){\n\t\tif(this.pseudoTrackers[key].target !== target){\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n\t\t\t}\n\t\t\t\n\t\t\tthis.pseudoMouseLeave(key, e);\n\t\t\t\n\t\t\tthis.pseudoTrackers[key].target = target;\n\t\t\t\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\n\t\t}\n\t}\n\t\n\tpseudoMouseLeave(key, e){\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\n\t\tlinkedKeys = {\n\t\t\t\"row\":[\"cell\"],\n\t\t\t\"cell\":[\"row\"],\n\t\t};\n\t\t\n\t\tleaveList = leaveList.filter((item) => {\n\t\t\tvar links = linkedKeys[key];\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\n\t\t});\n\t\t\n\t\t\n\t\tleaveList.forEach((key) => {\n\t\t\tvar target = this.pseudoTrackers[key].target;\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\n\t\t\t\t\n\t\t\t\tthis.pseudoTrackers[key].target = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\tbindSubscriptionWatchers(){\n\t\tvar listeners = Object.keys(this.listeners),\n\t\tcomponents = Object.values(this.componentMap);\n\t\t\n\t\tfor(let comp of components){\n\t\t\tfor(let listener of listeners){\n\t\t\t\tlet key = comp + \"-\" + listener;\n\t\t\t\t\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n\t}\n\t\n\tsubscriptionChanged(component, key, added){\n\t\tvar listener = this.listeners[key].components,\n\t\tindex = listener.indexOf(component),\n\t\tchanged = false;\n\t\t\n\t\tif(added){\n\t\t\tif(index === -1){\n\t\t\t\tlistener.push(component);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\n\t\t\t\tif(index > -1){\n\t\t\t\t\tlistener.splice(index, 1);\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\n\t\t\tthis.bindPseudoEvents();\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.updateEventListeners();\n\t\t}\n\t}\n\t\n\tupdateEventListeners(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.components.length){\n\t\t\t\tif(!listener.handler){\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler);\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(listener.handler){\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\t\tlistener.handler = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\ttrack(type, e){\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\n\t\t\n\t\tvar targets = this.findTargets(path);\n\t\ttargets = this.bindComponents(type, targets);\n\t\t\n\t\tthis.triggerEvents(type, e, targets);\n\t\t\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\n\t\t}\n\t}\n\t\n\tfindTargets(path){\n\t\tvar targets = {};\n\t\t\n\t\tlet componentMap = Object.keys(this.componentMap);\n\t\t\n\t\tfor (let el of path) {\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\n\t\t\t\n\t\t\tlet abort = classList.filter((item) => {\n\t\t\t\treturn this.abortClasses.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tif(abort.length){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tlet elTargets = classList.filter((item) => {\n\t\t\t\treturn componentMap.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tfor (let target of elTargets) {\n\t\t\t\tif(!targets[this.componentMap[target]]){\n\t\t\t\t\ttargets[this.componentMap[target]] = el;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(targets.group && targets.group === targets.row){\n\t\t\tdelete targets.row;\n\t\t}\n\t\t\n\t\treturn targets;\n\t}\n\t\n\tbindComponents(type, targets){\n\t\t//ensure row component is looked up before cell\n\t\tvar keys = Object.keys(targets).reverse(),\n\t\tlistener = this.listeners[type],\n\t\tmatches = {},\n\t\ttargetMatches = {};\n\t\t\n\t\tfor(let key of keys){\n\t\t\tlet component,\n\t\t\ttarget = targets[key],\n\t\t\tpreviousTarget = this.previousTargets[key];\n\t\t\t\n\t\t\tif(previousTarget && previousTarget.target === target){\n\t\t\t\tcomponent = previousTarget.component;\n\t\t\t}else{\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\n\t\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tcomponent = rows.find((row) => {\n\t\t\t\t\t\t\t\treturn row.getElement() === target;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\n\t\t\t\t\t\t\t\ttargets[key] = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"column\":\n\t\t\t\t\t\tif(listener.components.includes(\"column\")){\n\t\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"cell\":\n\t\t\t\t\t\tif(listener.components.includes(\"cell\")){\n\t\t\t\t\t\t\tif(matches[\"row\"] instanceof Row){\n\t\t\t\t\t\t\t\tcomponent = matches[\"row\"].findCell(target);\n\t\t\t\t\t\t\t}else{\t\n\t\t\t\t\t\t\t\tif(targets[\"row\"]){\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(component){\n\t\t\t\tmatches[key] = component;\n\t\t\t\ttargetMatches[key] = {\n\t\t\t\t\ttarget:target,\n\t\t\t\t\tcomponent:component,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.previousTargets = targetMatches;\n\t\t\n\t\treturn matches;\n\t}\n\t\n\ttriggerEvents(type, e, targets){\n\t\tvar listener = this.listeners[type];\n\n\t\tfor(let key in targets){\n\t\t\tif(targets[key] && listener.components.includes(key)){\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearWatchers(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.handler){\n\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\tlistener.handler = null;\n\t\t\t}\n\t\t}\n\t}\n}","export default class ComponentFunctionBinder{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\n\t\tthis.bindings = {};\n\t}\n\n\tbind(type, funcName, handler){\n\t\tif(!this.bindings[type]){\n\t\t\tthis.bindings[type] = {};\n\t\t}\n\n\t\tif(this.bindings[type][funcName]){\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n\t\t}else{\n\t\t\tthis.bindings[type][funcName] = handler;\n\t\t}\n\t}\n\n\thandle(type, component, name){\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\n\t\t\treturn this.bindings[type][name].bind(null, component);\n\t\t}else{\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\n\t\t\t\tif(this.table.options.debugInvalidComponentFuncs){\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import CoreFeature from '../CoreFeature.js';\n\nexport default class DataLoader extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n\t\tthis.loading = false;\n\t}\n\n\tinitialize(){}\n\n\tload(data, params, config, replace, silent, columnsChanged){\n\t\tvar requestNo = ++this.requestOrder;\n\n\t\tthis.dispatchExternal(\"dataLoading\", data);\n\n\t\t//parse json data to array\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\n\t\t\tthis.loading = true;\n\n\t\t\tif(!silent){\n\t\t\t\tthis.alertLoader();\n\t\t\t}\n\n\t\t\t//get params for request\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\n\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n\t\t\t\n\t\t\treturn result.then((response) => {\n\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\n\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n\t\t\t\t}\n\n\t\t\t\tvar rowData = this.chain(\"data-loaded\", response, null, response);\n\n\t\t\t\tif(requestNo == this.requestOrder){\n\t\t\t\t\tthis.clearAlert();\n\n\t\t\t\t\tif(rowData !== false){\n\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\n\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\n\n\t\t\t\tif(!silent){\n\t\t\t\t\tthis.alertError();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clearAlert();\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\n\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\n\n\t\t\tif(!data){\n\t\t\t\tdata = [];\n\t\t\t}\n\n\t\t\tthis.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\n\tmapParams(params, map){\n\t\tvar output = {};\n\n\t\tfor(let key in params){\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tobjectInvert(obj){\n\t\tvar output = {};\n\n\t\tfor(let key in obj){\n\t\t\toutput[obj[key]] = key;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tblockActiveLoad(){\n\t\tthis.requestOrder++;\n\t}\n\n\talertLoader(){\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n\n\t\tif(shouldLoad){\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n\t\t}\n\t}\n\n\talertError(){\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n\t}\n\n\tclearAlert(){\n\t\tthis.table.alertManager.clear();\n\t}\n}","export default class ExternalEventBus {\n\n\tconstructor(table, optionsList, debug){\n\t\tthis.table = table;\n\t\tthis.events = {};\n\t\tthis.optionsList = optionsList || {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push(callback);\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdelete this.events[key];\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift(),\n\t\tresult;\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((callback, i) => {\n\t\t\t\tlet callResult = callback.apply(this.table, args);\n\n\t\t\t\tif(!i){\n\t\t\t\t\tresult = callResult;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"ExternalEvent:\" + args[0];\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n}","export default class InternalEventBus {\n\n\tconstructor(debug){\n\t\tthis.events = {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback, priority = 10000){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push({callback, priority});\n\n\t\tthis.events[key].sort((a, b) => {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item.callback === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_chain(key, args, initialValue, fallback){\n\t\tvar value = initialValue;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}else{\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\n\t\t}\n\t}\n\n\t_confirm(key, args){\n\t\tvar confirmed = false;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tif(subscriber.callback.apply(this, args)){\n\t\t\t\t\tconfirmed = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn confirmed;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((subscriber) => {\n\t\t\t\tsubscriber.callback.apply(this, args);\n\t\t\t});\n\t\t}\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n\n\t_debugChain(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._chain(...arguments);\n\t}\n\n\t_debugConfirm(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._confirm(...arguments);\n\t}\n}","import CoreFeature from '../CoreFeature.js';\n\nexport default class DeprecationAdvisor extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\t_warnUser(){\n\t\tif(this.options(\"debugDeprecation\")){\n\t\t\tconsole.warn(...arguments);\n\t\t}\n\t}\n\t\n\tcheck(oldOption, newOption){\n\t\tvar msg = \"\";\n\t\t\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tmsg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n\t\t\t\n\t\t\tif(newOption){\n\t\t\t\tmsg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}else{\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tcheckMsg(oldOption, msg){\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tthis._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tmsg(msg){\n\t\tthis._warnUser(msg);\n\t}\n}","import Tabulator from '../Tabulator.js';\n\nclass TableRegistry {\n\n\tstatic register(table){\n\t\tTableRegistry.tables.push(table);\n\t}\n\n\tstatic deregister(table){\n\t\tvar index = TableRegistry.tables.indexOf(table);\n\n\t\tif(index > -1){\n\t\t\tTableRegistry.tables.splice(index, 1);\n\t\t}\n\t}\n\n\tstatic lookupTable(query, silent){\n\t\tvar results = [],\n\t\tmatches, match;\n\n\t\tif(typeof query === \"string\"){\n\t\t\tmatches = document.querySelectorAll(query);\n\n\t\t\tif(matches.length){\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\n\t\t\tmatch = TableRegistry.matchElement(query);\n\n\t\t\tif(match){\n\t\t\t\tresults.push(match);\n\t\t\t}\n\t\t}else if(Array.isArray(query)){\n\t\t\tquery.forEach(function(item){\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\n\t\t\t});\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tstatic matchElement(element){\n\t\treturn TableRegistry.tables.find(function(table){\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\n\t\t});\n\t}\n}\n\nTableRegistry.tables = [];\n\nexport default TableRegistry;","//resize columns to fit data they contain\nexport default function(columns, forced){\n\tif(forced){\n\t\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\n\t}\n\t\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}","//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nexport default function(columns, forced){\n\tcolumns.forEach(function(column){\n\t\tcolumn.reinitializeWidth();\n\t});\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}","//resize columns to fit data the contain and stretch last column to fill table\nexport default function(columns, forced){\n\tvar colsWidth = 0,\n\ttableWidth = this.table.rowManager.element.clientWidth,\n\tgap = 0,\n\tlastCol = false;\n\n\tcolumns.forEach((column, i) => {\n\t\tif(!column.widthFixed){\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\n\t\t\tlastCol = column;\n\t\t}\n\n\t\tif(column.visible){\n\t\t\tcolsWidth += column.getWidth();\n\t\t}\n\t});\n\n\tif(lastCol){\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tlastCol.setWidth(0);\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\tif(gap > 0){\n\t\t\tlastCol.setWidth(gap);\n\t\t}else{\n\t\t\tlastCol.reinitializeWidth();\n\t\t}\n\t}else{\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t}\n}","//resize columns to fit\nexport default function(columns, forced){\n\tvar totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n\tvar fixedWidth = 0; //total width of columns with a defined width\n\tvar flexWidth = 0; //total width available to flexible columns\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n\tvar flexColWidth = 0; //desired width of flexible columns\n\tvar flexColumns = []; //array of flexible width columns\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n\tvar overflowWidth = 0; //horizontal overflow width\n\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\tfunction calcWidth(width){\n\t\tvar colWidth;\n\n\t\tif(typeof(width) == \"string\"){\n\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\n\t\t\t}else{\n\t\t\t\tcolWidth = parseInt(width);\n\t\t\t}\n\t\t}else{\n\t\t\tcolWidth = width;\n\t\t}\n\n\t\treturn colWidth;\n\t}\n\n\t//ensure columns resize to take up the correct amount of space\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\n\t\tvar oversizeCols = [],\n\t\toversizeSpace = 0,\n\t\tremainingSpace = 0,\n\t\tnextColWidth = 0,\n\t\tremainingFlexGrowUnits = flexGrowUnits,\n\t\tgap = 0,\n\t\tchangeUnits = 0,\n\t\tundersizeCols = [];\n\n\t\tfunction calcGrow(col){\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\n\t\t}\n\n\t\tfunction calcShrink(col){\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)));\n\t\t}\n\n\t\tcolumns.forEach(function(col, i){\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\t\t\tif(col.column.minWidth >= width){\n\t\t\t\toversizeCols.push(col);\n\t\t\t}else{\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\n\t\t\t\t\tcol.width = col.column.maxWidth;\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\n\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\n\t\t\t\t\tif(remainingFlexGrowUnits){\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tundersizeCols.push(col);\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(oversizeCols.length){\n\t\t\toversizeCols.forEach(function(col){\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\n\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t});\n\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\n\n\t\t\tgap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t}else{\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\n\n\t\t\tundersizeCols.forEach(function(column){\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t});\n\t\t}\n\n\t\treturn gap;\n\t}\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n\n\t//adjust for vertical scrollbar if present\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t}\n\n\tcolumns.forEach(function(column){\n\t\tvar width, minWidth, colWidth;\n\n\t\tif(column.visible){\n\n\t\t\twidth = column.definition.width;\n\t\t\tminWidth =  parseInt(column.minWidth);\n\n\t\t\tif(width){\n\n\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\tif(column.definition.widthShrink){\n\t\t\t\t\tfixedShrinkColumns.push({\n\t\t\t\t\t\tcolumn:column,\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\n\t\t\t\t\t});\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tflexColumns.push({\n\t\t\t\t\tcolumn:column,\n\t\t\t\t\twidth:0,\n\t\t\t\t});\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t}\n\t\t}\n\t});\n\n\t//calculate available space\n\tflexWidth = totalWidth - fixedWidth;\n\n\t//calculate correct column size\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t//generate column widths\n\tgapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t//increase width of last column to account for rounding errors\n\tif(flexColumns.length && gapFill > 0){\n\t\tflexColumns[flexColumns.length-1].width += gapFill;\n\t}\n\n\t//calculate space for columns to be shrunk into\n\tflexColumns.forEach(function(col){\n\t\tflexWidth -= col.width;\n\t});\n\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t//shrink oversize columns if there is no available space\n\tif(overflowWidth > 0 && flexShrinkUnits){\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t}\n\n\t//decrease width of last column to account for rounding errors\n\tif(gapFill && fixedShrinkColumns.length){\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\n\t}\n\n\tflexColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n\n\tfixedShrinkColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n}\n","import fitData from './modes/fitData.js';\nimport fitDataGeneral from './modes/fitDataGeneral.js';\nimport fitDataStretch from './modes/fitDataStretch.js';\nimport fitColumns from './modes/fitColumns.js';\n\nexport default {\n\tfitData:fitData,\n\tfitDataFill:fitDataGeneral,\n\tfitDataTable:fitDataGeneral,\n\tfitDataStretch:fitDataStretch,\n\tfitColumns:fitColumns ,\n};","import Module from '../../core/Module.js';\n\nimport defaultModes from './defaults/modes.js';\n\nclass Layout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table, \"layout\");\n\n\t\tthis.mode = null;\n\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n\t\tthis.registerColumnOption(\"widthGrow\");\n\t\tthis.registerColumnOption(\"widthShrink\");\n\t}\n\n\t//initialize layout system\n\tinitialize(){\n\t\tvar layout = this.table.options.layout;\n\n\t\tif(Layout.modes[layout]){\n\t\t\tthis.mode = layout;\n\t\t}else{\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t}\n\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\n\t//trigger table layout\n\tlayout(dataChanged){\n\t\tthis.dispatch(\"layout-refreshing\");\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n\t\tthis.dispatch(\"layout-refreshed\");\n\t}\n}\n\nLayout.moduleName = \"layout\";\n\n//load defaults\nLayout.modes = defaultModes;\n\nexport default Layout;","export default {\n\t\"default\":{ //hold default locale text\n\t\t\"groups\":{\n\t\t\t\"item\":\"item\",\n\t\t\t\"items\":\"items\",\n\t\t},\n\t\t\"columns\":{\n\t\t},\n\t\t\"data\":{\n\t\t\t\"loading\":\"Loading\",\n\t\t\t\"error\":\"Error\",\n\t\t},\n\t\t\"pagination\":{\n\t\t\t\"page_size\":\"Page Size\",\n\t\t\t\"page_title\":\"Show Page\",\n\t\t\t\"first\":\"First\",\n\t\t\t\"first_title\":\"First Page\",\n\t\t\t\"last\":\"Last\",\n\t\t\t\"last_title\":\"Last Page\",\n\t\t\t\"prev\":\"Prev\",\n\t\t\t\"prev_title\":\"Prev Page\",\n\t\t\t\"next\":\"Next\",\n\t\t\t\"next_title\":\"Next Page\",\n\t\t\t\"all\":\"All\",\n\t\t\t\"counter\":{\n\t\t\t\t\"showing\": \"Showing\",\n\t\t\t\t\"of\": \"of\",\n\t\t\t\t\"rows\": \"rows\",\n\t\t\t\t\"pages\": \"pages\",\n\t\t\t}\n\t\t},\n\t\t\"headerFilters\":{\n\t\t\t\"default\":\"filter column...\",\n\t\t\t\"columns\":{}\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultLangs from './defaults/langs.js';\n\nclass Localize extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.locale = \"default\"; //current locale\n\t\tthis.lang = false; //current language\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t\tthis.langList = {};\n\n\t\tthis.registerTableOption(\"locale\", false); //current system language\n\t\tthis.registerTableOption(\"langs\", {});\n\t}\n\n\tinitialize(){\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\n\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor(let locale in this.table.options.langs){\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\n\t\t}\n\n\t\tthis.setLocale(this.table.options.locale);\n\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\n\t}\n\n\t//set header placeholder\n\tsetHeaderFilterPlaceholder(placeholder){\n\t\tthis.langList.default.headerFilters.default = placeholder;\n\t}\n\n\t//setup a lang description object\n\tinstallLang(locale, lang){\n\t\tif(this.langList[locale]){\n\t\t\tthis._setLangProp(this.langList[locale], lang);\n\t\t}else{\n\t\t\tthis.langList[locale] = lang;\n\t\t}\n\t}\n\n\t_setLangProp(lang, values){\n\t\tfor(let key in values){\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t}else{\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t}\n\n\t//set current locale\n\tsetLocale(desiredLocale){\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching language values\n\t\tfunction traverseLang(trans, path){\n\t\t\tfor(var prop in trans){\n\t\t\t\tif(typeof trans[prop] == \"object\"){\n\t\t\t\t\tif(!path[prop]){\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t}else{\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determining correct locale to load\n\t\tif(desiredLocale === true && navigator.language){\n\t\t\t//get local from system\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif(desiredLocale){\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\t\t\tif(!this.langList[desiredLocale]){\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif(this.langList[prefix]){\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.locale = desiredLocale;\n\n\t\t//load default lang template\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\n\n\t\tif(desiredLocale != \"default\"){\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\n\t\t}\n\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\n\n\t\tthis._executeBindings();\n\t}\n\n\t//get current locale\n\tgetLocale(locale){\n\t\treturn this.locale;\n\t}\n\n\t//get lang object for given local or current if none provided\n\tgetLang(locale){\n\t\treturn locale ? this.langList[locale] : this.lang;\n\t}\n\n\t//get text for current locale\n\tgetText(path, value){\n\t\tvar fillPath = value ? path + \"|\" + value : path,\n\t\tpathArray = fillPath.split(\"|\"),\n\t\ttext = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t\t// }\n\n\t\treturn text || \"\";\n\t}\n\n\t//traverse langs object and find localized copy\n\t_getLangElement(path, locale){\n\t\tvar root = this.lang;\n\n\t\tpath.forEach(function(level){\n\t\t\tvar rootPath;\n\n\t\t\tif(root){\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif(typeof rootPath != \"undefined\"){\n\t\t\t\t\troot = rootPath;\n\t\t\t\t}else{\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t}\n\n\t//set update binding\n\tbind(path, callback){\n\t\tif(!this.bindings[path]){\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t}\n\n\t//iterate through bindings and trigger updates\n\t_executeBindings(){\n\t\tfor(let path in this.bindings){\n\t\t\tthis.bindings[path].forEach((binding) => {\n\t\t\t\tbinding(this.getText(path), this.lang);\n\t\t\t});\n\t\t}\n\t}\n}\n\nLocalize.moduleName = \"localize\";\n\n//load defaults\nLocalize.langs = defaultLangs;\n\nexport default Localize;","import Module from '../../core/Module.js';\nimport TableRegistry from '../../core/tools/TableRegistry.js';\n\nclass Comms extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\n\t}\n\n\tgetConnections(selectors){\n\t\tvar connections = [],\n\t\tconnection;\n\n\t\tconnection = TableRegistry.lookupTable(selectors);\n\n\t\tconnection.forEach((con) =>{\n\t\t\tif(this.table !== con){\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsend(selectors, module, action, data){\n\t\tvar connections = this.getConnections(selectors);\n\n\t\tconnections.forEach((connection) => {\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\n\t\t});\n\n\t\tif(!connections.length && selectors){\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t}\n\n\treceive(table, module, action, data){\n\t\tif(this.table.modExists(module)){\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t}else{\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t}\n}\n\nComms.moduleName = \"comms\";\n\nexport default Comms;","import * as coreModules from '../modules/core.js';\nimport TableRegistry from './TableRegistry.js';\n\nexport default class ModuleBinder {\n\t\n\tconstructor(tabulator, modules){\n\t\tthis.bindStaticFunctionality(tabulator);\n\t\tthis.bindModules(tabulator, coreModules, true);\n\t\t\n\t\tif(modules){\n\t\t\tthis.bindModules(tabulator, modules);\n\t\t}\n\t}\n\t\n\tbindStaticFunctionality(tabulator){\n\t\ttabulator.moduleBindings = {};\n\t\t\n\t\ttabulator.extendModule = function(name, property, values){\n\t\t\tif(tabulator.moduleBindings[name]){\n\t\t\t\tvar source = tabulator.moduleBindings[name][property];\n\t\t\t\t\n\t\t\t\tif(source){\n\t\t\t\t\tif(typeof values == \"object\"){\n\t\t\t\t\t\tfor(let key in values){\n\t\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t\t}\n\t\t};\n\t\t\n\t\ttabulator.registerModule = function(modules){\n\t\t\tif(!Array.isArray(modules)){\n\t\t\t\tmodules = [modules];\n\t\t\t}\n\t\t\t\n\t\t\tmodules.forEach((mod) => {\n\t\t\t\ttabulator.registerModuleBinding(mod);\n\t\t\t});\n\t\t};\n\t\t\n\t\ttabulator.registerModuleBinding = function(mod){\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\n\t\t};\n\t\t\n\t\ttabulator.findTable = function(query){\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t\t};\n\t\t\n\t\t//ensure that module are bound to instantiated function\n\t\ttabulator.prototype.bindModules = function(){\n\t\t\tvar orderedStartMods = [],\n\t\t\torderedEndMods = [],\n\t\t\tunOrderedMods = [];\n\t\t\t\n\t\t\tthis.modules = {};\n\t\t\t\n\t\t\tfor(var name in tabulator.moduleBindings){\n\t\t\t\tlet mod = tabulator.moduleBindings[name];\n\t\t\t\tlet module = new mod(this);\n\t\t\t\t\n\t\t\t\tthis.modules[name] = module;\n\t\t\t\t\n\t\t\t\tif(mod.prototype.moduleCore){\n\t\t\t\t\tthis.modulesCore.push(module);\n\t\t\t\t}else{\n\t\t\t\t\tif(mod.moduleInitOrder){\n\t\t\t\t\t\tif(mod.moduleInitOrder < 0){\n\t\t\t\t\t\t\torderedStartMods.push(module);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\torderedEndMods.push(module);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tunOrderedMods.push(module);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\t\n\t\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n\t\t};\n\t}\n\t\n\tbindModules(tabulator, modules, core){\n\t\tvar mods = Object.values(modules);\n\t\t\n\t\tif(core){\n\t\t\tmods.forEach((mod) => {\n\t\t\t\tmod.prototype.moduleCore = true;\n\t\t\t});\n\t\t}\n\t\t\n\t\ttabulator.registerModule(mods);\n\t}\n}","import CoreFeature from '../CoreFeature.js';\n\nexport default class Alert extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.element = this._createAlertElement();\n\t\tthis.msgElement = this._createMsgElement();\n\t\tthis.type = null;\n        \n\t\tthis.element.appendChild(this.msgElement);\n\t}\n    \n\t_createAlertElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert\");\n\t\treturn el;\n\t}\n    \n\t_createMsgElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\t\treturn el;\n\t}\n    \n\t_typeClass(){\n\t\treturn \"tabulator-alert-state-\" + this.type;\n\t}\n    \n\talert(content, type = \"msg\"){\n\t\tif(content){\n\t\t\tthis.clear();\n            \n\t\t\tthis.type = type;\n            \n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n            \n\t\t\tthis.msgElement.classList.add(this._typeClass());\n            \n\t\t\tif(typeof content === \"function\"){\n\t\t\t\tcontent = content();\n\t\t\t}\n            \n\t\t\tif(content instanceof HTMLElement){\n\t\t\t\tthis.msgElement.appendChild(content);\n\t\t\t}else{\n\t\t\t\tthis.msgElement.innerHTML = content;\n\t\t\t}\n            \n\t\t\tthis.table.element.appendChild(this.element);\n\t\t}\n\t}\n    \n\tclear(){\n\t\tif(this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n        \n\t\tthis.msgElement.classList.remove(this._typeClass());\n\t}\n}","'use strict';\n\nimport defaultOptions from './defaults/options.js';\n\nimport ColumnManager from './ColumnManager.js';\nimport RowManager from './RowManager.js';\nimport FooterManager from './FooterManager.js';\n\nimport InteractionMonitor from './tools/InteractionMonitor.js';\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js';\nimport DataLoader from './tools/DataLoader.js';\n\nimport ExternalEventBus from './tools/ExternalEventBus.js';\nimport InternalEventBus from './tools/InternalEventBus.js';\n\nimport DeprecationAdvisor from './tools/DeprecationAdvisor.js';\n\nimport TableRegistry from './tools/TableRegistry.js';\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nimport OptionsList from './tools/OptionsList.js';\n\nimport Alert from './tools/Alert.js';\n\nclass Tabulator {\n\t\n\tconstructor(element, options){\n\t\t\n\t\tthis.options = {};\n\t\t\n\t\tthis.columnManager = null; // hold Column Manager\n\t\tthis.rowManager = null; //hold Row Manager\n\t\tthis.footerManager = null; //holder Footer Manager\n\t\tthis.alertManager = null; //hold Alert Manager\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\n\t\tthis.externalEvents = null; //handle external event messaging\n\t\tthis.eventBus = null; //handle internal event messaging\n\t\tthis.interactionMonitor = false; //track user interaction\n\t\tthis.browser = \"\"; //hold current browser type\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n\t\tthis.rtl = false; //check if the table is in RTL mode\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\n\t\t\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n\t\tthis.dataLoader = false; //bind component functions\n\t\t\n\t\tthis.modules = {}; //hold all modules bound to this table\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\t\t\n\t\tthis.deprecationAdvisor = new DeprecationAdvisor(this);\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.destroyed = false;\n\t\t\n\t\tif(this.initializeElement(element)){\n\t\t\t\n\t\t\tthis.initializeCoreSystems(options);\n\t\t\t\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._create();\n\t\t\t});\n\t\t}\n\t\t\n\t\tTableRegistry.register(this); //register table for inter-device communication\n\t}\n\t\n\tinitializeElement(element){\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\n\t\t\tthis.element = element;\n\t\t\treturn true;\n\t\t}else if(typeof element === \"string\"){\n\t\t\tthis.element = document.querySelector(element);\n\t\t\t\n\t\t\tif(this.element){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tinitializeCoreSystems(options){\n\t\tthis.columnManager = new ColumnManager(this);\n\t\tthis.rowManager = new RowManager(this);\n\t\tthis.footerManager = new FooterManager(this);\n\t\tthis.dataLoader = new DataLoader(this);\n\t\tthis.alertManager = new Alert(this);\n\t\t\n\t\tthis.bindModules();\n\t\t\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n\t\t\n\t\tthis._clearObjectPointers();\n\t\t\n\t\tthis._mapDeprecatedFunctionality();\n\t\t\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n\t\t\n\t\tthis.interactionMonitor = new InteractionMonitor(this);\n\t\t\n\t\tthis.dataLoader.initialize();\n\t\t// this.columnManager.initialize();\n\t\t// this.rowManager.initialize();\n\t\tthis.footerManager.initialize();\n\t}\n\t\n\t//convert deprecated functionality to new functions\n\t_mapDeprecatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 5.0 release\n\t}\n\t\n\t_clearSelection(){\n\t\t\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tif (window.getSelection) {\n\t\t\tif (window.getSelection().empty) {  // Chrome\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {  // IE?\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\t\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t}\n\t\n\t//create table\n\t_create(){\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\n\t\tthis.eventBus.dispatch(\"table-building\");\n\t\t\n\t\tthis._rtlCheck();\n\t\t\n\t\tthis._buildElement();\n\t\t\n\t\tthis._initializeTable();\n\t\t\n\t\tthis._loadInitialData();\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tthis.externalEvents.dispatch(\"tableBuilt\");\n\t}\n\t\n\t_rtlCheck(){\n\t\tvar style = window.getComputedStyle(this.element);\n\t\t\n\t\tswitch(this.options.textDirection){\n\t\t\tcase\"auto\":\n\t\t\t\tif(style.direction !== \"rtl\"){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"rtl\":\n\t\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\t\tthis.rtl = true;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"ltr\":\n\t\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis.rtl = false;\n\t\t}\n\t}\n\t\n\t//clear pointers to objects in default config object\n\t_clearObjectPointers(){\n\t\tthis.options.columns = this.options.columns.slice(0);\n\t\t\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t}\n\t\n\t//build tabulator element\n\t_buildElement(){\n\t\tvar element = this.element,\n\t\toptions = this.options,\n\t\tnewElement;\n\t\t\n\t\tif(element.tagName === \"TABLE\"){\n\t\t\tthis.originalElement = this.element;\n\t\t\tnewElement = document.createElement(\"div\");\n\t\t\t\n\t\t\t//transfer attributes to new element\n\t\t\tvar attributes = element.attributes;\n\t\t\t\n\t\t\t// loop through attributes and apply them on div\n\t\t\tfor(var i in attributes){\n\t\t\t\tif(typeof attributes[i] == \"object\"){\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// replace table with div element\n\t\t\telement.parentNode.replaceChild(newElement, element);\n\t\t\t\n\t\t\tthis.element = element = newElement;\n\t\t}\n\t\t\n\t\telement.classList.add(\"tabulator\");\n\t\telement.setAttribute(\"role\", \"grid\");\n\t\t\n\t\t//empty element\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\t//set table height\n\t\tif(options.height){\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\t\telement.style.height = options.height;\n\t\t}\n\t\t\n\t\t//set table min height\n\t\tif(options.minHeight !== false){\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\t\t\n\t\t//set table maxHeight\n\t\tif(options.maxHeight !== false){\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\t}\n\t\n\t//initialize core systems and modules\n\t_initializeTable(){\n\t\tvar element = this.element,\n\t\toptions = this.options;\n\t\t\n\t\tthis.interactionMonitor.initialize();\n\t\t\n\t\tthis.columnManager.initialize();\n\t\tthis.rowManager.initialize();\n\t\t\n\t\tthis._detectBrowser();\n\t\t\n\t\t//initialize core modules\n\t\tthis.modulesCore.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\t//build table elements\n\t\telement.appendChild(this.columnManager.getElement());\n\t\telement.appendChild(this.rowManager.getElement());\n\t\t\n\t\tif(options.footerElement){\n\t\t\tthis.footerManager.activate();\n\t\t}\n\t\t\n\t\tif(options.autoColumns && options.data){\n\t\t\t\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\t\t\n\t\t//initialize regular modules\n\t\tthis.modulesRegular.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\tthis.columnManager.setColumns(options.columns);\n\t\t\n\t\tthis.eventBus.dispatch(\"table-built\");\n\t}\n\t\n\t_loadInitialData(){\n\t\tthis.dataLoader.load(this.options.data);\n\t}\n\t\n\t//deconstructor\n\tdestroy(){\n\t\tvar element = this.element;\n\t\t\n\t\tthis.destroyed = true;\n\t\t\n\t\tTableRegistry.deregister(this); //deregister table from inter-device communication\n\t\t\n\t\tthis.eventBus.dispatch(\"table-destroy\");\n\t\t\n\t\t//clear row data\n\t\tthis.rowManager.destroy();\n\t\t\n\t\t//clear DOM\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\telement.classList.remove(\"tabulator\");\n\n\t\tthis.externalEvents.dispatch(\"tableDestroyed\");\n\t}\n\t\n\t_detectBrowser(){\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\n\t\t\n\t\tif(ua.indexOf(\"Trident\") > -1){\n\t\t\tthis.browser = \"ie\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\n\t\t\tthis.browser = \"edge\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\n\t\t\tthis.browser = \"firefox\";\n\t\t\tthis.browserSlow = false;\n\t\t}else if(ua.indexOf(\"Mac OS\") > -1){\n\t\t\tthis.browser = \"safari\";\n\t\t\tthis.browserSlow = false;\n\t\t}else{\n\t\t\tthis.browser = \"other\";\n\t\t\tthis.browserSlow = false;\n\t\t}\n\t\t\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0,4));\n\t}\n\t\n\tinitGuard(func, msg){\n\t\tvar stack, line;\n\t\t\n\t\tif(this.options.debugInitialization && !this.initialized){\n\t\t\tif(!func){\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\n\t\t\t\t\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\n\t\t\t\t\n\t\t\t\tif(line[0] == \" \"){\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\n\t\t\t\t}else{\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n\t\t}\n\t\t\n\t\treturn this.initialized;\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\t//block table redrawing\n\tblockRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocking\");\n\t\t\n\t\tthis.rowManager.blockRedraw();\n\t\tthis.columnManager.blockRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocked\");\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-restoring\");\n\n\t\tthis.rowManager.restoreRedraw();\n\t\tthis.columnManager.restoreRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-restored\");\n\t}\n\t\n\t//load data\n\tsetData(data, params, config){\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, false);\n\t}\n\t\n\t//clear data\n\tclearData(){\n\t\tthis.initGuard();\n\t\t\n\t\tthis.dataLoader.blockActiveLoad();\n\t\tthis.rowManager.clearData();\n\t}\n\t\n\t//get table data array\n\tgetData(active){\n\t\treturn this.rowManager.getData(active);\n\t}\n\t\n\t//get table data array count\n\tgetDataCount(active){\n\t\treturn this.rowManager.getDataCount(active);\n\t}\n\t\n\t//replace data, keeping table in position with same sort\n\treplaceData(data, params, config){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, true, true);\n\t}\n\t\n\t//update table data\n\tupdateData(data){\n\t\tvar responses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\tresponses++;\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\t\treject(\"Update Error - Unable to update row\", item, e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\treject(\"Update Error - Unable to find row\", item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\taddData(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\n\t\t\t\t\t.then((rows) => {\n\t\t\t\t\t\tvar output = [];\n\t\t\t\t\t\n\t\t\t\t\t\trows.forEach(function(row){\n\t\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\tresolve(output);\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//update table data\n\tupdateOrAddData(data){\n\t\tvar rows = [],\n\t\tresponses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tresponses++;\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.rowManager.addRows(item)\n\t\t\t\t\t\t\t.then((newRows)=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//get row object\n\tgetRow(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//get row object\n\tgetRowFromPosition(position){\n\t\tvar row = this.rowManager.getRowFromPosition(position);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//delete row from table\n\tdeleteRow(index){\n\t\tvar foundRows = [];\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(!Array.isArray(index)){\n\t\t\tindex = [index];\n\t\t}\n\t\t\n\t\t//find matching rows\n\t\tfor(let item of index){\n\t\t\tlet row = this.rowManager.findRow(item, true);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\tfoundRows.push(row);\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort((a, b) => {\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\t\t\n\t\t//delete rows\n\t\tfoundRows.forEach((row) =>{\n\t\t\trow.delete();\n\t\t});\n\t\t\n\t\tthis.rowManager.reRenderInPosition();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\t//add row to table\n\taddRow(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\treturn this.rowManager.addRows(data, pos, index, true)\n\t\t\t.then((rows)=>{\n\t\t\t\treturn rows[0].getComponent();\n\t\t\t});\n\t}\n\t\n\t//update a row if it exists otherwise create it\n\tupdateOrAddRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn row.getComponent();\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn this.rowManager.addRows(data)\n\t\t\t\t.then((rows)=>{\n\t\t\t\t\treturn rows[0].getComponent();\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\t//update row data\n\tupdateRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn Promise.resolve(row.getComponent());\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\n\t\t}\n\t}\n\t\n\t//scroll to row in DOM\n\tscrollToRow(index, position, ifVisible){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible);\n\t\t}else{\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\n\t\t}\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tvar fromRow = this.rowManager.findRow(from);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromRow){\n\t\t\tfromRow.moveToRow(to, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t}\n\t\n\tgetRows(active){\n\t\treturn this.rowManager.getComponents(active);\t\n\t}\n\t\n\t//get position of row in table\n\tgetRowPosition(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getPosition();\n\t\t}else{\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t/////////////// Column Functions  ///////////////\n\tsetColumns(definition){\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n\t\t\n\t\tthis.columnManager.setColumns(definition);\n\t}\n\t\n\tgetColumns(structured){\n\t\treturn this.columnManager.getComponents(structured);\n\t}\n\t\n\tgetColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tif(column){\n\t\t\treturn column.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetColumnDefinitions(){\n\t\treturn this.columnManager.getDefinitionTree();\n\t}\n\t\n\tshowColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.show();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\thideColumn(field){\n\t\tvar column = this.columnManager.findColumn(field); \n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.hide();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\ttoggleColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tif(column.visible){\n\t\t\t\tcolumn.hide();\n\t\t\t}else{\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\taddColumn(definition, before, field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.columnManager.addColumn(definition, before, column)\n\t\t\t.then((column) => {\n\t\t\t\treturn column.getComponent();\n\t\t\t});\n\t}\n\t\n\tdeleteColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.delete();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tupdateColumnDefinition(field, definition){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.updateDefinition(definition);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tvar fromColumn = this.columnManager.findColumn(from),\n\t\ttoColumn = this.columnManager.findColumn(to);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromColumn){\n\t\t\tif(toColumn){\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t}\n\t\n\t//scroll to column in DOM\n\tscrollToColumn(field, position, ifVisible){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this.columnManager.findColumn(field);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//////////// General Public Functions ////////////\n\t//redraw list without updating data\n\tredraw(force){\n\t\tthis.initGuard();\n\n\t\tthis.columnManager.redraw(force);\n\t\tthis.rowManager.redraw(force);\n\t}\n\t\n\tsetHeight(height){\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.initializeRenderer();\n\t\tthis.rowManager.redraw();\n\t}\n\t\n\t//////////////////// Event Bus ///////////////////\n\t\n\ton(key, callback){\n\t\tthis.externalEvents.subscribe(key, callback);\n\t}\n\t\n\toff(key, callback){\n\t\tthis.externalEvents.unsubscribe(key, callback);\n\t}\n\t\n\tdispatchEvent(){\n\t\tvar args = Array.from(arguments);\n\t\targs.shift();\n\t\t\n\t\tthis.externalEvents.dispatch(...arguments);\n\t}\n\n\t//////////////////// Alerts ///////////////////\n\n\talert(contents, type){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.alert(contents, type);\n\t}\n\n\tclearAlert(){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.clear();\n\t}\n\t\n\t////////////// Extension Management //////////////\n\tmodExists(plugin, required){\n\t\tif(this.modules[plugin]){\n\t\t\treturn true;\n\t\t}else{\n\t\t\tif(required){\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule(key){\n\t\tvar mod = this.modules[key];\n\t\t\n\t\tif(!mod){\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\n\t\t}\n\t\t\n\t\treturn mod;\n\t}\n}\n\n//default setup options\nTabulator.defaultOptions = defaultOptions;\n\n//bind modules and static functionality\nnew ModuleBinder(Tabulator);\n\nexport default Tabulator;\n","//tabulator with all modules installed\nimport {default as Tabulator} from './Tabulator.js';\nimport * as modules from '../core/modules/optional.js';\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nclass TabulatorFull extends Tabulator {}\n\n//bind modules and static functionality\nnew ModuleBinder(TabulatorFull, modules);\n\nexport default TabulatorFull;","export default class PseudoRow {\n\n\tconstructor (type){\n\t\tthis.type = type;\n\t\tthis.element = this._createElement();\n\t}\n\n\t_createElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-row\");\n\t\treturn el;\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tgetComponent(){\n\t\treturn false;\n\t}\n\n\tgetData(){\n\t\treturn {};\n\t}\n\n\tgetHeight(){\n\t\treturn this.element.outerHeight;\n\t}\n\n\tinitialize(){}\n\n\treinitialize(){}\n\n\tnormalizeHeight(){}\n\n\tgenerateCells(){}\n\n\treinitializeHeight(){}\n\n\tcalcHeight(){}\n\n\tsetCellHeight(){}\n\n\tclearCellHeight(){}\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}