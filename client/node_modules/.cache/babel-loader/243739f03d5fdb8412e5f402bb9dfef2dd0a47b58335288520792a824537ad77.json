{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { NUMBER_MAX_FLOAT32 as e } from \"../../../core/mathUtils.js\";\nimport { isSome as s, isNone as n } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { getPixelValueRange as r } from \"../rasterFormats/pixelRangeUtils.js\";\nimport u from \"./BaseRasterFunction.js\";\nimport { createRemapLUT as i, MAX_MAP_SIZE_GPU as l, lookupPixels as p, lookupBandValues as c, remap as m } from \"./pixelUtils.js\";\nimport g from \"./RemapFunctionArguments.js\";\nlet h = class extends u {\n  constructor() {\n    super(...arguments), this.functionName = \"Remap\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"], this.lookup = null;\n  }\n  _bindSourceRasters() {\n    const t = this.sourceRasterInfos[0].clone(),\n      {\n        pixelType: e\n      } = t;\n    this.outputPixelType = this._getOutputPixelType(e), t.pixelType = this.outputPixelType, t.colormap = null, t.histograms = null, t.bandCount = 1, t.attributeTable = null;\n    const {\n        statistics: n\n      } = t,\n      {\n        allowUnmatched: o,\n        outputValues: a,\n        inputRanges: r,\n        noDataRanges: u,\n        isLastInputRangeInclusive: p\n      } = this.functionArguments;\n    if (s(n) && n.length && a?.length) if (o) {\n      const e = Math.min.apply(null, [...a, n[0].min]),\n        s = Math.max.apply(null, [...a, n[0].max]);\n      t.statistics = [{\n        ...n[0],\n        min: e,\n        max: s\n      }];\n    } else {\n      let e = a[0],\n        s = e;\n      for (let t = 0; t < a.length; t++) e = e > a[t] ? a[t] : e, s = s > a[t] ? s : a[t];\n      t.statistics = [{\n        ...n[0],\n        min: e,\n        max: s\n      }];\n    }\n    this.rasterInfo = t, this.lookup = o ? null : i({\n      srcPixelType: e,\n      inputRanges: r,\n      outputValues: a,\n      noDataRanges: u,\n      allowUnmatched: o,\n      isLastInputRangeInclusive: p,\n      outputPixelType: this.outputPixelType\n    });\n    return {\n      success: !0,\n      supportsGPU: (!a || a.length <= l) && (!u || u.length <= l)\n    };\n  }\n  _processPixels(t) {\n    const e = t.pixelBlocks?.[0];\n    if (n(e)) return null;\n    const {\n      lookup: o,\n      outputPixelType: a\n    } = this;\n    if (o) {\n      const t = p(e, {\n        lut: [o.lut],\n        offset: o.offset,\n        outputPixelType: a\n      });\n      return s(t) && o.mask && (t.mask = c(e.pixels[0], e.mask, o.mask, o.offset, \"u8\")), t;\n    }\n    const {\n      inputRanges: r,\n      outputValues: u,\n      noDataRanges: i,\n      allowUnmatched: l,\n      isLastInputRangeInclusive: g\n    } = this.functionArguments;\n    return m(e, {\n      inputRanges: r,\n      outputValues: u,\n      noDataRanges: i,\n      outputPixelType: a,\n      allowUnmatched: l,\n      isLastInputRangeInclusive: g\n    });\n  }\n  _getWebGLParameters() {\n    const {\n        allowUnmatched: t,\n        inputRanges: s,\n        outputValues: n,\n        noDataRanges: o,\n        isLastInputRangeInclusive: a\n      } = this.functionArguments,\n      u = new Float32Array(3 * l),\n      i = 1e-5,\n      p = n.length;\n    if (s?.length) {\n      let t = 0,\n        o = 0;\n      for (let r = 0; r < u.length; r += 3) u[r] = s[t++] ?? e - 1, u[r + 1] = s[t++] ?? e, u[r + 2] = n[o++] ?? 0, o <= p && (r > 0 && (u[r] -= i), (o < p || !a) && (u[r + 1] -= i));\n    }\n    const c = new Float32Array(2 * l);\n    c.fill(e), o?.length && c.set(o);\n    return {\n      allowUnmatched: t,\n      rangeMaps: u,\n      noDataRanges: c,\n      clampRange: r(this.outputPixelType)\n    };\n  }\n};\nt([o({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], h.prototype, \"functionName\", void 0), t([o({\n  type: g,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], h.prototype, \"functionArguments\", void 0), t([o()], h.prototype, \"rasterArgumentNames\", void 0), t([o({\n  json: {\n    write: !0\n  }\n})], h.prototype, \"lookup\", void 0), h = t([a(\"esri.layers.support.rasterFunctions.RemapFunction\")], h);\nconst f = h;\nexport { f as default };","map":{"version":3,"names":["_","t","NUMBER_MAX_FLOAT32","e","isSome","s","isNone","n","property","o","subclass","a","getPixelValueRange","r","u","createRemapLUT","i","MAX_MAP_SIZE_GPU","l","lookupPixels","p","lookupBandValues","c","remap","m","g","h","constructor","arguments","functionName","functionArguments","rasterArgumentNames","lookup","_bindSourceRasters","sourceRasterInfos","clone","pixelType","outputPixelType","_getOutputPixelType","colormap","histograms","bandCount","attributeTable","statistics","allowUnmatched","outputValues","inputRanges","noDataRanges","isLastInputRangeInclusive","length","Math","min","apply","max","rasterInfo","srcPixelType","success","supportsGPU","_processPixels","pixelBlocks","lut","offset","mask","pixels","_getWebGLParameters","Float32Array","fill","set","rangeMaps","clampRange","json","write","name","prototype","type","f","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/layers/support/rasterFunctions/RemapFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{NUMBER_MAX_FLOAT32 as e}from\"../../../core/mathUtils.js\";import{isSome as s,isNone as n}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{getPixelValueRange as r}from\"../rasterFormats/pixelRangeUtils.js\";import u from\"./BaseRasterFunction.js\";import{createRemapLUT as i,MAX_MAP_SIZE_GPU as l,lookupPixels as p,lookupBandValues as c,remap as m}from\"./pixelUtils.js\";import g from\"./RemapFunctionArguments.js\";let h=class extends u{constructor(){super(...arguments),this.functionName=\"Remap\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"],this.lookup=null}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:e}=t;this.outputPixelType=this._getOutputPixelType(e),t.pixelType=this.outputPixelType,t.colormap=null,t.histograms=null,t.bandCount=1,t.attributeTable=null;const{statistics:n}=t,{allowUnmatched:o,outputValues:a,inputRanges:r,noDataRanges:u,isLastInputRangeInclusive:p}=this.functionArguments;if(s(n)&&n.length&&a?.length)if(o){const e=Math.min.apply(null,[...a,n[0].min]),s=Math.max.apply(null,[...a,n[0].max]);t.statistics=[{...n[0],min:e,max:s}]}else{let e=a[0],s=e;for(let t=0;t<a.length;t++)e=e>a[t]?a[t]:e,s=s>a[t]?s:a[t];t.statistics=[{...n[0],min:e,max:s}]}this.rasterInfo=t,this.lookup=o?null:i({srcPixelType:e,inputRanges:r,outputValues:a,noDataRanges:u,allowUnmatched:o,isLastInputRangeInclusive:p,outputPixelType:this.outputPixelType});return{success:!0,supportsGPU:(!a||a.length<=l)&&(!u||u.length<=l)}}_processPixels(t){const e=t.pixelBlocks?.[0];if(n(e))return null;const{lookup:o,outputPixelType:a}=this;if(o){const t=p(e,{lut:[o.lut],offset:o.offset,outputPixelType:a});return s(t)&&o.mask&&(t.mask=c(e.pixels[0],e.mask,o.mask,o.offset,\"u8\")),t}const{inputRanges:r,outputValues:u,noDataRanges:i,allowUnmatched:l,isLastInputRangeInclusive:g}=this.functionArguments;return m(e,{inputRanges:r,outputValues:u,noDataRanges:i,outputPixelType:a,allowUnmatched:l,isLastInputRangeInclusive:g})}_getWebGLParameters(){const{allowUnmatched:t,inputRanges:s,outputValues:n,noDataRanges:o,isLastInputRangeInclusive:a}=this.functionArguments,u=new Float32Array(3*l),i=1e-5,p=n.length;if(s?.length){let t=0,o=0;for(let r=0;r<u.length;r+=3)u[r]=s[t++]??e-1,u[r+1]=s[t++]??e,u[r+2]=n[o++]??0,o<=p&&(r>0&&(u[r]-=i),(o<p||!a)&&(u[r+1]-=i))}const c=new Float32Array(2*l);c.fill(e),o?.length&&c.set(o);return{allowUnmatched:t,rangeMaps:u,noDataRanges:c,clampRange:r(this.outputPixelType)}}};t([o({json:{write:!0,name:\"rasterFunction\"}})],h.prototype,\"functionName\",void 0),t([o({type:g,json:{write:!0,name:\"rasterFunctionArguments\"}})],h.prototype,\"functionArguments\",void 0),t([o()],h.prototype,\"rasterArgumentNames\",void 0),t([o({json:{write:!0}})],h.prototype,\"lookup\",void 0),h=t([a(\"esri.layers.support.rasterFunctions.RemapFunction\")],h);const f=h;export{f as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}