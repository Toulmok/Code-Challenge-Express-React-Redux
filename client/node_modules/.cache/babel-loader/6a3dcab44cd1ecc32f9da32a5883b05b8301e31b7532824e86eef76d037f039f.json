{"ast":null,"code":"import _regeneratorRuntime from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"C:/code-challenge-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport r from \"../../core/Logger.js\";\nimport { isNone as t } from \"../../core/maybe.js\";\nimport { formatDate as a, convertDateFormatToIntlOptions as n } from \"../../intl/date.js\";\nimport { formatNumber as o } from \"../../intl/number.js\";\nimport { isNumericField as i } from \"./fieldUtils.js\";\nimport { getLabelExpression as l, getSingleFieldArcadeExpression as u } from \"./labelUtils.js\";\nimport { createLabelExpression as s } from \"../../support/arcadeOnDemand.js\";\nvar c = r.getLogger(\"esri.layers.support.labelFormatUtils\"),\n  f = {\n    type: \"simple\",\n    evaluate: function evaluate() {\n      return null;\n    }\n  },\n  p = {\n    getAttribute: function getAttribute(e, r) {\n      return e.field(r);\n    }\n  };\nfunction m(_x, _x2, _x3) {\n  return _m.apply(this, arguments);\n}\nfunction _m() {\n  _m = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(r, a, n) {\n    var o, i, m, g, _r3, _r4, _t;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(!r || !r.symbol || !a)) {\n            _context.next = 2;\n            break;\n          }\n          return _context.abrupt(\"return\", f);\n        case 2:\n          o = r.where;\n          i = l(r);\n          if (!o) {\n            _context.next = 10;\n            break;\n          }\n          _context.next = 7;\n          return import(\"../../core/sql/WhereClause.js\");\n        case 7:\n          _context.t0 = _context.sent;\n          _context.next = 11;\n          break;\n        case 10:\n          _context.t0 = null;\n        case 11:\n          m = _context.t0;\n          if (!(\"arcade\" === i.type)) {\n            _context.next = 21;\n            break;\n          }\n          _context.next = 15;\n          return s(i.expression, n, a);\n        case 15:\n          _r3 = _context.sent;\n          if (!t(_r3)) {\n            _context.next = 18;\n            break;\n          }\n          return _context.abrupt(\"return\", f);\n        case 18:\n          g = {\n            type: \"arcade\",\n            evaluate: function evaluate(t) {\n              try {\n                var _e2 = _r3.evaluate({\n                  $feature: \"attributes\" in t ? _r3.repurposeFeature(t) : t\n                });\n                if (null != _e2) return _e2.toString();\n              } catch (a) {\n                c.error(new e(\"arcade-expression-error\", \"Encountered an error when evaluating label expression for feature\", {\n                  feature: t,\n                  expression: i\n                }));\n              }\n              return null;\n            },\n            needsHydrationToEvaluate: function needsHydrationToEvaluate() {\n              return null == u(i.expression);\n            }\n          };\n          _context.next = 22;\n          break;\n        case 21:\n          g = {\n            type: \"simple\",\n            evaluate: function evaluate(e) {\n              return i.expression.replace(/{[^}]*}/g, function (r) {\n                var t = r.slice(1, -1),\n                  n = a.get(t);\n                if (!n) return r;\n                var o = null;\n                if (\"attributes\" in e) {\n                  e && e.attributes && (o = e.attributes[n.name]);\n                } else o = e.field(n.name);\n                return null == o ? \"\" : d(o, n);\n              });\n            }\n          };\n        case 22:\n          if (!o) {\n            _context.next = 32;\n            break;\n          }\n          _context.prev = 23;\n          _r4 = m.WhereClause.create(o, a);\n          _context.next = 30;\n          break;\n        case 27:\n          _context.prev = 27;\n          _context.t1 = _context[\"catch\"](23);\n          return _context.abrupt(\"return\", (c.error(new e(\"bad-where-clause\", \"Encountered an error when evaluating where clause, ignoring\", {\n            where: o,\n            error: _context.t1\n          })), f));\n        case 30:\n          _t = g.evaluate;\n          g.evaluate = function (a) {\n            var n = \"attributes\" in a ? void 0 : p;\n            try {\n              if (_r4.testFeature(a, n)) return _t(a);\n            } catch (y) {\n              c.error(new e(\"bad-where-clause\", \"Encountered an error when evaluating where clause for feature\", {\n                where: o,\n                feature: a,\n                error: y\n              }));\n            }\n            return null;\n          };\n        case 32:\n          return _context.abrupt(\"return\", g);\n        case 33:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[23, 27]]);\n  }));\n  return _m.apply(this, arguments);\n}\nfunction d(e, r) {\n  if (null == e) return \"\";\n  var t = r.domain;\n  if (t) if (\"codedValue\" === t.type || \"coded-value\" === t.type) {\n    var _r = e;\n    var _iterator = _createForOfIteratorHelper(t.codedValues),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _e = _step.value;\n        if (_e.code === _r) return _e.name;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else if (\"range\" === t.type) {\n    var _r2 = +e,\n      _a = \"range\" in t ? t.range[0] : t.minValue,\n      _n = \"range\" in t ? t.range[1] : t.maxValue;\n    if (_a <= _r2 && _r2 <= _n) return t.name;\n  }\n  var l = e;\n  return \"date\" === r.type || \"esriFieldTypeDate\" === r.type ? l = a(l, n(\"short-date\")) : i(r) && (l = o(+l)), l || \"\";\n}\nexport { m as createLabelFunction, d as formatField };","map":{"version":3,"names":["e","r","isNone","t","formatDate","a","convertDateFormatToIntlOptions","n","formatNumber","o","isNumericField","i","getLabelExpression","l","getSingleFieldArcadeExpression","u","createLabelExpression","s","c","getLogger","f","type","evaluate","p","getAttribute","field","m","_x","_x2","_x3","_m","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","g","_r3","_r4","_t","wrap","_callee$","_context","prev","next","symbol","abrupt","where","t0","sent","expression","$feature","repurposeFeature","toString","error","feature","needsHydrationToEvaluate","replace","slice","get","attributes","name","d","WhereClause","create","t1","testFeature","y","stop","domain","_iterator","_createForOfIteratorHelper","codedValues","_step","done","value","code","err","range","minValue","maxValue","createLabelFunction","formatField"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/support/labelFormatUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isNone as t}from\"../../core/maybe.js\";import{formatDate as a,convertDateFormatToIntlOptions as n}from\"../../intl/date.js\";import{formatNumber as o}from\"../../intl/number.js\";import{isNumericField as i}from\"./fieldUtils.js\";import{getLabelExpression as l,getSingleFieldArcadeExpression as u}from\"./labelUtils.js\";import{createLabelExpression as s}from\"../../support/arcadeOnDemand.js\";const c=r.getLogger(\"esri.layers.support.labelFormatUtils\"),f={type:\"simple\",evaluate:()=>null},p={getAttribute:(e,r)=>e.field(r)};async function m(r,a,n){if(!r||!r.symbol||!a)return f;const o=r.where,i=l(r),m=o?await import(\"../../core/sql/WhereClause.js\"):null;let g;if(\"arcade\"===i.type){const r=await s(i.expression,n,a);if(t(r))return f;g={type:\"arcade\",evaluate(t){try{const e=r.evaluate({$feature:\"attributes\"in t?r.repurposeFeature(t):t});if(null!=e)return e.toString()}catch(a){c.error(new e(\"arcade-expression-error\",\"Encountered an error when evaluating label expression for feature\",{feature:t,expression:i}))}return null},needsHydrationToEvaluate:()=>null==u(i.expression)}}else g={type:\"simple\",evaluate:e=>i.expression.replace(/{[^}]*}/g,(r=>{const t=r.slice(1,-1),n=a.get(t);if(!n)return r;let o=null;if(\"attributes\"in e){e&&e.attributes&&(o=e.attributes[n.name])}else o=e.field(n.name);return null==o?\"\":d(o,n)}))};if(o){let r;try{r=m.WhereClause.create(o,a)}catch(y){return c.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause, ignoring\",{where:o,error:y})),f}const t=g.evaluate;g.evaluate=a=>{const n=\"attributes\"in a?void 0:p;try{if(r.testFeature(a,n))return t(a)}catch(y){c.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause for feature\",{where:o,feature:a,error:y}))}return null}}return g}function d(e,r){if(null==e)return\"\";const t=r.domain;if(t)if(\"codedValue\"===t.type||\"coded-value\"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if(\"range\"===t.type){const r=+e,a=\"range\"in t?t.range[0]:t.minValue,n=\"range\"in t?t.range[1]:t.maxValue;if(a<=r&&r<=n)return t.name}let l=e;return\"date\"===r.type||\"esriFieldTypeDate\"===r.type?l=a(l,n(\"short-date\")):i(r)&&(l=o(+l)),l||\"\"}export{m as createLabelFunction,d as formatField};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}