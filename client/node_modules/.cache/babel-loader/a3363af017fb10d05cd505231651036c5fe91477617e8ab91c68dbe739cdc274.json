{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { HandleOwner as r } from \"../../../../core/HandleOwner.js\";\nimport { destroyHandle as t } from \"../../../../core/handleUtils.js\";\nimport { removeMaybe as o, abortMaybe as i, isNone as s, applySome as a } from \"../../../../core/maybe.js\";\nimport { isAborted as n } from \"../../../../core/promiseUtils.js\";\nimport { property as d } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as c } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { EdgeWorkerHandle as l } from \"../../../3d/webgl-engine/lib/edgeRendering/EdgeWorkerHandle.js\";\nimport { SceneLayerSnappingSourceWorkerHandle as p } from \"./sceneLayerSource/SceneLayerSnappingSourceWorkerHandle.js\";\nlet h = class extends r {\n  get updating() {\n    return this.updatingHandles.updating;\n  }\n  constructor(e) {\n    super(e), this.availability = 1, this._abortController = new AbortController();\n  }\n  destroy() {\n    this._tracker = o(this._tracker), this._abortController = i(this._abortController);\n  }\n  initialize() {\n    const {\n        view: e\n      } = this,\n      r = e.resourceController;\n    this._edgeWorker = new l(e => r.immediate.schedule(e)), this._workerHandle = new p({\n      renderCoordsHelper: this.view.renderCoordsHelper,\n      schedule: e => r.immediate.schedule(e),\n      fetchEdgeLocations: async (e, r) => {\n        if (s(this._tracker)) throw new Error(\"tracker-not-initialized\");\n        return this._tracker.fetchEdgeLocations(e, this._edgeWorker, r);\n      }\n    }), this.updatingHandles.addPromise(this._setupLayerView()), this.handles.add([t(this._workerHandle), t(this._edgeWorker)]);\n  }\n  async fetchCandidates(e, r) {\n    return this._workerHandle.fetchCandidates(e, r);\n  }\n  refresh() {}\n  async _setupLayerView() {\n    if (this.destroyed) return;\n    const e = a(this._abortController, e => e.signal),\n      r = await this.getLayerView();\n    s(r) || n(e) || (this._tracker = r.trackSnappingSources({\n      add: (r, t) => {\n        this.updatingHandles.addPromise(this._workerHandle.add({\n          id: r,\n          bounds: t\n        }, e));\n      },\n      remove: r => {\n        this.updatingHandles.addPromise(this._workerHandle.remove({\n          id: r\n        }, e));\n      }\n    }));\n  }\n};\ne([d({\n  constructOnly: !0\n})], h.prototype, \"getLayerView\", void 0), e([d({\n  constructOnly: !0\n})], h.prototype, \"view\", void 0), e([d({\n  readOnly: !0\n})], h.prototype, \"updating\", null), e([d({\n  readOnly: !0\n})], h.prototype, \"availability\", void 0), h = e([c(\"esri.views.interactive.snapping.featureSources.I3SSnappingSource\")], h);\nexport { h as I3SSnappingSource };","map":{"version":3,"names":["_","e","HandleOwner","r","destroyHandle","t","removeMaybe","o","abortMaybe","i","isNone","s","applySome","a","isAborted","n","property","d","subclass","c","EdgeWorkerHandle","l","SceneLayerSnappingSourceWorkerHandle","p","h","updating","updatingHandles","constructor","availability","_abortController","AbortController","destroy","_tracker","initialize","view","resourceController","_edgeWorker","immediate","schedule","_workerHandle","renderCoordsHelper","fetchEdgeLocations","Error","addPromise","_setupLayerView","handles","add","fetchCandidates","refresh","destroyed","signal","getLayerView","trackSnappingSources","id","bounds","remove","constructOnly","prototype","readOnly","I3SSnappingSource"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/interactive/snapping/featureSources/I3SSnappingSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{HandleOwner as r}from\"../../../../core/HandleOwner.js\";import{destroyHandle as t}from\"../../../../core/handleUtils.js\";import{removeMaybe as o,abortMaybe as i,isNone as s,applySome as a}from\"../../../../core/maybe.js\";import{isAborted as n}from\"../../../../core/promiseUtils.js\";import{property as d}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{EdgeWorkerHandle as l}from\"../../../3d/webgl-engine/lib/edgeRendering/EdgeWorkerHandle.js\";import{SceneLayerSnappingSourceWorkerHandle as p}from\"./sceneLayerSource/SceneLayerSnappingSourceWorkerHandle.js\";let h=class extends r{get updating(){return this.updatingHandles.updating}constructor(e){super(e),this.availability=1,this._abortController=new AbortController}destroy(){this._tracker=o(this._tracker),this._abortController=i(this._abortController)}initialize(){const{view:e}=this,r=e.resourceController;this._edgeWorker=new l((e=>r.immediate.schedule(e))),this._workerHandle=new p({renderCoordsHelper:this.view.renderCoordsHelper,schedule:e=>r.immediate.schedule(e),fetchEdgeLocations:async(e,r)=>{if(s(this._tracker))throw new Error(\"tracker-not-initialized\");return this._tracker.fetchEdgeLocations(e,this._edgeWorker,r)}}),this.updatingHandles.addPromise(this._setupLayerView()),this.handles.add([t(this._workerHandle),t(this._edgeWorker)])}async fetchCandidates(e,r){return this._workerHandle.fetchCandidates(e,r)}refresh(){}async _setupLayerView(){if(this.destroyed)return;const e=a(this._abortController,(e=>e.signal)),r=await this.getLayerView();s(r)||n(e)||(this._tracker=r.trackSnappingSources({add:(r,t)=>{this.updatingHandles.addPromise(this._workerHandle.add({id:r,bounds:t},e))},remove:r=>{this.updatingHandles.addPromise(this._workerHandle.remove({id:r},e))}}))}};e([d({constructOnly:!0})],h.prototype,\"getLayerView\",void 0),e([d({constructOnly:!0})],h.prototype,\"view\",void 0),e([d({readOnly:!0})],h.prototype,\"updating\",null),e([d({readOnly:!0})],h.prototype,\"availability\",void 0),h=e([c(\"esri.views.interactive.snapping.featureSources.I3SSnappingSource\")],h);export{h as I3SSnappingSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}