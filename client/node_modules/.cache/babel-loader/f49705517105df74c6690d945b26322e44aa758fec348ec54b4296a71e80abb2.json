{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../../chunks/tslib.es6.js\";\nimport { clamp as i } from \"../../../../../core/mathUtils.js\";\nimport { isSome as e } from \"../../../../../core/maybe.js\";\nimport { Milliseconds as o } from \"../../../../../core/time.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/Error.js\";\nimport \"../../../../../core/has.js\";\nimport { subclass as r } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c as s, b as a, n, e as m, l as c, a as p, g as h, h as l } from \"../../../../../chunks/vec3.js\";\nimport { c as _, f as y } from \"../../../../../chunks/vec3f64.js\";\nimport { applyAll as C } from \"../../../camera/constraintUtils.js\";\nimport { ConstraintTypes as f } from \"../../../camera/constraintUtils/ConstraintTypes.js\";\nimport { InteractionType as j } from \"../../../camera/constraintUtils/InteractionType.js\";\nimport { TiltMode as u } from \"../../../camera/constraintUtils/TiltMode.js\";\nimport { PointToPointAnimationController as g } from \"../PointToPointAnimationController.js\";\nimport { contentIntersectorOptions as v, ZOOM_MAX_DISTANCE_MODIFIER as w, ZOOM_MIN_DISTANCE_MODIFIER as b, ZOOM_DISTANCE_MODIFIER as L } from \"../../utils/navigationUtils.js\";\nimport { Camera as d } from \"../../../webgl-engine/lib/Camera.js\";\nimport { newIntersector as z } from \"../../../webgl-engine/lib/Intersector.js\";\nimport { outExpo as M } from \"../../../../animation/easing.js\";\nconst D = .6,\n  R = 4,\n  S = 60;\nlet U = class extends g {\n  constructor() {\n    super(...arguments), this._zoomLocation = _(), this._tmpCamera = new d(), this._tmpRayDir = _(), this._tmpCenter = _(), this._constraintOptions = {\n      selection: f.ALL,\n      interactionType: j.ZOOM,\n      interactionFactor: null,\n      interactionStartCamera: new d(),\n      interactionDirection: null,\n      tiltMode: u.TUMBLE\n    };\n  }\n  zoomStep(t, o) {\n    if (!this.active) return;\n    const r = this.view.state,\n      {\n        interactionStartCamera: l\n      } = this._constraintOptions;\n    l && (this.animation.finished ? l.copyFrom(r.camera) : this.animation.cameraAt(1, l)), this._tmpCamera.copyFrom(r.camera);\n    const y = z(this.view.state.viewingMode);\n    let C = !1;\n    t > 0 ? (C = this.intersectionHelper.intersectScreenFreePointFallback(o, this._zoomLocation, 0 === this.view.map.ground.opacity ? v : {}), this.intersectionHelper.intersectRay(this._tmpCamera.ray, y, this._tmpCenter) && (this._tmpCamera.center = this._tmpCenter)) : this.intersectionHelper.intersectRay(this._tmpCamera.ray, y, this._zoomLocation) ? this._tmpCamera.center = this._zoomLocation : s(this._zoomLocation, this._tmpCamera.center);\n    const f = D ** t;\n    let j = this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm, o[0], o[1], this.view.state.camera, S);\n    a(O, this._tmpCamera.eye, this._zoomLocation), n(O, O);\n    const u = i(Math.min(L, 1 / Math.abs(m(T, O))) * Math.abs(this.view.camera.position.z), b, w);\n    if (j = e(j) ? j : u, j) {\n      const t = _();\n      a(t, this._zoomLocation, this._tmpCamera.eye), (j < c(t) || !C) && (n(t, t), p(this._zoomLocation, this._tmpCamera.eye, h(t, t, j)));\n    }\n    this._updateCamera(this._tmpCamera, f, this._zoomLocation), this.begin(this._tmpCamera);\n  }\n  animationSettings() {\n    return {\n      duration: o(600),\n      easing: M\n    };\n  }\n  _updateCamera(t, i, e) {\n    a(this._tmpRayDir, e, t.eye);\n    const o = c(this._tmpRayDir);\n    let r = o * i;\n    const s = i <= 1,\n      n = Math.max(R, 1.01 * t.nearFar[0]);\n    0 !== r && (s && r < n && (r = n, i = r / o), Math.abs(o - r) < 1e-6 || (h(this._tmpRayDir, this._tmpRayDir, i), t.eye = a(F, e, this._tmpRayDir), t.center = l(F, t.center, e, 1 - i), C(this.view, t, this._constraintOptions)));\n  }\n};\nU = t([r(\"esri.views.3d.state.controllers.local.ZoomStepController\")], U);\nconst F = _(),\n  T = y(0, 0, 1),\n  O = _();\nexport { U as ZoomStepController };","map":{"version":3,"names":["_","t","clamp","i","isSome","e","Milliseconds","o","subclass","r","c","s","b","a","n","m","l","p","g","h","f","y","applyAll","C","ConstraintTypes","InteractionType","j","TiltMode","u","PointToPointAnimationController","contentIntersectorOptions","v","ZOOM_MAX_DISTANCE_MODIFIER","w","ZOOM_MIN_DISTANCE_MODIFIER","ZOOM_DISTANCE_MODIFIER","L","Camera","d","newIntersector","z","outExpo","M","D","R","S","U","constructor","arguments","_zoomLocation","_tmpCamera","_tmpRayDir","_tmpCenter","_constraintOptions","selection","ALL","interactionType","ZOOM","interactionFactor","interactionStartCamera","interactionDirection","tiltMode","TUMBLE","zoomStep","active","view","state","animation","finished","copyFrom","camera","cameraAt","viewingMode","intersectionHelper","intersectScreenFreePointFallback","map","ground","opacity","intersectRay","ray","center","_stage","renderView","getMinimalDepthForArea","voxelWasm","O","eye","Math","min","abs","T","position","_updateCamera","begin","animationSettings","duration","easing","max","nearFar","F","ZoomStepController"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/state/controllers/local/ZoomStepController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import{clamp as i}from\"../../../../../core/mathUtils.js\";import{isSome as e}from\"../../../../../core/maybe.js\";import{Milliseconds as o}from\"../../../../../core/time.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/Error.js\";import\"../../../../../core/has.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as s,b as a,n,e as m,l as c,a as p,g as h,h as l}from\"../../../../../chunks/vec3.js\";import{c as _,f as y}from\"../../../../../chunks/vec3f64.js\";import{applyAll as C}from\"../../../camera/constraintUtils.js\";import{ConstraintTypes as f}from\"../../../camera/constraintUtils/ConstraintTypes.js\";import{InteractionType as j}from\"../../../camera/constraintUtils/InteractionType.js\";import{TiltMode as u}from\"../../../camera/constraintUtils/TiltMode.js\";import{PointToPointAnimationController as g}from\"../PointToPointAnimationController.js\";import{contentIntersectorOptions as v,ZOOM_MAX_DISTANCE_MODIFIER as w,ZOOM_MIN_DISTANCE_MODIFIER as b,ZOOM_DISTANCE_MODIFIER as L}from\"../../utils/navigationUtils.js\";import{Camera as d}from\"../../../webgl-engine/lib/Camera.js\";import{newIntersector as z}from\"../../../webgl-engine/lib/Intersector.js\";import{outExpo as M}from\"../../../../animation/easing.js\";const D=.6,R=4,S=60;let U=class extends g{constructor(){super(...arguments),this._zoomLocation=_(),this._tmpCamera=new d,this._tmpRayDir=_(),this._tmpCenter=_(),this._constraintOptions={selection:f.ALL,interactionType:j.ZOOM,interactionFactor:null,interactionStartCamera:new d,interactionDirection:null,tiltMode:u.TUMBLE}}zoomStep(t,o){if(!this.active)return;const r=this.view.state,{interactionStartCamera:l}=this._constraintOptions;l&&(this.animation.finished?l.copyFrom(r.camera):this.animation.cameraAt(1,l)),this._tmpCamera.copyFrom(r.camera);const y=z(this.view.state.viewingMode);let C=!1;t>0?(C=this.intersectionHelper.intersectScreenFreePointFallback(o,this._zoomLocation,0===this.view.map.ground.opacity?v:{}),this.intersectionHelper.intersectRay(this._tmpCamera.ray,y,this._tmpCenter)&&(this._tmpCamera.center=this._tmpCenter)):this.intersectionHelper.intersectRay(this._tmpCamera.ray,y,this._zoomLocation)?this._tmpCamera.center=this._zoomLocation:s(this._zoomLocation,this._tmpCamera.center);const f=D**t;let j=this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm,o[0],o[1],this.view.state.camera,S);a(O,this._tmpCamera.eye,this._zoomLocation),n(O,O);const u=i(Math.min(L,1/Math.abs(m(T,O)))*Math.abs(this.view.camera.position.z),b,w);if(j=e(j)?j:u,j){const t=_();a(t,this._zoomLocation,this._tmpCamera.eye),(j<c(t)||!C)&&(n(t,t),p(this._zoomLocation,this._tmpCamera.eye,h(t,t,j)))}this._updateCamera(this._tmpCamera,f,this._zoomLocation),this.begin(this._tmpCamera)}animationSettings(){return{duration:o(600),easing:M}}_updateCamera(t,i,e){a(this._tmpRayDir,e,t.eye);const o=c(this._tmpRayDir);let r=o*i;const s=i<=1,n=Math.max(R,1.01*t.nearFar[0]);0!==r&&(s&&r<n&&(r=n,i=r/o),Math.abs(o-r)<1e-6||(h(this._tmpRayDir,this._tmpRayDir,i),t.eye=a(F,e,this._tmpRayDir),t.center=l(F,t.center,e,1-i),C(this.view,t,this._constraintOptions)))}};U=t([r(\"esri.views.3d.state.controllers.local.ZoomStepController\")],U);const F=_(),T=y(0,0,1),O=_();export{U as ZoomStepController};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}