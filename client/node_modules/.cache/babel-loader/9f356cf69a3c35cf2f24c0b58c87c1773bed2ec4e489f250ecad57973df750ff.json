{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSymbol3D as t } from \"../../symbols.js\";\nimport { isDevEnvironment as e, adjustStaticAGOUrl as r } from \"../../core/devEnvironmentUtils.js\";\nimport o from \"../../core/Error.js\";\nimport { unwrapOrThrow as l, isSome as n } from \"../../core/maybe.js\";\nimport { urlToObject as m, removeFile as s } from \"../../core/urlUtils.js\";\nimport a from \"../../portal/Portal.js\";\nimport { f as i } from \"../../chunks/persistableUrlUtils.js\";\nimport { fromJSON as p } from \"./jsonUtils.js\";\nimport u from \"./StyleOrigin.js\";\nimport { fetchStyle as f, symbolUrlFromStyleItem as y, requestJSON as c, makeCIMSymbolRef as b, Style2DUrlTemplate as g } from \"./styleUtils.js\";\nimport { Thumbnail as j } from \"./Thumbnail.js\";\nfunction h(t, e, r, n) {\n  return t.name ? t.styleName && \"Esri2DPointSymbolsStyle\" === t.styleName ? U(t, e, n) : f(t, e, n).then(o => d(l(o), t.name, e, r, n)) : Promise.reject(new o(\"symbolstyleutils:style-symbol-reference-name-missing\", \"Missing name in style symbol reference\"));\n}\nfunction d(l, f, g, h, d) {\n  const U = l.data,\n    N = g && n(g.portal) ? g.portal : a.getDefault(),\n    w = {\n      portal: N,\n      url: m(l.baseUrl),\n      origin: \"portal-item\"\n    },\n    S = U.items.find(t => t.name === f);\n  if (!S) {\n    const t = `The symbol name '${f}' could not be found`;\n    return Promise.reject(new o(\"symbolstyleutils:symbol-name-not-found\", t, {\n      symbolName: f\n    }));\n  }\n  let D = i(y(S, h), w),\n    O = S.thumbnail?.href ?? null;\n  const P = S.thumbnail && S.thumbnail.imageData;\n  e() && (D = r(D) ?? \"\", O = r(O));\n  const E = {\n    portal: N,\n    url: m(s(D)),\n    origin: \"portal-item\"\n  };\n  return c(D, d).then(e => {\n    const r = \"cimRef\" === h ? b(e.data) : e.data,\n      o = p(r, E);\n    if (o && t(o)) {\n      if (O) {\n        const t = i(O, w);\n        o.thumbnail = new j({\n          url: t\n        });\n      } else P && (o.thumbnail = new j({\n        url: `data:image/png;base64,${P}`\n      }));\n      l.styleUrl ? o.styleOrigin = new u({\n        portal: g.portal,\n        styleUrl: l.styleUrl,\n        name: f\n      }) : l.styleName && (o.styleOrigin = new u({\n        portal: g.portal,\n        styleName: l.styleName,\n        name: f\n      }));\n    }\n    return o;\n  });\n}\nfunction U(t, e, r) {\n  const o = g.replace(/\\{SymbolName\\}/gi, t.name),\n    l = n(e.portal) ? e.portal : a.getDefault();\n  return c(o, r).then(t => {\n    const e = b(t.data);\n    return p(e, {\n      portal: l,\n      url: m(s(o)),\n      origin: \"portal-item\"\n    });\n  });\n}\nexport { d as fetchSymbolFromStyle, h as resolveWebStyleSymbol };","map":{"version":3,"names":["isSymbol3D","t","isDevEnvironment","e","adjustStaticAGOUrl","r","o","unwrapOrThrow","l","isSome","n","urlToObject","m","removeFile","s","a","f","i","fromJSON","p","u","fetchStyle","symbolUrlFromStyleItem","y","requestJSON","c","makeCIMSymbolRef","b","Style2DUrlTemplate","g","Thumbnail","j","h","name","styleName","U","then","d","Promise","reject","data","N","portal","getDefault","w","url","baseUrl","origin","S","items","find","symbolName","D","O","thumbnail","href","P","imageData","E","styleUrl","styleOrigin","replace","fetchSymbolFromStyle","resolveWebStyleSymbol"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import o from\"../../core/Error.js\";import{unwrapOrThrow as l,isSome as n}from\"../../core/maybe.js\";import{urlToObject as m,removeFile as s}from\"../../core/urlUtils.js\";import a from\"../../portal/Portal.js\";import{f as i}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as p}from\"./jsonUtils.js\";import u from\"./StyleOrigin.js\";import{fetchStyle as f,symbolUrlFromStyleItem as y,requestJSON as c,makeCIMSymbolRef as b,Style2DUrlTemplate as g}from\"./styleUtils.js\";import{Thumbnail as j}from\"./Thumbnail.js\";function h(t,e,r,n){return t.name?t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName?U(t,e,n):f(t,e,n).then((o=>d(l(o),t.name,e,r,n))):Promise.reject(new o(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\"))}function d(l,f,g,h,d){const U=l.data,N=g&&n(g.portal)?g.portal:a.getDefault(),w={portal:N,url:m(l.baseUrl),origin:\"portal-item\"},S=U.items.find((t=>t.name===f));if(!S){const t=`The symbol name '${f}' could not be found`;return Promise.reject(new o(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:f}))}let D=i(y(S,h),w),O=S.thumbnail?.href??null;const P=S.thumbnail&&S.thumbnail.imageData;e()&&(D=r(D)??\"\",O=r(O));const E={portal:N,url:m(s(D)),origin:\"portal-item\"};return c(D,d).then((e=>{const r=\"cimRef\"===h?b(e.data):e.data,o=p(r,E);if(o&&t(o)){if(O){const t=i(O,w);o.thumbnail=new j({url:t})}else P&&(o.thumbnail=new j({url:`data:image/png;base64,${P}`}));l.styleUrl?o.styleOrigin=new u({portal:g.portal,styleUrl:l.styleUrl,name:f}):l.styleName&&(o.styleOrigin=new u({portal:g.portal,styleName:l.styleName,name:f}))}return o}))}function U(t,e,r){const o=g.replace(/\\{SymbolName\\}/gi,t.name),l=n(e.portal)?e.portal:a.getDefault();return c(o,r).then((t=>{const e=b(t.data);return p(e,{portal:l,url:m(s(o)),origin:\"portal-item\"})}))}export{d as fetchSymbolFromStyle,h as resolveWebStyleSymbol};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}