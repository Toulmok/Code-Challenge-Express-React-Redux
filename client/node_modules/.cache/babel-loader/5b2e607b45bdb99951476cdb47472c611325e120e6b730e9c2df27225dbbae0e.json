{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../Graphic.js\";\nimport r from \"../../core/Error.js\";\nimport { unwrap as o, isNone as s, isSome as i } from \"../../core/maybe.js\";\nimport { property as a } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { subclass as n } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { combinedViewLayerTimeExtentProperty as l } from \"../../layers/support/commonProperties.js\";\nimport { getDefaultDatumTransformationForDataset as p, projectExtent as u } from \"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";\nimport { getFetchPopupTemplate as c } from \"./support/popupUtils.js\";\nconst f = f => {\n  let m = class extends f {\n    constructor() {\n      super(...arguments), this._rasterFieldPrefix = \"Raster.\", this.layer = null, this.view = null, this.tileInfo = null;\n    }\n    get fullExtent() {\n      return this._getfullExtent();\n    }\n    _getfullExtent() {\n      return this.projectFullExtent(this.view.spatialReference);\n    }\n    get hasTilingEffects() {\n      return this.layer.renderer && \"dynamicRangeAdjustment\" in this.layer.renderer && this.layer.renderer.dynamicRangeAdjustment;\n    }\n    get datumTransformation() {\n      return p(o(this.layer.fullExtent), this.view.spatialReference, !0);\n    }\n    supportsSpatialReference(e) {\n      return !!this.projectFullExtent(e);\n    }\n    projectFullExtent(e) {\n      const t = o(this.layer.fullExtent),\n        r = p(t, e, !1);\n      return u(t, e, r);\n    }\n    async fetchPopupFeatures(e, o) {\n      const {\n        layer: a\n      } = this;\n      if (!e) throw new r(\"imageryTileLayerView:fetchPopupFeatures\", \"Nothing to fetch without area\", {\n        layer: a\n      });\n      const {\n          popupEnabled: n\n        } = a,\n        l = c(a, o);\n      if (!n || s(l)) throw new r(\"imageryTileLayerView:fetchPopupFeatures\", \"Missing required popupTemplate or popupEnabled\", {\n        popupEnabled: n,\n        popupTemplate: l\n      });\n      const p = [],\n        {\n          value: u,\n          magdirValue: f\n        } = await a.identify(e, {\n          timeExtent: this.timeExtent\n        });\n      let m = \"\";\n      if (u && u.length) {\n        m = \"imagery-tile\" === a.type && a.hasStandardTime() && null != u[0] ? u.map(e => a.getStandardTimeValue(e)).join(\", \") : u.join(\", \");\n        const e = {\n          ObjectId: 0\n        };\n        e[\"Raster.ServicePixelValue\"] = m;\n        const r = a.rasterInfo.attributeTable;\n        if (i(r)) {\n          const {\n              fields: t,\n              features: o\n            } = r,\n            s = t.find(_ref => {\n              let {\n                name: e\n              } = _ref;\n              return \"value\" === e.toLowerCase();\n            }),\n            i = s ? o.find(e => String(e.attributes[s.name]) === m) : null;\n          if (i) for (const r in i.attributes) if (i.attributes.hasOwnProperty(r)) {\n            e[this._rasterFieldPrefix + r] = i.attributes[r];\n          }\n        }\n        const o = a.rasterInfo.dataType;\n        \"vector-magdir\" !== o && \"vector-uv\" !== o || (e[\"Raster.Magnitude\"] = f?.[0], e[\"Raster.Direction\"] = f?.[1]);\n        const s = new t(this.fullExtent.clone(), null, e);\n        s.layer = a, s.sourceLayer = s.layer, p.push(s);\n      }\n      return p;\n    }\n  };\n  return e([a()], m.prototype, \"layer\", void 0), e([a(l)], m.prototype, \"timeExtent\", void 0), e([a()], m.prototype, \"view\", void 0), e([a()], m.prototype, \"fullExtent\", null), e([a()], m.prototype, \"tileInfo\", void 0), e([a({\n    readOnly: !0\n  })], m.prototype, \"hasTilingEffects\", null), e([a()], m.prototype, \"datumTransformation\", null), m = e([n(\"esri.views.layers.ImageryTileLayerView\")], m), m;\n};\nexport { f as default };","map":{"version":3,"names":["_","e","t","r","unwrap","o","isNone","s","isSome","i","property","a","subclass","n","combinedViewLayerTimeExtentProperty","l","getDefaultDatumTransformationForDataset","p","projectExtent","u","getFetchPopupTemplate","c","f","m","constructor","arguments","_rasterFieldPrefix","layer","view","tileInfo","fullExtent","_getfullExtent","projectFullExtent","spatialReference","hasTilingEffects","renderer","dynamicRangeAdjustment","datumTransformation","supportsSpatialReference","fetchPopupFeatures","popupEnabled","popupTemplate","value","magdirValue","identify","timeExtent","length","type","hasStandardTime","map","getStandardTimeValue","join","ObjectId","rasterInfo","attributeTable","fields","features","find","_ref","name","toLowerCase","String","attributes","hasOwnProperty","dataType","clone","sourceLayer","push","prototype","readOnly","default"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import r from\"../../core/Error.js\";import{unwrap as o,isNone as s,isSome as i}from\"../../core/maybe.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as l}from\"../../layers/support/commonProperties.js\";import{getDefaultDatumTransformationForDataset as p,projectExtent as u}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{getFetchPopupTemplate as c}from\"./support/popupUtils.js\";const f=f=>{let m=class extends f{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.tileInfo=null}get fullExtent(){return this._getfullExtent()}_getfullExtent(){return this.projectFullExtent(this.view.spatialReference)}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}get datumTransformation(){return p(o(this.layer.fullExtent),this.view.spatialReference,!0)}supportsSpatialReference(e){return!!this.projectFullExtent(e)}projectFullExtent(e){const t=o(this.layer.fullExtent),r=p(t,e,!1);return u(t,e,r)}async fetchPopupFeatures(e,o){const{layer:a}=this;if(!e)throw new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a});const{popupEnabled:n}=a,l=c(a,o);if(!n||s(l))throw new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:n,popupTemplate:l});const p=[],{value:u,magdirValue:f}=await a.identify(e,{timeExtent:this.timeExtent});let m=\"\";if(u&&u.length){m=\"imagery-tile\"===a.type&&a.hasStandardTime()&&null!=u[0]?u.map((e=>a.getStandardTimeValue(e))).join(\", \"):u.join(\", \");const e={ObjectId:0};e[\"Raster.ServicePixelValue\"]=m;const r=a.rasterInfo.attributeTable;if(i(r)){const{fields:t,features:o}=r,s=t.find((({name:e})=>\"value\"===e.toLowerCase())),i=s?o.find((e=>String(e.attributes[s.name])===m)):null;if(i)for(const r in i.attributes)if(i.attributes.hasOwnProperty(r)){e[this._rasterFieldPrefix+r]=i.attributes[r]}}const o=a.rasterInfo.dataType;\"vector-magdir\"!==o&&\"vector-uv\"!==o||(e[\"Raster.Magnitude\"]=f?.[0],e[\"Raster.Direction\"]=f?.[1]);const s=new t(this.fullExtent.clone(),null,e);s.layer=a,s.sourceLayer=s.layer,p.push(s)}return p}};return e([a()],m.prototype,\"layer\",void 0),e([a(l)],m.prototype,\"timeExtent\",void 0),e([a()],m.prototype,\"view\",void 0),e([a()],m.prototype,\"fullExtent\",null),e([a()],m.prototype,\"tileInfo\",void 0),e([a({readOnly:!0})],m.prototype,\"hasTilingEffects\",null),e([a()],m.prototype,\"datumTransformation\",null),m=e([n(\"esri.views.layers.ImageryTileLayerView\")],m),m};export{f as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}