{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport has from \"../../../core/has.js\";\nimport e from \"../../../core/Loadable.js\";\nimport { isSome as o } from \"../../../core/maybe.js\";\nimport { debounce as r } from \"../../../core/promiseUtils.js\";\nimport { open as s } from \"../../../core/workers/workers.js\";\nimport { property as i } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as n } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../../../rest/support/FeatureSet.js\";\nimport c from \"../../../geometry/Extent.js\";\nlet u = class extends e {\n  constructor(t) {\n    super(t), this.type = \"csv\", this.refresh = r(async t => {\n      await this.load();\n      const {\n        extent: e,\n        timeExtent: o\n      } = await this._connection.invoke(\"refresh\", t);\n      return e && (this.sourceJSON.extent = e), o && (this.sourceJSON.timeInfo.timeExtent = [o.start, o.end]), {\n        dataChanged: !0,\n        updates: {\n          extent: this.sourceJSON.extent,\n          timeInfo: this.sourceJSON.timeInfo\n        }\n      };\n    });\n  }\n  load(t) {\n    const e = o(t) ? t.signal : null;\n    return this.addResolvingPromise(this._startWorker(e)), Promise.resolve(this);\n  }\n  destroy() {\n    this._connection?.close(), this._connection = null;\n  }\n  async openPorts() {\n    return await this.load(), this._connection.openPorts();\n  }\n  async queryFeatures(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    await this.load(e);\n    const o = await this._connection.invoke(\"queryFeatures\", t ? t.toJSON() : null, e);\n    return a.fromJSON(o);\n  }\n  async queryFeaturesJSON(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return await this.load(e), this._connection.invoke(\"queryFeatures\", t ? t.toJSON() : null, e);\n  }\n  async queryFeatureCount(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return await this.load(e), this._connection.invoke(\"queryFeatureCount\", t ? t.toJSON() : null, e);\n  }\n  async queryObjectIds(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return await this.load(e), this._connection.invoke(\"queryObjectIds\", t ? t.toJSON() : null, e);\n  }\n  async queryExtent(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    await this.load(e);\n    const o = await this._connection.invoke(\"queryExtent\", t ? t.toJSON() : null, e);\n    return {\n      count: o.count,\n      extent: c.fromJSON(o.extent)\n    };\n  }\n  async querySnapping(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return await this.load(e), this._connection.invoke(\"querySnapping\", t, e);\n  }\n  async _startWorker(t) {\n    this._connection = await s(\"CSVSourceWorker\", {\n      strategy: has(\"feature-layers-workers\") ? \"dedicated\" : \"local\",\n      signal: t\n    });\n    const {\n        url: e,\n        delimiter: o,\n        fields: r,\n        latitudeField: i,\n        longitudeField: n,\n        spatialReference: a,\n        timeInfo: c\n      } = this.loadOptions,\n      u = await this._connection.invoke(\"load\", {\n        url: e,\n        customParameters: this.customParameters,\n        parsingOptions: {\n          delimiter: o,\n          fields: r?.map(t => t.toJSON()),\n          latitudeField: i,\n          longitudeField: n,\n          spatialReference: a?.toJSON(),\n          timeInfo: c?.toJSON()\n        }\n      }, {\n        signal: t\n      });\n    this.locationInfo = u.locationInfo, this.sourceJSON = u.layerDefinition, this.delimiter = u.delimiter;\n  }\n};\nt([i()], u.prototype, \"type\", void 0), t([i()], u.prototype, \"loadOptions\", void 0), t([i()], u.prototype, \"customParameters\", void 0), t([i()], u.prototype, \"locationInfo\", void 0), t([i()], u.prototype, \"sourceJSON\", void 0), t([i()], u.prototype, \"delimiter\", void 0), u = t([n(\"esri.layers.graphics.sources.CSVSource\")], u);\nexport { u as CSVSource };","map":{"version":3,"names":["_","t","has","e","isSome","o","debounce","r","open","s","property","i","subclass","n","a","c","u","constructor","type","refresh","load","extent","timeExtent","_connection","invoke","sourceJSON","timeInfo","start","end","dataChanged","updates","signal","addResolvingPromise","_startWorker","Promise","resolve","destroy","close","openPorts","queryFeatures","arguments","length","undefined","toJSON","fromJSON","queryFeaturesJSON","queryFeatureCount","queryObjectIds","queryExtent","count","querySnapping","strategy","url","delimiter","fields","latitudeField","longitudeField","spatialReference","loadOptions","customParameters","parsingOptions","map","locationInfo","layerDefinition","prototype","CSVSource"],"sources":["C:/code-challenge-react/client/node_modules/@arcgis/core/layers/graphics/sources/CSVSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import has from\"../../../core/has.js\";import e from\"../../../core/Loadable.js\";import{isSome as o}from\"../../../core/maybe.js\";import{debounce as r}from\"../../../core/promiseUtils.js\";import{open as s}from\"../../../core/workers/workers.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import c from\"../../../geometry/Extent.js\";let u=class extends e{constructor(t){super(t),this.type=\"csv\",this.refresh=r((async t=>{await this.load();const{extent:e,timeExtent:o}=await this._connection.invoke(\"refresh\",t);return e&&(this.sourceJSON.extent=e),o&&(this.sourceJSON.timeInfo.timeExtent=[o.start,o.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}}))}load(t){const e=o(t)?t.signal:null;return this.addResolvingPromise(this._startWorker(e)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}async openPorts(){return await this.load(),this._connection.openPorts()}async queryFeatures(t,e={}){await this.load(e);const o=await this._connection.invoke(\"queryFeatures\",t?t.toJSON():null,e);return a.fromJSON(o)}async queryFeaturesJSON(t,e={}){return await this.load(e),this._connection.invoke(\"queryFeatures\",t?t.toJSON():null,e)}async queryFeatureCount(t,e={}){return await this.load(e),this._connection.invoke(\"queryFeatureCount\",t?t.toJSON():null,e)}async queryObjectIds(t,e={}){return await this.load(e),this._connection.invoke(\"queryObjectIds\",t?t.toJSON():null,e)}async queryExtent(t,e={}){await this.load(e);const o=await this._connection.invoke(\"queryExtent\",t?t.toJSON():null,e);return{count:o.count,extent:c.fromJSON(o.extent)}}async querySnapping(t,e={}){return await this.load(e),this._connection.invoke(\"querySnapping\",t,e)}async _startWorker(t){this._connection=await s(\"CSVSourceWorker\",{strategy:has(\"feature-layers-workers\")?\"dedicated\":\"local\",signal:t});const{url:e,delimiter:o,fields:r,latitudeField:i,longitudeField:n,spatialReference:a,timeInfo:c}=this.loadOptions,u=await this._connection.invoke(\"load\",{url:e,customParameters:this.customParameters,parsingOptions:{delimiter:o,fields:r?.map((t=>t.toJSON())),latitudeField:i,longitudeField:n,spatialReference:a?.toJSON(),timeInfo:c?.toJSON()}},{signal:t});this.locationInfo=u.locationInfo,this.sourceJSON=u.layerDefinition,this.delimiter=u.delimiter}};t([i()],u.prototype,\"type\",void 0),t([i()],u.prototype,\"loadOptions\",void 0),t([i()],u.prototype,\"customParameters\",void 0),t([i()],u.prototype,\"locationInfo\",void 0),t([i()],u.prototype,\"sourceJSON\",void 0),t([i()],u.prototype,\"delimiter\",void 0),u=t([n(\"esri.layers.graphics.sources.CSVSource\")],u);export{u as CSVSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}