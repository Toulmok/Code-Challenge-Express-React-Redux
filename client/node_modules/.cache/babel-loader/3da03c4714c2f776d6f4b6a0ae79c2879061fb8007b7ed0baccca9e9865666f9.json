{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { BucketType as t } from \"../enums.js\";\nimport { VTLSymbol as e } from \"./core.js\";\nfunction s(t, e, s, o, l, i) {\n  const r = s - l;\n  if (r >= 0) return (e >> r) + (o - (i << r)) * (t >> r);\n  const n = -r;\n  return e - (i - (o << n)) * (t >> n) << n;\n}\nclass o {\n  constructor(t, e, s) {\n    this._rows = Math.ceil(e / s), this._columns = Math.ceil(t / s), this._cellSize = s, this.cells = new Array(this._rows);\n    for (let o = 0; o < this._rows; o++) {\n      this.cells[o] = new Array(this._columns);\n      for (let t = 0; t < this._columns; t++) this.cells[o][t] = [];\n    }\n  }\n  getCell(t, e) {\n    const s = Math.min(Math.max(Math.floor(e / this._cellSize), 0), this._rows - 1),\n      o = Math.min(Math.max(Math.floor(t / this._cellSize), 0), this._columns - 1);\n    return this.cells[s] && this.cells[s][o] || null;\n  }\n  getCellSpan(t, e, s, o) {\n    return [Math.min(Math.max(Math.floor(t / this._cellSize), 0), this.columns - 1), Math.min(Math.max(Math.floor(e / this._cellSize), 0), this.rows - 1), Math.min(Math.max(Math.floor(s / this._cellSize), 0), this.columns - 1), Math.min(Math.max(Math.floor(o / this._cellSize), 0), this.rows - 1)];\n  }\n  get cellSize() {\n    return this._cellSize;\n  }\n  get columns() {\n    return this._columns;\n  }\n  get rows() {\n    return this._rows;\n  }\n}\nfunction l(t, s, o, l, i, r) {\n  const n = s[l++];\n  for (let a = 0; a < n; a++) {\n    const n = new e(r);\n    n.xTile = s[l++], n.yTile = s[l++], n.hash = s[l++], n.priority = s[l++];\n    const a = s[l++];\n    for (let t = 0; t < a; t++) {\n      const t = s[l++],\n        e = s[l++],\n        i = s[l++],\n        r = s[l++],\n        a = !!s[l++],\n        c = s[l++],\n        h = o[l++],\n        f = o[l++],\n        u = s[l++],\n        m = s[l++];\n      n.colliders.push({\n        xTile: t,\n        yTile: e,\n        dxPixels: i,\n        dyPixels: r,\n        hard: a,\n        partIndex: c,\n        width: u,\n        height: m,\n        minLod: h,\n        maxLod: f\n      });\n    }\n    const c = t[l++];\n    for (let e = 0; e < c; e++) n.textVertexRanges.push([t[l++], t[l++]]);\n    const h = t[l++];\n    for (let e = 0; e < h; e++) n.iconVertexRanges.push([t[l++], t[l++]]);\n    i.push(n);\n  }\n  return l;\n}\nfunction i(t, e, s) {\n  for (const [o, l] of t.symbols) r(t, e, s, l, o);\n}\nfunction r(e, s, o, l, i) {\n  const r = e.layerData.get(i);\n  if (r.type === t.SYMBOL) {\n    for (const t of l) {\n      const s = t.unique;\n      let l;\n      if (t.selectedForRendering) {\n        const t = s.parts[0],\n          i = t.startOpacity,\n          r = t.targetOpacity;\n        e.allSymbolsFadingOut = e.allSymbolsFadingOut && 0 === r;\n        const n = o ? Math.floor(127 * i) | r << 7 : r ? 255 : 0;\n        l = n << 24 | n << 16 | n << 8 | n;\n      } else l = 0;\n      for (const [e, o] of t.iconVertexRanges) for (let t = e; t < e + o; t += 4) r.iconOpacity[t / 4] = l;\n      if (t.selectedForRendering) {\n        const t = s.parts[1],\n          i = t.startOpacity,\n          r = t.targetOpacity;\n        e.allSymbolsFadingOut = e.allSymbolsFadingOut && 0 === r;\n        const n = o ? Math.floor(127 * i) | r << 7 : r ? 255 : 0;\n        l = n << 24 | n << 16 | n << 8 | n;\n      } else l = 0;\n      for (const [e, o] of t.textVertexRanges) for (let t = e; t < e + o; t += 4) r.textOpacity[t / 4] = l;\n    }\n    r.lastOpacityUpdate = s, r.opacityChanged = !0;\n  }\n}\nexport { o as GridIndex, l as deserializeSymbols, s as tileCoordChange, i as writeOpacityToBuffers };","map":{"version":3,"names":["BucketType","t","VTLSymbol","e","s","o","l","i","r","n","constructor","_rows","Math","ceil","_columns","_cellSize","cells","Array","getCell","min","max","floor","getCellSpan","columns","rows","cellSize","a","xTile","yTile","hash","priority","c","h","f","u","m","colliders","push","dxPixels","dyPixels","hard","partIndex","width","height","minLod","maxLod","textVertexRanges","iconVertexRanges","symbols","layerData","get","type","SYMBOL","unique","selectedForRendering","parts","startOpacity","targetOpacity","allSymbolsFadingOut","iconOpacity","textOpacity","lastOpacityUpdate","opacityChanged","GridIndex","deserializeSymbols","tileCoordChange","writeOpacityToBuffers"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{BucketType as t}from\"../enums.js\";import{VTLSymbol as e}from\"./core.js\";function s(t,e,s,o,l,i){const r=s-l;if(r>=0)return(e>>r)+(o-(i<<r))*(t>>r);const n=-r;return e-(i-(o<<n))*(t>>n)<<n}class o{constructor(t,e,s){this._rows=Math.ceil(e/s),this._columns=Math.ceil(t/s),this._cellSize=s,this.cells=new Array(this._rows);for(let o=0;o<this._rows;o++){this.cells[o]=new Array(this._columns);for(let t=0;t<this._columns;t++)this.cells[o][t]=[]}}getCell(t,e){const s=Math.min(Math.max(Math.floor(e/this._cellSize),0),this._rows-1),o=Math.min(Math.max(Math.floor(t/this._cellSize),0),this._columns-1);return this.cells[s]&&this.cells[s][o]||null}getCellSpan(t,e,s,o){return[Math.min(Math.max(Math.floor(t/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(e/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(s/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(o/this._cellSize),0),this.rows-1)]}get cellSize(){return this._cellSize}get columns(){return this._columns}get rows(){return this._rows}}function l(t,s,o,l,i,r){const n=s[l++];for(let a=0;a<n;a++){const n=new e(r);n.xTile=s[l++],n.yTile=s[l++],n.hash=s[l++],n.priority=s[l++];const a=s[l++];for(let t=0;t<a;t++){const t=s[l++],e=s[l++],i=s[l++],r=s[l++],a=!!s[l++],c=s[l++],h=o[l++],f=o[l++],u=s[l++],m=s[l++];n.colliders.push({xTile:t,yTile:e,dxPixels:i,dyPixels:r,hard:a,partIndex:c,width:u,height:m,minLod:h,maxLod:f})}const c=t[l++];for(let e=0;e<c;e++)n.textVertexRanges.push([t[l++],t[l++]]);const h=t[l++];for(let e=0;e<h;e++)n.iconVertexRanges.push([t[l++],t[l++]]);i.push(n)}return l}function i(t,e,s){for(const[o,l]of t.symbols)r(t,e,s,l,o)}function r(e,s,o,l,i){const r=e.layerData.get(i);if(r.type===t.SYMBOL){for(const t of l){const s=t.unique;let l;if(t.selectedForRendering){const t=s.parts[0],i=t.startOpacity,r=t.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===r;const n=o?Math.floor(127*i)|r<<7:r?255:0;l=n<<24|n<<16|n<<8|n}else l=0;for(const[e,o]of t.iconVertexRanges)for(let t=e;t<e+o;t+=4)r.iconOpacity[t/4]=l;if(t.selectedForRendering){const t=s.parts[1],i=t.startOpacity,r=t.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===r;const n=o?Math.floor(127*i)|r<<7:r?255:0;l=n<<24|n<<16|n<<8|n}else l=0;for(const[e,o]of t.textVertexRanges)for(let t=e;t<e+o;t+=4)r.textOpacity[t/4]=l}r.lastOpacityUpdate=s,r.opacityChanged=!0}}export{o as GridIndex,l as deserializeSymbols,s as tileCoordChange,i as writeOpacityToBuffers};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}