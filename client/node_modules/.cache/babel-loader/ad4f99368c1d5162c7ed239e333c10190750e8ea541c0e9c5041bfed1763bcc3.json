{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { smoothstep as s } from \"../../../core/mathUtils.js\";\nimport { property as r } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { n as o, e as i, g as n, h, l as p } from \"../../../chunks/vec3.js\";\nimport { c, f as m } from \"../../../chunks/vec3f64.js\";\nimport { getReferenceEllipsoid as u } from \"../../../geometry/ellipsoidUtils.js\";\nimport { atmosphereHeight as d } from \"./atmosphereUtils.js\";\nimport { F as l } from \"../../../chunks/FogHaze.glsl.js\";\nimport { FogHazeTechniqueConfiguration as f } from \"./FogTechnique.js\";\nimport { SimpleHazeTechnique as _ } from \"./SimpleHazeTechnique.js\";\nimport { weatherHeightLimit as g } from \"./weather.js\";\nimport { Pos2Tex as b } from \"../webgl-engine/lib/DefaultVertexBufferLayouts.js\";\nimport { createQuadVAO as j } from \"../webgl-engine/lib/glUtil3D.js\";\nimport { PrimitiveType as x } from \"../../webgl/enums.js\";\nconst y = .7,\n  v = 1;\nlet z = class extends t {\n  constructor(e) {\n    super(e), this._passParameters = new l();\n    const t = e.context.renderContext.rctx;\n    this._vao = j(t, b);\n    const s = u(e.view.spatialReference);\n    this._planetRadius = s.radius, this._atmosphereRadius = s.radius + d;\n    const r = new f();\n    r.haze = !0, this._hazeTechnique = e.context.techniqueRepository.acquire(_, r);\n  }\n  destroy() {\n    this._hazeTechnique.release(), this._vao.dispose();\n  }\n  set strength(e) {\n    this._passParameters.hazeStrength = e;\n  }\n  get strength() {\n    return this._passParameters.hazeStrength;\n  }\n  render(e, t) {\n    if (0 === this.view.basemapTerrain.baseOpacity) return;\n    if (this._update(e, t), this._passParameters.hazeAmount <= 0) return;\n    const s = this._hazeTechnique;\n    if (!s.compiled) return void this.context.requestRender();\n    const r = e.offscreenRenderingHelper;\n    r.renderDepthDetached(() => {\n      this._passParameters.depthTexture = r.depthTexture;\n      const t = e.rctx.bindTechnique(s, this._passParameters, e.bindParameters);\n      this._renderSimpleHaze(t, e);\n    });\n  }\n  _renderSimpleHaze(e, t) {\n    const s = t.rctx;\n    s.bindVAO(this._vao), e.assertCompatibleVertexAttributeLocations(this._vao), s.drawArrays(x.TRIANGLE_STRIP, 0, 4);\n  }\n  _update(e, t) {\n    const r = e.bindParameters.camera;\n    o(S, r.eye);\n    const a = Math.max(0, i(S, e.bindParameters.lighting.mainLight.direction)),\n      c = T;\n    n(w, c, 0), h(this._passParameters.hazeColor, w, c, a);\n    const m = p(r.eye),\n      u = m * m;\n    this._passParameters.atmosphereC = u - this._atmosphereRadius * this._atmosphereRadius, this._passParameters.hazeAmount = (1 - s(y * g, v * g, Math.abs(m - this._planetRadius))) * t.amount, this._passParameters.fogStrength = t.strength;\n  }\n  static isSupported(e) {\n    return e.capabilities.depthTexture;\n  }\n};\ne([r({\n  constructOnly: !0\n})], z.prototype, \"context\", void 0), e([r({\n  constructOnly: !0\n})], z.prototype, \"view\", void 0), z = e([a(\"esri.views.3d.environment.SimpleHaze\")], z);\nclass P {\n  constructor() {\n    this.strength = 0, this.amount = 0;\n  }\n}\nconst T = m(.24, .44, .8),\n  S = c(),\n  w = c();\nexport { P as HazeParameters, z as SimpleHaze };","map":{"version":3,"names":["_","e","t","smoothstep","s","property","r","subclass","a","n","o","i","g","h","l","p","c","f","m","getReferenceEllipsoid","u","atmosphereHeight","d","F","FogHazeTechniqueConfiguration","SimpleHazeTechnique","weatherHeightLimit","Pos2Tex","b","createQuadVAO","j","PrimitiveType","x","y","v","z","constructor","_passParameters","context","renderContext","rctx","_vao","view","spatialReference","_planetRadius","radius","_atmosphereRadius","haze","_hazeTechnique","techniqueRepository","acquire","destroy","release","dispose","strength","hazeStrength","render","basemapTerrain","baseOpacity","_update","hazeAmount","compiled","requestRender","offscreenRenderingHelper","renderDepthDetached","depthTexture","bindTechnique","bindParameters","_renderSimpleHaze","bindVAO","assertCompatibleVertexAttributeLocations","drawArrays","TRIANGLE_STRIP","camera","S","eye","Math","max","lighting","mainLight","direction","T","w","hazeColor","atmosphereC","abs","amount","fogStrength","isSupported","capabilities","constructOnly","prototype","P","HazeParameters","SimpleHaze"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/environment/SimpleHaze.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{smoothstep as s}from\"../../../core/mathUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{n as o,e as i,g as n,h,l as p}from\"../../../chunks/vec3.js\";import{c,f as m}from\"../../../chunks/vec3f64.js\";import{getReferenceEllipsoid as u}from\"../../../geometry/ellipsoidUtils.js\";import{atmosphereHeight as d}from\"./atmosphereUtils.js\";import{F as l}from\"../../../chunks/FogHaze.glsl.js\";import{FogHazeTechniqueConfiguration as f}from\"./FogTechnique.js\";import{SimpleHazeTechnique as _}from\"./SimpleHazeTechnique.js\";import{weatherHeightLimit as g}from\"./weather.js\";import{Pos2Tex as b}from\"../webgl-engine/lib/DefaultVertexBufferLayouts.js\";import{createQuadVAO as j}from\"../webgl-engine/lib/glUtil3D.js\";import{PrimitiveType as x}from\"../../webgl/enums.js\";const y=.7,v=1;let z=class extends t{constructor(e){super(e),this._passParameters=new l;const t=e.context.renderContext.rctx;this._vao=j(t,b);const s=u(e.view.spatialReference);this._planetRadius=s.radius,this._atmosphereRadius=s.radius+d;const r=new f;r.haze=!0,this._hazeTechnique=e.context.techniqueRepository.acquire(_,r)}destroy(){this._hazeTechnique.release(),this._vao.dispose()}set strength(e){this._passParameters.hazeStrength=e}get strength(){return this._passParameters.hazeStrength}render(e,t){if(0===this.view.basemapTerrain.baseOpacity)return;if(this._update(e,t),this._passParameters.hazeAmount<=0)return;const s=this._hazeTechnique;if(!s.compiled)return void this.context.requestRender();const r=e.offscreenRenderingHelper;r.renderDepthDetached((()=>{this._passParameters.depthTexture=r.depthTexture;const t=e.rctx.bindTechnique(s,this._passParameters,e.bindParameters);this._renderSimpleHaze(t,e)}))}_renderSimpleHaze(e,t){const s=t.rctx;s.bindVAO(this._vao),e.assertCompatibleVertexAttributeLocations(this._vao),s.drawArrays(x.TRIANGLE_STRIP,0,4)}_update(e,t){const r=e.bindParameters.camera;o(S,r.eye);const a=Math.max(0,i(S,e.bindParameters.lighting.mainLight.direction)),c=T;n(w,c,0),h(this._passParameters.hazeColor,w,c,a);const m=p(r.eye),u=m*m;this._passParameters.atmosphereC=u-this._atmosphereRadius*this._atmosphereRadius,this._passParameters.hazeAmount=(1-s(y*g,v*g,Math.abs(m-this._planetRadius)))*t.amount,this._passParameters.fogStrength=t.strength}static isSupported(e){return e.capabilities.depthTexture}};e([r({constructOnly:!0})],z.prototype,\"context\",void 0),e([r({constructOnly:!0})],z.prototype,\"view\",void 0),z=e([a(\"esri.views.3d.environment.SimpleHaze\")],z);class P{constructor(){this.strength=0,this.amount=0}}const T=m(.24,.44,.8),S=c(),w=c();export{P as HazeParameters,z as SimpleHaze};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}