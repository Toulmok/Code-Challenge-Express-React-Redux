{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t } from \"../../../core/maybe.js\";\nimport { s as r, b as s } from \"../../../chunks/vec3.js\";\nimport { c as i } from \"../../../chunks/vec3f64.js\";\nimport { glLayout as o } from \"./buffer/glUtil.js\";\nimport { newLayout as n } from \"./buffer/InterleavedLayout.js\";\nimport { newDoubleArray as f } from \"../webgl-engine/lib/DoubleArray.js\";\nimport { VertexArrayObject as u } from \"../webgl-engine/lib/VertexArrayObject.js\";\nimport { VertexAttribute as a } from \"../webgl-engine/lib/VertexAttribute.js\";\nimport { attributeLocations as c } from \"../webgl-engine/shaders/LaserlinePathTechnique.js\";\nimport { BufferObject as h } from \"../../webgl/BufferObject.js\";\nimport { PrimitiveType as l, Usage as _ } from \"../../webgl/enums.js\";\nclass d {\n  constructor(e) {\n    this._renderCoordsHelper = e, this._buffers = null, this._origin = i(), this._dirty = !1, this._count = 0, this._vao = null;\n  }\n  set vertices(e) {\n    const t = f(3 * e.length);\n    let r = 0;\n    for (const s of e) t[r++] = s[0], t[r++] = s[1], t[r++] = s[2];\n    this.buffers = [t];\n  }\n  set buffers(e) {\n    if (this._buffers = e, this._buffers.length > 0) {\n      const e = this._buffers[0],\n        t = 3 * Math.floor(e.length / 3 / 2);\n      r(this._origin, e[t + 0], e[t + 1], e[t + 2]);\n    } else r(this._origin, 0, 0, 0);\n    this._dirty = !0;\n  }\n  get origin() {\n    return this._origin;\n  }\n  draw(t) {\n    const r = this._ensureVAO(t);\n    e(r) && (t.bindVAO(r), t.drawArrays(l.TRIANGLES, 0, this._count));\n  }\n  dispose() {\n    e(this._vao) && this._vao.dispose();\n  }\n  _ensureVAO(e) {\n    return t(this._buffers) ? null : (t(this._vao) && (this._vao = this._createVAO(e, this._buffers)), this._ensureVertexData(this._vao, this._buffers), this._vao);\n  }\n  _createVAO(e, t) {\n    const r = this._createDataBuffer(t);\n    return this._dirty = !1, new u(e, c, {\n      data: o(V)\n    }, {\n      data: h.createVertex(e, _.STATIC_DRAW, r)\n    });\n  }\n  _ensureVertexData(e, t) {\n    if (!this._dirty) return;\n    const r = this._createDataBuffer(t);\n    e.vertexBuffers.data?.setData(r), this._dirty = !1;\n  }\n  _numberOfRenderVertices(e) {\n    return 3 * (2 * (e.length / 3 - 1));\n  }\n  _createDataBuffer(e) {\n    const t = e.reduce((e, t) => e + this._numberOfRenderVertices(t), 0);\n    this._count = t;\n    const i = V.createBuffer(t),\n      o = this._origin;\n    let n = 0,\n      f = 0;\n    for (const u of e) {\n      for (let e = 0; e < u.length; e += 3) {\n        const t = r(m, u[e + 0], u[e + 1], u[e + 2]);\n        0 === e ? f = this._renderCoordsHelper.getAltitude(t) : this._renderCoordsHelper.setAltitude(t, f);\n        const a = this._renderCoordsHelper.worldUpAtPosition(t, b),\n          c = n + 2 * e,\n          h = s(m, t, o);\n        if (e < u.length - 3) {\n          i.up.setVec(c, a), i.up.setVec(c + 3, a), i.up.setVec(c + 5, a);\n          for (let e = 0; e < 6; e++) i.start.setVec(c + e, h);\n          i.extrude.setValues(c + 0, 0, -1), i.extrude.setValues(c + 1, 1, -1), i.extrude.setValues(c + 2, 1, 1), i.extrude.setValues(c + 3, 0, -1), i.extrude.setValues(c + 4, 1, 1), i.extrude.setValues(c + 5, 0, 1);\n        }\n        if (e > 0) {\n          i.up.setVec(c - 2, a), i.up.setVec(c - 4, a), i.up.setVec(c - 5, a);\n          for (let e = -6; e < 0; e++) i.end.setVec(c + e, h);\n        }\n      }\n      n += this._numberOfRenderVertices(u);\n    }\n    return i.buffer;\n  }\n}\nconst b = i(),\n  m = i(),\n  V = n().vec3f(a.START).vec3f(a.END).vec3f(a.UP).vec2f(a.EXTRUDE);\nexport { d as LaserlinePathData };","map":{"version":3,"names":["isSome","e","isNone","t","s","r","b","c","i","glLayout","o","newLayout","n","newDoubleArray","f","VertexArrayObject","u","VertexAttribute","a","attributeLocations","BufferObject","h","PrimitiveType","l","Usage","_","d","constructor","_renderCoordsHelper","_buffers","_origin","_dirty","_count","_vao","vertices","length","buffers","Math","floor","origin","draw","_ensureVAO","bindVAO","drawArrays","TRIANGLES","dispose","_createVAO","_ensureVertexData","_createDataBuffer","data","V","createVertex","STATIC_DRAW","vertexBuffers","setData","_numberOfRenderVertices","reduce","createBuffer","m","getAltitude","setAltitude","worldUpAtPosition","up","setVec","start","extrude","setValues","end","buffer","vec3f","START","END","UP","vec2f","EXTRUDE","LaserlinePathData"],"sources":["C:/code-challenge-react/frontend/node_modules/@arcgis/core/views/3d/support/LaserlinePathData.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";import{s as r,b as s}from\"../../../chunks/vec3.js\";import{c as i}from\"../../../chunks/vec3f64.js\";import{glLayout as o}from\"./buffer/glUtil.js\";import{newLayout as n}from\"./buffer/InterleavedLayout.js\";import{newDoubleArray as f}from\"../webgl-engine/lib/DoubleArray.js\";import{VertexArrayObject as u}from\"../webgl-engine/lib/VertexArrayObject.js\";import{VertexAttribute as a}from\"../webgl-engine/lib/VertexAttribute.js\";import{attributeLocations as c}from\"../webgl-engine/shaders/LaserlinePathTechnique.js\";import{BufferObject as h}from\"../../webgl/BufferObject.js\";import{PrimitiveType as l,Usage as _}from\"../../webgl/enums.js\";class d{constructor(e){this._renderCoordsHelper=e,this._buffers=null,this._origin=i(),this._dirty=!1,this._count=0,this._vao=null}set vertices(e){const t=f(3*e.length);let r=0;for(const s of e)t[r++]=s[0],t[r++]=s[1],t[r++]=s[2];this.buffers=[t]}set buffers(e){if(this._buffers=e,this._buffers.length>0){const e=this._buffers[0],t=3*Math.floor(e.length/3/2);r(this._origin,e[t+0],e[t+1],e[t+2])}else r(this._origin,0,0,0);this._dirty=!0}get origin(){return this._origin}draw(t){const r=this._ensureVAO(t);e(r)&&(t.bindVAO(r),t.drawArrays(l.TRIANGLES,0,this._count))}dispose(){e(this._vao)&&this._vao.dispose()}_ensureVAO(e){return t(this._buffers)?null:(t(this._vao)&&(this._vao=this._createVAO(e,this._buffers)),this._ensureVertexData(this._vao,this._buffers),this._vao)}_createVAO(e,t){const r=this._createDataBuffer(t);return this._dirty=!1,new u(e,c,{data:o(V)},{data:h.createVertex(e,_.STATIC_DRAW,r)})}_ensureVertexData(e,t){if(!this._dirty)return;const r=this._createDataBuffer(t);e.vertexBuffers.data?.setData(r),this._dirty=!1}_numberOfRenderVertices(e){return 3*(2*(e.length/3-1))}_createDataBuffer(e){const t=e.reduce(((e,t)=>e+this._numberOfRenderVertices(t)),0);this._count=t;const i=V.createBuffer(t),o=this._origin;let n=0,f=0;for(const u of e){for(let e=0;e<u.length;e+=3){const t=r(m,u[e+0],u[e+1],u[e+2]);0===e?f=this._renderCoordsHelper.getAltitude(t):this._renderCoordsHelper.setAltitude(t,f);const a=this._renderCoordsHelper.worldUpAtPosition(t,b),c=n+2*e,h=s(m,t,o);if(e<u.length-3){i.up.setVec(c,a),i.up.setVec(c+3,a),i.up.setVec(c+5,a);for(let e=0;e<6;e++)i.start.setVec(c+e,h);i.extrude.setValues(c+0,0,-1),i.extrude.setValues(c+1,1,-1),i.extrude.setValues(c+2,1,1),i.extrude.setValues(c+3,0,-1),i.extrude.setValues(c+4,1,1),i.extrude.setValues(c+5,0,1)}if(e>0){i.up.setVec(c-2,a),i.up.setVec(c-4,a),i.up.setVec(c-5,a);for(let e=-6;e<0;e++)i.end.setVec(c+e,h)}}n+=this._numberOfRenderVertices(u)}return i.buffer}}const b=i(),m=i(),V=n().vec3f(a.START).vec3f(a.END).vec3f(a.UP).vec2f(a.EXTRUDE);export{d as LaserlinePathData};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}